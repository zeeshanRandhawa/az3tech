/*! For license information please see main.287ef370.js.LICENSE.txt */
!function(){var t={2469:function(t,e){"use strict";var n=function(){function t(){this._events={}}return t.prototype.on=function(t,e,n){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:e,once:!!n}),this},t.prototype.once=function(t,e){return this.on(t,e,!0)},t.prototype.emit=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this._events[t]||[],o=this._events["*"]||[],a=function(r){for(var i=r.length,o=0;o<i;o++)if(r[o]){var a=r[o],s=a.callback;a.once&&(r.splice(o,1),0===r.length&&delete e._events[t],i--,o--),s.apply(e,n)}};a(i),a(o)},t.prototype.off=function(t,e){if(t)if(e){for(var n=this._events[t]||[],r=n.length,i=0;i<r;i++)n[i].callback===e&&(n.splice(i,1),r--,i--);0===n.length&&delete this._events[t]}else delete this._events[t];else this._events={};return this},t.prototype.getEvents=function(){return this._events},t}();e.Z=n},9753:function(t,e,n){"use strict";var r=n(9388),i=n(2469),o=n(2489),a=function(t){function e(e){var n=t.call(this)||this;n.destroyed=!1;var r=n.getDefaultCfg();return n.cfg=(0,o.CD)(r,e),n}return(0,r.ZT)(e,t),e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,e){this.cfg[t]=e},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(i.Z);e.Z=a},7214:function(t,e,n){"use strict";n.d(e,{Z:function(){return Nt}});var r,i,o=n(9388),a=n(9761),s=n(6277),l=n(2489),c=n(3415),u=0,h=0,p=0,d=1e3,f=0,g=0,m=0,y="object"===typeof performance&&performance.now?performance:Date,v="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function x(){return g||(v(_),g=y.now()+m)}function _(){g=0}function b(){this._call=this._time=this._next=null}function w(t,e,n){var r=new b;return r.restart(t,e,n),r}function S(){g=(f=y.now())+m,u=h=0;try{!function(){x(),++u;for(var t,e=r;e;)(t=g-e._time)>=0&&e._call.call(null,t),e=e._next;--u}()}finally{u=0,function(){var t,e,n=r,o=1/0;for(;n;)n._call?(o>n._time&&(o=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:r=e);i=t,E(o)}(),g=0}}function C(){var t=y.now(),e=t-f;e>d&&(m-=e,f=t)}function E(t){u||(h&&(h=clearTimeout(h)),t-g>24?(t<1/0&&(h=setTimeout(S,t-y.now()-m)),p&&(p=clearInterval(p))):(p||(f=y.now(),p=setInterval(C,d)),u=1,v(S)))}function k(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function M(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function T(){}b.prototype=w.prototype={constructor:b,restart:function(t,e,n){if("function"!==typeof t)throw new TypeError("callback is not a function");n=(null==n?x():+n)+(null==e?0:+e),this._next||i===this||(i?i._next=this:r=this,i=this),this._call=t,this._time=n,E()},stop:function(){this._call&&(this._call=null,this._time=1/0,E())}};var I=.7,P=1/I,O="\\s*([+-]?\\d+)\\s*",A="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",D="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",R=/^#([0-9a-f]{3,8})$/,L=new RegExp("^rgb\\("+[O,O,O]+"\\)$"),N=new RegExp("^rgb\\("+[D,D,D]+"\\)$"),F=new RegExp("^rgba\\("+[O,O,O,A]+"\\)$"),z=new RegExp("^rgba\\("+[D,D,D,A]+"\\)$"),B=new RegExp("^hsl\\("+[A,D,D]+"\\)$"),$=new RegExp("^hsla\\("+[A,D,D,A]+"\\)$"),j={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function U(){return this.rgb().formatHex()}function V(){return this.rgb().formatRgb()}function H(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=R.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?G(e):3===n?new q(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?W(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?W(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=L.exec(t))?new q(e[1],e[2],e[3],1):(e=N.exec(t))?new q(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=F.exec(t))?W(e[1],e[2],e[3],e[4]):(e=z.exec(t))?W(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=B.exec(t))?J(e[1],e[2]/100,e[3]/100,1):(e=$.exec(t))?J(e[1],e[2]/100,e[3]/100,e[4]):j.hasOwnProperty(t)?G(j[t]):"transparent"===t?new q(NaN,NaN,NaN,0):null}function G(t){return new q(t>>16&255,t>>8&255,255&t,1)}function W(t,e,n,r){return r<=0&&(t=e=n=NaN),new q(t,e,n,r)}function X(t,e,n,r){return 1===arguments.length?((i=t)instanceof T||(i=H(i)),i?new q((i=i.rgb()).r,i.g,i.b,i.opacity):new q):new q(t,e,n,null==r?1:r);var i}function q(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Y(){return"#"+K(this.r)+K(this.g)+K(this.b)}function Z(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function K(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function J(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new tt(t,e,n,r)}function Q(t){if(t instanceof tt)return new tt(t.h,t.s,t.l,t.opacity);if(t instanceof T||(t=H(t)),!t)return new tt;if(t instanceof tt)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new tt(a,s,l,t.opacity)}function tt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function et(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function nt(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}k(T,H,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:U,formatHex:U,formatHsl:function(){return Q(this).formatHsl()},formatRgb:V,toString:V}),k(q,X,M(T,{brighter:function(t){return t=null==t?P:Math.pow(P,t),new q(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?I:Math.pow(I,t),new q(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Y,formatHex:Y,formatRgb:Z,toString:Z})),k(tt,(function(t,e,n,r){return 1===arguments.length?Q(t):new tt(t,e,n,null==r?1:r)}),M(T,{brighter:function(t){return t=null==t?P:Math.pow(P,t),new tt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?I:Math.pow(I,t),new tt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new q(et(t>=240?t-240:t+120,i,r),et(t,i,r),et(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var rt=t=>()=>t;function it(t,e){return function(n){return t+n*e}}function ot(t){return 1===(t=+t)?at:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):rt(isNaN(e)?n:e)}}function at(t,e){var n=e-t;return n?it(t,n):rt(isNaN(t)?e:t)}var st=function t(e){var n=ot(e);function r(t,e){var r=n((t=X(t)).r,(e=X(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=at(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function lt(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=X(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}lt((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return nt((n-r/e)*e,a,i,o,s)}})),lt((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return nt((n-r/e)*e,i,o,a,s)}}));function ct(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function ut(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ht(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=vt(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}function pt(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function dt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function ft(t,e){var n,r={},i={};for(n in null!==t&&"object"===typeof t||(t={}),null!==e&&"object"===typeof e||(e={}),e)n in t?r[n]=vt(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var gt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mt=new RegExp(gt.source,"g");function yt(t,e){var n,r,i,o=gt.lastIndex=mt.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=gt.exec(t))&&(r=mt.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:dt(n,r)})),o=mt.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}function vt(t,e){var n,r=typeof e;return null==e||"boolean"===r?rt(e):("number"===r?dt:"string"===r?(n=H(e))?(e=n,st):yt:e instanceof H?st:e instanceof Date?pt:ut(e)?ct:Array.isArray(e)?ht:"function"!==typeof e.valueOf&&"function"!==typeof e.toString||isNaN(e)?ft:dt)(t,e)}var xt=n(3169),_t=n(1607),bt=function(t){return["fill","stroke","fillStyle","strokeStyle"].includes(t)},wt=function(t){return/^[r,R,L,l]{1}[\s]*\(/.test(t)},St=[1,0,0,0,1,0,0,0,1];function Ct(t,e,n){var r,i=e.startTime;if(n<i+e.delay||e._paused)return!1;var o=e.duration,a=e.easing,s=(0,xt._)(a);if(n=n-i-e.delay,e.repeat)r=s(r=n%o/o);else{if(!((r=n/o)<1))return e.onFrame?t.attr(e.onFrame(1)):t.attr(e.toAttrs),!0;r=s(r)}if(e.onFrame){var l=e.onFrame(r);t.attr(l)}else!function(t,e,n){var r={},i=e.fromAttrs,o=e.toAttrs;if(!t.destroyed){var a,s,l;for(var u in o)if(!(0,c.Xy)(i[u],o[u]))if("path"===u){var h=o[u],p=i[u];h.length>p.length?(h=_t.parsePathString(o[u]),p=_t.parsePathString(i[u]),p=_t.fillPathByDiff(p,h),p=_t.formatPath(p,h),e.fromAttrs.path=p,e.toAttrs.path=h):e.pathFormatted||(h=_t.parsePathString(o[u]),p=_t.parsePathString(i[u]),p=_t.formatPath(p,h),e.fromAttrs.path=p,e.toAttrs.path=h,e.pathFormatted=!0),r[u]=[];for(var d=0;d<h.length;d++){for(var f=h[d],g=p[d],m=[],y=0;y<f.length;y++)(0,c.hj)(f[y])&&g&&(0,c.hj)(g[y])?(a=vt(g[y],f[y]),m.push(a(n))):m.push(f[y]);r[u].push(m)}}else if("matrix"===u){var v=(s=i[u]||St,(ut(l=o[u]||St)?ct:ht)(s,l))(n);r[u]=v}else bt(u)&&wt(o[u])?r[u]=o[u]:(0,c.mf)(o[u])||(a=vt(i[u],o[u]),r[u]=a(n));t.attr(r)}}(t,e,r);return!1}var Et=function(){function t(t){this.animators=[],this.current=0,this.timer=null,this.canvas=t}return t.prototype.initTimer=function(){var t,e,n,r=this;this.timer=w((function(i){if(r.current=i,r.animators.length>0){for(var o=r.animators.length-1;o>=0;o--)if((t=r.animators[o]).destroyed)r.removeAnimator(o);else{if(!t.isAnimatePaused())for(var a=(e=t.get("animations")).length-1;a>=0;a--)n=e[a],Ct(t,n,i)&&(e.splice(a,1),!1,n.callback&&n.callback());0===e.length&&r.removeAnimator(o)}r.canvas.get("autoDraw")||r.canvas.draw()}}))},t.prototype.addAnimator=function(t){this.animators.push(t)},t.prototype.removeAnimator=function(t){this.animators.splice(t,1)},t.prototype.isAnimating=function(){return!!this.animators.length},t.prototype.stop=function(){this.timer&&this.timer.stop()},t.prototype.stopAllAnimations=function(t){void 0===t&&(t=!0),this.animators.forEach((function(e){e.stopAnimate(t)})),this.animators=[],this.canvas.draw()},t.prototype.getTime=function(){return this.current},t}(),kt=Et,Mt=n(9168),Tt=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function It(t,e,n){n.name=e,n.target=t,n.currentTarget=t,n.delegateTarget=t,t.emit(e,n)}function Pt(t,e,n){if(n.bubbles){var r=void 0,i=!1;if("mouseenter"===e?(r=n.fromShape,i=!0):"mouseleave"===e&&(i=!0,r=n.toShape),t.isCanvas()&&i)return;if(r&&(0,l.UY)(t,r))return void(n.bubbles=!1);n.name=e,n.currentTarget=t,n.delegateTarget=t,t.emit(e,n)}}var Ot=function(){function t(t){var e=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(t){var n=t.type;e._triggerEvent(n,t)},this._onDocumentMove=function(t){if(e.canvas.get("el")!==t.target&&(e.dragging||e.currentShape)){var n=e._getPointInfo(t);e.dragging&&e._emitEvent("drag",t,n,e.draggingShape)}},this._onDocumentMouseUp=function(t){if(e.canvas.get("el")!==t.target&&e.dragging){var n=e._getPointInfo(t);e.draggingShape&&e._emitEvent("drop",t,n,null),e._emitEvent("dragend",t,n,e.draggingShape),e._afterDrag(e.draggingShape,n,t)}},this.canvas=t.canvas}return t.prototype.init=function(){this._bindEvents()},t.prototype._bindEvents=function(){var t=this,e=this.canvas.get("el");(0,l.S6)(Tt,(function(n){e.addEventListener(n,t._eventCallback)})),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._clearEvents=function(){var t=this,e=this.canvas.get("el");(0,l.S6)(Tt,(function(n){e.removeEventListener(n,t._eventCallback)})),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._getEventObj=function(t,e,n,r,i,o){var a=new Mt.Z(t,e);return a.fromShape=i,a.toShape=o,a.x=n.x,a.y=n.y,a.clientX=n.clientX,a.clientY=n.clientY,a.propagationPath.push(r),a},t.prototype._getShape=function(t,e){return this.canvas.getShape(t.x,t.y,e)},t.prototype._getPointInfo=function(t){var e=this.canvas,n=e.getClientByEvent(t),r=e.getPointByEvent(t);return{x:r.x,y:r.y,clientX:n.x,clientY:n.y}},t.prototype._triggerEvent=function(t,e){var n=this._getPointInfo(e),r=this._getShape(n,e),i=this["_on"+t],o=!1;if(i)i.call(this,n,r,e);else{var a=this.currentShape;"mouseenter"===t||"dragenter"===t||"mouseover"===t?(this._emitEvent(t,e,n,null,null,r),r&&this._emitEvent(t,e,n,r,null,r),"mouseenter"===t&&this.draggingShape&&this._emitEvent("dragenter",e,n,null)):"mouseleave"===t||"dragleave"===t||"mouseout"===t?(o=!0,a&&this._emitEvent(t,e,n,a,a,null),this._emitEvent(t,e,n,null,a,null),"mouseleave"===t&&this.draggingShape&&this._emitEvent("dragleave",e,n,null)):this._emitEvent(t,e,n,r,null,null)}if(o||(this.currentShape=r),r&&!r.get("destroyed")){var s=this.canvas;s.get("el").style.cursor=r.attr("cursor")||s.get("cursor")}},t.prototype._onmousedown=function(t,e,n){0===n.button&&(this.mousedownShape=e,this.mousedownPoint=t,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,t,e,null,null)},t.prototype._emitMouseoverEvents=function(t,e,n,r){var i=this.canvas.get("el");n!==r&&(n&&(this._emitEvent("mouseout",t,e,n,n,r),this._emitEvent("mouseleave",t,e,n,n,r),r&&!r.get("destroyed")||(i.style.cursor=this.canvas.get("cursor"))),r&&(this._emitEvent("mouseover",t,e,r,n,r),this._emitEvent("mouseenter",t,e,r,n,r)))},t.prototype._emitDragoverEvents=function(t,e,n,r,i){r?(r!==n&&(n&&this._emitEvent("dragleave",t,e,n,n,r),this._emitEvent("dragenter",t,e,r,n,r)),i||this._emitEvent("dragover",t,e,r)):n&&this._emitEvent("dragleave",t,e,n,n,r),i&&this._emitEvent("dragover",t,e,r)},t.prototype._afterDrag=function(t,e,n){t&&(t.set("capture",!0),this.draggingShape=null),this.dragging=!1;var r=this._getShape(e,n);r!==t&&this._emitMouseoverEvents(n,e,t,r),this.currentShape=r},t.prototype._onmouseup=function(t,e,n){if(0===n.button){var r=this.draggingShape;this.dragging?(r&&this._emitEvent("drop",n,t,e),this._emitEvent("dragend",n,t,r),this._afterDrag(r,t,n)):(this._emitEvent("mouseup",n,t,e),e===this.mousedownShape&&this._emitEvent("click",n,t,e),this.mousedownShape=null,this.mousedownPoint=null)}},t.prototype._ondragover=function(t,e,n){n.preventDefault();var r=this.currentShape;this._emitDragoverEvents(n,t,r,e,!0)},t.prototype._onmousemove=function(t,e,n){var r=this.canvas,i=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(n,t,i,e,!1),this._emitEvent("drag",n,t,o);else{var a=this.mousedownPoint;if(a){var s=this.mousedownShape,l=n.timeStamp-this.mousedownTimeStamp,c=a.clientX-t.clientX,u=a.clientY-t.clientY;l>120||c*c+u*u>40?s&&s.get("draggable")?((o=this.mousedownShape).set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",n,t,o),this.mousedownShape=null,this.mousedownPoint=null):!s&&r.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,t,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e)):(this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e))}else this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e)}},t.prototype._emitEvent=function(t,e,n,r,i,o){var a=this._getEventObj(t,e,n,r,i,o);if(r){a.shape=r,It(r,t,a);for(var s=r.getParent();s;)s.emitDelegation(t,a),a.propagationStopped||Pt(s,t,a),a.propagationPath.push(s),s=s.getParent()}else{It(this.canvas,t,a)}},t.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},t}(),At=Ot,Dt=(0,a.qY)(),Rt=Dt&&"firefox"===Dt.name,Lt=function(t){function e(e){var n=t.call(this,e)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return(0,o.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.cursor="default",e.supportCSSTransform=!1,e},e.prototype.initContainer=function(){var t=this.get("container");(0,l.HD)(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t),this.get("container").appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new At({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new kt(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,e){var n=this.get("el");l.jU&&(n.style.width=t+"px",n.style.height=e+"px")},e.prototype.changeSize=function(t,e){this.setDOMSize(t,e),this.set("width",t),this.set("height",e),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var e=this.get("el");l.jU&&e&&(e.style.cursor=t)},e.prototype.getPointByEvent=function(t){if(this.get("supportCSSTransform")){if(Rt&&!(0,l.kK)(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!(0,l.kK)(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var e=this.getClientByEvent(t),n=e.x,r=e.y;return this.getPointByClient(n,r)},e.prototype.getClientByEvent=function(t){var e=t;return t.touches&&(e="touchend"===t.type?t.changedTouches[0]:t.touches[0]),{x:e.clientX,y:e.clientY}},e.prototype.getPointByClient=function(t,e){var n=this.get("el").getBoundingClientRect();return{x:t-n.left,y:e-n.top}},e.prototype.getClientByPoint=function(t,e){var n=this.get("el").getBoundingClientRect();return{x:t+n.left,y:e+n.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){this.get("eventController").destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var e=this.get("timeline");this.get("destroyed")||(this.clear(),e&&e.stop(),this.clearEvents(),this.removeDom(),t.prototype.destroy.call(this))},e}(s.Z),Nt=Lt},6277:function(t,e,n){"use strict";var r=n(9388),i=n(5597),o=n(2489),a={},s="_INDEX";function l(t,e){if(t.set("canvas",e),t.isGroup()){var n=t.get("children");n.length&&n.forEach((function(t){l(t,e)}))}}function c(t,e){if(t.set("timeline",e),t.isGroup()){var n=t.get("children");n.length&&n.forEach((function(t){c(t,e)}))}}var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,i=this.getChildren().filter((function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&t.getChildren().length>0)}));return i.length>0?(0,o.S6)(i,(function(i){var o=i.getBBox(),a=o.minX,s=o.maxX,l=o.minY,c=o.maxY;a<t&&(t=a),s>e&&(e=s),l<n&&(n=l),c>r&&(r=c)})):(t=0,e=0,n=0,r=0),{x:t,y:n,minX:t,minY:n,maxX:e,maxY:r,width:e-t,height:r-n}},e.prototype.getCanvasBBox=function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,i=this.getChildren().filter((function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&t.getChildren().length>0)}));return i.length>0?(0,o.S6)(i,(function(i){var o=i.getCanvasBBox(),a=o.minX,s=o.maxX,l=o.minY,c=o.maxY;a<t&&(t=a),s>e&&(e=s),l<n&&(n=l),c>r&&(r=c)})):(t=0,e=0,n=0,r=0),{x:t,y:n,minX:t,minY:n,maxX:e,maxY:r,width:e-t,height:r-n}},e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.children=[],e},e.prototype.onAttrChange=function(e,n,r){if(t.prototype.onAttrChange.call(this,e,n,r),"matrix"===e){var i=this.getTotalMatrix();this._applyChildrenMarix(i)}},e.prototype.applyMatrix=function(e){var n=this.getTotalMatrix();t.prototype.applyMatrix.call(this,e);var r=this.getTotalMatrix();r!==n&&this._applyChildrenMarix(r)},e.prototype._applyChildrenMarix=function(t){var e=this.getChildren();(0,o.S6)(e,(function(e){e.applyMatrix(t)}))},e.prototype.addShape=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0],r=t[1];(0,o.Kn)(n)?r=n:r.type=n;var i=a[r.type];i||(i=(0,o.jC)(r.type),a[r.type]=i);var s=new(this.getShapeBase()[i])(r);return this.add(s),s},e.prototype.addGroup=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,r=t[0],i=t[1];if((0,o.mf)(r))n=new r(i||{parent:this});else{var a=r||{};n=new(this.getGroupBase())(a)}return this.add(n),n},e.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},e.prototype.getShape=function(t,e,n){if(!(0,o.pP)(this))return null;var r,i=this.getChildren();if(this.isCanvas())r=this._findShape(i,t,e,n);else{var a=[t,e,1];a=this.invertFromMatrix(a),this.isClipped(a[0],a[1])||(r=this._findShape(i,a[0],a[1],n))}return r},e.prototype._findShape=function(t,e,n,r){for(var i=null,a=t.length-1;a>=0;a--){var s=t[a];if((0,o.pP)(s)&&(s.isGroup()?i=s.getShape(e,n,r):s.isHit(e,n)&&(i=s)),i)break}return i},e.prototype.add=function(t){var e=this.getCanvas(),n=this.getChildren(),r=this.get("timeline"),i=t.getParent();i&&function(t,e,n){void 0===n&&(n=!0),n?e.destroy():(e.set("parent",null),e.set("canvas",null)),(0,o.As)(t.getChildren(),e)}(i,t,!1),t.set("parent",this),e&&l(t,e),r&&c(t,r),n.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var e=this.getTotalMatrix();e&&t.applyMatrix(e)},e.prototype.getChildren=function(){return this.get("children")},e.prototype.sort=function(){var t,e=this.getChildren();(0,o.S6)(e,(function(t,e){return t[s]=e,t})),e.sort((t=function(t,e){return t.get("zIndex")-e.get("zIndex")},function(e,n){var r=t(e,n);return 0===r?e[s]-n[s]:r})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),e=t.length-1;e>=0;e--)t[e].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),t.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){return this.getChildren()[t]},e.prototype.getCount=function(){return this.getChildren().length},e.prototype.contain=function(t){return this.getChildren().indexOf(t)>-1},e.prototype.removeChild=function(t,e){void 0===e&&(e=!0),this.contain(t)&&t.remove(e)},e.prototype.findAll=function(t){var e=[],n=this.getChildren();return(0,o.S6)(n,(function(n){t(n)&&e.push(n),n.isGroup()&&(e=e.concat(n.findAll(t)))})),e},e.prototype.find=function(t){var e=null,n=this.getChildren();return(0,o.S6)(n,(function(n){if(t(n)?e=n:n.isGroup()&&(e=n.find(t)),e)return!1})),e},e.prototype.findById=function(t){return this.find((function(e){return e.get("id")===t}))},e.prototype.findByClassName=function(t){return this.find((function(e){return e.get("className")===t}))},e.prototype.findAllByName=function(t){return this.findAll((function(e){return e.get("name")===t}))},e}(i.Z);e.Z=u},5597:function(t,e,n){"use strict";var r=n(9388),i=n(3415),o=n(6403),a=n(2489),s=n(5313),l=n(9753),c=o.vs,u="matrix",h=["zIndex","capture","visible","type"],p=["repeat"];function d(t,e){var n={},r=e.attrs;for(var i in t)n[i]=r[i];return n}var f=function(t){function e(e){var n=t.call(this,e)||this;n.attrs={};var r=n.getDefaultAttrs();return(0,i.CD)(r,e.attrs),n.attrs=r,n.initAttrs(r),n.initAnimate(),n}return(0,r.ZT)(e,t),e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],o=e[1];if(!r)return this.attrs;if((0,i.Kn)(r)){for(var a in r)this.setAttr(a,r[a]);return this.afterAttrsChange(r),this}return 2===e.length?(this.setAttr(r,o),this.afterAttrsChange(((t={})[r]=o,t)),this):this.attrs[r]},e.prototype.isClipped=function(t,e){var n=this.getClip();return n&&!n.isHit(t,e)},e.prototype.setAttr=function(t,e){var n=this.attrs[t];n!==e&&(this.attrs[t]=e,this.onAttrChange(t,e,n))},e.prototype.onAttrChange=function(t,e,n){"matrix"===t&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var e=this.cfg.applyTo;e&&e.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var e=this.getParent();return e&&e.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var e=t.getChildren(),n=(this.get("el"),e.indexOf(this));e.splice(n,1),e.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var e=t.getChildren(),n=(this.get("el"),e.indexOf(this));e.splice(n,1),e.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){void 0===t&&(t=!0);var e=this.getParent();e?((0,a.As)(e.getChildren(),this),e.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(u,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(u)},e.prototype.setMatrix=function(t){this.attr(u,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var e=this.attr("matrix"),n=this.cfg.parentMatrix;t=n&&e?(0,s.xq)(n,e):e||n,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var e=this.attr("matrix"),n=null;n=t&&e?(0,s.xq)(t,e):e||t,this.set("totalMatrix",n),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var e=this.attr("matrix");return e?(0,s.rG)(e,t):t},e.prototype.invertFromMatrix=function(t){var e=this.attr("matrix");if(e){var n=(0,s.U_)(e);if(n)return(0,s.rG)(n,t)}return t},e.prototype.setClip=function(t){var e=this.getCanvas(),n=null;if(t){var r=this.getShapeBase()[(0,i.jC)(t.type)];r&&(n=new r({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:e}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,e=this.attrs,n={};(0,i.S6)(e,(function(t,r){(0,i.kJ)(e[r])?n[r]=function(t){for(var e=[],n=0;n<t.length;n++)(0,i.kJ)(t[n])?e.push([].concat(t[n])):e.push(t[n]);return e}(e[r]):n[r]=e[r]}));var r=new(0,this.constructor)({attrs:n});return(0,i.S6)(h,(function(e){r.set(e,t.get(e))})),r},e.prototype.destroy=function(){this.destroyed||(this.attrs={},t.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.get("timeline")||this.get("canvas")){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var r=this.get("animations")||[];n.timer||n.initTimer();var o,a,s,l,c,u=t[0],h=t[1],f=t[2],g=void 0===f?"easeLinear":f,m=t[3],y=void 0===m?i.ZT:m,v=t[4],x=void 0===v?0:v;(0,i.mf)(u)?(o=u,u={}):(0,i.Kn)(u)&&u.onFrame&&(o=u.onFrame,a=u.repeat),(0,i.Kn)(h)?(h=(c=h).duration,g=c.easing||"easeLinear",x=c.delay||0,a=c.repeat||a||!1,y=c.callback||i.ZT,s=c.pauseCallback||i.ZT,l=c.resumeCallback||i.ZT):((0,i.hj)(y)&&(x=y,y=null),(0,i.mf)(g)?(y=g,g="easeLinear"):g=g||"easeLinear");var _=function(t,e){var n={},r=e.attr();return(0,i.S6)(t,(function(t,e){-1!==p.indexOf(e)||(0,i.Xy)(r[e],t)||(n[e]=t)})),n}(u,this),b={fromAttrs:d(_,this),toAttrs:_,duration:h,easing:g,repeat:a,callback:y,pauseCallback:s,resumeCallback:l,delay:x,startTime:n.getTime(),id:(0,i.EL)(),onFrame:o,pathFormatted:!1};r.length>0?r=function(t,e){if(e.onFrame)return t;var n=e.startTime,r=e.delay,o=e.duration,a=Object.prototype.hasOwnProperty;return(0,i.S6)(t,(function(t){n+r<t.startTime+t.delay+t.duration&&o>t.delay&&(0,i.S6)(e.toAttrs,(function(e,n){a.call(t.toAttrs,n)&&(delete t.toAttrs[n],delete t.fromAttrs[n])}))})),t}(r,b):n.addAnimator(this),r.push(b),this.set("animations",r),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var e=this;void 0===t&&(t=!0);var n=this.get("animations");(0,i.S6)(n,(function(n){t&&(n.onFrame?e.attr(n.onFrame(1)):e.attr(n.toAttrs)),n.callback&&n.callback()})),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),e=this.get("animations"),n=t.getTime();return(0,i.S6)(e,(function(t){t._paused=!0,t._pauseTime=n,t.pauseCallback&&t.pauseCallback()})),this.set("_pause",{isPaused:!0,pauseTime:n}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline").getTime(),e=this.get("animations"),n=this.get("_pause").pauseTime;return(0,i.S6)(e,(function(e){e.startTime=e.startTime+(t-n),e._paused=!1,e._pauseTime=null,e.resumeCallback&&e.resumeCallback()})),this.set("_pause",{isPaused:!1}),this.set("animations",e),this},e.prototype.emitDelegation=function(t,e){var n,r=this,o=e.propagationPath;this.getEvents();"mouseenter"===t?n=e.fromShape:"mouseleave"===t&&(n=e.toShape);for(var s=function(t){var s=o[t],c=s.get("name");if(c){if((s.isGroup()||s.isCanvas&&s.isCanvas())&&n&&(0,a.UY)(s,n))return"break";(0,i.kJ)(c)?(0,i.S6)(c,(function(t){r.emitDelegateEvent(s,t,e)})):l.emitDelegateEvent(s,c,e)}},l=this,c=0;c<o.length;c++){if("break"===s(c))break}},e.prototype.emitDelegateEvent=function(t,e,n){var r=this.getEvents(),i=e+":"+n.type;(r[i]||r["*"])&&(n.name=i,n.currentTarget=t,n.delegateTarget=this,n.delegateObject=t.get("delegateObject"),this.emit(i,n))},e.prototype.translate=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var n=this.getMatrix(),r=c(n,[["t",t,e]]);return this.setMatrix(r),this},e.prototype.move=function(t,e){var n=this.attr("x")||0,r=this.attr("y")||0;return this.translate(t-n,e-r),this},e.prototype.moveTo=function(t,e){return this.move(t,e)},e.prototype.scale=function(t,e){var n=this.getMatrix(),r=c(n,[["s",t,e||t]]);return this.setMatrix(r),this},e.prototype.rotate=function(t){var e=this.getMatrix(),n=c(e,[["r",t]]);return this.setMatrix(n),this},e.prototype.rotateAtStart=function(t){var e=this.attr(),n=e.x,r=e.y,i=this.getMatrix(),o=c(i,[["t",-n,-r],["r",t],["t",n,r]]);return this.setMatrix(o),this},e.prototype.rotateAtPoint=function(t,e,n){var r=this.getMatrix(),i=c(r,[["t",-t,-e],["r",n],["t",t,e]]);return this.setMatrix(i),this},e}(l.Z);e.Z=f},9157:function(t,e,n){"use strict";var r=n(9388),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=this.getChildren(),r=0;r<n.length;r++){var i=n[r];e.add(i.clone())}return e},e}(n(6277).Z);e.Z=i},5403:function(t,e,n){"use strict";var r=n(9388),i=n(5597),o=n(5313),a=function(t){function e(e){return t.call(this,e)||this}return(0,r.ZT)(e,t),e.prototype._isInBBox=function(t,e){var n=this.getBBox();return n.minX<=t&&n.maxX>=t&&n.minY<=e&&n.maxY>=e},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(e){t.prototype.applyMatrix.call(this,e),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),e=this.getTotalMatrix(),n=t.minX,r=t.minY,i=t.maxX,a=t.maxY;if(e){var s=(0,o.rG)(e,[t.minX,t.minY]),l=(0,o.rG)(e,[t.maxX,t.minY]),c=(0,o.rG)(e,[t.minX,t.maxY]),u=(0,o.rG)(e,[t.maxX,t.maxY]);n=Math.min(s[0],l[0],c[0],u[0]),i=Math.max(s[0],l[0],c[0],u[0]),r=Math.min(s[1],l[1],c[1],u[1]),a=Math.max(s[1],l[1],c[1],u[1])}var h=this.attrs;if(h.shadowColor){var p=h.shadowBlur,d=void 0===p?0:p,f=h.shadowOffsetX,g=void 0===f?0:f,m=h.shadowOffsetY,y=void 0===m?0:m,v=n-d+g,x=i+d+g,_=r-d+y,b=a+d+y;n=Math.min(n,v),i=Math.max(i,x),r=Math.min(r,_),a=Math.max(a,b)}return{x:n,y:r,minX:n,minY:r,maxX:i,maxY:a,width:i-n,height:a-r}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,e){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,e){var n=this.get("startArrowShape"),r=this.get("endArrowShape"),i=[t,e,1],o=(i=this.invertFromMatrix(i))[0],a=i[1],s=this._isInBBox(o,a);if(this.isOnlyHitBox())return s;if(s&&!this.isClipped(o,a)){if(this.isInShape(o,a))return!0;if(n&&n.isHit(o,a))return!0;if(r&&r.isHit(o,a))return!0}return!1},e}(i.Z);e.Z=a},3169:function(t,e,n){"use strict";n.d(e,{_:function(){return q},C:function(){return Y}});var r={};function i(t){return+t}function o(t){return t*t}function a(t){return t*(2-t)}function s(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function l(t){return t*t*t}function c(t){return--t*t*t+1}function u(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}n.r(r),n.d(r,{easeBack:function(){return U},easeBackIn:function(){return $},easeBackInOut:function(){return U},easeBackOut:function(){return j},easeBounce:function(){return F},easeBounceIn:function(){return N},easeBounceInOut:function(){return z},easeBounceOut:function(){return F},easeCircle:function(){return E},easeCircleIn:function(){return S},easeCircleInOut:function(){return E},easeCircleOut:function(){return C},easeCubic:function(){return u},easeCubicIn:function(){return l},easeCubicInOut:function(){return u},easeCubicOut:function(){return c},easeElastic:function(){return G},easeElasticIn:function(){return H},easeElasticInOut:function(){return W},easeElasticOut:function(){return G},easeExp:function(){return w},easeExpIn:function(){return _},easeExpInOut:function(){return w},easeExpOut:function(){return b},easeLinear:function(){return i},easePoly:function(){return d},easePolyIn:function(){return h},easePolyInOut:function(){return d},easePolyOut:function(){return p},easeQuad:function(){return s},easeQuadIn:function(){return o},easeQuadInOut:function(){return s},easeQuadOut:function(){return a},easeSin:function(){return v},easeSinIn:function(){return m},easeSinInOut:function(){return v},easeSinOut:function(){return y}});var h=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),p=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),d=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),f=Math.PI,g=f/2;function m(t){return 1===+t?1:1-Math.cos(t*g)}function y(t){return Math.sin(t*g)}function v(t){return(1-Math.cos(f*t))/2}function x(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function _(t){return x(1-+t)}function b(t){return 1-x(t)}function w(t){return((t*=2)<=1?x(1-t):2-x(t-1))/2}function S(t){return 1-Math.sqrt(1-t*t)}function C(t){return Math.sqrt(1- --t*t)}function E(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var k=4/11,M=6/11,T=8/11,I=3/4,P=9/11,O=10/11,A=15/16,D=21/22,R=63/64,L=1/k/k;function N(t){return 1-F(1-t)}function F(t){return(t=+t)<k?L*t*t:t<T?L*(t-=M)*t+I:t<O?L*(t-=P)*t+A:L*(t-=D)*t+R}function z(t){return((t*=2)<=1?1-F(1-t):F(t-1)+1)/2}var B=1.70158,$=function t(e){function n(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,n.overshoot=t,n}(B),j=function t(e){function n(t){return--t*t*((t+1)*e+t)+1}return e=+e,n.overshoot=t,n}(B),U=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(B),V=2*Math.PI,H=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=V);function i(t){return e*x(- --t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*V)},i.period=function(n){return t(e,n)},i}(1,.3),G=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=V);function i(t){return 1-e*x(t=+t)*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*V)},i.period=function(n){return t(e,n)},i}(1,.3),W=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=V);function i(t){return((t=2*t-1)<0?e*x(-t)*Math.sin((r-t)/n):2-e*x(t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*V)},i.period=function(n){return t(e,n)},i}(1,.3),X={};function q(t){return X[t.toLowerCase()]||r[t]}function Y(t,e){X[t.toLowerCase()]=e}},3230:function(t,e,n){"use strict";n.d(e,{b:function(){return o},W:function(){return i}});var r=new Map;function i(t,e){r.set(t,e)}function o(t){return r.get(t)}function a(t){var e=t.attr();return{x:e.x,y:e.y,width:e.width,height:e.height}}function s(t){var e=t.attr(),n=e.x,r=e.y,i=e.r;return{x:n-i,y:r-i,width:2*i,height:2*i}}var l=n(1622);function c(t,e){return t&&e?{minX:Math.min(t.minX,e.minX),minY:Math.min(t.minY,e.minY),maxX:Math.max(t.maxX,e.maxX),maxY:Math.max(t.maxY,e.maxY)}:t||e}function u(t,e){var n=t.get("startArrowShape"),r=t.get("endArrowShape");return n&&(e=c(e,n.getCanvasBBox())),r&&(e=c(e,r.getCanvasBBox())),e}var h=n(9341);var p=n(3415),d=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,f=/[^\s\,]+/gi;var g=function(t){var e=t||[];return(0,p.kJ)(e)?e:(0,p.HD)(e)?(e=e.match(d),(0,p.S6)(e,(function(t,n){if((t=t.match(f))[0].length>1){var r=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=r}(0,p.S6)(t,(function(e,n){isNaN(e)||(t[n]=+e)})),e[n]=t})),e):void 0};var m="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029";new RegExp("([a-z])["+m+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+m+"]*,?["+m+"]*)+)","ig"),new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+m+"]*,?["+m+"]*","ig");Math.PI;function y(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function v(t,e){return y(t)*y(e)?(t[0]*e[0]+t[1]*e[1])/(y(t)*y(e)):1}function x(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(v(t,e))}function _(t,e){return t[0]===e[0]&&t[1]===e[1]}function b(t,e){var n=e[1],r=e[2],i=(0,p.wQ)((0,p.c$)(e[3]),2*Math.PI),o=e[4],a=e[5],s=t[0],l=t[1],c=e[6],u=e[7],h=Math.cos(i)*(s-c)/2+Math.sin(i)*(l-u)/2,d=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(l-u)/2,f=h*h/(n*n)+d*d/(r*r);f>1&&(n*=Math.sqrt(f),r*=Math.sqrt(f));var g=n*n*(d*d)+r*r*(h*h),m=g?Math.sqrt((n*n*(r*r)-g)/g):1;o===a&&(m*=-1),isNaN(m)&&(m=0);var y=r?m*n*d/r:0,b=n?m*-r*h/n:0,w=(s+c)/2+Math.cos(i)*y-Math.sin(i)*b,S=(l+u)/2+Math.sin(i)*y+Math.cos(i)*b,C=[(h-y)/n,(d-b)/r],E=[(-1*h-y)/n,(-1*d-b)/r],k=x([1,0],C),M=x(C,E);return v(C,E)<=-1&&(M=Math.PI),v(C,E)>=1&&(M=0),0===a&&M>0&&(M-=2*Math.PI),1===a&&M<0&&(M+=2*Math.PI),{cx:w,cy:S,rx:_(t,[c,u])?0:n,ry:_(t,[c,u])?0:r,startAngle:k,endAngle:k+M,xRotation:i,arcFlag:o,sweepFlag:a}}function w(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function S(t,e){var n=t.prePoint,r=t.currentPoint,i=t.nextPoint,o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),a=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),l=Math.acos((o+a-s)/(2*Math.sqrt(o)*Math.sqrt(a)));if(!l||0===Math.sin(l)||(0,p.vQ)(l,0))return{xExtra:0,yExtra:0};var c=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),u=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return c=c>Math.PI/2?Math.PI-c:c,u=u>Math.PI/2?Math.PI-u:u,{xExtra:Math.cos(l/2-c)*(e/2*(1/Math.sin(l/2)))-e/2||0,yExtra:Math.cos(u-l/2)*(e/2*(1/Math.sin(l/2)))-e/2||0}}i("rect",a),i("image",a),i("circle",s),i("marker",s),i("polyline",(function(t){for(var e=t.attr().points,n=[],r=[],i=0;i<e.length;i++){var o=e[i];n.push(o[0]),r.push(o[1])}var a=l.Zr.getBBoxByArray(n,r),s=a.x,c=a.y,h={minX:s,minY:c,maxX:s+a.width,maxY:c+a.height};return{x:(h=u(t,h)).minX,y:h.minY,width:h.maxX-h.minX,height:h.maxY-h.minY}})),i("polygon",(function(t){for(var e=t.attr().points,n=[],r=[],i=0;i<e.length;i++){var o=e[i];n.push(o[0]),r.push(o[1])}return l.Zr.getBBoxByArray(n,r)})),i("text",(function(t){var e=t.attr(),n=e.x,r=e.y,i=e.text,o=e.fontSize,a=e.lineHeight,s=e.font;s||(s=(0,h.$O)(e));var l,c=(0,h.mY)(i,s);if(c){var u=e.textAlign,p=e.textBaseline,d=(0,h.FE)(i,o,a),f={x:n,y:r-d};u&&("end"===u||"right"===u?f.x-=c:"center"===u&&(f.x-=c/2)),p&&("top"===p?f.y+=d:"middle"===p&&(f.y+=d/2)),l={x:f.x,y:f.y,width:c,height:d}}else l={x:n,y:r,width:0,height:0};return l})),i("path",(function(t){var e=t.attr(),n=e.path,r=e.stroke?e.lineWidth:0,i=t.get("segments")||function(t){for(var e=[],n=null,r=null,i=null,o=0,a=(t=g(t)).length,s=0;s<a;s++){var l=t[s];r=t[s+1];var c=l[0],u={command:c,prePoint:n,params:l,startTangent:null,endTangent:null};switch(c){case"M":i=[l[1],l[2]],o=s;break;case"A":var h=b(n,l);u.arcParams=h}if("Z"===c)n=i,r=t[o+1];else{var p=l.length;n=[l[p-2],l[p-1]]}r&&"Z"===r[0]&&(r=t[o],e[o]&&(e[o].prePoint=n)),u.currentPoint=n,e[o]&&_(n,e[o].currentPoint)&&(e[o].prePoint=u.prePoint);var d=r?[r[r.length-2],r[r.length-1]]:null;u.nextPoint=d;var f=u.prePoint;if(["L","H","V"].includes(c))u.startTangent=[f[0]-n[0],f[1]-n[1]],u.endTangent=[n[0]-f[0],n[1]-f[1]];else if("Q"===c){var m=[l[1],l[2]];u.startTangent=[f[0]-m[0],f[1]-m[1]],u.endTangent=[n[0]-m[0],n[1]-m[1]]}else if("T"===c)m=w((x=e[s-1]).currentPoint,f),"Q"===x.command?(u.command="Q",u.startTangent=[f[0]-m[0],f[1]-m[1]],u.endTangent=[n[0]-m[0],n[1]-m[1]]):(u.command="TL",u.startTangent=[f[0]-n[0],f[1]-n[1]],u.endTangent=[n[0]-f[0],n[1]-f[1]]);else if("C"===c){var y=[l[1],l[2]],v=[l[3],l[4]];u.startTangent=[f[0]-y[0],f[1]-y[1]],u.endTangent=[n[0]-v[0],n[1]-v[1]],0===u.startTangent[0]&&0===u.startTangent[1]&&(u.startTangent=[y[0]-v[0],y[1]-v[1]]),0===u.endTangent[0]&&0===u.endTangent[1]&&(u.endTangent=[v[0]-y[0],v[1]-y[1]])}else if("S"===c){var x;y=w((x=e[s-1]).currentPoint,f),v=[l[1],l[2]],"C"===x.command?(u.command="C",u.startTangent=[f[0]-y[0],f[1]-y[1]],u.endTangent=[n[0]-v[0],n[1]-v[1]]):(u.command="SQ",u.startTangent=[f[0]-v[0],f[1]-v[1]],u.endTangent=[n[0]-v[0],n[1]-v[1]])}else if("A"===c){var S=.001,C=u.arcParams||{},E=C.cx,k=void 0===E?0:E,M=C.cy,T=void 0===M?0:M,I=C.rx,P=void 0===I?0:I,O=C.ry,A=void 0===O?0:O,D=C.sweepFlag,R=void 0===D?0:D,L=C.startAngle,N=void 0===L?0:L,F=C.endAngle,z=void 0===F?0:F;0===R&&(S*=-1);var B=P*Math.cos(N-S)+k,$=A*Math.sin(N-S)+T;u.startTangent=[B-i[0],$-i[1]];var j=P*Math.cos(N+z+S)+k,U=A*Math.sin(N+z-S)+T;u.endTangent=[f[0]-j,f[1]-U]}e.push(u)}return e}(n),o=function(t,e){for(var n=[],r=[],i=[],o=0;o<t.length;o++){var a=(y=t[o]).currentPoint,s=y.params,c=y.prePoint,u=void 0;switch(y.command){case"Q":u=l.lD.box(c[0],c[1],s[1],s[2],s[3],s[4]);break;case"C":u=l.Ll.box(c[0],c[1],s[1],s[2],s[3],s[4],s[5],s[6]);break;case"A":var h=y.arcParams;u=l.wN.box(h.cx,h.cy,h.rx,h.ry,h.xRotation,h.startAngle,h.endAngle);break;default:n.push(a[0]),r.push(a[1])}u&&(y.box=u,n.push(u.x,u.x+u.width),r.push(u.y,u.y+u.height)),e&&("L"===y.command||"M"===y.command)&&y.prePoint&&y.nextPoint&&i.push(y)}n=n.filter((function(t){return!Number.isNaN(t)&&t!==1/0&&t!==-1/0})),r=r.filter((function(t){return!Number.isNaN(t)&&t!==1/0&&t!==-1/0}));var d=(0,p.VV)(n),f=(0,p.VV)(r),g=(0,p.Fp)(n),m=(0,p.Fp)(r);if(0===i.length)return{x:d,y:f,width:g-d,height:m-f};for(o=0;o<i.length;o++){var y;(a=(y=i[o]).currentPoint)[0]===d?d-=S(y,e).xExtra:a[0]===g&&(g+=S(y,e).xExtra),a[1]===f?f-=S(y,e).yExtra:a[1]===m&&(m+=S(y,e).yExtra)}return{x:d,y:f,width:g-d,height:m-f}}(i,r),a=o.x,s=o.y,c={minX:a,minY:s,maxX:a+o.width,maxY:s+o.height};return{x:(c=u(t,c)).minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}})),i("line",(function(t){var e=t.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2,a={minX:Math.min(n,i),maxX:Math.max(n,i),minY:Math.min(r,o),maxY:Math.max(r,o)};return{x:(a=u(t,a)).minX,y:a.minY,width:a.maxX-a.minX,height:a.maxY-a.minY}})),i("ellipse",(function(t){var e=t.attr(),n=e.x,r=e.y,i=e.rx,o=e.ry;return{x:n-i,y:r-o,width:2*i,height:2*o}}))},9168:function(t,e){"use strict";var n=function(){function t(t,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=t,this.name=t,this.originalEvent=e,this.timeStamp=e.timeStamp}return t.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.toString=function(){return"[Event (type="+this.type+")]"},t.prototype.save=function(){},t.prototype.restore=function(){},t}();e.Z=n},4494:function(t,e,n){"use strict";n.r(e),n.d(e,{AbstractCanvas:function(){return u.Z},AbstractGroup:function(){return h.Z},AbstractShape:function(){return p.Z},Base:function(){return c.Z},Event:function(){return l.Z},PathUtil:function(){return r},assembleFont:function(){return f.$O},getBBoxMethod:function(){return d.b},getOffScreenContext:function(){return y.L},getTextHeight:function(){return f.FE},invert:function(){return m.U_},isAllowCapture:function(){return g.pP},multiplyVec2:function(){return m.rG},registerBBox:function(){return d.W},registerEasing:function(){return v.C},version:function(){return x}});var r=n(1607),i=n(6135),o={};for(var a in i)["default","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil","getBBoxMethod","registerBBox","getTextHeight","assembleFont","isAllowCapture","multiplyVec2","invert","getOffScreenContext","registerEasing","version"].indexOf(a)<0&&(o[a]=function(t){return i[t]}.bind(0,a));n.d(e,o);var s=n(468);o={};for(var a in s)["default","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil","getBBoxMethod","registerBBox","getTextHeight","assembleFont","isAllowCapture","multiplyVec2","invert","getOffScreenContext","registerEasing","version"].indexOf(a)<0&&(o[a]=function(t){return s[t]}.bind(0,a));n.d(e,o);var l=n(9168),c=n(9753),u=n(7214),h=n(9157),p=n(5403),d=n(3230),f=n(9341),g=n(2489),m=n(5313),y=n(3841),v=n(3169),x="0.5.11"},468:function(){},6135:function(){},5313:function(t,e,n){"use strict";function r(t,e){var n=[],r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],p=e[0],d=e[1],f=e[2],g=e[3],m=e[4],y=e[5],v=e[6],x=e[7],_=e[8];return n[0]=p*r+d*a+f*c,n[1]=p*i+d*s+f*u,n[2]=p*o+d*l+f*h,n[3]=g*r+m*a+y*c,n[4]=g*i+m*s+y*u,n[5]=g*o+m*l+y*h,n[6]=v*r+x*a+_*c,n[7]=v*i+x*s+_*u,n[8]=v*o+x*l+_*h,n}function i(t,e){var n=[],r=e[0],i=e[1];return n[0]=t[0]*r+t[3]*i+t[6],n[1]=t[1]*r+t[4]*i+t[7],n}function o(t){var e=[],n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=u*a-s*c,p=-u*o+s*l,d=c*o-a*l,f=n*h+r*p+i*d;return f?(f=1/f,e[0]=h*f,e[1]=(-u*r+i*c)*f,e[2]=(s*r-i*a)*f,e[3]=p*f,e[4]=(u*n-i*l)*f,e[5]=(-s*n+i*o)*f,e[6]=d*f,e[7]=(-c*n+r*l)*f,e[8]=(a*n-r*o)*f,e):null}n.d(e,{U_:function(){return o},rG:function(){return i},xq:function(){return r}})},3841:function(t,e,n){"use strict";n.d(e,{L:function(){return i}});var r=null;function i(){if(!r){var t=document.createElement("canvas");t.width=1,t.height=1,r=t.getContext("2d")}return r}},1607:function(t,e,n){"use strict";n.r(e),n.d(e,{catmullRomToBezier:function(){return l},fillPath:function(){return P},fillPathByDiff:function(){return D},formatPath:function(){return N},intersection:function(){return M},parsePathArray:function(){return m},parsePathString:function(){return s},pathToAbsolute:function(){return u},pathToCurve:function(){return f},rectPath:function(){return w}});var r=n(3415),i="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",o=new RegExp("([a-z])["+i+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+i+"]*,?["+i+"]*)+)","ig"),a=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+i+"]*,?["+i+"]*","ig"),s=function(t){if(!t)return null;if((0,r.kJ)(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(o,(function(r,i,o){var s=[],l=i.toLowerCase();if(o.replace(a,(function(t,e){e&&s.push(+e)})),"m"===l&&s.length>2&&(n.push([i].concat(s.splice(0,2))),l="l",i="m"===i?"l":"L"),"o"===l&&1===s.length&&n.push([i,s[0]]),"r"===l)n.push([i].concat(s));else for(;s.length>=e[l]&&(n.push([i].concat(s.splice(0,e[l]))),e[l]););return t})),n},l=function(t,e){for(var n=[],r=0,i=t.length;i-2*!e>r;r+=2){var o=[{x:+t[r-2],y:+t[r-1]},{x:+t[r],y:+t[r+1]},{x:+t[r+2],y:+t[r+3]},{x:+t[r+4],y:+t[r+5]}];e?r?i-4===r?o[3]={x:+t[0],y:+t[1]}:i-2===r&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[i-2],y:+t[i-1]}:i-4===r?o[3]=o[2]:r||(o[0]={x:+t[r],y:+t[r+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n},c=function(t,e,n,r,i){var o=[];if(null===i&&null===r&&(r=n),t=+t,e=+e,n=+n,r=+r,null!==i){var a=Math.PI/180,s=t+n*Math.cos(-r*a),l=t+n*Math.cos(-i*a);o=[["M",s,e+n*Math.sin(-r*a)],["A",n,n,0,+(i-r>180),0,l,e+n*Math.sin(-i*a)]]}else o=[["M",t,e],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];return o},u=function(t){if(!(t=s(t))||!t.length)return[["M",0,0]];var e,n,r=[],i=0,o=0,a=0,u=0,h=0;"M"===t[0][0]&&(a=i=+t[0][1],u=o=+t[0][2],h++,r[0]=["M",i,o]);for(var p=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase(),d=void 0,f=void 0,g=h,m=t.length;g<m;g++){if(r.push(d=[]),(e=(f=t[g])[0])!==e.toUpperCase())switch(d[0]=e.toUpperCase(),d[0]){case"A":d[1]=f[1],d[2]=f[2],d[3]=f[3],d[4]=f[4],d[5]=f[5],d[6]=+f[6]+i,d[7]=+f[7]+o;break;case"V":d[1]=+f[1]+o;break;case"H":d[1]=+f[1]+i;break;case"R":for(var y=2,v=(n=[i,o].concat(f.slice(1))).length;y<v;y++)n[y]=+n[y]+i,n[++y]=+n[y]+o;r.pop(),r=r.concat(l(n,p));break;case"O":r.pop(),(n=c(i,o,f[1],f[2])).push(n[0]),r=r.concat(n);break;case"U":r.pop(),r=r.concat(c(i,o,f[1],f[2],f[3])),d=["U"].concat(r[r.length-1].slice(-2));break;case"M":a=+f[1]+i,u=+f[2]+o;break;default:for(y=1,v=f.length;y<v;y++)d[y]=+f[y]+(y%2?i:o)}else if("R"===e)n=[i,o].concat(f.slice(1)),r.pop(),r=r.concat(l(n,p)),d=["R"].concat(f.slice(-2));else if("O"===e)r.pop(),(n=c(i,o,f[1],f[2])).push(n[0]),r=r.concat(n);else if("U"===e)r.pop(),r=r.concat(c(i,o,f[1],f[2],f[3])),d=["U"].concat(r[r.length-1].slice(-2));else for(var x=0,_=f.length;x<_;x++)d[x]=f[x];if("O"!==(e=e.toUpperCase()))switch(d[0]){case"Z":i=+a,o=+u;break;case"H":i=d[1];break;case"V":o=d[1];break;case"M":a=d[d.length-2],u=d[d.length-1];break;default:i=d[d.length-2],o=d[d.length-1]}}return r},h=function(t,e,n,r){return[t,e,n,r,n,r]},p=function(t,e,n,r,i,o){var a=1/3,s=2/3;return[a*t+s*n,a*e+s*r,a*i+s*n,a*o+s*r,i,o]},d=function(t,e,n,r,i,o,a,s,l,c){n===r&&(n+=1);var u,h,p,f,g,m=120*Math.PI/180,y=Math.PI/180*(+i||0),v=[],x=function(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}};if(c)h=c[0],p=c[1],f=c[2],g=c[3];else{t=(u=x(t,e,-y)).x,e=u.y,s=(u=x(s,l,-y)).x,l=u.y,t===s&&e===l&&(s+=1,l+=1);var _=(t-s)/2,b=(e-l)/2,w=_*_/(n*n)+b*b/(r*r);w>1&&(n*=w=Math.sqrt(w),r*=w);var S=n*n,C=r*r,E=(o===a?-1:1)*Math.sqrt(Math.abs((S*C-S*b*b-C*_*_)/(S*b*b+C*_*_)));f=E*n*b/r+(t+s)/2,g=E*-r*_/n+(e+l)/2,h=Math.asin(((e-g)/r).toFixed(9)),p=Math.asin(((l-g)/r).toFixed(9)),h=t<f?Math.PI-h:h,p=s<f?Math.PI-p:p,h<0&&(h=2*Math.PI+h),p<0&&(p=2*Math.PI+p),a&&h>p&&(h-=2*Math.PI),!a&&p>h&&(p-=2*Math.PI)}var k=p-h;if(Math.abs(k)>m){var M=p,T=s,I=l;p=h+m*(a&&p>h?1:-1),s=f+n*Math.cos(p),l=g+r*Math.sin(p),v=d(s,l,n,r,i,0,a,T,I,[p,M,f,g])}k=p-h;var P=Math.cos(h),O=Math.sin(h),A=Math.cos(p),D=Math.sin(p),R=Math.tan(k/4),L=4/3*n*R,N=4/3*r*R,F=[t,e],z=[t+L*O,e-N*P],B=[s+L*D,l-N*A],$=[s,l];if(z[0]=2*F[0]-z[0],z[1]=2*F[1]-z[1],c)return[z,B,$].concat(v);for(var j=[],U=0,V=(v=[z,B,$].concat(v).join().split(",")).length;U<V;U++)j[U]=U%2?x(v[U-1],v[U],y).y:x(v[U],v[U+1],y).x;return j},f=function(t,e){var n,r=u(t),i=e&&u(e),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=[],l=[],c="",f="",g=function(t,e,n){var r,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(d.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"===n||"S"===n?(r=2*e.x-e.bx,i=2*e.y-e.by):(r=e.x,i=e.y),t=["C",r,i].concat(t.slice(1));break;case"T":"Q"===n||"T"===n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(p(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(p(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(h(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(h(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(h(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(h(e.x,e.y,e.X,e.Y))}return t},m=function(t,e){if(t[e].length>7){t[e].shift();for(var o=t[e];o.length;)s[e]="A",i&&(l[e]="A"),t.splice(e++,0,["C"].concat(o.splice(0,6)));t.splice(e,1),n=Math.max(r.length,i&&i.length||0)}},y=function(t,e,o,a,s){t&&e&&"M"===t[s][0]&&"M"!==e[s][0]&&(e.splice(s,0,["M",a.x,a.y]),o.bx=0,o.by=0,o.x=t[s][1],o.y=t[s][2],n=Math.max(r.length,i&&i.length||0))};n=Math.max(r.length,i&&i.length||0);for(var v=0;v<n;v++){r[v]&&(c=r[v][0]),"C"!==c&&(s[v]=c,v&&(f=s[v-1])),r[v]=g(r[v],o,f),"A"!==s[v]&&"C"===c&&(s[v]="C"),m(r,v),i&&(i[v]&&(c=i[v][0]),"C"!==c&&(l[v]=c,v&&(f=l[v-1])),i[v]=g(i[v],a,f),"A"!==l[v]&&"C"===c&&(l[v]="C"),m(i,v)),y(r,i,o,a,v),y(i,r,a,o,v);var x=r[v],_=i&&i[v],b=x.length,w=i&&_.length;o.x=x[b-2],o.y=x[b-1],o.bx=parseFloat(x[b-4])||o.x,o.by=parseFloat(x[b-3])||o.y,a.bx=i&&(parseFloat(_[w-4])||a.x),a.by=i&&(parseFloat(_[w-3])||a.y),a.x=i&&_[w-2],a.y=i&&_[w-1]}return i?[r,i]:r},g=/,?([a-z]),?/gi,m=function(t){return t.join(",").replace(g,"$1")},y=function(t,e,n,r,i){return t*(t*(-3*e+9*n-9*r+3*i)+6*e-12*n+6*r)-3*e+3*n},v=function(t,e,n,r,i,o,a,s,l){null===l&&(l=1);for(var c=(l=l>1?1:l<0?0:l)/2,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,d=0;d<12;d++){var f=c*u[d]+c,g=y(f,t,n,i,a),m=y(f,e,r,o,s),v=g*g+m*m;p+=h[d]*Math.sqrt(v)}return c*p},x=function(t,e,n,r,i,o,a,s){for(var l,c,u,h,p=[],d=[[],[]],f=0;f<2;++f)if(0===f?(c=6*t-12*n+6*i,l=-3*t+9*n-9*i+3*a,u=3*n-3*t):(c=6*e-12*r+6*o,l=-3*e+9*r-9*o+3*s,u=3*r-3*e),Math.abs(l)<1e-12){if(Math.abs(c)<1e-12)continue;(h=-u/c)>0&&h<1&&p.push(h)}else{var g=c*c-4*u*l,m=Math.sqrt(g);if(!(g<0)){var y=(-c+m)/(2*l);y>0&&y<1&&p.push(y);var v=(-c-m)/(2*l);v>0&&v<1&&p.push(v)}}for(var x,_=p.length,b=_;_--;)x=1-(h=p[_]),d[0][_]=x*x*x*t+3*x*x*h*n+3*x*h*h*i+h*h*h*a,d[1][_]=x*x*x*e+3*x*x*h*r+3*x*h*h*o+h*h*h*s;return d[0][b]=t,d[1][b]=e,d[0][b+1]=a,d[1][b+1]=s,d[0].length=d[1].length=b+2,{min:{x:Math.min.apply(0,d[0]),y:Math.min.apply(0,d[1])},max:{x:Math.max.apply(0,d[0]),y:Math.max.apply(0,d[1])}}},_=function(t,e,n,r,i,o,a,s){if(!(Math.max(t,n)<Math.min(i,a)||Math.min(t,n)>Math.max(i,a)||Math.max(e,r)<Math.min(o,s)||Math.min(e,r)>Math.max(o,s))){var l=(t-n)*(o-s)-(e-r)*(i-a);if(l){var c=((t*r-e*n)*(i-a)-(t-n)*(i*s-o*a))/l,u=((t*r-e*n)*(o-s)-(e-r)*(i*s-o*a))/l,h=+c.toFixed(2),p=+u.toFixed(2);if(!(h<+Math.min(t,n).toFixed(2)||h>+Math.max(t,n).toFixed(2)||h<+Math.min(i,a).toFixed(2)||h>+Math.max(i,a).toFixed(2)||p<+Math.min(e,r).toFixed(2)||p>+Math.max(e,r).toFixed(2)||p<+Math.min(o,s).toFixed(2)||p>+Math.max(o,s).toFixed(2)))return{x:c,y:u}}}},b=function(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height},w=function(t,e,n,r,i){if(i)return[["M",+t+ +i,e],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]];var o=[["M",t,e],["l",n,0],["l",0,r],["l",-n,0],["z"]];return o.parsePathArray=m,o},S=function(t,e,n,r){return null===t&&(t=e=n=r=0),null===e&&(e=t.y,n=t.width,r=t.height,t=t.x),{x:t,y:e,width:n,w:n,height:r,h:r,x2:t+n,y2:e+r,cx:t+n/2,cy:e+r/2,r1:Math.min(n,r)/2,r2:Math.max(n,r)/2,r0:Math.sqrt(n*n+r*r)/2,path:w(t,e,n,r),vb:[t,e,n,r].join(" ")}},C=function(t,e,n,i,o,a,s,l){(0,r.kJ)(t)||(t=[t,e,n,i,o,a,s,l]);var c=x.apply(null,t);return S(c.min.x,c.min.y,c.max.x-c.min.x,c.max.y-c.min.y)},E=function(t,e,n,r,i,o,a,s,l){var c=1-l,u=Math.pow(c,3),h=Math.pow(c,2),p=l*l,d=p*l,f=t+2*l*(n-t)+p*(i-2*n+t),g=e+2*l*(r-e)+p*(o-2*r+e),m=n+2*l*(i-n)+p*(a-2*i+n),y=r+2*l*(o-r)+p*(s-2*o+r);return{x:u*t+3*h*l*n+3*c*l*l*i+d*a,y:u*e+3*h*l*r+3*c*l*l*o+d*s,m:{x:f,y:g},n:{x:m,y:y},start:{x:c*t+l*n,y:c*e+l*r},end:{x:c*i+l*a,y:c*o+l*s},alpha:90-180*Math.atan2(f-m,g-y)/Math.PI}},k=function(t,e,n){if(!function(t,e){return t=S(t),e=S(e),b(e,t.x,t.y)||b(e,t.x2,t.y)||b(e,t.x,t.y2)||b(e,t.x2,t.y2)||b(t,e.x,e.y)||b(t,e.x2,e.y)||b(t,e.x,e.y2)||b(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)}(C(t),C(e)))return n?0:[];for(var r=~~(v.apply(0,t)/8),i=~~(v.apply(0,e)/8),o=[],a=[],s={},l=n?0:[],c=0;c<r+1;c++){var u=E.apply(0,t.concat(c/r));o.push({x:u.x,y:u.y,t:c/r})}for(c=0;c<i+1;c++){u=E.apply(0,e.concat(c/i));a.push({x:u.x,y:u.y,t:c/i})}for(c=0;c<r;c++)for(var h=0;h<i;h++){var p=o[c],d=o[c+1],f=a[h],g=a[h+1],m=Math.abs(d.x-p.x)<.001?"y":"x",y=Math.abs(g.x-f.x)<.001?"y":"x",x=_(p.x,p.y,d.x,d.y,f.x,f.y,g.x,g.y);if(x){if(s[x.x.toFixed(4)]===x.y.toFixed(4))continue;s[x.x.toFixed(4)]=x.y.toFixed(4);var w=p.t+Math.abs((x[m]-p[m])/(d[m]-p[m]))*(d.t-p.t),k=f.t+Math.abs((x[y]-f[y])/(g[y]-f[y]))*(g.t-f.t);w>=0&&w<=1&&k>=0&&k<=1&&(n?l+=1:l.push({x:x.x,y:x.y,t1:w,t2:k}))}}return l},M=function(t,e){return function(t,e,n){var r,i,o,a,s,l,c,u,h,p;t=f(t),e=f(e);for(var d=n?0:[],g=0,m=t.length;g<m;g++){var y=t[g];if("M"===y[0])r=s=y[1],i=l=y[2];else{"C"===y[0]?(h=[r,i].concat(y.slice(1)),r=h[6],i=h[7]):(h=[r,i,r,i,s,l,s,l],r=s,i=l);for(var v=0,x=e.length;v<x;v++){var _=e[v];if("M"===_[0])o=c=_[1],a=u=_[2];else{"C"===_[0]?(p=[o,a].concat(_.slice(1)),o=p[6],a=p[7]):(p=[o,a,o,a,c,u,c,u],o=c,a=u);var b=k(h,p,n);if(n)d+=b;else{for(var w=0,S=b.length;w<S;w++)b[w].segment1=g,b[w].segment2=v,b[w].bez1=h,b[w].bez2=p;d=d.concat(b)}}}}}return d}(t,e)};function T(t,e){var n=[],r=[];return t.length&&function t(e,i){if(1===e.length)n.push(e[0]),r.push(e[0]);else{for(var o=[],a=0;a<e.length-1;a++)0===a&&n.push(e[0]),a===e.length-2&&r.push(e[a+1]),o[a]=[(1-i)*e[a][0]+i*e[a+1][0],(1-i)*e[a][1]+i*e[a+1][1]];t(o,i)}}(t,e),{left:n,right:r.reverse()}}var I=function(t,e,n){if(1===n)return[[].concat(t)];var r=[];if("L"===e[0]||"C"===e[0]||"Q"===e[0])r=r.concat(function(t,e,n){var r=[[t[1],t[2]]];n=n||2;var i=[];"A"===e[0]?(r.push(e[6]),r.push(e[7])):"C"===e[0]?(r.push([e[1],e[2]]),r.push([e[3],e[4]]),r.push([e[5],e[6]])):"S"===e[0]||"Q"===e[0]?(r.push([e[1],e[2]]),r.push([e[3],e[4]])):r.push([e[1],e[2]]);for(var o=r,a=1/n,s=0;s<n-1;s++){var l=T(o,a/(1-a*s));i.push(l.left),o=l.right}return i.push(o),i.map((function(t){var e=[];return 4===t.length&&(e.push("C"),e=e.concat(t[2])),t.length>=3&&(3===t.length&&e.push("Q"),e=e.concat(t[1])),2===t.length&&e.push("L"),e.concat(t[t.length-1])}))}(t,e,n));else{var i=[].concat(t);"M"===i[0]&&(i[0]="L");for(var o=0;o<=n-1;o++)r.push(i)}return r},P=function(t,e){if(1===t.length)return t;var n=t.length-1,r=e.length-1,i=n/r,o=[];if(1===t.length&&"M"===t[0][0]){for(var a=0;a<r-n;a++)t.push(t[0]);return t}for(a=0;a<r;a++){var s=Math.floor(i*a);o[s]=(o[s]||0)+1}var l=o.reduce((function(e,r,i){return i===n?e.concat(t[n]):e.concat(I(t[i],t[i+1],r))}),[]);return l.unshift(t[0]),"Z"!==e[r]&&"z"!==e[r]||l.push("Z"),l},O=function(t,e){if(t.length!==e.length)return!1;var n=!0;return(0,r.S6)(t,(function(t,r){if(t!==e[r])return n=!1,!1})),n};function A(t,e,n){var r=null,i=n;return e<i&&(i=e,r="add"),t<i&&(i=t,r="del"),{type:r,min:i}}var D=function(t,e){var n=function(t,e){var n,r,i=t.length,o=e.length,a=0;if(0===i||0===o)return null;for(var s=[],l=0;l<=i;l++)s[l]=[],s[l][0]={min:l};for(var c=0;c<=o;c++)s[0][c]={min:c};for(l=1;l<=i;l++)for(n=t[l-1],c=1;c<=o;c++){r=e[c-1],a=O(n,r)?0:1;var u=s[l-1][c].min+1,h=s[l][c-1].min+1,p=s[l-1][c-1].min+a;s[l][c]=A(u,h,p)}return s}(t,e),r=t.length,i=e.length,o=[],a=1,s=1;if(n[r][i].min!==r){for(var l=1;l<=r;l++){var c=n[l][l].min;s=l;for(var u=a;u<=i;u++)n[l][u].min<c&&(c=n[l][u].min,s=u);a=s,n[l][a].type&&o.push({index:l-1,type:n[l][a].type})}for(l=o.length-1;l>=0;l--)a=o[l].index,"add"===o[l].type?t.splice(a,0,[].concat(t[a])):t.splice(a,1)}var h=i-(r=t.length);if(r<i)for(l=0;l<h;l++)"z"===t[r-1][0]||"Z"===t[r-1][0]?t.splice(r-2,0,t[r-2]):t.push(t[r-1]),r+=1;return t};function R(t,e,n){for(var r,i=[].concat(t),o=1/(n+1),a=L(e)[0],s=1;s<=n;s++)o*=s,0===(r=Math.floor(t.length*o))?i.unshift([a[0]*o+t[r][0]*(1-o),a[1]*o+t[r][1]*(1-o)]):i.splice(r,0,[a[0]*o+t[r][0]*(1-o),a[1]*o+t[r][1]*(1-o)]);return i}function L(t){var e=[];switch(t[0]){case"M":case"L":case"T":e.push([t[1],t[2]]);break;case"A":e.push([t[6],t[7]]);break;case"Q":case"S":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"C":e.push([t[5],t[6]]),e.push([t[1],t[2]]),e.push([t[3],t[4]]);break;case"H":case"V":e.push([t[1],t[1]])}return e}var N=function(t,e){if(t.length<=1)return t;for(var n,r=0;r<e.length;r++)if(t[r][0]!==e[r][0])switch(n=L(t[r]),e[r][0]){case"M":t[r]=["M"].concat(n[0]);break;case"L":t[r]=["L"].concat(n[0]);break;case"A":t[r]=[].concat(e[r]),t[r][6]=n[0][0],t[r][7]=n[0][1];break;case"Q":if(n.length<2){if(!(r>0)){t[r]=e[r];break}n=R(n,t[r-1],1)}t[r]=["Q"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;case"T":t[r]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(r>0)){t[r]=e[r];break}n=R(n,t[r-1],2)}t[r]=["C"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;case"S":if(n.length<2){if(!(r>0)){t[r]=e[r];break}n=R(n,t[r-1],1)}t[r]=["S"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;default:t[r]=e[r]}return t}},9341:function(t,e,n){"use strict";n.d(e,{$O:function(){return s},FE:function(){return o},mY:function(){return a}});var r=n(2489),i=n(3841);function o(t,e,n){var i=1;if((0,r.HD)(t)&&(i=t.split("\n").length),i>1){var o=function(t,e){return e?e-t:.14*t}(e,n);return e*i+o*(i-1)}return e}function a(t,e){var n=(0,i.L)(),o=0;if((0,r.kK)(t)||""===t)return o;if(n.save(),n.font=e,(0,r.HD)(t)&&t.includes("\n")){var a=t.split("\n");(0,r.S6)(a,(function(t){var e=n.measureText(t).width;o<e&&(o=e)}))}else o=n.measureText(t).width;return n.restore(),o}function s(t){var e=t.fontSize,n=t.fontFamily,r=t.fontWeight;return[t.fontStyle,t.fontVariant,r,e+"px",n].join(" ").trim()}},2489:function(t,e,n){"use strict";n.d(e,{As:function(){return i},CD:function(){return r.CD},HD:function(){return r.HD},Kn:function(){return r.Kn},S6:function(){return r.S6},UY:function(){return a},jC:function(){return r.jC},jU:function(){return o},kK:function(){return r.UM},mf:function(){return r.mf},pP:function(){return s}});var r=n(3415);function i(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}var o="undefined"!==typeof window&&"undefined"!==typeof window.document;function a(t,e){if(t.isCanvas())return!0;for(var n=e.getParent(),r=!1;n;){if(n===t){r=!0;break}n=n.getParent()}return r}function s(t){return t.cfg.visible&&t.cfg.capture}},1622:function(t,e,n){"use strict";n.d(e,{wN:function(){return O},Ll:function(){return C},x1:function(){return h},aH:function(){return F},lD:function(){return v},Zr:function(){return r}});var r={};n.r(r),n.d(r,{distance:function(){return o},getBBoxByArray:function(){return s},getBBoxRange:function(){return l},isNumberEqual:function(){return a},piMod:function(){return c}});var i=n(3415);function o(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function a(t,e){return Math.abs(t-e)<.001}function s(t,e){var n=(0,i.VV)(t),r=(0,i.VV)(e);return{x:n,y:r,width:(0,i.Fp)(t)-n,height:(0,i.Fp)(e)-r}}function l(t,e,n,r){return{minX:(0,i.VV)([t,n]),maxX:(0,i.Fp)([t,n]),minY:(0,i.VV)([e,r]),maxY:(0,i.Fp)([e,r])}}function c(t){return(t+2*Math.PI)%(2*Math.PI)}var u=n(9874),h={box:function(t,e,n,r){return s([t,n],[e,r])},length:function(t,e,n,r){return o(t,e,n,r)},pointAt:function(t,e,n,r,i){return{x:(1-i)*t+i*n,y:(1-i)*e+i*r}},pointDistance:function(t,e,n,r,i,a){var s=(n-t)*(i-t)+(r-e)*(a-e);return s<0?o(t,e,i,a):s>(n-t)*(n-t)+(r-e)*(r-e)?o(n,r,i,a):this.pointToLine(t,e,n,r,i,a)},pointToLine:function(t,e,n,r,i,o){var a=[n-t,r-e];if(u.I6(a,[0,0]))return Math.sqrt((i-t)*(i-t)+(o-e)*(o-e));var s=[-a[1],a[0]];u.Fv(s,s);var l=[i-t,o-e];return Math.abs(u.AK(l,s))},tangentAngle:function(t,e,n,r){return Math.atan2(r-e,n-t)}};function p(t,e,n,r,i,a){var s,l=1/0,c=[n,r],u=20;a&&a>200&&(u=a/10);for(var h=1/u,p=h/10,d=0;d<=u;d++){var f=d*h,g=[i.apply(null,t.concat([f])),i.apply(null,e.concat([f]))];(x=o(c[0],c[1],g[0],g[1]))<l&&(s=f,l=x)}if(0===s)return{x:t[0],y:e[0]};if(1===s){var m=t.length;return{x:t[m-1],y:e[m-1]}}l=1/0;for(d=0;d<32&&!(p<1e-4);d++){var y=s-p,v=s+p,x=(g=[i.apply(null,t.concat([y])),i.apply(null,e.concat([y]))],o(c[0],c[1],g[0],g[1]));if(y>=0&&x<l)s=y,l=x;else{var _=[i.apply(null,t.concat([v])),i.apply(null,e.concat([v]))],b=o(c[0],c[1],_[0],_[1]);v<=1&&b<l?(s=v,l=b):p*=.5}}return{x:i.apply(null,t.concat([s])),y:i.apply(null,e.concat([s]))}}function d(t,e,n,r){var i=1-r;return i*i*t+2*r*i*e+r*r*n}function f(t,e,n){var r=t+n-2*e;if(a(r,0))return[.5];var i=(t-e)/r;return i<=1&&i>=0?[i]:[]}function g(t,e,n,r){return 2*(1-r)*(e-t)+2*r*(n-e)}function m(t,e,n,r,i,o,a){var s=d(t,n,i,a),l=d(e,r,o,a),c=h.pointAt(t,e,n,r,a),u=h.pointAt(n,r,i,o,a);return[[t,e,c.x,c.y,s,l],[s,l,u.x,u.y,i,o]]}function y(t,e,n,r,i,a,s){if(0===s)return(o(t,e,n,r)+o(n,r,i,a)+o(t,e,i,a))/2;var l=m(t,e,n,r,i,a,.5),c=l[0],u=l[1];return c.push(s-1),u.push(s-1),y.apply(null,c)+y.apply(null,u)}var v={box:function(t,e,n,r,i,o){var a=f(t,n,i)[0],l=f(e,r,o)[0],c=[t,i],u=[e,o];return void 0!==a&&c.push(d(t,n,i,a)),void 0!==l&&u.push(d(e,r,o,l)),s(c,u)},length:function(t,e,n,r,i,o){return y(t,e,n,r,i,o,3)},nearestPoint:function(t,e,n,r,i,o,a,s){return p([t,n,i],[e,r,o],a,s,d)},pointDistance:function(t,e,n,r,i,a,s,l){var c=this.nearestPoint(t,e,n,r,i,a,s,l);return o(c.x,c.y,s,l)},interpolationAt:d,pointAt:function(t,e,n,r,i,o,a){return{x:d(t,n,i,a),y:d(e,r,o,a)}},divide:function(t,e,n,r,i,o,a){return m(t,e,n,r,i,o,a)},tangentAngle:function(t,e,n,r,i,o,a){var s=g(t,n,i,a),l=g(e,r,o,a);return c(Math.atan2(l,s))}};function x(t,e,n,r,i){var o=1-i;return o*o*o*t+3*e*i*o*o+3*n*i*i*o+r*i*i*i}function _(t,e,n,r,i){var o=1-i;return 3*(o*o*(e-t)+2*o*i*(n-e)+i*i*(r-n))}function b(t,e,n,r){var i,o,s,l=-3*t+9*e-9*n+3*r,c=6*t-12*e+6*n,u=3*e-3*t,h=[];if(a(l,0))a(c,0)||(i=-u/c)>=0&&i<=1&&h.push(i);else{var p=c*c-4*l*u;a(p,0)?h.push(-c/(2*l)):p>0&&(o=(-c-(s=Math.sqrt(p)))/(2*l),(i=(-c+s)/(2*l))>=0&&i<=1&&h.push(i),o>=0&&o<=1&&h.push(o))}return h}function w(t,e,n,r,i,o,a,s,l){var c=x(t,n,i,a,l),u=x(e,r,o,s,l),p=h.pointAt(t,e,n,r,l),d=h.pointAt(n,r,i,o,l),f=h.pointAt(i,o,a,s,l),g=h.pointAt(p.x,p.y,d.x,d.y,l),m=h.pointAt(d.x,d.y,f.x,f.y,l);return[[t,e,p.x,p.y,g.x,g.y,c,u],[c,u,m.x,m.y,f.x,f.y,a,s]]}function S(t,e,n,r,i,a,s,l,c){if(0===c)return function(t,e){for(var n=0,r=t.length,i=0;i<r;i++)n+=o(t[i],e[i],t[(i+1)%r],e[(i+1)%r]);return n/2}([t,n,i,s],[e,r,a,l]);var u=w(t,e,n,r,i,a,s,l,.5),h=u[0],p=u[1];return h.push(c-1),p.push(c-1),S.apply(null,h)+S.apply(null,p)}var C={extrema:b,box:function(t,e,n,r,i,o,a,l){for(var c=[t,a],u=[e,l],h=b(t,n,i,a),p=b(e,r,o,l),d=0;d<h.length;d++)c.push(x(t,n,i,a,h[d]));for(d=0;d<p.length;d++)u.push(x(e,r,o,l,p[d]));return s(c,u)},length:function(t,e,n,r,i,o,a,s){return S(t,e,n,r,i,o,a,s,3)},nearestPoint:function(t,e,n,r,i,o,a,s,l,c,u){return p([t,n,i,a],[e,r,o,s],l,c,x,u)},pointDistance:function(t,e,n,r,i,a,s,l,c,u,h){var p=this.nearestPoint(t,e,n,r,i,a,s,l,c,u,h);return o(p.x,p.y,c,u)},interpolationAt:x,pointAt:function(t,e,n,r,i,o,a,s,l){return{x:x(t,n,i,a,l),y:x(e,r,o,s,l)}},divide:function(t,e,n,r,i,o,a,s,l){return w(t,e,n,r,i,o,a,s,l)},tangentAngle:function(t,e,n,r,i,o,a,s,l){var u=_(t,n,i,a,l),h=_(e,r,o,s,l);return c(Math.atan2(h,u))}};function E(t,e){var n=Math.abs(t);return e>0?n:-1*n}var k=function(t,e,n,r,i,o){var a=n,s=r;if(0===a||0===s)return{x:t,y:e};for(var l,c,u=i-t,h=o-e,p=Math.abs(u),d=Math.abs(h),f=a*a,g=s*s,m=Math.PI/4,y=0;y<4;y++){l=a*Math.cos(m),c=s*Math.sin(m);var v=(f-g)*Math.pow(Math.cos(m),3)/a,x=(g-f)*Math.pow(Math.sin(m),3)/s,_=l-v,b=c-x,w=p-v,S=d-x,C=Math.hypot(b,_),k=Math.hypot(S,w);m+=C*Math.asin((_*S-b*w)/(C*k))/Math.sqrt(f+g-l*l-c*c),m=Math.min(Math.PI/2,Math.max(0,m))}return{x:t+E(l,u),y:e+E(c,h)}};function M(t,e,n,r,i,o){return n*Math.cos(i)*Math.cos(o)-r*Math.sin(i)*Math.sin(o)+t}function T(t,e,n,r,i,o){return n*Math.sin(i)*Math.cos(o)+r*Math.cos(i)*Math.sin(o)+e}function I(t,e,n){return{x:t*Math.cos(n),y:e*Math.sin(n)}}function P(t,e,n){var r=Math.cos(n),i=Math.sin(n);return[t*r-e*i,t*i+e*r]}var O={box:function(t,e,n,r,i,o,a){for(var s=function(t,e,n){return Math.atan(-e/t*Math.tan(n))}(n,r,i),l=1/0,c=-1/0,u=[o,a],h=2*-Math.PI;h<=2*Math.PI;h+=Math.PI){var p=s+h;o<a?o<p&&p<a&&u.push(p):a<p&&p<o&&u.push(p)}for(h=0;h<u.length;h++){var d=M(t,0,n,r,i,u[h]);d<l&&(l=d),d>c&&(c=d)}var f=function(t,e,n){return Math.atan(e/(t*Math.tan(n)))}(n,r,i),g=1/0,m=-1/0,y=[o,a];for(h=2*-Math.PI;h<=2*Math.PI;h+=Math.PI){var v=f+h;o<a?o<v&&v<a&&y.push(v):a<v&&v<o&&y.push(v)}for(h=0;h<y.length;h++){var x=T(0,e,n,r,i,y[h]);x<g&&(g=x),x>m&&(m=x)}return{x:l,y:g,width:c-l,height:m-g}},length:function(t,e,n,r,i,o,a){},nearestPoint:function(t,e,n,r,i,o,a,s,l){var c=P(s-t,l-e,-i),u=c[0],h=c[1],p=k(0,0,n,r,u,h),d=function(t,e,n,r){return(Math.atan2(r*t,n*e)+2*Math.PI)%(2*Math.PI)}(n,r,p.x,p.y);d<o?p=I(n,r,o):d>a&&(p=I(n,r,a));var f=P(p.x,p.y,i);return{x:f[0]+t,y:f[1]+e}},pointDistance:function(t,e,n,r,i,a,s,l,c){var u=this.nearestPoint(t,e,n,r,l,c);return o(u.x,u.y,l,c)},pointAt:function(t,e,n,r,i,o,a,s){var l=(a-o)*s+o;return{x:M(t,0,n,r,i,l),y:T(0,e,n,r,i,l)}},tangentAngle:function(t,e,n,r,i,o,a,s){var l=(a-o)*s+o,u=function(t,e,n,r,i,o,a,s){return-1*n*Math.cos(i)*Math.sin(s)-r*Math.sin(i)*Math.cos(s)}(0,0,n,r,i,0,0,l),h=function(t,e,n,r,i,o,a,s){return-1*n*Math.sin(i)*Math.sin(s)+r*Math.cos(i)*Math.cos(s)}(0,0,n,r,i,0,0,l);return c(Math.atan2(h,u))}};function A(t){for(var e=0,n=[],r=0;r<t.length-1;r++){var i=t[r],a=t[r+1],s=o(i[0],i[1],a[0],a[1]),l={from:i,to:a,length:s};n.push(l),e+=s}return{segments:n,totalLength:e}}function D(t){if(t.length<2)return 0;for(var e=0,n=0;n<t.length-1;n++){var r=t[n],i=t[n+1];e+=o(r[0],r[1],i[0],i[1])}return e}function R(t,e){if(e>1||e<0||t.length<2)return null;var n=A(t),r=n.segments,i=n.totalLength;if(0===i)return{x:t[0][0],y:t[0][1]};for(var o=0,a=null,s=0;s<r.length;s++){var l=r[s],c=l.from,u=l.to,p=l.length/i;if(e>=o&&e<=o+p){var d=(e-o)/p;a=h.pointAt(c[0],c[1],u[0],u[1],d);break}o+=p}return a}function L(t,e){if(e>1||e<0||t.length<2)return 0;for(var n=A(t),r=n.segments,i=n.totalLength,o=0,a=0,s=0;s<r.length;s++){var l=r[s],c=l.from,u=l.to,h=l.length/i;if(e>=o&&e<=o+h){a=Math.atan2(u[1]-c[1],u[0]-c[0]);break}o+=h}return a}function N(t,e,n){for(var r=1/0,i=0;i<t.length-1;i++){var o=t[i],a=t[i+1],s=h.pointDistance(o[0],o[1],a[0],a[1],e,n);s<r&&(r=s)}return r}var F={box:function(t){for(var e=[],n=[],r=0;r<t.length;r++){var i=t[r];e.push(i[0]),n.push(i[1])}return s(e,n)},length:function(t){return D(t)},pointAt:function(t,e){return R(t,e)},pointDistance:function(t,e,n){return N(t,e,n)},tangentAngle:function(t,e){return L(t,e)}}},6403:function(t,e,n){"use strict";n.d(e,{Dg:function(){return c},lh:function(){return s},m$:function(){return o},vs:function(){return l},zu:function(){return a}});var r=n(5742),i=n(9874);function o(t,e,n){var i=[0,0,0,0,0,0,0,0,0];return r.vc(i,n),r.Jp(t,i,e)}function a(t,e,n){var i=[0,0,0,0,0,0,0,0,0];return r.Us(i,n),r.Jp(t,i,e)}function s(t,e,n){var i=[0,0,0,0,0,0,0,0,0];return r.xJ(i,n),r.Jp(t,i,e)}function l(t,e){for(var n,i,l,c=t?[].concat(t):[1,0,0,0,1,0,0,0,1],u=0,h=e.length;u<h;u++){var p=e[u];switch(p[0]){case"t":o(c,c,[p[1],p[2]]);break;case"s":s(c,c,[p[1],p[2]]);break;case"r":a(c,c,p[1]);break;case"m":n=c,i=c,l=p[1],r.Jp(n,l,i)}}return c}function c(t,e,n){var r=i.EU(t,e),o=function(t,e){return t[0]*e[1]-e[0]*t[1]}(t,e)>=0;return n?o?2*Math.PI-r:r:o?r:2*Math.PI-r}},3415:function(t,e,n){"use strict";n.d(e,{Ct:function(){return Xt},f0:function(){return Ot},uZ:function(){return U},VS:function(){return gt},d9:function(){return yt},FX:function(){return i},Ds:function(){return vt},b$:function(){return bt},e5:function(){return a},S6:function(){return d},yW:function(){return N},hX:function(){return o},sE:function(){return v},cx:function(){return x},Wx:function(){return _},ri:function(){return V},xH:function(){return b},U5:function(){return J},U2:function(){return At},Lo:function(){return Wt},rx:function(){return C},ru:function(){return j},vM:function(){return B},Ms:function(){return $},wH:function(){return Q},YM:function(){return R},q9:function(){return i},cq:function(){return wt},kJ:function(){return h},jn:function(){return st},J_:function(){return lt},kK:function(){return dt},xb:function(){return Ct},Xy:function(){return kt},mf:function(){return c},BD:function(){return g},UM:function(){return u},Ft:function(){return ct},hj:function(){return H},vQ:function(){return W},Kn:function(){return p},PO:function(){return y},HD:function(){return P},P9:function(){return l},o8:function(){return pt},XP:function(){return f},Z$:function(){return L},vl:function(){return nt},UI:function(){return Mt},Q8:function(){return It},Fp:function(){return w},UT:function(){return X},HP:function(){return xt},VV:function(){return S},F:function(){return q},CD:function(){return Ot},wQ:function(){return Y},ZT:function(){return jt},CE:function(){return Nt},ei:function(){return Lt},u4:function(){return T},Od:function(){return I},U7:function(){return ft},t8:function(){return Dt},dp:function(){return Ut},G:function(){return F},MR:function(){return O},ng:function(){return rt},P2:function(){return Ft},qo:function(){return zt},c$:function(){return K},BB:function(){return et},jj:function(){return A},EL:function(){return $t},jC:function(){return it},VO:function(){return tt},I:function(){return D}});var r=function(t){return null!==t&&"function"!==typeof t&&isFinite(t.length)},i=function(t,e){return!!r(t)&&t.indexOf(e)>-1},o=function(t,e){if(!r(t))return t;for(var n=[],i=0;i<t.length;i++){var o=t[i];e(o,i)&&n.push(o)}return n},a=function(t,e){return void 0===e&&(e=[]),o(t,(function(t){return!i(e,t)}))},s={}.toString,l=function(t,e){return s.call(t)==="[object "+e+"]"},c=function(t){return l(t,"Function")},u=function(t){return null===t||void 0===t},h=function(t){return Array.isArray?Array.isArray(t):l(t,"Array")},p=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e};var d=function(t,e){if(t)if(h(t))for(var n=0,r=t.length;n<r&&!1!==e(t[n],n);n++);else if(p(t))for(var i in t)if(t.hasOwnProperty(i)&&!1===e(t[i],i))break},f=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return d(t,(function(n,r){c(t)&&"prototype"===r||e.push(r)})),e};var g=function(t,e){var n=f(e),r=n.length;if(u(t))return!r;for(var i=0;i<r;i+=1){var o=n[i];if(e[o]!==t[o]||!(o in t))return!1}return!0},m=function(t){return"object"===typeof t&&null!==t},y=function(t){if(!m(t)||!l(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e};var v=function(t,e){if(!h(t))return null;var n;if(c(e)&&(n=e),y(e)&&(n=function(t){return g(t,e)}),n)for(var r=0;r<t.length;r+=1)if(n(t[r]))return t[r];return null};var x=function(t,e,n){void 0===n&&(n=0);for(var r=n;r<t.length;r++)if(e(t[r],r))return r;return-1},_=function(t,e){for(var n=null,r=0;r<t.length;r++){var i=t[r][e];if(!u(i)){n=h(i)?i[0]:i;break}}return n},b=function(t){if(!h(t))return[];for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);return e},w=function(t){if(h(t))return t.reduce((function(t,e){return Math.max(t,e)}),t[0])},S=function(t){if(h(t))return t.reduce((function(t,e){return Math.min(t,e)}),t[0])},C=function(t){var e=t.filter((function(t){return!isNaN(t)}));if(!e.length)return{min:0,max:0};if(h(t[0])){for(var n=[],r=0;r<t.length;r++)n=n.concat(t[r]);e=n}var i=w(e);return{min:S(e),max:i}},E=Array.prototype,k=(E.splice,E.indexOf,Array.prototype.splice),M=function(t,e){if(!r(t))return[];for(var n=t?e.length:0,i=n-1;n--;){var o=void 0,a=e[n];n!==i&&a===o||(o=a,k.call(t,a,1))}return t},T=function(t,e,n){if(!h(t)&&!y(t))return t;var r=n;return d(t,(function(t,n){r=e(r,t,n)})),r},I=function(t,e){var n=[];if(!r(t))return n;for(var i=-1,o=[],a=t.length;++i<a;){var s=t[i];e(s,i,t)&&(n.push(s),o.push(i))}return M(t,o),n},P=function(t){return l(t,"String")};var O=function(t,e){var n;if(c(e))n=function(t,n){return e(t)-e(n)};else{var r=[];P(e)?r.push(e):h(e)&&(r=e),n=function(t,e){for(var n=0;n<r.length;n+=1){var i=r[n];if(t[i]>e[i])return 1;if(t[i]<e[i])return-1}return 0}}return t.sort(n),t};function A(t,e){void 0===e&&(e=new Map);var n=[];if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++){var o=t[r];e.has(o)||(n.push(o),e.set(o,!0))}return n}var D=function(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i][e];if(!u(o)){h(o)||(o=[o]);for(var a=0;a<o.length;a++){var s=o[a];r[s]||(n.push(s),r[s]=!0)}}}return n};function R(t){if(r(t))return t[0]}function L(t){if(r(t)){return t[t.length-1]}}var N=function(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n))return!1;return!0},F=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n))return!0;return!1},z=Object.prototype.hasOwnProperty;var B=function(t,e){if(!e||!h(t))return{};for(var n,r={},i=c(e)?e:function(t){return t[e]},o=0;o<t.length;o++){var a=t[o];n=i(a),z.call(r,n)?r[n].push(a):r[n]=[a]}return r};function $(t,e){if(!e)return{0:t};if(!c(e)){var n=h(e)?e:e.replace(/\s+/g,"").split("*");e=function(t){for(var e="_",r=0,i=n.length;r<i;r++)e+=t[n[r]]&&t[n[r]].toString();return e}}return B(t,e)}var j=function(t,e){if(!e)return[t];var n=$(t,e),r=[];for(var i in n)r.push(n[i]);return r};var U=function(t,e,n){return t<e?e:t>n?n:t},V=function(t,e){var n=e.toString(),r=n.indexOf(".");if(-1===r)return Math.round(t);var i=n.substr(r+1).length;return i>20&&(i=20),parseFloat(t.toFixed(i))},H=function(t){return l(t,"Number")},G=(Number.isInteger&&Number.isInteger,1e-5);function W(t,e,n){return void 0===n&&(n=G),Math.abs(t-e)<n}var X=function(t,e){if(h(t)){for(var n,r=-1/0,i=0;i<t.length;i++){var o=t[i],a=c(e)?e(o):o[e];a>r&&(n=o,r=a)}return n}},q=function(t,e){if(h(t)){for(var n,r=1/0,i=0;i<t.length;i++){var o=t[i],a=c(e)?e(o):o[e];a<r&&(n=o,r=a)}return n}},Y=function(t,e){return(t%e+e)%e},Z=(Math.PI,parseInt,Math.PI/180),K=function(t){return Z*t},J=d,Q=function(t,e){return t.hasOwnProperty(e)},tt=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return d(t,(function(n,r){c(t)&&"prototype"===r||e.push(n)})),e},et=function(t){return u(t)?"":t.toString()},nt=function(t){return et(t).toLowerCase()};var rt=function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,(function(t,n){return"\\"===t.charAt(0)?t.slice(1):void 0===e[n]?"":e[n]})):t},it=function(t){var e=et(t);return e.charAt(0).toUpperCase()+e.substring(1)},ot={}.toString,at=function(t){return ot.call(t).replace(/^\[object /,"").replace(/]$/,"")},st=function(t){return l(t,"Boolean")},lt=function(t){return l(t,"Date")};var ct=function(t){return null===t},ut=Object.prototype,ht=function(t){var e=t&&t.constructor;return t===("function"===typeof e&&e.prototype||ut)},pt=function(t){return void 0===t},dt=function(t){return t instanceof Element||t instanceof HTMLDocument};function ft(t){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)})(t)}function gt(t){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(t)}var mt=function(t){if("object"!==typeof t||null===t)return t;var e;if(h(t)){e=[];for(var n=0,r=t.length;n<r;n++)"object"===typeof t[n]&&null!=t[n]?e[n]=mt(t[n]):e[n]=t[n]}else for(var i in e={},t)"object"===typeof t[i]&&null!=t[i]?e[i]=mt(t[i]):e[i]=t[i];return e},yt=mt;var vt=function(t,e,n){var r;return function(){var i=this,o=arguments,a=n&&!r;clearTimeout(r),r=setTimeout((function(){r=null,n||t.apply(i,o)}),e),a&&t.apply(i,o)}},xt=function(t,e){if(!c(t))throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=e?e.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var s=t.apply(this,r);return a.set(o,s),s};return n.cache=new Map,n};function _t(t,e,n,r){for(var i in n=n||0,r=r||5,e)if(e.hasOwnProperty(i)){var o=e[i];null!==o&&y(o)?(y(t[i])||(t[i]={}),n<r?_t(t[i],o,n+1,r):t[i]=e[i]):h(o)?(t[i]=[],t[i]=t[i].concat(o)):void 0!==o&&(t[i]=o)}}var bt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)_t(t,e[r]);return t},wt=function(t,e){if(!r(t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var i=-1,o=0;o<t.length;o++)if(t[o]===e){i=o;break}return i},St=Object.prototype.hasOwnProperty;var Ct=function(t){if(u(t))return!0;if(r(t))return!t.length;var e=at(t);if("Map"===e||"Set"===e)return!t.size;if(ht(t))return!Object.keys(t).length;for(var n in t)if(St.call(t,n))return!1;return!0},Et=function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(P(t)||P(e))return!1;if(r(t)||r(e)){if(t.length!==e.length)return!1;for(var n=!0,i=0;i<t.length&&(n=Et(t[i],e[i]));i++);return n}if(m(t)||m(e)){var o=Object.keys(t),a=Object.keys(e);if(o.length!==a.length)return!1;for(n=!0,i=0;i<o.length&&(n=Et(t[o[i]],e[o[i]]));i++);return n}return!1},kt=Et,Mt=function(t,e){if(!r(t))return t;for(var n=[],i=0;i<t.length;i++){var o=t[i];n.push(e(o,i))}return n},Tt=function(t){return t},It=function(t,e){void 0===e&&(e=Tt);var n={};return p(t)&&!u(t)&&Object.keys(t).forEach((function(r){n[r]=e(t[r],r)})),n};function Pt(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}function Ot(t,e,n,r){return e&&Pt(t,e),n&&Pt(t,n),r&&Pt(t,r),t}var At=function(t,e,n){for(var r=0,i=P(e)?e.split("."):e;t&&r<i.length;)t=t[i[r++]];return void 0===t||r<i.length?n:t},Dt=function(t,e,n){var r=t,i=P(e)?e.split("."):e;return i.forEach((function(t,e){e<i.length-1?(p(r[t])||(r[t]=H(i[e+1])?[]:{}),r=r[t]):r[t]=n})),t},Rt=Object.prototype.hasOwnProperty,Lt=function(t,e){if(null===t||!y(t))return{};var n={};return d(e,(function(e){Rt.call(t,e)&&(n[e]=t[e])})),n},Nt=function(t,e){return T(t,(function(t,n,r){return e.includes(r)||(t[r]=n),t}),{})},Ft=function(t,e,n){var r,i,o,a,s=0;n||(n={});var l=function(){s=!1===n.leading?0:Date.now(),r=null,a=t.apply(i,o),r||(i=o=null)},c=function(){var c=Date.now();s||!1!==n.leading||(s=c);var u=e-(c-s);return i=this,o=arguments,u<=0||u>e?(r&&(clearTimeout(r),r=null),s=c,a=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(l,u)),a};return c.cancel=function(){clearTimeout(r),s=0,r=i=o=null},c},zt=function(t){return r(t)?Array.prototype.slice.call(t):[]},Bt={},$t=function(t){return Bt[t=t||"g"]?Bt[t]+=1:Bt[t]=1,t+Bt[t]},jt=function(){};function Ut(t){return u(t)?0:r(t)?t.length:Object.keys(t).length}var Vt,Ht=n(9388),Gt=xt((function(t,e){void 0===e&&(e={});var n=e.fontSize,r=e.fontFamily,i=e.fontWeight,o=e.fontStyle,a=e.fontVariant;return Vt||(Vt=document.createElement("canvas").getContext("2d")),Vt.font=[o,a,i,n+"px",r].join(" "),Vt.measureText(P(t)?t:"").width}),(function(t,e){return void 0===e&&(e={}),(0,Ht.pr)([t],tt(e)).join("")})),Wt=function(t,e,n,r){void 0===r&&(r="...");var i,o,a=Gt(r,n),s=P(t)?t:et(t),l=e,c=[];if(Gt(t,n)<=e)return t;for(;i=s.substr(0,16),!((o=Gt(i,n))+a>l&&o>l);)if(c.push(i),l-=o,!(s=s.substr(16)))return c.join("");for(;i=s.substr(0,1),!((o=Gt(i,n))+a>l);)if(c.push(i),l-=o,!(s=s.substr(1)))return c.join("");return""+c.join("")+r},Xt=function(){function t(){this.map={}}return t.prototype.has=function(t){return void 0!==this.map[t]},t.prototype.get=function(t,e){var n=this.map[t];return void 0===n?e:n},t.prototype.set=function(t,e){this.map[t]=e},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(t){delete this.map[t]},t.prototype.size=function(){return Object.keys(this.map).length},t}()},9607:function(t,e,n){var r=n(4175).pZ;t.exports=function(t){var e=[1/0,1/0,-1/0,-1/0];return r(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}},6758:function(t){function e(t,e,n,r){if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");if(n&&4!==n.length)throw new Error("bbox must be an Array of 4 numbers");if(r&&-1===["string","number"].indexOf(typeof r))throw new Error("id must be a number or a string");var i={type:"Feature"};return r&&(i.id=r),n&&(i.bbox=n),i.properties=e||{},i.geometry=t,i}function n(t,n,r,i){if(!t)throw new Error("No coordinates passed");if(void 0===t.length)throw new Error("Coordinates must be an array");if(t.length<2)throw new Error("Coordinates must be at least 2 numbers long");if(!d(t[0])||!d(t[1]))throw new Error("Coordinates must contain numbers");return e({type:"Point",coordinates:t},n,r,i)}function r(t,n,r,i){if(!t)throw new Error("No coordinates passed");for(var o=0;o<t.length;o++){var a=t[o];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++){if(0===o&&0===s&&!d(a[0][0])||!d(a[0][1]))throw new Error("Coordinates must contain numbers");if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}}return e({type:"Polygon",coordinates:t},n,r,i)}function i(t,n,r,i){if(!t)throw new Error("No coordinates passed");if(t.length<2)throw new Error("Coordinates must be an array of two or more positions");if(!d(t[0][1])||!d(t[0][1]))throw new Error("Coordinates must contain numbers");return e({type:"LineString",coordinates:t},n,r,i)}function o(t,n,r,i){if(!t)throw new Error("No coordinates passed");return e({type:"MultiLineString",coordinates:t},n,r,i)}function a(t,n,r,i){if(!t)throw new Error("No coordinates passed");return e({type:"MultiPoint",coordinates:t},n,r,i)}function s(t,n,r,i){if(!t)throw new Error("No coordinates passed");return e({type:"MultiPolygon",coordinates:t},n,r,i)}var l={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373e3,metres:6373e3,centimeters:6373e5,centimetres:6373e5,kilometers:6373,kilometres:6373,feet:20908792.65},c={kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,centimetres:1e4,millimeter:1e6,acres:247105e-9,miles:386e-9,yards:1.195990046,feet:10.763910417,inches:1550.003100006};function u(t,e){if(void 0===t||null===t)throw new Error("radians is required");var n=l[e||"kilometers"];if(!n)throw new Error("units is invalid");return t*n}function h(t,e){if(void 0===t||null===t)throw new Error("distance is required");var n=l[e||"kilometers"];if(!n)throw new Error("units is invalid");return t/n}function p(t){if(null===t||void 0===t)throw new Error("radians is required");return 180*(t%(2*Math.PI))/Math.PI}function d(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}t.exports={feature:e,geometry:function(t,e,l){if(!t)throw new Error("type is required");if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(l&&4!==l.length)throw new Error("bbox must be an Array of 4 numbers");var c;switch(t){case"Point":c=n(e).geometry;break;case"LineString":c=i(e).geometry;break;case"Polygon":c=r(e).geometry;break;case"MultiPoint":c=a(e).geometry;break;case"MultiLineString":c=o(e).geometry;break;case"MultiPolygon":c=s(e).geometry;break;default:throw new Error(t+" is invalid")}return l&&(c.bbox=l),c},featureCollection:function(t,e,n){if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");if(e&&4!==e.length)throw new Error("bbox must be an Array of 4 numbers");if(n&&-1===["string","number"].indexOf(typeof n))throw new Error("id must be a number or a string");var r={type:"FeatureCollection"};return n&&(r.id=n),e&&(r.bbox=e),r.features=t,r},geometryCollection:function(t,n,r,i){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return e({type:"GeometryCollection",geometries:t},n,r,i)},point:n,multiPoint:a,lineString:i,multiLineString:o,polygon:r,multiPolygon:s,radiansToDistance:u,distanceToRadians:h,distanceToDegrees:function(t,e){return p(h(t,e))},radians2degrees:p,degrees2radians:function(t){if(null===t||void 0===t)throw new Error("degrees is required");return t%360*Math.PI/180},bearingToAngle:function(t){if(null===t||void 0===t)throw new Error("bearing is required");var e=t%360;return e<0&&(e+=360),e},convertDistance:function(t,e,n){if(null===t||void 0===t)throw new Error("distance is required");if(!(t>=0))throw new Error("distance must be a positive number");return u(h(t,e),n||"kilometers")},convertArea:function(t,e,n){if(null===t||void 0===t)throw new Error("area is required");if(!(t>=0))throw new Error("area must be a positive number");var r=c[e||"meters"];if(!r)throw new Error("invalid original units");var i=c[n||"kilometers"];if(!i)throw new Error("invalid final units");return t/r*i},round:function(t,e){if(void 0===t||null===t||isNaN(t))throw new Error("num is required");if(e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},isNumber:d}},3663:function(t,e,n){var r=n(4892),i=n(5450),o=n(3454),a=n(1146),s=n(3535),l=n(2833),c=Date.prototype.getTime;function u(t,e,n){var d=n||{};return!!(d.strict?o(t,e):t===e)||(!t||!e||"object"!==typeof t&&"object"!==typeof e?d.strict?o(t,e):t==e:function(t,e,n){var o,d;if(typeof t!==typeof e)return!1;if(h(t)||h(e))return!1;if(t.prototype!==e.prototype)return!1;if(i(t)!==i(e))return!1;var f=a(t),g=a(e);if(f!==g)return!1;if(f||g)return t.source===e.source&&s(t)===s(e);if(l(t)&&l(e))return c.call(t)===c.call(e);var m=p(t),y=p(e);if(m!==y)return!1;if(m||y){if(t.length!==e.length)return!1;for(o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}if(typeof t!==typeof e)return!1;try{var v=r(t),x=r(e)}catch(_){return!1}if(v.length!==x.length)return!1;for(v.sort(),x.sort(),o=v.length-1;o>=0;o--)if(v[o]!=x[o])return!1;for(o=v.length-1;o>=0;o--)if(!u(t[d=v[o]],e[d],n))return!1;return!0}(t,e,d))}function h(t){return null===t||void 0===t}function p(t){return!(!t||"object"!==typeof t||"number"!==typeof t.length)&&("function"===typeof t.copy&&"function"===typeof t.slice&&!(t.length>0&&"number"!==typeof t[0]))}t.exports=u},4175:function(t,e,n){"use strict";function r(t,e,n){if(null!==t){var i,o,a,s,l,c,u,h,p,d,f=0,g=0,m=t.type,y="FeatureCollection"===m,v="Feature"===m,x=y?t.features.length:1;for(i=0;i<x;i++)for(u=(d=!!(p=y?t.features[i].geometry:v?t.geometry:t)&&"GeometryCollection"===p.type)?p.geometries.length:1,o=0;o<u;o++){var _=0;if(null!==(c=d?p.geometries[o]:p)){h=c.coordinates;var b=c.type;switch(f=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":e(h,g,i,_),g++,_++;break;case"LineString":case"MultiPoint":for(a=0;a<h.length;a++)e(h[a],g,i,_),g++,"MultiPoint"===b&&_++;"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(a=0;a<h.length;a++){for(s=0;s<h[a].length-f;s++)e(h[a][s],g,i,_),g++;"MultiLineString"===b&&_++}"Polygon"===b&&_++;break;case"MultiPolygon":for(a=0;a<h.length;a++){for(s=0;s<h[a].length;s++)for(l=0;l<h[a][s].length-f;l++)e(h[a][s][l],g,i,_),g++;_++}break;case"GeometryCollection":for(a=0;a<c.geometries.length;a++)r(c.geometries[a],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}n.d(e,{pZ:function(){return r}})},4037:function(t,e,n){"use strict";var r=n(2506),i=n(9722),o=i(r("String.prototype.indexOf"));t.exports=function(t,e){var n=r(t,!!e);return"function"===typeof n&&o(t,".prototype.")>-1?i(n):n}},9722:function(t,e,n){"use strict";var r=n(3350),i=n(2506),o=i("%Function.prototype.apply%"),a=i("%Function.prototype.call%"),s=i("%Reflect.apply%",!0)||r.call(a,o),l=i("%Object.getOwnPropertyDescriptor%",!0),c=i("%Object.defineProperty%",!0),u=i("%Math.max%");if(c)try{c({},"a",{value:1})}catch(p){c=null}t.exports=function(t){var e=s(r,a,arguments);l&&c&&(l(e,"length").configurable&&c(e,"length",{value:1+u(0,t.length-(arguments.length-1))}));return e};var h=function(){return s(r,o,arguments)};c?c(t.exports,"apply",{value:h}):t.exports.apply=h},1694:function(t,e){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(n){var o=typeof n;if("string"===o||"number"===o)t.push(n);else if(Array.isArray(n)){if(n.length){var a=i.apply(null,n);a&&t.push(a)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){t.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&t.push(s)}}}return t.join(" ")}t.exports?(i.default=i,t.exports=i):void 0===(n=function(){return i}.apply(e,[]))||(t.exports=n)}()},8182:function(t,e,n){"use strict";function r(t){var e,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=r(t[e]))&&(i&&(i+=" "),i+=n);else for(e in t)t[e]&&(i&&(i+=" "),i+=e);return i}function i(){for(var t,e,n=0,i="";n<arguments.length;)(t=arguments[n++])&&(e=r(t))&&(i&&(i+=" "),i+=e);return i}n.r(e),n.d(e,{clsx:function(){return i}}),e.default=i},4161:function(t,e,n){"use strict";var r=n(384),i=n(4613),o=n(5021),a=n(4460).orient2d;function s(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;var i=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],a=0;a<t.length;a++){var s=t[a];s[0]<e[0]&&(e=s),s[0]>r[0]&&(r=s),s[1]<n[1]&&(n=s),s[1]>i[1]&&(i=s)}var l=[e,n,r,i],c=l.slice();for(a=0;a<t.length;a++)o(t[a],l)||c.push(t[a]);return function(t){t.sort(x);for(var e=[],n=0;n<t.length;n++){for(;e.length>=2&&d(e[e.length-2],e[e.length-1],t[n])<=0;)e.pop();e.push(t[n])}for(var r=[],i=t.length-1;i>=0;i--){for(;r.length>=2&&d(r[r.length-2],r[r.length-1],t[i])<=0;)r.pop();r.push(t[i])}return r.pop(),e.pop(),e.concat(r)}(c)}(t),a=new r(16);a.toBBox=function(t){return{minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]}},a.compareMinX=function(t,e){return t[0]-e[0]},a.compareMinY=function(t,e){return t[1]-e[1]},a.load(t);for(var s,c=[],u=0;u<i.length;u++){var h=i[u];a.remove(h),s=g(h,s),c.push(s)}var p=new r(16);for(u=0;u<c.length;u++)p.insert(f(c[u]));for(var y=e*e,v=n*n;c.length;){var _=c.shift(),b=_.p,w=_.next.p,S=m(b,w);if(!(S<v)){var C=S/y;(h=l(a,_.prev.p,b,w,_.next.next.p,C,p))&&Math.min(m(h,b),m(h,w))<=C&&(c.push(_),c.push(g(h,_)),a.remove(h),p.remove(_),p.insert(f(_)),p.insert(f(_.next)))}}_=s;var E=[];do{E.push(_.p),_=_.next}while(_!==s);return E.push(_.p),E}function l(t,e,n,r,o,a,s){for(var l=new i([],c),h=t.data;h;){for(var d=0;d<h.children.length;d++){var f=h.children[d],g=h.leaf?y(f,n,r):u(n,r,f);g>a||l.push({node:f,dist:g})}for(;l.length&&!l.peek().node.children;){var m=l.pop(),v=m.node,x=y(v,e,n),_=y(v,r,o);if(m.dist<x&&m.dist<_&&p(n,v,s)&&p(r,v,s))return v}(h=l.pop())&&(h=h.node)}return null}function c(t,e){return t.dist-e.dist}function u(t,e,n){if(h(t,n)||h(e,n))return 0;var r=v(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=v(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=v(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var a=v(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===a?0:Math.min(r,i,o,a)}function h(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function p(t,e,n){for(var r,i,o,a,s=Math.min(t[0],e[0]),l=Math.min(t[1],e[1]),c=Math.max(t[0],e[0]),u=Math.max(t[1],e[1]),h=n.search({minX:s,minY:l,maxX:c,maxY:u}),p=0;p<h.length;p++)if(r=h[p].p,i=h[p].next.p,o=t,r!==(a=e)&&i!==o&&d(r,i,o)>0!==d(r,i,a)>0&&d(o,a,r)>0!==d(o,a,i)>0)return!1;return!0}function d(t,e,n){return a(t[0],t[1],e[0],e[1],n[0],n[1])}function f(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function g(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function m(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function y(t,e,n){var r=e[0],i=e[1],o=n[0]-r,a=n[1]-i;if(0!==o||0!==a){var s=((t[0]-r)*o+(t[1]-i)*a)/(o*o+a*a);s>1?(r=n[0],i=n[1]):s>0&&(r+=o*s,i+=a*s)}return(o=t[0]-r)*o+(a=t[1]-i)*a}function v(t,e,n,r,i,o,a,s){var l,c,u,h,p=n-t,d=r-e,f=a-i,g=s-o,m=t-i,y=e-o,v=p*p+d*d,x=p*f+d*g,_=f*f+g*g,b=p*m+d*y,w=f*m+g*y,S=v*_-x*x,C=S,E=S;0===S?(c=0,C=1,h=w,E=_):(h=v*w-x*b,(c=x*w-_*b)<0?(c=0,h=w,E=_):c>C&&(c=C,h=w+x,E=_)),h<0?(h=0,-b<0?c=0:-b>v?c=C:(c=-b,C=v)):h>E&&(h=E,-b+x<0?c=0:-b+x>v?c=C:(c=-b+x,C=v));var k=(1-(u=0===h?0:h/E))*i+u*a-((1-(l=0===c?0:c/C))*t+l*n),M=(1-u)*o+u*s-((1-l)*e+l*r);return k*k+M*M}function x(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}i.default&&(i=i.default),t.exports=s,t.exports.default=s},384:function(t){t.exports=function(){"use strict";function t(t,r,i,o,a){!function t(n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,l=r-i+1,c=Math.log(s),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(s-u)/s)*(l-s/2<0?-1:1);t(n,r,Math.max(i,Math.floor(r-l*u/s+h)),Math.min(o,Math.floor(r+(s-l)*u/s+h)),a)}var p=n[r],d=i,f=o;for(e(n,i,r),a(n[o],p)>0&&e(n,i,o);d<f;){for(e(n,d,f),d++,f--;a(n[d],p)<0;)d++;for(;a(n[f],p)>0;)f--}0===a(n[i],p)?e(n,i,f):e(n,++f,o),f<=r&&(i=f+1),r<=f&&(o=f-1)}}(t,r,i||0,o||t.length-1,a||n)}function e(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function n(t,e){return t<e?-1:t>e?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,r,i){i||(i=f(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<n;o++){var a=t.children[o];s(i,t.leaf?r(a):a)}return i}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function u(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function d(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function f(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,n,r,i,o){for(var a=[n,r];a.length;)if(!((r=a.pop())-(n=a.pop())<=i)){var s=n+Math.ceil((r-n)/i/2)*i;t(e,s,n,r,o),a.push(n,s,s,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var e=this.data,n=[];if(!d(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?r(a):a;d(t,s)&&(e.leaf?n.push(a):p(t,s)?this._all(a,n):i.push(a))}e=i.pop()}return n},r.prototype.collides=function(t){var e=this.data;if(!d(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],o=e.leaf?this.toBBox(i):i;if(d(t,o)){if(e.leaf||p(t,o))return!0;n.push(i)}}e=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=f([]),this},r.prototype.remove=function(t,e){if(!t)return this;for(var n,r,o,a=this.data,s=this.toBBox(t),l=[],c=[];a||l.length;){if(a||(a=l.pop(),r=l[l.length-1],n=c.pop(),o=!0),a.leaf){var u=i(t,a.children,e);if(-1!==u)return a.children.splice(u,1),l.push(a),this._condense(l),this}o||a.leaf||!p(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(l.push(a),c.push(n),n=0,r=a,a=a.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,e){return t.minX-e.minX},r.prototype.compareMinY=function(t,e){return t.minY-e.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},r.prototype._build=function(t,e,n,r){var i,a=n-e+1,s=this._maxEntries;if(a<=s)return o(i=f(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,r-1))),(i=f([])).leaf=!1,i.height=r;var l=Math.ceil(a/s),c=l*Math.ceil(Math.sqrt(s));g(t,e,n,c,this.compareMinX);for(var u=e;u<=n;u+=c){var h=Math.min(u+c-1,n);g(t,u,h,l,this.compareMinY);for(var p=u;p<=h;p+=l){var d=Math.min(p+l-1,h);i.children.push(this._build(t,p,d,r-1))}}return o(i,this.toBBox),i},r.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var l=e.children[s],c=u(l),h=(p=t,d=l,(Math.max(d.maxX,p.maxX)-Math.min(d.minX,p.minX))*(Math.max(d.maxY,p.maxY)-Math.min(d.minY,p.minY))-c);h<o?(o=h,i=c<i?c:i,a=l):h===o&&c<i&&(i=c,a=l)}e=a||e.children[0]}var p,d;return e},r.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),s(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},r.prototype._split=function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var a=this._chooseSplitIndex(n,i,r),s=f(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,o(n,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},r.prototype._splitRoot=function(t,e){this.data=f([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,e,n){for(var r,i,o,s,l,c,h,p=1/0,d=1/0,f=e;f<=n-e;f++){var g=a(t,0,f,this.toBBox),m=a(t,f,n,this.toBBox),y=(i=g,o=m,s=void 0,l=void 0,c=void 0,h=void 0,s=Math.max(i.minX,o.minX),l=Math.max(i.minY,o.minY),c=Math.min(i.maxX,o.maxX),h=Math.min(i.maxY,o.maxY),Math.max(0,c-s)*Math.max(0,h-l)),v=u(g)+u(m);y<p?(p=y,r=f,d=v<d?v:d):y===p&&v<d&&(d=v,r=f)}return r||n-e},r.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:l,i=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,o=a(t,0,e,i),l=a(t,n-e,n,i),c=h(o)+h(l),u=e;u<n-e;u++){var p=t.children[u];s(o,t.leaf?i(p):p),c+=h(o)}for(var d=n-e-1;d>=e;d--){var f=t.children[d];s(l,t.leaf?i(f):f),c+=h(l)}return c},r.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;r>=0;r--)s(e[r],t)},r.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},r}()},7046:function(t,e){!function(t){"use strict";function e(t,e){return n(t)||r(t,e)||i()}function n(t){if(Array.isArray(t))return t}function r(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(t,e,n,r){t=t.filter((function(t,r){var i=e(t,r),o=n(t,r);return null!=i&&isFinite(i)&&null!=o&&isFinite(o)})),r&&t.sort((function(t,n){return e(t)-e(n)}));for(var i,o,a,s=t.length,l=new Float64Array(s),c=new Float64Array(s),u=0,h=0,p=0;p<s;)a=t[p],l[p]=i=+e(a,p,t),c[p]=o=+n(a,p,t),u+=(i-u)/++p,h+=(o-h)/p;for(var d=0;d<s;++d)l[d]-=u,c[d]-=h;return[l,c,u,h]}function a(t,e,n,r){for(var i=0,o=0,a=t.length;o<a;o++){var s=t[o],l=+e(s,o,t),c=+n(s,o,t);null!=l&&isFinite(l)&&null!=c&&isFinite(c)&&r(l,c,i++)}}function s(t,e,n,r,i){var o=0,s=0;return a(t,e,n,(function(t,e){var n=e-i(t),a=e-r;o+=n*n,s+=a*a})),1-o/s}function l(t){return 180*Math.atan2(t[1][1]-t[0][1],t[1][0]-t[0][0])/Math.PI}function c(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}function u(t,e,n){for(var r=Math.log(e-t)*Math.LOG10E+1|0,i=1*Math.pow(10,-r/2-1),o=1e4,a=[u(t),u(e)],s=0;h(a)&&s<o;);return a;function u(t){return[t,n(t)]}function h(t){s++;for(var e=t.length,n=!1,r=0;r<e-1;r++){var o=t[r],a=c([o,t[r+1]]),h=u(a[0]),p=l([o,a]),d=l([o,h]);Math.abs(p-d)>i&&(t.splice(r+1,0,h),n=!0)}return n}}function h(t,e,n,r){var i=r-t*t,o=Math.abs(i)<1e-24?0:(n-t*e)/i;return[e-o*t,o]}function p(){var t,n=function(t){return t[0]},r=function(t){return t[1]};function i(i){var o=0,l=0,c=0,p=0,d=0,f=0,g=t?+t[0]:1/0,m=t?+t[1]:-1/0;a(i,n,r,(function(e,n){var r=Math.log(n),i=e*n;++o,l+=(n-l)/o,p+=(i-p)/o,f+=(e*i-f)/o,c+=(n*r-c)/o,d+=(i*r-d)/o,t||(e<g&&(g=e),e>m&&(m=e))}));var y=e(h(p/l,c/l,d/l,f/l),2),v=y[0],x=y[1];v=Math.exp(v);var _=function(t){return v*Math.exp(x*t)},b=u(g,m,_);return b.a=v,b.b=x,b.predict=_,b.rSquared=s(i,n,r,l,_),b}return i.domain=function(e){return arguments.length?(t=e,i):t},i.x=function(t){return arguments.length?(n=t,i):n},i.y=function(t){return arguments.length?(r=t,i):r},i}function d(){var t,n=function(t){return t[0]},r=function(t){return t[1]};function i(i){var o=0,l=0,c=0,u=0,p=0,d=t?+t[0]:1/0,f=t?+t[1]:-1/0;a(i,n,r,(function(e,n){++o,l+=(e-l)/o,c+=(n-c)/o,u+=(e*n-u)/o,p+=(e*e-p)/o,t||(e<d&&(d=e),e>f&&(f=e))}));var g=e(h(l,c,u,p),2),m=g[0],y=g[1],v=function(t){return y*t+m},x=[[d,v(d)],[f,v(f)]];return x.a=y,x.b=m,x.predict=v,x.rSquared=s(i,n,r,c,v),x}return i.domain=function(e){return arguments.length?(t=e,i):t},i.x=function(t){return arguments.length?(n=t,i):n},i.y=function(t){return arguments.length?(r=t,i):r},i}function f(t){t.sort((function(t,e){return t-e}));var e=t.length/2;return e%1===0?(t[e-1]+t[e])/2:t[Math.floor(e)]}var g=2,m=1e-12;function y(){var t=function(t){return t[0]},n=function(t){return t[1]},r=.3;function i(i){for(var a=e(o(i,t,n,!0),4),s=a[0],l=a[1],c=a[2],u=a[3],p=s.length,d=Math.max(2,~~(r*p)),y=new Float64Array(p),b=new Float64Array(p),w=new Float64Array(p).fill(1),S=-1;++S<=g;){for(var C=[0,d-1],E=0;E<p;++E){for(var k=s[E],M=C[0],T=C[1],I=k-s[M]>s[T]-k?M:T,P=0,O=0,A=0,D=0,R=0,L=1/Math.abs(s[I]-k||1),N=M;N<=T;++N){var F=s[N],z=l[N],B=v(Math.abs(k-F)*L)*w[N],$=F*B;P+=B,O+=$,A+=z*B,D+=z*$,R+=F*$}var j=e(h(O/P,A/P,D/P,R/P),2),U=j[0],V=j[1];y[E]=U+V*k,b[E]=Math.abs(l[E]-y[E]),x(s,E+1,C)}if(S===g)break;var H=f(b);if(Math.abs(H)<m)break;for(var G,W,X=0;X<p;++X)G=b[X]/(6*H),w[X]=G>=1?m:(W=1-G*G)*W}return _(s,y,c,u)}return i.bandwidth=function(t){return arguments.length?(r=t,i):r},i.x=function(e){return arguments.length?(t=e,i):t},i.y=function(t){return arguments.length?(n=t,i):n},i}function v(t){return(t=1-t*t*t)*t*t}function x(t,e,n){var r=t[e],i=n[0],o=n[1]+1;if(!(o>=t.length))for(;e>i&&t[o]-r<=r-t[i];)n[0]=++i,n[1]=o,++o}function _(t,e,n,r){for(var i,o=t.length,a=[],s=0,l=0,c=[];s<o;++s)i=t[s]+n,c[0]===i?c[1]+=(e[s]-c[1])/++l:(l=0,c[1]+=r,c=[i,e[s]],a.push(c));return c[1]+=r,a}function b(){var t,n=function(t){return t[0]},r=function(t){return t[1]},i=Math.E;function o(o){var l=0,c=0,p=0,d=0,f=0,g=t?+t[0]:1/0,m=t?+t[1]:-1/0,y=Math.log(i);a(o,n,r,(function(e,n){var r=Math.log(e)/y;++l,c+=(r-c)/l,p+=(n-p)/l,d+=(r*n-d)/l,f+=(r*r-f)/l,t||(e<g&&(g=e),e>m&&(m=e))}));var v=e(h(c,p,d,f),2),x=v[0],_=v[1],b=function(t){return _*Math.log(t)/y+x},w=u(g,m,b);return w.a=_,w.b=x,w.predict=b,w.rSquared=s(o,n,r,p,b),w}return o.domain=function(e){return arguments.length?(t=e,o):t},o.x=function(t){return arguments.length?(n=t,o):n},o.y=function(t){return arguments.length?(r=t,o):r},o.base=function(t){return arguments.length?(i=t,o):i},o}function w(){var t,n=function(t){return t[0]},r=function(t){return t[1]};function i(i){var l,c,h,p,d=e(o(i,n,r),4),f=d[0],g=d[1],m=d[2],y=d[3],v=f.length,x=0,_=0,b=0,w=0,S=0;for(l=0;l<v;)c=f[l],h=g[l++],x+=((p=c*c)-x)/l,_+=(p*c-_)/l,b+=(p*p-b)/l,w+=(c*h-w)/l,S+=(p*h-S)/l;var C=0,E=0,k=t?+t[0]:1/0,M=t?+t[1]:-1/0;a(i,n,r,(function(e,n){E++,C+=(n-C)/E,t||(e<k&&(k=e),e>M&&(M=e))}));var T=b-x*x,I=x*T-_*_,P=(S*x-w*_)/I,O=(w*T-S*_)/I,A=-P*x,D=function(t){return P*(t-=m)*t+O*t+A+y},R=u(k,M,D);return R.a=P,R.b=O-2*P*m,R.c=A-O*m+P*m*m+y,R.predict=D,R.rSquared=s(i,n,r,C,D),R}return i.domain=function(e){return arguments.length?(t=e,i):t},i.x=function(t){return arguments.length?(n=t,i):n},i.y=function(t){return arguments.length?(r=t,i):r},i}function S(){var t,n=function(t){return t[0]},r=function(t){return t[1]},i=3;function l(l){if(1===i){var c=d().x(n).y(r).domain(t)(l);return c.coefficients=[c.b,c.a],delete c.a,delete c.b,c}if(2===i){var h=w().x(n).y(r).domain(t)(l);return h.coefficients=[h.c,h.b,h.a],delete h.a,delete h.b,delete h.c,h}var p,f,g,m,y,v=e(o(l,n,r),4),x=v[0],_=v[1],b=v[2],S=v[3],k=x.length,M=[],T=[],I=i+1,P=0,O=0,A=t?+t[0]:1/0,D=t?+t[1]:-1/0;for(a(l,n,r,(function(e,n){++O,P+=(n-P)/O,t||(e<A&&(A=e),e>D&&(D=e))})),p=0;p<I;++p){for(g=0,m=0;g<k;++g)m+=Math.pow(x[g],p)*_[g];for(M.push(m),y=new Float64Array(I),f=0;f<I;++f){for(g=0,m=0;g<k;++g)m+=Math.pow(x[g],p+f);y[f]=m}T.push(y)}T.push(M);var R=E(T),L=function(t){t-=b;var e=S+R[0]+R[1]*t+R[2]*t*t;for(p=3;p<I;++p)e+=R[p]*Math.pow(t,p);return e},N=u(A,D,L);return N.coefficients=C(I,R,-b,S),N.predict=L,N.rSquared=s(l,n,r,P,L),N}return l.domain=function(e){return arguments.length?(t=e,l):t},l.x=function(t){return arguments.length?(n=t,l):n},l.y=function(t){return arguments.length?(r=t,l):r},l.order=function(t){return arguments.length?(i=t,l):i},l}function C(t,e,n,r){var i,o,a,s,l=Array(t);for(i=0;i<t;++i)l[i]=0;for(i=t-1;i>=0;--i)for(a=e[i],s=1,l[i]+=a,o=1;o<=i;++o)s*=(i+1-o)/o,l[i-o]+=a*Math.pow(n,o)*s;return l[0]+=r,l}function E(t){var e,n,r,i,o,a=t.length-1,s=[];for(e=0;e<a;++e){for(i=e,n=e+1;n<a;++n)Math.abs(t[e][n])>Math.abs(t[e][i])&&(i=n);for(r=e;r<a+1;++r)o=t[r][e],t[r][e]=t[r][i],t[r][i]=o;for(n=e+1;n<a;++n)for(r=a;r>=e;r--)t[r][n]-=t[r][e]*t[e][n]/t[e][e]}for(n=a-1;n>=0;--n){for(o=0,r=n+1;r<a;++r)o+=t[r][n]*s[r];s[n]=(t[a][n]-o)/t[n][n]}return s}function k(){var t,n=function(t){return t[0]},r=function(t){return t[1]};function i(i){var o=0,l=0,c=0,p=0,d=0,f=0,g=t?+t[0]:1/0,m=t?+t[1]:-1/0;a(i,n,r,(function(e,n){var r=Math.log(e),i=Math.log(n);++o,l+=(r-l)/o,c+=(i-c)/o,p+=(r*i-p)/o,d+=(r*r-d)/o,f+=(n-f)/o,t||(e<g&&(g=e),e>m&&(m=e))}));var y=e(h(l,c,p,d),2),v=y[0],x=y[1];v=Math.exp(v);var _=function(t){return v*Math.pow(t,x)},b=u(g,m,_);return b.a=v,b.b=x,b.predict=_,b.rSquared=s(i,n,r,f,_),b}return i.domain=function(e){return arguments.length?(t=e,i):t},i.x=function(t){return arguments.length?(n=t,i):n},i.y=function(t){return arguments.length?(r=t,i):r},i}t.regressionExp=p,t.regressionLinear=d,t.regressionLoess=y,t.regressionLog=b,t.regressionPoly=S,t.regressionPow=k,t.regressionQuad=w,Object.defineProperty(t,"__esModule",{value:!0})}(e)},7892:function(t){t.exports=function(){"use strict";var t=1e3,e=6e4,n=36e5,r="millisecond",i="second",o="minute",a="hour",s="day",l="week",c="month",u="quarter",h="year",p="date",d="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],n=t%100;return"["+t+(e[(n-20)%10]||e[n]||e[0])+"]"}},y=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},v={s:y,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?"+":"-")+y(r,2,"0")+":"+y(i,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,c),o=n-i<0,a=e.clone().add(r+(o?-1:1),c);return+(-(r+(n-i)/(o?i-a:a-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:h,w:l,d:s,D:p,h:a,m:o,s:i,ms:r,Q:u}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},x="en",_={};_[x]=m;var b=function(t){return t instanceof E},w=function t(e,n,r){var i;if(!e)return x;if("string"==typeof e){var o=e.toLowerCase();_[o]&&(i=o),n&&(_[o]=n,i=o);var a=e.split("-");if(!i&&a.length>1)return t(a[0])}else{var s=e.name;_[s]=e,i=s}return!r&&i&&(x=i),i||!r&&x},S=function(t,e){if(b(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new E(n)},C=v;C.l=w,C.i=b,C.w=function(t,e){return S(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var E=function(){function m(t){this.$L=w(t.locale,null,!0),this.parse(t)}var y=m.prototype;return y.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(C.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(f);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},y.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},y.$utils=function(){return C},y.isValid=function(){return!(this.$d.toString()===d)},y.isSame=function(t,e){var n=S(t);return this.startOf(e)<=n&&n<=this.endOf(e)},y.isAfter=function(t,e){return S(t)<this.startOf(e)},y.isBefore=function(t,e){return this.endOf(e)<S(t)},y.$g=function(t,e,n){return C.u(t)?this[e]:this.set(n,t)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(t,e){var n=this,r=!!C.u(e)||e,u=C.p(t),d=function(t,e){var i=C.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(s)},f=function(t,e){return C.w(n.toDate()[t].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},g=this.$W,m=this.$M,y=this.$D,v="set"+(this.$u?"UTC":"");switch(u){case h:return r?d(1,0):d(31,11);case c:return r?d(1,m):d(0,m+1);case l:var x=this.$locale().weekStart||0,_=(g<x?g+7:g)-x;return d(r?y-_:y+(6-_),m);case s:case p:return f(v+"Hours",0);case a:return f(v+"Minutes",1);case o:return f(v+"Seconds",2);case i:return f(v+"Milliseconds",3);default:return this.clone()}},y.endOf=function(t){return this.startOf(t,!1)},y.$set=function(t,e){var n,l=C.p(t),u="set"+(this.$u?"UTC":""),d=(n={},n[s]=u+"Date",n[p]=u+"Date",n[c]=u+"Month",n[h]=u+"FullYear",n[a]=u+"Hours",n[o]=u+"Minutes",n[i]=u+"Seconds",n[r]=u+"Milliseconds",n)[l],f=l===s?this.$D+(e-this.$W):e;if(l===c||l===h){var g=this.clone().set(p,1);g.$d[d](f),g.init(),this.$d=g.set(p,Math.min(this.$D,g.daysInMonth())).$d}else d&&this.$d[d](f);return this.init(),this},y.set=function(t,e){return this.clone().$set(t,e)},y.get=function(t){return this[C.p(t)]()},y.add=function(r,u){var p,d=this;r=Number(r);var f=C.p(u),g=function(t){var e=S(d);return C.w(e.date(e.date()+Math.round(t*r)),d)};if(f===c)return this.set(c,this.$M+r);if(f===h)return this.set(h,this.$y+r);if(f===s)return g(1);if(f===l)return g(7);var m=(p={},p[o]=e,p[a]=n,p[i]=t,p)[f]||1,y=this.$d.getTime()+r*m;return C.w(y,this)},y.subtract=function(t,e){return this.add(-1*t,e)},y.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||d;var r=t||"YYYY-MM-DDTHH:mm:ssZ",i=C.z(this),o=this.$H,a=this.$m,s=this.$M,l=n.weekdays,c=n.months,u=function(t,n,i,o){return t&&(t[n]||t(e,r))||i[n].slice(0,o)},h=function(t){return C.s(o%12||12,t,"0")},p=n.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},f={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:C.s(s+1,2,"0"),MMM:u(n.monthsShort,s,c,3),MMMM:u(c,s),D:this.$D,DD:C.s(this.$D,2,"0"),d:String(this.$W),dd:u(n.weekdaysMin,this.$W,l,2),ddd:u(n.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(o),HH:C.s(o,2,"0"),h:h(1),hh:h(2),a:p(o,a,!0),A:p(o,a,!1),m:String(a),mm:C.s(a,2,"0"),s:String(this.$s),ss:C.s(this.$s,2,"0"),SSS:C.s(this.$ms,3,"0"),Z:i};return r.replace(g,(function(t,e){return e||f[t]||i.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(r,p,d){var f,g=C.p(p),m=S(r),y=(m.utcOffset()-this.utcOffset())*e,v=this-m,x=C.m(this,m);return x=(f={},f[h]=x/12,f[c]=x,f[u]=x/3,f[l]=(v-y)/6048e5,f[s]=(v-y)/864e5,f[a]=v/n,f[o]=v/e,f[i]=v/t,f)[g]||v,d?x:C.a(x)},y.daysInMonth=function(){return this.endOf(c).$D},y.$locale=function(){return _[this.$L]},y.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=w(t,e,!0);return r&&(n.$L=r),n},y.clone=function(){return C.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},m}(),k=E.prototype;return S.prototype=k,[["$ms",r],["$s",i],["$m",o],["$H",a],["$W",s],["$M",c],["$y",h],["$D",p]].forEach((function(t){k[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),S.extend=function(t,e){return t.$i||(t(e,E,S),t.$i=!0),S},S.locale=w,S.isDayjs=b,S.unix=function(t){return S(1e3*t)},S.en=_[x],S.Ls=_,S.p={},S}()},9466:function(t){t.exports=function(){"use strict";return{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],n=t%100;return"["+t+(e[(n-20)%10]||e[n]||e[0])+"]"}}}()},776:function(t){t.exports=function(){"use strict";return function(t,e){var n=e.prototype,r=n.format;n.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return r.bind(this)(t);var i=this.$utils(),o=(t||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,(function(t){switch(t){case"Q":return Math.ceil((e.$M+1)/3);case"Do":return n.ordinal(e.$D);case"gggg":return e.weekYear();case"GGGG":return e.isoWeekYear();case"wo":return n.ordinal(e.week(),"W");case"w":case"ww":return i.s(e.week(),"w"===t?1:2,"0");case"W":case"WW":return i.s(e.isoWeek(),"W"===t?1:2,"0");case"k":case"kk":return i.s(String(0===e.$H?24:e.$H),"k"===t?1:2,"0");case"X":return Math.floor(e.$d.getTime()/1e3);case"x":return e.$d.getTime();case"z":return"["+e.offsetName()+"]";case"zzz":return"["+e.offsetName("long")+"]";default:return t}}));return r.bind(this)(o)}}}()},8808:function(t){t.exports=function(){"use strict";var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},e=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n=/\d\d/,r=/\d\d?/,i=/\d*[^-_:/,()\s\d]+/,o={},a=function(t){return(t=+t)+(t>68?1900:2e3)},s=function(t){return function(e){this[t]=+e}},l=[/[+-]\d\d:?(\d\d)?|Z/,function(t){(this.zone||(this.zone={})).offset=function(t){if(!t)return 0;if("Z"===t)return 0;var e=t.match(/([+-]|\d\d)/g),n=60*e[1]+(+e[2]||0);return 0===n?0:"+"===e[0]?-n:n}(t)}],c=function(t){var e=o[t];return e&&(e.indexOf?e:e.s.concat(e.f))},u=function(t,e){var n,r=o.meridiem;if(r){for(var i=1;i<=24;i+=1)if(t.indexOf(r(i,0,e))>-1){n=i>12;break}}else n=t===(e?"pm":"PM");return n},h={A:[i,function(t){this.afternoon=u(t,!1)}],a:[i,function(t){this.afternoon=u(t,!0)}],S:[/\d/,function(t){this.milliseconds=100*+t}],SS:[n,function(t){this.milliseconds=10*+t}],SSS:[/\d{3}/,function(t){this.milliseconds=+t}],s:[r,s("seconds")],ss:[r,s("seconds")],m:[r,s("minutes")],mm:[r,s("minutes")],H:[r,s("hours")],h:[r,s("hours")],HH:[r,s("hours")],hh:[r,s("hours")],D:[r,s("day")],DD:[n,s("day")],Do:[i,function(t){var e=o.ordinal,n=t.match(/\d+/);if(this.day=n[0],e)for(var r=1;r<=31;r+=1)e(r).replace(/\[|\]/g,"")===t&&(this.day=r)}],M:[r,s("month")],MM:[n,s("month")],MMM:[i,function(t){var e=c("months"),n=(c("monthsShort")||e.map((function(t){return t.slice(0,3)}))).indexOf(t)+1;if(n<1)throw new Error;this.month=n%12||n}],MMMM:[i,function(t){var e=c("months").indexOf(t)+1;if(e<1)throw new Error;this.month=e%12||e}],Y:[/[+-]?\d+/,s("year")],YY:[n,function(t){this.year=a(t)}],YYYY:[/\d{4}/,s("year")],Z:l,ZZ:l};function p(n){var r,i;r=n,i=o&&o.formats;for(var a=(n=r.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(e,n,r){var o=r&&r.toUpperCase();return n||i[r]||t[r]||i[o].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(t,e,n){return e||n.slice(1)}))}))).match(e),s=a.length,l=0;l<s;l+=1){var c=a[l],u=h[c],p=u&&u[0],d=u&&u[1];a[l]=d?{regex:p,parser:d}:c.replace(/^\[|\]$/g,"")}return function(t){for(var e={},n=0,r=0;n<s;n+=1){var i=a[n];if("string"==typeof i)r+=i.length;else{var o=i.regex,l=i.parser,c=t.slice(r),u=o.exec(c)[0];l.call(e,u),t=t.replace(u,"")}}return function(t){var e=t.afternoon;if(void 0!==e){var n=t.hours;e?n<12&&(t.hours+=12):12===n&&(t.hours=0),delete t.afternoon}}(e),e}}return function(t,e,n){n.p.customParseFormat=!0,t&&t.parseTwoDigitYear&&(a=t.parseTwoDigitYear);var r=e.prototype,i=r.parse;r.parse=function(t){var e=t.date,r=t.utc,a=t.args;this.$u=r;var s=a[1];if("string"==typeof s){var l=!0===a[2],c=!0===a[3],u=l||c,h=a[2];c&&(h=a[2]),o=this.$locale(),!l&&h&&(o=n.Ls[h]),this.$d=function(t,e,n){try{if(["x","X"].indexOf(e)>-1)return new Date(("X"===e?1e3:1)*t);var r=p(e)(t),i=r.year,o=r.month,a=r.day,s=r.hours,l=r.minutes,c=r.seconds,u=r.milliseconds,h=r.zone,d=new Date,f=a||(i||o?1:d.getDate()),g=i||d.getFullYear(),m=0;i&&!o||(m=o>0?o-1:d.getMonth());var y=s||0,v=l||0,x=c||0,_=u||0;return h?new Date(Date.UTC(g,m,f,y,v,x,_+60*h.offset*1e3)):n?new Date(Date.UTC(g,m,f,y,v,x,_)):new Date(g,m,f,y,v,x,_)}catch(t){return new Date("")}}(e,s,r),this.init(),h&&!0!==h&&(this.$L=this.locale(h).$L),u&&e!=this.format(s)&&(this.$d=new Date("")),o={}}else if(s instanceof Array)for(var d=s.length,f=1;f<=d;f+=1){a[1]=s[f-1];var g=n.apply(this,a);if(g.isValid()){this.$d=g.$d,this.$L=g.$L,this.init();break}f===d&&(this.$d=new Date(""))}else i.call(this,t)}}}()},4036:function(t){t.exports=function(){"use strict";return function(t,e,n){var r=e.prototype,i=function(t){return t&&(t.indexOf?t:t.s)},o=function(t,e,n,r,o){var a=t.name?t:t.$locale(),s=i(a[e]),l=i(a[n]),c=s||l.map((function(t){return t.slice(0,r)}));if(!o)return c;var u=a.weekStart;return c.map((function(t,e){return c[(e+(u||0))%7]}))},a=function(){return n.Ls[n.locale()]},s=function(t,e){return t.formats[e]||function(t){return t.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(t,e,n){return e||n.slice(1)}))}(t.formats[e.toUpperCase()])},l=function(){var t=this;return{months:function(e){return e?e.format("MMMM"):o(t,"months")},monthsShort:function(e){return e?e.format("MMM"):o(t,"monthsShort","months",3)},firstDayOfWeek:function(){return t.$locale().weekStart||0},weekdays:function(e){return e?e.format("dddd"):o(t,"weekdays")},weekdaysMin:function(e){return e?e.format("dd"):o(t,"weekdaysMin","weekdays",2)},weekdaysShort:function(e){return e?e.format("ddd"):o(t,"weekdaysShort","weekdays",3)},longDateFormat:function(e){return s(t.$locale(),e)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};r.localeData=function(){return l.bind(this)()},n.localeData=function(){var t=a();return{firstDayOfWeek:function(){return t.weekStart||0},weekdays:function(){return n.weekdays()},weekdaysShort:function(){return n.weekdaysShort()},weekdaysMin:function(){return n.weekdaysMin()},months:function(){return n.months()},monthsShort:function(){return n.monthsShort()},longDateFormat:function(e){return s(t,e)},meridiem:t.meridiem,ordinal:t.ordinal}},n.months=function(){return o(a(),"months")},n.monthsShort=function(){return o(a(),"monthsShort","months",3)},n.weekdays=function(t){return o(a(),"weekdays",null,null,t)},n.weekdaysShort=function(t){return o(a(),"weekdaysShort","weekdays",3,t)},n.weekdaysMin=function(t){return o(a(),"weekdaysMin","weekdays",2,t)}}}()},3027:function(t){t.exports=function(){"use strict";var t="minute",e=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(r,i,o){var a=i.prototype;o.utc=function(t){return new i({date:t,utc:!0,args:arguments})},a.utc=function(e){var n=o(this.toDate(),{locale:this.$L,utc:!0});return e?n.add(this.utcOffset(),t):n},a.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var s=a.parse;a.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),s.call(this,t)};var l=a.init;a.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else l.call(this)};var c=a.utcOffset;a.utcOffset=function(r,i){var o=this.$utils().u;if(o(r))return this.$u?0:o(this.$offset)?c.call(this):this.$offset;if("string"==typeof r&&(r=function(t){void 0===t&&(t="");var r=t.match(e);if(!r)return null;var i=(""+r[0]).match(n)||["-",0,0],o=i[0],a=60*+i[1]+ +i[2];return 0===a?0:"+"===o?a:-a}(r),null===r))return this;var a=Math.abs(r)<=16?60*r:r,s=this;if(i)return s.$offset=a,s.$u=0===r,s;if(0!==r){var l=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(s=this.local().add(a+l,t)).$offset=a,s.$x.$localOffset=l}else s=this.utc();return s};var u=a.format;a.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return u.call(this,e)},a.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*t},a.isUTC=function(){return!!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var h=a.toDate;a.toDate=function(t){return"s"===t&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=a.diff;a.diff=function(t,e,n){if(t&&this.$u===t.$u)return p.call(this,t,e,n);var r=this.local(),i=o(t).local();return p.call(r,i,e,n)}}}()},9216:function(t){t.exports=function(){"use strict";var t="week",e="year";return function(n,r,i){var o=r.prototype;o.week=function(n){if(void 0===n&&(n=null),null!==n)return this.add(7*(n-this.week()),"day");var r=this.$locale().yearStart||1;if(11===this.month()&&this.date()>25){var o=i(this).startOf(e).add(1,e).date(r),a=i(this).endOf(t);if(o.isBefore(a))return 1}var s=i(this).startOf(e).date(r).startOf(t).subtract(1,"millisecond"),l=this.diff(s,t,!0);return l<0?i(this).startOf("week").week():Math.ceil(l)},o.weeks=function(t){return void 0===t&&(t=null),this.week(t)}}}()},4834:function(t){t.exports=function(){"use strict";return function(t,e){e.prototype.weekYear=function(){var t=this.month(),e=this.week(),n=this.year();return 1===e&&11===t?n+1:0===t&&e>=52?n-1:n}}}()},4334:function(t){t.exports=function(){"use strict";return function(t,e){e.prototype.weekday=function(t){var e=this.$locale().weekStart||0,n=this.$W,r=(n<e?n+7:n)-e;return this.$utils().u(t)?r:this.subtract(r,"day").add(t,"day")}}}()},9396:function(t,e,n){"use strict";var r=n(4892),i="function"===typeof Symbol&&"symbol"===typeof Symbol("foo"),o=Object.prototype.toString,a=Array.prototype.concat,s=Object.defineProperty,l=n(4510)(),c=s&&l,u=function(t,e,n,r){if(e in t)if(!0===r){if(t[e]===n)return}else if("function"!==typeof(i=r)||"[object Function]"!==o.call(i)||!r())return;var i;c?s(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n},h=function(t,e){var n=arguments.length>2?arguments[2]:{},o=r(e);i&&(o=a.call(o,Object.getOwnPropertySymbols(e)));for(var s=0;s<o.length;s+=1)u(t,o[s],e[o[s]],n[o[s]])};h.supportsDescriptors=!!c,t.exports=h},7861:function(t){function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var a=this.clusters.length;this.clusters.push([]),this._addToCluster(i,a),this._expandCluster(a,o)}}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++){this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n)}return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)},2601:function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],"undefined"!==typeof t&&(this.dataset=t),"undefined"!==typeof e&&(this.k=e),"undefined"!==typeof n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var a=new Array(u),s=0,l=0;l<u;l++)a[l]=0;for(var c=0;c<n;c++){var u=this.dataset[c].length;if(o===this.assignments[c]){for(l=0;l<u;l++)a[l]+=this.dataset[c][l];s++}}if(s>0){for(l=0;l<u;l++)a[l]/=s;this.centroids[o]=a}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)"undefined"===typeof e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,a=e.length,s=0;s<a;s++)(r=n(t,e[s]))<i&&(i=r,o=s);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)},3163:function(t,e,n){if(t.exports)var r=n(5047);function i(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}i.prototype.run=function(t,e,n,i){this._init(t,e,n,i);for(var o=0,a=this.dataset.length;o<a;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var s=this.clusters.length-1;this._orderedList.push(o);var l=new r(null,null,"asc"),c=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,c,l),this._expandCluster(s,l))}return this.clusters},i.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e],i=this._reachability[r];t.push([r,i])}return t},i.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},i.prototype._updateQueue=function(t,e,n){var r=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===r._processed[e]){var i=r.distance(r.dataset[t],r.dataset[e]),o=Math.max(r._coreDistance,i);void 0===r._reachability[e]?(r._reachability[e]=o,n.insert(e,o)):o<r._reachability[e]&&(r._reachability[e]=o,n.remove(e),n.insert(e,o))}}))},i.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var a=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,a,e),this._expandCluster(t,e))}}},i.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++){if(this._regionQuery(t,n).length>=this.minPts)return n}},i.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},i.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=i)},5047:function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?e>i&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;){if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)},5107:function(t,e,n){t.exports&&(t.exports={DBSCAN:n(7861),KMEANS:n(2601),OPTICS:n(3163),PriorityQueue:n(5047)})},9761:function(t,e,n){"use strict";n.d(e,{qY:function(){return d}});var r=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},i=function(t,e,n){this.name=t,this.version=e,this.os=n,this.type="browser"},o=function(t){this.version=t,this.type="node",this.name="node",this.os=process.platform},a=function(t,e,n,r){this.name=t,this.version=e,this.os=n,this.bot=r,this.type="bot-device"},s=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},l=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},c=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,u=3,h=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],p=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function d(t){return t?g(t):"undefined"===typeof document&&"undefined"!==typeof navigator&&"ReactNative"===navigator.product?new l:"undefined"!==typeof navigator?g(navigator.userAgent):"undefined"!==typeof process&&process.version?new o(process.version.slice(1)):null}function f(t){return""!==t&&h.reduce((function(e,n){var r=n[0],i=n[1];if(e)return e;var o=i.exec(t);return!!o&&[r,o]}),!1)}function g(t){var e=f(t);if(!e)return null;var n=e[0],o=e[1];if("searchbot"===n)return new s;var l=o[1]&&o[1].split(".").join("_").split("_").slice(0,3);l?l.length<u&&(l=r(r([],l,!0),function(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}(u-l.length),!0)):l=[];var h=l.join("."),d=function(t){for(var e=0,n=p.length;e<n;e++){var r=p[e],i=r[0];if(r[1].exec(t))return i}return null}(t),g=c.exec(t);return g&&g[1]?new a(n,h,d,g[1]):new i(n,h,d)}},7089:function(t){"use strict";function e(t,e,r){r=r||2;var o,a,s,l,h,p,f,g=e&&e.length,m=g?e[0]*r:t.length,y=n(t,0,m,r,!0),v=[];if(!y||y.next===y.prev)return v;if(g&&(y=function(t,e,r,i){var o,a,s,l=[];for(o=0,a=e.length;o<a;o++)(s=n(t,e[o]*i,o<a-1?e[o+1]*i:t.length,i,!1))===s.next&&(s.steiner=!0),l.push(d(s));for(l.sort(c),o=0;o<l.length;o++)r=u(l[o],r);return r}(t,e,y,r)),t.length>80*r){o=s=t[0],a=l=t[1];for(var x=r;x<m;x+=r)(h=t[x])<o&&(o=h),(p=t[x+1])<a&&(a=p),h>s&&(s=h),p>l&&(l=p);f=0!==(f=Math.max(s-o,l-a))?32767/f:0}return i(y,v,r,o,a,f,0),v}function n(t,e,n,r,i){var o,a;if(i===k(t,e,n,r)>0)for(o=e;o<n;o+=r)a=S(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=S(o,t[o],t[o+1],a);return a&&y(a,a.next)&&(C(a),a=a.next),a}function r(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!y(r,r.next)&&0!==m(r.prev,r,r.next))r=r.next;else{if(C(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function i(t,e,n,c,u,h,d){if(t){!d&&h&&function(t,e,n,r){var i=t;do{0===i.z&&(i.z=p(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,l,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<c&&(s++,r=r.nextZ);e++);for(l=c;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(t,c,u,h);for(var f,g,m=t;t.prev!==t.next;)if(f=t.prev,g=t.next,h?a(t,c,u,h):o(t))e.push(f.i/n|0),e.push(t.i/n|0),e.push(g.i/n|0),C(t),t=g.next,m=g.next;else if((t=g)===m){d?1===d?i(t=s(r(t),e,n),e,n,c,u,h,2):2===d&&l(t,e,n,c,u,h):i(r(t),e,n,c,u,h,1);break}}}function o(t){var e=t.prev,n=t,r=t.next;if(m(e,n,r)>=0)return!1;for(var i=e.x,o=n.x,a=r.x,s=e.y,l=n.y,c=r.y,u=i<o?i<a?i:a:o<a?o:a,h=s<l?s<c?s:c:l<c?l:c,p=i>o?i>a?i:a:o>a?o:a,d=s>l?s>c?s:c:l>c?l:c,g=r.next;g!==e;){if(g.x>=u&&g.x<=p&&g.y>=h&&g.y<=d&&f(i,s,o,l,a,c,g.x,g.y)&&m(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function a(t,e,n,r){var i=t.prev,o=t,a=t.next;if(m(i,o,a)>=0)return!1;for(var s=i.x,l=o.x,c=a.x,u=i.y,h=o.y,d=a.y,g=s<l?s<c?s:c:l<c?l:c,y=u<h?u<d?u:d:h<d?h:d,v=s>l?s>c?s:c:l>c?l:c,x=u>h?u>d?u:d:h>d?h:d,_=p(g,y,e,n,r),b=p(v,x,e,n,r),w=t.prevZ,S=t.nextZ;w&&w.z>=_&&S&&S.z<=b;){if(w.x>=g&&w.x<=v&&w.y>=y&&w.y<=x&&w!==i&&w!==a&&f(s,u,l,h,c,d,w.x,w.y)&&m(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,S.x>=g&&S.x<=v&&S.y>=y&&S.y<=x&&S!==i&&S!==a&&f(s,u,l,h,c,d,S.x,S.y)&&m(S.prev,S,S.next)>=0)return!1;S=S.nextZ}for(;w&&w.z>=_;){if(w.x>=g&&w.x<=v&&w.y>=y&&w.y<=x&&w!==i&&w!==a&&f(s,u,l,h,c,d,w.x,w.y)&&m(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;S&&S.z<=b;){if(S.x>=g&&S.x<=v&&S.y>=y&&S.y<=x&&S!==i&&S!==a&&f(s,u,l,h,c,d,S.x,S.y)&&m(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function s(t,e,n){var i=t;do{var o=i.prev,a=i.next.next;!y(o,a)&&v(o,i,i.next,a)&&b(o,a)&&b(a,o)&&(e.push(o.i/n|0),e.push(i.i/n|0),e.push(a.i/n|0),C(i),C(i.next),i=t=a),i=i.next}while(i!==t);return r(i)}function l(t,e,n,o,a,s){var l=t;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&g(l,c)){var u=w(l,c);return l=r(l,l.next),u=r(u,u.next),i(l,e,n,o,a,s,0),void i(u,e,n,o,a,s,0)}c=c.next}l=l.next}while(l!==t)}function c(t,e){return t.x-e.x}function u(t,e){var n=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a&&(a=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==e);if(!n)return null;var l,c=n,u=n.x,p=n.y,d=1/0;r=n;do{i>=r.x&&r.x>=u&&i!==r.x&&f(o<p?i:a,o,u,p,o<p?a:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),b(r,t)&&(l<d||l===d&&(r.x>n.x||r.x===n.x&&h(n,r)))&&(n=r,d=l)),r=r.next}while(r!==c);return n}(t,e);if(!n)return e;var i=w(n,t);return r(i,i.next),r(n,n.next)}function h(t,e){return m(t.prev,t,e.prev)<0&&m(e.next,t,t.next)<0}function p(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function d(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function f(t,e,n,r,i,o,a,s){return(i-a)*(e-s)>=(t-a)*(o-s)&&(t-a)*(r-s)>=(n-a)*(e-s)&&(n-a)*(o-s)>=(i-a)*(r-s)}function g(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&v(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(b(t,e)&&b(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(m(t.prev,t,e.prev)||m(t,e.prev,e))||y(t,e)&&m(t.prev,t,t.next)>0&&m(e.prev,e,e.next)>0)}function m(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function y(t,e){return t.x===e.x&&t.y===e.y}function v(t,e,n,r){var i=_(m(t,e,n)),o=_(m(t,e,r)),a=_(m(n,r,t)),s=_(m(n,r,e));return i!==o&&a!==s||(!(0!==i||!x(t,n,e))||(!(0!==o||!x(t,r,e))||(!(0!==a||!x(n,t,r))||!(0!==s||!x(n,e,r)))))}function x(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function _(t){return t>0?1:t<0?-1:0}function b(t,e){return m(t.prev,t,t.next)<0?m(t,e,t.next)>=0&&m(t,t.prev,e)>=0:m(t,e,t.prev)<0||m(t,t.next,e)<0}function w(t,e){var n=new E(t.i,t.x,t.y),r=new E(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function S(t,e,n,r){var i=new E(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function C(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function E(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function k(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}t.exports=e,t.exports.default=e,e.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(k(t,0,o,n));if(i)for(var s=0,l=e.length;s<l;s++){var c=e[s]*n,u=s<l-1?e[s+1]*n:t.length;a-=Math.abs(k(t,c,u,n))}var h=0;for(s=0;s<r.length;s+=3){var p=r[s]*n,d=r[s+1]*n,f=r[s+2]*n;h+=Math.abs((t[p]-t[f])*(t[d+1]-t[p+1])-(t[p]-t[d])*(t[f+1]-t[p+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},e.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},9698:function(t,e){!function(t){"use strict";function e(t,e,n,r){var i=(r=r||{}).maxIterations||100,o=r.tolerance||1e-10,a=t(e),s=t(n),l=n-e;if(a*s>0)throw"Initial bisect points must have opposite signs";if(0===a)return e;if(0===s)return n;for(var c=0;c<i;++c){var u=e+(l/=2),h=t(u);if(h*a>=0&&(e=u),Math.abs(l)<o||0===h)return u}return e+l}function n(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=0;return e}function r(t,e){return n(t).map((function(){return n(e)}))}function i(t,e){for(var n=0,r=0;r<t.length;++r)n+=t[r]*e[r];return n}function o(t){return Math.sqrt(i(t,t))}function a(t,e,n){for(var r=0;r<e.length;++r)t[r]=e[r]*n}function s(t,e,n,r,i){for(var o=0;o<t.length;++o)t[o]=e*n[o]+r*i[o]}function l(t,e,n){var r,i=(n=n||{}).maxIterations||200*e.length,o=n.nonZeroDelta||1.05,a=n.zeroDelta||.001,l=n.minErrorDelta||1e-6,c=n.minErrorDelta||1e-5,u=void 0!==n.rho?n.rho:1,h=void 0!==n.chi?n.chi:2,p=void 0!==n.psi?n.psi:-.5,d=void 0!==n.sigma?n.sigma:.5,f=e.length,g=new Array(f+1);g[0]=e,g[0].fx=t(e),g[0].id=0;for(var m=0;m<f;++m){var y=e.slice();y[m]=y[m]?y[m]*o:a,g[m+1]=y,g[m+1].fx=t(y),g[m+1].id=m+1}function v(t){for(var e=0;e<t.length;e++)g[f][e]=t[e];g[f].fx=t.fx}for(var x=function(t,e){return t.fx-e.fx},_=e.slice(),b=e.slice(),w=e.slice(),S=e.slice(),C=0;C<i;++C){if(g.sort(x),n.history){var E=g.map((function(t){var e=t.slice();return e.fx=t.fx,e.id=t.id,e}));E.sort((function(t,e){return t.id-e.id})),n.history.push({x:g[0].slice(),fx:g[0].fx,simplex:E})}for(r=0,m=0;m<f;++m)r=Math.max(r,Math.abs(g[0][m]-g[1][m]));if(Math.abs(g[0].fx-g[f].fx)<l&&r<c)break;for(m=0;m<f;++m){_[m]=0;for(var k=0;k<f;++k)_[m]+=g[k][m];_[m]/=f}var M=g[f];if(s(b,1+u,_,-u,M),b.fx=t(b),b.fx<g[0].fx)s(S,1+h,_,-h,M),S.fx=t(S),S.fx<b.fx?v(S):v(b);else if(b.fx>=g[f-1].fx){var T=!1;if(b.fx>M.fx?(s(w,1+p,_,-p,M),w.fx=t(w),w.fx<M.fx?v(w):T=!0):(s(w,1-p*u,_,p*u,M),w.fx=t(w),w.fx<b.fx?v(w):T=!0),T){if(d>=1)break;for(m=1;m<g.length;++m)s(g[m],1-d,g[0],d,g[m]),g[m].fx=t(g[m])}}else v(b)}return g.sort(x),{fx:g[0].fx,x:g[0]}}function c(t,e,n,r,o,a,l){var c=n.fx,u=i(n.fxprime,e),h=c,p=c,d=u,f=0;function g(p,f,g){for(var m=0;m<16;++m)if(o=(p+f)/2,s(r.x,1,n.x,o,e),h=r.fx=t(r.x,r.fxprime),d=i(r.fxprime,e),h>c+a*o*u||h>=g)f=o;else{if(Math.abs(d)<=-l*u)return o;d*(f-p)>=0&&(f=p),p=o,g=h}return 0}o=o||1,a=a||1e-6,l=l||.1;for(var m=0;m<10;++m){if(s(r.x,1,n.x,o,e),h=r.fx=t(r.x,r.fxprime),d=i(r.fxprime,e),h>c+a*o*u||m&&h>=p)return g(f,o,p);if(Math.abs(d)<=-l*u)return o;if(d>=0)return g(o,f,h);p=h,f=o,o*=2}return o}function u(t,e,n){var r,l,u,h={x:e.slice(),fx:0,fxprime:e.slice()},p={x:e.slice(),fx:0,fxprime:e.slice()},d=e.slice(),f=1;u=(n=n||{}).maxIterations||20*e.length,h.fx=t(h.x,h.fxprime),a(r=h.fxprime.slice(),h.fxprime,-1);for(var g=0;g<u;++g){if(f=c(t,r,h,p,f),n.history&&n.history.push({x:h.x.slice(),fx:h.fx,fxprime:h.fxprime.slice(),alpha:f}),f){s(d,1,p.fxprime,-1,h.fxprime);var m=i(h.fxprime,h.fxprime);s(r,Math.max(0,i(d,p.fxprime)/m),r,-1,p.fxprime),l=h,h=p,p=l}else a(r,h.fxprime,-1);if(o(h.fxprime)<=1e-5)break}return n.history&&n.history.push({x:h.x.slice(),fx:h.fx,fxprime:h.fxprime.slice(),alpha:f}),h}function h(t,e,n){for(var r=(n=n||{}).maxIterations||100*e.length,i=n.learnRate||.001,a={x:e.slice(),fx:0,fxprime:e.slice()},l=0;l<r&&(a.fx=t(a.x,a.fxprime),n.history&&n.history.push({x:a.x.slice(),fx:a.fx,fxprime:a.fxprime.slice()}),s(a.x,1,a.x,-i,a.fxprime),!(o(a.fxprime)<=1e-5));++l);return a}function p(t,e,n){n=n||{};var r,i={x:e.slice(),fx:0,fxprime:e.slice()},s={x:e.slice(),fx:0,fxprime:e.slice()},l=n.maxIterations||100*e.length,u=n.learnRate||1,h=e.slice(),p=n.c1||.001,d=n.c2||.1,f=[];if(n.history){var g=t;t=function(t,e){return f.push(t.slice()),g(t,e)}}i.fx=t(i.x,i.fxprime);for(var m=0;m<l&&(a(h,i.fxprime,-1),u=c(t,h,i,s,u,p,d),n.history&&(n.history.push({x:i.x.slice(),fx:i.fx,fxprime:i.fxprime.slice(),functionCalls:f,learnRate:u,alpha:u}),f=[]),r=i,i=s,s=r,!(0===u||o(i.fxprime)<1e-5));++m);return i}t.bisect=e,t.nelderMead=l,t.conjugateGradient=u,t.gradientDescent=h,t.gradientDescentLineSearch=p,t.zeros=n,t.zerosM=r,t.norm2=o,t.weightedSum=s,t.scale=a}(e)},222:function(t){"use strict";var e=Array.prototype.slice,n=Object.prototype.toString;t.exports=function(t){var r=this;if("function"!==typeof r||"[object Function]"!==n.call(r))throw new TypeError("Function.prototype.bind called on incompatible "+r);for(var i,o=e.call(arguments,1),a=Math.max(0,r.length-o.length),s=[],l=0;l<a;l++)s.push("$"+l);if(i=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof i){var n=r.apply(this,o.concat(e.call(arguments)));return Object(n)===n?n:this}return r.apply(t,o.concat(e.call(arguments)))})),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i}},3350:function(t,e,n){"use strict";var r=n(222);t.exports=Function.prototype.bind||r},4583:function(t){"use strict";var e=function(){return"string"===typeof function(){}.name},n=Object.getOwnPropertyDescriptor;if(n)try{n([],"length")}catch(i){n=null}e.functionsHaveConfigurableNames=function(){if(!e()||!n)return!1;var t=n((function(){}),"name");return!!t&&!!t.configurable};var r=Function.prototype.bind;e.boundFunctionsHaveNames=function(){return e()&&"function"===typeof r&&""!==function(){}.bind().name},t.exports=e},4042:function(t,e,n){var r=n(9951),i=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:s};function o(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function a(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function s(t,e){return r(t,e,{strict:!0})}i.prototype.compare=function(t,e){if(t.type!==e.type||!a(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=o(t),i=o(e);return r.every((function(t){return this.some((function(e){return n.compare(t,e)}))}),i)}}return!1},i.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},i.prototype.compareLine=function(t,e,n,r){if(!a(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var s=this.compareCoord(i[n],o[n]);return this.direction||s?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},i.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},i.prototype.comparePath=function(t,e){var n=this;return t.every((function(t,e){return n.compareCoord(t,this[e])}),e)},i.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every((function(t){return this.some((function(e){return i.compareLine(t,e,1,!0)}))}),r)}return!1},i.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},i.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},i.prototype.removePseudo=function(t){return t},t.exports=i},9951:function(t,e,n){var r=n(4892),i=n(5450),o=n(3454),a=n(1146),s=n(3535),l=n(2833),c=Date.prototype.getTime;function u(t,e,n){var d=n||{};return!!(d.strict?o(t,e):t===e)||(!t||!e||"object"!==typeof t&&"object"!==typeof e?d.strict?o(t,e):t==e:function(t,e,n){var o,d;if(typeof t!==typeof e)return!1;if(h(t)||h(e))return!1;if(t.prototype!==e.prototype)return!1;if(i(t)!==i(e))return!1;var f=a(t),g=a(e);if(f!==g)return!1;if(f||g)return t.source===e.source&&s(t)===s(e);if(l(t)&&l(e))return c.call(t)===c.call(e);var m=p(t),y=p(e);if(m!==y)return!1;if(m||y){if(t.length!==e.length)return!1;for(o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}if(typeof t!==typeof e)return!1;try{var v=r(t),x=r(e)}catch(_){return!1}if(v.length!==x.length)return!1;for(v.sort(),x.sort(),o=v.length-1;o>=0;o--)if(v[o]!=x[o])return!1;for(o=v.length-1;o>=0;o--)if(!u(t[d=v[o]],e[d],n))return!1;return!0}(t,e,d))}function h(t){return null===t||void 0===t}function p(t){return!(!t||"object"!==typeof t||"number"!==typeof t.length)&&("function"===typeof t.copy&&"function"===typeof t.slice&&!(t.length>0&&"number"!==typeof t[0]))}t.exports=u},9234:function(t,e,n){var r=n(2968),i=n(5744),o=n(9025),a=n(9607).default,s=o.featureEach,l=(o.coordEach,i.polygon,i.featureCollection);function c(t){var e=new r(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:a(t),r.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:a(t),e.push(t)})):s(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:a(t),e.push(t)})),r.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:a(t),r.prototype.remove.call(this,t,e)},e.clear=function(){return r.prototype.clear.call(this)},e.search=function(t){var e=r.prototype.search.call(this,this.toBBox(t));return l(e)},e.collides=function(t){return r.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=r.prototype.all.call(this);return l(t)},e.toJSON=function(){return r.prototype.toJSON.call(this)},e.fromJSON=function(t){return r.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=a(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=a(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}t.exports=c,t.exports.default=c},5744:function(t,e){"use strict";function n(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function r(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!d(t[0])||!d(t[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:t},e,r)}function i(t,e,r){void 0===r&&(r={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,r)}function o(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,r)}function a(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function s(t,e,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:t},e,r)}function l(t,e,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:t},e,r)}function c(t,e,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:t},e,r)}function u(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function h(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function p(t){return 180*(t%(2*Math.PI))/Math.PI}function d(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return r(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return i(e).geometry;case"MultiPoint":return l(e).geometry;case"MultiLineString":return s(e).geometry;case"MultiPolygon":return c(e).geometry;default:throw new Error(t+" is invalid")}},e.point=r,e.points=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return r(t,e)})),n)},e.polygon=i,e.polygons=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return i(t,e)})),n)},e.lineString=o,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return o(t,e)})),n)},e.featureCollection=a,e.multiLineString=s,e.multiPoint=l,e.multiPolygon=c,e.geometryCollection=function(t,e,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:t},e,r)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=u,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return p(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=p,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return u(h(t,e),n)},e.convertArea=function(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[n];if(!i)throw new Error("invalid original units");var o=e.areaFactors[r];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=d,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!d(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}},9025:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5744);function i(t,e,n){if(null!==t)for(var r,o,a,s,l,c,u,h,p=0,d=0,f=t.type,g="FeatureCollection"===f,m="Feature"===f,y=g?t.features.length:1,v=0;v<y;v++){l=(h=!!(u=g?t.features[v].geometry:m?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var x=0;x<l;x++){var _=0,b=0;if(null!==(s=h?u.geometries[x]:u)){c=s.coordinates;var w=s.type;switch(p=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(c,d,v,_,b))return!1;d++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<c.length;r++){if(!1===e(c[r],d,v,_,b))return!1;d++,"MultiPoint"===w&&_++}"LineString"===w&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<c.length;r++){for(o=0;o<c[r].length-p;o++){if(!1===e(c[r][o],d,v,_,b))return!1;d++}"MultiLineString"===w&&_++,"Polygon"===w&&b++}"Polygon"===w&&_++;break;case"MultiPolygon":for(r=0;r<c.length;r++){for(b=0,o=0;o<c[r].length;o++){for(a=0;a<c[r][o].length-p;a++){if(!1===e(c[r][o][a],d,v,_,b))return!1;d++}b++}_++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===i(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function a(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function s(t,e){var n,r,i,o,a,s,l,c,u,h,p=0,d="FeatureCollection"===t.type,f="Feature"===t.type,g=d?t.features.length:1;for(n=0;n<g;n++){for(s=d?t.features[n].geometry:f?t.geometry:t,c=d?t.features[n].properties:f?t.properties:{},u=d?t.features[n].bbox:f?t.bbox:void 0,h=d?t.features[n].id:f?t.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=l?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,c,u,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],p,c,u,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,c,u,h))return!1;p++}}function l(t,e){s(t,(function(t,n,i,o,a){var s,l=null===t?null:t.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==e(r.feature(t,i,{bbox:o,id:a}),n,0)&&void 0}switch(l){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var c=0;c<t.coordinates.length;c++){var u={type:s,coordinates:t.coordinates[c]};if(!1===e(r.feature(u,i),n,c))return!1}}))}function c(t,e){l(t,(function(t,n,o){var a=0;if(t.geometry){var s=t.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var l,c=0,u=0,h=0;return!1!==i(t,(function(i,s,p,d,f){if(void 0===l||n>c||d>u||f>h)return l=i,c=n,u=d,h=f,void(a=0);var g=r.lineString([l,i],t.properties);if(!1===e(g,n,o,f,a))return!1;a++,l=i}))&&void 0}}}))}function u(t,e){if(!t)throw new Error("geojson is required");l(t,(function(t,n,i){if(null!==t.geometry){var o=t.geometry.type,a=t.geometry.coordinates;switch(o){case"LineString":if(!1===e(t,n,i,0,0))return!1;break;case"Polygon":for(var s=0;s<a.length;s++)if(!1===e(r.lineString(a[s],t.properties),n,i,s))return!1}}}))}e.coordAll=function(t){var e=[];return i(t,(function(t){e.push(t)})),e},e.coordEach=i,e.coordReduce=function(t,e,n,r){var o=n;return i(t,(function(t,r,i,a,s){o=0===r&&void 0===n?t:e(o,t,r,i,a,s)}),r),o},e.featureEach=a,e.featureReduce=function(t,e,n){var r=n;return a(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},e.findPoint=function(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.coordIndex||0,l=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),l=l||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":l=l||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var c=n.coordinates;switch(n.type){case"Point":return r.point(c,l,e);case"MultiPoint":return o<0&&(o=c.length+o),r.point(c[o],l,e);case"LineString":return s<0&&(s=c.length+s),r.point(c[s],l,e);case"Polygon":return a<0&&(a=c.length+a),s<0&&(s=c[a].length+s),r.point(c[a][s],l,e);case"MultiLineString":return o<0&&(o=c.length+o),s<0&&(s=c[o].length+s),r.point(c[o][s],l,e);case"MultiPolygon":return o<0&&(o=c.length+o),a<0&&(a=c[o].length+a),s<0&&(s=c[o][a].length-s),r.point(c[o][a][s],l,e)}throw new Error("geojson is invalid")},e.findSegment=function(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.segmentIndex||0,l=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),l=l||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":l=l||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var c=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=c.length+s-1),r.lineString([c[s],c[s+1]],l,e);case"Polygon":return a<0&&(a=c.length+a),s<0&&(s=c[a].length+s-1),r.lineString([c[a][s],c[a][s+1]],l,e);case"MultiLineString":return o<0&&(o=c.length+o),s<0&&(s=c[o].length+s-1),r.lineString([c[o][s],c[o][s+1]],l,e);case"MultiPolygon":return o<0&&(o=c.length+o),a<0&&(a=c[o].length+a),s<0&&(s=c[o][a].length-s-1),r.lineString([c[o][a][s],c[o][a][s+1]],l,e)}throw new Error("geojson is invalid")},e.flattenEach=l,e.flattenReduce=function(t,e,n){var r=n;return l(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r},e.geomEach=s,e.geomReduce=function(t,e,n){var r=n;return s(t,(function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)})),r},e.lineEach=u,e.lineReduce=function(t,e,n){var r=n;return u(t,(function(t,i,o,a){r=0===i&&void 0===n?t:e(r,t,i,o,a)})),r},e.propEach=o,e.propReduce=function(t,e,n){var r=n;return o(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},e.segmentEach=c,e.segmentReduce=function(t,e,n){var r=n,i=!1;return c(t,(function(t,o,a,s,l){r=!1===i&&void 0===n?t:e(r,t,o,a,s,l),i=!0})),r}},2968:function(t){t.exports=function(){"use strict";function t(t,r,i,o,a){!function t(n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,l=r-i+1,c=Math.log(s),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(s-u)/s)*(l-s/2<0?-1:1);t(n,r,Math.max(i,Math.floor(r-l*u/s+h)),Math.min(o,Math.floor(r+(s-l)*u/s+h)),a)}var p=n[r],d=i,f=o;for(e(n,i,r),a(n[o],p)>0&&e(n,i,o);d<f;){for(e(n,d,f),d++,f--;a(n[d],p)<0;)d++;for(;a(n[f],p)>0;)f--}0===a(n[i],p)?e(n,i,f):e(n,++f,o),f<=r&&(i=f+1),r<=f&&(o=f-1)}}(t,r,i||0,o||t.length-1,a||n)}function e(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function n(t,e){return t<e?-1:t>e?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,r,i){i||(i=f(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<n;o++){var a=t.children[o];s(i,t.leaf?r(a):a)}return i}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function u(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function d(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function f(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,n,r,i,o){for(var a=[n,r];a.length;)if(!((r=a.pop())-(n=a.pop())<=i)){var s=n+Math.ceil((r-n)/i/2)*i;t(e,s,n,r,o),a.push(n,s,s,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var e=this.data,n=[];if(!d(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?r(a):a;d(t,s)&&(e.leaf?n.push(a):p(t,s)?this._all(a,n):i.push(a))}e=i.pop()}return n},r.prototype.collides=function(t){var e=this.data;if(!d(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],o=e.leaf?this.toBBox(i):i;if(d(t,o)){if(e.leaf||p(t,o))return!0;n.push(i)}}e=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=f([]),this},r.prototype.remove=function(t,e){if(!t)return this;for(var n,r,o,a=this.data,s=this.toBBox(t),l=[],c=[];a||l.length;){if(a||(a=l.pop(),r=l[l.length-1],n=c.pop(),o=!0),a.leaf){var u=i(t,a.children,e);if(-1!==u)return a.children.splice(u,1),l.push(a),this._condense(l),this}o||a.leaf||!p(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(l.push(a),c.push(n),n=0,r=a,a=a.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,e){return t.minX-e.minX},r.prototype.compareMinY=function(t,e){return t.minY-e.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},r.prototype._build=function(t,e,n,r){var i,a=n-e+1,s=this._maxEntries;if(a<=s)return o(i=f(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,r-1))),(i=f([])).leaf=!1,i.height=r;var l=Math.ceil(a/s),c=l*Math.ceil(Math.sqrt(s));g(t,e,n,c,this.compareMinX);for(var u=e;u<=n;u+=c){var h=Math.min(u+c-1,n);g(t,u,h,l,this.compareMinY);for(var p=u;p<=h;p+=l){var d=Math.min(p+l-1,h);i.children.push(this._build(t,p,d,r-1))}}return o(i,this.toBBox),i},r.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var l=e.children[s],c=u(l),h=(p=t,d=l,(Math.max(d.maxX,p.maxX)-Math.min(d.minX,p.minX))*(Math.max(d.maxY,p.maxY)-Math.min(d.minY,p.minY))-c);h<o?(o=h,i=c<i?c:i,a=l):h===o&&c<i&&(i=c,a=l)}e=a||e.children[0]}var p,d;return e},r.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),s(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},r.prototype._split=function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var a=this._chooseSplitIndex(n,i,r),s=f(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,o(n,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},r.prototype._splitRoot=function(t,e){this.data=f([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,e,n){for(var r,i,o,s,l,c,h,p=1/0,d=1/0,f=e;f<=n-e;f++){var g=a(t,0,f,this.toBBox),m=a(t,f,n,this.toBBox),y=(i=g,o=m,s=void 0,l=void 0,c=void 0,h=void 0,s=Math.max(i.minX,o.minX),l=Math.max(i.minY,o.minY),c=Math.min(i.maxX,o.maxX),h=Math.min(i.maxY,o.maxY),Math.max(0,c-s)*Math.max(0,h-l)),v=u(g)+u(m);y<p?(p=y,r=f,d=v<d?v:d):y===p&&v<d&&(d=v,r=f)}return r||n-e},r.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:l,i=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,o=a(t,0,e,i),l=a(t,n-e,n,i),c=h(o)+h(l),u=e;u<n-e;u++){var p=t.children[u];s(o,t.leaf?i(p):p),c+=h(o)}for(var d=n-e-1;d>=e;d--){var f=t.children[d];s(l,t.leaf?i(f):f),c+=h(l)}return c},r.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;r>=0;r--)s(e[r],t)},r.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},r}()},2506:function(t,e,n){"use strict";var r,i=SyntaxError,o=Function,a=TypeError,s=function(t){try{return o('"use strict"; return ('+t+").constructor;")()}catch(e){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(I){l=null}var c=function(){throw new a},u=l?function(){try{return c}catch(t){try{return l(arguments,"callee").get}catch(e){return c}}}():c,h=n(697)(),p=Object.getPrototypeOf||function(t){return t.__proto__},d={},f="undefined"===typeof Uint8Array?r:p(Uint8Array),g={"%AggregateError%":"undefined"===typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":h?p([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":"undefined"===typeof Atomics?r:Atomics,"%BigInt%":"undefined"===typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"===typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"===typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":d,"%Int8Array%":"undefined"===typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h?p(p([][Symbol.iterator]())):r,"%JSON%":"object"===typeof JSON?JSON:r,"%Map%":"undefined"===typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&h?p((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?r:Promise,"%Proxy%":"undefined"===typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&h?p((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h?p(""[Symbol.iterator]()):r,"%Symbol%":h?Symbol:r,"%SyntaxError%":i,"%ThrowTypeError%":u,"%TypedArray%":f,"%TypeError%":a,"%Uint8Array%":"undefined"===typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?r:WeakSet};try{null.error}catch(I){var m=p(p(I));g["%Error.prototype%"]=m}var y=function t(e){var n;if("%AsyncFunction%"===e)n=s("async function () {}");else if("%GeneratorFunction%"===e)n=s("function* () {}");else if("%AsyncGeneratorFunction%"===e)n=s("async function* () {}");else if("%AsyncGenerator%"===e){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===e){var i=t("%AsyncGenerator%");i&&(n=p(i.prototype))}return g[e]=n,n},v={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},x=n(3350),_=n(8316),b=x.call(Function.call,Array.prototype.concat),w=x.call(Function.apply,Array.prototype.splice),S=x.call(Function.call,String.prototype.replace),C=x.call(Function.call,String.prototype.slice),E=x.call(Function.call,RegExp.prototype.exec),k=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,M=/\\(\\)?/g,T=function(t,e){var n,r=t;if(_(v,r)&&(r="%"+(n=v[r])[0]+"%"),_(g,r)){var o=g[r];if(o===d&&(o=y(r)),"undefined"===typeof o&&!e)throw new a("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:o}}throw new i("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!==typeof t||0===t.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof e)throw new a('"allowMissing" argument must be a boolean');if(null===E(/^%?[^%]*%?$/,t))throw new i("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(t){var e=C(t,0,1),n=C(t,-1);if("%"===e&&"%"!==n)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==e)throw new i("invalid intrinsic syntax, expected opening `%`");var r=[];return S(t,k,(function(t,e,n,i){r[r.length]=n?S(i,M,"$1"):e||t})),r}(t),r=n.length>0?n[0]:"",o=T("%"+r+"%",e),s=o.name,c=o.value,u=!1,h=o.alias;h&&(r=h[0],w(n,b([0,1],h)));for(var p=1,d=!0;p<n.length;p+=1){var f=n[p],m=C(f,0,1),y=C(f,-1);if(('"'===m||"'"===m||"`"===m||'"'===y||"'"===y||"`"===y)&&m!==y)throw new i("property names with quotes must have matching quotes");if("constructor"!==f&&d||(u=!0),_(g,s="%"+(r+="."+f)+"%"))c=g[s];else if(null!=c){if(!(f in c)){if(!e)throw new a("base intrinsic for "+t+" exists, but the property is not available.");return}if(l&&p+1>=n.length){var v=l(c,f);c=(d=!!v)&&"get"in v&&!("originalValue"in v.get)?v.get:c[f]}else d=_(c,f),c=c[f];d&&!u&&(g[s]=c)}}return c}},907:function(t,e,n){"use strict";n.d(e,{WT:function(){return r}});var r="undefined"!==typeof Float32Array?Float32Array:Array;Math.random;Math.PI;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)})},5742:function(t,e,n){"use strict";function r(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=u*a-s*c,p=-u*o+s*l,d=c*o-a*l,f=n*h+r*p+i*d;return f?(f=1/f,t[0]=h*f,t[1]=(-u*r+i*c)*f,t[2]=(s*r-i*a)*f,t[3]=p*f,t[4]=(u*n-i*l)*f,t[5]=(-s*n+i*o)*f,t[6]=d*f,t[7]=(-c*n+r*l)*f,t[8]=(a*n-r*o)*f,t):null}function i(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],p=n[0],d=n[1],f=n[2],g=n[3],m=n[4],y=n[5],v=n[6],x=n[7],_=n[8];return t[0]=p*r+d*a+f*c,t[1]=p*i+d*s+f*u,t[2]=p*o+d*l+f*h,t[3]=g*r+m*a+y*c,t[4]=g*i+m*s+y*u,t[5]=g*o+m*l+y*h,t[6]=v*r+x*a+_*c,t[7]=v*i+x*s+_*u,t[8]=v*o+x*l+_*h,t}function o(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function a(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function s(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}n.d(e,{Jp:function(){return i},U_:function(){return r},Us:function(){return a},vc:function(){return o},xJ:function(){return s}})},9874:function(t,e,n){"use strict";n.d(e,{$X:function(){return o},AK:function(){return p},EU:function(){return f},Fp:function(){return s},Fv:function(){return h},I6:function(){return g},IH:function(){return i},TE:function(){return c},VV:function(){return a},bA:function(){return l},kE:function(){return u},kK:function(){return d},lu:function(){return m}});var r=n(907);function i(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function o(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function a(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function s(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function l(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function c(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function u(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function h(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function p(t,e){return t[0]*e[0]+t[1]*e[1]}function d(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function f(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+o*o),s=a&&(n*i+r*o)/a;return Math.acos(Math.min(Math.max(s,-1),1))}function g(t,e){return t[0]===e[0]&&t[1]===e[1]}var m=o;!function(){var t=function(){var t=new r.WT(2);return r.WT!=Float32Array&&(t[0]=0,t[1]=0),t}()}()},4510:function(t,e,n){"use strict";var r=n(2506)("%Object.defineProperty%",!0),i=function(){if(r)try{return r({},"a",{value:1}),!0}catch(t){return!1}return!1};i.hasArrayLengthDefineBug=function(){if(!i())return null;try{return 1!==r([],"length",{value:1}).length}catch(t){return!0}},t.exports=i},697:function(t,e,n){"use strict";var r="undefined"!==typeof Symbol&&Symbol,i=n(3297);t.exports=function(){return"function"===typeof r&&("function"===typeof Symbol&&("symbol"===typeof r("foo")&&("symbol"===typeof Symbol("bar")&&i())))}},3297:function(t){"use strict";t.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"===typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"===typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var r=Object.getOwnPropertySymbols(t);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},4707:function(t,e,n){"use strict";var r=n(3297);t.exports=function(){return r()&&!!Symbol.toStringTag}},8316:function(t,e,n){"use strict";var r=n(3350);t.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},2110:function(t,e,n){"use strict";var r=n(8309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(t){return r.isMemo(t)?a:s[t.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,f=Object.prototype;t.exports=function t(e,n,r){if("string"!==typeof n){if(f){var i=d(n);i&&i!==f&&t(e,i,r)}var a=u(n);h&&(a=a.concat(h(n)));for(var s=l(e),g=l(n),m=0;m<a.length;++m){var y=a[m];if(!o[y]&&(!r||!r[y])&&(!g||!g[y])&&(!s||!s[y])){var v=p(n,y);try{c(e,y,v)}catch(x){}}}}return e}},746:function(t,e){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,x=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function b(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case u:case h:case o:case s:case a:case d:return t;default:switch(t=t&&t.$$typeof){case c:case p:case m:case g:case l:return t;default:return e}}case i:return e}}}function w(t){return b(t)===h}e.AsyncMode=u,e.ConcurrentMode=h,e.ContextConsumer=c,e.ContextProvider=l,e.Element=r,e.ForwardRef=p,e.Fragment=o,e.Lazy=m,e.Memo=g,e.Portal=i,e.Profiler=s,e.StrictMode=a,e.Suspense=d,e.isAsyncMode=function(t){return w(t)||b(t)===u},e.isConcurrentMode=w,e.isContextConsumer=function(t){return b(t)===c},e.isContextProvider=function(t){return b(t)===l},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return b(t)===p},e.isFragment=function(t){return b(t)===o},e.isLazy=function(t){return b(t)===m},e.isMemo=function(t){return b(t)===g},e.isPortal=function(t){return b(t)===i},e.isProfiler=function(t){return b(t)===s},e.isStrictMode=function(t){return b(t)===a},e.isSuspense=function(t){return b(t)===d},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===o||t===h||t===s||t===a||t===d||t===f||"object"===typeof t&&null!==t&&(t.$$typeof===m||t.$$typeof===g||t.$$typeof===l||t.$$typeof===c||t.$$typeof===p||t.$$typeof===v||t.$$typeof===x||t.$$typeof===_||t.$$typeof===y)},e.typeOf=b},8309:function(t,e,n){"use strict";t.exports=n(746)},5450:function(t,e,n){"use strict";var r=n(4707)(),i=n(4037)("Object.prototype.toString"),o=function(t){return!(r&&t&&"object"===typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===i(t)},a=function(t){return!!o(t)||null!==t&&"object"===typeof t&&"number"===typeof t.length&&t.length>=0&&"[object Array]"!==i(t)&&"[object Function]"===i(t.callee)},s=function(){return o(arguments)}();o.isLegacyArguments=a,t.exports=s?o:a},2833:function(t,e,n){"use strict";var r=Date.prototype.getDay,i=Object.prototype.toString,o=n(4707)();t.exports=function(t){return"object"===typeof t&&null!==t&&(o?function(t){try{return r.call(t),!0}catch(e){return!1}}(t):"[object Date]"===i.call(t))}},1146:function(t,e,n){"use strict";var r,i,o,a,s=n(4037),l=n(4707)();if(l){r=s("Object.prototype.hasOwnProperty"),i=s("RegExp.prototype.exec"),o={};var c=function(){throw o};a={toString:c,valueOf:c},"symbol"===typeof Symbol.toPrimitive&&(a[Symbol.toPrimitive]=c)}var u=s("Object.prototype.toString"),h=Object.getOwnPropertyDescriptor;t.exports=l?function(t){if(!t||"object"!==typeof t)return!1;var e=h(t,"lastIndex");if(!(e&&r(e,"value")))return!1;try{i(t,a)}catch(n){return n===o}}:function(t){return!(!t||"object"!==typeof t&&"function"!==typeof t)&&"[object RegExp]"===u(t)}},763:function(t,e,n){var r;t=n.nmd(t),function(){var i,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",l=16,c=32,u=64,h=128,p=256,d=1/0,f=9007199254740991,g=NaN,m=4294967295,y=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",l],["flip",512],["partial",c],["partialRight",u],["rearg",p]],v="[object Arguments]",x="[object Array]",_="[object Boolean]",b="[object Date]",w="[object Error]",S="[object Function]",C="[object GeneratorFunction]",E="[object Map]",k="[object Number]",M="[object Object]",T="[object Promise]",I="[object RegExp]",P="[object Set]",O="[object String]",A="[object Symbol]",D="[object WeakMap]",R="[object ArrayBuffer]",L="[object DataView]",N="[object Float32Array]",F="[object Float64Array]",z="[object Int8Array]",B="[object Int16Array]",$="[object Int32Array]",j="[object Uint8Array]",U="[object Uint8ClampedArray]",V="[object Uint16Array]",H="[object Uint32Array]",G=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,X=/(__e\(.*?\)|\b__t\)) \+\n'';/g,q=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,Z=RegExp(q.source),K=RegExp(Y.source),J=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,tt=/<%=([\s\S]+?)%>/g,et=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nt=/^\w*$/,rt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,it=/[\\^$.*+?()[\]{}|]/g,ot=RegExp(it.source),at=/^\s+/,st=/\s/,lt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ct=/\{\n\/\* \[wrapped with (.+)\] \*/,ut=/,? & /,ht=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,pt=/[()=,{}\[\]\/\s]/,dt=/\\(\\)?/g,ft=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,gt=/\w*$/,mt=/^[-+]0x[0-9a-f]+$/i,yt=/^0b[01]+$/i,vt=/^\[object .+?Constructor\]$/,xt=/^0o[0-7]+$/i,_t=/^(?:0|[1-9]\d*)$/,bt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,wt=/($^)/,St=/['\n\r\u2028\u2029\\]/g,Ct="\\ud800-\\udfff",Et="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",kt="\\u2700-\\u27bf",Mt="a-z\\xdf-\\xf6\\xf8-\\xff",Tt="A-Z\\xc0-\\xd6\\xd8-\\xde",It="\\ufe0e\\ufe0f",Pt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ot="['\u2019]",At="["+Ct+"]",Dt="["+Pt+"]",Rt="["+Et+"]",Lt="\\d+",Nt="["+kt+"]",Ft="["+Mt+"]",zt="[^"+Ct+Pt+Lt+kt+Mt+Tt+"]",Bt="\\ud83c[\\udffb-\\udfff]",$t="[^"+Ct+"]",jt="(?:\\ud83c[\\udde6-\\uddff]){2}",Ut="[\\ud800-\\udbff][\\udc00-\\udfff]",Vt="["+Tt+"]",Ht="\\u200d",Gt="(?:"+Ft+"|"+zt+")",Wt="(?:"+Vt+"|"+zt+")",Xt="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",qt="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Yt="(?:"+Rt+"|"+Bt+")"+"?",Zt="["+It+"]?",Kt=Zt+Yt+("(?:"+Ht+"(?:"+[$t,jt,Ut].join("|")+")"+Zt+Yt+")*"),Jt="(?:"+[Nt,jt,Ut].join("|")+")"+Kt,Qt="(?:"+[$t+Rt+"?",Rt,jt,Ut,At].join("|")+")",te=RegExp(Ot,"g"),ee=RegExp(Rt,"g"),ne=RegExp(Bt+"(?="+Bt+")|"+Qt+Kt,"g"),re=RegExp([Vt+"?"+Ft+"+"+Xt+"(?="+[Dt,Vt,"$"].join("|")+")",Wt+"+"+qt+"(?="+[Dt,Vt+Gt,"$"].join("|")+")",Vt+"?"+Gt+"+"+Xt,Vt+"+"+qt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Lt,Jt].join("|"),"g"),ie=RegExp("["+Ht+Ct+Et+It+"]"),oe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ae=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],se=-1,le={};le[N]=le[F]=le[z]=le[B]=le[$]=le[j]=le[U]=le[V]=le[H]=!0,le[v]=le[x]=le[R]=le[_]=le[L]=le[b]=le[w]=le[S]=le[E]=le[k]=le[M]=le[I]=le[P]=le[O]=le[D]=!1;var ce={};ce[v]=ce[x]=ce[R]=ce[L]=ce[_]=ce[b]=ce[N]=ce[F]=ce[z]=ce[B]=ce[$]=ce[E]=ce[k]=ce[M]=ce[I]=ce[P]=ce[O]=ce[A]=ce[j]=ce[U]=ce[V]=ce[H]=!0,ce[w]=ce[S]=ce[D]=!1;var ue={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},he=parseFloat,pe=parseInt,de="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,fe="object"==typeof self&&self&&self.Object===Object&&self,ge=de||fe||Function("return this")(),me=e&&!e.nodeType&&e,ye=me&&t&&!t.nodeType&&t,ve=ye&&ye.exports===me,xe=ve&&de.process,_e=function(){try{var t=ye&&ye.require&&ye.require("util").types;return t||xe&&xe.binding&&xe.binding("util")}catch(e){}}(),be=_e&&_e.isArrayBuffer,we=_e&&_e.isDate,Se=_e&&_e.isMap,Ce=_e&&_e.isRegExp,Ee=_e&&_e.isSet,ke=_e&&_e.isTypedArray;function Me(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Te(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function Ie(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Pe(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Oe(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Ae(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function De(t,e){return!!(null==t?0:t.length)&&Ve(t,e,0)>-1}function Re(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Le(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Ne(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Fe(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function ze(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Be(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var $e=Xe("length");function je(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Ue(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Ve(t,e,n){return e===e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Ue(t,Ge,n)}function He(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function Ge(t){return t!==t}function We(t,e){var n=null==t?0:t.length;return n?Ze(t,e)/n:g}function Xe(t){return function(e){return null==e?i:e[t]}}function qe(t){return function(e){return null==t?i:t[e]}}function Ye(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Ze(t,e){for(var n,r=-1,o=t.length;++r<o;){var a=e(t[r]);a!==i&&(n=n===i?a:n+a)}return n}function Ke(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Je(t){return t?t.slice(0,mn(t)+1).replace(at,""):t}function Qe(t){return function(e){return t(e)}}function tn(t,e){return Le(e,(function(e){return t[e]}))}function en(t,e){return t.has(e)}function nn(t,e){for(var n=-1,r=t.length;++n<r&&Ve(e,t[n],0)>-1;);return n}function rn(t,e){for(var n=t.length;n--&&Ve(e,t[n],0)>-1;);return n}var on=qe({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),an=qe({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sn(t){return"\\"+ue[t]}function ln(t){return ie.test(t)}function cn(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function un(t,e){return function(n){return t(e(n))}}function hn(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==s||(t[n]=s,o[i++]=n)}return o}function pn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function dn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function fn(t){return ln(t)?function(t){var e=ne.lastIndex=0;for(;ne.test(t);)++e;return e}(t):$e(t)}function gn(t){return ln(t)?function(t){return t.match(ne)||[]}(t):function(t){return t.split("")}(t)}function mn(t){for(var e=t.length;e--&&st.test(t.charAt(e)););return e}var yn=qe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var vn=function t(e){var n=(e=null==e?ge:vn.defaults(ge.Object(),e,vn.pick(ge,ae))).Array,r=e.Date,st=e.Error,Ct=e.Function,Et=e.Math,kt=e.Object,Mt=e.RegExp,Tt=e.String,It=e.TypeError,Pt=n.prototype,Ot=Ct.prototype,At=kt.prototype,Dt=e["__core-js_shared__"],Rt=Ot.toString,Lt=At.hasOwnProperty,Nt=0,Ft=function(){var t=/[^.]+$/.exec(Dt&&Dt.keys&&Dt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),zt=At.toString,Bt=Rt.call(kt),$t=ge._,jt=Mt("^"+Rt.call(Lt).replace(it,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ut=ve?e.Buffer:i,Vt=e.Symbol,Ht=e.Uint8Array,Gt=Ut?Ut.allocUnsafe:i,Wt=un(kt.getPrototypeOf,kt),Xt=kt.create,qt=At.propertyIsEnumerable,Yt=Pt.splice,Zt=Vt?Vt.isConcatSpreadable:i,Kt=Vt?Vt.iterator:i,Jt=Vt?Vt.toStringTag:i,Qt=function(){try{var t=ho(kt,"defineProperty");return t({},"",{}),t}catch(e){}}(),ne=e.clearTimeout!==ge.clearTimeout&&e.clearTimeout,ie=r&&r.now!==ge.Date.now&&r.now,ue=e.setTimeout!==ge.setTimeout&&e.setTimeout,de=Et.ceil,fe=Et.floor,me=kt.getOwnPropertySymbols,ye=Ut?Ut.isBuffer:i,xe=e.isFinite,_e=Pt.join,$e=un(kt.keys,kt),qe=Et.max,xn=Et.min,_n=r.now,bn=e.parseInt,wn=Et.random,Sn=Pt.reverse,Cn=ho(e,"DataView"),En=ho(e,"Map"),kn=ho(e,"Promise"),Mn=ho(e,"Set"),Tn=ho(e,"WeakMap"),In=ho(kt,"create"),Pn=Tn&&new Tn,On={},An=zo(Cn),Dn=zo(En),Rn=zo(kn),Ln=zo(Mn),Nn=zo(Tn),Fn=Vt?Vt.prototype:i,zn=Fn?Fn.valueOf:i,Bn=Fn?Fn.toString:i;function $n(t){if(es(t)&&!Ha(t)&&!(t instanceof Hn)){if(t instanceof Vn)return t;if(Lt.call(t,"__wrapped__"))return Bo(t)}return new Vn(t)}var jn=function(){function t(){}return function(e){if(!ts(e))return{};if(Xt)return Xt(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function Un(){}function Vn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function Hn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=m,this.__views__=[]}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Wn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Xn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function qn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Xn;++e<n;)this.add(t[e])}function Yn(t){var e=this.__data__=new Wn(t);this.size=e.size}function Zn(t,e){var n=Ha(t),r=!n&&Va(t),i=!n&&!r&&qa(t),o=!n&&!r&&!i&&cs(t),a=n||r||i||o,s=a?Ke(t.length,Tt):[],l=s.length;for(var c in t)!e&&!Lt.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||xo(c,l))||s.push(c);return s}function Kn(t){var e=t.length;return e?t[qr(0,e-1)]:i}function Jn(t,e){return Lo(Ii(t),sr(e,0,t.length))}function Qn(t){return Lo(Ii(t))}function tr(t,e,n){(n!==i&&!$a(t[e],n)||n===i&&!(e in t))&&or(t,e,n)}function er(t,e,n){var r=t[e];Lt.call(t,e)&&$a(r,n)&&(n!==i||e in t)||or(t,e,n)}function nr(t,e){for(var n=t.length;n--;)if($a(t[n][0],e))return n;return-1}function rr(t,e,n,r){return pr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function ir(t,e){return t&&Pi(e,Os(e),t)}function or(t,e,n){"__proto__"==e&&Qt?Qt(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ar(t,e){for(var r=-1,o=e.length,a=n(o),s=null==t;++r<o;)a[r]=s?i:ks(t,e[r]);return a}function sr(t,e,n){return t===t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function lr(t,e,n,r,o,a){var s,l=1&e,c=2&e,u=4&e;if(n&&(s=o?n(t,r,o,a):n(t)),s!==i)return s;if(!ts(t))return t;var h=Ha(t);if(h){if(s=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&Lt.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!l)return Ii(t,s)}else{var p=go(t),d=p==S||p==C;if(qa(t))return Si(t,l);if(p==M||p==v||d&&!o){if(s=c||d?{}:yo(t),!l)return c?function(t,e){return Pi(t,fo(t),e)}(t,function(t,e){return t&&Pi(e,As(e),t)}(s,t)):function(t,e){return Pi(t,po(t),e)}(t,ir(s,t))}else{if(!ce[p])return o?t:{};s=function(t,e,n){var r=t.constructor;switch(e){case R:return Ci(t);case _:case b:return new r(+t);case L:return function(t,e){var n=e?Ci(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case N:case F:case z:case B:case $:case j:case U:case V:case H:return Ei(t,n);case E:return new r;case k:case O:return new r(t);case I:return function(t){var e=new t.constructor(t.source,gt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case P:return new r;case A:return i=t,zn?kt(zn.call(i)):{}}var i}(t,p,l)}}a||(a=new Yn);var f=a.get(t);if(f)return f;a.set(t,s),as(t)?t.forEach((function(r){s.add(lr(r,e,n,r,t,a))})):ns(t)&&t.forEach((function(r,i){s.set(i,lr(r,e,n,i,t,a))}));var g=h?i:(u?c?io:ro:c?As:Os)(t);return Ie(g||t,(function(r,i){g&&(r=t[i=r]),er(s,i,lr(r,e,n,i,t,a))})),s}function cr(t,e,n){var r=n.length;if(null==t)return!r;for(t=kt(t);r--;){var o=n[r],a=e[o],s=t[o];if(s===i&&!(o in t)||!a(s))return!1}return!0}function ur(t,e,n){if("function"!=typeof t)throw new It(o);return Oo((function(){t.apply(i,n)}),e)}function hr(t,e,n,r){var i=-1,o=De,a=!0,s=t.length,l=[],c=e.length;if(!s)return l;n&&(e=Le(e,Qe(n))),r?(o=Re,a=!1):e.length>=200&&(o=en,a=!1,e=new qn(e));t:for(;++i<s;){var u=t[i],h=null==n?u:n(u);if(u=r||0!==u?u:0,a&&h===h){for(var p=c;p--;)if(e[p]===h)continue t;l.push(u)}else o(e,h,r)||l.push(u)}return l}$n.templateSettings={escape:J,evaluate:Q,interpolate:tt,variable:"",imports:{_:$n}},$n.prototype=Un.prototype,$n.prototype.constructor=$n,Vn.prototype=jn(Un.prototype),Vn.prototype.constructor=Vn,Hn.prototype=jn(Un.prototype),Hn.prototype.constructor=Hn,Gn.prototype.clear=function(){this.__data__=In?In(null):{},this.size=0},Gn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Gn.prototype.get=function(t){var e=this.__data__;if(In){var n=e[t];return n===a?i:n}return Lt.call(e,t)?e[t]:i},Gn.prototype.has=function(t){var e=this.__data__;return In?e[t]!==i:Lt.call(e,t)},Gn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=In&&e===i?a:e,this},Wn.prototype.clear=function(){this.__data__=[],this.size=0},Wn.prototype.delete=function(t){var e=this.__data__,n=nr(e,t);return!(n<0)&&(n==e.length-1?e.pop():Yt.call(e,n,1),--this.size,!0)},Wn.prototype.get=function(t){var e=this.__data__,n=nr(e,t);return n<0?i:e[n][1]},Wn.prototype.has=function(t){return nr(this.__data__,t)>-1},Wn.prototype.set=function(t,e){var n=this.__data__,r=nr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Xn.prototype.clear=function(){this.size=0,this.__data__={hash:new Gn,map:new(En||Wn),string:new Gn}},Xn.prototype.delete=function(t){var e=co(this,t).delete(t);return this.size-=e?1:0,e},Xn.prototype.get=function(t){return co(this,t).get(t)},Xn.prototype.has=function(t){return co(this,t).has(t)},Xn.prototype.set=function(t,e){var n=co(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},qn.prototype.add=qn.prototype.push=function(t){return this.__data__.set(t,a),this},qn.prototype.has=function(t){return this.__data__.has(t)},Yn.prototype.clear=function(){this.__data__=new Wn,this.size=0},Yn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Yn.prototype.get=function(t){return this.__data__.get(t)},Yn.prototype.has=function(t){return this.__data__.has(t)},Yn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Wn){var r=n.__data__;if(!En||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Xn(r)}return n.set(t,e),this.size=n.size,this};var pr=Di(_r),dr=Di(br,!0);function fr(t,e){var n=!0;return pr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function gr(t,e,n){for(var r=-1,o=t.length;++r<o;){var a=t[r],s=e(a);if(null!=s&&(l===i?s===s&&!ls(s):n(s,l)))var l=s,c=a}return c}function mr(t,e){var n=[];return pr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function yr(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=vo),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?yr(s,e-1,n,r,i):Ne(i,s):r||(i[i.length]=s)}return i}var vr=Ri(),xr=Ri(!0);function _r(t,e){return t&&vr(t,e,Os)}function br(t,e){return t&&xr(t,e,Os)}function wr(t,e){return Ae(e,(function(e){return Ka(t[e])}))}function Sr(t,e){for(var n=0,r=(e=xi(e,t)).length;null!=t&&n<r;)t=t[Fo(e[n++])];return n&&n==r?t:i}function Cr(t,e,n){var r=e(t);return Ha(t)?r:Ne(r,n(t))}function Er(t){return null==t?t===i?"[object Undefined]":"[object Null]":Jt&&Jt in kt(t)?function(t){var e=Lt.call(t,Jt),n=t[Jt];try{t[Jt]=i;var r=!0}catch(a){}var o=zt.call(t);r&&(e?t[Jt]=n:delete t[Jt]);return o}(t):function(t){return zt.call(t)}(t)}function kr(t,e){return t>e}function Mr(t,e){return null!=t&&Lt.call(t,e)}function Tr(t,e){return null!=t&&e in kt(t)}function Ir(t,e,r){for(var o=r?Re:De,a=t[0].length,s=t.length,l=s,c=n(s),u=1/0,h=[];l--;){var p=t[l];l&&e&&(p=Le(p,Qe(e))),u=xn(p.length,u),c[l]=!r&&(e||a>=120&&p.length>=120)?new qn(l&&p):i}p=t[0];var d=-1,f=c[0];t:for(;++d<a&&h.length<u;){var g=p[d],m=e?e(g):g;if(g=r||0!==g?g:0,!(f?en(f,m):o(h,m,r))){for(l=s;--l;){var y=c[l];if(!(y?en(y,m):o(t[l],m,r)))continue t}f&&f.push(m),h.push(g)}}return h}function Pr(t,e,n){var r=null==(t=To(t,e=xi(e,t)))?t:t[Fo(Zo(e))];return null==r?i:Me(r,t,n)}function Or(t){return es(t)&&Er(t)==v}function Ar(t,e,n,r,o){return t===e||(null==t||null==e||!es(t)&&!es(e)?t!==t&&e!==e:function(t,e,n,r,o,a){var s=Ha(t),l=Ha(e),c=s?x:go(t),u=l?x:go(e),h=(c=c==v?M:c)==M,p=(u=u==v?M:u)==M,d=c==u;if(d&&qa(t)){if(!qa(e))return!1;s=!0,h=!1}if(d&&!h)return a||(a=new Yn),s||cs(t)?eo(t,e,n,r,o,a):function(t,e,n,r,i,o,a){switch(n){case L:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case R:return!(t.byteLength!=e.byteLength||!o(new Ht(t),new Ht(e)));case _:case b:case k:return $a(+t,+e);case w:return t.name==e.name&&t.message==e.message;case I:case O:return t==e+"";case E:var s=cn;case P:var l=1&r;if(s||(s=pn),t.size!=e.size&&!l)return!1;var c=a.get(t);if(c)return c==e;r|=2,a.set(t,e);var u=eo(s(t),s(e),r,i,o,a);return a.delete(t),u;case A:if(zn)return zn.call(t)==zn.call(e)}return!1}(t,e,c,n,r,o,a);if(!(1&n)){var f=h&&Lt.call(t,"__wrapped__"),g=p&&Lt.call(e,"__wrapped__");if(f||g){var m=f?t.value():t,y=g?e.value():e;return a||(a=new Yn),o(m,y,n,r,a)}}if(!d)return!1;return a||(a=new Yn),function(t,e,n,r,o,a){var s=1&n,l=ro(t),c=l.length,u=ro(e),h=u.length;if(c!=h&&!s)return!1;var p=c;for(;p--;){var d=l[p];if(!(s?d in e:Lt.call(e,d)))return!1}var f=a.get(t),g=a.get(e);if(f&&g)return f==e&&g==t;var m=!0;a.set(t,e),a.set(e,t);var y=s;for(;++p<c;){var v=t[d=l[p]],x=e[d];if(r)var _=s?r(x,v,d,e,t,a):r(v,x,d,t,e,a);if(!(_===i?v===x||o(v,x,n,r,a):_)){m=!1;break}y||(y="constructor"==d)}if(m&&!y){var b=t.constructor,w=e.constructor;b==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(m=!1)}return a.delete(t),a.delete(e),m}(t,e,n,r,o,a)}(t,e,n,r,Ar,o))}function Dr(t,e,n,r){var o=n.length,a=o,s=!r;if(null==t)return!a;for(t=kt(t);o--;){var l=n[o];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++o<a;){var c=(l=n[o])[0],u=t[c],h=l[1];if(s&&l[2]){if(u===i&&!(c in t))return!1}else{var p=new Yn;if(r)var d=r(u,h,c,t,e,p);if(!(d===i?Ar(h,u,3,r,p):d))return!1}}return!0}function Rr(t){return!(!ts(t)||(e=t,Ft&&Ft in e))&&(Ka(t)?jt:vt).test(zo(t));var e}function Lr(t){return"function"==typeof t?t:null==t?rl:"object"==typeof t?Ha(t)?jr(t[0],t[1]):$r(t):pl(t)}function Nr(t){if(!Co(t))return $e(t);var e=[];for(var n in kt(t))Lt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Fr(t){if(!ts(t))return function(t){var e=[];if(null!=t)for(var n in kt(t))e.push(n);return e}(t);var e=Co(t),n=[];for(var r in t)("constructor"!=r||!e&&Lt.call(t,r))&&n.push(r);return n}function zr(t,e){return t<e}function Br(t,e){var r=-1,i=Wa(t)?n(t.length):[];return pr(t,(function(t,n,o){i[++r]=e(t,n,o)})),i}function $r(t){var e=uo(t);return 1==e.length&&e[0][2]?ko(e[0][0],e[0][1]):function(n){return n===t||Dr(n,t,e)}}function jr(t,e){return bo(t)&&Eo(e)?ko(Fo(t),e):function(n){var r=ks(n,t);return r===i&&r===e?Ms(n,t):Ar(e,r,3)}}function Ur(t,e,n,r,o){t!==e&&vr(e,(function(a,s){if(o||(o=new Yn),ts(a))!function(t,e,n,r,o,a,s){var l=Io(t,n),c=Io(e,n),u=s.get(c);if(u)return void tr(t,n,u);var h=a?a(l,c,n+"",t,e,s):i,p=h===i;if(p){var d=Ha(c),f=!d&&qa(c),g=!d&&!f&&cs(c);h=c,d||f||g?Ha(l)?h=l:Xa(l)?h=Ii(l):f?(p=!1,h=Si(c,!0)):g?(p=!1,h=Ei(c,!0)):h=[]:is(c)||Va(c)?(h=l,Va(l)?h=ys(l):ts(l)&&!Ka(l)||(h=yo(c))):p=!1}p&&(s.set(c,h),o(h,c,r,a,s),s.delete(c));tr(t,n,h)}(t,e,s,n,Ur,r,o);else{var l=r?r(Io(t,s),a,s+"",t,e,o):i;l===i&&(l=a),tr(t,s,l)}}),As)}function Vr(t,e){var n=t.length;if(n)return xo(e+=e<0?n:0,n)?t[e]:i}function Hr(t,e,n){e=e.length?Le(e,(function(t){return Ha(t)?function(e){return Sr(e,1===t.length?t[0]:t)}:t})):[rl];var r=-1;e=Le(e,Qe(lo()));var i=Br(t,(function(t,n,i){var o=Le(e,(function(e){return e(t)}));return{criteria:o,index:++r,value:t}}));return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(i,(function(t,e){return function(t,e,n){var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;for(;++r<a;){var l=ki(i[r],o[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}function Gr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=Sr(t,a);n(s,a)&&Qr(o,xi(a,t),s)}return o}function Wr(t,e,n,r){var i=r?He:Ve,o=-1,a=e.length,s=t;for(t===e&&(e=Ii(e)),n&&(s=Le(t,Qe(n)));++o<a;)for(var l=0,c=e[o],u=n?n(c):c;(l=i(s,u,l,r))>-1;)s!==t&&Yt.call(s,l,1),Yt.call(t,l,1);return t}function Xr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;xo(i)?Yt.call(t,i,1):hi(t,i)}}return t}function qr(t,e){return t+fe(wn()*(e-t+1))}function Yr(t,e){var n="";if(!t||e<1||e>f)return n;do{e%2&&(n+=t),(e=fe(e/2))&&(t+=t)}while(e);return n}function Zr(t,e){return Ao(Mo(t,e,rl),t+"")}function Kr(t){return Kn($s(t))}function Jr(t,e){var n=$s(t);return Lo(n,sr(e,0,n.length))}function Qr(t,e,n,r){if(!ts(t))return t;for(var o=-1,a=(e=xi(e,t)).length,s=a-1,l=t;null!=l&&++o<a;){var c=Fo(e[o]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(o!=s){var h=l[c];(u=r?r(h,c,l):i)===i&&(u=ts(h)?h:xo(e[o+1])?[]:{})}er(l,c,u),l=l[c]}return t}var ti=Pn?function(t,e){return Pn.set(t,e),t}:rl,ei=Qt?function(t,e){return Qt(t,"toString",{configurable:!0,enumerable:!1,value:tl(e),writable:!0})}:rl;function ni(t){return Lo($s(t))}function ri(t,e,r){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var a=n(o);++i<o;)a[i]=t[i+e];return a}function ii(t,e){var n;return pr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function oi(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!ls(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return ai(t,e,rl,n)}function ai(t,e,n,r){var o=0,a=null==t?0:t.length;if(0===a)return 0;for(var s=(e=n(e))!==e,l=null===e,c=ls(e),u=e===i;o<a;){var h=fe((o+a)/2),p=n(t[h]),d=p!==i,f=null===p,g=p===p,m=ls(p);if(s)var y=r||g;else y=u?g&&(r||d):l?g&&d&&(r||!f):c?g&&d&&!f&&(r||!m):!f&&!m&&(r?p<=e:p<e);y?o=h+1:a=h}return xn(a,4294967294)}function si(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!$a(s,l)){var l=s;o[i++]=0===a?0:a}}return o}function li(t){return"number"==typeof t?t:ls(t)?g:+t}function ci(t){if("string"==typeof t)return t;if(Ha(t))return Le(t,ci)+"";if(ls(t))return Bn?Bn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function ui(t,e,n){var r=-1,i=De,o=t.length,a=!0,s=[],l=s;if(n)a=!1,i=Re;else if(o>=200){var c=e?null:Yi(t);if(c)return pn(c);a=!1,i=en,l=new qn}else l=e?[]:s;t:for(;++r<o;){var u=t[r],h=e?e(u):u;if(u=n||0!==u?u:0,a&&h===h){for(var p=l.length;p--;)if(l[p]===h)continue t;e&&l.push(h),s.push(u)}else i(l,h,n)||(l!==s&&l.push(h),s.push(u))}return s}function hi(t,e){return null==(t=To(t,e=xi(e,t)))||delete t[Fo(Zo(e))]}function pi(t,e,n,r){return Qr(t,e,n(Sr(t,e)),r)}function di(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ri(t,r?0:o,r?o+1:i):ri(t,r?o+1:0,r?i:o)}function fi(t,e){var n=t;return n instanceof Hn&&(n=n.value()),Fe(e,(function(t,e){return e.func.apply(e.thisArg,Ne([t],e.args))}),n)}function gi(t,e,r){var i=t.length;if(i<2)return i?ui(t[0]):[];for(var o=-1,a=n(i);++o<i;)for(var s=t[o],l=-1;++l<i;)l!=o&&(a[o]=hr(a[o]||s,t[l],e,r));return ui(yr(a,1),e,r)}function mi(t,e,n){for(var r=-1,o=t.length,a=e.length,s={};++r<o;){var l=r<a?e[r]:i;n(s,t[r],l)}return s}function yi(t){return Xa(t)?t:[]}function vi(t){return"function"==typeof t?t:rl}function xi(t,e){return Ha(t)?t:bo(t,e)?[t]:No(vs(t))}var _i=Zr;function bi(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:ri(t,e,n)}var wi=ne||function(t){return ge.clearTimeout(t)};function Si(t,e){if(e)return t.slice();var n=t.length,r=Gt?Gt(n):new t.constructor(n);return t.copy(r),r}function Ci(t){var e=new t.constructor(t.byteLength);return new Ht(e).set(new Ht(t)),e}function Ei(t,e){var n=e?Ci(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function ki(t,e){if(t!==e){var n=t!==i,r=null===t,o=t===t,a=ls(t),s=e!==i,l=null===e,c=e===e,u=ls(e);if(!l&&!u&&!a&&t>e||a&&s&&c&&!l&&!u||r&&s&&c||!n&&c||!o)return 1;if(!r&&!a&&!u&&t<e||u&&n&&o&&!r&&!a||l&&n&&o||!s&&o||!c)return-1}return 0}function Mi(t,e,r,i){for(var o=-1,a=t.length,s=r.length,l=-1,c=e.length,u=qe(a-s,0),h=n(c+u),p=!i;++l<c;)h[l]=e[l];for(;++o<s;)(p||o<a)&&(h[r[o]]=t[o]);for(;u--;)h[l++]=t[o++];return h}function Ti(t,e,r,i){for(var o=-1,a=t.length,s=-1,l=r.length,c=-1,u=e.length,h=qe(a-l,0),p=n(h+u),d=!i;++o<h;)p[o]=t[o];for(var f=o;++c<u;)p[f+c]=e[c];for(;++s<l;)(d||o<a)&&(p[f+r[s]]=t[o++]);return p}function Ii(t,e){var r=-1,i=t.length;for(e||(e=n(i));++r<i;)e[r]=t[r];return e}function Pi(t,e,n,r){var o=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var l=e[a],c=r?r(n[l],t[l],l,n,t):i;c===i&&(c=t[l]),o?or(n,l,c):er(n,l,c)}return n}function Oi(t,e){return function(n,r){var i=Ha(n)?Te:rr,o=e?e():{};return i(n,t,lo(r,2),o)}}function Ai(t){return Zr((function(e,n){var r=-1,o=n.length,a=o>1?n[o-1]:i,s=o>2?n[2]:i;for(a=t.length>3&&"function"==typeof a?(o--,a):i,s&&_o(n[0],n[1],s)&&(a=o<3?i:a,o=1),e=kt(e);++r<o;){var l=n[r];l&&t(e,l,r,a)}return e}))}function Di(t,e){return function(n,r){if(null==n)return n;if(!Wa(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=kt(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Ri(t){return function(e,n,r){for(var i=-1,o=kt(e),a=r(e),s=a.length;s--;){var l=a[t?s:++i];if(!1===n(o[l],l,o))break}return e}}function Li(t){return function(e){var n=ln(e=vs(e))?gn(e):i,r=n?n[0]:e.charAt(0),o=n?bi(n,1).join(""):e.slice(1);return r[t]()+o}}function Ni(t){return function(e){return Fe(Ks(Vs(e).replace(te,"")),t,"")}}function Fi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=jn(t.prototype),r=t.apply(n,e);return ts(r)?r:n}}function zi(t){return function(e,n,r){var o=kt(e);if(!Wa(e)){var a=lo(n,3);e=Os(e),n=function(t){return a(o[t],t,o)}}var s=t(e,n,r);return s>-1?o[a?e[s]:s]:i}}function Bi(t){return no((function(e){var n=e.length,r=n,a=Vn.prototype.thru;for(t&&e.reverse();r--;){var s=e[r];if("function"!=typeof s)throw new It(o);if(a&&!l&&"wrapper"==ao(s))var l=new Vn([],!0)}for(r=l?r:n;++r<n;){var c=ao(s=e[r]),u="wrapper"==c?oo(s):i;l=u&&wo(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[ao(u[0])].apply(l,u[3]):1==s.length&&wo(s)?l[c]():l.thru(s)}return function(){var t=arguments,r=t[0];if(l&&1==t.length&&Ha(r))return l.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function $i(t,e,r,o,a,s,l,c,u,p){var d=e&h,f=1&e,g=2&e,m=24&e,y=512&e,v=g?i:Fi(t);return function h(){for(var x=arguments.length,_=n(x),b=x;b--;)_[b]=arguments[b];if(m)var w=so(h),S=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(_,w);if(o&&(_=Mi(_,o,a,m)),s&&(_=Ti(_,s,l,m)),x-=S,m&&x<p){var C=hn(_,w);return Xi(t,e,$i,h.placeholder,r,_,C,c,u,p-x)}var E=f?r:this,k=g?E[t]:t;return x=_.length,c?_=function(t,e){var n=t.length,r=xn(e.length,n),o=Ii(t);for(;r--;){var a=e[r];t[r]=xo(a,n)?o[a]:i}return t}(_,c):y&&x>1&&_.reverse(),d&&u<x&&(_.length=u),this&&this!==ge&&this instanceof h&&(k=v||Fi(k)),k.apply(E,_)}}function ji(t,e){return function(n,r){return function(t,e,n,r){return _r(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function Ui(t,e){return function(n,r){var o;if(n===i&&r===i)return e;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=ci(n),r=ci(r)):(n=li(n),r=li(r)),o=t(n,r)}return o}}function Vi(t){return no((function(e){return e=Le(e,Qe(lo())),Zr((function(n){var r=this;return t(e,(function(t){return Me(t,r,n)}))}))}))}function Hi(t,e){var n=(e=e===i?" ":ci(e)).length;if(n<2)return n?Yr(e,t):e;var r=Yr(e,de(t/fn(e)));return ln(e)?bi(gn(r),0,t).join(""):r.slice(0,t)}function Gi(t){return function(e,r,o){return o&&"number"!=typeof o&&_o(e,r,o)&&(r=o=i),e=ds(e),r===i?(r=e,e=0):r=ds(r),function(t,e,r,i){for(var o=-1,a=qe(de((e-t)/(r||1)),0),s=n(a);a--;)s[i?a:++o]=t,t+=r;return s}(e,r,o=o===i?e<r?1:-1:ds(o),t)}}function Wi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ms(e),n=ms(n)),t(e,n)}}function Xi(t,e,n,r,o,a,s,l,h,p){var d=8&e;e|=d?c:u,4&(e&=~(d?u:c))||(e&=-4);var f=[t,e,o,d?a:i,d?s:i,d?i:a,d?i:s,l,h,p],g=n.apply(i,f);return wo(t)&&Po(g,f),g.placeholder=r,Do(g,t,e)}function qi(t){var e=Et[t];return function(t,n){if(t=ms(t),(n=null==n?0:xn(fs(n),292))&&xe(t)){var r=(vs(t)+"e").split("e");return+((r=(vs(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Yi=Mn&&1/pn(new Mn([,-0]))[1]==d?function(t){return new Mn(t)}:ll;function Zi(t){return function(e){var n=go(e);return n==E?cn(e):n==P?dn(e):function(t,e){return Le(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Ki(t,e,r,a,d,f,g,m){var y=2&e;if(!y&&"function"!=typeof t)throw new It(o);var v=a?a.length:0;if(v||(e&=-97,a=d=i),g=g===i?g:qe(fs(g),0),m=m===i?m:fs(m),v-=d?d.length:0,e&u){var x=a,_=d;a=d=i}var b=y?i:oo(t),w=[t,e,r,a,d,x,_,f,g,m];if(b&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,a=r==h&&8==n||r==h&&n==p&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!a)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var l=e[3];if(l){var c=t[3];t[3]=c?Mi(c,l,e[4]):l,t[4]=c?hn(t[3],s):e[4]}(l=e[5])&&(c=t[5],t[5]=c?Ti(c,l,e[6]):l,t[6]=c?hn(t[5],s):e[6]);(l=e[7])&&(t[7]=l);r&h&&(t[8]=null==t[8]?e[8]:xn(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=i}(w,b),t=w[0],e=w[1],r=w[2],a=w[3],d=w[4],!(m=w[9]=w[9]===i?y?0:t.length:qe(w[9]-v,0))&&24&e&&(e&=-25),e&&1!=e)S=8==e||e==l?function(t,e,r){var o=Fi(t);return function a(){for(var s=arguments.length,l=n(s),c=s,u=so(a);c--;)l[c]=arguments[c];var h=s<3&&l[0]!==u&&l[s-1]!==u?[]:hn(l,u);return(s-=h.length)<r?Xi(t,e,$i,a.placeholder,i,l,h,i,i,r-s):Me(this&&this!==ge&&this instanceof a?o:t,this,l)}}(t,e,m):e!=c&&33!=e||d.length?$i.apply(i,w):function(t,e,r,i){var o=1&e,a=Fi(t);return function e(){for(var s=-1,l=arguments.length,c=-1,u=i.length,h=n(u+l),p=this&&this!==ge&&this instanceof e?a:t;++c<u;)h[c]=i[c];for(;l--;)h[c++]=arguments[++s];return Me(p,o?r:this,h)}}(t,e,r,a);else var S=function(t,e,n){var r=1&e,i=Fi(t);return function e(){return(this&&this!==ge&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,r);return Do((b?ti:Po)(S,w),t,e)}function Ji(t,e,n,r){return t===i||$a(t,At[n])&&!Lt.call(r,n)?e:t}function Qi(t,e,n,r,o,a){return ts(t)&&ts(e)&&(a.set(e,t),Ur(t,e,i,Qi,a),a.delete(e)),t}function to(t){return is(t)?i:t}function eo(t,e,n,r,o,a){var s=1&n,l=t.length,c=e.length;if(l!=c&&!(s&&c>l))return!1;var u=a.get(t),h=a.get(e);if(u&&h)return u==e&&h==t;var p=-1,d=!0,f=2&n?new qn:i;for(a.set(t,e),a.set(e,t);++p<l;){var g=t[p],m=e[p];if(r)var y=s?r(m,g,p,e,t,a):r(g,m,p,t,e,a);if(y!==i){if(y)continue;d=!1;break}if(f){if(!Be(e,(function(t,e){if(!en(f,e)&&(g===t||o(g,t,n,r,a)))return f.push(e)}))){d=!1;break}}else if(g!==m&&!o(g,m,n,r,a)){d=!1;break}}return a.delete(t),a.delete(e),d}function no(t){return Ao(Mo(t,i,Go),t+"")}function ro(t){return Cr(t,Os,po)}function io(t){return Cr(t,As,fo)}var oo=Pn?function(t){return Pn.get(t)}:ll;function ao(t){for(var e=t.name+"",n=On[e],r=Lt.call(On,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function so(t){return(Lt.call($n,"placeholder")?$n:t).placeholder}function lo(){var t=$n.iteratee||il;return t=t===il?Lr:t,arguments.length?t(arguments[0],arguments[1]):t}function co(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function uo(t){for(var e=Os(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Eo(i)]}return e}function ho(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return Rr(n)?n:i}var po=me?function(t){return null==t?[]:(t=kt(t),Ae(me(t),(function(e){return qt.call(t,e)})))}:gl,fo=me?function(t){for(var e=[];t;)Ne(e,po(t)),t=Wt(t);return e}:gl,go=Er;function mo(t,e,n){for(var r=-1,i=(e=xi(e,t)).length,o=!1;++r<i;){var a=Fo(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Qa(i)&&xo(a,i)&&(Ha(t)||Va(t))}function yo(t){return"function"!=typeof t.constructor||Co(t)?{}:jn(Wt(t))}function vo(t){return Ha(t)||Va(t)||!!(Zt&&t&&t[Zt])}function xo(t,e){var n=typeof t;return!!(e=null==e?f:e)&&("number"==n||"symbol"!=n&&_t.test(t))&&t>-1&&t%1==0&&t<e}function _o(t,e,n){if(!ts(n))return!1;var r=typeof e;return!!("number"==r?Wa(n)&&xo(e,n.length):"string"==r&&e in n)&&$a(n[e],t)}function bo(t,e){if(Ha(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ls(t))||(nt.test(t)||!et.test(t)||null!=e&&t in kt(e))}function wo(t){var e=ao(t),n=$n[e];if("function"!=typeof n||!(e in Hn.prototype))return!1;if(t===n)return!0;var r=oo(n);return!!r&&t===r[0]}(Cn&&go(new Cn(new ArrayBuffer(1)))!=L||En&&go(new En)!=E||kn&&go(kn.resolve())!=T||Mn&&go(new Mn)!=P||Tn&&go(new Tn)!=D)&&(go=function(t){var e=Er(t),n=e==M?t.constructor:i,r=n?zo(n):"";if(r)switch(r){case An:return L;case Dn:return E;case Rn:return T;case Ln:return P;case Nn:return D}return e});var So=Dt?Ka:ml;function Co(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||At)}function Eo(t){return t===t&&!ts(t)}function ko(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==i||t in kt(n)))}}function Mo(t,e,r){return e=qe(e===i?t.length-1:e,0),function(){for(var i=arguments,o=-1,a=qe(i.length-e,0),s=n(a);++o<a;)s[o]=i[e+o];o=-1;for(var l=n(e+1);++o<e;)l[o]=i[o];return l[e]=r(s),Me(t,this,l)}}function To(t,e){return e.length<2?t:Sr(t,ri(e,0,-1))}function Io(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}var Po=Ro(ti),Oo=ue||function(t,e){return ge.setTimeout(t,e)},Ao=Ro(ei);function Do(t,e,n){var r=e+"";return Ao(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(lt,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Ie(y,(function(n){var r="_."+n[0];e&n[1]&&!De(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(ct);return e?e[1].split(ut):[]}(r),n)))}function Ro(t){var e=0,n=0;return function(){var r=_n(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function Lo(t,e){var n=-1,r=t.length,o=r-1;for(e=e===i?r:e;++n<e;){var a=qr(n,o),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var No=function(t){var e=Ra(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(rt,(function(t,n,r,i){e.push(r?i.replace(dt,"$1"):n||t)})),e}));function Fo(t){if("string"==typeof t||ls(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function zo(t){if(null!=t){try{return Rt.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Bo(t){if(t instanceof Hn)return t.clone();var e=new Vn(t.__wrapped__,t.__chain__);return e.__actions__=Ii(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var $o=Zr((function(t,e){return Xa(t)?hr(t,yr(e,1,Xa,!0)):[]})),jo=Zr((function(t,e){var n=Zo(e);return Xa(n)&&(n=i),Xa(t)?hr(t,yr(e,1,Xa,!0),lo(n,2)):[]})),Uo=Zr((function(t,e){var n=Zo(e);return Xa(n)&&(n=i),Xa(t)?hr(t,yr(e,1,Xa,!0),i,n):[]}));function Vo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:fs(n);return i<0&&(i=qe(r+i,0)),Ue(t,lo(e,3),i)}function Ho(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return n!==i&&(o=fs(n),o=n<0?qe(r+o,0):xn(o,r-1)),Ue(t,lo(e,3),o,!0)}function Go(t){return(null==t?0:t.length)?yr(t,1):[]}function Wo(t){return t&&t.length?t[0]:i}var Xo=Zr((function(t){var e=Le(t,yi);return e.length&&e[0]===t[0]?Ir(e):[]})),qo=Zr((function(t){var e=Zo(t),n=Le(t,yi);return e===Zo(n)?e=i:n.pop(),n.length&&n[0]===t[0]?Ir(n,lo(e,2)):[]})),Yo=Zr((function(t){var e=Zo(t),n=Le(t,yi);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?Ir(n,i,e):[]}));function Zo(t){var e=null==t?0:t.length;return e?t[e-1]:i}var Ko=Zr(Jo);function Jo(t,e){return t&&t.length&&e&&e.length?Wr(t,e):t}var Qo=no((function(t,e){var n=null==t?0:t.length,r=ar(t,e);return Xr(t,Le(e,(function(t){return xo(t,n)?+t:t})).sort(ki)),r}));function ta(t){return null==t?t:Sn.call(t)}var ea=Zr((function(t){return ui(yr(t,1,Xa,!0))})),na=Zr((function(t){var e=Zo(t);return Xa(e)&&(e=i),ui(yr(t,1,Xa,!0),lo(e,2))})),ra=Zr((function(t){var e=Zo(t);return e="function"==typeof e?e:i,ui(yr(t,1,Xa,!0),i,e)}));function ia(t){if(!t||!t.length)return[];var e=0;return t=Ae(t,(function(t){if(Xa(t))return e=qe(t.length,e),!0})),Ke(e,(function(e){return Le(t,Xe(e))}))}function oa(t,e){if(!t||!t.length)return[];var n=ia(t);return null==e?n:Le(n,(function(t){return Me(e,i,t)}))}var aa=Zr((function(t,e){return Xa(t)?hr(t,e):[]})),sa=Zr((function(t){return gi(Ae(t,Xa))})),la=Zr((function(t){var e=Zo(t);return Xa(e)&&(e=i),gi(Ae(t,Xa),lo(e,2))})),ca=Zr((function(t){var e=Zo(t);return e="function"==typeof e?e:i,gi(Ae(t,Xa),i,e)})),ua=Zr(ia);var ha=Zr((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,oa(t,n)}));function pa(t){var e=$n(t);return e.__chain__=!0,e}function da(t,e){return e(t)}var fa=no((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return ar(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Hn&&xo(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:da,args:[o],thisArg:i}),new Vn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(o)}));var ga=Oi((function(t,e,n){Lt.call(t,n)?++t[n]:or(t,n,1)}));var ma=zi(Vo),ya=zi(Ho);function va(t,e){return(Ha(t)?Ie:pr)(t,lo(e,3))}function xa(t,e){return(Ha(t)?Pe:dr)(t,lo(e,3))}var _a=Oi((function(t,e,n){Lt.call(t,n)?t[n].push(e):or(t,n,[e])}));var ba=Zr((function(t,e,r){var i=-1,o="function"==typeof e,a=Wa(t)?n(t.length):[];return pr(t,(function(t){a[++i]=o?Me(e,t,r):Pr(t,e,r)})),a})),wa=Oi((function(t,e,n){or(t,n,e)}));function Sa(t,e){return(Ha(t)?Le:Br)(t,lo(e,3))}var Ca=Oi((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var Ea=Zr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&_o(t,e[0],e[1])?e=[]:n>2&&_o(e[0],e[1],e[2])&&(e=[e[0]]),Hr(t,yr(e,1),[])})),ka=ie||function(){return ge.Date.now()};function Ma(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,Ki(t,h,i,i,i,i,e)}function Ta(t,e){var n;if("function"!=typeof e)throw new It(o);return t=fs(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var Ia=Zr((function(t,e,n){var r=1;if(n.length){var i=hn(n,so(Ia));r|=c}return Ki(t,r,e,n,i)})),Pa=Zr((function(t,e,n){var r=3;if(n.length){var i=hn(n,so(Pa));r|=c}return Ki(e,r,t,n,i)}));function Oa(t,e,n){var r,a,s,l,c,u,h=0,p=!1,d=!1,f=!0;if("function"!=typeof t)throw new It(o);function g(e){var n=r,o=a;return r=a=i,h=e,l=t.apply(o,n)}function m(t){var n=t-u;return u===i||n>=e||n<0||d&&t-h>=s}function y(){var t=ka();if(m(t))return v(t);c=Oo(y,function(t){var n=e-(t-u);return d?xn(n,s-(t-h)):n}(t))}function v(t){return c=i,f&&r?g(t):(r=a=i,l)}function x(){var t=ka(),n=m(t);if(r=arguments,a=this,u=t,n){if(c===i)return function(t){return h=t,c=Oo(y,e),p?g(t):l}(u);if(d)return wi(c),c=Oo(y,e),g(u)}return c===i&&(c=Oo(y,e)),l}return e=ms(e)||0,ts(n)&&(p=!!n.leading,s=(d="maxWait"in n)?qe(ms(n.maxWait)||0,e):s,f="trailing"in n?!!n.trailing:f),x.cancel=function(){c!==i&&wi(c),h=0,r=u=a=c=i},x.flush=function(){return c===i?l:v(ka())},x}var Aa=Zr((function(t,e){return ur(t,1,e)})),Da=Zr((function(t,e,n){return ur(t,ms(e)||0,n)}));function Ra(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new It(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ra.Cache||Xn),n}function La(t){if("function"!=typeof t)throw new It(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Ra.Cache=Xn;var Na=_i((function(t,e){var n=(e=1==e.length&&Ha(e[0])?Le(e[0],Qe(lo())):Le(yr(e,1),Qe(lo()))).length;return Zr((function(r){for(var i=-1,o=xn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return Me(t,this,r)}))})),Fa=Zr((function(t,e){var n=hn(e,so(Fa));return Ki(t,c,i,e,n)})),za=Zr((function(t,e){var n=hn(e,so(za));return Ki(t,u,i,e,n)})),Ba=no((function(t,e){return Ki(t,p,i,i,i,e)}));function $a(t,e){return t===e||t!==t&&e!==e}var ja=Wi(kr),Ua=Wi((function(t,e){return t>=e})),Va=Or(function(){return arguments}())?Or:function(t){return es(t)&&Lt.call(t,"callee")&&!qt.call(t,"callee")},Ha=n.isArray,Ga=be?Qe(be):function(t){return es(t)&&Er(t)==R};function Wa(t){return null!=t&&Qa(t.length)&&!Ka(t)}function Xa(t){return es(t)&&Wa(t)}var qa=ye||ml,Ya=we?Qe(we):function(t){return es(t)&&Er(t)==b};function Za(t){if(!es(t))return!1;var e=Er(t);return e==w||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!is(t)}function Ka(t){if(!ts(t))return!1;var e=Er(t);return e==S||e==C||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ja(t){return"number"==typeof t&&t==fs(t)}function Qa(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=f}function ts(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function es(t){return null!=t&&"object"==typeof t}var ns=Se?Qe(Se):function(t){return es(t)&&go(t)==E};function rs(t){return"number"==typeof t||es(t)&&Er(t)==k}function is(t){if(!es(t)||Er(t)!=M)return!1;var e=Wt(t);if(null===e)return!0;var n=Lt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Rt.call(n)==Bt}var os=Ce?Qe(Ce):function(t){return es(t)&&Er(t)==I};var as=Ee?Qe(Ee):function(t){return es(t)&&go(t)==P};function ss(t){return"string"==typeof t||!Ha(t)&&es(t)&&Er(t)==O}function ls(t){return"symbol"==typeof t||es(t)&&Er(t)==A}var cs=ke?Qe(ke):function(t){return es(t)&&Qa(t.length)&&!!le[Er(t)]};var us=Wi(zr),hs=Wi((function(t,e){return t<=e}));function ps(t){if(!t)return[];if(Wa(t))return ss(t)?gn(t):Ii(t);if(Kt&&t[Kt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Kt]());var e=go(t);return(e==E?cn:e==P?pn:$s)(t)}function ds(t){return t?(t=ms(t))===d||t===-1/0?17976931348623157e292*(t<0?-1:1):t===t?t:0:0===t?t:0}function fs(t){var e=ds(t),n=e%1;return e===e?n?e-n:e:0}function gs(t){return t?sr(fs(t),0,m):0}function ms(t){if("number"==typeof t)return t;if(ls(t))return g;if(ts(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ts(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Je(t);var n=yt.test(t);return n||xt.test(t)?pe(t.slice(2),n?2:8):mt.test(t)?g:+t}function ys(t){return Pi(t,As(t))}function vs(t){return null==t?"":ci(t)}var xs=Ai((function(t,e){if(Co(e)||Wa(e))Pi(e,Os(e),t);else for(var n in e)Lt.call(e,n)&&er(t,n,e[n])})),_s=Ai((function(t,e){Pi(e,As(e),t)})),bs=Ai((function(t,e,n,r){Pi(e,As(e),t,r)})),ws=Ai((function(t,e,n,r){Pi(e,Os(e),t,r)})),Ss=no(ar);var Cs=Zr((function(t,e){t=kt(t);var n=-1,r=e.length,o=r>2?e[2]:i;for(o&&_o(e[0],e[1],o)&&(r=1);++n<r;)for(var a=e[n],s=As(a),l=-1,c=s.length;++l<c;){var u=s[l],h=t[u];(h===i||$a(h,At[u])&&!Lt.call(t,u))&&(t[u]=a[u])}return t})),Es=Zr((function(t){return t.push(i,Qi),Me(Rs,i,t)}));function ks(t,e,n){var r=null==t?i:Sr(t,e);return r===i?n:r}function Ms(t,e){return null!=t&&mo(t,e,Tr)}var Ts=ji((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=zt.call(e)),t[e]=n}),tl(rl)),Is=ji((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=zt.call(e)),Lt.call(t,e)?t[e].push(n):t[e]=[n]}),lo),Ps=Zr(Pr);function Os(t){return Wa(t)?Zn(t):Nr(t)}function As(t){return Wa(t)?Zn(t,!0):Fr(t)}var Ds=Ai((function(t,e,n){Ur(t,e,n)})),Rs=Ai((function(t,e,n,r){Ur(t,e,n,r)})),Ls=no((function(t,e){var n={};if(null==t)return n;var r=!1;e=Le(e,(function(e){return e=xi(e,t),r||(r=e.length>1),e})),Pi(t,io(t),n),r&&(n=lr(n,7,to));for(var i=e.length;i--;)hi(n,e[i]);return n}));var Ns=no((function(t,e){return null==t?{}:function(t,e){return Gr(t,e,(function(e,n){return Ms(t,n)}))}(t,e)}));function Fs(t,e){if(null==t)return{};var n=Le(io(t),(function(t){return[t]}));return e=lo(e),Gr(t,n,(function(t,n){return e(t,n[0])}))}var zs=Zi(Os),Bs=Zi(As);function $s(t){return null==t?[]:tn(t,Os(t))}var js=Ni((function(t,e,n){return e=e.toLowerCase(),t+(n?Us(e):e)}));function Us(t){return Zs(vs(t).toLowerCase())}function Vs(t){return(t=vs(t))&&t.replace(bt,on).replace(ee,"")}var Hs=Ni((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Gs=Ni((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Ws=Li("toLowerCase");var Xs=Ni((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var qs=Ni((function(t,e,n){return t+(n?" ":"")+Zs(e)}));var Ys=Ni((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Zs=Li("toUpperCase");function Ks(t,e,n){return t=vs(t),(e=n?i:e)===i?function(t){return oe.test(t)}(t)?function(t){return t.match(re)||[]}(t):function(t){return t.match(ht)||[]}(t):t.match(e)||[]}var Js=Zr((function(t,e){try{return Me(t,i,e)}catch(n){return Za(n)?n:new st(n)}})),Qs=no((function(t,e){return Ie(e,(function(e){e=Fo(e),or(t,e,Ia(t[e],t))})),t}));function tl(t){return function(){return t}}var el=Bi(),nl=Bi(!0);function rl(t){return t}function il(t){return Lr("function"==typeof t?t:lr(t,1))}var ol=Zr((function(t,e){return function(n){return Pr(n,t,e)}})),al=Zr((function(t,e){return function(n){return Pr(t,n,e)}}));function sl(t,e,n){var r=Os(e),i=wr(e,r);null!=n||ts(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=wr(e,Os(e)));var o=!(ts(n)&&"chain"in n)||!!n.chain,a=Ka(t);return Ie(i,(function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=Ii(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Ne([this.value()],arguments))})})),t}function ll(){}var cl=Vi(Le),ul=Vi(Oe),hl=Vi(Be);function pl(t){return bo(t)?Xe(Fo(t)):function(t){return function(e){return Sr(e,t)}}(t)}var dl=Gi(),fl=Gi(!0);function gl(){return[]}function ml(){return!1}var yl=Ui((function(t,e){return t+e}),0),vl=qi("ceil"),xl=Ui((function(t,e){return t/e}),1),_l=qi("floor");var bl=Ui((function(t,e){return t*e}),1),wl=qi("round"),Sl=Ui((function(t,e){return t-e}),0);return $n.after=function(t,e){if("function"!=typeof e)throw new It(o);return t=fs(t),function(){if(--t<1)return e.apply(this,arguments)}},$n.ary=Ma,$n.assign=xs,$n.assignIn=_s,$n.assignInWith=bs,$n.assignWith=ws,$n.at=Ss,$n.before=Ta,$n.bind=Ia,$n.bindAll=Qs,$n.bindKey=Pa,$n.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ha(t)?t:[t]},$n.chain=pa,$n.chunk=function(t,e,r){e=(r?_o(t,e,r):e===i)?1:qe(fs(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var a=0,s=0,l=n(de(o/e));a<o;)l[s++]=ri(t,a,a+=e);return l},$n.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},$n.concat=function(){var t=arguments.length;if(!t)return[];for(var e=n(t-1),r=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Ne(Ha(r)?Ii(r):[r],yr(e,1))},$n.cond=function(t){var e=null==t?0:t.length,n=lo();return t=e?Le(t,(function(t){if("function"!=typeof t[1])throw new It(o);return[n(t[0]),t[1]]})):[],Zr((function(n){for(var r=-1;++r<e;){var i=t[r];if(Me(i[0],this,n))return Me(i[1],this,n)}}))},$n.conforms=function(t){return function(t){var e=Os(t);return function(n){return cr(n,t,e)}}(lr(t,1))},$n.constant=tl,$n.countBy=ga,$n.create=function(t,e){var n=jn(t);return null==e?n:ir(n,e)},$n.curry=function t(e,n,r){var o=Ki(e,8,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},$n.curryRight=function t(e,n,r){var o=Ki(e,l,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},$n.debounce=Oa,$n.defaults=Cs,$n.defaultsDeep=Es,$n.defer=Aa,$n.delay=Da,$n.difference=$o,$n.differenceBy=jo,$n.differenceWith=Uo,$n.drop=function(t,e,n){var r=null==t?0:t.length;return r?ri(t,(e=n||e===i?1:fs(e))<0?0:e,r):[]},$n.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ri(t,0,(e=r-(e=n||e===i?1:fs(e)))<0?0:e):[]},$n.dropRightWhile=function(t,e){return t&&t.length?di(t,lo(e,3),!0,!0):[]},$n.dropWhile=function(t,e){return t&&t.length?di(t,lo(e,3),!0):[]},$n.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&_o(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=fs(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:fs(r))<0&&(r+=o),r=n>r?0:gs(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},$n.filter=function(t,e){return(Ha(t)?Ae:mr)(t,lo(e,3))},$n.flatMap=function(t,e){return yr(Sa(t,e),1)},$n.flatMapDeep=function(t,e){return yr(Sa(t,e),d)},$n.flatMapDepth=function(t,e,n){return n=n===i?1:fs(n),yr(Sa(t,e),n)},$n.flatten=Go,$n.flattenDeep=function(t){return(null==t?0:t.length)?yr(t,d):[]},$n.flattenDepth=function(t,e){return(null==t?0:t.length)?yr(t,e=e===i?1:fs(e)):[]},$n.flip=function(t){return Ki(t,512)},$n.flow=el,$n.flowRight=nl,$n.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},$n.functions=function(t){return null==t?[]:wr(t,Os(t))},$n.functionsIn=function(t){return null==t?[]:wr(t,As(t))},$n.groupBy=_a,$n.initial=function(t){return(null==t?0:t.length)?ri(t,0,-1):[]},$n.intersection=Xo,$n.intersectionBy=qo,$n.intersectionWith=Yo,$n.invert=Ts,$n.invertBy=Is,$n.invokeMap=ba,$n.iteratee=il,$n.keyBy=wa,$n.keys=Os,$n.keysIn=As,$n.map=Sa,$n.mapKeys=function(t,e){var n={};return e=lo(e,3),_r(t,(function(t,r,i){or(n,e(t,r,i),t)})),n},$n.mapValues=function(t,e){var n={};return e=lo(e,3),_r(t,(function(t,r,i){or(n,r,e(t,r,i))})),n},$n.matches=function(t){return $r(lr(t,1))},$n.matchesProperty=function(t,e){return jr(t,lr(e,1))},$n.memoize=Ra,$n.merge=Ds,$n.mergeWith=Rs,$n.method=ol,$n.methodOf=al,$n.mixin=sl,$n.negate=La,$n.nthArg=function(t){return t=fs(t),Zr((function(e){return Vr(e,t)}))},$n.omit=Ls,$n.omitBy=function(t,e){return Fs(t,La(lo(e)))},$n.once=function(t){return Ta(2,t)},$n.orderBy=function(t,e,n,r){return null==t?[]:(Ha(e)||(e=null==e?[]:[e]),Ha(n=r?i:n)||(n=null==n?[]:[n]),Hr(t,e,n))},$n.over=cl,$n.overArgs=Na,$n.overEvery=ul,$n.overSome=hl,$n.partial=Fa,$n.partialRight=za,$n.partition=Ca,$n.pick=Ns,$n.pickBy=Fs,$n.property=pl,$n.propertyOf=function(t){return function(e){return null==t?i:Sr(t,e)}},$n.pull=Ko,$n.pullAll=Jo,$n.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Wr(t,e,lo(n,2)):t},$n.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Wr(t,e,i,n):t},$n.pullAt=Qo,$n.range=dl,$n.rangeRight=fl,$n.rearg=Ba,$n.reject=function(t,e){return(Ha(t)?Ae:mr)(t,La(lo(e,3)))},$n.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=lo(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Xr(t,i),n},$n.rest=function(t,e){if("function"!=typeof t)throw new It(o);return Zr(t,e=e===i?e:fs(e))},$n.reverse=ta,$n.sampleSize=function(t,e,n){return e=(n?_o(t,e,n):e===i)?1:fs(e),(Ha(t)?Jn:Jr)(t,e)},$n.set=function(t,e,n){return null==t?t:Qr(t,e,n)},$n.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Qr(t,e,n,r)},$n.shuffle=function(t){return(Ha(t)?Qn:ni)(t)},$n.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&_o(t,e,n)?(e=0,n=r):(e=null==e?0:fs(e),n=n===i?r:fs(n)),ri(t,e,n)):[]},$n.sortBy=Ea,$n.sortedUniq=function(t){return t&&t.length?si(t):[]},$n.sortedUniqBy=function(t,e){return t&&t.length?si(t,lo(e,2)):[]},$n.split=function(t,e,n){return n&&"number"!=typeof n&&_o(t,e,n)&&(e=n=i),(n=n===i?m:n>>>0)?(t=vs(t))&&("string"==typeof e||null!=e&&!os(e))&&!(e=ci(e))&&ln(t)?bi(gn(t),0,n):t.split(e,n):[]},$n.spread=function(t,e){if("function"!=typeof t)throw new It(o);return e=null==e?0:qe(fs(e),0),Zr((function(n){var r=n[e],i=bi(n,0,e);return r&&Ne(i,r),Me(t,this,i)}))},$n.tail=function(t){var e=null==t?0:t.length;return e?ri(t,1,e):[]},$n.take=function(t,e,n){return t&&t.length?ri(t,0,(e=n||e===i?1:fs(e))<0?0:e):[]},$n.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ri(t,(e=r-(e=n||e===i?1:fs(e)))<0?0:e,r):[]},$n.takeRightWhile=function(t,e){return t&&t.length?di(t,lo(e,3),!1,!0):[]},$n.takeWhile=function(t,e){return t&&t.length?di(t,lo(e,3)):[]},$n.tap=function(t,e){return e(t),t},$n.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new It(o);return ts(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Oa(t,e,{leading:r,maxWait:e,trailing:i})},$n.thru=da,$n.toArray=ps,$n.toPairs=zs,$n.toPairsIn=Bs,$n.toPath=function(t){return Ha(t)?Le(t,Fo):ls(t)?[t]:Ii(No(vs(t)))},$n.toPlainObject=ys,$n.transform=function(t,e,n){var r=Ha(t),i=r||qa(t)||cs(t);if(e=lo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:ts(t)&&Ka(o)?jn(Wt(t)):{}}return(i?Ie:_r)(t,(function(t,r,i){return e(n,t,r,i)})),n},$n.unary=function(t){return Ma(t,1)},$n.union=ea,$n.unionBy=na,$n.unionWith=ra,$n.uniq=function(t){return t&&t.length?ui(t):[]},$n.uniqBy=function(t,e){return t&&t.length?ui(t,lo(e,2)):[]},$n.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?ui(t,i,e):[]},$n.unset=function(t,e){return null==t||hi(t,e)},$n.unzip=ia,$n.unzipWith=oa,$n.update=function(t,e,n){return null==t?t:pi(t,e,vi(n))},$n.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:pi(t,e,vi(n),r)},$n.values=$s,$n.valuesIn=function(t){return null==t?[]:tn(t,As(t))},$n.without=aa,$n.words=Ks,$n.wrap=function(t,e){return Fa(vi(e),t)},$n.xor=sa,$n.xorBy=la,$n.xorWith=ca,$n.zip=ua,$n.zipObject=function(t,e){return mi(t||[],e||[],er)},$n.zipObjectDeep=function(t,e){return mi(t||[],e||[],Qr)},$n.zipWith=ha,$n.entries=zs,$n.entriesIn=Bs,$n.extend=_s,$n.extendWith=bs,sl($n,$n),$n.add=yl,$n.attempt=Js,$n.camelCase=js,$n.capitalize=Us,$n.ceil=vl,$n.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=ms(n))===n?n:0),e!==i&&(e=(e=ms(e))===e?e:0),sr(ms(t),e,n)},$n.clone=function(t){return lr(t,4)},$n.cloneDeep=function(t){return lr(t,5)},$n.cloneDeepWith=function(t,e){return lr(t,5,e="function"==typeof e?e:i)},$n.cloneWith=function(t,e){return lr(t,4,e="function"==typeof e?e:i)},$n.conformsTo=function(t,e){return null==e||cr(t,e,Os(e))},$n.deburr=Vs,$n.defaultTo=function(t,e){return null==t||t!==t?e:t},$n.divide=xl,$n.endsWith=function(t,e,n){t=vs(t),e=ci(e);var r=t.length,o=n=n===i?r:sr(fs(n),0,r);return(n-=e.length)>=0&&t.slice(n,o)==e},$n.eq=$a,$n.escape=function(t){return(t=vs(t))&&K.test(t)?t.replace(Y,an):t},$n.escapeRegExp=function(t){return(t=vs(t))&&ot.test(t)?t.replace(it,"\\$&"):t},$n.every=function(t,e,n){var r=Ha(t)?Oe:fr;return n&&_o(t,e,n)&&(e=i),r(t,lo(e,3))},$n.find=ma,$n.findIndex=Vo,$n.findKey=function(t,e){return je(t,lo(e,3),_r)},$n.findLast=ya,$n.findLastIndex=Ho,$n.findLastKey=function(t,e){return je(t,lo(e,3),br)},$n.floor=_l,$n.forEach=va,$n.forEachRight=xa,$n.forIn=function(t,e){return null==t?t:vr(t,lo(e,3),As)},$n.forInRight=function(t,e){return null==t?t:xr(t,lo(e,3),As)},$n.forOwn=function(t,e){return t&&_r(t,lo(e,3))},$n.forOwnRight=function(t,e){return t&&br(t,lo(e,3))},$n.get=ks,$n.gt=ja,$n.gte=Ua,$n.has=function(t,e){return null!=t&&mo(t,e,Mr)},$n.hasIn=Ms,$n.head=Wo,$n.identity=rl,$n.includes=function(t,e,n,r){t=Wa(t)?t:$s(t),n=n&&!r?fs(n):0;var i=t.length;return n<0&&(n=qe(i+n,0)),ss(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Ve(t,e,n)>-1},$n.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:fs(n);return i<0&&(i=qe(r+i,0)),Ve(t,e,i)},$n.inRange=function(t,e,n){return e=ds(e),n===i?(n=e,e=0):n=ds(n),function(t,e,n){return t>=xn(e,n)&&t<qe(e,n)}(t=ms(t),e,n)},$n.invoke=Ps,$n.isArguments=Va,$n.isArray=Ha,$n.isArrayBuffer=Ga,$n.isArrayLike=Wa,$n.isArrayLikeObject=Xa,$n.isBoolean=function(t){return!0===t||!1===t||es(t)&&Er(t)==_},$n.isBuffer=qa,$n.isDate=Ya,$n.isElement=function(t){return es(t)&&1===t.nodeType&&!is(t)},$n.isEmpty=function(t){if(null==t)return!0;if(Wa(t)&&(Ha(t)||"string"==typeof t||"function"==typeof t.splice||qa(t)||cs(t)||Va(t)))return!t.length;var e=go(t);if(e==E||e==P)return!t.size;if(Co(t))return!Nr(t).length;for(var n in t)if(Lt.call(t,n))return!1;return!0},$n.isEqual=function(t,e){return Ar(t,e)},$n.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?Ar(t,e,i,n):!!r},$n.isError=Za,$n.isFinite=function(t){return"number"==typeof t&&xe(t)},$n.isFunction=Ka,$n.isInteger=Ja,$n.isLength=Qa,$n.isMap=ns,$n.isMatch=function(t,e){return t===e||Dr(t,e,uo(e))},$n.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,Dr(t,e,uo(e),n)},$n.isNaN=function(t){return rs(t)&&t!=+t},$n.isNative=function(t){if(So(t))throw new st("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Rr(t)},$n.isNil=function(t){return null==t},$n.isNull=function(t){return null===t},$n.isNumber=rs,$n.isObject=ts,$n.isObjectLike=es,$n.isPlainObject=is,$n.isRegExp=os,$n.isSafeInteger=function(t){return Ja(t)&&t>=-9007199254740991&&t<=f},$n.isSet=as,$n.isString=ss,$n.isSymbol=ls,$n.isTypedArray=cs,$n.isUndefined=function(t){return t===i},$n.isWeakMap=function(t){return es(t)&&go(t)==D},$n.isWeakSet=function(t){return es(t)&&"[object WeakSet]"==Er(t)},$n.join=function(t,e){return null==t?"":_e.call(t,e)},$n.kebabCase=Hs,$n.last=Zo,$n.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=fs(n))<0?qe(r+o,0):xn(o,r-1)),e===e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):Ue(t,Ge,o,!0)},$n.lowerCase=Gs,$n.lowerFirst=Ws,$n.lt=us,$n.lte=hs,$n.max=function(t){return t&&t.length?gr(t,rl,kr):i},$n.maxBy=function(t,e){return t&&t.length?gr(t,lo(e,2),kr):i},$n.mean=function(t){return We(t,rl)},$n.meanBy=function(t,e){return We(t,lo(e,2))},$n.min=function(t){return t&&t.length?gr(t,rl,zr):i},$n.minBy=function(t,e){return t&&t.length?gr(t,lo(e,2),zr):i},$n.stubArray=gl,$n.stubFalse=ml,$n.stubObject=function(){return{}},$n.stubString=function(){return""},$n.stubTrue=function(){return!0},$n.multiply=bl,$n.nth=function(t,e){return t&&t.length?Vr(t,fs(e)):i},$n.noConflict=function(){return ge._===this&&(ge._=$t),this},$n.noop=ll,$n.now=ka,$n.pad=function(t,e,n){t=vs(t);var r=(e=fs(e))?fn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Hi(fe(i),n)+t+Hi(de(i),n)},$n.padEnd=function(t,e,n){t=vs(t);var r=(e=fs(e))?fn(t):0;return e&&r<e?t+Hi(e-r,n):t},$n.padStart=function(t,e,n){t=vs(t);var r=(e=fs(e))?fn(t):0;return e&&r<e?Hi(e-r,n)+t:t},$n.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),bn(vs(t).replace(at,""),e||0)},$n.random=function(t,e,n){if(n&&"boolean"!=typeof n&&_o(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=ds(t),e===i?(e=t,t=0):e=ds(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=wn();return xn(t+o*(e-t+he("1e-"+((o+"").length-1))),e)}return qr(t,e)},$n.reduce=function(t,e,n){var r=Ha(t)?Fe:Ye,i=arguments.length<3;return r(t,lo(e,4),n,i,pr)},$n.reduceRight=function(t,e,n){var r=Ha(t)?ze:Ye,i=arguments.length<3;return r(t,lo(e,4),n,i,dr)},$n.repeat=function(t,e,n){return e=(n?_o(t,e,n):e===i)?1:fs(e),Yr(vs(t),e)},$n.replace=function(){var t=arguments,e=vs(t[0]);return t.length<3?e:e.replace(t[1],t[2])},$n.result=function(t,e,n){var r=-1,o=(e=xi(e,t)).length;for(o||(o=1,t=i);++r<o;){var a=null==t?i:t[Fo(e[r])];a===i&&(r=o,a=n),t=Ka(a)?a.call(t):a}return t},$n.round=wl,$n.runInContext=t,$n.sample=function(t){return(Ha(t)?Kn:Kr)(t)},$n.size=function(t){if(null==t)return 0;if(Wa(t))return ss(t)?fn(t):t.length;var e=go(t);return e==E||e==P?t.size:Nr(t).length},$n.snakeCase=Xs,$n.some=function(t,e,n){var r=Ha(t)?Be:ii;return n&&_o(t,e,n)&&(e=i),r(t,lo(e,3))},$n.sortedIndex=function(t,e){return oi(t,e)},$n.sortedIndexBy=function(t,e,n){return ai(t,e,lo(n,2))},$n.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=oi(t,e);if(r<n&&$a(t[r],e))return r}return-1},$n.sortedLastIndex=function(t,e){return oi(t,e,!0)},$n.sortedLastIndexBy=function(t,e,n){return ai(t,e,lo(n,2),!0)},$n.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=oi(t,e,!0)-1;if($a(t[n],e))return n}return-1},$n.startCase=qs,$n.startsWith=function(t,e,n){return t=vs(t),n=null==n?0:sr(fs(n),0,t.length),e=ci(e),t.slice(n,n+e.length)==e},$n.subtract=Sl,$n.sum=function(t){return t&&t.length?Ze(t,rl):0},$n.sumBy=function(t,e){return t&&t.length?Ze(t,lo(e,2)):0},$n.template=function(t,e,n){var r=$n.templateSettings;n&&_o(t,e,n)&&(e=i),t=vs(t),e=bs({},e,r,Ji);var o,a,s=bs({},e.imports,r.imports,Ji),l=Os(s),c=tn(s,l),u=0,h=e.interpolate||wt,p="__p += '",d=Mt((e.escape||wt).source+"|"+h.source+"|"+(h===tt?ft:wt).source+"|"+(e.evaluate||wt).source+"|$","g"),f="//# sourceURL="+(Lt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++se+"]")+"\n";t.replace(d,(function(e,n,r,i,s,l){return r||(r=i),p+=t.slice(u,l).replace(St,sn),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),s&&(a=!0,p+="';\n"+s+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=l+e.length,e})),p+="';\n";var g=Lt.call(e,"variable")&&e.variable;if(g){if(pt.test(g))throw new st("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(a?p.replace(G,""):p).replace(W,"$1").replace(X,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m=Js((function(){return Ct(l,f+"return "+p).apply(i,c)}));if(m.source=p,Za(m))throw m;return m},$n.times=function(t,e){if((t=fs(t))<1||t>f)return[];var n=m,r=xn(t,m);e=lo(e),t-=m;for(var i=Ke(r,e);++n<t;)e(n);return i},$n.toFinite=ds,$n.toInteger=fs,$n.toLength=gs,$n.toLower=function(t){return vs(t).toLowerCase()},$n.toNumber=ms,$n.toSafeInteger=function(t){return t?sr(fs(t),-9007199254740991,f):0===t?t:0},$n.toString=vs,$n.toUpper=function(t){return vs(t).toUpperCase()},$n.trim=function(t,e,n){if((t=vs(t))&&(n||e===i))return Je(t);if(!t||!(e=ci(e)))return t;var r=gn(t),o=gn(e);return bi(r,nn(r,o),rn(r,o)+1).join("")},$n.trimEnd=function(t,e,n){if((t=vs(t))&&(n||e===i))return t.slice(0,mn(t)+1);if(!t||!(e=ci(e)))return t;var r=gn(t);return bi(r,0,rn(r,gn(e))+1).join("")},$n.trimStart=function(t,e,n){if((t=vs(t))&&(n||e===i))return t.replace(at,"");if(!t||!(e=ci(e)))return t;var r=gn(t);return bi(r,nn(r,gn(e))).join("")},$n.truncate=function(t,e){var n=30,r="...";if(ts(e)){var o="separator"in e?e.separator:o;n="length"in e?fs(e.length):n,r="omission"in e?ci(e.omission):r}var a=(t=vs(t)).length;if(ln(t)){var s=gn(t);a=s.length}if(n>=a)return t;var l=n-fn(r);if(l<1)return r;var c=s?bi(s,0,l).join(""):t.slice(0,l);if(o===i)return c+r;if(s&&(l+=c.length-l),os(o)){if(t.slice(l).search(o)){var u,h=c;for(o.global||(o=Mt(o.source,vs(gt.exec(o))+"g")),o.lastIndex=0;u=o.exec(h);)var p=u.index;c=c.slice(0,p===i?l:p)}}else if(t.indexOf(ci(o),l)!=l){var d=c.lastIndexOf(o);d>-1&&(c=c.slice(0,d))}return c+r},$n.unescape=function(t){return(t=vs(t))&&Z.test(t)?t.replace(q,yn):t},$n.uniqueId=function(t){var e=++Nt;return vs(t)+e},$n.upperCase=Ys,$n.upperFirst=Zs,$n.each=va,$n.eachRight=xa,$n.first=Wo,sl($n,function(){var t={};return _r($n,(function(e,n){Lt.call($n.prototype,n)||(t[n]=e)})),t}(),{chain:!1}),$n.VERSION="4.17.21",Ie(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){$n[t].placeholder=$n})),Ie(["drop","take"],(function(t,e){Hn.prototype[t]=function(n){n=n===i?1:qe(fs(n),0);var r=this.__filtered__&&!e?new Hn(this):this.clone();return r.__filtered__?r.__takeCount__=xn(n,r.__takeCount__):r.__views__.push({size:xn(n,m),type:t+(r.__dir__<0?"Right":"")}),r},Hn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Ie(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Hn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:lo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),Ie(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Hn.prototype[t]=function(){return this[n](1).value()[0]}})),Ie(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Hn.prototype[t]=function(){return this.__filtered__?new Hn(this):this[n](1)}})),Hn.prototype.compact=function(){return this.filter(rl)},Hn.prototype.find=function(t){return this.filter(t).head()},Hn.prototype.findLast=function(t){return this.reverse().find(t)},Hn.prototype.invokeMap=Zr((function(t,e){return"function"==typeof t?new Hn(this):this.map((function(n){return Pr(n,t,e)}))})),Hn.prototype.reject=function(t){return this.filter(La(lo(t)))},Hn.prototype.slice=function(t,e){t=fs(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Hn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=fs(e))<0?n.dropRight(-e):n.take(e-t)),n)},Hn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Hn.prototype.toArray=function(){return this.take(m)},_r(Hn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),o=$n[r?"take"+("last"==e?"Right":""):e],a=r||/^find/.test(e);o&&($n.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,l=e instanceof Hn,c=s[0],u=l||Ha(e),h=function(t){var e=o.apply($n,Ne([t],s));return r&&p?e[0]:e};u&&n&&"function"==typeof c&&1!=c.length&&(l=u=!1);var p=this.__chain__,d=!!this.__actions__.length,f=a&&!p,g=l&&!d;if(!a&&u){e=g?e:new Hn(this);var m=t.apply(e,s);return m.__actions__.push({func:da,args:[h],thisArg:i}),new Vn(m,p)}return f&&g?t.apply(this,s):(m=this.thru(h),f?r?m.value()[0]:m.value():m)})})),Ie(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Pt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);$n.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Ha(i)?i:[],t)}return this[n]((function(n){return e.apply(Ha(n)?n:[],t)}))}})),_r(Hn.prototype,(function(t,e){var n=$n[e];if(n){var r=n.name+"";Lt.call(On,r)||(On[r]=[]),On[r].push({name:e,func:n})}})),On[$i(i,2).name]=[{name:"wrapper",func:i}],Hn.prototype.clone=function(){var t=new Hn(this.__wrapped__);return t.__actions__=Ii(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ii(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ii(this.__views__),t},Hn.prototype.reverse=function(){if(this.__filtered__){var t=new Hn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Hn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ha(t),r=e<0,i=n?t.length:0,o=function(t,e,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=xn(e,t+a);break;case"takeRight":t=qe(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,l=s-a,c=r?s:a-1,u=this.__iteratees__,h=u.length,p=0,d=xn(l,this.__takeCount__);if(!n||!r&&i==l&&d==l)return fi(t,this.__actions__);var f=[];t:for(;l--&&p<d;){for(var g=-1,m=t[c+=e];++g<h;){var y=u[g],v=y.iteratee,x=y.type,_=v(m);if(2==x)m=_;else if(!_){if(1==x)continue t;break t}}f[p++]=m}return f},$n.prototype.at=fa,$n.prototype.chain=function(){return pa(this)},$n.prototype.commit=function(){return new Vn(this.value(),this.__chain__)},$n.prototype.next=function(){this.__values__===i&&(this.__values__=ps(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},$n.prototype.plant=function(t){for(var e,n=this;n instanceof Un;){var r=Bo(n);r.__index__=0,r.__values__=i,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e},$n.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Hn){var e=t;return this.__actions__.length&&(e=new Hn(this)),(e=e.reverse()).__actions__.push({func:da,args:[ta],thisArg:i}),new Vn(e,this.__chain__)}return this.thru(ta)},$n.prototype.toJSON=$n.prototype.valueOf=$n.prototype.value=function(){return fi(this.__wrapped__,this.__actions__)},$n.prototype.first=$n.prototype.head,Kt&&($n.prototype[Kt]=function(){return this}),$n}();ge._=vn,(r=function(){return vn}.call(e,n,e,t))===i||(t.exports=r)}.call(this)},5483:function(t){t.exports=function(){"use strict";var t,e,n;function r(r,i){if(t)if(e){var o="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk); self.onerror = null;",a={};t(a),n=i(a),"undefined"!==typeof window&&window&&window.URL&&window.URL.createObjectURL&&(n.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else e=i;else t=i}return r(["exports"],(function(t){var e="undefined"!=typeof self?self:{},n="2.15.0";let r;const i={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==r){const t=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{r=null!={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.API_URL_REGEX?new RegExp({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.API_URL_REGEX):t}catch(e){r=t}}return r},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!i.API_URL)return null;try{const t=new URL(i.API_URL);return"api.mapbox.cn"===t.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===t.hostname?"https://events.mapbox.com/events/v2":null}catch(t){return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},o={supported:!1,testSupport:function(t){!l&&s&&(c?u(t):a=t)}};let a,s,l=!1,c=!1;function u(t){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,s),t.isContextLost())return;o.supported=!0}catch(t){}t.deleteTexture(e),l=!0}e.document&&(s=e.document.createElement("img"),s.onload=function(){a&&u(a),a=null,c=!0},s.onerror=function(){l=!0,a=null},s.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const h="01";function p(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var d=f;function f(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=n,this.p2y=r}f.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var n=t,r=0;r<8;r++){var i=this.sampleCurveX(n)-t;if(Math.abs(i)<e)return n;var o=this.sampleCurveDerivativeX(n);if(Math.abs(o)<1e-6)break;n-=i/o}var a=0,s=1;for(n=t,r=0;r<20&&(i=this.sampleCurveX(n),!(Math.abs(i-t)<e));r++)t>i?a=n:s=n,n=.5*(s-a)+a;return n},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};var g=p(d),m=y;function y(t,e){this.x=t,this.y=e}y.prototype={clone:function(){return new y(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=r,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-r*(this.y-e.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},y.convert=function(t){return t instanceof y?t:Array.isArray(t)?new y(t[0],t[1]):t};var v=p(m);const x=Math.PI/180,_=180/Math.PI;function b(t){return t*x}function w(t){return t*_}const S=[[0,0],[1,0],[1,1],[0,1]];function C(t){if(t<=0)return 0;if(t>=1)return 1;const e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function E(t,e,n,r){const i=new g(t,e,n,r);return function(t){return i.solve(t)}}const k=E(.25,.1,.25,1);function M(t,e,n){return Math.min(n,Math.max(e,t))}function T(t,e,n){return(n=M((n-t)/(e-t),0,1))*n*(3-2*n)}function I(t,e,n){const r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i}function P(t,e,n){if(!t.length)return n(null,[]);let r=t.length;const i=new Array(t.length);let o=null;t.forEach(((t,a)=>{e(t,((t,e)=>{t&&(o=t),i[a]=e,0==--r&&n(o,i)}))}))}function O(t){const e=[];for(const n in t)e.push(t[n]);return e}function A(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(const i of n)for(const e in i)t[e]=i[e];return t}let D=1;function R(){return D++}function L(){return function t(e){return e?(e^Math.random()*(16>>e/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function N(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function F(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function z(t,e){t.forEach((t=>{e[t]&&(e[t]=e[t].bind(e))}))}function B(t,e){return-1!==t.indexOf(e,t.length-e.length)}function $(t,e,n){const r={};for(const i in t)r[i]=e.call(n||this,t[i],i,t);return r}function j(t,e,n){const r={};for(const i in t)e.call(n||this,t[i],i,t)&&(r[i]=t[i]);return r}function U(t){return Array.isArray(t)?t.map(U):"object"==typeof t&&t?$(t,U):t}const V={};function H(t){V[t]||("undefined"!=typeof console&&console.warn(t),V[t]=!0)}function G(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function W(t){let e=0;for(let n,r,i=0,o=t.length,a=o-1;i<o;a=i++)n=t[i],r=t[a],e+=(r.x-n.x)*(n.y+r.y);return e}function X(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function q(t){const e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((t,n,r,i)=>{const o=r||i;return e[n]=!o||o.toLowerCase(),""})),e["max-age"]){const t=parseInt(e["max-age"],10);isNaN(t)?delete e["max-age"]:e["max-age"]=t}return e}let Y=null;function Z(t){if(null==Y){const e=t.navigator?t.navigator.userAgent:null;Y=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return Y}function K(t){try{const n=e[t];return n.setItem("_mapbox_test_",1),n.removeItem("_mapbox_test_"),!0}catch(t){return!1}}function J(t,e){return[t[4*e],t[4*e+1],t[4*e+2],t[4*e+3]]}const Q="mapbox-tiles";let tt,et,nt=500,rt=50;function it(){try{return e.caches}catch(t){}}function ot(){it()&&!tt&&(tt=e.caches.open(Q))}function at(t){const e=t.indexOf("?");if(e<0)return t;const n=function(t){const e=t.indexOf("?");return e>0?t.slice(e+1).split("&"):[]}(t),r=n.filter((t=>{const e=t.split("=");return"language"===e[0]||"worldview"===e[0]}));return r.length?`${t.slice(0,e)}?${r.join("&")}`:t.slice(0,e)}let st=1/0;const lt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(lt);class ct extends Error{constructor(t,e,n){401===e&&_t(n)&&(t+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(t),this.status=e,this.url=n}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const ut=X()?()=>self.worker&&self.worker.referrer:()=>("blob:"===e.location.protocol?e.parent:e).location.href,ht=function(t,n){if(!(/^file:/.test(r=t.url)||/^file:/.test(ut())&&!/^\w+:/.test(r))){if(e.fetch&&e.Request&&e.AbortController&&e.Request.prototype.hasOwnProperty("signal"))return function(t,n){const r=new e.AbortController,i=new e.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:ut(),referrerPolicy:t.referrerPolicy,signal:r.signal});let o=!1,a=!1;const s=(l=i.url).indexOf("sku=")>0&&_t(l);var l;"json"===t.type&&i.headers.set("Accept","application/json");const c=(r,o,l)=>{if(a)return;if(r&&"SecurityError"!==r.message&&H(r.toString()),o&&l)return u(o);const c=Date.now();e.fetch(i).then((e=>{if(e.ok){const t=s?e.clone():null;return u(e,t,c)}return n(new ct(e.statusText,e.status,t.url))})).catch((e=>{"AbortError"!==e.name&&n(new Error(`${e.message} ${t.url}`))}))},u=(r,s,l)=>{("arrayBuffer"===t.type?r.arrayBuffer():"json"===t.type?r.json():r.text()).then((t=>{a||(s&&l&&function(t,n,r){if(ot(),!tt)return;const i={status:n.status,statusText:n.statusText,headers:new e.Headers};n.headers.forEach(((t,e)=>i.headers.set(e,t)));const o=q(n.headers.get("Cache-Control")||"");if(o["no-store"])return;o["max-age"]&&i.headers.set("Expires",new Date(r+1e3*o["max-age"]).toUTCString());const a=i.headers.get("Expires");a&&(new Date(a).getTime()-r<42e4||function(t,e){if(void 0===et)try{new Response(new ReadableStream),et=!0}catch(t){et=!1}et?e(t.body):t.blob().then(e)}(n,(n=>{const r=new e.Response(n,i);ot(),tt&&tt.then((e=>e.put(at(t.url),r))).catch((t=>H(t.message)))})))}(i,s,l),o=!0,n(null,t,r.headers.get("Cache-Control"),r.headers.get("Expires")))})).catch((t=>{a||n(new Error(t.message))}))};return s?function(t,e){if(ot(),!tt)return e(null);const n=at(t.url);tt.then((t=>{t.match(n).then((r=>{const i=function(t){if(!t)return!1;const e=new Date(t.headers.get("Expires")||0),n=q(t.headers.get("Cache-Control")||"");return e>Date.now()&&!n["no-cache"]}(r);t.delete(n),i&&t.put(n,r.clone()),e(null,r,i)})).catch(e)})).catch(e)}(i,c):c(null,null),{cancel:()=>{a=!0,o||r.abort()}}}(t,n);if(X()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,n,void 0,!0)}var r;return function(t,n){const r=new e.XMLHttpRequest;r.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(r.responseType="arraybuffer");for(const e in t.headers)r.setRequestHeader(e,t.headers[e]);return"json"===t.type&&(r.responseType="text",r.setRequestHeader("Accept","application/json")),r.withCredentials="include"===t.credentials,r.onerror=()=>{n(new Error(r.statusText))},r.onload=()=>{if((r.status>=200&&r.status<300||0===r.status)&&null!==r.response){let e=r.response;if("json"===t.type)try{e=JSON.parse(r.response)}catch(t){return n(t)}n(null,e,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"))}else n(new ct(r.statusText,r.status,t.url))},r.send(t.body),{cancel:()=>r.abort()}}(t,n)},pt=function(t,e){return ht(A(t,{type:"arrayBuffer"}),e)};function dt(t){const n=e.document.createElement("a");return n.href=t,n.protocol===e.document.location.protocol&&n.host===e.document.location.host}const ft="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let gt,mt;gt=[],mt=0;const yt=function(t,n){if(o.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),mt>=i.MAX_PARALLEL_IMAGE_REQUESTS){const e={requestParameters:t,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return gt.push(e),e}mt++;let r=!1;const a=()=>{if(!r)for(r=!0,mt--;gt.length&&mt<i.MAX_PARALLEL_IMAGE_REQUESTS;){const t=gt.shift(),{requestParameters:e,callback:n,cancelled:r}=t;r||(t.cancel=yt(e,n).cancel)}},s=pt(t,((t,r,i,o)=>{a(),t?n(t):r&&(e.createImageBitmap?function(t,n){const r=new e.Blob([new Uint8Array(t)],{type:"image/png"});e.createImageBitmap(r).then((t=>{n(null,t)})).catch((t=>{n(new Error(`Could not load image because of ${t.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))}(r,((t,e)=>n(t,e,i,o))):function(t,n){const r=new e.Image,i=e.URL;r.onload=()=>{n(null,r),i.revokeObjectURL(r.src),r.onload=null,e.requestAnimationFrame((()=>{r.src=ft}))},r.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const o=new e.Blob([new Uint8Array(t)],{type:"image/png"});r.src=t.byteLength?i.createObjectURL(o):ft}(r,((t,e)=>n(t,e,i,o))))}));return{cancel:()=>{s.cancel(),a()}}},vt="NO_ACCESS_TOKEN";function xt(t){return 0===t.indexOf("mapbox:")}function _t(t){return i.API_URL_REGEX.test(t)}function bt(t){return i.API_CDN_URL_REGEX.test(t)}function wt(t){return i.API_STYLE_REGEX.test(t)&&!St(t)}function St(t){return i.API_SPRITE_REGEX.test(t)}const Ct=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Et(t){const e=t.match(Ct);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function kt(t){const e=t.params.length?`?${t.params.join("&")}`:"";return`${t.protocol}://${t.authority}${t.path}${e}`}const Mt="mapbox.eventData";function Tt(t){if(!t)return null;const n=t.split(".");if(!n||3!==n.length)return null;try{return JSON.parse(decodeURIComponent(e.atob(n[1]).split("").map((t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2))).join("")))}catch(t){return null}}class It{constructor(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(t){const n=Tt(i.ACCESS_TOKEN);let r="";return r=n&&n.u?e.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,((t,e)=>String.fromCharCode(Number("0x"+e))))):i.ACCESS_TOKEN||"",t?`${Mt}.${t}:${r}`:`${Mt}:${r}`}fetchEventData(){const t=K("localStorage"),n=this.getStorageKey(),r=this.getStorageKey("uuid");if(t)try{const t=e.localStorage.getItem(n);t&&(this.eventData=JSON.parse(t));const i=e.localStorage.getItem(r);i&&(this.anonId=i)}catch(t){H("Unable to read from LocalStorage")}}saveEventData(){const t=K("localStorage"),n=this.getStorageKey(),r=this.getStorageKey("uuid");if(t)try{e.localStorage.setItem(r,this.anonId),Object.keys(this.eventData).length>=1&&e.localStorage.setItem(n,JSON.stringify(this.eventData))}catch(t){H("Unable to write to LocalStorage")}}processRequests(t){}postEvent(t,e,n,r){if(!i.EVENTS_URL)return;const o=Et(i.EVENTS_URL);o.params.push(`access_token=${r||i.ACCESS_TOKEN||""}`);const a={event:this.type,created:new Date(t).toISOString()},s=e?A(a,e):a,l={url:kt(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=function(t,e){return ht(A(t,{method:"POST"}),e)}(l,(t=>{this.pendingRequest=null,n(t),this.saveEventData(),this.processRequests(r)}))}queueRequest(t,e){this.queue.push(t),this.processRequests(e)}}const Pt=new class extends It{constructor(t){super("appUserTurnstile"),this._customAccessToken=t}postTurnstileEvent(t,e){i.EVENTS_URL&&i.ACCESS_TOKEN&&Array.isArray(t)&&t.some((t=>xt(t)||_t(t)))&&this.queueRequest(Date.now(),e)}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=Tt(i.ACCESS_TOKEN),r=e?e.u:i.ACCESS_TOKEN;let o=r!==this.eventData.tokenU;F(this.anonId)||(this.anonId=L(),o=!0);const a=this.queue.shift();if(this.eventData.lastSuccess){const t=new Date(this.eventData.lastSuccess),e=new Date(a),n=(a-this.eventData.lastSuccess)/864e5;o=o||n>=1||n<-1||t.getDate()!==e.getDate()}else o=!0;o?this.postEvent(a,{sdkIdentifier:"mapbox-gl-js",sdkVersion:n,skuId:h,"enabled.telemetry":!1,userId:this.anonId},(t=>{t||(this.eventData.lastSuccess=a,this.eventData.tokenU=r)}),t):this.processRequests()}},Ot=Pt.postTurnstileEvent.bind(Pt),At=new class extends It{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(t,e,n,r){this.skuToken=e,this.errorCb=r,i.EVENTS_URL&&(n||i.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},n):this.errorCb(new Error(vt)))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:r}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),F(this.anonId)||(this.anonId=L()),this.postEvent(r,{sdkIdentifier:"mapbox-gl-js",sdkVersion:n,skuId:h,skuToken:this.skuToken,userId:this.anonId},(t=>{t?this.errorCb(t):e&&(this.success[e]=!0)}),t))}},Dt=At.postMapLoadEvent.bind(At),Rt=new class extends It{constructor(){super("gljs.performance")}postPerformanceEvent(t,e){i.EVENTS_URL&&(t||i.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:e},t)}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:r,performanceData:i}=this.queue.shift(),o=function(t){const r=e.performance.getEntriesByType("resource"),i=e.performance.getEntriesByType("mark"),o=function(t){const e={};if(t)for(const n in t)if("other"!==n)for(const r of t[n]){const t=`${n}ResolveRangeMin`,i=`${n}ResolveRangeMax`,o=`${n}RequestCount`,a=`${n}RequestCachedCount`;e[t]=Math.min(e[t]||1/0,r.startTime),e[i]=Math.max(e[i]||-1/0,r.responseEnd);const s=t=>{void 0===e[t]&&(e[t]=0),++e[t]};void 0!==r.transferSize&&0===r.transferSize&&s(a),s(o)}return e}(function(t,e){const n={};if(t)for(const r of t){const t=e(r);void 0===n[t]&&(n[t]=[]),n[t].push(r)}return n}(r,jt)),a=e.devicePixelRatio,s=e.navigator.connection||e.navigator.mozConnection||e.navigator.webkitConnection,l={counters:[],metadata:[],attributes:[]},c=(t,e,n)=>{null!=n&&t.push({name:e,value:n.toString()})};for(const e in o)c(l.counters,e,o[e]);if(t.interactionRange[0]!==1/0&&t.interactionRange[1]!==-1/0&&(c(l.counters,"interactionRangeMin",t.interactionRange[0]),c(l.counters,"interactionRangeMax",t.interactionRange[1])),i)for(const e of Object.keys(Bt)){const t=Bt[e],n=i.find((e=>e.name===t));n&&c(l.counters,t,n.startTime)}return c(l.counters,"visibilityHidden",t.visibilityHidden),c(l.attributes,"style",function(t){if(t)for(const e of t){const t=e.name.split("?")[0];if(wt(t)){const e=t.split("/").slice(-2);if(2===e.length)return`mapbox://styles/${e[0]}/${e[1]}`}}}(r)),c(l.attributes,"terrainEnabled",t.terrainEnabled?"true":"false"),c(l.attributes,"fogEnabled",t.fogEnabled?"true":"false"),c(l.attributes,"projection",t.projection),c(l.attributes,"zoom",t.zoom),c(l.metadata,"devicePixelRatio",a),c(l.metadata,"connectionEffectiveType",s?s.effectiveType:void 0),c(l.metadata,"navigatorUserAgent",e.navigator.userAgent),c(l.metadata,"screenWidth",e.screen.width),c(l.metadata,"screenHeight",e.screen.height),c(l.metadata,"windowWidth",e.innerWidth),c(l.metadata,"windowHeight",e.innerHeight),c(l.metadata,"mapWidth",t.width/a),c(l.metadata,"mapHeight",t.height/a),c(l.metadata,"webglRenderer",t.renderer),c(l.metadata,"webglVendor",t.vendor),c(l.metadata,"sdkVersion",n),c(l.metadata,"sdkIdentifier","mapbox-gl-js"),l}(i);for(const e of o.metadata);for(const e of o.counters);for(const e of o.attributes);this.postEvent(r,o,(()=>{}),t)}},Lt=Rt.postPerformanceEvent.bind(Rt),Nt=new class extends It{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(t,e,n,r){if(!i.API_URL||!i.SESSION_PATH)return;const o=Et(i.API_URL+i.SESSION_PATH);o.params.push(`sku=${e||""}`),o.params.push(`access_token=${r||i.ACCESS_TOKEN||""}`);const a={url:kt(o),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(t,e){return ht(A(t,{method:"GET"}),e)}(a,(t=>{this.pendingRequest=null,n(t),this.saveEventData(),this.processRequests(r)}))}getSessionAPI(t,e,n,r){this.skuToken=e,this.errorCb=r,i.SESSION_PATH&&i.API_URL&&(n||i.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},n):this.errorCb(new Error(vt)))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:n}=this.queue.shift();e&&this.success[e]||this.getSession(n,this.skuToken,(t=>{t?this.errorCb(t):e&&(this.success[e]=!0)}),t)}},Ft=Nt.getSessionAPI.bind(Nt),zt=new Set,Bt={create:"create",load:"load",fullLoad:"fullLoad"},$t={mark(t){e.performance.mark(t)},measure(t,n,r){e.performance.measure(t,n,r)}};function jt(t){const e=t.name.split("?")[0];return bt(e)&&e.includes("mapbox-gl.js")?"javascript":bt(e)&&e.includes("mapbox-gl.css")?"css":function(t){return i.API_FONTS_REGEX.test(t)}(e)?"fontRange":St(e)?"sprite":wt(e)?"style":function(t){return i.API_TILEJSON_REGEX.test(t)}(e)?"tilejson":"other"}const Ut=e.performance;function Vt(t){const e=t?t.url.toString():void 0;return Ut.getEntriesByName(e)}let Ht,Gt,Wt,Xt;const qt={now:()=>void 0!==Wt?Wt:e.performance.now(),setNow(t){Wt=t},restoreNow(){Wt=void 0},frame(t){const n=e.requestAnimationFrame(t);return{cancel:()=>e.cancelAnimationFrame(n)}},getImageData(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{width:r,height:i}=t;Xt||(Xt=e.document.createElement("canvas"));const o=Xt.getContext("2d",{willReadFrequently:!0});if(!o)throw new Error("failed to create canvas 2d context");return(r>Xt.width||i>Xt.height)&&(Xt.width=r,Xt.height=i),o.clearRect(-n,-n,r+2*n,i+2*n),o.drawImage(t,0,0,r,i),o.getImageData(-n,-n,r+2*n,i+2*n)},resolveURL:t=>(Ht||(Ht=e.document.createElement("a")),Ht.href=t,Ht.href),get devicePixelRatio(){return e.devicePixelRatio},get prefersReducedMotion(){return!!e.matchMedia&&(null==Gt&&(Gt=e.matchMedia("(prefers-reduced-motion: reduce)")),Gt.matches)}};function Yt(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function Zt(t,e,n){if(n&&n[t]){const r=n[t].indexOf(e);-1!==r&&n[t].splice(r,1)}}class Kt{constructor(t){A(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.type=t}}class Jt extends Kt{constructor(t){super("error",A({error:t},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}}class Qt{on(t,e){return this._listeners=this._listeners||{},Yt(t,e,this._listeners),this}off(t,e){return Zt(t,e,this._listeners),Zt(t,e,this._oneTimeListeners),this}once(t,e){return e?(this._oneTimeListeners=this._oneTimeListeners||{},Yt(t,e,this._oneTimeListeners),this):new Promise((e=>this.once(t,e)))}fire(t,e){"string"==typeof t&&(t=new Kt(t,e||{}));const n=t.type;if(this.listens(n)){t.target=this;const e=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(const n of e)n.call(this,t);const r=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(const o of r)Zt(n,o,this._oneTimeListeners),o.call(this,t);const i=this._eventedParent;i&&(A(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),i.fire(t))}else t instanceof Jt&&console.error(t.error);return this}listens(t){return!!(this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t))}setEventedParent(t,e){return this._eventedParent=t,this._eventedParentData=e,this}}var te=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function ee(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(const i of n)for(const e in i)t[e]=i[e];return t}function ne(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function re(t){if(Array.isArray(t))return t.map(re);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const n in t)e[n]=re(t[n]);return e}return ne(t)}class ie extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}var oe=ie;class ae{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.parent=t,this.bindings={};for(const[n,r]of e)this.bindings[n]=r}concat(t){return new ae(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}var se=ae;const le={kind:"null"},ce={kind:"number"},ue={kind:"string"},he={kind:"boolean"},pe={kind:"color"},de={kind:"object"},fe={kind:"value"},ge={kind:"collator"},me={kind:"formatted"},ye={kind:"resolvedImage"};function ve(t,e){return{kind:"array",itemType:t,N:e}}function xe(t){if("array"===t.kind){const e=xe(t.itemType);return"number"==typeof t.N?`array<${e}, ${t.N}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}const _e=[le,ce,ue,he,pe,me,de,ve(fe),ye];function be(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!be(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of _e)if(!be(t,e))return null}return`Expected ${xe(t)} but found ${xe(e)} instead.`}function we(t,e){return e.some((e=>e.kind===t.kind))}function Se(t,e){return e.some((e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t))}var Ce,Ee={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ke(t){return(t=Math.round(t))<0?0:t>255?255:t}function Me(t){return ke("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function Te(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function Ie(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{Ce={}.parseCSSColor=function(t){var e,n=t.replace(/ /g,"").toLowerCase();if(n in Ee)return Ee[n].slice();if("#"===n[0])return 4===n.length?(e=parseInt(n.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===n.length&&(e=parseInt(n.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var r=n.indexOf("("),i=n.indexOf(")");if(-1!==r&&i+1===n.length){var o=n.substr(0,r),a=n.substr(r+1,i-(r+1)).split(","),s=1;switch(o){case"rgba":if(4!==a.length)return null;s=Te(a.pop());case"rgb":return 3!==a.length?null:[Me(a[0]),Me(a[1]),Me(a[2]),s];case"hsla":if(4!==a.length)return null;s=Te(a.pop());case"hsl":if(3!==a.length)return null;var l=(parseFloat(a[0])%360+360)%360/360,c=Te(a[1]),u=Te(a[2]),h=u<=.5?u*(c+1):u+c-u*c,p=2*u-h;return[ke(255*Ie(p,h,l+1/3)),ke(255*Ie(p,h,l)),ke(255*Ie(p,h,l-1/3)),s];default:return null}}return null}}catch(t){}class Pe{constructor(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.r=t,this.g=e,this.b=n,this.a=r}static parse(t){if(!t)return;if(t instanceof Pe)return t;if("string"!=typeof t)return;const e=Ce(t);return e?new Pe(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,n,r]=this.toArray();return`rgba(${Math.round(t)},${Math.round(e)},${Math.round(n)},${r})`}toArray(){const{r:t,g:e,b:n,a:r}=this;return 0===r?[0,0,0,0]:[255*t/r,255*e/r,255*n/r,r]}toArray01(){const{r:t,g:e,b:n,a:r}=this;return 0===r?[0,0,0,0]:[t/r,e/r,n/r,r]}toArray01PremultipliedAlpha(){const{r:t,g:e,b:n,a:r}=this;return[t,e,n,r]}}Pe.black=new Pe(0,0,0,1),Pe.white=new Pe(1,1,1,1),Pe.transparent=new Pe(0,0,0,0),Pe.red=new Pe(1,0,0,1),Pe.blue=new Pe(0,0,1,1);var Oe=Pe;class Ae{constructor(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class De{constructor(t,e,n,r,i){this.text=t.normalize?t.normalize():t,this.image=e,this.scale=n,this.fontStack=r,this.textColor=i}}class Re{constructor(t){this.sections=t}static fromString(t){return new Re([new De(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((t=>0!==t.text.length||t.image&&0!==t.image.name.length))}static factory(t){return t instanceof Re?t:Re.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map((t=>t.text)).join("")}serialize(){const t=["format"];for(const e of this.sections){if(e.image){t.push(["image",e.image.name]);continue}t.push(e.text);const n={};e.fontStack&&(n["text-font"]=["literal",e.fontStack.split(",")]),e.scale&&(n["font-scale"]=e.scale),e.textColor&&(n["text-color"]=["rgba"].concat(e.textColor.toArray())),t.push(n)}return t}}class Le{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Le({name:t,available:!1}):null}serialize(){return["image",this.name]}}function Ne(t,e,n,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:`Invalid rgba value [${[t,e,n,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof r?[t,e,n,r]:[t,e,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Fe(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof Oe)return!0;if(t instanceof Ae)return!0;if(t instanceof Re)return!0;if(t instanceof Le)return!0;if(Array.isArray(t)){for(const e of t)if(!Fe(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!Fe(t[e]))return!1;return!0}return!1}function ze(t){if(null===t)return le;if("string"==typeof t)return ue;if("boolean"==typeof t)return he;if("number"==typeof t)return ce;if(t instanceof Oe)return pe;if(t instanceof Ae)return ge;if(t instanceof Re)return me;if(t instanceof Le)return ye;if(Array.isArray(t)){const e=t.length;let n;for(const r of t){const t=ze(r);if(n){if(n===t)continue;n=fe;break}n=t}return ve(n||fe,e)}return de}function Be(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Oe||t instanceof Re||t instanceof Le?t.toString():JSON.stringify(t)}class $e{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Fe(t[1]))return e.error("invalid value");const n=t[1];let r=ze(n);const i=e.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new $e(r,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Oe?["rgba"].concat(this.value.toArray()):this.value instanceof Re?this.value.serialize():this.value}}var je=$e,Ue=class{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}};const Ve={string:ue,number:ce,boolean:he,object:de};class He{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let n,r=1;const i=t[0];if("array"===i){let i,o;if(t.length>2){const n=t[1];if("string"!=typeof n||!(n in Ve)||"object"===n)return e.error('The item type argument of "array" must be one of string, number, boolean',1);i=Ve[n],r++}else i=fe;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],r++}n=ve(i,o)}else n=Ve[i];const o=[];for(;r<t.length;r++){const n=e.parse(t[r],r,fe);if(!n)return null;o.push(n)}return new He(n,o)}evaluate(t){for(let e=0;e<this.args.length;e++){const n=this.args[e].evaluate(t);if(!be(this.type,ze(n)))return n;if(e===this.args.length-1)throw new Ue(`Expected value to be of type ${xe(this.type)}, but found ${xe(ze(n))} instead.`)}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=this.type,e=[t.kind];if("array"===t.kind){const n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);const r=t.N;("number"==typeof r||this.args.length>1)&&e.push(r)}}return e.concat(this.args.map((t=>t.serialize())))}}var Ge=He;class We{constructor(t){this.type=me,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[1];if(!Array.isArray(n)&&"object"==typeof n)return e.error("First argument must be an image or text section.");const r=[];let i=!1;for(let o=1;o<=t.length-1;++o){const n=t[o];if(i&&"object"==typeof n&&!Array.isArray(n)){i=!1;let t=null;if(n["font-scale"]&&(t=e.parse(n["font-scale"],1,ce),!t))return null;let o=null;if(n["text-font"]&&(o=e.parse(n["text-font"],1,ve(ue)),!o))return null;let a=null;if(n["text-color"]&&(a=e.parse(n["text-color"],1,pe),!a))return null;const s=r[r.length-1];s.scale=t,s.font=o,s.textColor=a}else{const n=e.parse(t[o],1,fe);if(!n)return null;const a=n.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,r.push({content:n,scale:null,font:null,textColor:null})}}return new We(r)}evaluate(t){return new Re(this.sections.map((e=>{const n=e.content.evaluate(t);return ze(n)===ye?new De("",n,null,null,null):new De(Be(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const e of this.sections){t.push(e.content.serialize());const n={};e.scale&&(n["font-scale"]=e.scale.serialize()),e.font&&(n["text-font"]=e.font.serialize()),e.textColor&&(n["text-color"]=e.textColor.serialize()),t.push(n)}return t}}class Xe{constructor(t){this.type=ye,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,ue);return n?new Xe(n):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),n=Le.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const qe={"to-boolean":he,"to-color":pe,"to-number":ce,"to-string":ue};class Ye{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[0];if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");const r=qe[n],i=[];for(let o=1;o<t.length;o++){const n=e.parse(t[o],o,fe);if(!n)return null;i.push(n)}return new Ye(r,i)}evaluate(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){let e,n;for(const r of this.args){if(e=r.evaluate(t),n=null,e instanceof Oe)return e;if("string"==typeof e){const n=t.parseColor(e);if(n)return n}else if(Array.isArray(e)&&(n=e.length<3||e.length>4?`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:Ne(e[0],e[1],e[2],e[3]),!n))return new Oe(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new Ue(n||`Could not parse color from value '${"string"==typeof e?e:String(JSON.stringify(e))}'`)}if("number"===this.type.kind){let e=null;for(const n of this.args){if(e=n.evaluate(t),null===e)return 0;const r=Number(e);if(!isNaN(r))return r}throw new Ue(`Could not convert ${JSON.stringify(e)} to number.`)}return"formatted"===this.type.kind?Re.fromString(Be(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?Le.fromString(Be(this.args[0].evaluate(t))):Be(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new We([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Xe(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild((e=>{t.push(e.serialize())})),t}}var Ze=Ye;const Ke=["Unknown","Point","LineString","Polygon"];var Je=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Ke[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const t=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:n,y:r}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(n*e-t[0])+this.featureDistanceData.bearing[1]*(r*e-t[1])}return 0}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Oe.parse(t)),e}};class Qe{constructor(t,e,n,r){this.name=t,this.type=e,this._evaluate=n,this.args=r}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((t=>t.serialize())))}static parse(t,e){const n=t[0],r=Qe.definitions[n];if(!r)return e.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const i=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=o.filter((e=>{let[n]=e;return!Array.isArray(n)||n.length===t.length-1}));let s=null;for(const[l,c]of a){s=new Mn(e.registry,e.path,null,e.scope);const r=[];let o=!1;for(let e=1;e<t.length;e++){const n=t[e],i=Array.isArray(l)?l[e-1]:l.type,a=s.parse(n,1+r.length,i);if(!a){o=!0;break}r.push(a)}if(!o)if(Array.isArray(l)&&l.length!==r.length)s.error(`Expected ${l.length} arguments, but found ${r.length} instead.`);else{for(let t=0;t<r.length;t++){const e=Array.isArray(l)?l[t]:l.type,n=r[t];s.concat(t+1).checkSubtype(e,n.type)}if(0===s.errors.length)return new Qe(n,i,c,r)}}if(1===a.length)e.errors.push(...s.errors);else{const n=(a.length?a:o).map((t=>{let[e]=t;return n=e,Array.isArray(n)?`(${n.map(xe).join(", ")})`:`(${xe(n.type)}...)`;var n})).join(" | "),r=[];for(let i=1;i<t.length;i++){const n=e.parse(t[i],1+r.length);if(!n)return null;r.push(xe(n.type))}e.error(`Expected arguments of type ${n}, but found (${r.join(", ")}) instead.`)}return null}static register(t,e){Qe.definitions=e;for(const n in e)t[n]=Qe}}var tn=Qe;class en{constructor(t,e,n){this.type=ge,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");const r=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,he);if(!r)return null;const i=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,he);if(!i)return null;let o=null;return n.locale&&(o=e.parse(n.locale,1,ue),!o)?null:new en(r,i,o)}evaluate(t){return new Ae(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const nn=8192;function rn(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function on(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function an(t,e){const n=(180+t[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,i=Math.pow(2,e.z);return[Math.round(n*i*nn),Math.round(r*i*nn)]}function sn(t,e,n){const r=t[0]-e[0],i=t[1]-e[1],o=t[0]-n[0],a=t[1]-n[1];return r*a-o*i==0&&r*o<=0&&i*a<=0}function ln(t,e){let n=!1;for(let a=0,s=e.length;a<s;a++){const s=e[a];for(let e=0,a=s.length;e<a-1;e++){if(sn(t,s[e],s[e+1]))return!1;(i=s[e])[1]>(r=t)[1]!=(o=s[e+1])[1]>r[1]&&r[0]<(o[0]-i[0])*(r[1]-i[1])/(o[1]-i[1])+i[0]&&(n=!n)}}var r,i,o;return n}function cn(t,e){for(let n=0;n<e.length;n++)if(ln(t,e[n]))return!0;return!1}function un(t,e,n,r){const i=r[0]-n[0],o=r[1]-n[1],a=(t[0]-n[0])*o-i*(t[1]-n[1]),s=(e[0]-n[0])*o-i*(e[1]-n[1]);return a>0&&s<0||a<0&&s>0}function hn(t,e,n){for(const c of n)for(let n=0;n<c.length-1;++n)if(0!=(s=[(a=c[n+1])[0]-(o=c[n])[0],a[1]-o[1]])[0]*(l=[(i=e)[0]-(r=t)[0],i[1]-r[1]])[1]-s[1]*l[0]&&un(r,i,o,a)&&un(o,a,r,i))return!0;var r,i,o,a,s,l;return!1}function pn(t,e){for(let n=0;n<t.length;++n)if(!ln(t[n],e))return!1;for(let n=0;n<t.length-1;++n)if(hn(t[n],t[n+1],e))return!1;return!0}function dn(t,e){for(let n=0;n<e.length;n++)if(pn(t,e[n]))return!0;return!1}function fn(t,e,n){const r=[];for(let i=0;i<t.length;i++){const o=[];for(let r=0;r<t[i].length;r++){const a=an(t[i][r],n);rn(e,a),o.push(a)}r.push(o)}return r}function gn(t,e,n){const r=[];for(let i=0;i<t.length;i++){const o=fn(t[i],e,n);r.push(o)}return r}function mn(t,e,n,r){if(t[0]<n[0]||t[0]>n[2]){const e=.5*r;let i=t[0]-n[0]>e?-r:n[0]-t[0]>e?r:0;0===i&&(i=t[0]-n[2]>e?-r:n[2]-t[0]>e?r:0),t[0]+=i}rn(e,t)}function yn(t,e,n,r){const i=Math.pow(2,r.z)*nn,o=[r.x*nn,r.y*nn],a=[];if(!t)return a;for(const s of t)for(const t of s){const r=[t.x+o[0],t.y+o[1]];mn(r,e,n,i),a.push(r)}return a}function vn(t,e,n,r){const i=Math.pow(2,r.z)*nn,o=[r.x*nn,r.y*nn],a=[];if(!t)return a;for(const l of t){const t=[];for(const n of l){const r=[n.x+o[0],n.y+o[1]];rn(e,r),t.push(r)}a.push(t)}if(e[2]-e[0]<=i/2){(s=e)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const t of a)for(const r of t)mn(r,e,n,i)}var s;return a}class xn{constructor(t,e){this.type=he,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Fe(t[1])){const e=t[1];if("FeatureCollection"===e.type)for(let t=0;t<e.features.length;++t){const n=e.features[t].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new xn(e,e.features[t].geometry)}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new xn(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new xn(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(!i)return!1;if("Polygon"===e.type){const o=fn(e.coordinates,r,i),a=yn(t.geometry(),n,r,i);if(!on(n,r))return!1;for(const t of a)if(!ln(t,o))return!1}if("MultiPolygon"===e.type){const o=gn(e.coordinates,r,i),a=yn(t.geometry(),n,r,i);if(!on(n,r))return!1;for(const t of a)if(!cn(t,o))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(!i)return!1;if("Polygon"===e.type){const o=fn(e.coordinates,r,i),a=vn(t.geometry(),n,r,i);if(!on(n,r))return!1;for(const t of a)if(!pn(t,o))return!1}if("MultiPolygon"===e.type){const o=gn(e.coordinates,r,i),a=vn(t.geometry(),n,r,i);if(!on(n,r))return!1;for(const t of a)if(!dn(t,o))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var _n=xn;function bn(t){if(t instanceof tn){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof _n)return!1;let e=!0;return t.eachChild((t=>{e&&!bn(t)&&(e=!1)})),e}function wn(t){if(t instanceof tn&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild((t=>{e&&!wn(t)&&(e=!1)})),e}function Sn(t,e){if(t instanceof tn&&e.indexOf(t.name)>=0)return!1;let n=!0;return t.eachChild((t=>{n&&!Sn(t,e)&&(n=!1)})),n}class Cn{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const n=t[1];return e.scope.has(n)?new Cn(n,e.scope.get(n)):e.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var En=Cn;class kn{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new se,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];this.registry=t,this.path=e,this.key=e.map((t=>`[${t}]`)).join(""),this.scope=r,this.errors=i,this.expectedType=n}parse(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return e?this.concat(e,n,r)._parse(t,i):this._parse(t,i)}_parse(t,e){function n(t,e,n){return"assert"===n?new Ge(e,[t]):"coerce"===n?new Ze(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=t[0];if("string"!=typeof r)return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const i=this.registry[r];if(i){let r=i.parse(t,this);if(!r)return null;if(this.expectedType){const t=this.expectedType,i=r.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==i.kind)if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==i.kind&&"string"!==i.kind){if(this.checkSubtype(t,i))return null}else r=n(r,t,e.typeAnnotation||"coerce");else r=n(r,t,e.typeAnnotation||"assert")}if(!(r instanceof je)&&"resolvedImage"!==r.type.kind&&Tn(r)){const e=new Je;try{r=new je(r.type,r.evaluate(e))}catch(t){return this.error(t.message),null}}return r}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,e,n){const r="number"==typeof t?this.path.concat(t):this.path,i=n?this.scope.concat(n):this.scope;return new kn(this.registry,r,e||null,i,this.errors)}error(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];const i=`${this.key}${n.map((t=>`[${t}]`)).join("")}`;this.errors.push(new oe(i,t))}checkSubtype(t,e){const n=be(t,e);return n&&this.error(n),n}}var Mn=kn;function Tn(t){if(t instanceof En)return Tn(t.boundExpression);if(t instanceof tn&&"error"===t.name)return!1;if(t instanceof en)return!1;if(t instanceof _n)return!1;const e=t instanceof Ze||t instanceof Ge;let n=!0;return t.eachChild((t=>{n=e?n&&Tn(t):n&&t instanceof je})),!!n&&bn(t)&&Sn(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function In(t,e){const n=t.length-1;let r,i,o=0,a=n,s=0;for(;o<=a;)if(s=Math.floor((o+a)/2),r=t[s],i=t[s+1],r<=e){if(s===n||e<i)return s;o=s+1}else{if(!(r>e))throw new Ue("Input is not a number.");a=s-1}return 0}class Pn{constructor(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[r,i]of n)this.labels.push(r),this.outputs.push(i)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const n=e.parse(t[1],1,ce);if(!n)return null;const r=[];let i=null;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(let o=1;o<t.length;o+=2){const n=1===o?-1/0:t[o],a=t[o+1],s=o,l=o+1;if("number"!=typeof n)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(r.length&&r[r.length-1][0]>=n)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const c=e.parse(a,l,i);if(!c)return null;i=i||c.type,r.push([n,c])}return new Pn(i,n,r)}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);const i=e.length;return r>=e[i-1]?n[i-1].evaluate(t):n[In(e,r)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){const t=["step",this.input.serialize()];for(let e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}var On=Pn;function An(t,e,n){return t*(1-n)+e*n}var Dn=Object.freeze({__proto__:null,array:function(t,e,n){return t.map(((t,r)=>An(t,e[r],n)))},color:function(t,e,n){return new Oe(An(t.r,e.r,n),An(t.g,e.g,n),An(t.b,e.b,n),An(t.a,e.a,n))},number:An});const Rn=.95047,Ln=1.08883,Nn=4/29,Fn=6/29,zn=3*Fn*Fn,Bn=Fn*Fn*Fn,$n=Math.PI/180,jn=180/Math.PI;function Un(t){return t>Bn?Math.pow(t,1/3):t/zn+Nn}function Vn(t){return t>Fn?t*t*t:zn*(t-Nn)}function Hn(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Gn(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Wn(t){const e=Gn(t.r),n=Gn(t.g),r=Gn(t.b),i=Un((.4124564*e+.3575761*n+.1804375*r)/Rn),o=Un((.2126729*e+.7151522*n+.072175*r)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-Un((.0193339*e+.119192*n+.9503041*r)/Ln)),alpha:t.a}}function Xn(t){let e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=1*Vn(e),n=Rn*Vn(n),r=Ln*Vn(r),new Oe(Hn(3.2404542*n-1.5371385*e-.4985314*r),Hn(-.969266*n+1.8760108*e+.041556*r),Hn(.0556434*n-.2040259*e+1.0572252*r),t.alpha)}function qn(t,e,n){const r=e-t;return t+n*(r>180||r<-180?r-360*Math.round(r/360):r)}const Yn={forward:Wn,reverse:Xn,interpolate:function(t,e,n){return{l:An(t.l,e.l,n),a:An(t.a,e.a,n),b:An(t.b,e.b,n),alpha:An(t.alpha,e.alpha,n)}}},Zn={forward:function(t){const{l:e,a:n,b:r}=Wn(t),i=Math.atan2(r,n)*jn;return{h:i<0?i+360:i,c:Math.sqrt(n*n+r*r),l:e,alpha:t.a}},reverse:function(t){const e=t.h*$n,n=t.c;return Xn({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:qn(t.h,e.h,n),c:An(t.c,e.c,n),l:An(t.l,e.l,n),alpha:An(t.alpha,e.alpha,n)}}};var Kn=Object.freeze({__proto__:null,hcl:Zn,lab:Yn});class Jn{constructor(t,e,n,r,i){this.type=t,this.operator=e,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(const[o,a]of i)this.labels.push(o),this.outputs.push(a)}static interpolationFactor(t,e,n,r){let i=0;if("exponential"===t.name)i=Qn(e,t.base,n,r);else if("linear"===t.name)i=Qn(e,1,n,r);else if("cubic-bezier"===t.name){const o=t.controlPoints;i=new g(o[0],o[1],o[2],o[3]).solve(Qn(e,1,n,r))}return i}static parse(t,e){let[n,r,i,...o]=t;if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){const t=r[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:t}}else{if("cubic-bezier"!==r[0])return e.error(`Unknown interpolation type ${String(r[0])}`,1,0);{const t=r.slice(1);if(4!==t.length||t.some((t=>"number"!=typeof t||t<0||t>1)))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:t}}}if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(i=e.parse(i,2,ce),!i)return null;const a=[];let s=null;"interpolate-hcl"===n||"interpolate-lab"===n?s=pe:e.expectedType&&"value"!==e.expectedType.kind&&(s=e.expectedType);for(let l=0;l<o.length;l+=2){const t=o[l],n=o[l+1],r=l+3,i=l+4;if("number"!=typeof t)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',r);if(a.length&&a[a.length-1][0]>=t)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',r);const c=e.parse(n,i,s);if(!c)return null;s=s||c.type,a.push([t,c])}return"number"===s.kind||"color"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new Jn(s,n,r,i,a):e.error(`Type ${xe(s)} is not interpolatable.`)}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);const i=e.length;if(r>=e[i-1])return n[i-1].evaluate(t);const o=In(e,r),a=Jn.interpolationFactor(this.interpolation,r,e[o],e[o+1]),s=n[o].evaluate(t),l=n[o+1].evaluate(t);return"interpolate"===this.operator?Dn[this.type.kind.toLowerCase()](s,l,a):"interpolate-hcl"===this.operator?Zn.reverse(Zn.interpolate(Zn.forward(s),Zn.forward(l),a)):Yn.reverse(Yn.interpolate(Yn.forward(s),Yn.forward(l),a))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){let t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const e=[this.operator,t,this.input.serialize()];for(let n=0;n<this.labels.length;n++)e.push(this.labels[n],this.outputs[n].serialize());return e}}function Qn(t,e,n,r){const i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}var tr=Jn;class er{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let n=null;const r=e.expectedType;r&&"value"!==r.kind&&(n=r);const i=[];for(const a of t.slice(1)){const t=e.parse(a,1+i.length,n,void 0,{typeAnnotation:"omit"});if(!t)return null;n=n||t.type,i.push(t)}const o=r&&i.some((t=>be(r,t.type)));return new er(o?fe:n,i)}evaluate(t){let e,n=null,r=0;for(const i of this.args){if(r++,n=i.evaluate(t),n&&n instanceof Le&&!n.available&&(e||(e=n),n=null,r===this.args.length))return e;if(null!==n)break}return n}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=["coalesce"];return this.eachChild((e=>{t.push(e.serialize())})),t}}var nr=er;class rr{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const n=[];for(let i=1;i<t.length-1;i+=2){const r=t[i];if("string"!=typeof r)return e.error(`Expected string, but found ${typeof r} instead.`,i);if(/[^a-zA-Z0-9_]/.test(r))return e.error("Variable names must contain only alphanumeric characters or '_'.",i);const o=e.parse(t[i+1],i+1);if(!o)return null;n.push([r,o])}const r=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return r?new rr(n,r):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[e,n]of this.bindings)t.push(e,n.serialize());return t.push(this.result.serialize()),t}}var ir=rr;class or{constructor(t,e,n){this.type=t,this.index=e,this.input=n}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,ce),r=e.parse(t[2],2,ve(e.expectedType||fe));return n&&r?new or(r.type.itemType,n,r):null}evaluate(t){const e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new Ue(`Array index out of bounds: ${e} < 0.`);if(e>=n.length)throw new Ue(`Array index out of bounds: ${e} > ${n.length-1}.`);if(e!==Math.floor(e))throw new Ue(`Array index must be an integer, but found ${e} instead.`);return n[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var ar=or;class sr{constructor(t,e){this.type=he,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,fe),r=e.parse(t[2],2,fe);return n&&r?we(n.type,[he,ue,ce,le,fe])?new sr(n,r):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${xe(n.type)} instead`):null}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(null==n)return!1;if(!Se(e,["boolean","string","number","null"]))throw new Ue(`Expected first argument to be of type boolean, string, number or null, but found ${xe(ze(e))} instead.`);if(!Se(n,["string","array"]))throw new Ue(`Expected second argument to be of type array or string, but found ${xe(ze(n))} instead.`);return n.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var lr=sr;class cr{constructor(t,e,n){this.type=ce,this.needle=t,this.haystack=e,this.fromIndex=n}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,fe),r=e.parse(t[2],2,fe);if(!n||!r)return null;if(!we(n.type,[he,ue,ce,le,fe]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${xe(n.type)} instead`);if(4===t.length){const i=e.parse(t[3],3,ce);return i?new cr(n,r,i):null}return new cr(n,r)}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!Se(e,["boolean","string","number","null"]))throw new Ue(`Expected first argument to be of type boolean, string, number or null, but found ${xe(ze(e))} instead.`);if(!Se(n,["string","array"]))throw new Ue(`Expected second argument to be of type array or string, but found ${xe(ze(n))} instead.`);if(this.fromIndex){const r=this.fromIndex.evaluate(t);return n.indexOf(e,r)}return n.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var ur=cr;class hr{constructor(t,e,n,r,i,o){this.inputType=t,this.type=e,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return e.error("Expected an even number of arguments.");let n,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);const i={},o=[];for(let l=2;l<t.length-1;l+=2){let a=t[l];const s=t[l+1];Array.isArray(a)||(a=[a]);const c=e.concat(l);if(0===a.length)return c.error("Expected at least one branch label.");for(const t of a){if("number"!=typeof t&&"string"!=typeof t)return c.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof t&&Math.floor(t)!==t)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,ze(t)))return null}else n=ze(t);if(void 0!==i[String(t)])return c.error("Branch labels must be unique.");i[String(t)]=o.length}const u=e.parse(s,l,r);if(!u)return null;r=r||u.type,o.push(u)}const a=e.parse(t[1],1,fe);if(!a)return null;const s=e.parse(t[t.length-1],t.length-1,r);return s?"value"!==a.type.kind&&e.concat(1).checkSubtype(n,a.type)?null:new hr(n,r,a,i,o,s):null}evaluate(t){const e=this.input.evaluate(t);return(ze(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],e=Object.keys(this.cases).sort(),n=[],r={};for(const o of e){const t=r[this.cases[o]];void 0===t?(r[this.cases[o]]=n.length,n.push([this.cases[o],[o]])):n[t][1].push(o)}const i=t=>"number"===this.inputType.kind?Number(t):t;for(const[o,a]of n)t.push(1===a.length?i(a[0]):a.map(i)),t.push(this.outputs[o].serialize());return t.push(this.otherwise.serialize()),t}}var pr=hr;class dr{constructor(t,e,n){this.type=t,this.branches=e,this.otherwise=n}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);const r=[];for(let o=1;o<t.length-1;o+=2){const i=e.parse(t[o],o,he);if(!i)return null;const a=e.parse(t[o+1],o+1,n);if(!a)return null;r.push([i,a]),n=n||a.type}const i=e.parse(t[t.length-1],t.length-1,n);return i?new dr(n,r,i):null}evaluate(t){for(const[e,n]of this.branches)if(e.evaluate(t))return n.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,n]of this.branches)t(e),t(n);t(this.otherwise)}outputDefined(){return this.branches.every((t=>{let[e,n]=t;return n.outputDefined()}))&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild((e=>{t.push(e.serialize())})),t}}var fr=dr;class gr{constructor(t,e,n,r){this.type=t,this.input=e,this.beginIndex=n,this.endIndex=r}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,fe),r=e.parse(t[2],2,ce);if(!n||!r)return null;if(!we(n.type,[ve(fe),ue,fe]))return e.error(`Expected first argument to be of type array or string, but found ${xe(n.type)} instead`);if(4===t.length){const i=e.parse(t[3],3,ce);return i?new gr(n.type,n,r,i):null}return new gr(n.type,n,r)}evaluate(t){const e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!Se(e,["string","array"]))throw new Ue(`Expected first argument to be of type array or string, but found ${xe(ze(e))} instead.`);if(this.endIndex){const r=this.endIndex.evaluate(t);return e.slice(n,r)}return e.slice(n)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var mr=gr;function yr(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function vr(t,e,n,r){return 0===r.compare(e,n)}function xr(t,e,n){const r="=="!==t&&"!="!==t;return class i{constructor(t,e,n){this.type=he,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const n=t[0];let o=e.parse(t[1],1,fe);if(!o)return null;if(!yr(n,o.type))return e.concat(1).error(`"${n}" comparisons are not supported for type '${xe(o.type)}'.`);let a=e.parse(t[2],2,fe);if(!a)return null;if(!yr(n,a.type))return e.concat(2).error(`"${n}" comparisons are not supported for type '${xe(a.type)}'.`);if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error(`Cannot compare types '${xe(o.type)}' and '${xe(a.type)}'.`);r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new Ge(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new Ge(o.type,[a])));let s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(s=e.parse(t[3],3,ge),!s)return null}return new i(o,a,s)}evaluate(i){const o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){const e=ze(o),n=ze(a);if(e.kind!==n.kind||"string"!==e.kind&&"number"!==e.kind)throw new Ue(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${e.kind}, ${n.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const t=ze(o),n=ze(a);if("string"!==t.kind||"string"!==n.kind)return e(i,o,a)}return this.collator?n(i,o,a,this.collator.evaluate(i)):e(i,o,a)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}outputDefined(){return!0}serialize(){const e=[t];return this.eachChild((t=>{e.push(t.serialize())})),e}}}const _r=xr("==",(function(t,e,n){return e===n}),vr),br=xr("!=",(function(t,e,n){return e!==n}),(function(t,e,n,r){return!vr(0,e,n,r)})),wr=xr("<",(function(t,e,n){return e<n}),(function(t,e,n,r){return r.compare(e,n)<0})),Sr=xr(">",(function(t,e,n){return e>n}),(function(t,e,n,r){return r.compare(e,n)>0})),Cr=xr("<=",(function(t,e,n){return e<=n}),(function(t,e,n,r){return r.compare(e,n)<=0})),Er=xr(">=",(function(t,e,n){return e>=n}),(function(t,e,n,r){return r.compare(e,n)>=0}));class kr{constructor(t,e,n,r,i,o){this.type=ue,this.number=t,this.locale=e,this.currency=n,this.unit=r,this.minFractionDigits=i,this.maxFractionDigits=o}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,ce);if(!n)return null;const r=t[2];if("object"!=typeof r||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");let i=null;if(r.locale&&(i=e.parse(r.locale,1,ue),!i))return null;let o=null;if(r.currency&&(o=e.parse(r.currency,1,ue),!o))return null;let a=null;if(r.unit&&(a=e.parse(r.unit,1,ue),!a))return null;let s=null;if(r["min-fraction-digits"]&&(s=e.parse(r["min-fraction-digits"],1,ce),!s))return null;let l=null;return r["max-fraction-digits"]&&(l=e.parse(r["max-fraction-digits"],1,ce),!l)?null:new kr(n,i,o,a,s,l)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(t):void 0,unit:this.unit?this.unit.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.unit&&t(this.unit),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.unit&&(t.unit=this.unit.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class Mr{constructor(t){this.type=ce,this.input=t}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error(`Expected argument of type string or array, but found ${xe(n.type)} instead.`):new Mr(n):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new Ue(`Expected value to be of type string or array, but found ${xe(ze(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild((e=>{t.push(e.serialize())})),t}}const Tr={"==":_r,"!=":br,">":Sr,"<":wr,">=":Er,"<=":Cr,array:Ge,at:ar,boolean:Ge,case:fr,coalesce:nr,collator:en,format:We,image:Xe,in:lr,"index-of":ur,interpolate:tr,"interpolate-hcl":tr,"interpolate-lab":tr,length:Mr,let:ir,literal:je,match:pr,number:Ge,"number-format":kr,object:Ge,slice:mr,step:On,string:Ge,"to-boolean":Ze,"to-color":Ze,"to-number":Ze,"to-string":Ze,var:En,within:_n};function Ir(t,e){let[n,r,i,o]=e;n=n.evaluate(t),r=r.evaluate(t),i=i.evaluate(t);const a=o?o.evaluate(t):1,s=Ne(n,r,i,a);if(s)throw new Ue(s);return new Oe(n/255*a,r/255*a,i/255*a,a)}function Pr(t,e){return t in e}function Or(t,e){const n=e[t];return void 0===n?null:n}function Ar(t){return{type:t}}tn.register(Tr,{error:[{kind:"error"},[ue],(t,e)=>{let[n]=e;throw new Ue(n.evaluate(t))}],typeof:[ue,[fe],(t,e)=>{let[n]=e;return xe(ze(n.evaluate(t)))}],"to-rgba":[ve(ce,4),[pe],(t,e)=>{let[n]=e;return n.evaluate(t).toArray()}],rgb:[pe,[ce,ce,ce],Ir],rgba:[pe,[ce,ce,ce,ce],Ir],has:{type:he,overloads:[[[ue],(t,e)=>{let[n]=e;return Pr(n.evaluate(t),t.properties())}],[[ue,de],(t,e)=>{let[n,r]=e;return Pr(n.evaluate(t),r.evaluate(t))}]]},get:{type:fe,overloads:[[[ue],(t,e)=>{let[n]=e;return Or(n.evaluate(t),t.properties())}],[[ue,de],(t,e)=>{let[n,r]=e;return Or(n.evaluate(t),r.evaluate(t))}]]},"feature-state":[fe,[ue],(t,e)=>{let[n]=e;return Or(n.evaluate(t),t.featureState||{})}],properties:[de,[],t=>t.properties()],"geometry-type":[ue,[],t=>t.geometryType()],id:[fe,[],t=>t.id()],zoom:[ce,[],t=>t.globals.zoom],pitch:[ce,[],t=>t.globals.pitch||0],"distance-from-center":[ce,[],t=>t.distanceFromCenter()],"heatmap-density":[ce,[],t=>t.globals.heatmapDensity||0],"line-progress":[ce,[],t=>t.globals.lineProgress||0],"sky-radial-progress":[ce,[],t=>t.globals.skyRadialProgress||0],accumulated:[fe,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[ce,Ar(ce),(t,e)=>{let n=0;for(const r of e)n+=r.evaluate(t);return n}],"*":[ce,Ar(ce),(t,e)=>{let n=1;for(const r of e)n*=r.evaluate(t);return n}],"-":{type:ce,overloads:[[[ce,ce],(t,e)=>{let[n,r]=e;return n.evaluate(t)-r.evaluate(t)}],[[ce],(t,e)=>{let[n]=e;return-n.evaluate(t)}]]},"/":[ce,[ce,ce],(t,e)=>{let[n,r]=e;return n.evaluate(t)/r.evaluate(t)}],"%":[ce,[ce,ce],(t,e)=>{let[n,r]=e;return n.evaluate(t)%r.evaluate(t)}],ln2:[ce,[],()=>Math.LN2],pi:[ce,[],()=>Math.PI],e:[ce,[],()=>Math.E],"^":[ce,[ce,ce],(t,e)=>{let[n,r]=e;return Math.pow(n.evaluate(t),r.evaluate(t))}],sqrt:[ce,[ce],(t,e)=>{let[n]=e;return Math.sqrt(n.evaluate(t))}],log10:[ce,[ce],(t,e)=>{let[n]=e;return Math.log(n.evaluate(t))/Math.LN10}],ln:[ce,[ce],(t,e)=>{let[n]=e;return Math.log(n.evaluate(t))}],log2:[ce,[ce],(t,e)=>{let[n]=e;return Math.log(n.evaluate(t))/Math.LN2}],sin:[ce,[ce],(t,e)=>{let[n]=e;return Math.sin(n.evaluate(t))}],cos:[ce,[ce],(t,e)=>{let[n]=e;return Math.cos(n.evaluate(t))}],tan:[ce,[ce],(t,e)=>{let[n]=e;return Math.tan(n.evaluate(t))}],asin:[ce,[ce],(t,e)=>{let[n]=e;return Math.asin(n.evaluate(t))}],acos:[ce,[ce],(t,e)=>{let[n]=e;return Math.acos(n.evaluate(t))}],atan:[ce,[ce],(t,e)=>{let[n]=e;return Math.atan(n.evaluate(t))}],min:[ce,Ar(ce),(t,e)=>Math.min(...e.map((e=>e.evaluate(t))))],max:[ce,Ar(ce),(t,e)=>Math.max(...e.map((e=>e.evaluate(t))))],abs:[ce,[ce],(t,e)=>{let[n]=e;return Math.abs(n.evaluate(t))}],round:[ce,[ce],(t,e)=>{let[n]=e;const r=n.evaluate(t);return r<0?-Math.round(-r):Math.round(r)}],floor:[ce,[ce],(t,e)=>{let[n]=e;return Math.floor(n.evaluate(t))}],ceil:[ce,[ce],(t,e)=>{let[n]=e;return Math.ceil(n.evaluate(t))}],"filter-==":[he,[ue,fe],(t,e)=>{let[n,r]=e;return t.properties()[n.value]===r.value}],"filter-id-==":[he,[fe],(t,e)=>{let[n]=e;return t.id()===n.value}],"filter-type-==":[he,[ue],(t,e)=>{let[n]=e;return t.geometryType()===n.value}],"filter-<":[he,[ue,fe],(t,e)=>{let[n,r]=e;const i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<o}],"filter-id-<":[he,[fe],(t,e)=>{let[n]=e;const r=t.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[he,[ue,fe],(t,e)=>{let[n,r]=e;const i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>o}],"filter-id->":[he,[fe],(t,e)=>{let[n]=e;const r=t.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[he,[ue,fe],(t,e)=>{let[n,r]=e;const i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<=o}],"filter-id-<=":[he,[fe],(t,e)=>{let[n]=e;const r=t.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[he,[ue,fe],(t,e)=>{let[n,r]=e;const i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>=o}],"filter-id->=":[he,[fe],(t,e)=>{let[n]=e;const r=t.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[he,[fe],(t,e)=>{let[n]=e;return n.value in t.properties()}],"filter-has-id":[he,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[he,[ve(ue)],(t,e)=>{let[n]=e;return n.value.indexOf(t.geometryType())>=0}],"filter-id-in":[he,[ve(fe)],(t,e)=>{let[n]=e;return n.value.indexOf(t.id())>=0}],"filter-in-small":[he,[ue,ve(fe)],(t,e)=>{let[n,r]=e;return r.value.indexOf(t.properties()[n.value])>=0}],"filter-in-large":[he,[ue,ve(fe)],(t,e)=>{let[n,r]=e;return function(t,e,n,r){for(;n<=r;){const i=n+r>>1;if(e[i]===t)return!0;e[i]>t?r=i-1:n=i+1}return!1}(t.properties()[n.value],r.value,0,r.value.length-1)}],all:{type:he,overloads:[[[he,he],(t,e)=>{let[n,r]=e;return n.evaluate(t)&&r.evaluate(t)}],[Ar(he),(t,e)=>{for(const n of e)if(!n.evaluate(t))return!1;return!0}]]},any:{type:he,overloads:[[[he,he],(t,e)=>{let[n,r]=e;return n.evaluate(t)||r.evaluate(t)}],[Ar(he),(t,e)=>{for(const n of e)if(n.evaluate(t))return!0;return!1}]]},"!":[he,[he],(t,e)=>{let[n]=e;return!n.evaluate(t)}],"is-supported-script":[he,[ue],(t,e)=>{let[n]=e;const r=t.globals&&t.globals.isSupportedScript;return!r||r(n.evaluate(t))}],upcase:[ue,[ue],(t,e)=>{let[n]=e;return n.evaluate(t).toUpperCase()}],downcase:[ue,[ue],(t,e)=>{let[n]=e;return n.evaluate(t).toLowerCase()}],concat:[ue,Ar(fe),(t,e)=>e.map((e=>Be(e.evaluate(t)))).join("")],"resolved-locale":[ue,[ge],(t,e)=>{let[n]=e;return n.evaluate(t).resolvedLocale()}]});var Dr=Tr;function Rr(t){return{result:"success",value:t}}function Lr(t){return{result:"error",value:t}}function Nr(t){return"data-driven"===t["property-type"]}function Fr(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function zr(t){return!!t.expression&&t.expression.interpolated}function Br(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function $r(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function jr(t){return t}function Ur(t,e){const n="color"===e.type,r=t.stops&&"object"==typeof t.stops[0][0],i=r||!(r||void 0!==t.property),o=t.type||(zr(e)?"exponential":"interval");if(n&&((t=ee({},t)).stops&&(t.stops=t.stops.map((t=>[t[0],Oe.parse(t[1])]))),t.default=Oe.parse(t.default?t.default:e.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!Kn[t.colorSpace])throw new Error(`Unknown color space: ${t.colorSpace}`);let a,s,l;if("exponential"===o)a=Wr;else if("interval"===o)a=Gr;else if("categorical"===o){a=Hr,s=Object.create(null);for(const e of t.stops)s[e[0]]=e[1];l=typeof t.stops[0][0]}else{if("identity"!==o)throw new Error(`Unknown function type "${o}"`);a=Xr}if(r){const n={},r=[];for(let e=0;e<t.stops.length;e++){const i=t.stops[e],o=i[0].zoom;void 0===n[o]&&(n[o]={zoom:o,type:t.type,property:t.property,default:t.default,stops:[]},r.push(o)),n[o].stops.push([i[0].value,i[1]])}const i=[];for(const t of r)i.push([n[t].zoom,Ur(n[t],e)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:tr.interpolationFactor.bind(void 0,o),zoomStops:i.map((t=>t[0])),evaluate:(n,r)=>{let{zoom:o}=n;return Wr({stops:i,base:t.base},e,o).evaluate(o,r)}}}if(i){const n="exponential"===o?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:n,interpolationFactor:tr.interpolationFactor.bind(void 0,n),zoomStops:t.stops.map((t=>t[0])),evaluate:n=>{let{zoom:r}=n;return a(t,e,r,s,l)}}}return{kind:"source",evaluate(n,r){const i=r&&r.properties?r.properties[t.property]:void 0;return void 0===i?Vr(t.default,e.default):a(t,e,i,s,l)}}}function Vr(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function Hr(t,e,n,r,i){return Vr(typeof n===i?r[n]:void 0,t.default,e.default)}function Gr(t,e,n){if("number"!==Br(n))return Vr(t.default,e.default);const r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];const i=In(t.stops.map((t=>t[0])),n);return t.stops[i][1]}function Wr(t,e,n){const r=void 0!==t.base?t.base:1;if("number"!==Br(n))return Vr(t.default,e.default);const i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];const o=In(t.stops.map((t=>t[0])),n),a=function(t,e,n,r){const i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}(n,r,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],l=t.stops[o+1][1];let c=Dn[e.type]||jr;if(t.colorSpace&&"rgb"!==t.colorSpace){const e=Kn[t.colorSpace];c=(t,n)=>e.reverse(e.interpolate(e.forward(t),e.forward(n),a))}return"function"==typeof s.evaluate?{evaluate(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=s.evaluate.apply(void 0,e),i=l.evaluate.apply(void 0,e);if(void 0!==r&&void 0!==i)return c(r,i,a)}}:c(s,l,a)}function Xr(t,e,n){return"color"===e.type?n=Oe.parse(n):"formatted"===e.type?n=Re.fromString(n.toString()):"resolvedImage"===e.type?n=Le.fromString(n.toString()):Br(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),Vr(n,t.default,e.default)}class qr{constructor(t,e){this.expression=t,this._warningHistory={},this._evaluator=new Je,this._defaultValue=e?function(t){return"color"===t.type&&($r(t.default)||Array.isArray(t.default))?new Oe(0,0,0,0):"color"===t.type?Oe.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,n,r,i,o,a,s){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=r||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)}evaluate(t,e,n,r,i,o,a,s){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new Ue(`Expected value to be one of ${Object.keys(this._enumValues).map((t=>JSON.stringify(t))).join(", ")}, but found ${JSON.stringify(t)} instead.`);return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function Yr(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Dr}function Zr(t,e){const n=new Mn(Dr,[],e?function(t){const e={color:pe,string:ue,number:ce,enum:ue,boolean:he,formatted:me,resolvedImage:ye};return"array"===t.type?ve(e[t.value]||fe,t.length):e[t.type]}(e):void 0),r=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?Rr(new qr(r,e)):Lr(n.errors)}class Kr{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!wn(e.expression)}evaluateWithoutErrorHandling(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)}evaluate(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)}}class Jr{constructor(t,e,n,r){this.kind=t,this.zoomStops=n,this._styleExpression=e,this.isStateDependent="camera"!==t&&!wn(e.expression),this.interpolationType=r}evaluateWithoutErrorHandling(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)}evaluate(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)}interpolationFactor(t,e,n){return this.interpolationType?tr.interpolationFactor(this.interpolationType,t,e,n):0}}function Qr(t,e){if("error"===(t=Zr(t,e)).result)return t;const n=t.value.expression,r=bn(n);if(!r&&!Nr(e))return Lr([new oe("","data expressions not supported")]);const i=Sn(n,["zoom","pitch","distance-from-center"]);if(!i&&!Fr(e))return Lr([new oe("","zoom expressions not supported")]);const o=ei(n);return o||i?o instanceof oe?Lr([o]):o instanceof tr&&!zr(e)?Lr([new oe("",'"interpolate" expressions cannot be used with this property')]):Rr(o?new Jr(r?"camera":"composite",t.value,o.labels,o instanceof tr?o.interpolation:void 0):new Kr(r?"constant":"source",t.value)):Lr([new oe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ti{constructor(t,e){this._parameters=t,this._specification=e,ee(this,Ur(this._parameters,this._specification))}static deserialize(t){return new ti(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function ei(t){let e=null;if(t instanceof ir)e=ei(t.result);else if(t instanceof nr){for(const n of t.args)if(e=ei(n),e)break}else(t instanceof On||t instanceof tr)&&t.input instanceof tn&&"zoom"===t.input.name&&(e=t);return e instanceof oe||t.eachChild((t=>{const n=ei(t);n instanceof oe?e=n:!e&&n?e=new oe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&n&&e!==n&&(e=new oe("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}class ni{constructor(t,e,n,r){this.message=(t?`${t}: `:"")+n,r&&(this.identifier=r),null!=e&&e.__line__&&(this.line=e.__line__)}}function ri(t){const e=t.key,n=t.value,r=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,a=t.styleSpec;let s=[];const l=Br(n);if("object"!==l)return[new ni(e,n,`object expected, ${l} found`)];for(const c in n){const t=c.split(".")[0];let l;i[t]?l=i[t]:r[t]?l=Fi:i["*"]?l=i["*"]:r["*"]&&(l=Fi),l?s=s.concat(l({key:(e?`${e}.`:e)+c,value:n[c],valueSpec:r[t]||r["*"],style:o,styleSpec:a,object:n,objectKey:c},n)):s.push(new ni(e,n[c],`unknown property "${c}"`))}for(const c in r)i[c]||r[c].required&&void 0===r[c].default&&void 0===n[c]&&s.push(new ni(e,n,`missing required property "${c}"`));return s}function ii(t){const e=t.value,n=t.valueSpec,r=t.style,i=t.styleSpec,o=t.key,a=t.arrayElementValidator||Fi;if("array"!==Br(e))return[new ni(o,e,`array expected, ${Br(e)} found`)];if(n.length&&e.length!==n.length)return[new ni(o,e,`array length ${n.length} expected, length ${e.length} found`)];if(n["min-length"]&&e.length<n["min-length"])return[new ni(o,e,`array length at least ${n["min-length"]} expected, length ${e.length} found`)];let s={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum,function:void 0};i.$version<7&&(s.function=n.function),"object"===Br(n.value)&&(s=n.value);let l=[];for(let c=0;c<e.length;c++)l=l.concat(a({array:e,arrayIndex:c,value:e[c],valueSpec:s,style:r,styleSpec:i,key:`${o}[${c}]`}));return l}function oi(t){const e=t.key,n=t.value,r=t.valueSpec;let i=Br(n);if("number"===i&&n!=n&&(i="NaN"),"number"!==i)return[new ni(e,n,`number expected, ${i} found`)];if("minimum"in r){let i=r.minimum;if("array"===Br(r.minimum)&&(i=r.minimum[t.arrayIndex]),n<i)return[new ni(e,n,`${n} is less than the minimum value ${i}`)]}if("maximum"in r){let i=r.maximum;if("array"===Br(r.maximum)&&(i=r.maximum[t.arrayIndex]),n>i)return[new ni(e,n,`${n} is greater than the maximum value ${i}`)]}return[]}function ai(t){const e=t.valueSpec,n=ne(t.value.type);let r,i,o,a={};const s="categorical"!==n&&void 0===t.value.property,l=!s,c="array"===Br(t.value.stops)&&"array"===Br(t.value.stops[0])&&"object"===Br(t.value.stops[0][0]),u=ri({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===n)return[new ni(t.key,t.value,'identity function may not have a "stops" property')];let e=[];const r=t.value;return e=e.concat(ii({key:t.key,value:r,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===Br(r)&&0===r.length&&e.push(new ni(t.key,r,"array must have at least one stop")),e},default:function(t){return Fi({key:t.key,value:t.value,valueSpec:e,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===n&&s&&u.push(new ni(t.key,t.value,'missing required property "property"')),"identity"===n||t.value.stops||u.push(new ni(t.key,t.value,'missing required property "stops"')),"exponential"===n&&t.valueSpec.expression&&!zr(t.valueSpec)&&u.push(new ni(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!Nr(t.valueSpec)?u.push(new ni(t.key,t.value,"property functions not supported")):s&&!Fr(t.valueSpec)&&u.push(new ni(t.key,t.value,"zoom functions not supported"))),"categorical"!==n&&!c||void 0!==t.value.property||u.push(new ni(t.key,t.value,'"property" property is required')),u;function h(t){let n=[];const r=t.value,s=t.key;if("array"!==Br(r))return[new ni(s,r,`array expected, ${Br(r)} found`)];if(2!==r.length)return[new ni(s,r,`array length 2 expected, length ${r.length} found`)];if(c){if("object"!==Br(r[0]))return[new ni(s,r,`object expected, ${Br(r[0])} found`)];if(void 0===r[0].zoom)return[new ni(s,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new ni(s,r,"object stop key must have value")];const e=ne(r[0].zoom);if("number"!=typeof e)return[new ni(s,r[0].zoom,"stop zoom values must be numbers")];if(o&&o>e)return[new ni(s,r[0].zoom,"stop zoom values must appear in ascending order")];e!==o&&(o=e,i=void 0,a={}),n=n.concat(ri({key:`${s}[0]`,value:r[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:oi,value:p}}))}else n=n.concat(p({key:`${s}[0]`,value:r[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},r));return Yr(re(r[1]))?n.concat([new ni(`${s}[1]`,r[1],"expressions are not allowed in function stops.")]):n.concat(Fi({key:`${s}[1]`,value:r[1],valueSpec:e,style:t.style,styleSpec:t.styleSpec}))}function p(t,o){const s=Br(t.value),l=ne(t.value),c=null!==t.value?t.value:o;if(r){if(s!==r)return[new ni(t.key,c,`${s} stop domain type must match previous stop domain type ${r}`)]}else r=s;if("number"!==s&&"string"!==s&&"boolean"!==s&&"number"!=typeof l&&"string"!=typeof l&&"boolean"!=typeof l)return[new ni(t.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==n){let r=`number expected, ${s} found`;return Nr(e)&&void 0===n&&(r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ni(t.key,c,r)]}return"categorical"!==n||"number"!==s||"number"==typeof l&&isFinite(l)&&Math.floor(l)===l?"categorical"!==n&&"number"===s&&"number"==typeof l&&"number"==typeof i&&void 0!==i&&l<i?[new ni(t.key,c,"stop domain values must appear in ascending order")]:(i=l,"categorical"===n&&l in a?[new ni(t.key,c,"stop domain values must be unique")]:(a[l]=!0,[])):[new ni(t.key,c,`integer expected, found ${String(l)}`)]}}function si(t){const e=("property"===t.expressionContext?Qr:Zr)(re(t.value),t.valueSpec);if("error"===e.result)return e.value.map((e=>new ni(`${t.key}${e.key}`,t.value,e.message)));const n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!n.outputDefined())return[new ni(t.key,t.value,`Invalid data expression for "${t.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===t.expressionContext&&"layout"===t.propertyType&&!wn(n))return[new ni(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext)return li(n,t);if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!Sn(n,["zoom","feature-state"]))return[new ni(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!bn(n))return[new ni(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function li(t,e){const n=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(e.valueSpec&&e.valueSpec.expression)for(const i of e.valueSpec.expression.parameters)n.delete(i);if(0===n.size)return[];const r=[];return t instanceof tn&&n.has(t.name)?[new ni(e.key,e.value,`["${t.name}"] expression is not supported in a filter for a ${e.object.type} layer with id: ${e.object.id}`)]:(t.eachChild((t=>{r.push(...li(t,e))})),r)}function ci(t){const e=t.key,n=t.value,r=t.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(ne(n))&&i.push(new ni(e,n,`expected one of [${r.values.join(", ")}], ${JSON.stringify(n)} found`)):-1===Object.keys(r.values).indexOf(ne(n))&&i.push(new ni(e,n,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(n)} found`)),i}function ui(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!ui(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}function hi(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fill";if(null==t)return{filter:()=>!0,needGeometry:!1,needFeature:!1};ui(t)||(t=vi(t));const n=t;let r=!0;try{r=function(t){if(!fi(t))return t;let e=re(t);return di(e),e=pi(e),e}(n)}catch(t){console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(n,null,2)}\n        `)}const i=te[`filter_${e}`],o=Zr(r,i);let a=null;if("error"===o.result)throw new Error(o.value.map((t=>`${t.key}: ${t.message}`)).join(", "));a=(t,e,n)=>o.value.evaluate(t,e,{},n);let s=null,l=null;if(r!==n){const t=Zr(n,i);if("error"===t.result)throw new Error(t.value.map((t=>`${t.key}: ${t.message}`)).join(", "));s=(e,n,r,i,o)=>t.value.evaluate(e,n,{},r,void 0,void 0,i,o),l=!bn(t.value.expression)}return{filter:a,dynamicFilter:s||void 0,needGeometry:yi(r),needFeature:!!l}}function pi(t){if(!Array.isArray(t))return t;const e=function(t){if(gi.has(t[0]))for(let e=1;e<t.length;e++)if(fi(t[e]))return!0;return t}(t);return!0===e?e:e.map((t=>pi(t)))}function di(t){let e=!1;const n=[];if("case"===t[0]){for(let r=1;r<t.length-1;r+=2)e=e||fi(t[r]),n.push(t[r+1]);n.push(t[t.length-1])}else if("match"===t[0]){e=e||fi(t[1]);for(let e=2;e<t.length-1;e+=2)n.push(t[e+1]);n.push(t[t.length-1])}else if("step"===t[0]){e=e||fi(t[1]);for(let e=1;e<t.length-1;e+=2)n.push(t[e+1])}e&&(t.length=0,t.push("any",...n));for(let r=1;r<t.length;r++)di(t[r])}function fi(t){if(!Array.isArray(t))return!1;if("pitch"===(e=t[0])||"distance-from-center"===e)return!0;var e;for(let n=1;n<t.length;n++)if(fi(t[n]))return!0;return!1}const gi=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function mi(t,e){return t<e?-1:t>e?1:0}function yi(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(let e=1;e<t.length;e++)if(yi(t[e]))return!0;return!1}function vi(t){if(!t)return!0;const e=t[0];return t.length<=1?"any"!==e:"=="===e?xi(t[1],t[2],"=="):"!="===e?wi(xi(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?xi(t[1],t[2],e):"any"===e?(n=t.slice(1),["any"].concat(n.map(vi))):"all"===e?["all"].concat(t.slice(1).map(vi)):"none"===e?["all"].concat(t.slice(1).map(vi).map(wi)):"in"===e?_i(t[1],t.slice(2)):"!in"===e?wi(_i(t[1],t.slice(2))):"has"===e?bi(t[1]):"!has"===e?wi(bi(t[1])):"within"!==e||t;var n}function xi(t,e,n){switch(t){case"$type":return[`filter-type-${n}`,e];case"$id":return[`filter-id-${n}`,e];default:return[`filter-${n}`,t,e]}}function _i(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((t=>typeof t!=typeof e[0]))?["filter-in-large",t,["literal",e.sort(mi)]]:["filter-in-small",t,["literal",e]]}}function bi(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function wi(t){return["!",t]}function Si(t){return ui(re(t.value))?si(ee({},t,{expressionContext:"filter",valueSpec:t.styleSpec[`filter_${t.layerType||"fill"}`]})):Ci(t)}function Ci(t){const e=t.value,n=t.key;if("array"!==Br(e))return[new ni(n,e,`array expected, ${Br(e)} found`)];const r=t.styleSpec;let i,o=[];if(e.length<1)return[new ni(n,e,"filter array must have at least 1 element")];switch(o=o.concat(ci({key:`${n}[0]`,value:e[0],valueSpec:r.filter_operator,style:t.style,styleSpec:t.styleSpec})),ne(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===ne(e[1])&&o.push(new ni(n,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&o.push(new ni(n,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(i=Br(e[1]),"string"!==i&&o.push(new ni(`${n}[1]`,e[1],`string expected, ${i} found`)));for(let a=2;a<e.length;a++)i=Br(e[a]),"$type"===ne(e[1])?o=o.concat(ci({key:`${n}[${a}]`,value:e[a],valueSpec:r.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&o.push(new ni(`${n}[${a}]`,e[a],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let r=1;r<e.length;r++)o=o.concat(Ci({key:`${n}[${r}]`,value:e[r],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":i=Br(e[1]),2!==e.length?o.push(new ni(n,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==i&&o.push(new ni(`${n}[1]`,e[1],`string expected, ${i} found`));break;case"within":i=Br(e[1]),2!==e.length?o.push(new ni(n,e,`filter array for "${e[0]}" operator must have 2 elements`)):"object"!==i&&o.push(new ni(`${n}[1]`,e[1],`object expected, ${i} found`))}return o}function Ei(t,e){const n=t.key,r=t.style,i=t.styleSpec,o=t.value,a=t.objectKey,s=i[`${e}_${t.layerType}`];if(!s)return[];const l=a.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return Fi({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});const c=t.valueSpec||s[a];if(!c)return[new ni(n,o,`unknown property "${a}"`)];let u;if("string"===Br(o)&&Nr(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o))){const t=`\`{ "type": "identity", "property": ${u?JSON.stringify(u[1]):'"_"'} }\``;return[new ni(n,o,`"${a}" does not support interpolation syntax\nUse an identity property function instead: ${t}.`)]}const h=[];return"symbol"===t.layerType&&("text-field"===a&&r&&!r.glyphs&&h.push(new ni(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&$r(re(o))&&"identity"===ne(o.type)&&h.push(new ni(n,o,'"text-font" does not support identity functions'))),h.concat(Fi({key:t.key,value:o,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:a}))}function ki(t){return Ei(t,"paint")}function Mi(t){return Ei(t,"layout")}function Ti(t){let e=[];const n=t.value,r=t.key,i=t.style,o=t.styleSpec;n.type||n.ref||e.push(new ni(r,n,'either "type" or "ref" is required'));let a=ne(n.type);const s=ne(n.ref);if(n.id){const o=ne(n.id);for(let a=0;a<t.arrayIndex;a++){const t=i.layers[a];ne(t.id)===o&&e.push(new ni(r,n.id,`duplicate layer id "${n.id}", previously used at line ${t.id.__line__}`))}}if("ref"in n){let t;["type","source","source-layer","filter","layout"].forEach((t=>{t in n&&e.push(new ni(r,n[t],`"${t}" is prohibited for ref layers`))})),i.layers.forEach((e=>{ne(e.id)===s&&(t=e)})),t?t.ref?e.push(new ni(r,n.ref,"ref cannot reference another ref layer")):a=ne(t.type):"string"==typeof s&&e.push(new ni(r,n.ref,`ref layer "${s}" not found`))}else if("background"!==a&&"sky"!==a)if(n.source){const t=i.sources&&i.sources[n.source],o=t&&ne(t.type);t?"vector"===o&&"raster"===a?e.push(new ni(r,n.source,`layer "${n.id}" requires a raster source`)):"raster"===o&&"raster"!==a?e.push(new ni(r,n.source,`layer "${n.id}" requires a vector source`)):"vector"!==o||n["source-layer"]?"raster-dem"===o&&"hillshade"!==a?e.push(new ni(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==a||!n.paint||!n.paint["line-gradient"]&&!n.paint["line-trim-offset"]||"geojson"===o&&t.lineMetrics||e.push(new ni(r,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new ni(r,n,`layer "${n.id}" must specify a "source-layer"`)):e.push(new ni(r,n.source,`source "${n.source}" not found`))}else e.push(new ni(r,n,'missing required property "source"'));return e=e.concat(ri({key:r,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Fi({key:`${r}.type`,value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"}),filter:t=>Si(ee({layerType:a},t)),layout:t=>ri({layer:n,key:t.key,value:t.value,valueSpec:{},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>Mi(ee({layerType:a},t))}}),paint:t=>ri({layer:n,key:t.key,value:t.value,valueSpec:{},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>ki(ee({layerType:a},t))}})}})),e}function Ii(t){const e=t.value,n=t.key,r=Br(e);return"string"!==r?[new ni(n,e,`string expected, ${r} found`)]:[]}const Pi={promoteId:function(t){let{key:e,value:n}=t;if("string"===Br(n))return Ii({key:e,value:n});{const t=[];for(const r in n)t.push(...Ii({key:`${e}.${r}`,value:n[r]}));return t}}};function Oi(t){const e=t.value,n=t.key,r=t.styleSpec,i=t.style;if(!e.type)return[new ni(n,e,'"type" is required')];const o=ne(e.type);let a;switch(o){case"vector":case"raster":case"raster-dem":return a=ri({key:n,value:e,valueSpec:r[`source_${o.replace("-","_")}`],style:t.style,styleSpec:r,objectElementValidators:Pi}),a;case"geojson":if(a=ri({key:n,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:Pi}),e.cluster)for(const t in e.clusterProperties){const[r,i]=e.clusterProperties[t],o="string"==typeof r?[r,["accumulated"],["get",t]]:r;a.push(...si({key:`${n}.${t}.map`,value:i,expressionContext:"cluster-map"})),a.push(...si({key:`${n}.${t}.reduce`,value:o,expressionContext:"cluster-reduce"}))}return a;case"video":return ri({key:n,value:e,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return ri({key:n,value:e,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new ni(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ci({key:`${n}.type`,value:e.type,valueSpec:{values:Ai(r)},style:i,styleSpec:r})}}function Ai(t){return t.source.reduce(((e,n)=>{const r=t[n];return"enum"===r.type.type&&(e=e.concat(Object.keys(r.type.values))),e}),[])}function Di(t){const e=t.value,n=t.styleSpec,r=n.light,i=t.style;let o=[];const a=Br(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new ni("light",e,`object expected, ${a} found`)]),o;for(const s in e){const t=s.match(/^(.*)-transition$/);o=o.concat(t&&r[t[1]]&&r[t[1]].transition?Fi({key:s,value:e[s],valueSpec:n.transition,style:i,styleSpec:n}):r[s]?Fi({key:s,value:e[s],valueSpec:r[s],style:i,styleSpec:n}):[new ni(s,e[s],`unknown property "${s}"`)])}return o}function Ri(t){const e=t.value,n=t.key,r=t.style,i=t.styleSpec,o=i.terrain;let a=[];const s=Br(e);if(void 0===e)return a;if("object"!==s)return a=a.concat([new ni("terrain",e,`object expected, ${s} found`)]),a;for(const l in e){const t=l.match(/^(.*)-transition$/);a=a.concat(t&&o[t[1]]&&o[t[1]].transition?Fi({key:l,value:e[l],valueSpec:i.transition,style:r,styleSpec:i}):o[l]?Fi({key:l,value:e[l],valueSpec:o[l],style:r,styleSpec:i}):[new ni(l,e[l],`unknown property "${l}"`)])}if(e.source){const t=r.sources&&r.sources[e.source],i=t&&ne(t.type);t?"raster-dem"!==i&&a.push(new ni(n,e.source,`terrain cannot be used with a source of type ${String(i)}, it only be used with a "raster-dem" source type`)):a.push(new ni(n,e.source,`source "${e.source}" not found`))}else a.push(new ni(n,e,'terrain is missing required property "source"'));return a}function Li(t){const e=t.value,n=t.style,r=t.styleSpec,i=r.fog;let o=[];const a=Br(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new ni("fog",e,`object expected, ${a} found`)]),o;for(const s in e){const t=s.match(/^(.*)-transition$/);o=o.concat(t&&i[t[1]]&&i[t[1]].transition?Fi({key:s,value:e[s],valueSpec:r.transition,style:n,styleSpec:r}):i[s]?Fi({key:s,value:e[s],valueSpec:i[s],style:n,styleSpec:r}):[new ni(s,e[s],`unknown property "${s}"`)])}return o}const Ni={"*":()=>[],array:ii,boolean:function(t){const e=t.value,n=t.key,r=Br(e);return"boolean"!==r?[new ni(n,e,`boolean expected, ${r} found`)]:[]},number:oi,color:function(t){const e=t.key,n=t.value,r=Br(n);return"string"!==r?[new ni(e,n,`color expected, ${r} found`)]:null===Ce(n)?[new ni(e,n,`color expected, "${n}" found`)]:[]},enum:ci,filter:Si,function:ai,layer:Ti,object:ri,source:Oi,light:Di,terrain:Ri,fog:Li,string:Ii,formatted:function(t){return 0===Ii(t).length?[]:si(t)},resolvedImage:function(t){return 0===Ii(t).length?[]:si(t)},projection:function(t){const e=t.value,n=t.styleSpec,r=n.projection,i=t.style;let o=[];const a=Br(e);if("object"===a)for(const s in e)o=o.concat(Fi({key:s,value:e[s],valueSpec:r[s],style:i,styleSpec:n}));else"string"!==a&&(o=o.concat([new ni("projection",e,`object or string expected, ${a} found`)]));return o}};function Fi(t){const e=t.value,n=t.valueSpec,r=t.styleSpec;return n.expression&&$r(ne(e))?ai(t):n.expression&&Yr(re(e))?si(t):n.type&&Ni[n.type]?Ni[n.type](t):ri(ee({},t,{valueSpec:n.type?r[n.type]:n}))}function zi(t){const e=t.value,n=t.key,r=Ii(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new ni(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new ni(n,e,'"glyphs" url must include a "{range}" token'))),r}function Bi(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te;return Ui(Fi({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:zi,"*":()=>[]}}))}const $i=t=>Ui(ki(t)),ji=t=>Ui(Mi(t));function Ui(t){return t.slice().sort(((t,e)=>t.line&&e.line?t.line-e.line:0))}function Vi(t,e){let n=!1;if(e&&e.length)for(const r of e)t.fire(new Jt(new Error(r.message))),n=!0;return n}var Hi=Wi,Gi=3;function Wi(t,e,n){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],this.d=(e=i[1])+2*(n=i[2]);for(var o=0;o<this.d*this.d;o++){var a=i[Gi+o],s=i[Gi+o+1];r.push(a===s?null:i.subarray(a,s))}var l=i[Gi+r.length+1];this.keys=i.subarray(i[Gi+r.length],l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var u=n/e*t;this.min=-u,this.max=t+u}Wi.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Wi.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Wi.prototype._insertCell=function(t,e,n,r,i,o){this.cells[i].push(o)},Wi.prototype.query=function(t,e,n,r,i){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=n&&a<=r&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,n,r,this._queryCell,s,{},i),s},Wi.prototype._queryCell=function(t,e,n,r,i,o,a,s){var l=this.cells[i];if(null!==l)for(var c=this.keys,u=this.bboxes,h=0;h<l.length;h++){var p=l[h];if(void 0===a[p]){var d=4*p;(s?s(u[d+0],u[d+1],u[d+2],u[d+3]):t<=u[d+2]&&e<=u[d+3]&&n>=u[d+0]&&r>=u[d+1])?(a[p]=!0,o.push(c[p])):a[p]=!1}}},Wi.prototype._forEachCell=function(t,e,n,r,i,o,a,s){for(var l=this._convertToCellCoord(t),c=this._convertToCellCoord(e),u=this._convertToCellCoord(n),h=this._convertToCellCoord(r),p=l;p<=u;p++)for(var d=c;d<=h;d++){var f=this.d*d+p;if((!s||s(this._convertFromCellCoord(p),this._convertFromCellCoord(d),this._convertFromCellCoord(p+1),this._convertFromCellCoord(d+1)))&&i.call(this,t,e,n,r,f,o,a,s))return}},Wi.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Wi.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Wi.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=Gi+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(e+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];i[Gi+a]=o,i.set(s,o),o+=s.length}return i[Gi+t.length]=o,i.set(this.keys,o),i[Gi+t.length+1]=o+=this.keys.length,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};var Xi=p(Hi);const qi={};function Yi(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),qi[e]={klass:t,omit:n.omit||[]}}Yi(Object,"Object"),Xi.serialize=function(t,e){const n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}},Xi.deserialize=function(t){return new Xi(t.buffer)},Object.defineProperty(Xi,"name",{value:"Grid"}),Yi(Xi,"Grid"),Yi(Oe,"Color"),Yi(Error,"Error"),Yi(ct,"AJAXError"),Yi(Le,"ResolvedImage"),Yi(ti,"StylePropertyFunction"),Yi(qr,"StyleExpression",{omit:["_evaluator"]}),Yi(Jr,"ZoomDependentExpression"),Yi(Kr,"ZoomConstantExpression"),Yi(tn,"CompoundExpression",{omit:["_evaluate"]});for(const Sg in Dr)qi[Dr[Sg]._classRegistryKey]||Yi(Dr[Sg],`Expression${Sg}`);function Zi(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Ki(t){return e.ImageBitmap&&t instanceof e.ImageBitmap}function Ji(t,n){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(Zi(t)||Ki(t))return n&&n.push(t),t;if(ArrayBuffer.isView(t)){const e=t;return n&&n.push(e.buffer),e}if(t instanceof e.ImageData)return n&&n.push(t.data.buffer),t;if(Array.isArray(t)){const e=[];for(const r of t)e.push(Ji(r,n));return e}if("object"==typeof t){const e=t.constructor,r=e._classRegistryKey;if(!r)throw new Error(`can't serialize object of unregistered class ${r}`);const i=e.serialize?e.serialize(t,n):{};if(!e.serialize){for(const e in t)t.hasOwnProperty(e)&&(qi[r].omit.indexOf(e)>=0||(i[e]=Ji(t[e],n)));t instanceof Error&&(i.message=t.message)}if(i.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==r&&(i.$name=r),i}throw new Error("can't serialize object of type "+typeof t)}function Qi(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||Zi(t)||Ki(t)||ArrayBuffer.isView(t)||t instanceof e.ImageData)return t;if(Array.isArray(t))return t.map(Qi);if("object"==typeof t){const e=t.$name||"Object",{klass:n}=qi[e];if(!n)throw new Error(`can't deserialize unregistered class ${e}`);if(n.deserialize)return n.deserialize(t);const r=Object.create(n.prototype);for(const i of Object.keys(t))"$name"!==i&&(r[i]=Qi(t[i]));return r}throw new Error("can't deserialize object of type "+typeof t)}const to={"Latin-1 Supplement":t=>t>=128&&t<=255,Arabic:t=>t>=1536&&t<=1791,"Arabic Supplement":t=>t>=1872&&t<=1919,"Arabic Extended-A":t=>t>=2208&&t<=2303,"Hangul Jamo":t=>t>=4352&&t<=4607,"Unified Canadian Aboriginal Syllabics":t=>t>=5120&&t<=5759,Khmer:t=>t>=6016&&t<=6143,"Unified Canadian Aboriginal Syllabics Extended":t=>t>=6320&&t<=6399,"General Punctuation":t=>t>=8192&&t<=8303,"Letterlike Symbols":t=>t>=8448&&t<=8527,"Number Forms":t=>t>=8528&&t<=8591,"Miscellaneous Technical":t=>t>=8960&&t<=9215,"Control Pictures":t=>t>=9216&&t<=9279,"Optical Character Recognition":t=>t>=9280&&t<=9311,"Enclosed Alphanumerics":t=>t>=9312&&t<=9471,"Geometric Shapes":t=>t>=9632&&t<=9727,"Miscellaneous Symbols":t=>t>=9728&&t<=9983,"Miscellaneous Symbols and Arrows":t=>t>=11008&&t<=11263,"CJK Radicals Supplement":t=>t>=11904&&t<=12031,"Kangxi Radicals":t=>t>=12032&&t<=12255,"Ideographic Description Characters":t=>t>=12272&&t<=12287,"CJK Symbols and Punctuation":t=>t>=12288&&t<=12351,Hiragana:t=>t>=12352&&t<=12447,Katakana:t=>t>=12448&&t<=12543,Bopomofo:t=>t>=12544&&t<=12591,"Hangul Compatibility Jamo":t=>t>=12592&&t<=12687,Kanbun:t=>t>=12688&&t<=12703,"Bopomofo Extended":t=>t>=12704&&t<=12735,"CJK Strokes":t=>t>=12736&&t<=12783,"Katakana Phonetic Extensions":t=>t>=12784&&t<=12799,"Enclosed CJK Letters and Months":t=>t>=12800&&t<=13055,"CJK Compatibility":t=>t>=13056&&t<=13311,"CJK Unified Ideographs Extension A":t=>t>=13312&&t<=19903,"Yijing Hexagram Symbols":t=>t>=19904&&t<=19967,"CJK Unified Ideographs":t=>t>=19968&&t<=40959,"Yi Syllables":t=>t>=40960&&t<=42127,"Yi Radicals":t=>t>=42128&&t<=42191,"Hangul Jamo Extended-A":t=>t>=43360&&t<=43391,"Hangul Syllables":t=>t>=44032&&t<=55215,"Hangul Jamo Extended-B":t=>t>=55216&&t<=55295,"Private Use Area":t=>t>=57344&&t<=63743,"CJK Compatibility Ideographs":t=>t>=63744&&t<=64255,"Arabic Presentation Forms-A":t=>t>=64336&&t<=65023,"Vertical Forms":t=>t>=65040&&t<=65055,"CJK Compatibility Forms":t=>t>=65072&&t<=65103,"Small Form Variants":t=>t>=65104&&t<=65135,"Arabic Presentation Forms-B":t=>t>=65136&&t<=65279,"Halfwidth and Fullwidth Forms":t=>t>=65280&&t<=65519};function eo(t){for(const e of t)if(io(e.charCodeAt(0)))return!0;return!1}function no(t){for(const e of t)if(!ro(e.charCodeAt(0)))return!1;return!0}function ro(t){return!(to.Arabic(t)||to["Arabic Supplement"](t)||to["Arabic Extended-A"](t)||to["Arabic Presentation Forms-A"](t)||to["Arabic Presentation Forms-B"](t))}function io(t){return!(746!==t&&747!==t&&(t<4352||!(to["Bopomofo Extended"](t)||to.Bopomofo(t)||to["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||to["CJK Compatibility Ideographs"](t)||to["CJK Compatibility"](t)||to["CJK Radicals Supplement"](t)||to["CJK Strokes"](t)||!(!to["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||to["CJK Unified Ideographs Extension A"](t)||to["CJK Unified Ideographs"](t)||to["Enclosed CJK Letters and Months"](t)||to["Hangul Compatibility Jamo"](t)||to["Hangul Jamo Extended-A"](t)||to["Hangul Jamo Extended-B"](t)||to["Hangul Jamo"](t)||to["Hangul Syllables"](t)||to.Hiragana(t)||to["Ideographic Description Characters"](t)||to.Kanbun(t)||to["Kangxi Radicals"](t)||to["Katakana Phonetic Extensions"](t)||to.Katakana(t)&&12540!==t||!(!to["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!to["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||to["Unified Canadian Aboriginal Syllabics"](t)||to["Unified Canadian Aboriginal Syllabics Extended"](t)||to["Vertical Forms"](t)||to["Yijing Hexagram Symbols"](t)||to["Yi Syllables"](t)||to["Yi Radicals"](t))))}function oo(t){return!(io(t)||function(t){return!!(to["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||to["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||to["Letterlike Symbols"](t)||to["Number Forms"](t)||to["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||to["Control Pictures"](t)&&9251!==t||to["Optical Character Recognition"](t)||to["Enclosed Alphanumerics"](t)||to["Geometric Shapes"](t)||to["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||to["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||to["CJK Symbols and Punctuation"](t)||to.Katakana(t)||to["Private Use Area"](t)||to["CJK Compatibility Forms"](t)||to["Small Form Variants"](t)||to["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function ao(t){return t>=1424&&t<=2303||to["Arabic Presentation Forms-A"](t)||to["Arabic Presentation Forms-B"](t)}function so(t,e){return!(!e&&ao(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||to.Khmer(t))}function lo(t){for(const e of t)if(ao(e.charCodeAt(0)))return!0;return!1}const co="deferred",uo="loading",ho="loaded";let po=null,fo="unavailable",go=null;const mo=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(fo="error"),po&&po(t)};function yo(){vo.fire(new Kt("pluginStateChange",{pluginStatus:fo,pluginURL:go}))}const vo=new Qt,xo=function(){return fo},_o=function(){if(fo!==co||!go)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");fo=uo,yo(),go&&pt({url:go},(t=>{t?mo(t):(fo=ho,yo())}))},bo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>fo===ho||null!=bo.applyArabicShaping,isLoading:()=>fo===uo,setState(t){fo=t.pluginStatus,go=t.pluginURL},isParsed:()=>null!=bo.applyArabicShaping&&null!=bo.processBidirectionalText&&null!=bo.processStyledBidirectionalText,getPluginURL:()=>go};class wo{constructor(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.transition=e.transition,this.pitch=e.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(t){return function(t,e){for(const n of t)if(!so(n.charCodeAt(0),e))return!1;return!0}(t,bo.isLoaded())}}class So{constructor(t,e){this.property=t,this.value=e,this.expression=function(t,e){if($r(t))return new ti(t,e);if(Yr(t)){const n=Qr(t,e);if("error"===n.result)throw new Error(n.value.map((t=>`${t.key}: ${t.message}`)).join(", "));return n.value}{let n=t;return"string"==typeof t&&"color"===e.type&&(n=Oe.parse(t)),{kind:"constant",evaluate:()=>n}}}(void 0===e?t.specification.default:e,t.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(t,e,n){return this.property.possiblyEvaluate(this,t,e,n)}}class Co{constructor(t){this.property=t,this.value=new So(t,void 0)}transitioned(t,e){return new ko(this.property,this.value,e,A({},t.transition,this.transition),t.now)}untransitioned(){return new ko(this.property,this.value,null,{},0)}}class Eo{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return U(this._values[t].value.value)}setValue(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Co(this._values[t].property)),this._values[t].value=new So(this._values[t].property,null===e?void 0:U(e))}getTransition(t){return U(this._values[t].transition)}setTransition(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Co(this._values[t].property)),this._values[t].transition=U(e)||void 0}serialize(){const t={};for(const e of Object.keys(this._values)){const n=this.getValue(e);void 0!==n&&(t[e]=n);const r=this.getTransition(e);void 0!==r&&(t[`${e}-transition`]=r)}return t}transitioned(t,e){const n=new Mo(this._properties);for(const r of Object.keys(this._values))n._values[r]=this._values[r].transitioned(t,e._values[r]);return n}untransitioned(){const t=new Mo(this._properties);for(const e of Object.keys(this._values))t._values[e]=this._values[e].untransitioned();return t}}class ko{constructor(t,e,n,r,i){const o=r.delay||0,a=r.duration||0;i=i||0,this.property=t,this.value=e,this.begin=i+o,this.end=this.begin+a,t.specification.transition&&(r.delay||r.duration)&&(this.prior=n)}possiblyEvaluate(t,e,n){const r=t.now||0,i=this.value.possiblyEvaluate(t,e,n),o=this.prior;if(o){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return o.possiblyEvaluate(t,e,n);{const a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,n),i,C(a))}}return i}}class Mo{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,e,n){const r=new Po(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(t,e,n);return r}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class To{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return U(this._values[t].value)}setValue(t,e){this._values[t]=new So(this._values[t].property,null===e?void 0:U(e))}serialize(){const t={};for(const e of Object.keys(this._values)){const n=this.getValue(e);void 0!==n&&(t[e]=n)}return t}possiblyEvaluate(t,e,n){const r=new Po(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(t,e,n);return r}}class Io{constructor(t,e,n){this.property=t,this.value=e,this.parameters=n}isConstant(){return"constant"===this.value.kind}constantOr(t){return"constant"===this.value.kind?this.value.value:t}evaluate(t,e,n,r){return this.property.evaluate(this.value,this.parameters,t,e,n,r)}}class Po{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class Oo{constructor(t){this.specification=t}possiblyEvaluate(t,e){return t.expression.evaluate(e)}interpolate(t,e,n){const r=Dn[this.specification.type];return r?r(t,e,n):t}}class Ao{constructor(t,e){this.specification=t,this.overrides=e}possiblyEvaluate(t,e,n,r){return new Io(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},n,r)}:t.expression,e)}interpolate(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Io(this,{kind:"constant",value:void 0},t.parameters);const r=Dn[this.specification.type];return r?new Io(this,{kind:"constant",value:r(t.value.value,e.value.value,n)},t.parameters):t}evaluate(t,e,n,r,i,o){return"constant"===t.kind?t.value:t.evaluate(e,n,r,i,o)}}class Do{constructor(t){this.specification=t}possiblyEvaluate(t,e,n,r){return!!t.expression.evaluate(e,null,{},n,r)}interpolate(){return!1}}class Ro{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const e=new wo(0,{});for(const n in t){const r=t[n];r.specification.overridable&&this.overridableProperties.push(n);const i=this.defaultPropertyValues[n]=new So(r,void 0),o=this.defaultTransitionablePropertyValues[n]=new Co(r);this.defaultTransitioningPropertyValues[n]=o.untransitioned(),this.defaultPossiblyEvaluatedValues[n]=i.possiblyEvaluate(e)}}}function Lo(t,e){return 256*(t=M(Math.floor(t),0,255))+M(Math.floor(e),0,255)}Yi(Ao,"DataDrivenProperty"),Yi(Oo,"DataConstantProperty"),Yi(Do,"ColorRampProperty");const No={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Fo{constructor(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class zo{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Bo(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,r=0;return{members:t.map((t=>{const i=No[t.type].BYTES_PER_ELEMENT,o=n=$o(n,Math.max(e,i)),a=t.components||1;return r=Math.max(r,i),n+=i*a,{name:t.name,type:t.type,components:a,offset:o}})),size:$o(n,Math.max(r,e)),alignment:e}}function $o(t,e){return Math.ceil(t/e)*e}class jo extends zo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const r=2*t;return this.int16[r+0]=e,this.int16[r+1]=n,t}}jo.prototype.bytesPerElement=4,Yi(jo,"StructArrayLayout2i4");class Uo extends zo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}emplace(t,e,n,r){const i=3*t;return this.int16[i+0]=e,this.int16[i+1]=n,this.int16[i+2]=r,t}}Uo.prototype.bytesPerElement=6,Yi(Uo,"StructArrayLayout3i6");class Vo extends zo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const o=4*t;return this.int16[o+0]=e,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,t}}Vo.prototype.bytesPerElement=8,Yi(Vo,"StructArrayLayout4i8");class Ho extends zo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,r,i,o,a)}emplace(t,e,n,r,i,o,a,s){const l=6*t,c=12*t,u=3*t;return this.int16[l+0]=e,this.int16[l+1]=n,this.uint8[c+4]=r,this.uint8[c+5]=i,this.uint8[c+6]=o,this.uint8[c+7]=a,this.float32[u+2]=s,t}}Ho.prototype.bytesPerElement=12,Yi(Ho,"StructArrayLayout2i4ub1f12");class Go extends zo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const o=4*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,t}}Go.prototype.bytesPerElement=16,Yi(Go,"StructArrayLayout4f16");class Wo extends zo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,r,i)}emplace(t,e,n,r,i,o){const a=6*t,s=3*t;return this.uint16[a+0]=e,this.uint16[a+1]=n,this.uint16[a+2]=r,this.uint16[a+3]=i,this.float32[s+2]=o,t}}Wo.prototype.bytesPerElement=12,Yi(Wo,"StructArrayLayout4ui1f12");class Xo extends zo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const o=4*t;return this.uint16[o+0]=e,this.uint16[o+1]=n,this.uint16[o+2]=r,this.uint16[o+3]=i,t}}Xo.prototype.bytesPerElement=8,Yi(Xo,"StructArrayLayout4ui8");class qo extends zo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)}emplace(t,e,n,r,i,o,a){const s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t}}qo.prototype.bytesPerElement=12,Yi(qo,"StructArrayLayout6i12");class Yo extends zo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,a,s,l,c,u,h){const p=this.length;return this.resize(p+1),this.emplace(p,t,e,n,r,i,o,a,s,l,c,u,h)}emplace(t,e,n,r,i,o,a,s,l,c,u,h,p){const d=12*t;return this.int16[d+0]=e,this.int16[d+1]=n,this.int16[d+2]=r,this.int16[d+3]=i,this.uint16[d+4]=o,this.uint16[d+5]=a,this.uint16[d+6]=s,this.uint16[d+7]=l,this.int16[d+8]=c,this.int16[d+9]=u,this.int16[d+10]=h,this.int16[d+11]=p,t}}Yo.prototype.bytesPerElement=24,Yi(Yo,"StructArrayLayout4i4ui4i24");class Zo extends zo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)}emplace(t,e,n,r,i,o,a){const s=10*t,l=5*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.float32[l+2]=i,this.float32[l+3]=o,this.float32[l+4]=a,t}}Zo.prototype.bytesPerElement=20,Yi(Zo,"StructArrayLayout3i3f20");class Ko extends zo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint32[1*t+0]=e,t}}Ko.prototype.bytesPerElement=4,Yi(Ko,"StructArrayLayout1ul4");class Jo extends zo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,a,s,l,c,u,h,p){const d=this.length;return this.resize(d+1),this.emplace(d,t,e,n,r,i,o,a,s,l,c,u,h,p)}emplace(t,e,n,r,i,o,a,s,l,c,u,h,p,d){const f=20*t,g=10*t;return this.int16[f+0]=e,this.int16[f+1]=n,this.int16[f+2]=r,this.int16[f+3]=i,this.int16[f+4]=o,this.float32[g+3]=a,this.float32[g+4]=s,this.float32[g+5]=l,this.float32[g+6]=c,this.int16[f+14]=u,this.uint32[g+8]=h,this.uint16[f+18]=p,this.uint16[f+19]=d,t}}Jo.prototype.bytesPerElement=40,Yi(Jo,"StructArrayLayout5i4f1i1ul2ui40");class Qo extends zo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,r,i,o,a)}emplace(t,e,n,r,i,o,a,s){const l=8*t;return this.int16[l+0]=e,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+4]=i,this.int16[l+5]=o,this.int16[l+6]=a,this.int16[l+7]=s,t}}Qo.prototype.bytesPerElement=16,Yi(Qo,"StructArrayLayout3i2i2i16");class ta extends zo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,r,i)}emplace(t,e,n,r,i,o){const a=4*t,s=8*t;return this.float32[a+0]=e,this.float32[a+1]=n,this.float32[a+2]=r,this.int16[s+6]=i,this.int16[s+7]=o,t}}ta.prototype.bytesPerElement=16,Yi(ta,"StructArrayLayout2f1f2i16");class ea extends zo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const o=12*t,a=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=n,this.float32[a+1]=r,this.float32[a+2]=i,t}}ea.prototype.bytesPerElement=12,Yi(ea,"StructArrayLayout2ub2f12");class na extends zo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}emplace(t,e,n,r){const i=3*t;return this.float32[i+0]=e,this.float32[i+1]=n,this.float32[i+2]=r,t}}na.prototype.bytesPerElement=12,Yi(na,"StructArrayLayout3f12");class ra extends zo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}emplace(t,e,n,r){const i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,this.uint16[i+2]=r,t}}ra.prototype.bytesPerElement=6,Yi(ra,"StructArrayLayout3ui6");class ia extends zo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,a,s,l,c,u,h,p,d,f,g,m,y,v,x,_){const b=this.length;return this.resize(b+1),this.emplace(b,t,e,n,r,i,o,a,s,l,c,u,h,p,d,f,g,m,y,v,x,_)}emplace(t,e,n,r,i,o,a,s,l,c,u,h,p,d,f,g,m,y,v,x,_,b){const w=30*t,S=15*t,C=60*t;return this.int16[w+0]=e,this.int16[w+1]=n,this.int16[w+2]=r,this.float32[S+2]=i,this.float32[S+3]=o,this.uint16[w+8]=a,this.uint16[w+9]=s,this.uint32[S+5]=l,this.uint32[S+6]=c,this.uint32[S+7]=u,this.uint16[w+16]=h,this.uint16[w+17]=p,this.uint16[w+18]=d,this.float32[S+10]=f,this.float32[S+11]=g,this.uint8[C+48]=m,this.uint8[C+49]=y,this.uint8[C+50]=v,this.uint32[S+13]=x,this.int16[w+28]=_,this.uint8[C+58]=b,t}}ia.prototype.bytesPerElement=60,Yi(ia,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class oa extends zo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,a,s,l,c,u,h,p,d,f,g,m,y,v,x,_,b,w,S,C,E,k,M,T,I){const P=this.length;return this.resize(P+1),this.emplace(P,t,e,n,r,i,o,a,s,l,c,u,h,p,d,f,g,m,y,v,x,_,b,w,S,C,E,k,M,T,I)}emplace(t,e,n,r,i,o,a,s,l,c,u,h,p,d,f,g,m,y,v,x,_,b,w,S,C,E,k,M,T,I,P){const O=38*t,A=19*t;return this.int16[O+0]=e,this.int16[O+1]=n,this.int16[O+2]=r,this.float32[A+2]=i,this.float32[A+3]=o,this.int16[O+8]=a,this.int16[O+9]=s,this.int16[O+10]=l,this.int16[O+11]=c,this.int16[O+12]=u,this.int16[O+13]=h,this.uint16[O+14]=p,this.uint16[O+15]=d,this.uint16[O+16]=f,this.uint16[O+17]=g,this.uint16[O+18]=m,this.uint16[O+19]=y,this.uint16[O+20]=v,this.uint16[O+21]=x,this.uint16[O+22]=_,this.uint16[O+23]=b,this.uint16[O+24]=w,this.uint16[O+25]=S,this.uint16[O+26]=C,this.uint16[O+27]=E,this.uint16[O+28]=k,this.uint32[A+15]=M,this.float32[A+16]=T,this.float32[A+17]=I,this.float32[A+18]=P,t}}oa.prototype.bytesPerElement=76,Yi(oa,"StructArrayLayout3i2f6i15ui1ul3f76");class aa extends zo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.float32[1*t+0]=e,t}}aa.prototype.bytesPerElement=4,Yi(aa,"StructArrayLayout1f4");class sa extends zo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,r,i)}emplace(t,e,n,r,i,o){const a=5*t;return this.float32[a+0]=e,this.float32[a+1]=n,this.float32[a+2]=r,this.float32[a+3]=i,this.float32[a+4]=o,t}}sa.prototype.bytesPerElement=20,Yi(sa,"StructArrayLayout5f20");class la extends zo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const o=6*t;return this.uint32[3*t+0]=e,this.uint16[o+2]=n,this.uint16[o+3]=r,this.uint16[o+4]=i,t}}la.prototype.bytesPerElement=12,Yi(la,"StructArrayLayout1ul3ui12");class ca extends zo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,t}}ca.prototype.bytesPerElement=4,Yi(ca,"StructArrayLayout2ui4");class ua extends zo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint16[1*t+0]=e,t}}ua.prototype.bytesPerElement=2,Yi(ua,"StructArrayLayout1ui2");class ha extends zo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const r=2*t;return this.float32[r+0]=e,this.float32[r+1]=n,t}}ha.prototype.bytesPerElement=8,Yi(ha,"StructArrayLayout2f8");class pa extends Fo{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}pa.prototype.size=40;class da extends Jo{get(t){return new pa(this,t)}}Yi(da,"CollisionBoxArray");class fa extends Fo{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(t){this._structArray.uint8[this._pos1+49]=t}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(t){this._structArray.uint8[this._pos1+50]=t}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(t){this._structArray.uint32[this._pos4+13]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(t){this._structArray.uint8[this._pos1+58]=t}}fa.prototype.size=60;class ga extends ia{get(t){return new fa(this,t)}}Yi(ga,"PlacedSymbolArray");class ma extends Fo{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(t){this._structArray.uint32[this._pos4+15]=t}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}ma.prototype.size=76;class ya extends oa{get(t){return new ma(this,t)}}Yi(ya,"SymbolInstanceArray");class va extends aa{getoffsetX(t){return this.float32[1*t+0]}}Yi(va,"GlyphOffsetArray");class xa extends jo{getx(t){return this.int16[2*t+0]}gety(t){return this.int16[2*t+1]}}Yi(xa,"SymbolLineVertexArray");class _a extends Fo{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}_a.prototype.size=12;class ba extends la{get(t){return new _a(this,t)}}Yi(ba,"FeatureIndexArray");class wa extends ca{geta_centroid_pos0(t){return this.uint16[2*t+0]}geta_centroid_pos1(t){return this.uint16[2*t+1]}}Yi(wa,"FillExtrusionCentroidArray");const Sa=Bo([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Ca=Bo([{name:"a_dash",components:4,type:"Uint16"}]);var Ea={exports:{}},ka={exports:{}};ka.exports=function(t,e){var n,r,i,o,a,s,l,c;for(r=t.length-(n=3&t.length),i=e,a=3432918353,s=461845907,c=0;c<r;)l=255&t.charCodeAt(c)|(255&t.charCodeAt(++c))<<8|(255&t.charCodeAt(++c))<<16|(255&t.charCodeAt(++c))<<24,++c,i=27492+(65535&(o=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&t.charCodeAt(c+2))<<16;case 2:l^=(255&t.charCodeAt(c+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(c)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return i^=t.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0};var Ma=ka.exports,Ta={exports:{}};Ta.exports=function(t,e){for(var n,r=t.length,i=e^r,o=0;r>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&t.charCodeAt(o+2))<<16;case 2:i^=(255&t.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0};var Ia=Ma,Pa=Ta.exports;Ea.exports=Ia,Ea.exports.murmur3=Ia,Ea.exports.murmur2=Pa;var Oa=p(Ea.exports);class Aa{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,e,n,r){this.ids.push(Da(t)),this.positions.push(e,n,r)}getPositions(t){const e=Da(t);let n=0,r=this.ids.length-1;for(;n<r;){const t=n+r>>1;this.ids[t]>=e?r=t:n=t+1}const i=[];for(;this.ids[n]===e;)i.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return i}static serialize(t,e){const n=new Float64Array(t.ids),r=new Uint32Array(t.positions);return Ra(n,r,0,n.length-1),e&&e.push(n.buffer,r.buffer),{ids:n,positions:r}}static deserialize(t){const e=new Aa;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e}}function Da(t){const e=+t;return!isNaN(e)&&Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:Oa(String(t))}function Ra(t,e,n,r){for(;n<r;){const i=t[n+r>>1];let o=n-1,a=r+1;for(;;){do{o++}while(t[o]<i);do{a--}while(t[a]>i);if(o>=a)break;La(t,o,a),La(e,3*o,3*a),La(e,3*o+1,3*a+1),La(e,3*o+2,3*a+2)}a-n<r-a?(Ra(t,e,n,a),n=a+1):(Ra(t,e,a+1,r),r=a)}}function La(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}Yi(Aa,"FeaturePositionMap");class Na{constructor(t){this.gl=t.gl,this.initialized=!1}fetchUniformLocation(t,e){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(t,e),this.initialized=!0),!!this.location}}class Fa extends Na{constructor(t){super(t),this.current=0}set(t,e,n){this.fetchUniformLocation(t,e)&&this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class za extends Na{constructor(t){super(t),this.current=[0,0,0,0]}set(t,e,n){this.fetchUniformLocation(t,e)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3])))}}class Ba extends Na{constructor(t){super(t),this.current=Oe.transparent}set(t,e,n){this.fetchUniformLocation(t,e)&&(n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a)))}}const $a=new Float32Array(16),ja=new Float32Array(9),Ua=new Float32Array(4);function Va(t){return[Lo(255*t.r,255*t.g),Lo(255*t.b,255*t.a)]}class Ha{constructor(t,e,n){this.value=t,this.uniformNames=e.map((t=>`u_${t}`)),this.type=n}setUniform(t,e,n,r,i){e.set(t,i,r.constantOr(this.value))}getBinding(t,e){return"color"===this.type?new Ba(t):new Fa(t)}}class Ga{constructor(t,e){this.uniformNames=e.map((t=>`u_${t}`)),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(t){this.pixelRatio=t.pixelRatio||1,this.pattern=t.tl.concat(t.br)}setUniform(t,e,n,r,i){const o="u_pattern"===i||"u_dash"===i?this.pattern:"u_pixel_ratio"===i?this.pixelRatio:null;o&&e.set(t,i,o)}getBinding(t,e){return"u_pattern"===e||"u_dash"===e?new za(t):new Fa(t)}}class Wa{constructor(t,e,n,r){this.expression=t,this.type=n,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===n?2:1,offset:0}))),this.paintVertexArray=new r}populatePaintArray(t,e,n,r,i,o){const a=this.paintVertexArray.length,s=this.expression.evaluate(new wo(0),e,{},i,r,o);this.paintVertexArray.resize(t),this._setPaintValue(a,t,s)}updatePaintArray(t,e,n,r,i){const o=this.expression.evaluate({zoom:0},n,r,void 0,i);this._setPaintValue(t,e,o)}_setPaintValue(t,e,n){if("color"===this.type){const r=Va(n);for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,r[0],r[1])}else{for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Xa{constructor(t,e,n,r,i,o){this.expression=t,this.uniformNames=e.map((t=>`u_${t}_t`)),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===n?4:2,offset:0}))),this.paintVertexArray=new o}populatePaintArray(t,e,n,r,i,o){const a=this.expression.evaluate(new wo(this.zoom),e,{},i,r,o),s=this.expression.evaluate(new wo(this.zoom+1),e,{},i,r,o),l=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(l,t,a,s)}updatePaintArray(t,e,n,r,i){const o=this.expression.evaluate({zoom:this.zoom},n,r,void 0,i),a=this.expression.evaluate({zoom:this.zoom+1},n,r,void 0,i);this._setPaintValue(t,e,o,a)}_setPaintValue(t,e,n,r){if("color"===this.type){const i=Va(n),o=Va(r);for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,i[0],i[1],o[0],o[1])}else{for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,e,n,r,i){const o=this.useIntegerZoom?Math.floor(n.zoom):n.zoom,a=M(this.expression.interpolationFactor(o,this.zoom,this.zoom+1),0,1);e.set(t,i,a)}getBinding(t,e){return new Fa(t)}}class qa{constructor(t,e,n,r,i){this.expression=t,this.layerId=i,this.paintVertexAttributes=("array"===n?Ca:Sa).members;for(let o=0;o<e.length;++o);this.paintVertexArray=new r}populatePaintArray(t,e,n){const r=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValues(r,t,e.patterns&&e.patterns[this.layerId],n)}updatePaintArray(t,e,n,r,i,o){this._setPaintValues(t,e,n.patterns&&n.patterns[this.layerId],o)}_setPaintValues(t,e,n,r){if(!r||!n)return;const i=r[n];if(!i)return;const{tl:o,br:a,pixelRatio:s}=i;for(let l=t;l<e;l++)this.paintVertexArray.emplace(l,o[0],o[1],a[0],a[1],s)}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ya{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;this.binders={},this._buffers=[];const r=[];for(const i in t.paint._values){if(!n(i))continue;const o=t.paint.get(i);if(!(o instanceof Io&&Nr(o.property.specification)))continue;const a=Ja(i,t.type),s=o.value,l=o.property.specification.type,c=!!o.property.useIntegerZoom,u="line-dasharray"===i||i.endsWith("pattern"),h="line-dasharray"===i&&"constant"!==t.layout.get("line-cap").value.kind;if("constant"!==s.kind||h)if("source"===s.kind||h||u){const e=es(i,l,"source");this.binders[i]=u?new qa(s,a,l,e,t.id):new Wa(s,a,l,e),r.push(`/a_${i}`)}else{const t=es(i,l,"composite");this.binders[i]=new Xa(s,a,l,c,e,t),r.push(`/z_${i}`)}else this.binders[i]=u?new Ga(s.value,a):new Ha(s.value,a,l),r.push(`/u_${i}`)}this.cacheKey=r.sort().join("")}getMaxValue(t){const e=this.binders[t];return e instanceof Wa||e instanceof Xa?e.maxValue:0}populatePaintArrays(t,e,n,r,i,o){for(const a in this.binders){const s=this.binders[a];(s instanceof Wa||s instanceof Xa||s instanceof qa)&&s.populatePaintArray(t,e,n,r,i,o)}}setConstantPatternPositions(t){for(const e in this.binders){const n=this.binders[e];n instanceof Ga&&n.setConstantPatternPositions(t)}}updatePaintArrays(t,e,n,r,i,o){let a=!1;for(const s in t){const l=e.getPositions(s);for(const e of l){const l=n.feature(e.index);for(const n in this.binders){const c=this.binders[n];if((c instanceof Wa||c instanceof Xa||c instanceof qa)&&!0===c.expression.isStateDependent){const u=r.paint.get(n);c.expression=u.value,c.updatePaintArray(e.start,e.end,l,t[s],i,o),a=!0}}}}return a}defines(){const t=[];for(const e in this.binders){const n=this.binders[e];(n instanceof Ha||n instanceof Ga)&&t.push(...n.uniformNames.map((t=>`#define HAS_UNIFORM_${t}`)))}return t}getBinderAttributes(){const t=[];for(const e in this.binders){const n=this.binders[e];if(n instanceof Wa||n instanceof Xa||n instanceof qa)for(let e=0;e<n.paintVertexAttributes.length;e++)t.push(n.paintVertexAttributes[e].name)}return t}getBinderUniforms(){const t=[];for(const e in this.binders){const n=this.binders[e];if(n instanceof Ha||n instanceof Ga||n instanceof Xa)for(const e of n.uniformNames)t.push(e)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t){const e=[];for(const n in this.binders){const r=this.binders[n];if(r instanceof Ha||r instanceof Ga||r instanceof Xa)for(const i of r.uniformNames)e.push({name:i,property:n,binding:r.getBinding(t,i)})}return e}setUniforms(t,e,n,r,i){for(const{name:o,property:a,binding:s}of n)this.binders[a].setUniform(t,s,i,r.get(a),o)}updatePaintBuffers(){this._buffers=[];for(const t in this.binders){const e=this.binders[t];(e instanceof Wa||e instanceof Xa||e instanceof qa)&&e.paintVertexBuffer&&this._buffers.push(e.paintVertexBuffer)}}upload(t){for(const e in this.binders){const n=this.binders[e];(n instanceof Wa||n instanceof Xa||n instanceof qa)&&n.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const e=this.binders[t];(e instanceof Wa||e instanceof Xa||e instanceof qa)&&e.destroy()}}}class Za{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;this.programConfigurations={};for(const r of t)this.programConfigurations[r.id]=new Ya(r,e,n);this.needsUpload=!1,this._featureMap=new Aa,this._bufferOffset=0}populatePaintArrays(t,e,n,r,i,o,a){for(const s in this.programConfigurations)this.programConfigurations[s].populatePaintArrays(t,e,r,i,o,a);void 0!==e.id&&this._featureMap.add(e.id,n,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,e,n,r,i){for(const o of n)this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(t,this._featureMap,e,o,r,i)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}const Ka={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function Ja(t,e){return Ka[t]||[t.replace(`${e}-`,"").replace(/-/g,"_")]}const Qa={"line-pattern":{source:Wo,composite:Wo},"fill-pattern":{source:Wo,composite:Wo},"fill-extrusion-pattern":{source:Wo,composite:Wo},"line-dasharray":{source:Xo,composite:Xo}},ts={color:{source:ha,composite:Go},number:{source:aa,composite:ha}};function es(t,e,n){const r=Qa[t];return r&&r[n]||ts[e][n]}Yi(Ha,"ConstantBinder"),Yi(Ga,"PatternConstantBinder"),Yi(Wa,"SourceExpressionBinder"),Yi(qa,"PatternCompositeBinder"),Yi(Xa,"CompositeExpressionBinder"),Yi(Ya,"ProgramConfiguration",{omit:["_buffers"]}),Yi(Za,"ProgramConfigurationSet");const ns="-transition";class rs extends Qt{constructor(t,e){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==t.type&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&"sky"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),e.layout&&(this._unevaluatedLayout=new To(e.layout)),e.paint)){this._transitionablePaint=new Eo(e.paint);for(const e in t.paint)this.setPaintProperty(e,t.paint[e],{validate:!1});for(const e in t.layout)this.setLayoutProperty(e,t.layout[e],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Po(e.paint)}}getLayoutProperty(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=e&&this._validate(ji,`layers.${this.id}.layout.${t}`,t,e,n)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)}getPaintProperty(t){return B(t,ns)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=e&&this._validate($i,`layers.${this.id}.paint.${t}`,t,e,n))return!1;if(B(t,ns))return this._transitionablePaint.setTransition(t.slice(0,-11),e||void 0),!1;{const n=this._transitionablePaint._values[t],r=n.value.isDataDriven(),i=n.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);const o=this._transitionablePaint._values[t].value,a=o.isDataDriven(),s=B(t,"pattern")||"line-dasharray"===t;return a||r||s||this._handleOverridablePaintPropertyUpdate(t,i,o)}}_handleSpecialPaintPropertyUpdate(t){}getProgramIds(){return null}getProgramConfiguration(t){return null}_handleOverridablePaintPropertyUpdate(t,e,n){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,e){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),j(t,((t,e)=>!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)))}_validate(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!i||!1!==i.validate)&&Vi(this,t.call(Bi,{key:e,layerType:this.type,objectKey:n,value:r,styleSpec:te,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const e=this.paint.get(t);if(e instanceof Io&&Nr(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=hi(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const is=Bo([{name:"a_pos",components:2,type:"Int16"}],4),os=Bo([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class as{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.segments=t}prepareSegment(t,e,n,r){let i=this.segments[this.segments.length-1];return t>as.MAX_VERTEX_ARRAY_LENGTH&&H(`Max vertices per segment is ${as.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!i||i.vertexLength+t>as.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(i.sortKey=r),this.segments.push(i)),i}get(){return this.segments}destroy(){for(const t of this.segments)for(const e in t.vaos)t.vaos[e].destroy()}static simpleSegment(t,e,n,r){return new as([{vertexOffset:t,primitiveOffset:e,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])}}as.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Yi(as,"SegmentVector");var ss=8192;class ls{constructor(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof Ul?new Ul(t.lng,t.lat):Ul.convert(t),this}setSouthWest(t){return this._sw=t instanceof Ul?new Ul(t.lng,t.lat):Ul.convert(t),this}extend(t){const e=this._sw,n=this._ne;let r,i;if(t instanceof Ul)r=t,i=t;else{if(!(t instanceof ls))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(ls.convert(t)):this.extend(Ul.convert(t)):"object"==typeof t&&null!==t&&t.hasOwnProperty("lat")&&(t.hasOwnProperty("lon")||t.hasOwnProperty("lng"))?this.extend(Ul.convert(t)):this;if(r=t._sw,i=t._ne,!r||!i)return this}return e||n?(e.lng=Math.min(r.lng,e.lng),e.lat=Math.min(r.lat,e.lat),n.lng=Math.max(i.lng,n.lng),n.lat=Math.max(i.lat,n.lat)):(this._sw=new Ul(r.lng,r.lat),this._ne=new Ul(i.lng,i.lat)),this}getCenter(){return new Ul((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ul(this.getWest(),this.getNorth())}getSouthEast(){return new Ul(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:e,lat:n}=Ul.convert(t);let r=this._sw.lng<=e&&e<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=e&&e>=this._ne.lng),this._sw.lat<=n&&n<=this._ne.lat&&r}static convert(t){return!t||t instanceof ls?t:new ls(t)}}var cs=1e-6,us="undefined"!=typeof Float32Array?Float32Array:Array;function hs(){var t=new us(9);return us!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function ps(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],p=n[0],d=n[1],f=n[2],g=n[3],m=n[4],y=n[5],v=n[6],x=n[7],_=n[8];return t[0]=p*r+d*a+f*c,t[1]=p*i+d*s+f*u,t[2]=p*o+d*l+f*h,t[3]=g*r+m*a+y*c,t[4]=g*i+m*s+y*u,t[5]=g*o+m*l+y*h,t[6]=v*r+x*a+_*c,t[7]=v*i+x*s+_*u,t[8]=v*o+x*l+_*h,t}function ds(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function fs(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],p=e[10],d=e[11],f=e[12],g=e[13],m=e[14],y=e[15],v=n*s-r*a,x=n*l-i*a,_=n*c-o*a,b=r*l-i*s,w=r*c-o*s,S=i*c-o*l,C=u*g-h*f,E=u*m-p*f,k=u*y-d*f,M=h*m-p*g,T=h*y-d*g,I=p*y-d*m,P=v*I-x*T+_*M+b*k-w*E+S*C;return P?(t[0]=(s*I-l*T+c*M)*(P=1/P),t[1]=(i*T-r*I-o*M)*P,t[2]=(g*S-m*w+y*b)*P,t[3]=(p*w-h*S-d*b)*P,t[4]=(l*k-a*I-c*E)*P,t[5]=(n*I-i*k+o*E)*P,t[6]=(m*_-f*S-y*x)*P,t[7]=(u*S-p*_+d*x)*P,t[8]=(a*T-s*k+c*C)*P,t[9]=(r*k-n*T-o*C)*P,t[10]=(f*w-g*_+y*v)*P,t[11]=(h*_-u*w-d*v)*P,t[12]=(s*E-a*M-l*C)*P,t[13]=(n*M-r*E+i*C)*P,t[14]=(g*x-f*b-m*v)*P,t[15]=(u*b-h*x+p*v)*P,t):null}function gs(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],p=e[9],d=e[10],f=e[11],g=e[12],m=e[13],y=e[14],v=e[15],x=n[0],_=n[1],b=n[2],w=n[3];return t[0]=x*r+_*s+b*h+w*g,t[1]=x*i+_*l+b*p+w*m,t[2]=x*o+_*c+b*d+w*y,t[3]=x*a+_*u+b*f+w*v,t[4]=(x=n[4])*r+(_=n[5])*s+(b=n[6])*h+(w=n[7])*g,t[5]=x*i+_*l+b*p+w*m,t[6]=x*o+_*c+b*d+w*y,t[7]=x*a+_*u+b*f+w*v,t[8]=(x=n[8])*r+(_=n[9])*s+(b=n[10])*h+(w=n[11])*g,t[9]=x*i+_*l+b*p+w*m,t[10]=x*o+_*c+b*d+w*y,t[11]=x*a+_*u+b*f+w*v,t[12]=(x=n[12])*r+(_=n[13])*s+(b=n[14])*h+(w=n[15])*g,t[13]=x*i+_*l+b*p+w*m,t[14]=x*o+_*c+b*d+w*y,t[15]=x*a+_*u+b*f+w*v,t}function ms(t,e,n){var r,i,o,a,s,l,c,u,h,p,d,f,g=n[0],m=n[1],y=n[2];return e===t?(t[12]=e[0]*g+e[4]*m+e[8]*y+e[12],t[13]=e[1]*g+e[5]*m+e[9]*y+e[13],t[14]=e[2]*g+e[6]*m+e[10]*y+e[14],t[15]=e[3]*g+e[7]*m+e[11]*y+e[15]):(i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],p=e[9],d=e[10],f=e[11],t[0]=r=e[0],t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=c,t[7]=u,t[8]=h,t[9]=p,t[10]=d,t[11]=f,t[12]=r*g+s*m+h*y+e[12],t[13]=i*g+l*m+p*y+e[13],t[14]=o*g+c*m+d*y+e[14],t[15]=a*g+u*m+f*y+e[15]),t}function ys(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function vs(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=a*i+u*r,t[6]=s*i+h*r,t[7]=l*i+p*r,t[8]=c*i-o*r,t[9]=u*i-a*r,t[10]=h*i-s*r,t[11]=p*i-l*r,t}function xs(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],c=e[8],u=e[9],h=e[10],p=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*r,t[1]=a*i-u*r,t[2]=s*i-h*r,t[3]=l*i-p*r,t[8]=o*r+c*i,t[9]=a*r+u*i,t[10]=s*r+h*i,t[11]=l*r+p*i,t}function _s(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function bs(t,e,n){var r,i,o,a=n[0],s=n[1],l=n[2],c=Math.hypot(a,s,l);return c<cs?null:(a*=c=1/c,s*=c,l*=c,r=Math.sin(e),i=Math.cos(e),t[0]=a*a*(o=1-i)+i,t[1]=s*a*o+l*r,t[2]=l*a*o-s*r,t[3]=0,t[4]=a*s*o-l*r,t[5]=s*s*o+i,t[6]=l*s*o+a*r,t[7]=0,t[8]=a*l*o+s*r,t[9]=s*l*o-a*r,t[10]=l*l*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var ws=gs;function Ss(){var t=new us(3);return us!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Cs(t){var e=new us(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Es(t){return Math.hypot(t[0],t[1],t[2])}function ks(t,e,n){var r=new us(3);return r[0]=t,r[1]=e,r[2]=n,r}function Ms(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Ts(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Is(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Ps(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function Os(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function As(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function Ds(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function Rs(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function Ls(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ns(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],l=n[2];return t[0]=i*l-o*s,t[1]=o*a-r*l,t[2]=r*s-i*a,t}function Fs(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/(a=a||1),t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}function zs(t,e,n){var r=n[0],i=n[1],o=n[2],a=e[0],s=e[1],l=e[2],c=i*l-o*s,u=o*a-r*l,h=r*s-i*a,p=i*h-o*u,d=o*c-r*h,f=r*u-i*c,g=2*n[3];return u*=g,h*=g,d*=2,f*=2,t[0]=a+(c*=g)+(p*=2),t[1]=s+u+d,t[2]=l+h+f,t}var Bs,$s=Ts,js=Is,Us=Es;function Vs(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function Hs(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a,t}function Gs(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function Ws(){var t=new us(4);return us!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Xs(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function qs(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=r*l+a*s,t[1]=i*l+o*s,t[2]=o*l-i*s,t[3]=a*l-r*s,t}function Ys(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=r*l-o*s,t[1]=i*l+a*s,t[2]=o*l+r*s,t[3]=a*l-i*s,t}Ss(),Bs=new us(4),us!=Float32Array&&(Bs[0]=0,Bs[1]=0,Bs[2]=0,Bs[3]=0);var Zs=Hs;Ss(),ks(1,0,0),ks(0,1,0),Ws(),Ws(),hs();const Ks=Bo([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Js}=Ks,Qs=Bo([{name:"a_pos_3",components:3,type:"Int16"}]);var tl=Bo([{name:"a_pos",type:"Int16",components:2}]);class el{constructor(t,e){this.pos=t,this.dir=e}intersectsPlane(t,e,n){const r=Ls(e,this.dir);if(Math.abs(r)<1e-6)return!1;const i=((t[0]-this.pos[0])*e[0]+(t[1]-this.pos[1])*e[1]+(t[2]-this.pos[2])*e[2])/r;return n[0]=this.pos[0]+this.dir[0]*i,n[1]=this.pos[1]+this.dir[1]*i,n[2]=this.pos[2]+this.dir[2]*i,!0}closestPointOnSphere(t,e,n){if(function(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2];return Math.abs(n-o)<=cs*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=cs*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=cs*Math.max(1,Math.abs(i),Math.abs(s))}(this.pos,t)||0===e)return n[0]=n[1]=n[2]=0,!1;const[r,i,o]=this.dir,a=this.pos[0]-t[0],s=this.pos[1]-t[1],l=this.pos[2]-t[2],c=r*r+i*i+o*o,u=2*(a*r+s*i+l*o),h=u*u-4*c*(a*a+s*s+l*l-e*e);if(h<0){const t=Math.max(-u/2,0),c=a+r*t,h=s+i*t,p=l+o*t,d=Math.hypot(c,h,p);return n[0]=c*e/d,n[1]=h*e/d,n[2]=p*e/d,!1}{const t=(-u-Math.sqrt(h))/(2*c);if(t<0){const t=Math.hypot(a,s,l);return n[0]=a*e/t,n[1]=s*e/t,n[2]=l*e/t,!1}return n[0]=a+r*t,n[1]=s+i*t,n[2]=l+o*t,!0}}}class nl{constructor(t,e,n,r,i){this.TL=t,this.TR=e,this.BR=n,this.BL=r,this.horizon=i}static fromInvProjectionMatrix(t,e,n){const r=[-1,1,1],i=[1,1,1],o=[1,-1,1],a=[-1,-1,1],s=Fs(r,r,t),l=Fs(i,i,t),c=Fs(o,o,t),u=Fs(a,a,t);return new nl(s,l,c,u,e/n)}}class rl{constructor(t,e){this.points=t,this.planes=e}static fromInvProjectionMatrix(t,e,n,r){const i=Math.pow(2,n),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((n=>{const o=Gs([],n,t),a=1/o[3]/e*i;return function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}(o,o,[a,a,r?1/o[3]:a,a])})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((t=>{const e=Rs([],Ns([],$s([],o[t[0]],o[t[1]]),$s([],o[t[2]],o[t[1]]))),n=-Ls(e,o[t[1]]);return e.concat(n)}));return new rl(o,a)}}class il{static fromPoints(t){const e=[1/0,1/0,1/0],n=[-1/0,-1/0,-1/0];for(const r of t)Ps(e,e,r),Os(n,n,r);return new il(e,n)}static applyTransform(t,e){const n=t.getCorners();for(let r=0;r<n.length;++r)Fs(n[r],n[r],e);return il.fromPoints(n)}constructor(t,e){this.min=t,this.max=e,this.center=As([],Ms([],this.min,this.max),.5)}quadrant(t){const e=[t%2==0,t<2],n=Cs(this.min),r=Cs(this.max);for(let i=0;i<e.length;i++)n[i]=e[i]?this.min[i]:this.center[i],r[i]=e[i]?this.center[i]:this.max[i];return r[2]=this.max[2],new il(n,r)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}distanceZ(t){return Math.max(Math.min(this.max[2],t[2]),this.min[2])-t[2]}getCorners(){const t=this.min,e=this.max;return[[t[0],t[1],t[2]],[e[0],t[1],t[2]],[e[0],e[1],t[2]],[t[0],e[1],t[2]],[t[0],t[1],e[2]],[e[0],t[1],e[2]],[e[0],e[1],e[2]],[t[0],e[1],e[2]]]}intersects(t){const e=this.getCorners();let n=!0;for(let r=0;r<t.planes.length;r++){const i=t.planes[r];let o=0;for(let t=0;t<e.length;t++)o+=Ls(i,e[t])+i[3]>=0;if(0===o)return 0;o!==e.length&&(n=!1)}if(n)return 2;for(let r=0;r<3;r++){let e=Number.MAX_VALUE,n=-Number.MAX_VALUE;for(let i=0;i<t.points.length;i++){const o=t.points[i][r]-this.min[r];e=Math.min(e,o),n=Math.max(n,o)}if(n<0||e>this.max[r]-this.min[r])return 0}return 1}}const ol=5,al=6,sl=ss/Math.PI/2,ll=16383,cl=64,ul=[cl,32,16],hl=-sl,pl=sl,dl=[new il([hl,hl,hl],[pl,pl,pl]),new il([hl,hl,hl],[0,0,pl]),new il([0,hl,hl],[pl,0,pl]),new il([hl,0,hl],[0,pl,pl]),new il([0,0,hl],[pl,pl,pl])];function fl(t){return t*sl/Bl}function gl(t,e,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i=As([],t._camera.position,t.worldSize),o=[e,n,1,1];Gs(o,o,t.pixelMatrixInverse),Vs(o,o,1/o[3]);const a=Rs([],$s([],o,i)),s=t.globeMatrix,l=[s[12],s[13],s[14]],c=$s([],l,i),u=Es(c),h=Rs([],c),p=t.worldSize/(2*Math.PI),d=Ls(h,a),f=Math.asin(p/u);if(f<Math.acos(d)){if(!r)return null;const t=[],e=[];As(t,a,u/d),Rs(e,$s(e,t,c)),Rs(a,Ms(a,c,As(a,e,Math.tan(f)*u)))}const g=[];new el(i,a).closestPointOnSphere(l,p,g);const m=Rs([],J(s,0)),y=Rs([],J(s,1)),v=Rs([],J(s,2)),x=Ls(m,g),_=Ls(y,g),b=Ls(v,g),S=w(Math.asin(-_/p));let C=w(Math.atan2(x,b));C=t.center.lng+function(t,e){const n=(e-t+180)%360-180;return n<-180?n+360:n}(t.center.lng,C);const E=Hl(C),k=M(Gl(S),0,1);return new Jl(E,k)}class ml{constructor(t,e,n){this.a=$s([],t,n),this.b=$s([],e,n),this.center=n;const r=Rs([],this.a),i=Rs([],this.b);this.angle=Math.acos(Ls(r,i))}}function yl(t,e){if(0===t.angle)return null;let n;return n=0===t.a[e]?1/t.angle*.5*Math.PI:1/t.angle*Math.atan(t.b[e]/t.a[e]/Math.sin(t.angle)-1/Math.tan(t.angle)),n<0||n>1?null:function(t,e,n,r){const i=Math.sin(n);return t*(Math.sin((1-r)*n)/i)+e*(Math.sin(r*n)/i)}(t.a[e],t.b[e],t.angle,M(n,0,1))+t.center[e]}function vl(t){if(t.z<=1)return dl[t.z+2*t.y+t.x];const e=Cl(Sl(t));return il.fromPoints(e)}function xl(t,e,n){return As(t,t,1-n),Ds(t,t,e,n)}function _l(t,e){const n=Dl(e.zoom);if(0===n)return vl(t);const r=Sl(t),i=Cl(r),o=Hl(r.getWest())*e.worldSize,a=Hl(r.getEast())*e.worldSize,s=Gl(r.getNorth())*e.worldSize,l=Gl(r.getSouth())*e.worldSize,c=[o,s,0],u=[a,s,0],h=[o,l,0],p=[a,l,0],d=fs([],e.globeMatrix);return Fs(c,c,d),Fs(u,u,d),Fs(h,h,d),Fs(p,p,d),i[0]=xl(i[0],h,n),i[1]=xl(i[1],p,n),i[2]=xl(i[2],u,n),i[3]=xl(i[3],c,n),il.fromPoints(i)}function bl(t,e,n){for(const r of t)Fs(r,r,e),As(r,r,n)}function wl(t,e,n){const r=e/t.worldSize,i=t.globeMatrix;if(n.z<=1){const t=vl(n).getCorners();return bl(t,i,r),il.fromPoints(t)}const o=Sl(n),a=Cl(o);bl(a,i,r);const s=Number.MAX_VALUE,l=[-s,-s,-s],c=[s,s,s];if(o.contains(t.center)){for(const t of a)Ps(c,c,t),Os(l,l,t);l[2]=0;const e=t.point,n=[e.x*r,e.y*r,0];return Ps(c,c,n),Os(l,l,n),new il(c,l)}const u=[i[12]*r,i[13]*r,i[14]*r],h=o.getCenter(),p=M(t.center.lat,-Zl,Zl),d=M(h.lat,-Zl,Zl),f=Hl(t.center.lng),g=Gl(p);let m=f-Hl(h.lng);const y=g-Gl(d);m>.5?m-=1:m<-.5&&(m+=1);let v=0;Math.abs(m)>Math.abs(y)?v=m>=0?1:3:(v=y>=0?0:2,Ds(u,u,[i[4]*r,i[5]*r,i[6]*r],-Math.sin(b(y>=0?o.getSouth():o.getNorth()))*sl));const x=a[v],_=a[(v+1)%4],w=new ml(x,_,u),S=[yl(w,0)||x[0],yl(w,1)||x[1],yl(w,2)||x[2]],C=Dl(t.zoom);if(C>0){const r=function(t,e,n,r,i){let{x:o,y:a,z:s}=t;const l=1/(1<<s);let c=o*l,u=c+l,h=a*l,p=h+l,d=0;const f=(c+u)/2-r;return f>.5?d=-1:f<-.5&&(d=1),c=((c+d)*e-(r*=e))*n+r,u=((u+d)*e-r)*n+r,h=(h*e-(i*=e))*n+i,p=(p*e-i)*n+i,[[c,p,0],[u,p,0],[u,h,0],[c,h,0]]}(n,e,t._pixelsPerMercatorPixel,f,g);for(let t=0;t<a.length;t++)xl(a[t],r[t],C);const i=Ms([],r[v],r[(v+1)%4]);As(i,i,.5),xl(S,i,C)}for(const b of a)Ps(c,c,b),Os(l,l,b);return c[2]=Math.min(x[2],_[2]),Ps(c,c,S),Os(l,l,S),new il(c,l)}function Sl(t){let{x:e,y:n,z:r}=t;const i=1/(1<<r),o=new Ul(Xl(e*i),ql((n+1)*i)),a=new Ul(Xl((e+1)*i),ql(n*i));return new ls(o,a)}function Cl(t){const e=b(t.getNorth()),n=b(t.getSouth()),r=Math.cos(e),i=Math.cos(n),o=Math.sin(e),a=Math.sin(n),s=t.getWest(),l=t.getEast();return[El(i,a,s),El(i,a,l),El(r,o,l),El(r,o,s)]}function El(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:sl;return n=b(n),[t*Math.sin(n)*r,-e*r,t*Math.cos(n)*r]}function kl(t,e,n){return El(Math.cos(b(t)),Math.sin(b(t)),e,n)}function Ml(t,e,n,r){const i=1<<n.z,o=(t/ss+n.x)/i;return kl(ql((e/ss+n.y)/i),Xl(o),r)}function Tl(t){let{min:e,max:n}=t;return ll/Math.max(n[0]-e[0],n[1]-e[1],n[2]-e[2])}const Il=new Float64Array(16);function Pl(t){const e=Tl(t),n=_s(Il,[e,e,e]);return ms(n,n,((r=[])[0]=-(i=t.min)[0],r[1]=-i[1],r[2]=-i[2],r));var r,i}function Ol(t){const e=(r=t.min,(n=Il)[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n);var n,r;const i=1/Tl(t);return ys(e,e,[i,i,i])}function Al(t,e,n,r,i){const o=function(t){const e=ss/(2*Math.PI);return t/(2*Math.PI)/e}(n),a=[t,e,-n/(2*Math.PI)],s=ds(new Float64Array(16));return ms(s,s,a),ys(s,s,[o,o,o]),vs(s,s,b(-i)),xs(s,s,b(-r)),s}function Dl(t){return T(ol,al,t)}function Rl(t,e){const n=kl(e.lat,e.lng),r=function(t){const e=kl(t._center.lat,t._center.lng);let n=Ns([],ks(0,1,0),e);const r=bs([],-t.angle,e);n=Fs(n,n,r),bs(r,-t._pitch,n);const i=Rs([],e);return As(i,i,fl(t.cameraToCenterDistance/t.pixelsPerMeter)),Fs(i,i,r),Ms([],e,i)}(t);return a=(i=Ts([],r,n))[0],s=i[1],l=i[2],c=(o=n)[0],u=o[1],h=o[2],d=(p=Math.sqrt(a*a+s*s+l*l)*Math.sqrt(c*c+u*u+h*h))&&Ls(i,o)/p,Math.acos(Math.min(Math.max(d,-1),1));var i,o,a,s,l,c,u,h,p,d}function Ll(t,e){return Rl(t,e)>Math.PI/2*1.01}const Nl=b(85),Fl=Math.cos(Nl),zl=Math.sin(Nl),Bl=6371008.8,$l=2*Math.PI*Bl;class jl{constructor(t,e){if(isNaN(t)||isNaN(e))throw new Error(`Invalid LngLat object: (${t}, ${e})`);if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new jl(I(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const e=Math.PI/180,n=this.lat*e,r=t.lat*e,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((t.lng-this.lng)*e);return Bl*Math.acos(Math.min(i,1))}toBounds(){const t=360*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)/40075017,e=t/Math.cos(Math.PI/180*this.lat);return new ls(new jl(this.lng-e,this.lat-t),new jl(this.lng+e,this.lat+t))}toEcef(t){const e=fl(t);return kl(this.lat,this.lng,sl+e)}static convert(t){if(t instanceof jl)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new jl(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new jl(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var Ul=jl;function Vl(t){return $l*Math.cos(t*Math.PI/180)}function Hl(t){return(180+t)/360}function Gl(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Wl(t,e){return t/Vl(e)}function Xl(t){return 360*t-180}function ql(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}function Yl(t,e){return t*Vl(ql(e))}const Zl=85.051129;function Kl(t){return 1/Math.cos(t*Math.PI/180)}class Jl{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=+t,this.y=+e,this.z=+n}static fromLngLat(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=Ul.convert(t);return new Jl(Hl(n.lng),Gl(n.lat),Wl(e,n.lat))}toLngLat(){return new Ul(Xl(this.x),ql(this.y))}toAltitude(){return Yl(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/$l*Kl(ql(this.y))}}function Ql(t,e,n,r,i,o,a,s,l){const c=(e+r)/2,u=(n+i)/2,h=new v(c,u);s(h),function(t,e,n,r,i,o){const a=n-i,s=r-o;return Math.abs((r-e)*a-(n-t)*s)/Math.hypot(a,s)}(h.x,h.y,o.x,o.y,a.x,a.y)>=l?(Ql(t,e,n,c,u,o,h,s,l),Ql(t,c,u,r,i,h,a,s,l)):t.push(a)}function tc(t,e,n){let r=t[0],i=r.x,o=r.y;e(r);const a=[r];for(let s=1;s<t.length;s++){const l=t[s],{x:c,y:u}=l;e(l),Ql(a,i,o,c,u,r,l,e,n),i=c,o=u,r=l}return a}function ec(t,e,n,r){if(r(e,n)){const i=e.add(n)._mult(.5);ec(t,e,i,r),ec(t,i,n,r)}else t.push(n)}function nc(t,e){let n=t[0];const r=[n];for(let i=1;i<t.length;i++){const o=t[i];ec(r,n,o,e),n=o}return r}const rc=Math.pow(2,14)-1,ic=-rc-1;function oc(t,e){const n=Math.round(t.x*e),r=Math.round(t.y*e);return t.x=M(n,ic,rc),t.y=M(r,ic,rc),(n<t.x||n>t.x+1||r<t.y||r>t.y+1)&&H("Geometry exceeds allowed extent, reduce your vector tile buffer size"),t}function ac(t,e,n){const r=t.loadGeometry(),i=t.extent,o=ss/i;if(e&&n&&n.projection.isReprojectedInTileSpace){const o=1<<e.z,{scale:a,x:s,y:l,projection:c}=n,u=t=>{const n=Xl((e.x+t.x/i)/o),r=ql((e.y+t.y/i)/o),u=c.project(n,r);t.x=(u.x*a-s)*i,t.y=(u.y*a-l)*i};for(let e=0;e<r.length;e++)if(1!==t.type)r[e]=tc(r[e],u,1);else{const t=[];for(const n of r[e])n.x<0||n.x>=i||n.y<0||n.y>=i||(u(n),t.push(n));r[e]=t}}for(const a of r)for(const t of a)oc(t,o);return r}function sc(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?ac(t):[]}}function lc(t,e,n,r,i){t.emplaceBack(2*e+(r+1)/2,2*n+(i+1)/2)}function cc(t,e,n){const r=16384;t.emplaceBack(e.x,e.y,e.z,n[0]*r,n[1]*r,n[2]*r)}class uc{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.projection=t.projection,this.layoutVertexArray=new jo,this.indexArray=new ra,this.segments=new as,this.programConfigurations=new Za(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n,r){const i=this.layers[0],o=[];let a=null;"circle"===i.type&&(a=i.layout.get("circle-sort-key"));for(const{feature:l,id:c,index:u,sourceLayerIndex:h}of t){const t=this.layers[0]._featureFilter.needGeometry,e=sc(l,t);if(!this.layers[0]._featureFilter.filter(new wo(this.zoom),e,n))continue;const i=a?a.evaluate(e,{},n):void 0,s={id:c,properties:l.properties,type:l.type,sourceLayerIndex:h,index:u,geometry:t?e.geometry:ac(l,n,r),patterns:{},sortKey:i};o.push(s)}a&&o.sort(((t,e)=>t.sortKey-e.sortKey));let s=null;"globe"===r.projection.name&&(this.globeExtVertexArray=new qo,s=r.projection);for(const l of o){const{geometry:r,index:i,sourceLayerIndex:o}=l,a=t[i].feature;this.addFeature(l,r,i,e.availableImages,n,s),e.featureIndex.insert(a,r,i,o,this.index)}}update(t,e,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,is.members),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,os.members))),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(t,e,n,r,i,o){for(const a of e)for(const e of a){const n=e.x,r=e.y;if(n<0||n>=ss||r<0||r>=ss)continue;if(o){const t=o.projectTilePoint(n,r,i),e=o.upVector(i,n,r),a=this.globeExtVertexArray;cc(a,t,e),cc(a,t,e),cc(a,t,e),cc(a,t,e)}const a=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),s=a.vertexLength;lc(this.layoutVertexArray,n,r,-1,-1),lc(this.layoutVertexArray,n,r,1,-1),lc(this.layoutVertexArray,n,r,1,1),lc(this.layoutVertexArray,n,r,-1,1),this.indexArray.emplaceBack(s,s+1,s+2),this.indexArray.emplaceBack(s,s+2,s+3),a.vertexLength+=4,a.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{},r,i)}}function hc(t,e){for(let n=0;n<t.length;n++)if(_c(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(_c(t,e[n]))return!0;return!!gc(t,e)}function pc(t,e,n){return!!_c(t,e)||!!yc(e,t,n)}function dc(t,e){if(1===t.length)return xc(e,t[0]);for(let n=0;n<e.length;n++){const r=e[n];for(let e=0;e<r.length;e++)if(_c(t,r[e]))return!0}for(let n=0;n<t.length;n++)if(xc(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(gc(t,e[n]))return!0;return!1}function fc(t,e,n){if(t.length>1){if(gc(t,e))return!0;for(let r=0;r<e.length;r++)if(yc(e[r],t,n))return!0}for(let r=0;r<t.length;r++)if(yc(t[r],e,n))return!0;return!1}function gc(t,e){if(0===t.length||0===e.length)return!1;for(let n=0;n<t.length-1;n++){const r=t[n],i=t[n+1];for(let t=0;t<e.length-1;t++)if(mc(r,i,e[t],e[t+1]))return!0}return!1}function mc(t,e,n,r){return G(t,n,r)!==G(e,n,r)&&G(t,e,n)!==G(t,e,r)}function yc(t,e,n){const r=n*n;if(1===e.length)return t.distSqr(e[0])<r;for(let i=1;i<e.length;i++)if(vc(t,e[i-1],e[i])<r)return!0;return!1}function vc(t,e,n){const r=e.distSqr(n);if(0===r)return t.distSqr(e);const i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return t.distSqr(i<0?e:i>1?n:n.sub(e)._mult(i)._add(e))}function xc(t,e){let n,r,i,o=!1;for(let a=0;a<t.length;a++){n=t[a];for(let t=0,a=n.length-1;t<n.length;a=t++)r=n[t],i=n[a],r.y>e.y!=i.y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(o=!o)}return o}function _c(t,e){let n=!1;for(let r=0,i=t.length-1;r<t.length;i=r++){const o=t[r],a=t[i];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function bc(t,e,n,r,i){for(const a of t)if(e<=a.x&&n<=a.y&&r>=a.x&&i>=a.y)return!0;const o=[new v(e,n),new v(e,i),new v(r,i),new v(r,n)];if(t.length>2)for(const a of o)if(_c(t,a))return!0;for(let a=0;a<t.length-1;a++)if(wc(t[a],t[a+1],o))return!0;return!1}function wc(t,e,n){const r=n[0],i=n[2];if(t.x<r.x&&e.x<r.x||t.x>i.x&&e.x>i.x||t.y<r.y&&e.y<r.y||t.y>i.y&&e.y>i.y)return!1;const o=G(t,e,n[0]);return o!==G(t,e,n[1])||o!==G(t,e,n[2])||o!==G(t,e,n[3])}function Sc(t,e,n){const r=e.paint.get(t).value;return"constant"===r.kind?r.value:n.programConfigurations.get(e.id).getMaxValue(t)}function Cc(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Ec(t,e,n,r,i){if(!e[0]&&!e[1])return t;const o=v.convert(e)._mult(i);"viewport"===n&&o._rotate(-r);const a=[];for(let s=0;s<t.length;s++)a.push(t[s].sub(o));return a}function kc(t,e,n,r){const i=v.convert(t)._mult(r);return"viewport"===e&&i._rotate(-n),i}Yi(uc,"CircleBucket",{omit:["layers"]});const Mc=new Ro({"circle-sort-key":new Ao(te.layout_circle["circle-sort-key"])});var Tc={paint:new Ro({"circle-radius":new Ao(te.paint_circle["circle-radius"]),"circle-color":new Ao(te.paint_circle["circle-color"]),"circle-blur":new Ao(te.paint_circle["circle-blur"]),"circle-opacity":new Ao(te.paint_circle["circle-opacity"]),"circle-translate":new Oo(te.paint_circle["circle-translate"]),"circle-translate-anchor":new Oo(te.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Oo(te.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Oo(te.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ao(te.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ao(te.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ao(te.paint_circle["circle-stroke-opacity"])}),layout:Mc};function Ic(t,e,n,r,i,o,a,s,l){if(o&&t.queryGeometry.isAboveHorizon)return!1;o&&(l*=t.pixelToTileUnitsFactor);const c=t.tileID.canonical,u=n.projection.upVectorScale(c,n.center.lat,n.worldSize).metersToTile;for(const h of e)for(const e of h){const h=e.add(s),p=i&&n.elevation?n.elevation.exaggeration()*i.getElevationAt(h.x,h.y,!0):0,d=n.projection.projectTilePoint(h.x,h.y,c);if(p>0){const t=n.projection.upVector(c,h.x,h.y);d.x+=t[0]*u*p,d.y+=t[1]*u*p,d.z+=t[2]*u*p}const f=o?h:Pc(d.x,d.y,d.z,r),g=o?t.tilespaceRays.map((t=>Dc(t,p))):t.queryGeometry.screenGeometry,m=Gs([],[d.x,d.y,d.z,1],r);if(!a&&o?l*=m[3]/n.cameraToCenterDistance:a&&!o&&(l*=n.cameraToCenterDistance/m[3]),o){const t=ql((e.y/ss+c.y)/(1<<c.z));l/=n.projection.pixelsPerMeter(t,1)/Wl(1,t)}if(pc(g,f,l))return!0}return!1}function Pc(t,e,n,r){const i=Gs([],[t,e,n,1],r);return new v(i[0]/i[3],i[1]/i[3])}const Oc=ks(0,0,0),Ac=ks(0,0,1);function Dc(t,e){const n=Ss();return Oc[2]=e,t.intersectsPlane(Oc,Ac,n),new v(n[0],n[1])}class Rc extends uc{}function Lc(t,e,n,r){let{width:i,height:o}=e;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==i*o*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*o*n);return t.width=i,t.height=o,t.data=r,t}function Nc(t,e,n){const{width:r,height:i}=e;r===t.width&&i===t.height||(Fc(t,e,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,r),height:Math.min(t.height,i)},n),t.width=r,t.height=i,t.data=e.data)}function Fc(t,e,n,r,i,o){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");const a=t.data,s=e.data;for(let l=0;l<i.height;l++){const c=((n.y+l)*t.width+n.x)*o,u=((r.y+l)*e.width+r.x)*o;for(let t=0;t<i.width*o;t++)s[u+t]=a[c+t]}return e}Yi(Rc,"HeatmapBucket",{omit:["layers"]});class zc{constructor(t,e){Lc(this,t,1,e)}resize(t){Nc(this,new zc(t),1)}clone(){return new zc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,n,r,i){Fc(t,e,n,r,i,1)}}class Bc{constructor(t,e){Lc(this,t,4,e)}resize(t){Nc(this,new Bc(t),4)}replace(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new Bc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,n,r,i){Fc(t,e,n,r,i,4)}}Yi(zc,"AlphaImage"),Yi(Bc,"RGBAImage");var $c={paint:new Ro({"heatmap-radius":new Ao(te.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ao(te.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Oo(te.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Do(te.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Oo(te.paint_heatmap["heatmap-opacity"])})};function jc(t){const e={},n=t.resolution||256,r=t.clips?t.clips.length:1,i=t.image||new Bc({width:n,height:r}),o=(n,r,o)=>{e[t.evaluationKey]=o;const a=t.expression.evaluate(e);i.data[n+r+0]=Math.floor(255*a.r/a.a),i.data[n+r+1]=Math.floor(255*a.g/a.a),i.data[n+r+2]=Math.floor(255*a.b/a.a),i.data[n+r+3]=Math.floor(255*a.a)};if(t.clips)for(let a=0,s=0;a<r;++a,s+=4*n)for(let e=0,r=0;e<n;e++,r+=4){const i=e/(n-1),{start:l,end:c}=t.clips[a];o(s,r,l*(1-i)+c*i)}else for(let a=0,s=0;a<n;a++,s+=4)o(0,s,a/(n-1));return i}var Uc={paint:new Ro({"hillshade-illumination-direction":new Oo(te.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Oo(te.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Oo(te.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Oo(te.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Oo(te.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Oo(te.paint_hillshade["hillshade-accent-color"])})};const Vc=Bo([{name:"a_pos",components:2,type:"Int16"}],4),{members:Hc}=Vc;var Gc={exports:{}};function Wc(t,e,n){n=n||2;var r,i,o,a,s,l,c,u=e&&e.length,h=u?e[0]*n:t.length,p=Xc(t,0,h,n,!0),d=[];if(!p||p.next===p.prev)return d;if(u&&(p=function(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=Xc(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(iu(a));for(s.sort(tu),i=0;i<s.length;i++)n=eu(s[i],n);return n}(t,e,p,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var f=n;f<h;f+=n)(s=t[f])<r&&(r=s),(l=t[f+1])<i&&(i=l),s>o&&(o=s),l>a&&(a=l);c=0!==(c=Math.max(o-r,a-i))?32767/c:0}return Yc(p,d,n,r,i,c,0),d}function Xc(t,e,n,r,i){var o,a;if(i===yu(t,e,n,r)>0)for(o=e;o<n;o+=r)a=fu(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=fu(o,t[o],t[o+1],a);return a&&lu(a,a.next)&&(gu(a),a=a.next),a}function qc(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!lu(r,r.next)&&0!==su(r.prev,r,r.next))r=r.next;else{if(gu(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function Yc(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{0===i.z&&(i.z=ru(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,l,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<c&&(s++,r=r.nextZ);e++);for(l=c;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(t,r,i,o);for(var s,l,c=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?Kc(t,r,i,o):Zc(t))e.push(s.i/n|0),e.push(t.i/n|0),e.push(l.i/n|0),gu(t),t=l.next,c=l.next;else if((t=l)===c){a?1===a?Yc(t=Jc(qc(t),e,n),e,n,r,i,o,2):2===a&&Qc(t,e,n,r,i,o):Yc(qc(t),e,n,r,i,o,1);break}}}function Zc(t){var e=t.prev,n=t,r=t.next;if(su(e,n,r)>=0)return!1;for(var i=e.x,o=n.x,a=r.x,s=e.y,l=n.y,c=r.y,u=i<o?i<a?i:a:o<a?o:a,h=s<l?s<c?s:c:l<c?l:c,p=i>o?i>a?i:a:o>a?o:a,d=s>l?s>c?s:c:l>c?l:c,f=r.next;f!==e;){if(f.x>=u&&f.x<=p&&f.y>=h&&f.y<=d&&ou(i,s,o,l,a,c,f.x,f.y)&&su(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Kc(t,e,n,r){var i=t.prev,o=t,a=t.next;if(su(i,o,a)>=0)return!1;for(var s=i.x,l=o.x,c=a.x,u=i.y,h=o.y,p=a.y,d=s<l?s<c?s:c:l<c?l:c,f=u<h?u<p?u:p:h<p?h:p,g=s>l?s>c?s:c:l>c?l:c,m=u>h?u>p?u:p:h>p?h:p,y=ru(d,f,e,n,r),v=ru(g,m,e,n,r),x=t.prevZ,_=t.nextZ;x&&x.z>=y&&_&&_.z<=v;){if(x.x>=d&&x.x<=g&&x.y>=f&&x.y<=m&&x!==i&&x!==a&&ou(s,u,l,h,c,p,x.x,x.y)&&su(x.prev,x,x.next)>=0)return!1;if(x=x.prevZ,_.x>=d&&_.x<=g&&_.y>=f&&_.y<=m&&_!==i&&_!==a&&ou(s,u,l,h,c,p,_.x,_.y)&&su(_.prev,_,_.next)>=0)return!1;_=_.nextZ}for(;x&&x.z>=y;){if(x.x>=d&&x.x<=g&&x.y>=f&&x.y<=m&&x!==i&&x!==a&&ou(s,u,l,h,c,p,x.x,x.y)&&su(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;_&&_.z<=v;){if(_.x>=d&&_.x<=g&&_.y>=f&&_.y<=m&&_!==i&&_!==a&&ou(s,u,l,h,c,p,_.x,_.y)&&su(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function Jc(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!lu(i,o)&&cu(i,r,r.next,o)&&pu(i,o)&&pu(o,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(o.i/n|0),gu(r),gu(r.next),r=t=o),r=r.next}while(r!==t);return qc(r)}function Qc(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&au(a,s)){var l=du(a,s);return a=qc(a,a.next),l=qc(l,l.next),Yc(a,e,n,r,i,o,0),void Yc(l,e,n,r,i,o,0)}s=s.next}a=a.next}while(a!==t)}function tu(t,e){return t.x-e.x}function eu(t,e){var n=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a&&(a=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==e);if(!n)return null;var l,c=n,u=n.x,h=n.y,p=1/0;r=n;do{i>=r.x&&r.x>=u&&i!==r.x&&ou(o<h?i:a,o,u,h,o<h?a:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),pu(r,t)&&(l<p||l===p&&(r.x>n.x||r.x===n.x&&nu(n,r)))&&(n=r,p=l)),r=r.next}while(r!==c);return n}(t,e);if(!n)return e;var r=du(n,t);return qc(r,r.next),qc(n,n.next)}function nu(t,e){return su(t.prev,t,e.prev)<0&&su(e.next,t,t.next)<0}function ru(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function iu(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function ou(t,e,n,r,i,o,a,s){return(i-a)*(e-s)>=(t-a)*(o-s)&&(t-a)*(r-s)>=(n-a)*(e-s)&&(n-a)*(o-s)>=(i-a)*(r-s)}function au(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&cu(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(pu(t,e)&&pu(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(su(t.prev,t,e.prev)||su(t,e.prev,e))||lu(t,e)&&su(t.prev,t,t.next)>0&&su(e.prev,e,e.next)>0)}function su(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function lu(t,e){return t.x===e.x&&t.y===e.y}function cu(t,e,n,r){var i=hu(su(t,e,n)),o=hu(su(t,e,r)),a=hu(su(n,r,t)),s=hu(su(n,r,e));return i!==o&&a!==s||!(0!==i||!uu(t,n,e))||!(0!==o||!uu(t,r,e))||!(0!==a||!uu(n,t,r))||!(0!==s||!uu(n,e,r))}function uu(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function hu(t){return t>0?1:t<0?-1:0}function pu(t,e){return su(t.prev,t,t.next)<0?su(t,e,t.next)>=0&&su(t,t.prev,e)>=0:su(t,e,t.prev)<0||su(t,t.next,e)<0}function du(t,e){var n=new mu(t.i,t.x,t.y),r=new mu(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function fu(t,e,n,r){var i=new mu(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function gu(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function mu(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function yu(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}Gc.exports=Wc,Gc.exports.default=Wc,Wc.deviation=function(t,e,n,r){var i=e&&e.length,o=Math.abs(yu(t,0,i?e[0]*n:t.length,n));if(i)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(yu(t,e[a]*n,a<s-1?e[a+1]*n:t.length,n));var l=0;for(a=0;a<r.length;a+=3){var c=r[a]*n,u=r[a+1]*n,h=r[a+2]*n;l+=Math.abs((t[c]-t[h])*(t[u+1]-t[c+1])-(t[c]-t[u])*(t[h+1]-t[c+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},Wc.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&n.holes.push(r+=t[i-1].length)}return n};var vu=p(Gc.exports);function xu(t,e,n,r,i){_u(t,e,n||0,r||t.length-1,i||wu)}function _u(t,e,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,a=e-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);_u(t,e,Math.max(n,Math.floor(e-a*l/o+c)),Math.min(r,Math.floor(e+(o-a)*l/o+c)),i)}var u=t[e],h=n,p=r;for(bu(t,n,e),i(t[r],u)>0&&bu(t,n,r);h<p;){for(bu(t,h,p),h++,p--;i(t[h],u)<0;)h++;for(;i(t[p],u)>0;)p--}0===i(t[n],u)?bu(t,n,p):bu(t,++p,r),p<=e&&(n=p+1),e<=p&&(r=p-1)}}function bu(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function wu(t,e){return t<e?-1:t>e?1:0}function Su(t,e){const n=t.length;if(n<=1)return[t];const r=[];let i,o;for(let a=0;a<n;a++){const e=W(t[a]);0!==e&&(t[a].area=Math.abs(e),void 0===o&&(o=e<0),o===e<0?(i&&r.push(i),i=[t[a]]):i.push(t[a]))}if(i&&r.push(i),e>1)for(let a=0;a<r.length;a++)r[a].length<=e||(xu(r[a],e,1,r[a].length-1,Cu),r[a]=r[a].slice(0,e));return r}function Cu(t,e){return e.area-t.area}function Eu(t,e,n){const r=n.patternDependencies;let i=!1;for(const o of e){const e=o.paint.get(`${t}-pattern`);e.isConstant()||(i=!0);const n=e.constantOr(null);n&&(i=!0,r[n]=!0)}return i}function ku(t,e,n,r,i){const o=i.patternDependencies;for(const a of e){const e=a.paint.get(`${t}-pattern`).value;if("constant"!==e.kind){let t=e.evaluate({zoom:r},n,{},i.availableImages);t=t&&t.name?t.name:t,o[t]=!0,n.patterns[a.id]=t}}return n}class Mu{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new jo,this.indexArray=new ra,this.indexArray2=new ca,this.programConfigurations=new Za(t.layers,t.zoom),this.segments=new as,this.segments2=new as,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.projection=t.projection}populate(t,e,n,r){this.hasPattern=Eu("fill",this.layers,e);const i=this.layers[0].layout.get("fill-sort-key"),o=[];for(const{feature:a,id:s,index:l,sourceLayerIndex:c}of t){const t=this.layers[0]._featureFilter.needGeometry,u=sc(a,t);if(!this.layers[0]._featureFilter.filter(new wo(this.zoom),u,n))continue;const h=i?i.evaluate(u,{},n,e.availableImages):void 0,p={id:s,properties:a.properties,type:a.type,sourceLayerIndex:c,index:l,geometry:t?u.geometry:ac(a,n,r),patterns:{},sortKey:h};o.push(p)}i&&o.sort(((t,e)=>t.sortKey-e.sortKey));for(const a of o){const{geometry:r,index:i,sourceLayerIndex:o}=a;if(this.hasPattern){const t=ku("fill",this.layers,a,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(a,r,i,n,{},e.availableImages);e.featureIndex.insert(t[i].feature,r,i,o,this.index)}}update(t,e,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,r)}addFeatures(t,e,n,r,i){for(const o of this.patternFeatures)this.addFeature(o,o.geometry,o.index,e,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Hc),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,e,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];for(const a of Su(e,500)){let t=0;for(const s of a)t+=s.length;const e=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray),n=e.vertexLength,r=[],i=[];for(const s of a){if(0===s.length)continue;s!==a[0]&&i.push(r.length/2);const t=this.segments2.prepareSegment(s.length,this.layoutVertexArray,this.indexArray2),e=t.vertexLength;this.layoutVertexArray.emplaceBack(s[0].x,s[0].y),this.indexArray2.emplaceBack(e+s.length-1,e),r.push(s[0].x),r.push(s[0].y);for(let n=1;n<s.length;n++)this.layoutVertexArray.emplaceBack(s[n].x,s[n].y),this.indexArray2.emplaceBack(e+n-1,e+n),r.push(s[n].x),r.push(s[n].y);t.vertexLength+=s.length,t.primitiveLength+=s.length}const o=vu(r,i);for(let a=0;a<o.length;a+=3)this.indexArray.emplaceBack(n+o[a],n+o[a+1],n+o[a+2]);e.vertexLength+=t,e.primitiveLength+=o.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,o,r)}}Yi(Mu,"FillBucket",{omit:["layers","patternFeatures"]});const Tu=new Ro({"fill-sort-key":new Ao(te.layout_fill["fill-sort-key"])});var Iu={paint:new Ro({"fill-antialias":new Oo(te.paint_fill["fill-antialias"]),"fill-opacity":new Ao(te.paint_fill["fill-opacity"]),"fill-color":new Ao(te.paint_fill["fill-color"]),"fill-outline-color":new Ao(te.paint_fill["fill-outline-color"]),"fill-translate":new Oo(te.paint_fill["fill-translate"]),"fill-translate-anchor":new Oo(te.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ao(te.paint_fill["fill-pattern"])}),layout:Tu};const Pu=Bo([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Ou=Bo([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Au=Bo([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Du}=Pu;var Ru={},Lu=m,Nu=Fu;function Fu(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(zu,this,e)}function zu(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function Bu(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)r+=((n=t[a]).x-(e=t[i]).x)*(e.y+n.y);return r}Fu.types=["Unknown","Point","LineString","Polygon"],Fu.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,i=0,o=0,a=0,s=[];t.pos<n;){if(i<=0){var l=t.readVarint();r=7&l,i=l>>3}if(i--,1===r||2===r)o+=t.readSVarint(),a+=t.readSVarint(),1===r&&(e&&s.push(e),e=[]),e.push(new Lu(o,a));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&s.push(e),s},Fu.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,l=1/0,c=-1/0;t.pos<e;){if(r<=0){var u=t.readVarint();n=7&u,r=u>>3}if(r--,1===n||2===n)(i+=t.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=t.readSVarint())<l&&(l=o),o>c&&(c=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,l,s,c]},Fu.prototype.toGeoJSON=function(t,e,n){var r,i,o=this.extent*Math.pow(2,n),a=this.extent*t,s=this.extent*e,l=this.loadGeometry(),c=Fu.types[this.type];function u(t){for(var e=0;e<t.length;e++){var n=t[e];t[e]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<l.length;r++)h[r]=l[r][0];u(l=h);break;case 2:for(r=0;r<l.length;r++)u(l[r]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=Bu(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}(l),r=0;r<l.length;r++)for(i=0;i<l[r].length;i++)u(l[r][i])}1===l.length?l=l[0]:c="Multi"+c;var p={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(p.id=this.id),p};var $u=Nu,ju=Uu;function Uu(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Vu,this,e),this.length=this._features.length}function Vu(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(n))}Uu.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new $u(this._pbf,e,this.extent,this._keys,this._values)};var Hu=ju;function Gu(t,e,n){if(3===t){var r=new Hu(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}var Wu=Ru.VectorTile=function(t,e){this.layers=t.readFields(Gu,{},e)},Xu=Ru.VectorTileFeature=Nu;function qu(t,e,n,r){const i=[],o=0===r?(t,e,n,r,i,o)=>{t.push(new v(o,n+(o-e)/(r-e)*(i-n)))}:(t,e,n,r,i,o)=>{t.push(new v(e+(o-n)/(i-n)*(r-e),o))};for(const a of t){const t=[];for(const i of a){if(i.length<=2)continue;const a=[];for(let t=0;t<i.length-1;t++){const s=i[t].x,l=i[t].y,c=i[t+1].x,u=i[t+1].y,h=0===r?s:l,p=0===r?c:u;h<e?p>e&&o(a,s,l,c,u,e):h>n?p<n&&o(a,s,l,c,u,n):a.push(i[t]),p<e&&h>=e&&o(a,s,l,c,u,e),p>n&&h<=n&&o(a,s,l,c,u,n)}let s=i[i.length-1];const l=0===r?s.x:s.y;l>=e&&l<=n&&a.push(s),a.length&&(s=a[a.length-1],a[0].x===s.x&&a[0].y===s.y||a.push(a[0]),t.push(a))}t.length&&i.push(t)}return i}Ru.VectorTileLayer=ju;const Yu=Xu.types,Zu=Math.pow(2,13);function Ku(t,e,n,r,i,o,a,s){t.emplaceBack((e<<1)+a,(n<<1)+o,(Math.floor(r*Zu)<<1)+i,Math.round(s))}function Ju(t,e,n){const r=16384;t.emplaceBack(e.x,e.y,e.z,n[0]*r,n[1]*r,n[2]*r)}class Qu{constructor(){this.acc=new v(0,0),this.polyCount=[]}startRing(t){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new v(t.x,t.y),this.max=new v(t.x,t.y))}append(t,e){this.currentPolyCount.edges++,this.acc._add(t);const n=this.min,r=this.max;t.x<n.x?n.x=t.x:t.x>r.x&&(r.x=t.x),t.y<n.y?n.y=t.y:t.y>r.y&&(r.y=t.y),((0===t.x||t.x===ss)&&t.x===e.x)!=((0===t.y||t.y===ss)&&t.y===e.y)&&this.processBorderOverlap(t,e),e.x<0!=t.x<0&&this.addBorderIntersection(0,An(e.y,t.y,(0-e.x)/(t.x-e.x))),e.x>ss!=t.x>ss&&this.addBorderIntersection(1,An(e.y,t.y,(ss-e.x)/(t.x-e.x))),e.y<0!=t.y<0&&this.addBorderIntersection(2,An(e.x,t.x,(0-e.y)/(t.y-e.y))),e.y>ss!=t.y>ss&&this.addBorderIntersection(3,An(e.x,t.x,(ss-e.y)/(t.y-e.y)))}addBorderIntersection(t,e){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const n=this.borders[t];e<n[0]&&(n[0]=e),e>n[1]&&(n[1]=e)}processBorderOverlap(t,e){if(t.x===e.x){if(t.y===e.y)return;const n=0===t.x?0:1;this.addBorderIntersection(n,e.y),this.addBorderIntersection(n,t.y)}else{const n=0===t.y?2:3;this.addBorderIntersection(n,e.x),this.addBorderIntersection(n,t.x)}}centroid(){const t=this.polyCount.reduce(((t,e)=>t+e.edges),0);return 0!==t?this.acc.div(t)._round():new v(0,0)}span(){return new v(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((t,e)=>t+ +(e[0]!==Number.MAX_VALUE)),0)}}class th{constructor(t){this.zoom=t.zoom,this.canonical=t.canonical,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=t.projection,this.layoutVertexArray=new Vo,this.centroidVertexArray=new wa,this.indexArray=new ra,this.programConfigurations=new Za(t.layers,t.zoom),this.segments=new as,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.enableTerrain=t.enableTerrain}populate(t,e,n,r){this.features=[],this.hasPattern=Eu("fill-extrusion",this.layers,e),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(t){const e=Math.exp(Math.PI*(1-t.y/(1<<t.z)*2));return 80150034*e/(e*e+1)/ss/(1<<t.z)}(n),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:i,id:o,index:a,sourceLayerIndex:s}of t){const t=this.layers[0]._featureFilter.needGeometry,l=sc(i,t);if(!this.layers[0]._featureFilter.filter(new wo(this.zoom),l,n))continue;const c={id:o,sourceLayerIndex:s,index:a,geometry:t?l.geometry:ac(i,n,r),properties:i.properties,type:i.type,patterns:{}},u=this.layoutVertexArray.length;this.hasPattern?this.features.push(ku("fill-extrusion",this.layers,c,this.zoom,e)):this.addFeature(c,c.geometry,a,n,{},e.availableImages,r),e.featureIndex.insert(i,c.geometry,a,s,this.index,u)}this.sortBorders()}addFeatures(t,e,n,r,i){for(const o of this.features){const{geometry:t}=o;this.addFeature(o,t,o.index,e,n,r,i)}this.sortBorders()}update(t,e,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Du),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=t.createVertexBuffer(this.layoutVertexExtArray,Au.members,!0))),this.programConfigurations.upload(t),this.uploaded=!0}uploadCentroid(t){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,Ou.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,n,r,i,o,a){const s=[new v(0,0),new v(ss,ss)],l=a.projection,c="globe"===l.name,u=this.enableTerrain&&!c?new Qu:null,h="Polygon"===Yu[t.type];c&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new qo);const p=Su(e,500);for(let m=p.length-1;m>=0;m--){const t=p[m];(0===t.length||(d=t[0]).every((t=>t.x<=0))||d.every((t=>t.x>=ss))||d.every((t=>t.y<=0))||d.every((t=>t.y>=ss)))&&p.splice(m,1)}var d;let f;if(c)f=lh(p,s,r);else{f=[];for(const t of p)f.push({polygon:t,bounds:s})}const g=h?this.edgeRadius:0;for(const{polygon:m,bounds:y}of f){let t=0,e=0;for(const r of m)h&&!r[0].equals(r[r.length-1])&&r.push(r[0]),e+=h?r.length-1:r.length;const n=this.segments.prepareSegment((h?5:4)*e,this.layoutVertexArray,this.indexArray);if(h){const e=[],i=[];t=n.vertexLength;for(const t of m){let o,a;t.length&&t!==m[0]&&i.push(e.length/2),o=t[1].sub(t[0])._perp()._unit();for(let i=1;i<t.length;i++){const s=t[i],u=t[i===t.length-1?1:i+1];let{x:h,y:p}=s;if(g){a=u.sub(s)._perp()._unit();const t=o.add(a)._unit(),e=g*Math.min(4,1/(o.x*t.x+o.y*t.y));h+=e*t.x,p+=e*t.y,o=a}Ku(this.layoutVertexArray,h,p,0,0,1,1,0),n.vertexLength++,e.push(s.x,s.y),c&&Ju(this.layoutVertexExtArray,l.projectTilePoint(h,p,r),l.upVector(r,h,p))}}const o=vu(e,i);for(let r=0;r<o.length;r+=3)this.indexArray.emplaceBack(t+o[r],t+o[r+2],t+o[r+1]),n.primitiveLength++}for(const i of m){u&&i.length&&u.startRing(i[0]);let e,o,a,s=i.length>4&&oh(i[i.length-2],i[0],i[1]),p=g?nh(i[i.length-2],i[0],i[1],g):0;o=i[1].sub(i[0])._perp()._unit();let d=!0;for(let f=1,m=0;f<i.length;f++){let v=i[f-1],x=i[f];const _=i[f===i.length-1?1:f+1];if(u&&h&&u.currentPolyCount.top++,ih(x,v,y)){g&&(o=_.sub(x)._perp()._unit(),d=!d);continue}u&&u.append(x,v);const b=x.sub(v)._perp(),w=b.x/(Math.abs(b.x)+Math.abs(b.y)),S=b.y>0?1:0,C=v.dist(x);if(m+C>32768&&(m=0),g){a=_.sub(x)._perp()._unit();let t=rh(v,x,_,eh(o,a),g);isNaN(t)&&(t=0);const e=x.sub(v)._unit();v=v.add(e.mult(p))._round(),x=x.add(e.mult(-t))._round(),p=t,o=a}const E=n.vertexLength,k=i.length>4&&oh(v,x,_);let M=ah(m,s,d);if(Ku(this.layoutVertexArray,v.x,v.y,w,S,0,0,M),Ku(this.layoutVertexArray,v.x,v.y,w,S,0,1,M),m+=C,M=ah(m,k,!d),s=k,Ku(this.layoutVertexArray,x.x,x.y,w,S,0,0,M),Ku(this.layoutVertexArray,x.x,x.y,w,S,0,1,M),n.vertexLength+=4,this.indexArray.emplaceBack(E+0,E+1,E+2),this.indexArray.emplaceBack(E+1,E+3,E+2),n.primitiveLength+=2,g){const r=t+(1===f?i.length-2:f-2),o=1===f?t:r+1;if(this.indexArray.emplaceBack(E+1,r,E+3),this.indexArray.emplaceBack(r,o,E+3),n.primitiveLength+=2,void 0===e&&(e=E),!ih(_,i[f],y)){const t=f===i.length-1?e:n.vertexLength;this.indexArray.emplaceBack(E+2,E+3,t),this.indexArray.emplaceBack(E+3,t+1,t),this.indexArray.emplaceBack(E+3,o,t+1),n.primitiveLength+=3}d=!d}if(c){const t=this.layoutVertexExtArray,e=l.projectTilePoint(v.x,v.y,r),n=l.projectTilePoint(x.x,x.y,r),i=l.upVector(r,v.x,v.y),o=l.upVector(r,x.x,x.y);Ju(t,e,i),Ju(t,e,i),Ju(t,n,o),Ju(t,n,o)}}h&&(t+=i.length-1)}}if(u&&u.polyCount.length>0){if(u.borders){u.vertexArrayOffset=this.centroidVertexArray.length;const t=u.borders,e=this.featuresOnBorder.push(u)-1;for(let n=0;n<4;n++)t[n][0]!==Number.MAX_VALUE&&this.borders[n].push(e)}this.encodeCentroid(u.borders?void 0:u.centroid(),u)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,o,r)}sortBorders(){for(let t=0;t<4;t++)this.borders[t].sort(((e,n)=>this.featuresOnBorder[e].borders[t][0]-this.featuresOnBorder[n].borders[t][0]))}encodeCentroid(t,e){let n,r,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t)if(0!==t.y){const i=e.span()._mult(this.tileToMeter);n=(Math.max(t.x,1)<<3)+Math.min(7,Math.round(i.x/10)),r=(Math.max(t.y,1)<<3)+Math.min(7,Math.round(i.y/10))}else n=Math.ceil(7*(t.x+450)),r=0;else n=0,r=+i;let o=i?this.centroidVertexArray.length:e.vertexArrayOffset;for(const a of e.polyCount){i&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*a.edges+a.top);for(let t=0;t<a.top;t++)this.centroidVertexArray.emplace(o++,n,r);for(let t=0;t<2*a.edges;t++)this.centroidVertexArray.emplace(o++,0,r),this.centroidVertexArray.emplace(o++,n,r)}}}function eh(t,e){const n=t.add(e)._unit();return t.x*n.x+t.y*n.y}function nh(t,e,n,r){const i=e.sub(t)._perp()._unit(),o=n.sub(e)._perp()._unit();return rh(t,e,n,eh(i,o),r)}function rh(t,e,n,r,i){const o=Math.sqrt(1-r*r);return Math.min(t.dist(e)/3,e.dist(n)/3,i*o/r)}function ih(t,e,n){return t.x<n[0].x&&e.x<n[0].x||t.x>n[1].x&&e.x>n[1].x||t.y<n[0].y&&e.y<n[0].y||t.y>n[1].y&&e.y>n[1].y}function oh(t,e,n){if(t.x<0||t.x>=ss||e.x<0||e.x>=ss||n.x<0||n.x>=ss)return!1;const r=n.sub(e),i=r.perp(),o=t.sub(e);return(r.x*o.x+r.y*o.y)/Math.sqrt((r.x*r.x+r.y*r.y)*(o.x*o.x+o.y*o.y))>-.866&&i.x*o.x+i.y*o.y<0}function ah(t,e,n){const r=e?2|t:-3&t;return n?1|r:-2&r}function sh(){const t=Math.PI/32,e=Math.tan(t),n=Bl;return n*Math.sqrt(1+2*e*e)-n}function lh(t,e,n){const r=1<<n.z,i=Xl(n.x/r),o=Xl((n.x+1)/r),a=ql(n.y/r),s=ql((n.y+1)/r);return function(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0;const a=[];if(!t.length||!n||!r)return a;const s=(t,e)=>{for(const n of t)a.push({polygon:n,bounds:e})},l=Math.ceil(Math.log2(n)),c=Math.ceil(Math.log2(r)),u=l-c,h=[];for(let f=0;f<Math.abs(u);f++)h.push(u>0?0:1);for(let f=0;f<Math.min(l,c);f++)h.push(0),h.push(1);let p=t;if(p=qu(p,e[0].y-i,e[1].y+i,1),p=qu(p,e[0].x-i,e[1].x+i,0),!p.length)return a;const d=[];for(h.length?d.push({polygons:p,bounds:e,depth:0}):s(p,e);d.length;){const t=d.pop(),e=t.depth,n=h[e],r=t.bounds[0],a=t.bounds[1],l=0===n?r.x:r.y,c=0===n?a.x:a.y,u=o?o(n,l,c):.5*(l+c),p=qu(t.polygons,l-i,u+i,n),f=qu(t.polygons,u-i,c+i,n);if(p.length){const t=[r,new v(0===n?u:a.x,1===n?u:a.y)];h.length>e+1?d.push({polygons:p,bounds:t,depth:e+1}):s(p,t)}if(f.length){const t=[new v(0===n?u:r.x,1===n?u:r.y),a];h.length>e+1?d.push({polygons:f,bounds:t,depth:e+1}):s(f,t)}}return a}(t,e,Math.ceil((o-i)/11.25),Math.ceil((a-s)/11.25),1,((t,e,i)=>{if(0===t)return.5*(e+i);{const t=ql((n.y+e/ss)/r);return(Gl(.5*(ql((n.y+i/ss)/r)+t))*r-n.y)*ss}}))}Yi(th,"FillExtrusionBucket",{omit:["layers","features"]}),Yi(Qu,"PartMetadata");const ch=new Ro({"fill-extrusion-edge-radius":new Oo(te["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var uh={paint:new Ro({"fill-extrusion-opacity":new Oo(te["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ao(te["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Oo(te["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Oo(te["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ao(te["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ao(te["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ao(te["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Oo(te["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Oo(te["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Oo(te["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new Oo(te["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:ch};function hh(t,e,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}class ph{constructor(t,e,n){this.z=t,this.x=e,this.y=n,this.key=gh(0,t,t,e,n)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,e){const n=function(t,e,n){var r=hh(256*t,256*(e=Math.pow(2,n)-e-1),n),i=hh(256*(t+1),256*(e+1),n);return r[0]+","+r[1]+","+i[0]+","+i[1]}(this.x,this.y,this.z),r=function(t,e,n){let r,i="";for(let o=t;o>0;o--)r=1<<o-1,i+=(e&r?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",r).replace("{bbox-epsg-3857}",n)}toString(){return`${this.z}/${this.x}/${this.y}`}}class dh{constructor(t,e){this.wrap=t,this.canonical=e,this.key=gh(t,e.z,e.z,e.x,e.y)}}class fh{constructor(t,e,n,r,i){this.overscaledZ=t,this.wrap=e,this.canonical=new ph(n,+r,+i),this.key=0===e&&t===n?this.canonical.key:gh(e,t,n,r,i)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){const e=this.canonical.z-t;return t>this.canonical.z?new fh(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new fh(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)}calculateScaledKey(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.overscaledZ===t&&e)return this.key;if(t>this.canonical.z)return gh(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y);{const n=this.canonical.z-t;return gh(this.wrap*+e,t,t,this.canonical.x>>n,this.canonical.y>>n)}}isChildOf(t){if(t.wrap!==this.wrap)return!1;const e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e}children(t){if(this.overscaledZ>=t)return[new fh(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const e=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new fh(e,this.wrap,e,n,r),new fh(e,this.wrap,e,n+1,r),new fh(e,this.wrap,e,n,r+1),new fh(e,this.wrap,e,n+1,r+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new fh(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new fh(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new dh(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function gh(t,e,n,r,i){const o=1<<Math.min(n,22);let a=o*(i%o)+r%o;return t&&n<22&&(a+=o*o*((t<0?-2*t-1:2*t)%(1<<2*(22-n)))),16*(32*a+n)+(e-n)}Yi(ph,"CanonicalTileID"),Yi(fh,"OverscaledTileID",{omit:["projMatrix"]});class mh extends v{constructor(t,e,n){super(t,e),this.z=n}}function yh(t,e){return t.x*e.x+t.y*e.y}function vh(t,e){if(1===t.length){let n=0;const r=e[n++];let i;for(;!i||r.equals(i);)if(i=e[n++],!i)return 1/0;for(;n<e.length;n++){const o=e[n],a=t[0],s=i.sub(r),l=o.sub(r),c=a.sub(r),u=yh(s,s),h=yh(s,l),p=yh(l,l),d=yh(c,s),f=yh(c,l),g=u*p-h*h,m=(p*d-h*f)/g,y=(u*f-h*d)/g,v=r.z*(1-m-y)+i.z*m+o.z*y;if(isFinite(v))return v}return 1/0}{let t=1/0;for(const n of e)t=Math.min(t,n.z);return t}}function xh(t,e,n,r,i,o,a,s){const l=a*i.getElevationAt(t,e,!0,!0),c=0!==o[0],u=c?0===o[1]?a*(o[0]/7-450):a*function(t,e,n){const r=Math.floor(e[0]/8),i=Math.floor(e[1]/8),o=10*(e[0]-8*r),a=10*(e[1]-8*i),s=t.getElevationAt(r,i,!0,!0),l=t.getMeterToDEM(n),c=Math.floor(.5*(o*l-1)),u=Math.floor(.5*(a*l-1)),h=t.tileCoordToPixel(r,i),p=2*c+1,d=2*u+1,f=function(t,e,n,r,i){return[t.getElevationAtPixel(e,n,!0),t.getElevationAtPixel(e+i,n,!0),t.getElevationAtPixel(e,n+i,!0),t.getElevationAtPixel(e+r,n+i,!0)]}(t,h.x-c,h.y-u,p,d),g=Math.abs(f[0]-f[1]),m=Math.abs(f[2]-f[3]),y=Math.abs(f[0]-f[2])+Math.abs(f[1]-f[3]),v=Math.min(.25,.5*l*(g+m)/p),x=Math.min(.25,.5*l*y/d);return s+Math.max(v*o,x*a)}(i,o,s):l;return{base:l+(0===n)?-1:n,top:c?Math.max(u+r,l+n+2):l+r}}const _h=Bo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:bh}=_h,wh=Bo([{name:"a_packed",components:4,type:"Float32"}]),{members:Sh}=wh,Ch=Xu.types,Eh=Math.cos(Math.PI/180*37.5);class kh{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.projection=t.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((t=>{this.gradients[t.id]={}})),this.layoutVertexArray=new Ho,this.layoutVertexArray2=new Go,this.indexArray=new ra,this.programConfigurations=new Za(t.layers,t.zoom),this.segments=new as,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n,r){this.hasPattern=Eu("line",this.layers,e);const i=this.layers[0].layout.get("line-sort-key"),o=[];for(const{feature:c,id:u,index:h,sourceLayerIndex:p}of t){const t=this.layers[0]._featureFilter.needGeometry,e=sc(c,t);if(!this.layers[0]._featureFilter.filter(new wo(this.zoom),e,n))continue;const a=i?i.evaluate(e,{},n):void 0,s={id:u,properties:c.properties,type:c.type,sourceLayerIndex:p,index:h,geometry:t?e.geometry:ac(c,n,r),patterns:{},sortKey:a};o.push(s)}i&&o.sort(((t,e)=>t.sortKey-e.sortKey));const{lineAtlas:a,featureIndex:s}=e,l=this.addConstantDashes(a);for(const c of o){const{geometry:r,index:i,sourceLayerIndex:o}=c;if(l&&this.addFeatureDashes(c,a),this.hasPattern){const t=ku("line",this.layers,c,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(c,r,i,n,a.positions,e.availableImages);s.insert(t[i].feature,r,i,o,this.index)}}addConstantDashes(t){let e=!1;for(const n of this.layers){const r=n.paint.get("line-dasharray").value,i=n.layout.get("line-cap").value;if("constant"!==r.kind||"constant"!==i.kind)e=!0;else{const e=i.value,n=r.value;if(!n)continue;t.addDash(n,e)}}return e}addFeatureDashes(t,e){const n=this.zoom;for(const r of this.layers){const i=r.paint.get("line-dasharray").value,o=r.layout.get("line-cap").value;if("constant"===i.kind&&"constant"===o.kind)continue;let a,s;if("constant"===i.kind){if(a=i.value,!a)continue}else a=i.evaluate({zoom:n},t);s="constant"===o.kind?o.value:o.evaluate({zoom:n},t),e.addDash(a,s),t.patterns[r.id]=e.getKey(a,s)}}update(t,e,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,r)}addFeatures(t,e,n,r,i){for(const o of this.patternFeatures)this.addFeature(o,o.geometry,o.index,e,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Sh)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,bh),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,e,n,r,i,o){const a=this.layers[0].layout,s=a.get("line-join").evaluate(t,{}),l=a.get("line-cap").evaluate(t,{}),c=a.get("line-miter-limit"),u=a.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const h of e)this.addLine(h,t,s,l,c,u);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,o,r)}addLine(t,e,n,r,i,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let e=0;e<t.length-1;e++)this.totalDistance+=t[e].dist(t[e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const a="Polygon"===Ch[e.type];let s=t.length;for(;s>=2&&t[s-1].equals(t[s-2]);)s--;let l=0;for(;l<s-1&&t[l].equals(t[l+1]);)l++;if(s<(a?3:2))return;"bevel"===n&&(i=1.05);const c=this.overscaling<=16?15*ss/(512*this.overscaling):0,u=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let h,p,d,f,g;this.e1=this.e2=-1,a&&(h=t[s-2],g=t[l].sub(h)._unit()._perp());for(let m=l;m<s;m++){if(d=m===s-1?a?t[l+1]:void 0:t[m+1],d&&t[m].equals(d))continue;g&&(f=g),h&&(p=h),h=t[m],g=d?d.sub(h)._unit()._perp():f,f=f||g;let e=f.add(g);0===e.x&&0===e.y||e._unit();const y=f.x*g.x+f.y*g.y,v=e.x*g.x+e.y*g.y,x=0!==v?1/v:1/0,_=2*Math.sqrt(2-2*v),b=v<Eh&&p&&d,w=f.x*g.y-f.y*g.x>0;if(b&&m>l){const t=h.dist(p);if(t>2*c){const e=h.sub(h.sub(p)._mult(c/t)._round());this.updateDistance(p,e),this.addCurrentVertex(e,f,0,0,u),p=e}}const S=p&&d;let C=S?n:a?"butt":r;if(S&&"round"===C&&(x<o?C="miter":x<=2&&(C="fakeround")),"miter"===C&&x>i&&(C="bevel"),"bevel"===C&&(x>2&&(C="flipbevel"),x<i&&(C="miter")),p&&this.updateDistance(p,h),"miter"===C)e._mult(x),this.addCurrentVertex(h,e,0,0,u);else if("flipbevel"===C){if(x>100)e=g.mult(-1);else{const t=x*f.add(g).mag()/f.sub(g).mag();e._perp()._mult(t*(w?-1:1))}this.addCurrentVertex(h,e,0,0,u),this.addCurrentVertex(h,e.mult(-1),0,0,u)}else if("bevel"===C||"fakeround"===C){const t=-Math.sqrt(x*x-1),e=w?t:0,n=w?0:t;if(p&&this.addCurrentVertex(h,f,e,n,u),"fakeround"===C){const t=Math.round(180*_/Math.PI/20);for(let e=1;e<t;e++){let n=e/t;if(.5!==n){const t=n-.5;n+=n*t*(n-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*t*t+(.848013+y*(.215638*y-1.06021)))}const r=g.sub(f)._mult(n)._add(f)._unit()._mult(w?-1:1);this.addHalfVertex(h,r.x,r.y,!1,w,0,u)}}d&&this.addCurrentVertex(h,g,-e,-n,u)}else if("butt"===C)this.addCurrentVertex(h,e,0,0,u);else if("square"===C){const t=p?1:-1;p||this.addCurrentVertex(h,e,t,t,u),this.addCurrentVertex(h,e,0,0,u),p&&this.addCurrentVertex(h,e,t,t,u)}else"round"===C&&(p&&(this.addCurrentVertex(h,f,0,0,u),this.addCurrentVertex(h,f,1,1,u,!0)),d&&(this.addCurrentVertex(h,g,-1,-1,u,!0),this.addCurrentVertex(h,g,0,0,u)));if(b&&m<s-1){const t=h.dist(d);if(t>2*c){const e=h.add(d.sub(h)._mult(c/t)._round());this.updateDistance(h,e),this.addCurrentVertex(e,g,0,0,u),h=e}}}}addCurrentVertex(t,e,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const a=e.y*r-e.x,s=-e.y-e.x*r;this.addHalfVertex(t,e.x+e.y*n,e.y-e.x*n,o,!1,n,i),this.addHalfVertex(t,a,s,o,!0,-r,i)}addHalfVertex(t,e,n,r,i,o,a){let{x:s,y:l}=t;this.layoutVertexArray.emplaceBack((s<<1)+(r?1:0),(l<<1)+(i?1:0),Math.round(63*e)+128,Math.round(63*n)+128,1+(0===o?0:o<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const c=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,c),a.primitiveLength++),i?this.e2=c:this.e1=c}updateScaledDistance(){if(this.lineClips){const t=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=t*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(t,e){this.distance+=t.dist(e),this.updateScaledDistance()}}Yi(kh,"LineBucket",{omit:["layers","patternFeatures"]});const Mh=new Ro({"line-cap":new Ao(te.layout_line["line-cap"]),"line-join":new Ao(te.layout_line["line-join"]),"line-miter-limit":new Oo(te.layout_line["line-miter-limit"]),"line-round-limit":new Oo(te.layout_line["line-round-limit"]),"line-sort-key":new Ao(te.layout_line["line-sort-key"])});var Th={paint:new Ro({"line-opacity":new Ao(te.paint_line["line-opacity"]),"line-color":new Ao(te.paint_line["line-color"]),"line-translate":new Oo(te.paint_line["line-translate"]),"line-translate-anchor":new Oo(te.paint_line["line-translate-anchor"]),"line-width":new Ao(te.paint_line["line-width"]),"line-gap-width":new Ao(te.paint_line["line-gap-width"]),"line-offset":new Ao(te.paint_line["line-offset"]),"line-blur":new Ao(te.paint_line["line-blur"]),"line-dasharray":new Ao(te.paint_line["line-dasharray"]),"line-pattern":new Ao(te.paint_line["line-pattern"]),"line-gradient":new Do(te.paint_line["line-gradient"]),"line-trim-offset":new Oo(te.paint_line["line-trim-offset"])}),layout:Mh};const Ih=new class extends Ao{possiblyEvaluate(t,e){return e=new wo(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,n,r){return e=A({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,n,r)}}(Th.paint.properties["line-width"].specification);function Ph(t,e){return e>0?e+2*t:t}Ih.useIntegerZoom=!0;const Oh=Bo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Ah=Bo([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Dh=Bo([{name:"a_projected_pos",components:4,type:"Float32"}],4);Bo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Rh=Bo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Lh=Bo([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Bo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Nh=Bo([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Fh=Bo([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Bo([{name:"triangle",components:3,type:"Uint16"}]),Bo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Bo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Bo([{type:"Float32",name:"offsetX"}]),Bo([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var zh=24;const Bh=128;function $h(t,e){const{expression:n}=e;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new wo(t+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:e,interpolationType:r}=n;let i=0;for(;i<e.length&&e[i]<=t;)i++;i=Math.max(0,i-1);let o=i;for(;o<e.length&&e[o]<t+1;)o++;o=Math.min(e.length-1,o);const a=e[i],s=e[o];return"composite"===n.kind?{kind:"composite",minZoom:a,maxZoom:s,interpolationType:r}:{kind:"camera",minZoom:a,maxZoom:s,minSize:n.evaluate(new wo(a)),maxSize:n.evaluate(new wo(s)),interpolationType:r}}}function jh(t,e,n){let{uSize:r,uSizeT:i}=e,{lowerSize:o,upperSize:a}=n;return"source"===t.kind?o/Bh:"composite"===t.kind?An(o/Bh,a/Bh,i):r}function Uh(t,e){let n=0,r=0;if("constant"===t.kind)r=t.layoutSize;else if("source"!==t.kind){const{interpolationType:i,minZoom:o,maxZoom:a}=t,s=i?M(tr.interpolationFactor(i,e,o,a),0,1):0;"camera"===t.kind?r=An(t.minSize,t.maxSize,s):n=s}return{uSizeT:n,uSize:r}}var Vh=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Bh,evaluateSizeForFeature:jh,evaluateSizeForZoom:Uh,getSizeData:$h});function Hh(t,e,n){return t.sections.forEach((t=>{t.text=function(t,e,n){const r=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),bo.applyArabicShaping&&(t=bo.applyArabicShaping(t)),t}(t.text,e,n)})),t}const Gh={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42","\u2190":"\u2191","\u2192":"\u2193"};function Wh(t){return"\ufe36"===t||"\ufe48"===t||"\ufe38"===t||"\ufe44"===t||"\ufe42"===t||"\ufe3e"===t||"\ufe3c"===t||"\ufe3a"===t||"\ufe18"===t||"\ufe40"===t||"\ufe10"===t||"\ufe13"===t||"\ufe14"===t||"\uff40"===t||"\uffe3"===t||"\ufe11"===t||"\ufe12"===t}function Xh(t){return"\ufe35"===t||"\ufe47"===t||"\ufe37"===t||"\ufe43"===t||"\ufe41"===t||"\ufe3d"===t||"\ufe3b"===t||"\ufe39"===t||"\ufe17"===t||"\ufe3f"===t}var qh=Kh,Yh=function(t,e,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?i-1:0,p=n?-1:1,d=t[e+h];for(h+=p,o=d&(1<<-u)-1,d>>=-u,u+=s;u>0;o=256*o+t[e+h],h+=p,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+t[e+h],h+=p,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},Zh=function(t,e,n,r,i,o){var a,s,l,c=8*o-i-1,u=(1<<c)-1,h=u>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,f=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+h>=1?p/l:p*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(e*l-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+d]=255&s,d+=f,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+d]=255&a,d+=f,a/=256,c-=8);t[n+d-f]|=128*g};function Kh(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Kh.Varint=0,Kh.Fixed64=1,Kh.Bytes=2,Kh.Fixed32=5;var Jh=4294967296,Qh=1/Jh,tp="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function ep(t){return t.type===Kh.Bytes?t.readVarint()+t.pos:t.pos+1}function np(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function rp(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function ip(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function op(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function ap(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function sp(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function lp(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function cp(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function up(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function hp(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function pp(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function dp(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function fp(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function gp(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}Kh.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=dp(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=gp(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=dp(this.buf,this.pos)+dp(this.buf,this.pos+4)*Jh;return this.pos+=8,t},readSFixed64:function(){var t=dp(this.buf,this.pos)+gp(this.buf,this.pos+4)*Jh;return this.pos+=8,t},readFloat:function(){var t=Yh(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Yh(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return np(t,r,e);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return np(t,r,e);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return np(t,r,e);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return np(t,r,e);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return np(t,r,e);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return np(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&tp?function(t,e,n){return tp.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){for(var r="",i=e;i<n;){var o,a,s,l=t[i],c=null,u=l>239?4:l>223?3:l>191?2:1;if(i+u>n)break;1===u?l<128&&(c=l):2===u?128==(192&(o=t[i+1]))&&(c=(31&l)<<6|63&o)<=127&&(c=null):3===u?(a=t[i+2],128==(192&(o=t[i+1]))&&128==(192&a)&&((c=(15&l)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(a=t[i+2],s=t[i+3],128==(192&(o=t[i+1]))&&128==(192&a)&&128==(192&s)&&((c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),i+=u}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Kh.Bytes)return t.push(this.readVarint(e));var n=ep(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Kh.Bytes)return t.push(this.readSVarint());var e=ep(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Kh.Bytes)return t.push(this.readBoolean());var e=ep(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Kh.Bytes)return t.push(this.readFloat());var e=ep(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Kh.Bytes)return t.push(this.readDouble());var e=ep(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Kh.Bytes)return t.push(this.readFixed32());var e=ep(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Kh.Bytes)return t.push(this.readSFixed32());var e=ep(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Kh.Bytes)return t.push(this.readFixed64());var e=ep(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Kh.Bytes)return t.push(this.readSFixed64());var e=ep(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Kh.Varint)for(;this.buf[this.pos++]>127;);else if(e===Kh.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Kh.Fixed32)this.pos+=4;else{if(e!==Kh.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),fp(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),fp(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),fp(this.buf,-1&t,this.pos),fp(this.buf,Math.floor(t*Qh),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),fp(this.buf,-1&t,this.pos),fp(this.buf,Math.floor(t*Qh),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,n.buf[n.pos]=127&(t>>>=7)}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&rp(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),Zh(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Zh(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&rp(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,Kh.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,ip,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,op,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,lp,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,ap,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,sp,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,cp,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,up,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,hp,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,pp,e)},writeBytesField:function(t,e){this.writeTag(t,Kh.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Kh.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Kh.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Kh.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Kh.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Kh.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Kh.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Kh.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Kh.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Kh.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var mp=p(qh);const yp=3;function vp(t,e,n){e.glyphs=[],1===t&&n.readMessage(xp,e)}function xp(t,e,n){if(3===t){const{id:t,bitmap:r,width:i,height:o,left:a,top:s,advance:l}=n.readMessage(_p,{});e.glyphs.push({id:t,bitmap:new zc({width:i+2*yp,height:o+2*yp},r),metrics:{width:i,height:o,left:a,top:s,advance:l}})}else 4===t?e.ascender=n.readSVarint():5===t&&(e.descender=n.readSVarint())}function _p(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}const bp=yp;function wp(t){let e=0,n=0;for(const a of t)e+=a.w*a.h,n=Math.max(n,a.w);t.sort(((t,e)=>e.h-t.h));const r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}];let i=0,o=0;for(const a of t)for(let t=r.length-1;t>=0;t--){const e=r[t];if(!(a.w>e.w||a.h>e.h)){if(a.x=e.x,a.y=e.y,o=Math.max(o,a.y+a.h),i=Math.max(i,a.x+a.w),a.w===e.w&&a.h===e.h){const e=r.pop();t<r.length&&(r[t]=e)}else a.h===e.h?(e.x+=a.w,e.w-=a.w):a.w===e.w?(e.y+=a.h,e.h-=a.h):(r.push({x:e.x+a.w,y:e.y,w:e.w-a.w,h:a.h}),e.y+=a.h,e.h-=a.h);break}}return{w:i,h:o,fill:e/(i*o)||0}}const Sp=1;class Cp{constructor(t,e){let{pixelRatio:n,version:r,stretchX:i,stretchY:o,content:a}=e;this.paddedRect=t,this.pixelRatio=n,this.stretchX=i,this.stretchY=o,this.content=a,this.version=r}get tl(){return[this.paddedRect.x+Sp,this.paddedRect.y+Sp]}get br(){return[this.paddedRect.x+this.paddedRect.w-Sp,this.paddedRect.y+this.paddedRect.h-Sp]}get displaySize(){return[(this.paddedRect.w-2*Sp)/this.pixelRatio,(this.paddedRect.h-2*Sp)/this.pixelRatio]}}class Ep{constructor(t,e){const n={},r={};this.haveRenderCallbacks=[];const i=[];this.addImages(t,n,i),this.addImages(e,r,i);const{w:o,h:a}=wp(i),s=new Bc({width:o||1,height:a||1});for(const l in t){const e=t[l],r=n[l].paddedRect;Bc.copy(e.data,s,{x:0,y:0},{x:r.x+Sp,y:r.y+Sp},e.data)}for(const l in e){const t=e[l],n=r[l].paddedRect,i=n.x+Sp,o=n.y+Sp,a=t.data.width,c=t.data.height;Bc.copy(t.data,s,{x:0,y:0},{x:i,y:o},t.data),Bc.copy(t.data,s,{x:0,y:c-1},{x:i,y:o-1},{width:a,height:1}),Bc.copy(t.data,s,{x:0,y:0},{x:i,y:o+c},{width:a,height:1}),Bc.copy(t.data,s,{x:a-1,y:0},{x:i-1,y:o},{width:1,height:c}),Bc.copy(t.data,s,{x:0,y:0},{x:i+a,y:o},{width:1,height:c})}this.image=s,this.iconPositions=n,this.patternPositions=r}addImages(t,e,n){for(const r in t){const i=t[r],o={x:0,y:0,w:i.data.width+2*Sp,h:i.data.height+2*Sp};n.push(o),e[r]=new Cp(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}patchUpdatedImages(t,e){this.haveRenderCallbacks=this.haveRenderCallbacks.filter((e=>t.hasImage(e))),t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const n in t.updatedImages)this.patchUpdatedImage(this.iconPositions[n],t.getImage(n),e),this.patchUpdatedImage(this.patternPositions[n],t.getImage(n),e)}patchUpdatedImage(t,e,n){if(!t||!e)return;if(t.version===e.version)return;t.version=e.version;const[r,i]=t.tl;n.update(e.data,void 0,{x:r,y:i})}}Yi(Cp,"ImagePosition"),Yi(Ep,"ImageAtlas");const kp={horizontal:1,vertical:2,horizontalOnly:3},Mp=-17;class Tp{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,e){const n=new Tp;return n.scale=t||1,n.fontStack=e,n}static forImage(t){const e=new Tp;return e.imageName=t,e}}class Ip{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,e){const n=new Ip;for(let r=0;r<t.sections.length;r++){const i=t.sections[r];i.image?n.addImageSection(i):n.addTextSection(i,e)}return n}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSections(){return this.sections}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(t){this.text=function(t,e){let n="";for(let r=0;r<t.length;r++){const i=t.charCodeAt(r+1)||null,o=t.charCodeAt(r-1)||null;n+=!e&&(i&&oo(i)&&!Gh[t[r+1]]||o&&oo(o)&&!Gh[t[r-1]])||!Gh[t[r]]?t[r]:Gh[t[r]]}return n}(this.text,t)}trim(){let t=0;for(let n=0;n<this.text.length&&Op[this.text.charCodeAt(n)];n++)t++;let e=this.text.length;for(let n=this.text.length-1;n>=0&&n>=t&&Op[this.text.charCodeAt(n)];n--)e--;this.text=this.text.substring(t,e),this.sectionIndex=this.sectionIndex.slice(t,e)}substring(t,e){const n=new Ip;return n.text=this.text.substring(t,e),n.sectionIndex=this.sectionIndex.slice(t,e),n.sections=this.sections,n}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,e)=>Math.max(t,this.sections[e].scale)),0)}addTextSection(t,e){this.text+=t.text,this.sections.push(Tp.forText(t.scale,t.fontStack||e));const n=this.sections.length-1;for(let r=0;r<t.text.length;++r)this.sectionIndex.push(n)}addImageSection(t){const e=t.image?t.image.name:"";if(0===e.length)return void H("Can't add FormattedSection with an empty image.");const n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(Tp.forImage(e)),this.sectionIndex.push(this.sections.length-1)):H("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Pp(t,e,n,r,i,o,a,s,l,c,u,h,p,d,f){const g=Ip.fromFeature(t,i);h===kp.vertical&&g.verticalizePunctuation(p);let m=[];const y=function(t,e,n,r,i,o){if(!t)return[];const a=[],s=function(t,e,n,r,i,o){let a=0;for(let s=0;s<t.length();s++){const n=t.getSection(s);a+=Dp(t.getCharCode(s),n,r,i,e,o)}return a/Math.max(1,Math.ceil(a/n))}(t,e,n,r,i,o),l=t.text.indexOf("\u200b")>=0;let c=0;for(let h=0;h<t.length();h++){const n=t.getSection(h),p=t.getCharCode(h);if(Op[p]||(c+=Dp(p,n,r,i,e,o)),h<t.length()-1){const e=!((u=p)<11904||!(to["Bopomofo Extended"](u)||to.Bopomofo(u)||to["CJK Compatibility Forms"](u)||to["CJK Compatibility Ideographs"](u)||to["CJK Compatibility"](u)||to["CJK Radicals Supplement"](u)||to["CJK Strokes"](u)||to["CJK Symbols and Punctuation"](u)||to["CJK Unified Ideographs Extension A"](u)||to["CJK Unified Ideographs"](u)||to["Enclosed CJK Letters and Months"](u)||to["Halfwidth and Fullwidth Forms"](u)||to.Hiragana(u)||to["Ideographic Description Characters"](u)||to["Kangxi Radicals"](u)||to["Katakana Phonetic Extensions"](u)||to.Katakana(u)||to["Vertical Forms"](u)||to["Yi Radicals"](u)||to["Yi Syllables"](u)));(Ap[p]||e||n.imageName)&&a.push(Np(h+1,c,s,a,Lp(p,t.getCharCode(h+1),e&&l),!1))}}var u;return Fp(Np(t.length(),c,s,a,0,!0))}(g,c,o,e,r,d),{processBidirectionalText:v,processStyledBidirectionalText:x}=bo;if(v&&1===g.sections.length){const t=v(g.toString(),y);for(const e of t){const t=new Ip;t.text=e,t.sections=g.sections;for(let n=0;n<e.length;n++)t.sectionIndex.push(0);m.push(t)}}else if(x){const t=x(g.text,g.sectionIndex,y);for(const e of t){const t=new Ip;t.text=e[0],t.sectionIndex=e[1],t.sections=g.sections,m.push(t)}}else m=function(t,e){const n=[],r=t.text;let i=0;for(const o of e)n.push(t.substring(i,o)),i=o;return i<r.length&&n.push(t.substring(i,r.length)),n}(g,y);const _=[],b={positionedLines:_,text:g.toString(),top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:h,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(t,e,n,r,i,o,a,s,l,c,u,h){let p=0,d=0,f=0;const g="right"===s?1:"left"===s?0:.5;let m=!1;for(const w of i){const t=w.getSections();for(const n of t){if(n.imageName)continue;const t=e[n.fontStack];if(t&&(m=void 0!==t.ascender&&void 0!==t.descender,!m))break}if(!m)break}let y=0;for(const w of i){w.trim();const i=w.getMaxScale(),a=(i-1)*zh,s={positionedGlyphs:[],lineOffset:0};t.positionedLines[y]=s;const x=s.positionedGlyphs;let _=0;if(!w.length()){d+=o,++y;continue}let b=0,S=0;for(let o=0;o<w.length();o++){const a=w.getSection(o),s=w.getSectionIndex(o),f=w.getCharCode(o);let g=a.scale,y=null,C=null,E=null,k=zh,M=0;const T=!(l===kp.horizontal||!u&&!io(f)||u&&(Op[f]||(v=f,to.Arabic(v)||to["Arabic Supplement"](v)||to["Arabic Extended-A"](v)||to["Arabic Presentation Forms-A"](v)||to["Arabic Presentation Forms-B"](v))));if(a.imageName){const e=r[a.imageName];if(!e)continue;E=a.imageName,t.iconsInText=t.iconsInText||!0,C=e.paddedRect;const n=e.displaySize;g=g*zh/h,y={width:n[0],height:n[1],left:Sp,top:-bp,advance:T?n[1]:n[0],localGlyph:!1},M=m?-y.height*g:Mp+i*zh-n[1]*g,k=y.advance;const o=(T?n[0]:n[1])*g-zh*i;o>0&&o>_&&(_=o)}else{const t=n[a.fontStack];if(!t)continue;t[f]&&(C=t[f]);const r=e[a.fontStack];if(!r)continue;const o=r.glyphs[f];if(!o)continue;if(y=o.metrics,k=8203!==f?zh:0,m){const t=void 0!==r.ascender?Math.abs(r.ascender):0,e=void 0!==r.descender?Math.abs(r.descender):0,n=(t+e)*g;b<n&&(b=n,S=(t-e)/2*g),M=-t*g}else M=Mp+(i-g)*zh}T?(t.verticalizable=!0,x.push({glyph:f,imageName:E,x:p,y:d+M,vertical:T,scale:g,localGlyph:y.localGlyph,fontStack:a.fontStack,sectionIndex:s,metrics:y,rect:C}),p+=k*g+c):(x.push({glyph:f,imageName:E,x:p,y:d+M,vertical:T,scale:g,localGlyph:y.localGlyph,fontStack:a.fontStack,sectionIndex:s,metrics:y,rect:C}),p+=y.advance*g+c)}0!==x.length&&(f=Math.max(p-c,f),m?Bp(x,g,_,S,o*i/2):Bp(x,g,_,0,o/2)),p=0;const C=o*i+_;s.lineOffset=Math.max(_,a),d+=C,++y}var v;const x=d,{horizontalAlign:_,verticalAlign:b}=zp(a);(function(t,e,n,r,i,o){const a=(e-n)*i,s=-o*r;for(const l of t)for(const t of l.positionedGlyphs)t.x+=a,t.y+=s})(t.positionedLines,g,_,b,f,x),t.top+=-b*x,t.bottom=t.top+x,t.left+=-_*f,t.right=t.left+f,t.hasBaseline=m}(b,e,n,r,m,a,s,l,h,c,p,f),!function(t){for(const e of t)if(0!==e.positionedGlyphs.length)return!1;return!0}(_)&&b}const Op={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ap={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Dp(t,e,n,r,i,o){if(e.imageName){const t=r[e.imageName];return t?t.displaySize[0]*e.scale*zh/o+i:0}{const r=n[e.fontStack],o=r&&r.glyphs[t];return o?o.metrics.advance*e.scale+i:0}}function Rp(t,e,n,r){const i=Math.pow(t-e,2);return r?t<e?i/2:2*i:i+Math.abs(n)*n}function Lp(t,e,n){let r=0;return 10===t&&(r-=1e4),n&&(r+=150),40!==t&&65288!==t||(r+=50),41!==e&&65289!==e||(r+=50),r}function Np(t,e,n,r,i,o){let a=null,s=Rp(e,n,i,o);for(const l of r){const t=Rp(e-l.x,n,i,o)+l.badness;t<=s&&(a=l,s=t)}return{index:t,x:e,priorBreak:a,badness:s}}function Fp(t){return t?Fp(t.priorBreak).concat(t.index):[]}function zp(t){let e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function Bp(t,e,n,r,i){if(!(e||n||r||i))return;const o=t.length-1,a=t[o],s=(a.x+a.metrics.advance*a.scale)*e;for(let l=0;l<=o;l++)t[l].x-=s,t[l].y+=n+r+i}function $p(t,e,n){const{horizontalAlign:r,verticalAlign:i}=zp(n),o=e[0]-t.displaySize[0]*r,a=e[1]-t.displaySize[1]*i;return{image:t,top:a,bottom:a+t.displaySize[1],left:o,right:o+t.displaySize[0]}}function jp(t,e,n,r,i,o){const a=t.image;let s;if(a.content){const t=a.content,e=a.pixelRatio||1;s=[t[0]/e,t[1]/e,a.displaySize[0]-t[2]/e,a.displaySize[1]-t[3]/e]}const l=e.left*o,c=e.right*o;let u,h,p,d;"width"===n||"both"===n?(d=i[0]+l-r[3],h=i[0]+c+r[1]):(d=i[0]+(l+c-a.displaySize[0])/2,h=d+a.displaySize[0]);const f=e.top*o,g=e.bottom*o;return"height"===n||"both"===n?(u=i[1]+f-r[0],p=i[1]+g+r[2]):(u=i[1]+(f+g-a.displaySize[1])/2,p=u+a.displaySize[1]),{image:a,top:u,right:h,bottom:p,left:d,collisionPadding:s}}class Up extends v{constructor(t,e,n,r,i){super(t,e),this.angle=r,this.z=n,void 0!==i&&(this.segment=i)}clone(){return new Up(this.x,this.y,this.z,this.angle,this.segment)}}function Vp(t,e,n,r,i){if(void 0===e.segment)return!0;let o=e,a=e.segment+1,s=0;for(;s>-n/2;){if(a--,a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;const l=[];let c=0;for(;s<n/2;){const e=t[a],n=t[a+1];if(!n)return!1;let o=t[a-1].angleTo(e)-e.angleTo(n);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:o}),c+=o;s-l[0].distance>r;)c-=l.shift().angleDelta;if(c>i)return!1;a++,s+=e.dist(n)}return!0}function Hp(t){let e=0;for(let n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function Gp(t,e,n){return t?.6*e*n:0}function Wp(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Xp(t,e,n,r,i,o){const a=Gp(n,i,o),s=Wp(n,r)*o;let l=0;const c=Hp(t)/2;for(let u=0;u<t.length-1;u++){const n=t[u],r=t[u+1],i=n.dist(r);if(l+i>c){const o=(c-l)/i,h=An(n.x,r.x,o),p=An(n.y,r.y,o),d=new Up(h,p,0,r.angleTo(n),u);return!a||Vp(t,d,s,a,e)?d:void 0}l+=i}}function qp(t,e,n,r,i,o,a,s,l){const c=Gp(r,o,a),u=Wp(r,i),h=u*a,p=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-h<e/4&&(e=h+e/4),Yp(t,p?e/2*s%e:(u/2+2*o)*a*s%e,e,c,n,h,p,!1,l)}function Yp(t,e,n,r,i,o,a,s,l){const c=o/2,u=Hp(t);let h=0,p=e-n,d=[];for(let f=0;f<t.length-1;f++){const e=t[f],a=t[f+1],s=e.dist(a),g=a.angleTo(e);for(;p+n<h+s;){p+=n;const m=(p-h)/s,y=An(e.x,a.x,m),v=An(e.y,a.y,m);if(y>=0&&y<l&&v>=0&&v<l&&p-c>=0&&p+c<=u){const e=new Up(y,v,0,g,f);e._round(),r&&!Vp(t,e,o,r,i)||d.push(e)}}h+=s}return s||d.length||a||(d=Yp(t,h/2,n,r,i,o,a,!0,l)),d}function Zp(t,e,n,r,i){const o=[];for(let a=0;a<t.length;a++){const s=t[a];let l;for(let t=0;t<s.length-1;t++){let a=s[t],c=s[t+1];a.x<e&&c.x<e||(a.x<e?a=new v(e,a.y+(e-a.x)/(c.x-a.x)*(c.y-a.y))._round():c.x<e&&(c=new v(e,a.y+(e-a.x)/(c.x-a.x)*(c.y-a.y))._round()),a.y<n&&c.y<n||(a.y<n?a=new v(a.x+(n-a.y)/(c.y-a.y)*(c.x-a.x),n)._round():c.y<n&&(c=new v(a.x+(n-a.y)/(c.y-a.y)*(c.x-a.x),n)._round()),a.x>=r&&c.x>=r||(a.x>=r?a=new v(r,a.y+(r-a.x)/(c.x-a.x)*(c.y-a.y))._round():c.x>=r&&(c=new v(r,a.y+(r-a.x)/(c.x-a.x)*(c.y-a.y))._round()),a.y>=i&&c.y>=i||(a.y>=i?a=new v(a.x+(i-a.y)/(c.y-a.y)*(c.x-a.x),i)._round():c.y>=i&&(c=new v(a.x+(i-a.y)/(c.y-a.y)*(c.x-a.x),i)._round()),l&&a.equals(l[l.length-1])||(l=[a],o.push(l)),l.push(c)))))}}return o}Yi(Up,"Anchor");const Kp=1e20;function Jp(t,e,n,r,i,o,a,s,l){for(let c=e;c<e+r;c++)Qp(t,n*o+c,o,i,a,s,l);for(let c=n;c<n+i;c++)Qp(t,c*o+e,1,r,a,s,l)}function Qp(t,e,n,r,i,o,a){o[0]=0,a[0]=-Kp,a[1]=Kp,i[0]=t[e];for(let s=1,l=0,c=0;s<r;s++){i[s]=t[e+s*n];const r=s*s;do{const t=o[l];c=(i[s]-i[t]+r-t*t)/(s-t)/2}while(c<=a[l]&&--l>-1);l++,o[l]=s,a[l]=c,a[l+1]=Kp}for(let s=0,l=0;s<r;s++){for(;a[l+1]<s;)l++;const r=o[l],c=s-r;t[e+s*n]=i[r]+c*c}}const td=2,ed={none:0,ideographs:1,all:2};class nd{constructor(t,e,n){this.requestManager=t,this.localGlyphMode=e,this.localFontFamily=n,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(t){this.url=t}getGlyphs(t,e){const n=[];for(const r in t)for(const e of t[r])n.push({stack:r,id:e});P(n,((t,e)=>{let{stack:n,id:r}=t,i=this.entries[n];i||(i=this.entries[n]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let o=i.glyphs[r];if(void 0!==o)return void e(null,{stack:n,id:r,glyph:o});if(o=this._tinySDF(i,n,r),o)return i.glyphs[r]=o,void e(null,{stack:n,id:r,glyph:o});const a=Math.floor(r/256);if(256*a>65535)return void e(new Error("glyphs > 65535 not supported"));if(i.ranges[a])return void e(null,{stack:n,id:r,glyph:o});let s=i.requests[a];s||(s=i.requests[a]=[],nd.loadGlyphRange(n,a,this.url,this.requestManager,((t,e)=>{if(e){i.ascender=e.ascender,i.descender=e.descender;for(const t in e.glyphs)this._doesCharSupportLocalGlyph(+t)||(i.glyphs[+t]=e.glyphs[+t]);i.ranges[a]=!0}for(const n of s)n(t,e);delete i.requests[a]}))),s.push(((t,i)=>{t?e(t):i&&e(null,{stack:n,id:r,glyph:i.glyphs[r]||null})}))}),((t,n)=>{if(t)e(t);else if(n){const t={};for(const{stack:e,id:r,glyph:i}of n)void 0===t[e]&&(t[e]={}),void 0===t[e].glyphs&&(t[e].glyphs={}),t[e].glyphs[r]=i&&{id:i.id,bitmap:i.bitmap.clone(),metrics:i.metrics},t[e].ascender=this.entries[e].ascender,t[e].descender=this.entries[e].descender;e(null,t)}}))}_doesCharSupportLocalGlyph(t){return this.localGlyphMode!==ed.none&&(this.localGlyphMode===ed.all?!!this.localFontFamily:!!this.localFontFamily&&(to["CJK Unified Ideographs"](t)||to["Hangul Syllables"](t)||to.Hiragana(t)||to.Katakana(t)||to["CJK Symbols and Punctuation"](t)))}_tinySDF(t,e,n){const r=this.localFontFamily;if(!r||!this._doesCharSupportLocalGlyph(n))return;let i=t.tinySDF;if(!i){let n="400";/bold/i.test(e)?n="900":/medium/i.test(e)?n="500":/light/i.test(e)&&(n="200"),i=t.tinySDF=new nd.TinySDF({fontFamily:r,fontWeight:n,fontSize:24*td,buffer:3*td,radius:8*td}),i.fontWeight=n}if(this.localGlyphs[i.fontWeight][n])return this.localGlyphs[i.fontWeight][n];const o=String.fromCharCode(n),{data:a,width:s,height:l,glyphWidth:c,glyphHeight:u,glyphLeft:h,glyphTop:p,glyphAdvance:d}=i.draw(o);return this.localGlyphs[i.fontWeight][n]={id:n,bitmap:new zc({width:s,height:l},a),metrics:{width:c/td,height:u/td,left:h/td,top:p/td-27,advance:d/td,localGlyph:!0}}}}nd.loadGlyphRange=function(t,e,n,r,i){const o=256*e,a=o+255,s=r.transformRequest(r.normalizeGlyphsURL(n).replace("{fontstack}",t).replace("{range}",`${o}-${a}`),lt.Glyphs);pt(s,((t,e)=>{if(t)i(t);else if(e){const t={},n=function(t){return new mp(t).readFields(vp,{})}(e);for(const e of n.glyphs)t[e.id]=e;i(null,{glyphs:t,ascender:n.ascender,descender:n.descender})}}))},nd.TinySDF=class{constructor(){let{fontSize:t=24,buffer:e=3,radius:n=8,cutoff:r=.25,fontFamily:i="sans-serif",fontWeight:o="normal",fontStyle:a="normal"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.buffer=e,this.cutoff=r,this.radius=n;const s=this.size=t+4*e,l=this._createCanvas(s),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font=`${a} ${o} ${t}px ${i}`,c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(t){const e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){const{width:e,actualBoundingBoxAscent:n,actualBoundingBoxDescent:r,actualBoundingBoxLeft:i,actualBoundingBoxRight:o}=this.ctx.measureText(t),a=Math.ceil(n),s=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-i))),l=Math.min(this.size-this.buffer,a+Math.ceil(r)),c=s+2*this.buffer,u=l+2*this.buffer,h=Math.max(c*u,0),p=new Uint8ClampedArray(h),d={data:p,width:c,height:u,glyphWidth:s,glyphHeight:l,glyphTop:a,glyphLeft:0,glyphAdvance:e};if(0===s||0===l)return d;const{ctx:f,buffer:g,gridInner:m,gridOuter:y}=this;f.clearRect(g,g,s,l),f.fillText(t,g,g+a);const v=f.getImageData(g,g,s,l);y.fill(Kp,0,h),m.fill(0,0,h);for(let x=0;x<l;x++)for(let t=0;t<s;t++){const e=v.data[4*(x*s+t)+3]/255;if(0===e)continue;const n=(x+g)*c+t+g;if(1===e)y[n]=0,m[n]=Kp;else{const t=.5-e;y[n]=t>0?t*t:0,m[n]=t<0?t*t:0}}Jp(y,0,0,c,u,c,this.f,this.v,this.z),Jp(m,g,g,s,l,c,this.f,this.v,this.z);for(let x=0;x<h;x++){const t=Math.sqrt(y[x])-Math.sqrt(m[x]);p[x]=Math.round(255-255*(t/this.radius+this.cutoff))}return d}};const rd=Sp;function id(t,e,n,r){const i=[],o=t.image,a=o.pixelRatio,s=o.paddedRect.w-2*rd,l=o.paddedRect.h-2*rd,c=t.right-t.left,u=t.bottom-t.top,h=o.stretchX||[[0,s]],p=o.stretchY||[[0,l]],d=(t,e)=>t+e[1]-e[0],f=h.reduce(d,0),g=p.reduce(d,0),m=s-f,y=l-g;let x=0,_=f,b=0,w=g,S=0,C=m,E=0,k=y;if(o.content&&r){const t=o.content;x=od(h,0,t[0]),b=od(p,0,t[1]),_=od(h,t[0],t[2]),w=od(p,t[1],t[3]),S=t[0]-x,E=t[1]-b,C=t[2]-t[0]-_,k=t[3]-t[1]-w}const M=(r,i,s,l)=>{const h=sd(r.stretch-x,_,c,t.left),p=ld(r.fixed-S,C,r.stretch,f),d=sd(i.stretch-b,w,u,t.top),m=ld(i.fixed-E,k,i.stretch,g),y=sd(s.stretch-x,_,c,t.left),M=ld(s.fixed-S,C,s.stretch,f),T=sd(l.stretch-b,w,u,t.top),I=ld(l.fixed-E,k,l.stretch,g),P=new v(h,d),O=new v(y,d),A=new v(y,T),D=new v(h,T),R=new v(p/a,m/a),L=new v(M/a,I/a),N=e*Math.PI/180;if(N){const t=Math.sin(N),e=Math.cos(N),n=[e,-t,t,e];P._matMult(n),O._matMult(n),D._matMult(n),A._matMult(n)}const F=r.stretch+r.fixed,z=i.stretch+i.fixed;return{tl:P,tr:O,bl:D,br:A,tex:{x:o.paddedRect.x+rd+F,y:o.paddedRect.y+rd+z,w:s.stretch+s.fixed-F,h:l.stretch+l.fixed-z},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:R,pixelOffsetBR:L,minFontScaleX:C/a/c,minFontScaleY:k/a/u,isSDF:n}};if(r&&(o.stretchX||o.stretchY)){const t=ad(h,m,f),e=ad(p,y,g);for(let n=0;n<t.length-1;n++){const r=t[n],o=t[n+1];for(let t=0;t<e.length-1;t++)i.push(M(r,e[t],o,e[t+1]))}}else i.push(M({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:l+1}));return i}function od(t,e,n){let r=0;for(const i of t)r+=Math.max(e,Math.min(n,i[1]))-Math.max(e,Math.min(n,i[0]));return r}function ad(t,e,n){const r=[{fixed:-rd,stretch:0}];for(const[i,o]of t){const t=r[r.length-1];r.push({fixed:i-t.stretch,stretch:t.stretch}),r.push({fixed:i-t.stretch,stretch:t.stretch+(o-i)})}return r.push({fixed:e+rd,stretch:n}),r}function sd(t,e,n,r){return t/e*n+r}function ld(t,e,n,r){return t-e*n/r}function cd(t,e,n,r){const i=e+t.positionedLines[r].lineOffset;return 0===r?n+i/2:n+(i+(e+t.positionedLines[r-1].lineOffset))/2}class ud{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hd;if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,r=e[t];for(;t>0;){const i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r}_down(t){const{data:e,compare:n}=this,r=this.length>>1,i=e[t];for(;t<r;){let r=1+(t<<1),o=e[r];const a=r+1;if(a<this.length&&n(e[a],o)<0&&(r=a,o=e[a]),n(o,i)>=0)break;e[t]=o,t=r}e[t]=i}}function hd(t,e){return t<e?-1:t>e?1:0}function pd(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=1/0,i=1/0,o=-1/0,a=-1/0;const s=t[0];for(let d=0;d<s.length;d++){const t=s[d];(!d||t.x<r)&&(r=t.x),(!d||t.y<i)&&(i=t.y),(!d||t.x>o)&&(o=t.x),(!d||t.y>a)&&(a=t.y)}const l=Math.min(o-r,a-i);let c=l/2;const u=new ud([],dd);if(0===l)return new v(r,i);for(let d=r;d<o;d+=l)for(let e=i;e<a;e+=l)u.push(new fd(d+c,e+c,c,t));let h=function(t){let e=0,n=0,r=0;const i=t[0];for(let o=0,a=i.length,s=a-1;o<a;s=o++){const t=i[o],a=i[s],l=t.x*a.y-a.x*t.y;n+=(t.x+a.x)*l,r+=(t.y+a.y)*l,e+=3*l}return new fd(n/e,r/e,0,t)}(t),p=u.length;for(;u.length;){const r=u.pop();(r.d>h.d||!h.d)&&(h=r,n&&console.log("found best %d after %d probes",Math.round(1e4*r.d)/1e4,p)),r.max-h.d<=e||(c=r.h/2,u.push(new fd(r.p.x-c,r.p.y-c,c,t)),u.push(new fd(r.p.x+c,r.p.y-c,c,t)),u.push(new fd(r.p.x-c,r.p.y+c,c,t)),u.push(new fd(r.p.x+c,r.p.y+c,c,t)),p+=4)}return n&&(console.log(`num probes: ${p}`),console.log(`best distance: ${h.d}`)),h.p}function dd(t,e){return e.max-t.max}class fd{constructor(t,e,n,r){this.p=new v(t,e),this.h=n,this.d=function(t,e){let n=!1,r=1/0;for(let i=0;i<e.length;i++){const o=e[i];for(let e=0,i=o.length,a=i-1;e<i;a=e++){const i=o[e],s=o[a];i.y>t.y!=s.y>t.y&&t.x<(s.x-i.x)*(t.y-i.y)/(s.y-i.y)+i.x&&(n=!n),r=Math.min(r,vc(t,i,s))}}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}}const gd=7,md=Number.POSITIVE_INFINITY,yd=Math.sqrt(2);function vd(t,e){let[n,r]=e,i=0,o=0;if(r===md){n<0&&(n=0);const e=n/yd;switch(t){case"top-right":case"top-left":o=e-gd;break;case"bottom-right":case"bottom-left":o=-e+gd;break;case"bottom":o=-n+gd;break;case"top":o=n-gd}switch(t){case"top-right":case"bottom-right":i=-e;break;case"top-left":case"bottom-left":i=e;break;case"left":i=n;break;case"right":i=-n}}else{switch(n=Math.abs(n),r=Math.abs(r),t){case"top-right":case"top-left":case"top":o=r-gd;break;case"bottom-right":case"bottom-left":case"bottom":o=-r+gd}switch(t){case"top-right":case"bottom-right":case"right":i=-n;break;case"top-left":case"bottom-left":case"left":i=n}}return[i,o]}function xd(t,e,n,r,i,o,a,s,l,c){t.createArrays(),t.tilePixelRatio=ss/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;const u=t.layers[0].layout,h=t.layers[0]._unevaluatedLayout._values,p={};if("composite"===t.textSizeData.kind){const{minZoom:e,maxZoom:n}=t.textSizeData;p.compositeTextSizes=[h["text-size"].possiblyEvaluate(new wo(e),s),h["text-size"].possiblyEvaluate(new wo(n),s)]}if("composite"===t.iconSizeData.kind){const{minZoom:e,maxZoom:n}=t.iconSizeData;p.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new wo(e),s),h["icon-size"].possiblyEvaluate(new wo(n),s)]}p.layoutTextSize=h["text-size"].possiblyEvaluate(new wo(l+1),s),p.layoutIconSize=h["icon-size"].possiblyEvaluate(new wo(l+1),s),p.textMaxSize=h["text-size"].possiblyEvaluate(new wo(18),s);const d="map"===u.get("text-rotation-alignment")&&"point"!==u.get("symbol-placement"),f=u.get("text-size");for(const g of t.features){const o=u.get("text-font").evaluate(g,{},s).join(","),l=f.evaluate(g,{},s),h=p.layoutTextSize.evaluate(g,{},s),m=(p.layoutIconSize.evaluate(g,{},s),{horizontal:{},vertical:void 0}),y=g.text;let v,x=[0,0];if(y){const r=y.toString(),a=u.get("text-letter-spacing").evaluate(g,{},s)*zh,c=u.get("text-line-height").evaluate(g,{},s)*zh,p=no(r)?a:0,f=u.get("text-anchor").evaluate(g,{},s),v=u.get("text-variable-anchor");if(!v){const t=u.get("text-radial-offset").evaluate(g,{},s);x=t?vd(f,[t*zh,md]):u.get("text-offset").evaluate(g,{},s).map((t=>t*zh))}let _=d?"center":u.get("text-justify").evaluate(g,{},s);const b="point"===u.get("symbol-placement"),w=b?u.get("text-max-width").evaluate(g,{},s)*zh:1/0,S=a=>{t.allowVerticalPlacement&&eo(r)&&(m.vertical=Pp(y,e,n,i,o,w,c,f,a,p,x,kp.vertical,!0,h,l))};if(!d&&v){const t="auto"===_?v.map((t=>_d(t))):[_];let r=!1;for(let a=0;a<t.length;a++){const s=t[a];if(!m.horizontal[s])if(r)m.horizontal[s]=m.horizontal[0];else{const t=Pp(y,e,n,i,o,w,c,"center",s,p,x,kp.horizontal,!1,h,l);t&&(m.horizontal[s]=t,r=1===t.positionedLines.length)}}S("left")}else{if("auto"===_&&(_=_d(f)),b||u.get("text-writing-mode").indexOf("horizontal")>=0||!eo(r)){const t=Pp(y,e,n,i,o,w,c,f,_,p,x,kp.horizontal,!1,h,l);t&&(m.horizontal[_]=t)}S(b?"left":_)}}let _=!1;if(g.icon&&g.icon.name){const e=r[g.icon.name];e&&(v=$p(i[g.icon.name],u.get("icon-offset").evaluate(g,{},s),u.get("icon-anchor").evaluate(g,{},s)),_=e.sdf,void 0===t.sdfIcons?t.sdfIcons=e.sdf:t.sdfIcons!==e.sdf&&H("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(e.pixelRatio!==t.pixelRatio||0!==u.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}const b=Ed(m.horizontal)||m.vertical;t.iconsInText||(t.iconsInText=!!b&&b.iconsInText),(b||v)&&bd(t,g,m,v,r,p,h,0,x,_,a,s,c)}o&&t.generateCollisionDebugBuffers(l,t.collisionBoxArray)}function _d(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function bd(t,e,n,r,i,o,a,s,l,c,u,h,p){let d=o.textMaxSize.evaluate(e,{},h);void 0===d&&(d=a);const f=t.layers[0].layout,g=f.get("icon-offset").evaluate(e,{},h),m=Ed(n.horizontal)||n.vertical,y="globe"===p.name,v=zh,x=a/v,_=t.tilePixelRatio*d/v,w=(P=t.overscaling,t.zoom>18&&P>2&&(P>>=1),Math.max(ss/(512*P),1)*f.get("symbol-spacing")),S=f.get("text-padding")*t.tilePixelRatio,C=f.get("icon-padding")*t.tilePixelRatio,E=b(f.get("text-max-angle")),k="map"===f.get("text-rotation-alignment")&&"point"!==f.get("symbol-placement"),M="map"===f.get("icon-rotation-alignment")&&"point"!==f.get("symbol-placement"),T=f.get("symbol-placement"),I=w/2;var P;const O=f.get("icon-text-fit");let A;r&&"none"!==O&&(t.allowVerticalPlacement&&n.vertical&&(A=jp(r,n.vertical,O,f.get("icon-text-fit-padding"),g,x)),m&&(r=jp(r,m,O,f.get("icon-text-fit-padding"),g,x)));const D=(a,s,d)=>{if(s.x<0||s.x>=ss||s.y<0||s.y>=ss)return;let f=null;if(y){const{x:t,y:e,z:n}=p.projectTilePoint(s.x,s.y,d);f={anchor:new Up(t,e,n,0,void 0),up:p.upVector(d,s.x,s.y)}}!function(t,e,n,r,i,o,a,s,l,c,u,h,p,d,f,g,m,y,v,x,_,b,w,S,C){const E=t.addToLineVertexArray(e,r);let k,M,T,I,P,O,A,D=0,R=0,L=0,N=0,F=-1,z=-1;const B={};let $=Oa("");const j=n?n.anchor:e;let U=0,V=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?[U,V]=l.layout.get("text-offset").evaluate(_,{},C).map((t=>t*zh)):(U=l.layout.get("text-radial-offset").evaluate(_,{},C)*zh,V=md),t.allowVerticalPlacement&&i.vertical){const t=i.vertical;if(f)O=Md(t),s&&(A=Md(s));else{const n=l.layout.get("text-rotate").evaluate(_,{},C)+90;T=kd(c,j,e,u,h,p,t,d,n,g),s&&(I=kd(c,j,e,u,h,p,s,y,n))}}if(o){const r=l.layout.get("icon-rotate").evaluate(_,{},C),i="none"!==l.layout.get("icon-text-fit"),a=id(o,r,w,i),d=s?id(s,r,w,i):void 0;M=kd(c,j,e,u,h,p,o,y,r),D=4*a.length;const f=t.iconSizeData;let g=null;"source"===f.kind?(g=[Bh*l.layout.get("icon-size").evaluate(_,{},C)],g[0]>Sd&&H(`${t.layerIds[0]}: Value for "icon-size" is >= ${wd}. Reduce your "icon-size".`)):"composite"===f.kind&&(g=[Bh*b.compositeIconSizes[0].evaluate(_,{},C),Bh*b.compositeIconSizes[1].evaluate(_,{},C)],(g[0]>Sd||g[1]>Sd)&&H(`${t.layerIds[0]}: Value for "icon-size" is >= ${wd}. Reduce your "icon-size".`)),t.addSymbols(t.icon,a,g,x,v,_,!1,n,e,E.lineStartIndex,E.lineLength,-1,S,C),F=t.icon.placedSymbolArray.length-1,d&&(R=4*d.length,t.addSymbols(t.icon,d,g,x,v,_,kp.vertical,n,e,E.lineStartIndex,E.lineLength,-1,S,C),z=t.icon.placedSymbolArray.length-1)}for(const H in i.horizontal){const r=i.horizontal[H];k||($=Oa(r.text),f?P=Md(r):k=kd(c,j,e,u,h,p,r,d,l.layout.get("text-rotate").evaluate(_,{},C),g));const o=1===r.positionedLines.length;if(L+=Cd(t,n,e,r,a,l,f,_,g,E,i.vertical?kp.horizontal:kp.horizontalOnly,o?Object.keys(i.horizontal):[H],B,F,b,S,C),o)break}i.vertical&&(N+=Cd(t,n,e,i.vertical,a,l,f,_,g,E,kp.vertical,["vertical"],B,z,b,S,C));let G=-1;const W=(t,e)=>t?Math.max(t,e):e;G=W(P,G),G=W(O,G),G=W(A,G);const X=G>-1?1:0;t.glyphOffsetArray.length>=sf.MAX_GLYPHS&&H("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==_.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,_.sortKey),t.symbolInstances.emplaceBack(j.x,j.y,j.z,e.x,e.y,B.right>=0?B.right:-1,B.center>=0?B.center:-1,B.left>=0?B.left:-1,B.vertical>=0?B.vertical:-1,F,z,$,void 0!==k?k:t.collisionBoxArray.length,void 0!==k?k+1:t.collisionBoxArray.length,void 0!==T?T:t.collisionBoxArray.length,void 0!==T?T+1:t.collisionBoxArray.length,void 0!==M?M:t.collisionBoxArray.length,void 0!==M?M+1:t.collisionBoxArray.length,I||t.collisionBoxArray.length,I?I+1:t.collisionBoxArray.length,u,L,N,D,R,X,0,U,V,G)}(t,s,f,a,n,r,i,A,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,S,k,l,0,C,M,g,e,o,c,u,h)};if("line"===T)for(const b of Zp(e.geometry,0,0,ss,ss)){const e=qp(b,w,E,n.vertical||m,r,v,_,t.overscaling,ss);for(const n of e)m&&Td(t,m.text,I,n)||D(b,n,h)}else if("line-center"===T){for(const b of e.geometry)if(b.length>1){const t=Xp(b,E,n.vertical||m,r,v,_);t&&D(b,t,h)}}else if("Polygon"===e.type)for(const b of Su(e.geometry,0)){const t=pd(b,16);D(b[0],new Up(t.x,t.y,0,0,void 0),h)}else if("LineString"===e.type)for(const b of e.geometry)D(b,new Up(b[0].x,b[0].y,0,0,void 0),h);else if("Point"===e.type)for(const b of e.geometry)for(const t of b)D([t],new Up(t.x,t.y,0,0,void 0),h)}const wd=255,Sd=wd*Bh;function Cd(t,e,n,r,i,o,a,s,l,c,u,h,p,d,f,g,m){const y=function(t,e,n,r,i,o,a,s){const l=[];if(0===e.positionedLines.length)return l;const c=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,u=function(t){const e=t[0],n=t[1],r=e*n;return r>0?[e,-n]:r<0?[-e,n]:0===e?[n,e]:[n,-e]}(n);let h=Math.abs(e.top-e.bottom);for(const g of e.positionedLines)h-=g.lineOffset;const p=e.positionedLines.length,d=h/p;let f=e.top-n[1];for(let g=0;g<p;++g){const t=e.positionedLines[g];f=cd(e,d,f,g);for(const r of t.positionedGlyphs){if(!r.rect)continue;const t=r.rect||{};let o=bp+1,h=!0,p=1,d=0;if(r.imageName){const t=a[r.imageName];if(!t)continue;if(t.sdf){H("SDF images are not supported in formatted text and will be ignored.");continue}h=!1,p=t.pixelRatio,o=Sp/p}const g=(i||s)&&r.vertical,m=r.metrics.advance*r.scale/2,y=r.metrics,x=r.rect;if(null===x)continue;s&&e.verticalizable&&(d=r.imageName?m-r.metrics.width*r.scale/2:0);const _=i?[r.x+m,r.y]:[0,0];let b=[0,0],w=[0,0],S=!1;i||(g?(w=[r.x+m+u[0],r.y+u[1]-d],S=!0):b=[r.x+m+n[0],r.y+n[1]-d]);const C=x.w*r.scale/(p*(r.localGlyph?td:1)),E=x.h*r.scale/(p*(r.localGlyph?td:1));let k,M,T,I;if(g){const t=r.y-f,e=new v(-m,m-t),n=-Math.PI/2,i=new v(...w);k=new v(-m+b[0],b[1]),k._rotateAround(n,e)._add(i),k.x+=-t+m,k.y-=(y.left-o)*r.scale;const a=r.imageName?y.advance*r.scale:zh*r.scale,s=String.fromCharCode(r.glyph);Wh(s)?k.x+=(1-o)*r.scale:Xh(s)?k.x+=a-y.height*r.scale+(-o-1)*r.scale:k.x+=r.imageName||y.width+2*o===x.w&&y.height+2*o===x.h?(a-E)/2:(a-(y.height+2*o)*r.scale)/2,M=new v(k.x,k.y-C),T=new v(k.x+E,k.y),I=new v(k.x+E,k.y-C)}else{const t=(y.left-o)*r.scale-m+b[0],e=(-y.top-o)*r.scale+b[1],n=t+C,i=e+E;k=new v(t,e),M=new v(n,e),T=new v(t,i),I=new v(n,i)}if(c){let t;t=i?new v(0,0):S?new v(u[0],u[1]):new v(n[0],n[1]),k._rotateAround(c,t),M._rotateAround(c,t),T._rotateAround(c,t),I._rotateAround(c,t)}const P=new v(0,0),O=new v(0,0);l.push({tl:k,tr:M,bl:T,br:I,tex:t,writingMode:e.writingMode,glyphOffset:_,sectionIndex:r.sectionIndex,isSDF:h,pixelOffsetTL:P,pixelOffsetBR:O,minFontScaleX:0,minFontScaleY:0})}}return l}(0,r,l,o,a,s,i,t.allowVerticalPlacement),x=t.textSizeData;let _=null;"source"===x.kind?(_=[Bh*o.layout.get("text-size").evaluate(s,{},m)],_[0]>Sd&&H(`${t.layerIds[0]}: Value for "text-size" is >= ${wd}. Reduce your "text-size".`)):"composite"===x.kind&&(_=[Bh*f.compositeTextSizes[0].evaluate(s,{},m),Bh*f.compositeTextSizes[1].evaluate(s,{},m)],(_[0]>Sd||_[1]>Sd)&&H(`${t.layerIds[0]}: Value for "text-size" is >= ${wd}. Reduce your "text-size".`)),t.addSymbols(t.text,y,_,l,a,s,u,e,n,c.lineStartIndex,c.lineLength,d,g,m);for(const v of h)p[v]=t.text.placedSymbolArray.length-1;return 4*y.length}function Ed(t){for(const e in t)return t[e];return null}function kd(t,e,n,r,i,o,a,s,l,c){let u=a.top,h=a.bottom,p=a.left,d=a.right;const f=a.collisionPadding;if(f&&(p-=f[0],u-=f[1],d+=f[2],h+=f[3]),l){const t=new v(p,u),e=new v(d,u),n=new v(p,h),r=new v(d,h),i=b(l);let o=new v(0,0);c&&(o=new v(c[0],c[1])),t._rotateAround(i,o),e._rotateAround(i,o),n._rotateAround(i,o),r._rotateAround(i,o),p=Math.min(t.x,e.x,n.x,r.x),d=Math.max(t.x,e.x,n.x,r.x),u=Math.min(t.y,e.y,n.y,r.y),h=Math.max(t.y,e.y,n.y,r.y)}return t.emplaceBack(e.x,e.y,e.z,n.x,n.y,p,u,d,h,s,r,i,o),t.length-1}function Md(t){t.collisionPadding&&(t.top-=t.collisionPadding[1],t.bottom+=t.collisionPadding[3]);const e=t.bottom-t.top;return e>0?Math.max(10,e):null}function Td(t,e,n,r){const i=t.compareText;if(e in i){const t=i[e];for(let e=t.length-1;e>=0;e--)if(r.dist(t[e])<n)return!0}else i[e]=[];return i[e].push(r),!1}function Id(t,e){const n=t.fovAboveCenter,r=t.elevation?t.elevation.getMinElevationBelowMSL()*e:0,i=(t._camera.position[2]*t.worldSize-r)/Math.cos(t._pitch),o=Math.sin(n)*i/Math.sin(Math.max(Math.PI/2-t._pitch-n,.01)),a=Math.sin(t._pitch)*o+i;return Math.min(1.01*a,i*(1/t._horizonShift))}function Pd(t,e){if(!e.isReprojectedInTileSpace)return{scale:1<<t.z,x:t.x,y:t.y,x2:t.x+1,y2:t.y+1,projection:e};const n=Math.pow(2,-t.z),r=t.x*n,i=(t.x+1)*n,o=t.y*n,a=(t.y+1)*n,s=Xl(r),l=Xl(i),c=ql(o),u=ql(a),h=e.project(s,c),p=e.project(l,c),d=e.project(l,u),f=e.project(s,u);let g=Math.min(h.x,p.x,d.x,f.x),m=Math.min(h.y,p.y,d.y,f.y),y=Math.max(h.x,p.x,d.x,f.x),v=Math.max(h.y,p.y,d.y,f.y);const x=n/16;function _(t,n,r,i,o,a){const s=(r+o)/2,l=(i+a)/2,c=e.project(Xl(s),ql(l)),u=Math.max(0,g-c.x,m-c.y,c.x-y,c.y-v);g=Math.min(g,c.x),y=Math.max(y,c.x),m=Math.min(m,c.y),v=Math.max(v,c.y),u>x&&(_(t,c,r,i,s,l),_(c,n,s,l,o,a))}_(h,p,r,o,i,o),_(p,d,i,o,i,a),_(d,f,i,a,r,a),_(f,h,r,a,r,o),g-=x,m-=x,y+=x,v+=x;const b=1/Math.max(y-g,v-m);return{scale:b,x:g*b,y:m*b,x2:y*b,y2:v*b,projection:e}}const Od=ds(new Float32Array(16));class Ad{constructor(t){this.spec=t,this.name=t.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(t,e){return{x:0,y:0,z:0}}unproject(t,e){return new Ul(0,0)}projectTilePoint(t,e,n){return{x:t,y:e,z:0}}locationPoint(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t._coordinatePoint(t.locationCoordinate(e),n)}pixelsPerMeter(t,e){return Wl(1,t)*e}pixelSpaceConversion(t,e,n){return 1}farthestPixelDistance(t){return Id(t,t.pixelsPerMeter)}pointCoordinate(t,e,n,r){const i=t.horizonLineFromTop(!1),o=new v(e,Math.max(i,n));return t.rayIntersectionCoordinate(t.pointRayIntersection(o,r))}pointCoordinate3D(t,e,n){const r=new v(e,n);if(t.elevation)return t.elevation.pointCoordinate(r);{const e=this.pointCoordinate(t,r.x,r.y,0);return[e.x,e.y,e.z]}}isPointAboveHorizon(t,e){if(t.elevation)return!this.pointCoordinate3D(t,e.x,e.y);const n=t.horizonLineFromTop();return e.y<n}createInversionMatrix(t,e){return Od}createTileMatrix(t,e,n){let r,i,o;const a=n.canonical,s=ds(new Float64Array(16));if(this.isReprojectedInTileSpace){const l=Pd(a,this);r=1,i=l.x+n.wrap*l.scale,o=l.y,ys(s,s,[r/l.scale,r/l.scale,t.pixelsPerMeter/e])}else r=e/t.zoomScale(a.z),i=(a.x+Math.pow(2,a.z)*n.wrap)*r,o=a.y*r;return ms(s,s,[i,o,0]),ys(s,s,[r/ss,r/ss,1]),s}upVector(t,e,n){return[0,0,1]}upVectorScale(t,e,n){return{metersToTile:1}}}class Dd extends Ad{constructor(t){super(t),this.range=[4,7],this.center=t.center||[-96,37.5];const[e,n]=this.parallels=t.parallels||[29.5,45.5],r=Math.sin(b(e));this.n=(r+Math.sin(b(n)))/2,this.c=1+r*(2*this.n-r),this.r0=Math.sqrt(this.c)/this.n}project(t,e){const{n:n,c:r,r0:i}=this,o=b(t-this.center[0]),a=b(e),s=Math.sqrt(r-2*n*Math.sin(a))/n;return{x:s*Math.sin(o*n),y:s*Math.cos(o*n)-i,z:0}}unproject(t,e){const{n:n,c:r,r0:i}=this,o=i+e;let a=Math.atan2(t,Math.abs(o))*Math.sign(o);o*n<0&&(a-=Math.PI*Math.sign(t)*Math.sign(o));const s=b(this.center[0])*n;a=I(a,-Math.PI-s,Math.PI-s);const l=M(w(a/n)+this.center[0],-180,180),c=Math.asin(M((r-(t*t+o*o)*n*n)/(2*n),-1,1)),u=M(w(c),-Zl,Zl);return new Ul(l,u)}}const Rd=1.340264,Ld=-.081106,Nd=893e-6,Fd=.003796,zd=Math.sqrt(3)/2;class Bd extends Ad{project(t,e){e=e/180*Math.PI,t=t/180*Math.PI;const n=Math.asin(zd*Math.sin(e)),r=n*n,i=r*r*r;return{x:.5*(t*Math.cos(n)/(zd*(Rd+3*Ld*r+i*(7*Nd+9*Fd*r)))/Math.PI+.5),y:1-.5*(n*(Rd+Ld*r+i*(Nd+Fd*r))/Math.PI+1),z:0}}unproject(t,e){t=(2*t-.5)*Math.PI;let n=e=(2*(1-e)-1)*Math.PI,r=n*n,i=r*r*r;for(let c,u,h,p=0;p<12&&(u=n*(Rd+Ld*r+i*(Nd+Fd*r))-e,h=Rd+3*Ld*r+i*(7*Nd+9*Fd*r),c=u/h,n=M(n-c,-Math.PI/3,Math.PI/3),r=n*n,i=r*r*r,!(Math.abs(c)<1e-12));++p);const o=zd*t*(Rd+3*Ld*r+i*(7*Nd+9*Fd*r))/Math.cos(n),a=Math.asin(Math.sin(n)/zd),s=M(180*o/Math.PI,-180,180),l=M(180*a/Math.PI,-Zl,Zl);return new Ul(s,l)}}class $d extends Ad{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0}project(t,e){return{x:.5+t/360,y:.5-e/360,z:0}}unproject(t,e){const n=360*(t-.5),r=M(360*(.5-e),-Zl,Zl);return new Ul(n,r)}}const jd=Math.PI/2;function Ud(t){return Math.tan((jd+t)/2)}class Vd extends Ad{constructor(t){super(t),this.center=t.center||[0,30];const[e,n]=this.parallels=t.parallels||[30,30];let r=b(e),i=b(n);this.southernCenter=r+i<0,this.southernCenter&&(r=-r,i=-i);const o=Math.cos(r),a=Ud(r);this.n=r===i?Math.sin(r):Math.log(o/Math.cos(i))/Math.log(Ud(i)/a),this.f=o*Math.pow(Ud(r),this.n)/this.n}project(t,e){e=b(e),this.southernCenter&&(e=-e),t=b(t-this.center[0]);const n=1e-6,{n:r,f:i}=this;i>0?e<-jd+n&&(e=-jd+n):e>jd-n&&(e=jd-n);const o=i/Math.pow(Ud(e),r);let a=o*Math.sin(r*t),s=i-o*Math.cos(r*t);return a=.5*(a/Math.PI+.5),s=.5*(s/Math.PI+.5),{x:a,y:this.southernCenter?s:1-s,z:0}}unproject(t,e){t=(2*t-.5)*Math.PI,this.southernCenter&&(e=1-e),e=(2*(1-e)-.5)*Math.PI;const{n:n,f:r}=this,i=r-e,o=Math.sign(i),a=Math.sign(n)*Math.sqrt(t*t+i*i);let s=Math.atan2(t,Math.abs(i))*o;i*n<0&&(s-=Math.PI*Math.sign(t)*o);const l=M(w(s/n)+this.center[0],-180,180),c=M(w(2*Math.atan(Math.pow(r/a,1/n))-jd),-Zl,Zl);return new Ul(l,this.southernCenter?-c:c)}}class Hd extends Ad{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(t,e){return{x:Hl(t),y:Gl(e),z:0}}unproject(t,e){const n=Xl(t),r=ql(e);return new Ul(n,r)}}const Gd=b(Zl);class Wd extends Ad{project(t,e){const n=(e=b(e))*e,r=n*n;return{x:.5*((t=b(t))*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791))/Math.PI+.5),y:1-.5*(e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))/Math.PI+1),z:0}}unproject(t,e){t=(2*t-.5)*Math.PI;let n=e=(2*(1-e)-1)*Math.PI,r=25,i=0,o=n*n;do{o=n*n;const t=o*o;i=(n*(1.007226+o*(.015085+t*(.028874*o-.044475-.005916*t)))-e)/(1.007226+o*(.045255+t*(.259866*o-.311325-.005916*11*t))),n=M(n-i,-Gd,Gd)}while(Math.abs(i)>1e-6&&--r>0);o=n*n;const a=M(w(t/(.8707+o*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979))),-180,180),s=w(n);return new Ul(a,s)}}const Xd=b(Zl);class qd extends Ad{project(t,e){e=b(e),t=b(t);const n=Math.cos(e),r=2/Math.PI,i=Math.acos(n*Math.cos(t/2)),o=Math.sin(i)/i,a=.5*(t*r+2*n*Math.sin(t/2)/o)||0,s=.5*(e+Math.sin(e)/o)||0;return{x:.5*(a/Math.PI+.5),y:1-.5*(s/Math.PI+1),z:0}}unproject(t,e){let n=t=(2*t-.5)*Math.PI,r=e=(2*(1-e)-1)*Math.PI,i=25;const o=1e-6;let a=0,s=0;do{const i=Math.cos(r),o=Math.sin(r),l=2*o*i,c=o*o,u=i*i,h=Math.cos(n/2),p=Math.sin(n/2),d=2*h*p,f=p*p,g=1-u*h*h,m=g?1/g:0,y=g?Math.acos(i*h)*Math.sqrt(1/g):0,v=.5*(2*y*i*p+2*n/Math.PI)-t,x=.5*(y*o+r)-e,_=.5*m*(u*f+y*i*h*c)+1/Math.PI,b=m*(d*l/4-y*o*p),w=.125*m*(l*p-y*o*u*d),S=.5*m*(c*h+y*f*i)+.5,C=b*w-S*_;a=(x*b-v*S)/C,s=(v*w-x*_)/C,n=M(n-a,-Math.PI,Math.PI),r=M(r-s,-Xd,Xd)}while((Math.abs(a)>o||Math.abs(s)>o)&&--i>0);return new Ul(w(n),w(r))}}class Yd extends Ad{constructor(t){super(t),this.center=t.center||[0,0],this.parallels=t.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(b(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(t,e){const{scale:n,cosPhi:r}=this;return{x:b(t)*r*n+.5,y:-Math.sin(b(e))/r*n+.5,z:0}}unproject(t,e){const{scale:n,cosPhi:r}=this,i=-(e-.5)/n,o=M(w((t-.5)/n)/r,-180,180),a=Math.asin(M(i*r,-1,1)),s=M(w(a),-Zl,Zl);return new Ul(o,s)}}class Zd extends Hd{constructor(t){super(t),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(t,e,n){const r=Ml(t,e,n);return Fs(r,r,Pl(vl(n))),{x:r[0],y:r[1],z:r[2]}}locationPoint(t,e){const n=kl(e.lat,e.lng),r=Rs([],n),i=t.elevation?t.elevation.getAtPointOrZero(t.locationCoordinate(e),t._centerAltitude):t._centerAltitude;Ds(n,n,r,Wl(1,0)*ss*i);const o=ds(new Float64Array(16));return gs(o,t.pixelMatrix,t.globeMatrix),Fs(n,n,o),new v(n[0],n[1])}pixelsPerMeter(t,e){return Wl(1,0)*e}pixelSpaceConversion(t,e,n){const r=Wl(1,t)*e,i=An(Wl(1,45)*e,r,n);return this.pixelsPerMeter(t,e)/i}createTileMatrix(t,e,n){const r=Ol(vl(n.canonical));return gs(new Float64Array(16),t.globeMatrix,r)}createInversionMatrix(t,e){const{center:n}=t,r=Pl(vl(e));return xs(r,r,b(n.lng)),vs(r,r,b(n.lat)),ys(r,r,[t._pixelsPerMercatorPixel,t._pixelsPerMercatorPixel,1]),Float32Array.from(r)}pointCoordinate(t,e,n,r){return gl(t,e,n,!0)||new Jl(0,0)}pointCoordinate3D(t,e,n){const r=this.pointCoordinate(t,e,n,0);return[r.x,r.y,r.z]}isPointAboveHorizon(t,e){return!gl(t,e.x,e.y,!1)}farthestPixelDistance(t){const e=function(t,e){const n=t.cameraToCenterDistance,r=t._centerAltitude*e,i=t._camera,o=t._camera.forward(),a=Ms([],As([],o,-n),[0,0,r]),s=t.worldSize/(2*Math.PI),l=[0,0,-s],c=t.width/t.height,u=Math.tan(t.fovAboveCenter),h=As([],i.up(),u),p=As([],i.right(),u*c),d=Rs([],Ms([],Ms([],o,h),p)),f=[];let g;if(new el(a,d).closestPointOnSphere(l,s,f)){const e=Ms([],f,l),n=$s([],e,a);g=Math.cos(t.fovAboveCenter)*Es(n)}else{const t=$s([],a,l),e=$s([],l,a);Rs(e,e);const n=Es(t)-s;g=Math.sqrt(n*(n+2*s));const r=Math.acos(g/(s+n))-Math.acos(Ls(o,e));g*=Math.cos(r)}return 1.01*g}(t,this.pixelsPerMeter(t.center.lat,t.worldSize)),n=Dl(t.zoom);if(n>0){const r=Id(t,Wl(1,t.center.lat)*t.worldSize),i=t.worldSize/(2*Math.PI),o=Math.max(t.width,t.height)/t.worldSize*Math.PI;return An(e,r+i*(1-Math.cos(o)),Math.pow(n,10))}return e}upVector(t,e,n){return Ml(e,n,t,1)}upVectorScale(t){return{metersToTile:fl(Tl(vl(t)))}}}function Kd(t){const e=t.parallels,n=!!e&&Math.abs(e[0]+e[1])<.01;switch(t.name){case"mercator":return new Hd(t);case"equirectangular":return new $d(t);case"naturalEarth":return new Wd(t);case"equalEarth":return new Bd(t);case"winkelTripel":return new qd(t);case"albers":return n?new Yd(t):new Dd(t);case"lambertConformalConic":return n?new Yd(t):new Vd(t);case"globe":return new Zd(t)}throw new Error(`Invalid projection name: ${t.name}`)}const Jd=Xu.types,Qd=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function tf(t,e,n,r,i,o,a,s,l,c,u,h,p){const d=s?Math.min(Sd,Math.round(s[0])):0,f=s?Math.min(Sd,Math.round(s[1])):0;t.emplaceBack(e,n,Math.round(32*r),Math.round(32*i),o,a,(d<<1)+(l?1:0),f,16*c,16*u,256*h,256*p)}function ef(t,e,n,r,i,o,a){t.emplaceBack(e,n,r,i,o,a)}function nf(t,e,n,r,i){t.emplaceBack(e,n,r,i),t.emplaceBack(e,n,r,i),t.emplaceBack(e,n,r,i),t.emplaceBack(e,n,r,i)}function rf(t){for(const e of t.sections)if(lo(e.text))return!0;return!1}class of{constructor(t){this.layoutVertexArray=new Yo,this.indexArray=new ra,this.programConfigurations=t,this.segments=new as,this.dynamicLayoutVertexArray=new Go,this.opacityVertexArray=new Ko,this.placedSymbolArray=new ga,this.globeExtVertexArray=new Zo}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,e,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Oh.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Dh.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Qd,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,Ah.members,!0)),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Yi(of,"SymbolBuffers");class af{constructor(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new as,this.collisionVertexArray=new ea,this.collisionVertexArrayExt=new na}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Rh.members,!0),this.collisionVertexBufferExt=t.createVertexBuffer(this.collisionVertexArrayExt,Lh.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Yi(af,"CollisionBuffers");class sf{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ds([]),this.placementViewportMatrix=ds([]);const e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=$h(this.zoom,e["text-size"]),this.iconSizeData=$h(this.zoom,e["icon-size"]);const n=this.layers[0].layout,r=n.get("symbol-sort-key"),i=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==i&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=n.get("text-writing-mode").map((t=>kp[t])),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.sourceID=t.sourceID,this.projection=t.projection}createArrays(){this.text=new of(new Za(this.layers,this.zoom,(t=>/^text/.test(t)))),this.icon=new of(new Za(this.layers,this.zoom,(t=>/^icon/.test(t)))),this.glyphOffsetArray=new va,this.lineVertexArray=new xa,this.symbolInstances=new ya}calculateGlyphDependencies(t,e,n,r,i){for(let o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,r&&i){const n=Gh[t.charAt(o)];n&&(e[n.charCodeAt(0)]=!0)}}populate(t,e,n,r){const i=this.layers[0],o=i.layout,a="globe"===this.projection.name,s=o.get("text-font"),l=o.get("text-field"),c=o.get("icon-image"),u=("constant"!==l.value.kind||l.value.value instanceof Re&&!l.value.value.isEmpty()||l.value.value.toString().length>0)&&("constant"!==s.value.kind||s.value.value.length>0),h="constant"!==c.value.kind||!!c.value.value||Object.keys(c.parameters).length>0,p=o.get("symbol-sort-key");if(this.features=[],!u&&!h)return;const d=e.iconDependencies,f=e.glyphDependencies,g=e.availableImages,m=new wo(this.zoom);for(const{feature:y,id:v,index:x,sourceLayerIndex:_}of t){const t=i._featureFilter.needGeometry,e=sc(y,t);if(!i._featureFilter.filter(m,e,n))continue;if(t||(e.geometry=ac(y,n,r)),a&&1!==y.type&&n.z<=5){const t=e.geometry,r=.98078528056,i=(t,e)=>Ls(Ml(t.x,t.y,n,1),Ml(e.x,e.y,n,1))<r;for(let e=0;e<t.length;e++)t[e]=nc(t[e],i)}let l,c;if(u){const t=i.getValueAndResolveTokens("text-field",e,n,g),r=Re.factory(t);rf(r)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===xo()||this.hasRTLText&&bo.isParsed())&&(l=Hh(r,i,e))}if(h){const t=i.getValueAndResolveTokens("icon-image",e,n,g);c=t instanceof Le?t:Le.fromString(t)}if(!l&&!c)continue;const b=this.sortFeaturesByKey?p.evaluate(e,{},n):void 0;if(this.features.push({id:v,text:l,icon:c,index:x,sourceLayerIndex:_,geometry:e.geometry,properties:y.properties,type:Jd[y.type],sortKey:b}),c&&(d[c.name]=!0),l){const t=s.evaluate(e,{},n).join(","),r="map"===o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(kp.vertical)>=0;for(const e of l.sections)if(e.image)d[e.image.name]=!0;else{const n=eo(l.toString()),i=e.fontStack||t,o=f[i]=f[i]||{};this.calculateGlyphDependencies(e.text,o,r,this.allowVerticalPlacement,n)}}}"line"===o.get("symbol-placement")&&(this.features=function(t){const e={},n={},r=[];let i=0;function o(e){r.push(t[e]),i++}function a(t,e,i){const o=n[t];return delete n[t],n[e]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(i[0]),o}function s(t,n,i){const o=e[n];return delete e[n],e[t]=o,r[o].geometry[0].shift(),r[o].geometry[0]=i[0].concat(r[o].geometry[0]),o}function l(t,e,n){const r=n?e[0][e[0].length-1]:e[0][0];return`${t}:${r.x}:${r.y}`}for(let c=0;c<t.length;c++){const u=t[c],h=u.geometry,p=u.text?u.text.toString():null;if(!p){o(c);continue}const d=l(p,h),f=l(p,h,!0);if(d in n&&f in e&&n[d]!==e[f]){const t=s(d,f,h),i=a(d,f,r[t].geometry);delete e[d],delete n[f],n[l(p,r[i].geometry,!0)]=i,r[t].geometry=null}else d in n?a(d,f,h):f in e?s(d,f,h):(o(c),e[d]=i-1,n[f]=i-1)}return r.filter((t=>t.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((t,e)=>t.sortKey-e.sortKey))}update(t,e,n,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n,r),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n,r))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=Kd(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,e){const n=this.lineVertexArray.length;if(void 0!==t.segment)for(const{x:r,y:i}of e)this.lineVertexArray.emplaceBack(r,i);return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(t,e,n,r,i,o,a,s,l,c,u,h,p,d){const f=t.indexArray,g=t.layoutVertexArray,m=t.globeExtVertexArray,y=t.segments.prepareSegment(4*e.length,g,f,this.canOverlap?o.sortKey:void 0),v=this.glyphOffsetArray.length,x=y.vertexLength,_=this.allowVerticalPlacement&&a===kp.vertical?Math.PI/2:0,b=o.text&&o.text.sections;for(let S=0;S<e.length;S++){const{tl:r,tr:i,bl:a,br:c,tex:u,pixelOffsetTL:h,pixelOffsetBR:v,minFontScaleX:x,minFontScaleY:w,glyphOffset:C,isSDF:E,sectionIndex:k}=e[S],M=y.vertexLength,T=C[1];if(tf(g,l.x,l.y,r.x,T+r.y,u.x,u.y,n,E,h.x,h.y,x,w),tf(g,l.x,l.y,i.x,T+i.y,u.x+u.w,u.y,n,E,v.x,h.y,x,w),tf(g,l.x,l.y,a.x,T+a.y,u.x,u.y+u.h,n,E,h.x,v.y,x,w),tf(g,l.x,l.y,c.x,T+c.y,u.x+u.w,u.y+u.h,n,E,v.x,v.y,x,w),s){const{x:e,y:n,z:r}=s.anchor,[i,o,a]=s.up;ef(m,e,n,r,i,o,a),ef(m,e,n,r,i,o,a),ef(m,e,n,r,i,o,a),ef(m,e,n,r,i,o,a),nf(t.dynamicLayoutVertexArray,e,n,r,_)}else nf(t.dynamicLayoutVertexArray,l.x,l.y,l.z,_);f.emplaceBack(M,M+1,M+2),f.emplaceBack(M+1,M+2,M+3),y.vertexLength+=4,y.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(C[0]),S!==e.length-1&&k===e[S+1].sectionIndex||t.programConfigurations.populatePaintArrays(g.length,o,o.index,{},p,d,b&&b[k])}const w=s?s.anchor:l;t.placedSymbolArray.emplaceBack(w.x,w.y,w.z,l.x,l.y,v,this.glyphOffsetArray.length-v,x,c,u,l.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],a,0,!1,0,h,0)}_commitLayoutVertex(t,e,n,r,i,o,a){t.emplaceBack(e,n,r,i,o,Math.round(a.x),Math.round(a.y))}_addCollisionDebugVertices(t,e,n,r,i,o,a){const s=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),l=s.vertexLength,c=a.tileAnchorX,u=a.tileAnchorY;for(let p=0;p<4;p++)n.collisionVertexArray.emplaceBack(0,0,0,0);n.collisionVertexArrayExt.emplaceBack(e,-t.padding,-t.padding),n.collisionVertexArrayExt.emplaceBack(e,t.padding,-t.padding),n.collisionVertexArrayExt.emplaceBack(e,t.padding,t.padding),n.collisionVertexArrayExt.emplaceBack(e,-t.padding,t.padding),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,c,u,new v(t.x1,t.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,c,u,new v(t.x2,t.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,c,u,new v(t.x2,t.y2)),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,c,u,new v(t.x1,t.y2)),s.vertexLength+=4;const h=n.indexArray;h.emplaceBack(l,l+1),h.emplaceBack(l+1,l+2),h.emplaceBack(l+2,l+3),h.emplaceBack(l+3,l),s.primitiveLength+=4}_addTextDebugCollisionBoxes(t,e,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceTextSize(t,o,e,a);this._addCollisionDebugVertices(r,i,this.textCollisionBox,r.projectedAnchorX,r.projectedAnchorY,r.projectedAnchorZ,o)}}_addIconDebugCollisionBoxes(t,e,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceIconSize(t,e,o.placedIconSymbolIndex);this._addCollisionDebugVertices(r,i,this.iconCollisionBox,r.projectedAnchorX,r.projectedAnchorY,r.projectedAnchorZ,o)}}generateCollisionDebugBuffers(t,e){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new af(Qo,Nh.members,ca),this.iconCollisionBox=new af(Qo,Nh.members,ca);const n=Uh(this.iconSizeData,t),r=Uh(this.textSizeData,t);for(let i=0;i<this.symbolInstances.length;i++){const o=this.symbolInstances.get(i);this._addTextDebugCollisionBoxes(r,t,e,o.textBoxStartIndex,o.textBoxEndIndex,o),this._addTextDebugCollisionBoxes(r,t,e,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,t,e,o.iconBoxStartIndex,o.iconBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,t,e,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o)}}getSymbolInstanceTextSize(t,e,n,r){const i=this.text.placedSymbolArray.get(e.rightJustifiedTextSymbolIndex>=0?e.rightJustifiedTextSymbolIndex:e.centerJustifiedTextSymbolIndex>=0?e.centerJustifiedTextSymbolIndex:e.leftJustifiedTextSymbolIndex>=0?e.leftJustifiedTextSymbolIndex:e.verticalPlacedTextSymbolIndex>=0?e.verticalPlacedTextSymbolIndex:r),o=jh(this.textSizeData,t,i)/zh;return this.tilePixelRatio*o}getSymbolInstanceIconSize(t,e,n){const r=this.icon.placedSymbolArray.get(n),i=jh(this.iconSizeData,t,r);return this.tilePixelRatio*i}_commitDebugCollisionVertexUpdate(t,e,n){t.emplaceBack(e,-n,-n),t.emplaceBack(e,n,-n),t.emplaceBack(e,n,n),t.emplaceBack(e,-n,n)}_updateTextDebugCollisionBoxes(t,e,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceTextSize(t,o,e,a);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,i,r.padding)}}_updateIconDebugCollisionBoxes(t,e,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceIconSize(t,e,o);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,i,r.padding)}}updateCollisionDebugBuffers(t,e){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const n=Uh(this.iconSizeData,t),r=Uh(this.textSizeData,t);for(let i=0;i<this.symbolInstances.length;i++){const o=this.symbolInstances.get(i);this._updateTextDebugCollisionBoxes(r,t,e,o.textBoxStartIndex,o.textBoxEndIndex,o),this._updateTextDebugCollisionBoxes(r,t,e,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._updateIconDebugCollisionBoxes(n,t,e,o.iconBoxStartIndex,o.iconBoxEndIndex,o.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(n,t,e,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(t,e,n,r,i,o,a,s,l){const c={};if(e<n){const{x1:n,y1:r,x2:i,y2:o,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:p,featureIndex:d}=t.get(e);c.textBox={x1:n,y1:r,x2:i,y2:o,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:p},c.textFeatureIndex=d}if(r<i){const{x1:e,y1:n,x2:i,y2:o,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:p,featureIndex:d}=t.get(r);c.verticalTextBox={x1:e,y1:n,x2:i,y2:o,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:p},c.verticalTextFeatureIndex=d}if(o<a){const{x1:e,y1:n,x2:r,y2:i,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:p,featureIndex:d}=t.get(o);c.iconBox={x1:e,y1:n,x2:r,y2:i,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:p},c.iconFeatureIndex=d}if(s<l){const{x1:e,y1:n,x2:r,y2:i,padding:o,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:p,featureIndex:d}=t.get(s);c.verticalIconBox={x1:e,y1:n,x2:r,y2:i,padding:o,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:p},c.verticalIconFeatureIndex=d}return c}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let e=0;e<this.symbolInstances.length;e++){const n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,e){const n=t.placedSymbolArray.get(e),r=n.vertexStartIndex+4*n.numGlyphs;for(let i=n.vertexStartIndex;i<r;i+=4)t.indexArray.emplaceBack(i,i+1,i+2),t.indexArray.emplaceBack(i+1,i+2,i+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const e=Math.sin(t),n=Math.cos(t),r=[],i=[],o=[];for(let a=0;a<this.symbolInstances.length;++a){o.push(a);const t=this.symbolInstances.get(a);r.push(0|Math.round(e*t.tileAnchorX+n*t.tileAnchorY)),i.push(t.featureIndex)}return o.sort(((t,e)=>r[t]-r[e]||i[e]-i[t])),o}addToSortKeyRanges(t,e){const n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===e?n.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const t of this.symbolInstanceIndexes){const e=this.symbolInstances.get(t);this.featureSortOrder.push(e.featureIndex);const{rightJustifiedTextSymbolIndex:n,centerJustifiedTextSymbolIndex:r,leftJustifiedTextSymbolIndex:i,verticalPlacedTextSymbolIndex:o,placedIconSymbolIndex:a,verticalPlacedIconSymbolIndex:s}=e;n>=0&&this.addIndicesForPlacedSymbol(this.text,n),r>=0&&r!==n&&this.addIndicesForPlacedSymbol(this.text,r),i>=0&&i!==r&&i!==n&&this.addIndicesForPlacedSymbol(this.text,i),o>=0&&this.addIndicesForPlacedSymbol(this.text,o),a>=0&&this.addIndicesForPlacedSymbol(this.icon,a),s>=0&&this.addIndicesForPlacedSymbol(this.icon,s)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Yi(sf,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),sf.MAX_GLYPHS=65535,sf.addDynamicAttributes=nf;const lf=new Ro({"symbol-placement":new Oo(te.layout_symbol["symbol-placement"]),"symbol-spacing":new Oo(te.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Oo(te.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ao(te.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Oo(te.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Oo(te.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Oo(te.layout_symbol["icon-ignore-placement"]),"icon-optional":new Oo(te.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Oo(te.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ao(te.layout_symbol["icon-size"]),"icon-text-fit":new Oo(te.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Oo(te.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ao(te.layout_symbol["icon-image"]),"icon-rotate":new Ao(te.layout_symbol["icon-rotate"]),"icon-padding":new Oo(te.layout_symbol["icon-padding"]),"icon-keep-upright":new Oo(te.layout_symbol["icon-keep-upright"]),"icon-offset":new Ao(te.layout_symbol["icon-offset"]),"icon-anchor":new Ao(te.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Oo(te.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Oo(te.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Oo(te.layout_symbol["text-rotation-alignment"]),"text-field":new Ao(te.layout_symbol["text-field"]),"text-font":new Ao(te.layout_symbol["text-font"]),"text-size":new Ao(te.layout_symbol["text-size"]),"text-max-width":new Ao(te.layout_symbol["text-max-width"]),"text-line-height":new Ao(te.layout_symbol["text-line-height"]),"text-letter-spacing":new Ao(te.layout_symbol["text-letter-spacing"]),"text-justify":new Ao(te.layout_symbol["text-justify"]),"text-radial-offset":new Ao(te.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Oo(te.layout_symbol["text-variable-anchor"]),"text-anchor":new Ao(te.layout_symbol["text-anchor"]),"text-max-angle":new Oo(te.layout_symbol["text-max-angle"]),"text-writing-mode":new Oo(te.layout_symbol["text-writing-mode"]),"text-rotate":new Ao(te.layout_symbol["text-rotate"]),"text-padding":new Oo(te.layout_symbol["text-padding"]),"text-keep-upright":new Oo(te.layout_symbol["text-keep-upright"]),"text-transform":new Ao(te.layout_symbol["text-transform"]),"text-offset":new Ao(te.layout_symbol["text-offset"]),"text-allow-overlap":new Oo(te.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Oo(te.layout_symbol["text-ignore-placement"]),"text-optional":new Oo(te.layout_symbol["text-optional"])});var cf={paint:new Ro({"icon-opacity":new Ao(te.paint_symbol["icon-opacity"]),"icon-color":new Ao(te.paint_symbol["icon-color"]),"icon-halo-color":new Ao(te.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ao(te.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ao(te.paint_symbol["icon-halo-blur"]),"icon-translate":new Oo(te.paint_symbol["icon-translate"]),"icon-translate-anchor":new Oo(te.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ao(te.paint_symbol["text-opacity"]),"text-color":new Ao(te.paint_symbol["text-color"],{runtimeType:pe,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new Ao(te.paint_symbol["text-halo-color"]),"text-halo-width":new Ao(te.paint_symbol["text-halo-width"]),"text-halo-blur":new Ao(te.paint_symbol["text-halo-blur"]),"text-translate":new Oo(te.paint_symbol["text-translate"]),"text-translate-anchor":new Oo(te.paint_symbol["text-translate-anchor"])}),layout:lf};class uf{constructor(t){this.type=t.property.overrides?t.property.overrides.runtimeType:le,this.defaultValue=t}evaluate(t){if(t.formattedSection){const e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Yi(uf,"FormatSectionOverride",{omit:["defaultValue"]});class hf extends rs{constructor(t){super(t,cf)}recalculate(t,e){super.recalculate(t,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const n=this.layout.get("text-writing-mode");if(n){const t=[];for(const e of n)t.indexOf(e)<0&&t.push(e);this.layout._values["text-writing-mode"]=t}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(t,e,n,r){const i=this.layout.get(t).evaluate(e,{},n,r),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||Yr(o.value)||!i?i:function(t,e){return e.replace(/{([^{}]+)}/g,((e,n)=>n in t?String(t[n]):""))}(e.properties,i)}createBucket(t){return new sf(t)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const t of cf.paint.overridableProperties){if(!hf.hasPaintOverride(this.layout,t))continue;const e=this.paint.get(t),n=new uf(e),r=new qr(n,e.property.specification);let i=null;i="constant"===e.value.kind||"source"===e.value.kind?new Kr("source",r):new Jr("composite",r,e.value.zoomStops,e.value._interpolationType),this.paint._values[t]=new Io(e.property,i,e.parameters)}}_handleOverridablePaintPropertyUpdate(t,e,n){return!(!this.layout||e.isDataDriven()||n.isDataDriven())&&hf.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,e){const n=t.get("text-field"),r=cf.paint.properties[e];let i=!1;const o=t=>{for(const e of t)if(r.overrides&&r.overrides.hasOverride(e))return void(i=!0)};if("constant"===n.value.kind&&n.value.value instanceof Re)o(n.value.value.sections);else if("source"===n.value.kind){const t=e=>{i||(e instanceof je&&ze(e.value)===me?o(e.value.sections):e instanceof We?o(e.sections):e.eachChild(t))},e=n.value;e._styleExpression&&t(e._styleExpression.expression)}return i}getProgramConfiguration(t){return new Ya(this,t)}}var pf={paint:new Ro({"background-color":new Oo(te.paint_background["background-color"]),"background-pattern":new Oo(te.paint_background["background-pattern"]),"background-opacity":new Oo(te.paint_background["background-opacity"])})},df={paint:new Ro({"raster-opacity":new Oo(te.paint_raster["raster-opacity"]),"raster-hue-rotate":new Oo(te.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Oo(te.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Oo(te.paint_raster["raster-brightness-max"]),"raster-saturation":new Oo(te.paint_raster["raster-saturation"]),"raster-contrast":new Oo(te.paint_raster["raster-contrast"]),"raster-resampling":new Oo(te.paint_raster["raster-resampling"]),"raster-fade-duration":new Oo(te.paint_raster["raster-fade-duration"])})};class ff extends rs{constructor(t){super(t,{}),this.implementation=t}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)}onRemove(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)}}var gf={paint:new Ro({"sky-type":new Oo(te.paint_sky["sky-type"]),"sky-atmosphere-sun":new Oo(te.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Oo(te.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Oo(te.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Oo(te.paint_sky["sky-gradient-radius"]),"sky-gradient":new Do(te.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Oo(te.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Oo(te.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Oo(te.paint_sky["sky-opacity"])})};function mf(t,e,n){const r=[0,0,1],i=Xs([]);return Ys(i,i,n?-b(t)+Math.PI:b(t)),qs(i,i,-b(e)),zs(r,r,i),Rs(r,r)}const yf={circle:class extends rs{constructor(t){super(t,Tc)}createBucket(t){return new uc(t)}queryRadius(t){const e=t;return Sc("circle-radius",this,e)+Sc("circle-stroke-width",this,e)+Cc(this.paint.get("circle-translate"))}queryIntersectsFeature(t,e,n,r,i,o,a,s){const l=kc(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),c=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n);return Ic(t,r,o,a,s,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),l,c)}getProgramIds(){return["circle"]}getProgramConfiguration(t){return new Ya(this,t)}},heatmap:class extends rs{createBucket(t){return new Rc(t)}constructor(t){super(t,$c),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"heatmap-color"===t&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=jc({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(t){return Sc("heatmap-radius",this,t)}queryIntersectsFeature(t,e,n,r,i,o,a,s){const l=this.paint.get("heatmap-radius").evaluate(e,n);return Ic(t,r,o,a,s,!0,!0,new v(0,0),l)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(t){return new Ya(this,t)}},hillshade:class extends rs{constructor(t){super(t,Uc)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends rs{constructor(t){super(t,Iu)}getProgramIds(){const t=this.paint.get("fill-pattern"),e=t&&t.constantOr(1),n=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}getProgramConfiguration(t){return new Ya(this,t)}recalculate(t,e){super.recalculate(t,e);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new Mu(t)}queryRadius(){return Cc(this.paint.get("fill-translate"))}queryIntersectsFeature(t,e,n,r,i,o){return!t.queryGeometry.isAboveHorizon&&dc(Ec(t.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),r)}isTileClipped(){return!0}},"fill-extrusion":class extends rs{constructor(t){super(t,uh)}createBucket(t){return new th(t)}queryRadius(){return Cc(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(t){return new Ya(this,t)}queryIntersectsFeature(t,e,n,r,i,o,a,s,l){const c=kc(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),u=this.paint.get("fill-extrusion-height").evaluate(e,n),h=this.paint.get("fill-extrusion-base").evaluate(e,n),p=[0,0],d=s&&o.elevation,f=o.elevation?o.elevation.exaggeration():1,g=t.tile.getBucket(this);if(d&&g instanceof th){const t=g.centroidVertexArray,e=l+1;e<t.length&&(p[0]=t.geta_centroid_pos0(e),p[1]=t.geta_centroid_pos1(e))}if(0===p[0]&&1===p[1])return!1;"globe"===o.projection.name&&(r=lh([r],[new v(0,0),new v(ss,ss)],t.tileID.canonical).map((t=>t.polygon)).flat());const m=d?s:null,[y,x]=function(t,e,n,r,i,o,a,s,l,c,u){return"globe"===t.projection.name?function(t,e,n,r,i,o,a,s,l,c,u){const h=[],p=[],d=t.projection.upVectorScale(u,t.center.lat,t.worldSize).metersToTile,f=[0,0,0,1],g=[0,0,0,1],m=(t,e,n,r)=>{t[0]=e,t[1]=n,t[2]=r,t[3]=1},y=sh();n>0&&(n+=y),r+=y;for(const v of e){const e=[],y=[];for(const h of v){const p=h.x+i.x,v=h.y+i.y,x=t.projection.projectTilePoint(p,v,u),_=t.projection.upVector(u,h.x,h.y);let b=n,w=r;if(a){const t=xh(p,v,n,r,a,s,l,c);b+=t.base,w+=t.top}0!==n?m(f,x.x+_[0]*d*b,x.y+_[1]*d*b,x.z+_[2]*d*b):m(f,x.x,x.y,x.z),m(g,x.x+_[0]*d*w,x.y+_[1]*d*w,x.z+_[2]*d*w),Fs(f,f,o),Fs(g,g,o),e.push(new mh(f[0],f[1],f[2])),y.push(new mh(g[0],g[1],g[2]))}h.push(e),p.push(y)}return[h,p]}(t,e,n,r,i,o,a,s,l,c,u):a?function(t,e,n,r,i,o,a,s,l){const c=[],u=[],h=[0,0,0,1];for(const p of t){const t=[],d=[];for(const c of p){const u=c.x+r.x,p=c.y+r.y,f=xh(u,p,e,n,o,a,s,l);h[0]=u,h[1]=p,h[2]=f.base,h[3]=1,Gs(h,h,i),h[3]=Math.max(h[3],1e-5);const g=new mh(h[0]/h[3],h[1]/h[3],h[2]/h[3]);h[0]=u,h[1]=p,h[2]=f.top,h[3]=1,Gs(h,h,i),h[3]=Math.max(h[3],1e-5);const m=new mh(h[0]/h[3],h[1]/h[3],h[2]/h[3]);t.push(g),d.push(m)}c.push(t),u.push(d)}return[c,u]}(e,n,r,i,o,a,s,l,c):function(t,e,n,r,i){const o=[],a=[],s=i[8]*e,l=i[9]*e,c=i[10]*e,u=i[11]*e,h=i[8]*n,p=i[9]*n,d=i[10]*n,f=i[11]*n;for(const g of t){const t=[],e=[];for(const n of g){const o=n.x+r.x,a=n.y+r.y,g=i[0]*o+i[4]*a+i[12],m=i[1]*o+i[5]*a+i[13],y=i[2]*o+i[6]*a+i[14],v=i[3]*o+i[7]*a+i[15],x=g+s,_=m+l,b=y+c,w=Math.max(v+u,1e-5),S=g+h,C=m+p,E=y+d,k=Math.max(v+f,1e-5);t.push(new mh(x/w,_/w,b/w)),e.push(new mh(S/k,C/k,E/k))}o.push(t),a.push(e)}return[o,a]}(e,n,r,i,o)}(o,r,h,u,c,a,m,p,f,o.center.lat,t.tileID.canonical),_=t.queryGeometry;return function(t,e,n){let r=1/0;dc(n,e)&&(r=vh(n,e[0]));for(let i=0;i<e.length;i++){const o=e[i],a=t[i];for(let t=0;t<o.length-1;t++){const e=o[t],i=[e,o[t+1],a[t+1],a[t],e];hc(n,i)&&(r=Math.min(r,vh(n,i)))}}return r!==1/0&&r}(y,x,_.isPointQuery()?_.screenBounds:_.screenGeometry)}},line:class extends rs{constructor(t){super(t,Th),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(t){if("line-gradient"===t){const t=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=t._styleExpression&&t._styleExpression.expression instanceof On,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values["line-floorwidth"]=Ih.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new kh(t)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(t){return new Ya(this,t)}queryRadius(t){const e=t,n=Ph(Sc("line-width",this,e),Sc("line-gap-width",this,e)),r=Sc("line-offset",this,e);return n/2+Math.abs(r)+Cc(this.paint.get("line-translate"))}queryIntersectsFeature(t,e,n,r,i,o){if(t.queryGeometry.isAboveHorizon)return!1;const a=Ec(t.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),s=t.pixelToTileUnitsFactor/2*Ph(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),l=this.paint.get("line-offset").evaluate(e,n);return l&&(r=function(t,e){const n=[],r=new v(0,0);for(let i=0;i<t.length;i++){const o=t[i],a=[];for(let t=0;t<o.length;t++){const n=o[t],i=o[t+1],s=0===t?r:n.sub(o[t-1])._unit()._perp(),l=t===o.length-1?r:i.sub(n)._unit()._perp(),c=s._add(l)._unit();c._mult(1/(c.x*l.x+c.y*l.y)),a.push(c._mult(e)._add(n))}n.push(a)}return n}(r,l*t.pixelToTileUnitsFactor)),function(t,e,n){for(let r=0;r<e.length;r++){const i=e[r];if(t.length>=3)for(let e=0;e<i.length;e++)if(_c(t,i[e]))return!0;if(fc(t,i,n))return!0}return!1}(a,r,s)}isTileClipped(){return!0}},symbol:hf,background:class extends rs{constructor(t){super(t,pf)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends rs{constructor(t){super(t,df)}getProgramIds(){return["raster"]}},sky:class extends rs{constructor(t){super(t,gf),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"sky-gradient"===t?this._updateColorRamp():"sky-atmosphere-sun"!==t&&"sky-atmosphere-halo-color"!==t&&"sky-atmosphere-color"!==t&&"sky-atmosphere-sun-intensity"!==t||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=jc({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(t){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=t.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}return!1}getCenter(t,e){if("atmosphere"===this.paint.get("sky-type")){const n=this.paint.get("sky-atmosphere-sun"),r=!n,i=t.style.light,o=i.properties.get("position");return r&&"viewport"===i.properties.get("anchor")&&H("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),r?mf(o.azimuthal,90-o.polar,e):mf(n[0],90-n[1],e)}const n=this.paint.get("sky-gradient-center");return mf(n[0],90-n[1],e)}is3D(){return!1}isSky(){return!0}markSkyboxValid(t){this._skyboxInvalidated=!1,this._lightPosition=t.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const t=this.paint.get("sky-type");return"atmosphere"===t?["skyboxCapture","skybox"]:"gradient"===t?["skyboxGradient"]:null}}};class vf{constructor(t,e,n,r){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,r)}update(t,n,r){const{width:i,height:o}=t,{context:a}=this,{gl:s}=a,{HTMLImageElement:l,HTMLCanvasElement:c,HTMLVideoElement:u,ImageData:h,ImageBitmap:p}=e;if(s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!n||!1!==n.premultiply)),r||this.size&&this.size[0]===i&&this.size[1]===o){const{x:e,y:n}=r||{x:0,y:0};t instanceof l||t instanceof c||t instanceof u||t instanceof h||p&&t instanceof p?s.texSubImage2D(s.TEXTURE_2D,0,e,n,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,e,n,i,o,s.RGBA,s.UNSIGNED_BYTE,t.data)}else this.size=[i,o],t instanceof l||t instanceof c||t instanceof u||t instanceof h||p&&t instanceof p?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,i,o,0,this.format,s.UNSIGNED_BYTE,t.data);this.useMipmap=Boolean(n&&n.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&s.generateMipmap(s.TEXTURE_2D)}bind(t,e){const{context:n}=this,{gl:r}=n;r.bindTexture(r.TEXTURE_2D,this.texture),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,this.useMipmap?t===r.NEAREST?r.NEAREST_MIPMAP_NEAREST:r.LINEAR_MIPMAP_NEAREST:t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}class xf{constructor(t){this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){this._channel=void 0,this._callback=()=>{}}}class _f{constructor(){this.tasks={},this.taskQueue=[],z(["process"],this),this.invoker=new xf(this.process),this.nextId=0}add(t,e){const n=this.nextId++,r=function(t){let{type:e,isSymbolTile:n,zoom:r}=t;return r=r||0,"message"===e?0:"maybePrepare"!==e||n?"parseTile"!==e||n?"parseTile"===e&&n?300-r:"maybePrepare"===e&&n?400-r:500:200-r:100-r}(e);if(0===r){X();try{t()}finally{}return{cancel:()=>{}}}return this.tasks[n]={fn:t,metadata:e,priority:r,id:n},this.taskQueue.push(n),this.invoker.trigger(),{cancel:()=>{delete this.tasks[n]}}}process(){X();try{if(this.taskQueue=this.taskQueue.filter((t=>!!this.tasks[t])),!this.taskQueue.length)return;const t=this.pick();if(null===t)return;const e=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),!e)return;e.fn()}finally{}}pick(){let t=null,e=1/0;for(let r=0;r<this.taskQueue.length;r++){const n=this.tasks[this.taskQueue[r]];n.priority<e&&(e=n.priority,t=r)}if(null===t)return null;const n=this.taskQueue[t];return this.taskQueue.splice(t,1),n}remove(){this.invoker.remove()}}class bf{constructor(t){this._stringToNumber={},this._numberToString=[];for(let e=0;e<t.length;e++){const n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}}encode(t){return this._stringToNumber[t]}decode(t){return this._numberToString[t]}}const wf=["tile","layer","source","sourceLayer","state"];class Sf{constructor(t,e,n,r,i){this.type="Feature",this._vectorTileFeature=t,this._z=e,this._x=n,this._y=r,this.properties=t.properties,this.id=i}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};void 0!==this.id&&(t.id=this.id);for(const e of wf)void 0!==this[e]&&(t[e]=this[e]);return t}}const Cf=32,Ef=33,kf=new Uint16Array(8184);for(let Sg=0;Sg<2046;Sg++){let t=Sg+2,e=0,n=0,r=0,i=0,o=0,a=0;for(1&t?r=i=o=Cf:e=n=a=Cf;(t>>=1)>1;){const s=e+r>>1,l=n+i>>1;1&t?(r=e,i=n,e=o,n=a):(e=r,n=i,r=o,i=a),o=s,a=l}const s=4*Sg;kf[s+0]=e,kf[s+1]=n,kf[s+2]=r,kf[s+3]=i}const Mf=new Uint16Array(2178),Tf=new Uint8Array(1089),If=new Uint16Array(1089);function Pf(t){return 0===t?-.03125:32===t?.03125:0}var Of=Bo([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Af={type:2,extent:ss,loadGeometry:()=>[[new v(0,0),new v(ss+1,0),new v(ss+1,ss+1),new v(0,ss+1),new v(0,0)]]};class Df{constructor(t,e,n,r,i){this.tileID=t,this.uid=R(),this.uses=0,this.tileSize=e,this.tileZoom=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=i,this.expiredRequestCount=0,this.state="loading",r&&r.transform&&(this.projection=r.transform.projection)}registerFadeDuration(t){const e=t+this.timeAdded;e<qt.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=Pd(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(t,e,n){if(this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){const n={};if(!e)return n;for(const r of t){const t=r.layerIds.map((t=>e.getLayer(t))).filter(Boolean);if(0!==t.length){r.layers=t,r.stateDependentLayerIds&&(r.stateDependentLayers=r.stateDependentLayerIds.map((e=>t.filter((t=>t.id===e))[0])));for(const e of t)n[e.id]=r}}return n}(t.buckets,e.style),this.hasSymbolBuckets=!1;for(const t in this.buckets){const e=this.buckets[t];if(e instanceof sf){if(this.hasSymbolBuckets=!0,!n)break;e.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const t in this.buckets){const e=this.buckets[t];if(e instanceof sf&&e.hasRTLText){this.hasRTLText=!0,bo.isLoading()||bo.isLoaded()||"deferred"!==xo()||_o();break}}this.queryPadding=0;for(const t in this.buckets){const n=this.buckets[t];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(t).queryRadius(n))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage),t.lineAtlas&&(this.lineAtlas=t.lineAtlas)}else this.collisionBoxArray=new da}unloadVectorData(){if(this.hasData()){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(t){return this.buckets[t.id]}upload(t){for(const n in this.buckets){const e=this.buckets[n];e.uploadPending()&&e.upload(t)}const e=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new vf(t,this.imageAtlas.image,e.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new vf(t,this.glyphAtlasImage,e.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new vf(t,this.lineAtlas.image,e.ALPHA),this.lineAtlas.uploaded=!0)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,e,n,r,i,o,a,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:r,pixelPosMatrix:a,transform:o,params:i,tileTransform:this.tileTransform},t,e,n):{}}querySourceFeatures(t,e){const n=this.latestFeatureIndex;if(!n||!n.rawTileData)return;const r=n.loadVTLayers(),i=e?e.sourceLayer:"",o=r._geojsonTileLayer||r[i];if(!o)return;const a=hi(e&&e.filter),{z:s,x:l,y:c}=this.tileID.canonical,u={z:s,x:l,y:c};for(let h=0;h<o.length;h++){const e=o.feature(h);if(a.needGeometry){const t=sc(e,!0);if(!a.filter(new wo(this.tileID.overscaledZ),t,this.tileID.canonical))continue}else if(!a.filter(new wo(this.tileID.overscaledZ),e))continue;const r=n.getId(e,i),p=new Sf(e,s,l,c,r);p.tile=u,t.push(p)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const e=this.expirationTime;if(t.cacheControl){const e=q(t.cacheControl);e["max-age"]&&(this.expirationTime=Date.now()+1e3*e["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const t=Date.now();let n=!1;if(this.expirationTime>t)n=!1;else if(e)if(this.expirationTime<e)n=!0;else{const r=this.expirationTime-e;r?this.expirationTime=t+Math.max(r,3e4):n=!0}else n=!0;n?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(t,e){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(t).length||!e)return;const n=this.latestFeatureIndex.loadVTLayers(),r=e.style.listImages();for(const i in this.buckets){if(!e.style.hasLayer(i))continue;const o=this.buckets[i],a=o.layers[0].sourceLayer||"_geojsonTileLayer",s=n[a],l=t[a];if(!s||!l||0===Object.keys(l).length)continue;if(o.update(l,s,r,this.imageAtlas&&this.imageAtlas.patternPositions||{}),o instanceof kh||o instanceof Mu){const t=e.style._getSourceCache(o.layers[0].source);e._terrain&&e._terrain.enabled&&t&&o.programConfigurations.needsUpload&&e._terrain._clearRenderCacheForTile(t.id,this.tileID)}const c=e&&e.style&&e.style.getLayer(i);c&&(this.queryPadding=Math.max(this.queryPadding,c.queryRadius(o)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<qt.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=qt.now()+t}setTexture(t,e){const n=e.context,r=n.gl;this.texture=this.texture||e.getTileTexture(t.width),this.texture?this.texture.update(t,{useMipmap:!0}):(this.texture=new vf(n,t,r.RGBA,{useMipmap:!0}),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE))}setDependencies(t,e){const n={};for(const r of e)n[r]=!0;this.dependencies[t]=n}hasDependency(t,e){for(const n of t){const t=this.dependencies[n];if(t)for(const n of e)if(t[n])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(t,e){if(!e||"mercator"===e.name||this._tileDebugBuffer)return;const n=ac(Af,this.tileID.canonical,this.tileTransform)[0],r=new jo,i=new ua;for(let o=0;o<n.length;o++){const{x:t,y:e}=n[o];r.emplaceBack(t,e),i.emplaceBack(o)}i.emplaceBack(0),this._tileDebugIndexBuffer=t.createIndexBuffer(i),this._tileDebugBuffer=t.createVertexBuffer(r,tl.members),this._tileDebugSegments=as.simpleSegment(0,0,r.length,i.length)}_makeTileBoundsBuffers(t,e){if(this._tileBoundsBuffer||!e||"mercator"===e.name)return;const n=ac(Af,this.tileID.canonical,this.tileTransform)[0];let r,i;if(this.isRaster){const t=function(t,e){const n=Pd(t,e),r=Math.pow(2,t.z);for(let c=0;c<Ef;c++)for(let i=0;i<Ef;i++){const o=Xl((t.x+(i+Pf(i))/Cf)/r),a=ql((t.y+(c+Pf(c))/Cf)/r),s=e.project(o,a),l=c*Ef+i;Mf[2*l+0]=Math.round((s.x*n.scale-n.x)*ss),Mf[2*l+1]=Math.round((s.y*n.scale-n.y)*ss)}Tf.fill(0),If.fill(0);for(let c=2045;c>=0;c--){const t=4*c,e=kf[t+0],n=kf[t+1],r=kf[t+2],i=kf[t+3],o=e+r>>1,a=n+i>>1,s=o+a-n,l=a+e-o,u=n*Ef+e,h=i*Ef+r,p=a*Ef+o,d=Math.hypot((Mf[2*u+0]+Mf[2*h+0])/2-Mf[2*p+0],(Mf[2*u+1]+Mf[2*h+1])/2-Mf[2*p+1])>=16;Tf[p]=Tf[p]||(d?1:0),c<1022&&(Tf[p]=Tf[p]||Tf[(n+l>>1)*Ef+(e+s>>1)]||Tf[(i+l>>1)*Ef+(r+s>>1)])}const i=new Vo,o=new ra;let a=0;function s(t,e){const n=e*Ef+t;return 0===If[n]&&(i.emplaceBack(Mf[2*n+0],Mf[2*n+1],t*ss/Cf,e*ss/Cf),If[n]=++a),If[n]-1}function l(t,e,n,r,i,a){const c=t+n>>1,u=e+r>>1;if(Math.abs(t-i)+Math.abs(e-a)>1&&Tf[u*Ef+c])l(i,a,t,e,c,u),l(n,r,i,a,c,u);else{const l=s(t,e),c=s(n,r),u=s(i,a);o.emplaceBack(l,c,u)}}return l(0,0,Cf,Cf,Cf,0),l(Cf,Cf,0,0,0,Cf),{vertices:i,indices:o}}(this.tileID.canonical,e);r=t.vertices,i=t.indices}else{r=new Vo,i=new ra;for(const{x:e,y:i}of n)r.emplaceBack(e,i,0,0);const t=vu(r.int16,void 0,4);for(let e=0;e<t.length;e+=3)i.emplaceBack(t[e],t[e+1],t[e+2])}this._tileBoundsBuffer=t.createVertexBuffer(r,Of.members),this._tileBoundsIndexBuffer=t.createIndexBuffer(i),this._tileBoundsSegments=as.simpleSegment(0,0,r.length,i.length)}_makeGlobeTileDebugBuffers(t,e){const n=e.projection;if(!n||"globe"!==n.name||e.freezeTileCoverage)return;const r=this.tileID.canonical,i=Pl(_l(r,e)),o=Dl(e.zoom);let a;o>0&&(a=fs(new Float64Array(16),e.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(t,r,e,i,a,o),this._makeGlobeTileDebugTextBuffer(t,r,e,i,a,o)}_globePoint(t,e,n,r,i,o,a){let s=Ml(t,e,n);if(o){const i=1<<n.z,l=Hl(r.center.lng),c=Gl(r.center.lat),u=(n.x+.5)/i-l;let h=0;u>.5?h=-1:u<-.5&&(h=1);let p=(t/ss+n.x)/i+h,d=(e/ss+n.y)/i;p=(p-l)*r._pixelsPerMercatorPixel+l,d=(d-c)*r._pixelsPerMercatorPixel+c;const f=[p*r.worldSize,d*r.worldSize,0];Fs(f,f,o),s=xl(s,f,a)}return Fs(s,s,i)}_makeGlobeTileDebugBorderBuffer(t,e,n,r,i,o){const a=new jo,s=new ua,l=new Uo,c=(t,c,u,h,p)=>{const d=(u-t)/(p-1),f=(h-c)/(p-1),g=a.length;for(let m=0;m<p;m++){const u=t+m*d,h=c+m*f;a.emplaceBack(u,h);const p=this._globePoint(u,h,e,n,r,i,o);l.emplaceBack(p[0],p[1],p[2]),s.emplaceBack(g+m)}},u=ss;c(0,0,u,0,16),c(u,0,u,u,16),c(u,u,0,u,16),c(0,u,0,0,16),this._tileDebugIndexBuffer=t.createIndexBuffer(s),this._tileDebugBuffer=t.createVertexBuffer(a,tl.members),this._globeTileDebugBorderBuffer=t.createVertexBuffer(l,Qs.members),this._tileDebugSegments=as.simpleSegment(0,0,a.length,s.length)}_makeGlobeTileDebugTextBuffer(t,e,n,r,i,o){const a=ss/4,s=new jo,l=new ra,c=new Uo,u=25;l.reserve(32),s.reserve(u),c.reserve(u);const h=(t,e)=>u*t+e;for(let p=0;p<u;p++){const t=p*a;for(let l=0;l<u;l++){const u=l*a;s.emplaceBack(u,t);const h=this._globePoint(u,t,e,n,r,i,o);c.emplaceBack(h[0],h[1],h[2])}}for(let p=0;p<4;p++)for(let t=0;t<4;t++){const e=h(p,t),n=h(p,t+1),r=h(p+1,t),i=h(p+1,t+1);l.emplaceBack(e,n,r),l.emplaceBack(r,n,i)}this._tileDebugTextIndexBuffer=t.createIndexBuffer(l),this._tileDebugTextBuffer=t.createVertexBuffer(s,tl.members),this._globeTileDebugTextBuffer=t.createVertexBuffer(c,Qs.members),this._tileDebugTextSegments=as.simpleSegment(0,0,u,32)}}class Rf{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,e,n){const r=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][r]=this.stateChanges[t][r]||{},A(this.stateChanges[t][r],n),null===this.deletedStates[t]){this.deletedStates[t]={};for(const e in this.state[t])e!==r&&(this.deletedStates[t][e]=null)}else if(this.deletedStates[t]&&null===this.deletedStates[t][r]){this.deletedStates[t][r]={};for(const e in this.state[t][r])n[e]||(this.deletedStates[t][r][e]=null)}else for(const i in n)this.deletedStates[t]&&this.deletedStates[t][r]&&null===this.deletedStates[t][r][i]&&delete this.deletedStates[t][r][i]}removeFeatureState(t,e,n){if(null===this.deletedStates[t])return;const r=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},n&&void 0!==e)null!==this.deletedStates[t][r]&&(this.deletedStates[t][r]=this.deletedStates[t][r]||{},this.deletedStates[t][r][n]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][r])for(n in this.deletedStates[t][r]={},this.stateChanges[t][r])this.deletedStates[t][r][n]=null;else this.deletedStates[t][r]=null;else this.deletedStates[t]=null}getState(t,e){const n=String(e),r=A({},(this.state[t]||{})[n],(this.stateChanges[t]||{})[n]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){const n=this.deletedStates[t][e];if(null===n)return{};for(const t in n)delete r[t]}return r}initializeTileState(t,e){t.setFeatureState(this.state,e)}coalesceChanges(t,e){const n={};for(const r in this.stateChanges){this.state[r]=this.state[r]||{};const t={};for(const e in this.stateChanges[r])this.state[r][e]||(this.state[r][e]={}),A(this.state[r][e],this.stateChanges[r][e]),t[e]=this.state[r][e];n[r]=t}for(const r in this.deletedStates){this.state[r]=this.state[r]||{};const t={};if(null===this.deletedStates[r])for(const e in this.state[r])t[e]={},this.state[r][e]={};else for(const e in this.deletedStates[r]){if(null===this.deletedStates[r][e])this.state[r][e]={};else if(this.state[r][e])for(const t of Object.keys(this.deletedStates[r][e]))delete this.state[r][e][t];t[e]=this.state[r][e]}n[r]=n[r]||{},A(n[r],t)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(const r in t)t[r].setFeatureState(n,e)}}class Lf{constructor(t){this.size=t,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(t,e){const n=this.toIdx(t,e);return{min:this.minimums[n],max:this.maximums[n]}}isLeaf(t,e){return this.leaves[this.toIdx(t,e)]}toIdx(t,e){return e*this.size+t}}function Nf(t,e,n,r){let i=0,o=Number.MAX_VALUE;for(let a=0;a<3;a++)if(Math.abs(r[a])<1e-15){if(n[a]<t[a]||n[a]>e[a])return null}else{const s=1/r[a];let l=(t[a]-n[a])*s,c=(e[a]-n[a])*s;if(l>c){const t=l;l=c,c=t}if(l>i&&(i=l),c<o&&(o=c),i>o)return null}return i}function Ff(t,e,n,r,i,o,a,s,l,c,u){const h=r-t,p=i-e,d=o-n,f=a-t,g=s-e,m=l-n,y=u[1]*m-u[2]*g,v=u[2]*f-u[0]*m,x=u[0]*g-u[1]*f,_=h*y+p*v+d*x;if(Math.abs(_)<1e-15)return null;const b=1/_,w=c[0]-t,S=c[1]-e,C=c[2]-n,E=(w*y+S*v+C*x)*b;if(E<0||E>1)return null;const k=S*d-C*p,M=C*h-w*d,T=w*p-S*h,I=(u[0]*k+u[1]*M+u[2]*T)*b;return I<0||E+I>1?null:(f*k+g*M+m*T)*b}function zf(t,e,n){return(t-e)/(n-e)}function Bf(t,e,n,r,i,o,a,s,l){const c=1<<n,u=o-r,h=a-i,p=(t+1)/c*u+r,d=(e+0)/c*h+i,f=(e+1)/c*h+i;s[0]=(t+0)/c*u+r,s[1]=d,l[0]=p,l[1]=f}class $f{constructor(t){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const e=function(t){const e=Math.ceil(Math.log2(t.dim/8)),n=[];let r=Math.ceil(Math.pow(2,e));const i=1/r,o=(t,e,n,r,i)=>{const o=r?1:0,a=(t+1)*n-o,s=e*n,l=(e+1)*n-o;i[0]=t*n,i[1]=s,i[2]=a,i[3]=l};let a=new Lf(r);const s=[];for(let l=0;l<r*r;l++){o(l%r,Math.floor(l/r),i,!1,s);const e=Uf(s[0],s[1],t),n=Uf(s[2],s[1],t),c=Uf(s[2],s[3],t),u=Uf(s[0],s[3],t);a.minimums.push(Math.min(e,n,c,u)),a.maximums.push(Math.max(e,n,c,u)),a.leaves.push(1)}for(n.push(a),r/=2;r>=1;r/=2){const t=n[n.length-1];a=new Lf(r);for(let e=0;e<r*r;e++){o(e%r,Math.floor(e/r),2,!0,s);const n=t.getElevation(s[0],s[1]),i=t.getElevation(s[2],s[1]),l=t.getElevation(s[2],s[3]),c=t.getElevation(s[0],s[3]),u=t.isLeaf(s[0],s[1]),h=t.isLeaf(s[2],s[1]),p=t.isLeaf(s[2],s[3]),d=t.isLeaf(s[0],s[3]),f=Math.min(n.min,i.min,l.min,c.min),g=Math.max(n.max,i.max,l.max,c.max),m=u&&h&&p&&d;a.maximums.push(g),a.minimums.push(f),a.leaves.push(g-f<=5&&m?1:0)}n.push(a)}return n}(this.dem),n=e.length-1,r=e[n];this._addNode(r.minimums[0],r.maximums[0],r.leaves[0]),this._construct(e,0,0,n,0)}raycastRoot(t,e,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return Nf([t,e,-100],[n,r,this.maximums[0]*a],i,o)}raycast(t,e,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;if(!this.nodeCount)return null;const s=this.raycastRoot(t,e,n,r,i,o,a);if(null==s)return null;const l=[],c=[],u=[],h=[],p=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];for(;p.length>0;){const{idx:s,t:d,nodex:f,nodey:g,depth:m}=p.pop();if(this.leaves[s]){Bf(f,g,m,t,e,n,r,u,h);const s=1<<m,l=(f+0)/s,c=(f+1)/s,p=(g+0)/s,y=(g+1)/s,v=Uf(l,p,this.dem)*a,x=Uf(c,p,this.dem)*a,_=Uf(c,y,this.dem)*a,b=Uf(l,y,this.dem)*a,w=Ff(u[0],u[1],v,h[0],u[1],x,h[0],h[1],_,i,o),S=Ff(h[0],h[1],_,u[0],h[1],b,u[0],u[1],v,i,o),C=Math.min(null!==w?w:Number.MAX_VALUE,null!==S?S:Number.MAX_VALUE);if(C!==Number.MAX_VALUE)return C;{const t=Ds([],i,o,d);if(jf(v,x,b,_,zf(t[0],u[0],h[0]),zf(t[1],u[1],h[1]))>=t[2])return d}continue}let y=0;for(let p=0;p<this._siblingOffset.length;p++){Bf((f<<1)+this._siblingOffset[p][0],(g<<1)+this._siblingOffset[p][1],m+1,t,e,n,r,u,h),u[2]=-100,h[2]=this.maximums[this.childOffsets[s]+p]*a;const d=Nf(u,h,i,o);if(null!=d){const t=d;l[p]=t;let e=!1;for(let n=0;n<y&&!e;n++)t>=l[c[n]]&&(c.splice(n,0,p),e=!0);e||(c[y]=p),y++}}for(let t=0;t<y;t++){const e=c[t];p.push({idx:this.childOffsets[s]+e,t:l[e],nodex:(f<<1)+this._siblingOffset[e][0],nodey:(g<<1)+this._siblingOffset[e][1],depth:m+1})}}return null}_addNode(t,e,n){return this.minimums.push(t),this.maximums.push(e),this.leaves.push(n),this.childOffsets.push(0),this.nodeCount++}_construct(t,e,n,r,i){if(1===t[r].isLeaf(e,n))return;this.childOffsets[i]||(this.childOffsets[i]=this.nodeCount);const o=r-1,a=t[o];let s=0,l=0;for(let c=0;c<this._siblingOffset.length;c++){const t=2*e+this._siblingOffset[c][0],r=2*n+this._siblingOffset[c][1],i=a.getElevation(t,r),o=a.isLeaf(t,r),u=this._addNode(i.min,i.max,o);o&&(s|=1<<c),l||(l=u)}for(let c=0;c<this._siblingOffset.length;c++)s&1<<c||this._construct(t,2*e+this._siblingOffset[c][0],2*n+this._siblingOffset[c][1],o,l+c)}}function jf(t,e,n,r,i,o){return An(An(t,n,o),An(e,r,o),i)}function Uf(t,e,n){const r=n.dim,i=M(t*r-.5,0,r-1),o=M(e*r-.5,0,r-1),a=Math.floor(i),s=Math.floor(o),l=Math.min(a+1,r-1),c=Math.min(s+1,r-1);return jf(n.get(a,s),n.get(l,s),n.get(a,c),n.get(l,c),i-a,o-s)}const Vf={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function Hf(t,e,n){return(256*t*256+256*e+n)/10-1e4}function Gf(t,e,n){return 256*t+e+n/256-32768}class Wf{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return H(`"${n}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=e.height;const o=this.dim=e.height-2,a=new Uint32Array(e.data.buffer);if(this.pixels=new Uint8Array(e.data.buffer),this.encoding=n||"mapbox",this.borderReady=r,!r){for(let t=0;t<o;t++)a[this._idx(-1,t)]=a[this._idx(0,t)],a[this._idx(o,t)]=a[this._idx(o-1,t)],a[this._idx(t,-1)]=a[this._idx(t,0)],a[this._idx(t,o)]=a[this._idx(t,o-1)];a[this._idx(-1,-1)]=a[this._idx(0,0)],a[this._idx(o,-1)]=a[this._idx(o-1,0)],a[this._idx(-1,o)]=a[this._idx(0,o-1)],a[this._idx(o,o)]=a[this._idx(o-1,o-1)],i&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new $f(this)}get(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&(t=M(t,-1,this.dim),e=M(e,-1,this.dim));const n=4*this._idx(t,e);return("terrarium"===this.encoding?Gf:Hf)(this.pixels[n],this.pixels[n+1],this.pixels[n+2])}static getUnpackVector(t){return Vf[t]}get unpackVector(){return Vf[this.encoding]}_idx(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)}static pack(t,e){const n=[0,0,0,0],r=Wf.getUnpackVector(e);let i=Math.floor((t+r[3])/r[2]);return n[2]=i%256,i=Math.floor(i/256),n[1]=i%256,i=Math.floor(i/256),n[0]=i,n}getPixels(){return new Bc({width:this.stride,height:this.stride},this.pixels)}backfillBorder(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let r=e*this.dim,i=e*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(e){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}const s=-e*this.dim,l=-n*this.dim;for(let c=o;c<a;c++)for(let e=r;e<i;e++){const n=4*this._idx(e,c),r=4*this._idx(e+s,c+l);this.pixels[n+0]=t.pixels[r+0],this.pixels[n+1]=t.pixels[r+1],this.pixels[n+2]=t.pixels[r+2],this.pixels[n+3]=t.pixels[r+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Yi(Wf,"DEMData"),Yi($f,"DemMinMaxQuadTree",{omit:["dem"]});class Xf{constructor(t,e){this.max=t,this.onRemove=e,this.reset()}reset(){for(const t in this.data)for(const e of this.data[t])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(t,e,n){const r=t.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);const i={value:e,timeout:void 0};if(void 0!==n&&(i.timeout=setTimeout((()=>{this.remove(t,i)}),n)),this.data[r].push(i),this.order.push(r),this.order.length>this.max){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value}getByKey(t){const e=this.data[t];return e?e[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,e){if(!this.has(t))return this;const n=t.wrapped().key,r=void 0===e?0:this.data[n].indexOf(e),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}filter(t){const e=[];for(const n in this.data)for(const r of this.data[n])t(r.value)||e.push(r);for(const n of e)this.remove(n.value.tileID,n)}}class qf{constructor(t,e,n){this.func=t,this.mask=e,this.range=n}}qf.ReadOnly=!1,qf.ReadWrite=!0,qf.disabled=new qf(519,qf.ReadOnly,[0,1]);const Yf=7680;class Zf{constructor(t,e,n,r,i,o){this.test=t,this.ref=e,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o}}Zf.disabled=new Zf({func:519,mask:0},0,0,Yf,Yf,Yf);class Kf{constructor(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n}}Kf.Replace=[1,0],Kf.disabled=new Kf(Kf.Replace,Oe.transparent,[!1,!1,!1,!1]),Kf.unblended=new Kf(Kf.Replace,Oe.transparent,[!0,!0,!0,!0]),Kf.alphaBlended=new Kf([1,771],Oe.transparent,[!0,!0,!0,!0]);const Jf=1029,Qf=2305;class tg{constructor(t,e,n){this.enable=t,this.mode=e,this.frontFace=n}}tg.disabled=new tg(!1,Jf,Qf),tg.backCCW=new tg(!0,Jf,Qf),tg.backCW=new tg(!0,Jf,2304),tg.frontCW=new tg(!0,1028,2304),tg.frontCCW=new tg(!0,1028,Qf);class eg extends Qt{constructor(t,e,n){super(),this.id=t,this._onlySymbols=n,e.on("data",(t=>{"source"===t.dataType&&"metadata"===t.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))})),e.on("error",(()=>{this._sourceErrored=!0})),this._source=e,this._tiles={},this._cache=new Xf(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=e.minTileCacheSize,this._maxTileCacheSize=e.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new Rf,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(t){this.map=t,this._minTileCacheSize=void 0===this._minTileCacheSize&&t?t._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&t?t._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const t in this._tiles){const e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(t,e){return t.isSymbolTile=this._onlySymbols,this._source.loadTile(t,e)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,(()=>{}))}_abortTile(t){if(this._source.abortTile)return this._source.abortTile(t,(()=>{}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const e in this._tiles){const n=this._tiles[e];n.upload(t),n.prepare(this.map.style.imageManager)}}getIds(){return O(this._tiles).map((t=>t.tileID)).sort(ng).map((t=>t.key))}getRenderableIds(t){const e=[];for(const n in this._tiles)this._isIdRenderable(+n,t)&&e.push(this._tiles[n]);return t?e.sort(((t,e)=>{const n=t.tileID,r=e.tileID,i=new v(n.canonical.x,n.canonical.y)._rotate(this.transform.angle),o=new v(r.canonical.x,r.canonical.y)._rotate(this.transform.angle);return n.overscaledZ-r.overscaledZ||o.y-i.y||o.x-i.x})).map((t=>t.tileID.key)):e.map((t=>t.tileID)).sort(ng).map((t=>t.key))}hasRenderableParent(t){const e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)}_isIdRenderable(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(+t,"reloading")}}_reloadTile(t,e){const n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))}_tileLoaded(t,e,n,r){if(r)if(t.state="errored",404!==r.status)this._source.fire(new Jt(r,{tile:t}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const t=this.map.painter.terrain;this.update(this.transform,t.getScaledDemTileSize(),!0),t.resetTileLookupCache(this.id)}else this.update(this.transform);else t.timeAdded=qt.now(),"expired"===n&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),"raster-dem"===this._source.type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new Kt("data",{dataType:"source",tile:t,coord:t.tileID,sourceCacheId:this.id}))}_backfillDEM(t){const e=this.getRenderableIds();for(let r=0;r<e.length;r++){const i=e[r];if(t.neighboringTiles&&t.neighboringTiles[i]){const e=this.getTileByID(i);n(t,e),n(e,t)}}function n(t,e){if(!t.dem||t.dem.borderReady)return;t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0;let n=e.tileID.canonical.x-t.tileID.canonical.x;const r=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,e,n,r){for(const i in this._tiles){let o=this._tiles[i];if(r[i]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>n)continue;let a=o.tileID;for(;o&&o.tileID.overscaledZ>e+1;){const t=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[t.key],o&&o.hasData()&&(a=t)}let s=a;for(;s.overscaledZ>e;)if(s=s.scaledTo(s.overscaledZ-1),t[s.key]){r[a.key]=a;break}}}findLoadedParent(t,e){if(t.key in this._loadedParentTiles){const n=this._loadedParentTiles[t.key];return n&&n.tileID.overscaledZ>=e?n:null}for(let n=t.overscaledZ-1;n>=e;n--){const e=t.scaledTo(n),r=this._getLoadedTile(e);if(r)return r}}_getLoadedTile(t){const e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(this._source.reparseOverscaled?t.wrapped().key:t.canonical.key)}updateCacheSize(t,e){e=e||this._source.tileSize;const n=Math.ceil(t.width/e)+1,r=Math.ceil(t.height/e)+1,i=Math.floor(n*r*5),o="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,i):i,a="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,o):o;this._cache.setMaxSize(a)}handleWrapJump(t){const e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){const t={};for(const n in this._tiles){const r=this._tiles[n];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+e),t[r.tileID.key]=r}this._tiles=t;for(const e in this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(const e in this._tiles)this._setTileReloadTimer(+e,this._tiles[e])}}update(t,e,n){if(this.transform=t,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(this.usedForTerrain&&!n)return;let r;this.updateCacheSize(t,e),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?r=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((t=>new fh(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y))):(r=t.coveringTiles({tileSize:e||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!n,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(r=r.filter((t=>this._source.hasTile(t))))):r=[];const i=this._updateRetainedTiles(r);if(rg(this._source.type)&&0!==r.length){const t={},e={},n=Object.keys(i);for(const r of n){const n=i[r],o=this._tiles[r];if(!o||o.fadeEndTime&&o.fadeEndTime<=qt.now())continue;const a=this.findLoadedParent(n,Math.max(n.overscaledZ-eg.maxOverzooming,this._source.minzoom));a&&(this._addTile(a.tileID),t[a.tileID.key]=a.tileID),e[r]=n}const o=r[r.length-1].overscaledZ;for(const r in this._tiles){const t=this._tiles[r];if(i[r]||!t.hasData())continue;let n=t.tileID;for(;n.overscaledZ>o;){n=n.scaledTo(n.overscaledZ-1);const o=this._tiles[n.key];if(o&&o.hasData()&&e[n.key]){i[r]=t.tileID;break}}}for(const r in t)i[r]||(this._coveredTiles[r]=!0,i[r]=t[r])}for(const a in i)this._tiles[a].clearFadeHold();const o=function(t,e){const n=[];for(const r in t)r in e||n.push(r);return n}(this._tiles,i);for(const a of o){const t=this._tiles[a];t.hasSymbolBuckets&&!t.holdingForFade()?t.setHoldDuration(this.map._fadeDuration):t.hasSymbolBuckets&&!t.symbolFadeFinished()||this._removeTile(+a)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(+t)}_updateRetainedTiles(t){const e={};if(0===t.length)return e;const n={},r=t.reduce(((t,e)=>Math.min(t,e.overscaledZ)),1/0),i=t[0].overscaledZ,o=Math.max(i-eg.maxOverzooming,this._source.minzoom),a=Math.max(i+eg.maxUnderzooming,this._source.minzoom),s={};for(const l of t){const t=this._addTile(l);e[l.key]=l,t.hasData()||r<this._source.maxzoom&&(s[l.key]=l)}this._retainLoadedChildren(s,r,a,e);for(const l of t){let t=this._tiles[l.key];if(t.hasData())continue;if(l.canonical.z>=this._source.maxzoom){const t=l.children(this._source.maxzoom)[0],n=this.getTile(t);if(n&&n.hasData()){e[t.key]=t;continue}}else{const t=l.children(this._source.maxzoom);if(e[t[0].key]&&e[t[1].key]&&e[t[2].key]&&e[t[3].key])continue}let r=t.wasRequested();for(let i=l.overscaledZ-1;i>=o;--i){const o=l.scaledTo(i);if(n[o.key])break;if(n[o.key]=!0,t=this.getTile(o),!t&&r&&(t=this._addTile(o)),t&&(e[o.key]=o,r=t.wasRequested(),t.hasData()))break}}return e}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const e=[];let n,r=this._tiles[t].tileID;for(;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}e.push(r.key);const t=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(t),n)break;r=t}for(const t of e)this._loadedParentTiles[t]=n}}_addTile(t){let e=this._tiles[t.key];if(e)return e;e=this._cache.getAndRemove(t),e&&(this._setTileReloadTimer(t.key,e),e.tileID=t,this._state.initializeTileState(e,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,e)));const n=Boolean(e);if(!n){const n=this.map?this.map.painter:null;e=new Df(t,this._source.tileSize*t.overscaleFactor(),this.transform.tileZoom,n,this._isRaster),this._loadTile(e,this._tileLoaded.bind(this,e,t.key,e.state))}return e?(e.uses++,this._tiles[t.key]=e,n||this._source.fire(new Kt("dataloading",{tile:e,coord:e.tileID,dataType:"source"})),e):null}_setTileReloadTimer(t,e){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const n=e.getExpiryTimeout();n&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,"expired"),delete this._timers[t]}),n))}_removeTile(t){const e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(+t);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(t,e,n){const r=[],i=this.transform;if(!i)return r;const o="globe"===i.projection.name,a=Hl(i.center.lng);for(const s in this._tiles){const l=this._tiles[s];if(n&&l.clearQueryDebugViz(),l.holdingForFade())continue;let c;if(o){const t=l.tileID.canonical;if(0===t.z){const e=[Math.abs(M(a,...ig(t,-1))-a),Math.abs(M(a,...ig(t,1))-a)];c=[0,2*e.indexOf(Math.min(...e))-1]}else{const e=[Math.abs(M(a,...ig(t,-1))-a),Math.abs(M(a,...ig(t,0))-a),Math.abs(M(a,...ig(t,1))-a)];c=[e.indexOf(Math.min(...e))-1]}}else c=[0];for(const n of c){const o=t.containsTile(l,i,e,n);o&&r.push(o)}}return r}getVisibleCoordinates(t){const e=this.getRenderableIds(t).map((t=>this._tiles[t].tileID));for(const n of e)n.projMatrix=this.transform.calculateProjMatrix(n.toUnwrapped());return e}hasTransition(){if(this._source.hasTransition())return!0;if(rg(this._source.type))for(const t in this._tiles){const e=this._tiles[t];if(void 0!==e.fadeEndTime&&e.fadeEndTime>=qt.now())return!0}return!1}setFeatureState(t,e,n){this._state.updateState(t=t||"_geojsonTileLayer",e,n)}removeFeatureState(t,e,n){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,n)}getFeatureState(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)}setDependencies(t,e,n){const r=this._tiles[t];r&&r.setDependencies(e,n)}reloadTilesForDependencies(t,e){for(const n in this._tiles)this._tiles[n].hasDependency(t,e)&&this._reloadTile(+n,"reloading");this._cache.filter((n=>!n.hasDependency(t,e)))}_preloadTiles(t,e){if(!this._sourceLoaded){const n=()=>{this._sourceLoaded&&(this._source.off("data",n),this._preloadTiles(t,e))};return void this._source.on("data",n)}const n=new Map,r=Array.isArray(t)?t:[t],i=this.map.painter.terrain,o=this.usedForTerrain&&i?i.getScaledDemTileSize():this._source.tileSize;for(const a of r){const t=a.coveringTiles({tileSize:o,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const e of t)n.set(e.key,e);this.usedForTerrain&&a.updateElevation(!1)}P(Array.from(n.values()),((t,e)=>{const n=new Df(t,this._source.tileSize*t.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(n,(t=>{"raster-dem"===this._source.type&&n.dem&&this._backfillDEM(n),e(t,n)}))}),e)}}function ng(t,e){const n=Math.abs(2*t.wrap)-+(t.wrap<0),r=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||r-n||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function rg(t){return"raster"===t||"image"===t||"video"===t||"custom"===t}function ig(t,e){const n=1<<t.z;return[t.x/n+e,(t.x+1)/n+e]}eg.maxOverzooming=10,eg.maxUnderzooming=3;class og{constructor(t,e,n){this._demTile=t,this._dem=this._demTile.dem,this._scale=e,this._offset=n}static create(t,e,n){const r=n||t.findDEMTileFor(e);if(!r||!r.dem)return;const i=r.dem,o=r.tileID,a=1<<e.canonical.z-o.canonical.z;return new og(r,r.tileSize/ss/a,[(e.canonical.x/a-o.canonical.x)*i.dim,(e.canonical.y/a-o.canonical.y)*i.dim])}tileCoordToPixel(t,e){const n=e*this._scale+this._offset[1],r=Math.floor(t*this._scale+this._offset[0]),i=Math.floor(n);return new v(r,i)}getElevationAt(t,e,n,r){const i=t*this._scale+this._offset[0],o=e*this._scale+this._offset[1],a=Math.floor(i),s=Math.floor(o),l=this._dem;return r=!!r,n?An(An(l.get(a,s,r),l.get(a,s+1,r),o-s),An(l.get(a+1,s,r),l.get(a+1,s+1,r),o-s),i-a):l.get(a,s,r)}getElevationAtPixel(t,e,n){return this._dem.get(t,e,!!n)}getMeterToDEM(t){return(1<<this._demTile.tileID.canonical.z)*Wl(1,t)*this._dem.stride}}class ag{constructor(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Xi(ss,16,0),this.featureIndexArray=new ba,this.promoteId=e}insert(t,e,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i,o);const s=this.grid;for(let l=0;l<e.length;l++){const t=e[l],n=[1/0,1/0,-1/0,-1/0];for(let e=0;e<t.length;e++){const r=t[e];n[0]=Math.min(n[0],r.x),n[1]=Math.min(n[1],r.y),n[2]=Math.max(n[2],r.x),n[3]=Math.max(n[3],r.y)}n[0]<ss&&n[1]<ss&&n[2]>=0&&n[3]>=0&&s.insert(a,n[0],n[1],n[2],n[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Wu(new mp(this.rawTileData)).layers,this.sourceLayerCoder=new bf(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const t in this.vtLayers)this.vtFeatures[t]=[]}return this.vtLayers}query(t,e,n,r){var i=this;this.loadVTLayers();const o=t.params||{},a=hi(o.filter),s=t.tileResult,l=t.transform,c=s.bufferedTilespaceBounds,u=this.grid.query(c.min.x,c.min.y,c.max.x,c.max.y,((t,e,n,r)=>bc(s.bufferedTilespaceGeometry,t,e,n,r)));u.sort(lg);let h=null;l.elevation&&u.length>0&&(h=og.create(l.elevation,this.tileID));const p={};let d;for(let f=0;f<u.length;f++){const l=u[f];if(l===d)continue;d=l;const c=this.featureIndexArray.get(l);let g=null;this.loadMatchingFeature(p,c,a,o.layers,o.availableImages,e,n,r,(function(e,n,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return g||(g=ac(e,i.tileID.canonical,t.tileTransform)),n.queryIntersectsFeature(s,e,r,g,i.z,t.transform,t.pixelPosMatrix,h,o)}))}return p}loadMatchingFeature(t,e,n,r,i,o,a,s,l){const{featureIndex:c,bucketIndex:u,sourceLayerIndex:h,layoutVertexArrayOffset:p}=e,d=this.bucketLayerIDs[u];if(r&&!function(t,e){for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(r,d))return;const f=this.sourceLayerCoder.decode(h),g=this.vtLayers[f].feature(c);if(n.needGeometry){const t=sc(g,!0);if(!n.filter(new wo(this.tileID.overscaledZ),t,this.tileID.canonical))return}else if(!n.filter(new wo(this.tileID.overscaledZ),g))return;const m=this.getId(g,f);for(let y=0;y<d.length;y++){const e=d[y];if(r&&r.indexOf(e)<0)continue;const n=o[e];if(!n)continue;let u={};void 0!==m&&s&&(u=s.getState(n.sourceLayer||"_geojsonTileLayer",m));const h=A({},a[e]);h.paint=sg(h.paint,n.paint,g,u,i),h.layout=sg(h.layout,n.layout,g,u,i);const f=!l||l(g,n,u,p);if(!f)continue;const v=new Sf(g,this.z,this.x,this.y,m);v.layer=h;let x=t[e];void 0===x&&(x=t[e]=[]),x.push({featureIndex:c,feature:v,intersectionZ:f})}}lookupSymbolFeatures(t,e,n,r,i,o,a,s){const l={};this.loadVTLayers();const c=hi(i);for(const u of t)this.loadMatchingFeature(l,{bucketIndex:n,sourceLayerIndex:r,featureIndex:u,layoutVertexArrayOffset:0},c,o,a,s,e);return l}loadFeature(t){const{featureIndex:e,sourceLayerIndex:n}=t;this.loadVTLayers();const r=this.sourceLayerCoder.decode(n),i=this.vtFeatures[r];if(i[e])return i[e];const o=this.vtLayers[r].feature(e);return i[e]=o,o}hasLayer(t){for(const e of this.bucketLayerIDs)for(const n of e)if(t===n)return!0;return!1}getId(t,e){let n=t.id;if(this.promoteId){const r="string"==typeof this.promoteId?this.promoteId:this.promoteId[e];null!=r&&(n=t.properties[r]),"boolean"==typeof n&&(n=Number(n))}return n}}function sg(t,e,n,r,i){return $(t,((t,o)=>{const a=e instanceof Po?e.get(o):null;return a&&a.evaluate?a.evaluate(n,r,i):a}))}function lg(t,e){return e-t}Yi(ag,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class cg{constructor(t,e){this.width=t,this.height=e,this.nextRow=0,this.image=new zc({width:t,height:e}),this.positions={},this.uploaded=!1}getDash(t,e){const n=this.getKey(t,e);return this.positions[n]}trim(){const t=this.width,e=this.height=N(this.nextRow);this.image.resize({width:t,height:e})}getKey(t,e){return t.join(",")+e}getDashRanges(t,e,n){const r=[];let i=t.length%2==1?-t[t.length-1]*n:0,o=t[0]*n,a=!0;r.push({left:i,right:o,isDash:a,zeroLength:0===t[0]});let s=t[0];for(let l=1;l<t.length;l++){a=!a;const e=t[l];i=s*n,s+=e,o=s*n,r.push({left:i,right:o,isDash:a,zeroLength:0===e})}return r}addRoundDash(t,e,n){const r=e/2;for(let i=-n;i<=n;i++){const e=this.width*(this.nextRow+n+i);let o=0,a=t[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=t[++o]);const l=Math.abs(s-a.left),c=Math.abs(s-a.right),u=Math.min(l,c);let h;const p=i/n*(r+1);if(a.isDash){const t=r-Math.abs(p);h=Math.sqrt(u*u+t*t)}else h=r-Math.sqrt(u*u+p*p);this.image.data[e+s]=Math.max(0,Math.min(255,h+128))}}}addRegularDash(t,e){for(let s=t.length-1;s>=0;--s){const e=t[s],n=t[s+1];e.zeroLength?t.splice(s,1):n&&n.isDash===e.isDash&&(n.left=e.left,t.splice(s,1))}const n=t[0],r=t[t.length-1];n.isDash===r.isDash&&(n.left=r.left-this.width,r.right=n.right+this.width);const i=this.width*this.nextRow;let o=0,a=t[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=t[++o]);const n=Math.abs(s-a.left),r=Math.abs(s-a.right),l=Math.min(n,r);this.image.data[i+s]=Math.max(0,Math.min(255,(a.isDash?l:-l)+e+128))}}addDash(t,e){const n=this.getKey(t,e);if(this.positions[n])return this.positions[n];const r="round"===e,i=r?7:0,o=2*i+1;if(this.nextRow+o>this.height)return H("LineAtlas out of space"),null;0===t.length&&t.push(1);let a=0;for(let c=0;c<t.length;c++)t[c]<0&&(H("Negative value is found in line dasharray, replacing values with 0"),t[c]=0),a+=t[c];if(0!==a){const n=this.width/a,o=this.getDashRanges(t,this.width,n);r?this.addRoundDash(o,n,i):this.addRegularDash(o,"square"===e?.5*n:0)}const s=this.nextRow+i;this.nextRow+=o;const l={tl:[s,i],br:[a,0]};return this.positions[n]=l,l}}Yi(cg,"LineAtlas");const ug=1*td;class hg{constructor(t){const e={},n=[];for(const a in t){const r=t[a],i=e[a]={};for(const t in r.glyphs){const e=r.glyphs[+t];if(!e||0===e.bitmap.width||0===e.bitmap.height)continue;const o=e.metrics.localGlyph?ug:1,a={x:0,y:0,w:e.bitmap.width+2*o,h:e.bitmap.height+2*o};n.push(a),i[t]=a}}const{w:r,h:i}=wp(n),o=new zc({width:r||1,height:i||1});for(const a in t){const n=t[a];for(const t in n.glyphs){const r=n.glyphs[+t];if(!r||0===r.bitmap.width||0===r.bitmap.height)continue;const i=e[a][t],s=r.metrics.localGlyph?ug:1;zc.copy(r.bitmap,o,{x:0,y:0},{x:i.x+s,y:i.y+s},r.bitmap)}}this.image=o,this.positions=e}}Yi(hg,"GlyphAtlas");class pg{constructor(t){this.tileID=new fh(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.canonical=t.tileID.canonical,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.enableTerrain=!!t.enableTerrain,this.isSymbolTile=t.isSymbolTile,this.tileTransform=Pd(t.tileID.canonical,t.projection),this.projection=t.projection}parse(t,e,n,r,i){this.status="parsing",this.data=t,this.collisionBoxArray=new da;const o=new bf(Object.keys(t.layers).sort()),a=new ag(this.tileID,this.promoteId);a.bucketLayerIDs=[];const s={},l=new cg(256,256),c={featureIndex:a,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:l,availableImages:n},u=e.familiesBySource[this.source];for(const _ in u){const e=t.layers[_];if(!e)continue;let r=!1,i=!1;for(const t of u[_])"symbol"===t[0].type?r=!0:i=!0;if(!0===this.isSymbolTile&&!r)continue;if(!1===this.isSymbolTile&&!i)continue;1===e.version&&H(`Vector tile source "${this.source}" layer "${_}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const l=o.encode(_),h=[];for(let t=0;t<e.length;t++){const n=e.feature(t),r=a.getId(n,_);h.push({feature:n,id:r,index:t,sourceLayerIndex:l})}for(const t of u[_]){const e=t[0];void 0!==this.isSymbolTile&&"symbol"===e.type!==this.isSymbolTile||e.minzoom&&this.zoom<Math.floor(e.minzoom)||e.maxzoom&&this.zoom>=e.maxzoom||"none"!==e.visibility&&(dg(t,this.zoom,n),(s[e.id]=e.createBucket({index:a.bucketLayerIDs.length,layers:t,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:l,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:n})).populate(h,c,this.tileID.canonical,this.tileTransform),a.bucketLayerIDs.push(t.map((t=>t.id))))}}let h,p,d,f;l.trim();const g={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},m=()=>{if(h)return i(h);if(p&&d&&f){const t=new hg(p),e=new Ep(d,f);for(const r in s){const i=s[r];i instanceof sf?(dg(i.layers,this.zoom,n),xd(i,p,t.positions,d,e.iconPositions,this.showCollisionBoxes,n,this.tileID.canonical,this.tileZoom,this.projection)):i.hasPattern&&(i instanceof kh||i instanceof Mu||i instanceof th)&&(dg(i.layers,this.zoom,n),i.addFeatures(c,this.tileID.canonical,e.patternPositions,n,this.tileTransform))}this.status="done",i(null,{buckets:O(s).filter((t=>!t.isEmpty())),featureIndex:a,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,lineAtlas:l,imageAtlas:e,glyphMap:this.returnDependencies?p:null,iconMap:this.returnDependencies?d:null,glyphPositions:this.returnDependencies?t.positions:null})}},y=$(c.glyphDependencies,(t=>Object.keys(t).map(Number)));Object.keys(y).length?r.send("getGlyphs",{uid:this.uid,stacks:y},((t,e)=>{h||(h=t,p=e,m())}),void 0,!1,g):p={};const v=Object.keys(c.iconDependencies);v.length?r.send("getImages",{icons:v,source:this.source,tileID:this.tileID,type:"icons"},((t,e)=>{h||(h=t,d=e,m())}),void 0,!1,g):d={};const x=Object.keys(c.patternDependencies);x.length?r.send("getImages",{icons:x,source:this.source,tileID:this.tileID,type:"patterns"},((t,e)=>{h||(h=t,f=e,m())}),void 0,!1,g):f={},m()}}function dg(t,e,n){const r=new wo(e);for(const i of t)i.recalculate(r,n)}class fg{constructor(t){this.entries={},this.scheduler=t}request(t,e,n,r){const i=this.entries[t]=this.entries[t]||{callbacks:[]};if(i.result){const[t,n]=i.result;return this.scheduler?this.scheduler.add((()=>{r(t,n)}),e):r(t,n),()=>{}}return i.callbacks.push(r),i.cancel||(i.cancel=n(((n,r)=>{i.result=[n,r];for(const t of i.callbacks)this.scheduler?this.scheduler.add((()=>{t(n,r)}),e):t(n,r);setTimeout((()=>delete this.entries[t]),3e3)}))),()=>{i.result||(i.callbacks=i.callbacks.filter((t=>t!==r)),i.callbacks.length||(i.cancel(),delete this.entries[t]))}}}function gg(t,e,n){const r=JSON.stringify(t.request);return t.data&&(this.deduped.entries[r]={result:[null,t.data]}),this.deduped.request(r,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom},(e=>{const r=pt(t.request,((t,r,i,o)=>{t?e(t):r&&e(null,{vectorTile:n?void 0:new Wu(new mp(r)),rawData:r,cacheControl:i,expires:o})}));return()=>{r.cancel(),e()}}),e)}const mg=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class yg{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[e,n]=new Uint8Array(t,0,2);if(219!==e)throw new Error("Data does not appear to be in a KDBush format.");const r=n>>4;if(1!==r)throw new Error(`Got v${r} data when expected v1.`);const i=mg[15&n];if(!i)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(t,2,1),[a]=new Uint32Array(t,4,1);return new yg(a,o,i,t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,r=arguments.length>3?arguments[3]:void 0;if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+e,2),65535),this.ArrayType=n,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const i=mg.indexOf(this.ArrayType),o=2*t*this.ArrayType.BYTES_PER_ELEMENT,a=t*this.IndexArrayType.BYTES_PER_ELEMENT,s=(8-a%8)%8;if(i<0)throw new Error(`Unexpected typed array class: ${n}.`);r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+a+s,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+o+a+s),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+a+s,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+i]),new Uint16Array(this.data,2,1)[0]=e,new Uint32Array(this.data,4,1)[0]=t)}add(t,e){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=t,this.coords[this._pos++]=e,n}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return vg(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,e,n,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:o,nodeSize:a}=this,s=[0,i.length-1,0],l=[];for(;s.length;){const c=s.pop()||0,u=s.pop()||0,h=s.pop()||0;if(u-h<=a){for(let a=h;a<=u;a++){const s=o[2*a],c=o[2*a+1];s>=t&&s<=n&&c>=e&&c<=r&&l.push(i[a])}continue}const p=h+u>>1,d=o[2*p],f=o[2*p+1];d>=t&&d<=n&&f>=e&&f<=r&&l.push(i[p]),(0===c?t<=d:e<=f)&&(s.push(h),s.push(p-1),s.push(1-c)),(0===c?n>=d:r>=f)&&(s.push(p+1),s.push(u),s.push(1-c))}return l}within(t,e,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:i,nodeSize:o}=this,a=[0,r.length-1,0],s=[],l=n*n;for(;a.length;){const c=a.pop()||0,u=a.pop()||0,h=a.pop()||0;if(u-h<=o){for(let n=h;n<=u;n++)wg(i[2*n],i[2*n+1],t,e)<=l&&s.push(r[n]);continue}const p=h+u>>1,d=i[2*p],f=i[2*p+1];wg(d,f,t,e)<=l&&s.push(r[p]),(0===c?t-n<=d:e-n<=f)&&(a.push(h),a.push(p-1),a.push(1-c)),(0===c?t+n>=d:e+n>=f)&&(a.push(p+1),a.push(u),a.push(1-c))}return s}}function vg(t,e,n,r,i,o){if(i-r<=n)return;const a=r+i>>1;xg(t,e,a,r,i,o),vg(t,e,n,r,a-1,1-o),vg(t,e,n,a+1,i,1-o)}function xg(t,e,n,r,i,o){for(;i>r;){if(i-r>600){const a=i-r+1,s=n-r+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(s-a/2<0?-1:1);xg(t,e,n,Math.max(r,Math.floor(n-s*c/a+u)),Math.min(i,Math.floor(n+(a-s)*c/a+u)),o)}const a=e[2*n+o];let s=r,l=i;for(_g(t,e,r,n),e[2*i+o]>a&&_g(t,e,r,i);s<l;){for(_g(t,e,s,l),s++,l--;e[2*s+o]<a;)s++;for(;e[2*l+o]>a;)l--}e[2*r+o]===a?_g(t,e,r,l):(l++,_g(t,e,l,i)),l<=n&&(r=l+1),n<=l&&(i=l-1)}}function _g(t,e,n,r){bg(t,n,r),bg(e,2*n,2*r),bg(e,2*n+1,2*r+1)}function bg(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function wg(t,e,n,r){const i=t-n,o=e-r;return i*i+o*o}t.ARRAY_TYPE=us,t.AUTH_ERR_MSG=vt,t.Aabb=il,t.Actor=class{constructor(t,n,r){this.target=t,this.parent=n,this.mapId=r,this.callbacks={},this.cancelCallbacks={},z(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=X()?t:e,this.scheduler=new _f}send(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0;const a=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(n.metadata=o,this.callbacks[a]=n);const s=Z(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!n,targetMapId:r,mustQueue:i,sourceMapId:this.mapId,data:Ji(e,s)},s),{cancel:()=>{n&&delete this.callbacks[a],this.target.postMessage({id:a,type:"<cancel>",targetMapId:r,sourceMapId:this.mapId})}}}receive(t){const e=t.data,n=e.id;if(n&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){const t=this.cancelCallbacks[n];delete this.cancelCallbacks[n],t&&t.cancel()}else if(e.mustQueue||X()){const t=this.callbacks[n];this.cancelCallbacks[n]=this.scheduler.add((()=>this.processTask(n,e)),t&&t.metadata||{type:"message"})}else this.processTask(n,e)}processTask(t,e){if("<response>"===e.type){const n=this.callbacks[t];delete this.callbacks[t],n&&(e.error?n(Qi(e.error)):n(null,Qi(e.data)))}else{const n=Z(this.globalScope)?void 0:[],r=e.hasCallback?(e,r)=>{delete this.cancelCallbacks[t],this.target.postMessage({id:t,type:"<response>",sourceMapId:this.mapId,error:e?Ji(e):null,data:Ji(r,n)},n)}:t=>{},i=Qi(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,i,r);else if(this.parent.getWorkerSource){const t=e.type.split(".");this.parent.getWorkerSource(e.sourceMapId,t[0],i.source)[t[1]](i,r)}else r(new Error(`Could not find function ${e.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},t.CanonicalTileID=ph,t.Color=Oe,t.ColorMode=Kf,t.CullFaceMode=tg,t.DEMData=Wf,t.DataConstantProperty=Oo,t.DedupedRequest=fg,t.DepthMode=qf,t.EXTENT=ss,t.Elevation=class{isDataAvailableAtPoint(t){const e=this._source();if(this.isUsingMockSource()||!e||t.y<0||t.y>1)return!1;const n=e.getSource().maxzoom,r=1<<n,i=Math.floor(t.x),o=Math.floor((t.x-i)*r),a=Math.floor(t.y*r),s=this.findDEMTileFor(new fh(n,i,n,o,a));return!(!s||!s.dem)}getAtPointOrZero(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.getAtPoint(t,e)||0}getAtPoint(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.isUsingMockSource())return null;null==e&&(e=null);const r=this._source();if(!r)return e;if(t.y<0||t.y>1)return e;const i=r.getSource().maxzoom,o=1<<i,a=Math.floor(t.x),s=t.x-a,l=new fh(i,a,i,Math.floor(s*o),Math.floor(t.y*o)),c=this.findDEMTileFor(l);if(!c||!c.dem)return e;const u=c.dem,h=1<<c.tileID.canonical.z,p=(s*h-c.tileID.canonical.x)*u.dim,d=(t.y*h-c.tileID.canonical.y)*u.dim,f=Math.floor(p),g=Math.floor(d);return(n?this.exaggeration():1)*An(An(u.get(f,g),u.get(f,g+1),d-g),An(u.get(f+1,g),u.get(f+1,g+1),d-g),p-f)}getAtTileOffset(t,e,n){const r=1<<t.canonical.z;return this.getAtPointOrZero(new Jl(t.wrap+(t.canonical.x+e/ss)/r,(t.canonical.y+n/ss)/r))}getAtTileOffsetFunc(t,e,n,r){return i=>{const o=this.getAtTileOffset(t,i.x,i.y),a=r.upVector(t.canonical,i.x,i.y);return As(a,a,o*r.upVectorScale(t.canonical,e,n).metersToTile),a}}getForTilePoints(t,e,n,r){if(this.isUsingMockSource())return!1;const i=og.create(this,t,r);return!!i&&(e.forEach((t=>{t[2]=this.exaggeration()*i.getElevationAt(t[0],t[1],n)})),!0)}getMinMaxForTile(t){if(this.isUsingMockSource())return null;const e=this.findDEMTileFor(t);if(!e||!e.dem)return null;const n=e.dem.tree,r=e.tileID,i=1<<t.canonical.z-r.canonical.z;let o=t.canonical.x/i-r.canonical.x,a=t.canonical.y/i-r.canonical.y,s=0;for(let l=0;l<t.canonical.z-r.canonical.z&&!n.leaves[s];l++){o*=2,a*=2;const t=2*Math.floor(a)+Math.floor(o);s=n.childOffsets[s]+t,o%=1,a%=1}return{min:this.exaggeration()*n.minimums[s],max:this.exaggeration()*n.maximums[s]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(t,e,n){throw new Error("Pure virtual method called.")}pointCoordinate(t){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(t){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},t.ErrorEvent=Jt,t.EvaluationParameters=wo,t.Event=Kt,t.Evented=Qt,t.FillExtrusionBucket=th,t.Frustum=rl,t.FrustumCorners=nl,t.GLOBE_RADIUS=sl,t.GLOBE_SCALE_MATCH_LATITUDE=45,t.GLOBE_ZOOM_THRESHOLD_MAX=al,t.GLOBE_ZOOM_THRESHOLD_MIN=ol,t.GlobeSharedBuffers=class{constructor(t){this._createGrid(t),this._createPoles(t)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const t of this._poleSegments)t.destroy();for(const t of this._gridSegments)t.withSkirts.destroy(),t.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const t of this._wireframeSegments)t.destroy()}}_fillGridMeshWithLods(t,e){const n=new jo,r=new ra,i=[],o=t+1+2,a=e[0]+1,s=e[0]+1+(1+e.length),l=(t,e,n)=>{let r=t===o-1?t-2:0===t?t:t-1;return r+=n?24575:0,[r,e]};for(let c=0;c<o;++c)n.emplaceBack(...l(c,0,!0));for(let c=0;c<a;++c)for(let t=0;t<o;++t)n.emplaceBack(...l(t,c,(0===t||t===o-1)&&!0));for(let c=0;c<e.length;++c){const t=e[c];for(let e=0;e<o;++e)n.emplaceBack(...l(e,t,!0))}for(let c=0;c<e.length;++c){const t=r.length,a=e[c]+1+2,l=new ra;for(let n=0;n<a-1;n++){const t=n===a-2,i=t?o*(s-e.length+c-n):o;for(let e=0;e<o-1;e++){const a=n*o+e;0===n||t||0===e||e===o-2?(l.emplaceBack(a+1,a,a+i),l.emplaceBack(a+i,a+i+1,a+1)):(r.emplaceBack(a+1,a,a+i),r.emplaceBack(a+i,a+i+1,a+1))}}const u=as.simpleSegment(0,t,n.length,r.length-t);for(let e=0;e<l.uint16.length;e+=3)r.emplaceBack(l.uint16[e],l.uint16[e+1],l.uint16[e+2]);const h=as.simpleSegment(0,t,n.length,r.length-t);i.push({withoutSkirts:u,withSkirts:h})}return{vertices:n,indices:r,segments:i}}_createGrid(t){const e=this._fillGridMeshWithLods(cl,ul);this._gridSegments=e.segments,this._gridBuffer=t.createVertexBuffer(e.vertices,tl.members),this._gridIndexBuffer=t.createIndexBuffer(e.indices,!0)}_createPoles(t){const e=new ra;for(let i=0;i<=cl;i++)e.emplaceBack(0,i+1,i+2);this._poleIndexBuffer=t.createIndexBuffer(e,!0);const n=new sa,r=new sa;this._poleSegments=[];for(let i=0,o=0;i<ol;i++){const t=360/(1<<i);n.emplaceBack(0,-sl,0,.5,0),r.emplaceBack(0,-sl,0,.5,1);for(let e=0;e<=cl;e++){const i=e/cl,o=An(0,t,i),[a,s,l]=El(Fl,zl,o,sl);n.emplaceBack(a,s,l,i,0),r.emplaceBack(a,s,l,i,1)}this._poleSegments.push(as.simpleSegment(o,0,66,64)),o+=66}this._poleNorthVertexBuffer=t.createVertexBuffer(n,Js,!1),this._poleSouthVertexBuffer=t.createVertexBuffer(r,Js,!1)}getGridBuffers(t,e){return[this._gridBuffer,this._gridIndexBuffer,e?this._gridSegments[t].withSkirts:this._gridSegments[t].withoutSkirts]}getPoleBuffers(t){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[t]]}getWirefameBuffers(t,e){if(!this._wireframeSegments){const e=new ca,n=cl,r=n+1+2,i=1;this._wireframeSegments=[];for(let t=0,o=0;t<ul.length;t++){const a=ul[t];for(let t=i;t<a+i;t++)for(let o=i;o<n+i;o++){const n=t*r+o;e.emplaceBack(n,n+1),e.emplaceBack(n,n+r),e.emplaceBack(n,n+r+1)}const s=a*n*3;this._wireframeSegments.push(as.simpleSegment(0,o,(a+1)*r,s)),o+=s}this._wireframeIndexBuffer=t.createIndexBuffer(e)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[e]]}},t.GlyphManager=nd,t.ImagePosition=Cp,t.KDBush=yg,t.LivePerformanceUtils=$t,t.LngLat=Ul,t.LngLatBounds=ls,t.LocalGlyphMode=ed,t.MAX_MERCATOR_LATITUDE=Zl,t.MercatorCoordinate=Jl,t.ONE_EM=zh,t.OverscaledTileID=fh,t.PerformanceMarkers=Bt,t.Point=v,t.Properties=Ro,t.RGBAImage=Bc,t.Ray=el,t.RequestManager=class{constructor(t,e,n){this._transformRequestFn=t,this._customAccessToken=e,this._silenceAuthErrors=!!n,this._createSkuToken()}_createSkuToken(){const t=function(){let t="";for(let e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",h,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}normalizeStyleURL(t,e){if(!xt(t))return t;const n=Et(t);return n.path=`/styles/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||e)}normalizeGlyphsURL(t,e){if(!xt(t))return t;const n=Et(t);return n.path=`/fonts/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||e)}normalizeSourceURL(t,e,n,r){if(!xt(t))return t;const i=Et(t);return i.path=`/v4/${i.authority}.json`,i.params.push("secure"),n&&i.params.push(`language=${n}`),r&&i.params.push(`worldview=${r}`),this._makeAPIURL(i,this._customAccessToken||e)}normalizeSpriteURL(t,e,n,r){const i=Et(t);return xt(t)?(i.path=`/styles/v1${i.path}/sprite${e}${n}`,this._makeAPIURL(i,this._customAccessToken||r)):(i.path+=`${e}${n}`,kt(i))}normalizeTileURL(t,e,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!xt(t))return t;const r=Et(t);r.path=r.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${e||n&&"raster"!==r.authority&&512===n?"@2x":""}${o.supported?".webp":"$1"}`),"raster"===r.authority?r.path=`/${i.RASTER_URL_PREFIX}${r.path}`:(r.path=r.path.replace(/^.+\/v4\//,"/"),r.path=`/${i.TILE_URL_VERSION}${r.path}`);const a=this._customAccessToken||function(t){for(const e of t){const t=e.match(/^access_token=(.*)$/);if(t)return t[1]}return null}(r.params)||i.ACCESS_TOKEN;return i.REQUIRE_ACCESS_TOKEN&&a&&this._skuToken&&r.params.push(`sku=${this._skuToken}`),this._makeAPIURL(r,a)}canonicalizeTileURL(t,e){const n=Et(t);if(!n.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!n.path.match(/\.[\w]+$/))return t;let r="mapbox://";n.path.match(/^\/raster\/v1\//)?r+=`raster/${n.path.replace(`/${i.RASTER_URL_PREFIX}/`,"")}`:r+=`tiles/${n.path.replace(`/${i.TILE_URL_VERSION}/`,"")}`;let o=n.params;return e&&(o=o.filter((t=>!t.match(/^access_token=/)))),o.length&&(r+=`?${o.join("&")}`),r}canonicalizeTileset(t,e){const n=!!e&&xt(e),r=[];for(const i of t.tiles||[])_t(i)?r.push(this.canonicalizeTileURL(i,n)):r.push(i);return r}_makeAPIURL(t,e){const n="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",r=Et(i.API_URL);if(t.protocol=r.protocol,t.authority=r.authority,"http"===t.protocol){const e=t.params.indexOf("secure");e>=0&&t.params.splice(e,1)}if("/"!==r.path&&(t.path=`${r.path}${t.path}`),!i.REQUIRE_ACCESS_TOKEN)return kt(t);if(e=e||i.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error(`An API access token is required to use Mapbox GL. ${n}`);if("s"===e[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${n}`)}return t.params=t.params.filter((t=>-1===t.indexOf("access_token"))),t.params.push(`access_token=${e||""}`),kt(t)}},t.ResourceType=lt,t.SegmentVector=as,t.SourceCache=eg,t.StencilMode=Zf,t.StructArrayLayout1ui2=ua,t.StructArrayLayout2f1f2i16=ta,t.StructArrayLayout2i4=jo,t.StructArrayLayout2ui4=ca,t.StructArrayLayout3f12=na,t.StructArrayLayout3ui6=ra,t.StructArrayLayout4i8=Vo,t.StructArrayLayout5f20=sa,t.Texture=vf,t.Tile=Df,t.Transitionable=Eo,t.Uniform1f=Fa,t.Uniform1i=class extends Na{constructor(t){super(t),this.current=0}set(t,e,n){this.fetchUniformLocation(t,e)&&this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n))}},t.Uniform2f=class extends Na{constructor(t){super(t),this.current=[0,0]}set(t,e,n){this.fetchUniformLocation(t,e)&&(n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1])))}},t.Uniform3f=class extends Na{constructor(t){super(t),this.current=[0,0,0]}set(t,e,n){this.fetchUniformLocation(t,e)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2])))}},t.Uniform4f=za,t.UniformColor=Ba,t.UniformMatrix2f=class extends Na{constructor(t){super(t),this.current=Ua}set(t,e,n){if(this.fetchUniformLocation(t,e))for(let r=0;r<4;r++)if(n[r]!==this.current[r]){this.current=n,this.gl.uniformMatrix2fv(this.location,!1,n);break}}},t.UniformMatrix3f=class extends Na{constructor(t){super(t),this.current=ja}set(t,e,n){if(this.fetchUniformLocation(t,e))for(let r=0;r<9;r++)if(n[r]!==this.current[r]){this.current=n,this.gl.uniformMatrix3fv(this.location,!1,n);break}}},t.UniformMatrix4f=class extends Na{constructor(t){super(t),this.current=$a}set(t,e,n){if(this.fetchUniformLocation(t,e)){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(let t=1;t<16;t++)if(n[t]!==this.current[t]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break}}}},t.UnwrappedTileID=dh,t.ValidationError=ni,t.VectorTileFeature=Xu,t.VectorTileWorkerSource=class extends Qt{constructor(t,e,n,r,i){super(),this.actor=t,this.layerIndex=e,this.availableImages=n,this.loadVectorData=i||gg,this.loading={},this.loaded={},this.deduped=new fg(t.scheduler),this.isSpriteLoaded=r,this.scheduler=t.scheduler}loadTile(t,e){const n=t.uid,r=t&&t.request,i=r&&r.collectResourceTiming,o=this.loading[n]=new pg(t);o.abort=this.loadVectorData(t,((a,s)=>{const l=!this.loading[n];if(delete this.loading[n],l||a||!s)return o.status="done",l||(this.loaded[n]=o),e(a);const c=s.rawData,u={};s.expires&&(u.expires=s.expires),s.cacheControl&&(u.cacheControl=s.cacheControl),o.vectorTile=s.vectorTile||new Wu(new mp(c));const h=()=>{o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,((t,n)=>{if(t||!n)return e(t);const o={};if(i){const t=Vt(r);t.length>0&&(o.resourceTiming=JSON.parse(JSON.stringify(t)))}e(null,A({rawTileData:c.slice(0)},n,u,o))}))};this.isSpriteLoaded?h():this.once("isSpriteLoaded",(()=>{this.scheduler?this.scheduler.add(h,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom}):h()})),this.loaded=this.loaded||{},this.loaded[n]=o}))}reloadTile(t,e){const n=this.loaded,r=t.uid,i=this;if(n&&n[r]){const o=n[r];o.showCollisionBoxes=t.showCollisionBoxes,o.enableTerrain=!!t.enableTerrain,o.projection=t.projection,o.tileTransform=Pd(t.tileID.canonical,t.projection);const a=(t,n)=>{const r=o.reloadCallback;r&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerIndex,this.availableImages,i.actor,r)),e(t,n)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,a):a())}}abortTile(t,e){const n=t.uid,r=this.loading[n];r&&(r.abort&&r.abort(),delete this.loading[n]),e()}removeTile(t,e){const n=this.loaded,r=t.uid;n&&n[r]&&delete n[r],e()}},t.WritingMode=kp,t.ZoomDependentExpression=Jr,t.add=Ms,t.addDynamicAttributes=nf,t.adjoint=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8];return t[0]=a*u-s*c,t[1]=i*c-r*u,t[2]=r*s-i*a,t[3]=s*l-o*u,t[4]=n*u-i*l,t[5]=i*o-n*s,t[6]=o*c-a*l,t[7]=r*l-n*c,t[8]=n*a-r*o,t},t.asyncAll=P,t.bezier=E,t.bindAll=z,t.boundsAttributes=Of,t.bufferConvexPolygon=function(t,e){const n=[];for(let r=0;r<t.length;r++){const i=I(r-1,-1,t.length-1),o=I(r+1,-1,t.length-1),a=t[r],s=t[o],l=t[i].sub(a).unit(),c=s.sub(a).unit(),u=c.angleWithSep(l.x,l.y),h=l.add(c).unit().mult(-1*e/Math.sin(u/2));n.push(a.add(h))}return n},t.cacheEntryPossiblyAdded=function(t){st++,st>rt&&(t.getActor().send("enforceCacheSizeLimit",nt),st=0)},t.calculateGlobeLabelMatrix=function(t,e){const{x:n,y:r}=t.point,i=Al(n,r,t.worldSize/t._pixelsPerMercatorPixel,0,0);return gs(i,i,Ol(vl(e)))},t.calculateGlobeMatrix=function(t){const{x:e,y:n}=t.point,{lng:r,lat:i}=t._center;return Al(e,n,t.worldSize,r,i)},t.calculateGlobeMercatorMatrix=function(t){const e=t.pixelsPerMeter,n=e/Wl(1,t.center.lat),r=ds(new Float64Array(16));return ms(r,r,[t.point.x,t.point.y,0]),ys(r,r,[n,n,e]),Float32Array.from(r)},t.circumferenceAtLatitude=Vl,t.clamp=M,t.clearTileCache=function(t){if(!it())return;const n=e.caches.delete(Q);t&&n.catch(t).then((()=>t()))},t.clipLine=Zp,t.clone=function(t){var e=new us(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=U,t.collisionCircleLayout=Fh,t.config=i,t.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},t.create=function(){var t=new us(16);return us!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=hs,t.createExpression=Zr,t.createLayout=Bo,t.createStyleLayer=function(t){return"custom"===t.type?new ff(t):new yf[t.type](t)},t.cross=Ns,t.degToRad=b,t.distance=function(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1],e[2]-t[2])},t.div=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},t.dot=Ls,t.earthRadius=Bl,t.ease=k,t.easeCubicInOut=C,t.ecefToLatLng=function(t){let[e,n,r]=t;const i=Math.hypot(e,n,r),o=Math.atan2(e,r),a=.5*Math.PI-Math.acos(-n/i);return new Ul(w(o),w(a))},t.emitValidationErrors=Vi,t.endsWith=B,t.enforceCacheSizeLimit=function(t){ot(),tt&&tt.then((e=>{e.keys().then((n=>{for(let r=0;r<n.length-t;r++)e.delete(n[r])}))}))},t.evaluateSizeForFeature=jh,t.evaluateSizeForZoom=Uh,t.evaluateVariableOffset=vd,t.evented=vo,t.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},t.exactEquals$1=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},t.exported=qt,t.exported$1=o,t.extend=A,t.extend$1=ee,t.fillExtrusionHeightLift=sh,t.filterObject=j,t.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},t.fromQuat=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,l=i+i,c=n*a,u=r*a,h=r*s,p=i*a,d=i*s,f=i*l,g=o*a,m=o*s,y=o*l;return t[0]=1-h-f,t[1]=u+y,t[2]=p-m,t[3]=0,t[4]=u-y,t[5]=1-c-f,t[6]=d+g,t[7]=0,t[8]=p+m,t[9]=d-g,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.fromScaling=_s,t.furthestTileCorner=function(t){const e=Math.round((t+45+360)%360/90)%4;return S[e]},t.getAABBPointSquareDist=function(t,e,n){let r=0;for(let i=0;i<2;++i){const o=n?n[i]:0;t[i]>o&&(r+=(t[i]-o)*(t[i]-o)),e[i]<o&&(r+=(o-e[i])*(o-e[i]))}return r},t.getAnchorAlignment=zp,t.getAnchorJustification=_d,t.getBounds=function(t){let e=1/0,n=1/0,r=-1/0,i=-1/0;for(const o of t)e=Math.min(e,o.x),n=Math.min(n,o.y),r=Math.max(r,o.x),i=Math.max(i,o.y);return{min:new v(e,n),max:new v(r,i)}},t.getColumn=J,t.getDefaultExportFromCjs=p,t.getGridMatrix=function(t,e,n,r){const i=e.getNorth(),o=e.getSouth(),a=e.getWest(),s=e.getEast(),l=1<<t.z,c=s-a,u=i-o,h=c/cl,p=-u/ul[n],d=[0,h,0,p,0,0,i,a,0];if(t.z>0){const t=180/r;ps(d,d,[t/c+1,0,0,0,t/u+1,0,-.5*t/h,.5*t/p,1])}return d[2]=l,d[5]=t.x,d[8]=t.y,d},t.getImage=yt,t.getJSON=function(t,e){return ht(A(t,{type:"json"}),e)},t.getLatitudinalLod=function(t){const e=Zl-5;t=M(t,-e,e)/e*90;const n=Math.pow(Math.abs(Math.sin(b(t))),3);return Math.round(n*(ul.length-1))},t.getMapSessionAPI=Ft,t.getPerformanceMeasurement=Vt,t.getProjection=Kd,t.getRTLTextPluginStatus=xo,t.getReferrer=ut,t.getTilePoint=function(t,e){let{x:n,y:r}=e;return new v(((n-(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0))*t.scale-t.x)*ss,(r*t.scale-t.y)*ss)},t.getTileVec3=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ks(((e.x-n)*t.scale-t.x)*ss,(e.y*t.scale-t.y)*ss,Yl(e.z,e.y))},t.getVideo=function(t,n){const r=e.document.createElement("video");r.muted=!0,r.onloadstart=function(){n(null,r)};for(let i=0;i<t.length;i++){const n=e.document.createElement("source");dt(t[i])||(r.crossOrigin="Anonymous"),n.src=t[i],r.appendChild(n)}return{cancel:()=>{}}},t.globeCenterToScreenPoint=function(t){const e=[0,0,0],n=ds(new Float64Array(16));return gs(n,t.pixelMatrix,t.globeMatrix),Fs(e,e,n),new v(e[0],e[1])},t.globeDenormalizeECEF=Ol,t.globeECEFOrigin=function(t,e){const n=[0,0,0];return Fs(n,n,Pl(vl(e.canonical))),Fs(n,n,t),n},t.globeMetersToEcef=fl,t.globeNormalizeECEF=Pl,t.globePixelsToTileUnits=function(t,e){return ss/(512*Math.pow(2,t))*Tl(vl(e))},t.globePoleMatrixForTile=function(t,e,n){const r=ds(new Float64Array(16)),i=(e/(1<<t)-.5)*Math.PI*2;return xs(r,n.globeMatrix,i),Float32Array.from(r)},t.globeTileBounds=vl,t.globeTiltAtLngLat=Rl,t.globeToMercatorTransition=Dl,t.globeUseCustomAntiAliasing=function(t,e,n){const r=Dl(n.zoom),i=t.style.map._antialias,o=!!e.extStandardDerivatives,a=e.extStandardDerivativesForceOff||t.terrain&&t.terrain.exaggeration()>0;return 0===r&&!i&&!a&&o},t.identity=ds,t.identity$1=Xs,t.invert=fs,t.isFullscreen=function(){return!!e.document.fullscreenElement||!!e.document.webkitFullscreenElement},t.isLngLatBehindGlobe=Ll,t.isMapAuthenticated=function(t){return zt.has(t)},t.isMapboxURL=xt,t.isSafariWithAntialiasingBug=function(t){const e=t.navigator?t.navigator.userAgent:null;return!!Z(t)&&e&&(e.match("Version/15.4")||e.match("Version/15.5")||e.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},t.latFromMercatorY=ql,t.latLngToECEF=kl,t.len=Us,t.length=Es,t.length$1=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},t.lngFromMercatorX=Xl,t.loadVectorTile=gg,t.makeRequest=ht,t.mapValue=function(t,e,n,r,i){return M((t-e)/(n-e)*(i-r)+r,r,i)},t.mercatorScale=Kl,t.mercatorXfromLng=Hl,t.mercatorYfromLat=Gl,t.mercatorZfromAltitude=Wl,t.mul=ws,t.mul$1=js,t.multiply=gs,t.multiply$1=ps,t.multiply$2=Is,t.nextPowerOfTwo=N,t.normalize=Rs,t.normalize$1=Zs,t.normalize$2=Hs,t.number=An,t.ortho=function(t,e,n,r,i,o,a){var s=1/(e-n),l=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*l,t[14]=(a+o)*c,t[15]=1,t},t.pbf=qh,t.perspective=function(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=(i+r)*(o=1/(r-i)),t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t},t.pick=function(t,e){const n={};for(let r=0;r<e.length;r++){const i=e[r];i in t&&(n[i]=t[i])}return n},t.plugin=bo,t.pointGeometry=m,t.polesInViewport=function(t){const e=ds(new Float64Array(16));gs(e,t.pixelMatrix,t.globeMatrix);const n=[0,hl,0],r=[0,pl,0];return Fs(n,n,e),Fs(r,r,e),[n[0]>0&&n[0]<=t.width&&n[1]>0&&n[1]<=t.height&&!Ll(t,new Ul(t.center.lat,90)),r[0]>0&&r[0]<=t.width&&r[1]>0&&r[1]<=t.height&&!Ll(t,new Ul(t.center.lat,-90))]},t.polygonContainsPoint=_c,t.polygonIntersectsBox=bc,t.polygonIntersectsPolygon=hc,t.polygonizeBounds=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i=new v(n,n),o=t.sub(i),a=e.add(i),s=[o,new v(a.x,o.y),a,new v(o.x,a.y)];return r&&s.push(o.clone()),s},t.posAttributes=tl,t.postMapLoadEvent=Dt,t.postPerformanceEvent=Lt,t.postTurnstileEvent=Ot,t.potpack=wp,t.prevPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},t.radToDeg=w,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.registerForPluginStateChange=function(t){return t({pluginStatus:fo,pluginURL:go}),vo.on("pluginStateChange",t),t},t.removeAuthState=function(t){zt.delete(t)},t.renderColorRamp=jc,t.resample=tc,t.rotateX=vs,t.rotateX$1=qs,t.rotateY=xs,t.rotateY$1=Ys,t.rotateZ=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],c=e[4],u=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=a*i+u*r,t[2]=s*i+h*r,t[3]=l*i+p*r,t[4]=c*i-o*r,t[5]=u*i-a*r,t[6]=h*i-s*r,t[7]=p*i-l*r,t},t.rotateZ$1=function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=r*l+i*s,t[1]=i*l-r*s,t[2]=o*l+a*s,t[3]=a*l-o*s,t},t.scale=ys,t.scale$1=Vs,t.scale$2=As,t.scaleAndAdd=Ds,t.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},t.setCacheLimits=function(t,e){nt=t,rt=e},t.setColumn=function(t,e,n){t[4*e+0]=n[0],t[4*e+1]=n[1],t[4*e+2]=n[2],t[4*e+3]=n[3]},t.setRTLTextPlugin=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(fo===co||fo===uo||fo===ho)throw new Error("setRTLTextPlugin cannot be called multiple times.");go=qt.resolveURL(t),fo=co,po=e,yo(),n||_o()},t.smoothstep=T,t.spec=te,t.squaredLength=function(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r},t.storeAuthState=function(t,e){e?zt.add(t):zt.delete(t)},t.sub=$s,t.subtract=Ts,t.symbolSize=Vh,t.tileAABB=function(t,e,n,r,i,o,a,s,l){if("globe"===l.name)return wl(t,e,new ph(n,r,i));const c=Pd({z:n,x:r,y:i},l);return new il([(o+c.x/c.scale)*e,e*(c.y/c.scale),a],[(o+c.x2/c.scale)*e,e*(c.y2/c.scale),s])},t.tileCornersToBounds=Sl,t.tileTransform=Pd,t.transformMat3=function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t},t.transformMat4=Fs,t.transformMat4$1=Gs,t.transformQuat=zs,t.transitionTileAABBinECEF=_l,t.translate=ms,t.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},t.triggerPluginCompletionEvent=mo,t.uniqueId=R,t.updateGlobeVertexNormal=function(t,e,n,r,i){const o=5*e+2;t.float32[o+0]=n,t.float32[o+1]=r,t.float32[o+2]=i},t.validateCustomStyleLayer=function(t){const e=[],n=t.id;return void 0===n&&e.push({message:`layers.${n}: missing required property "id"`}),void 0===t.render&&e.push({message:`layers.${n}: missing required method "render"`}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),e},t.validateFilter=t=>Ui(Si(t)),t.validateFog=t=>Ui(Li(t)),t.validateLayer=t=>Ui(Ti(t)),t.validateLight=t=>Ui(Di(t)),t.validateSource=t=>Ui(Oi(t)),t.validateStyle=Bi,t.validateTerrain=t=>Ui(Ri(t)),t.values=O,t.vectorTile=Ru,t.version=n,t.warnOnce=H,t.window=e,t.wrap=I})),r(["./shared"],(function(t){function e(t){if("number"==typeof t||"boolean"==typeof t||"string"==typeof t||null==t)return JSON.stringify(t);if(Array.isArray(t)){let n="[";for(const r of t)n+=`${e(r)},`;return`${n}]`}let n="{";for(const r of Object.keys(t).sort())n+=`${r}:${e(t[r])},`;return`${n}}`}function n(n){let r="";for(const i of t.refProperties)r+=`/${e(n[i])}`;return r}class r{constructor(t){this.keyCache={},t&&this.replace(t)}replace(t){this._layerConfigs={},this._layers={},this.update(t,[])}update(e,r){for(const n of e)this._layerConfigs[n.id]=n,(this._layers[n.id]=t.createStyleLayer(n)).compileFilter(),this.keyCache[n.id]&&delete this.keyCache[n.id];for(const t of r)delete this.keyCache[t],delete this._layerConfigs[t],delete this._layers[t];this.familiesBySource={};const i=function(t,e){const r={};for(let o=0;o<t.length;o++){const i=e&&e[t[o].id]||n(t[o]);e&&(e[t[o].id]=i);let a=r[i];a||(a=r[i]=[]),a.push(t[o])}const i=[];for(const n in r)i.push(r[n]);return i}(t.values(this._layerConfigs),this.keyCache);for(const t of i){const e=t.map((t=>this._layers[t.id])),n=e[0];if("none"===n.visibility)continue;const r=n.source||"";let i=this.familiesBySource[r];i||(i=this.familiesBySource[r]={});const o=n.sourceLayer||"_geojsonTileLayer";let a=i[o];a||(a=i[o]=[]),a.push(e)}}}class i{loadTile(e,n){const{uid:r,encoding:i,rawImageData:o,padding:a,buildQuadTree:s}=e,l=t.window.ImageBitmap&&o instanceof t.window.ImageBitmap?this.getImageData(o,a):o;n(null,new t.DEMData(r,l,i,a<1,s))}getImageData(t,e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(t.width,t.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=t.width,this.offscreenCanvas.height=t.height,this.offscreenCanvasContext.drawImage(t,0,0,t.width,t.height);const n=this.offscreenCanvasContext.getImageData(-e,-e,t.width+2*e,t.height+2*e);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),n}}function o(t,e){if(0!==t.length){a(t[0],e);for(var n=1;n<t.length;n++)a(t[n],!e)}}function a(t,e){for(var n=0,r=0,i=0,o=t.length,a=o-1;i<o;a=i++){var s=(t[i][0]-t[a][0])*(t[a][1]+t[i][1]),l=n+s;r+=Math.abs(n)>=Math.abs(s)?n-l+s:s-l+n,n=l}n+r>=0!=!!e&&t.reverse()}var s=t.getDefaultExportFromCjs((function t(e,n){var r,i=e&&e.type;if("FeatureCollection"===i)for(r=0;r<e.features.length;r++)t(e.features[r],n);else if("GeometryCollection"===i)for(r=0;r<e.geometries.length;r++)t(e.geometries[r],n);else if("Feature"===i)t(e.geometry,n);else if("Polygon"===i)o(e.coordinates,n);else if("MultiPolygon"===i)for(r=0;r<e.coordinates.length;r++)o(e.coordinates[r],n);return e}));const l=t.VectorTileFeature.prototype.toGeoJSON;var c={exports:{}},u=t.pointGeometry,h=t.vectorTile.VectorTileFeature,p=d;function d(t,e){this.options=e||{},this.features=t,this.length=t.length}function f(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}d.prototype.feature=function(t){return new f(this.features[t],this.options.extent)},f.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var n=t[e],r=[],i=0;i<n.length;i++)r.push(new u(n[i][0],n[i][1]));this.geometry.push(r)}return this.geometry},f.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var l=a[s];e=Math.min(e,l.x),n=Math.max(n,l.x),r=Math.min(r,l.y),i=Math.max(i,l.y)}return[e,r,n,i]},f.prototype.toGeoJSON=h.prototype.toGeoJSON;var g=t.pbf,m=p;function y(t){var e=new g;return function(t,e){for(var n in t.layers)e.writeMessage(3,v,t.layers[n])}(t,e),e.finish()}function v(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)r.feature=t.feature(n),e.writeMessage(2,x,r);var i=r.keys;for(n=0;n<i.length;n++)e.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)e.writeMessage(4,C,o[n])}function x(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,_,t),e.writeVarintField(3,n.type),e.writeMessage(4,S,n)}function _(t,e){var n=t.feature,r=t.keys,i=t.values,o=t.keycache,a=t.valuecache;for(var s in n.properties){var l=n.properties[s],c=o[s];if(null!==l){void 0===c&&(r.push(s),o[s]=c=r.length-1),e.writeVarint(c);var u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var h=u+":"+l,p=a[h];void 0===p&&(i.push(l),a[h]=p=i.length-1),e.writeVarint(p)}}}function b(t,e){return(e<<3)+(7&t)}function w(t){return t<<1^t>>31}function S(t,e){for(var n=t.loadGeometry(),r=t.type,i=0,o=0,a=n.length,s=0;s<a;s++){var l=n[s],c=1;1===r&&(c=l.length),e.writeVarint(b(1,c));for(var u=3===r?l.length-1:l.length,h=0;h<u;h++){1===h&&1!==r&&e.writeVarint(b(2,u-1));var p=l[h].x-i,d=l[h].y-o;e.writeVarint(w(p)),e.writeVarint(w(d)),i+=p,o+=d}3===r&&e.writeVarint(b(7,1))}}function C(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}c.exports=y,c.exports.fromVectorTileJs=y,c.exports.fromGeojsonVt=function(t,e){e=e||{};var n={};for(var r in t)n[r]=new m(t[r].features,e),n[r].name=r,n[r].version=e.version,n[r].extent=e.extent;return y({layers:n})},c.exports.GeoJSONWrapper=m;var E=t.getDefaultExportFromCjs(c.exports);const k={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},M=Math.fround||(T=new Float32Array(1),t=>(T[0]=+t,T[0]));var T;const I=3,P=5,O=6;class A{constructor(t){this.options=Object.assign(Object.create(k),t),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(t){const{log:e,minZoom:n,maxZoom:r}=this.options;e&&console.time("total time");const i=`prepare ${t.length} points`;e&&console.time(i),this.points=t;const o=[];for(let s=0;s<t.length;s++){const e=t[s];if(!e.geometry)continue;const[n,r]=e.geometry.coordinates,i=M(L(n)),a=M(N(r));o.push(i,a,1/0,s,-1,1),this.options.reduce&&o.push(0)}let a=this.trees[r+1]=this._createTree(o);e&&console.timeEnd(i);for(let s=r;s>=n;s--){const t=+Date.now();a=this.trees[s]=this._createTree(this._cluster(a,s)),e&&console.log("z%d: %d clusters in %dms",s,a.numItems,+Date.now()-t)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let n=((t[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,t[1]));let i=180===t[2]?180:((t[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){const t=this.getClusters([n,r,180,o],e),a=this.getClusters([-180,r,i,o],e);return t.concat(a)}const a=this.trees[this._limitZoom(e)],s=a.range(L(n),N(o),L(i),N(r)),l=a.data,c=[];for(const u of s){const t=this.stride*u;c.push(l[t+P]>1?D(l,t,this.clusterProps):this.points[l[t+I]])}return c}getChildren(t){const e=this._getOriginId(t),n=this._getOriginZoom(t),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);const o=i.data;if(e*this.stride>=o.length)throw new Error(r);const a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=i.within(o[e*this.stride],o[e*this.stride+1],a),l=[];for(const c of s){const e=c*this.stride;o[e+4]===t&&l.push(o[e+P]>1?D(o,e,this.clusterProps):this.points[o[e+I]])}if(0===l.length)throw new Error(r);return l}getLeaves(t,e,n){const r=[];return this._appendLeaves(r,t,e=e||10,n=n||0,0),r}getTile(t,e,n){const r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),{extent:o,radius:a}=this.options,s=a/o,l=(n-s)/i,c=(n+1+s)/i,u={features:[]};return this._addTileFeatures(r.range((e-s)/i,l,(e+1+s)/i,c),r.data,e,n,i,u),0===e&&this._addTileFeatures(r.range(1-s/i,l,1,c),r.data,i,n,i,u),e===i-1&&this._addTileFeatures(r.range(0,l,s/i,c),r.data,-1,n,i,u),u.features.length?u:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e}_appendLeaves(t,e,n,r,i){const o=this.getChildren(e);for(const a of o){const e=a.properties;if(e&&e.cluster?i+e.point_count<=r?i+=e.point_count:i=this._appendLeaves(t,e.cluster_id,n,r,i):i<r?i++:t.push(a),t.length===n)break}return i}_createTree(e){const n=new t.KDBush(e.length/this.stride|0,this.options.nodeSize,Float32Array);for(let t=0;t<e.length;t+=this.stride)n.add(e[t],e[t+1]);return n.finish(),n.data=e,n}_addTileFeatures(t,e,n,r,i,o){for(const a of t){const t=a*this.stride,s=e[t+P]>1;let l,c,u;if(s)l=R(e,t,this.clusterProps),c=e[t],u=e[t+1];else{const n=this.points[e[t+I]];l=n.properties;const[r,i]=n.geometry.coordinates;c=L(r),u=N(i)}const h={type:1,geometry:[[Math.round(this.options.extent*(c*i-n)),Math.round(this.options.extent*(u*i-r))]],tags:l};let p;p=s||this.options.generateId?e[t+I]:this.points[e[t+I]].id,void 0!==p&&(h.id=p),o.features.push(h)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,e){const{radius:n,extent:r,reduce:i,minPoints:o}=this.options,a=n/(r*Math.pow(2,e)),s=t.data,l=[],c=this.stride;for(let u=0;u<s.length;u+=c){if(s[u+2]<=e)continue;s[u+2]=e;const n=s[u],r=s[u+1],h=t.within(s[u],s[u+1],a),p=s[u+P];let d=p;for(const t of h){const n=t*c;s[n+2]>e&&(d+=s[n+P])}if(d>p&&d>=o){let t,o=n*p,a=r*p,f=-1;const g=((u/c|0)<<5)+(e+1)+this.points.length;for(const n of h){const r=n*c;if(s[r+2]<=e)continue;s[r+2]=e;const l=s[r+P];o+=s[r]*l,a+=s[r+1]*l,s[r+4]=g,i&&(t||(t=this._map(s,u,!0),f=this.clusterProps.length,this.clusterProps.push(t)),i(t,this._map(s,r)))}s[u+4]=g,l.push(o/d,a/d,1/0,g,-1,d),i&&l.push(f)}else{for(let t=0;t<c;t++)l.push(s[u+t]);if(d>1)for(const t of h){const n=t*c;if(!(s[n+2]<=e)){s[n+2]=e;for(let t=0;t<c;t++)l.push(s[n+t])}}}}return l}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e,n){if(t[e+P]>1){const r=this.clusterProps[t[e+O]];return n?Object.assign({},r):r}const r=this.points[t[e+I]].properties,i=this.options.map(r);return n&&i===r?Object.assign({},i):i}}function D(t,e,n){return{type:"Feature",id:t[e+I],properties:R(t,e,n),geometry:{type:"Point",coordinates:[(r=t[e],360*(r-.5)),F(t[e+1])]}};var r}function R(t,e,n){const r=t[e+P],i=r>=1e4?`${Math.round(r/1e3)}k`:r>=1e3?Math.round(r/100)/10+"k":r,o=t[e+O],a=-1===o?{}:Object.assign({},n[o]);return Object.assign(a,{cluster:!0,cluster_id:t[e+I],point_count:r,point_count_abbreviated:i})}function L(t){return t/360+.5}function N(t){const e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function F(t){const e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function z(t,e,n,r){for(var i,o=r,a=n-e>>1,s=n-e,l=t[e],c=t[e+1],u=t[n],h=t[n+1],p=e+3;p<n;p+=3){var d=B(t[p],t[p+1],l,c,u,h);if(d>o)i=p,o=d;else if(d===o){var f=Math.abs(p-a);f<s&&(i=p,s=f)}}o>r&&(i-e>3&&z(t,e,i,r),t[i+2]=o,n-i>3&&z(t,i,n,r))}function B(t,e,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var l=((t-n)*a+(e-r)*s)/(a*a+s*s);l>1?(n=i,r=o):l>0&&(n+=a*l,r+=s*l)}return(a=t-n)*a+(s=e-r)*s}function $(t,e,n,r){var i={id:void 0===t?null:t,type:e,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)j(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<e.length;r++)j(t,e[r]);else if("MultiPolygon"===n)for(r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)j(t,e[r][i])}(i),i}function j(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function U(t,e,n,r){if(e.geometry){var i=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=e.id;if(n.promoteId?l=e.properties[n.promoteId]:n.generateId&&(l=r||0),"Point"===o)V(i,s);else if("MultiPoint"===o)for(var c=0;c<i.length;c++)V(i[c],s);else if("LineString"===o)H(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(c=0;c<i.length;c++)H(i[c],s=[],a,!1),t.push($(l,"LineString",s,e.properties));return}G(i,s,a,!1)}else if("Polygon"===o)G(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(c=0;c<e.geometry.geometries.length;c++)U(t,{id:l,geometry:e.geometry.geometries[c],properties:e.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<i.length;c++){var u=[];G(i[c],u,a,!0),s.push(u)}}t.push($(l,o,s,e.properties))}}function V(t,e){e.push(W(t[0])),e.push(X(t[1])),e.push(0)}function H(t,e,n,r){for(var i,o,a=0,s=0;s<t.length;s++){var l=W(t[s][0]),c=X(t[s][1]);e.push(l),e.push(c),e.push(0),s>0&&(a+=r?(i*c-l*o)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(c-o,2))),i=l,o=c}var u=e.length-3;e[2]=1,z(e,0,u,n),e[u+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function G(t,e,n,r){for(var i=0;i<t.length;i++){var o=[];H(t[i],o,n,r),e.push(o)}}function W(t){return t/360+.5}function X(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function q(t,e,n,r,i,o,a,s){if(r/=e,o>=(n/=e)&&a<r)return t;if(a<n||o>=r)return null;for(var l=[],c=0;c<t.length;c++){var u=t[c],h=u.geometry,p=u.type,d=0===i?u.minX:u.minY,f=0===i?u.maxX:u.maxY;if(d>=n&&f<r)l.push(u);else if(!(f<n||d>=r)){var g=[];if("Point"===p||"MultiPoint"===p)Y(h,g,n,r,i);else if("LineString"===p)Z(h,g,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===p)J(h,g,n,r,i,!1);else if("Polygon"===p)J(h,g,n,r,i,!0);else if("MultiPolygon"===p)for(var m=0;m<h.length;m++){var y=[];J(h[m],y,n,r,i,!0),y.length&&g.push(y)}if(g.length){if(s.lineMetrics&&"LineString"===p){for(m=0;m<g.length;m++)l.push($(u.id,p,g[m],u.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===g.length?(p="LineString",g=g[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===g.length?"Point":"MultiPoint"),l.push($(u.id,p,g,u.tags))}}}return l.length?l:null}function Y(t,e,n,r,i){for(var o=0;o<t.length;o+=3){var a=t[o+i];a>=n&&a<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function Z(t,e,n,r,i,o,a){for(var s,l,c=K(t),u=0===i?tt:et,h=t.start,p=0;p<t.length-3;p+=3){var d=t[p],f=t[p+1],g=t[p+2],m=t[p+3],y=t[p+4],v=0===i?d:f,x=0===i?m:y,_=!1;a&&(s=Math.sqrt(Math.pow(d-m,2)+Math.pow(f-y,2))),v<n?x>n&&(l=u(c,d,f,m,y,n),a&&(c.start=h+s*l)):v>r?x<r&&(l=u(c,d,f,m,y,r),a&&(c.start=h+s*l)):Q(c,d,f,g),x<n&&v>=n&&(l=u(c,d,f,m,y,n),_=!0),x>r&&v<=r&&(l=u(c,d,f,m,y,r),_=!0),!o&&_&&(a&&(c.end=h+s*l),e.push(c),c=K(t)),a&&(h+=s)}var b=t.length-3;d=t[b],f=t[b+1],g=t[b+2],(v=0===i?d:f)>=n&&v<=r&&Q(c,d,f,g),b=c.length-3,o&&b>=3&&(c[b]!==c[0]||c[b+1]!==c[1])&&Q(c,c[0],c[1],c[2]),c.length&&e.push(c)}function K(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function J(t,e,n,r,i,o){for(var a=0;a<t.length;a++)Z(t[a],e,n,r,i,o,!1)}function Q(t,e,n,r){t.push(e),t.push(n),t.push(r)}function tt(t,e,n,r,i,o){var a=(o-e)/(r-e);return t.push(o),t.push(n+(i-n)*a),t.push(1),a}function et(t,e,n,r,i,o){var a=(o-n)/(i-n);return t.push(e+(r-e)*a),t.push(o),t.push(1),a}function nt(t,e){for(var n=[],r=0;r<t.length;r++){var i,o=t[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=rt(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(rt(o.geometry[s],e))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var l=[],c=0;c<o.geometry[s].length;c++)l.push(rt(o.geometry[s][c],e));i.push(l)}n.push($(o.id,a,i,o.tags))}return n}function rt(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n}function it(t,e){if(t.transformed)return t;var n,r,i,o=1<<t.z,a=t.x,s=t.y;for(n=0;n<t.features.length;n++){var l=t.features[n],c=l.geometry,u=l.type;if(l.geometry=[],1===u)for(r=0;r<c.length;r+=2)l.geometry.push(ot(c[r],c[r+1],e,o,a,s));else for(r=0;r<c.length;r++){var h=[];for(i=0;i<c[r].length;i+=2)h.push(ot(c[r][i],c[r][i+1],e,o,a,s));l.geometry.push(h)}}return t.transformed=!0,t}function ot(t,e,n,r,i,o){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-o))]}function at(t,e,n,r,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,st(a,t[s],o,i);var l=t[s].minX,c=t[s].minY,u=t[s].maxX,h=t[s].maxY;l<a.minX&&(a.minX=l),c<a.minY&&(a.minY=c),u>a.maxX&&(a.maxX=u),h>a.maxY&&(a.maxY=h)}return a}function st(t,e,n,r){var i=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)lt(a,i,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)lt(a,i[s],t,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<i.length;l++){var c=i[l];for(s=0;s<c.length;s++)lt(a,c[s],t,n,!0,0===s)}if(a.length){var u=e.tags||null;if("LineString"===o&&r.lineMetrics){for(var h in u={},e.tags)u[h]=e.tags[h];u.mapbox_clip_start=i.start/i.size,u.mapbox_clip_end=i.end/i.size}var p={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:u};null!==e.id&&(p.id=e.id),t.features.push(p)}}function lt(t,e,n,r,i,o){var a=r*r;if(r>0&&e.size<(i?a:r))n.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===r||e[l+2]>a)&&(n.numSimplified++,s.push(e[l]),s.push(e[l+1])),n.numPoints++;i&&function(t,e){for(var n=0,r=0,i=t.length,o=i-2;r<i;o=r,r+=2)n+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(n>0===e)for(r=0,i=t.length;r<i/2;r+=2){var a=t[r],s=t[r+1];t[r]=t[i-2-r],t[r+1]=t[i-1-r],t[i-2-r]=a,t[i-1-r]=s}}(s,o),t.push(s)}}function ct(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)U(n,t.features[r],e,r);else U(n,"Feature"===t.type?t:{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=function(t,e){var n=e.buffer/e.extent,r=t,i=q(t,1,-1-n,n,0,-1,2,e),o=q(t,1,1-n,2+n,0,-1,2,e);return(i||o)&&(r=q(t,1,-n,1+n,0,-1,2,e)||[],i&&(r=nt(i,1).concat(r)),o&&(r=r.concat(nt(o,-1)))),r}(r,e),r.length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ut(t,e,n){return 32*((1<<t)*n+e)+t}function ht(e,n){const r=e.tileID.canonical;if(!this._geoJSONIndex)return n(null,null);const i=this._geoJSONIndex.getTile(r.z,r.x,r.y);if(!i)return n(null,null);const o=new class{constructor(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e}feature(e){return new class{constructor(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))}loadGeometry(){if(1===this._feature.type){const e=[];for(const n of this._feature.geometry)e.push([new t.Point(n[0],n[1])]);return e}{const e=[];for(const n of this._feature.geometry){const r=[];for(const e of n)r.push(new t.Point(e[0],e[1]));e.push(r)}return e}}toGeoJSON(t,e,n){return l.call(this,t,e,n)}}(this._features[e])}}(i.features);let a=E(o);0===a.byteOffset&&a.byteLength===a.buffer.byteLength||(a=new Uint8Array(a)),n(null,{vectorTile:o,rawData:a.buffer})}ct.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ct.prototype.splitTile=function(t,e,n,r,i,o,a){for(var s=[t,e,n,r],l=this.options,c=l.debug;s.length;){r=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var u=1<<e,h=ut(e,n,r),p=this.tiles[h];if(!p&&(c>1&&console.time("creation"),p=this.tiles[h]=at(t,e,n,r,l),this.tileCoords.push({z:e,x:n,y:r}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var d="z"+e;this.stats[d]=(this.stats[d]||0)+1,this.total++}if(p.source=t,i){if(e===l.maxZoom||e===i)continue;var f=1<<i-e;if(n!==Math.floor(o/f)||r!==Math.floor(a/f))continue}else if(e===l.indexMaxZoom||p.numPoints<=l.indexMaxPoints)continue;if(p.source=null,0!==t.length){c>1&&console.time("clipping");var g,m,y,v,x,_,b=.5*l.buffer/l.extent,w=.5-b,S=.5+b,C=1+b;g=m=y=v=null,x=q(t,u,n-b,n+S,0,p.minX,p.maxX,l),_=q(t,u,n+w,n+C,0,p.minX,p.maxX,l),t=null,x&&(g=q(x,u,r-b,r+S,1,p.minY,p.maxY,l),m=q(x,u,r+w,r+C,1,p.minY,p.maxY,l),x=null),_&&(y=q(_,u,r-b,r+S,1,p.minY,p.maxY,l),v=q(_,u,r+w,r+C,1,p.minY,p.maxY,l),_=null),c>1&&console.timeEnd("clipping"),s.push(g||[],e+1,2*n,2*r),s.push(m||[],e+1,2*n,2*r+1),s.push(y||[],e+1,2*n+1,2*r),s.push(v||[],e+1,2*n+1,2*r+1)}}},ct.prototype.getTile=function(t,e,n){var r=this.options,i=r.extent,o=r.debug;if(t<0||t>24)return null;var a=1<<t,s=ut(t,e=(e%a+a)%a,n);if(this.tiles[s])return it(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var l,c=t,u=e,h=n;!l&&c>0;)c--,u=Math.floor(u/2),h=Math.floor(h/2),l=this.tiles[ut(c,u,h)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",c,u,h),o>1&&console.time("drilling down"),this.splitTile(l.source,c,u,h,t,e,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?it(this.tiles[s],i):null):null};class pt extends t.VectorTileWorkerSource{constructor(t,e,n,r,i){super(t,e,n,r,ht),i&&(this.loadGeoJSON=i)}loadData(e,n){const r=e&&e.request,i=r&&r.collectResourceTiming;this.loadGeoJSON(e,((o,a)=>{if(o||!a)return n(o);if("object"!=typeof a)return n(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`));{s(a,!0);try{if(e.filter){const n=t.createExpression(e.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===n.result)throw new Error(n.value.map((t=>`${t.key}: ${t.message}`)).join(", "));const r=a.features.filter((t=>n.value.evaluate({zoom:0},t)));a={type:"FeatureCollection",features:r}}this._geoJSONIndex=e.cluster?new A(function(e){let{superclusterOptions:n,clusterProperties:r}=e;if(!r||!n)return n;const i={},o={},a={accumulated:null,zoom:0},s={properties:null},l=Object.keys(r);for(const c of l){const[e,n]=r[c],a=t.createExpression(n),s=t.createExpression("string"==typeof e?[e,["accumulated"],["get",c]]:e);i[c]=a.value,o[c]=s.value}return n.map=t=>{s.properties=t;const e={};for(const n of l)e[n]=i[n].evaluate(a,s);return e},n.reduce=(t,e)=>{s.properties=e;for(const n of l)a.accumulated=t[n],t[n]=o[n].evaluate(a,s)},n}(e)).load(a.features):function(t,e){return new ct(t,e)}(a,e.geojsonVtOptions)}catch(o){return n(o)}this.loaded={};const l={};if(i){const n=t.getPerformanceMeasurement(r);n&&(l.resourceTiming={},l.resourceTiming[e.source]=JSON.parse(JSON.stringify(n)))}n(null,l)}}))}reloadTile(t,e){const n=this.loaded;return n&&n[t.uid]?super.reloadTile(t,e):this.loadTile(t,e)}loadGeoJSON(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}}getClusterChildren(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}}getClusterLeaves(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}}}class dt{constructor(e){this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=t.getProjection({name:"mercator"}),this.workerSourceTypes={vector:t.VectorTileWorkerSource,geojson:pt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(t,e)=>{if(this.workerSourceTypes[t])throw new Error(`Worker source with name "${t}" already registered.`);this.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=e=>{if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}}clearCaches(t,e,n){delete this.layerIndexes[t],delete this.availableImages[t],delete this.workerSources[t],delete this.demWorkerSources[t],n()}checkIfReady(t,e,n){n()}setReferrer(t,e){this.referrer=e}spriteLoaded(e,n){this.isSpriteLoaded[e]=n;for(const r in this.workerSources[e]){const i=this.workerSources[e][r];for(const e in i)i[e]instanceof t.VectorTileWorkerSource&&(i[e].isSpriteLoaded=n,i[e].fire(new t.Event("isSpriteLoaded")))}}setImages(t,e,n){this.availableImages[t]=e;for(const r in this.workerSources[t]){const n=this.workerSources[t][r];for(const t in n)n[t].availableImages=e}n()}enableTerrain(t,e,n){this.terrain=e,n()}setProjection(e,n){this.projections[e]=t.getProjection(n)}setLayers(t,e,n){this.getLayerIndex(t).replace(e),n()}updateLayers(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()}loadTile(e,n,r){const i=this.enableTerrain?t.extend({enableTerrain:this.terrain},n):n;i.projection=this.projections[e]||this.defaultProjection,this.getWorkerSource(e,n.type,n.source).loadTile(i,r)}loadDEMTile(e,n,r){const i=this.enableTerrain?t.extend({buildQuadTree:this.terrain},n):n;this.getDEMWorkerSource(e,n.source).loadTile(i,r)}reloadTile(e,n,r){const i=this.enableTerrain?t.extend({enableTerrain:this.terrain},n):n;i.projection=this.projections[e]||this.defaultProjection,this.getWorkerSource(e,n.type,n.source).reloadTile(i,r)}abortTile(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)}removeTile(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)}removeSource(t,e,n){if(!this.workerSources[t]||!this.workerSources[t][e.type]||!this.workerSources[t][e.type][e.source])return;const r=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==r.removeSource?r.removeSource(e,n):n()}loadWorkerSource(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}}syncRTLPluginState(e,n,r){try{t.plugin.setState(n);const e=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=e){this.self.importScripts(e);const n=t.plugin.isParsed();r(n?void 0:new Error(`RTL Text Plugin failed to import scripts from ${e}`),n)}}catch(t){r(t.toString())}}getAvailableImages(t){let e=this.availableImages[t];return e||(e=[]),e}getLayerIndex(t){let e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new r),e}getWorkerSource(t,e,n){if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][n]){const r={send:(e,n,r,i,o,a)=>{this.actor.send(e,n,r,t,o,a)},scheduler:this.actor.scheduler};this.workerSources[t][e][n]=new this.workerSourceTypes[e](r,this.getLayerIndex(t),this.getAvailableImages(t),this.isSpriteLoaded[t])}return this.workerSources[t][e][n]}getDEMWorkerSource(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new i),this.demWorkerSources[t][e]}enforceCacheSizeLimit(e,n){t.enforceCacheSizeLimit(n)}getWorkerPerformanceMetrics(t,e,n){n(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new dt(self)),dt})),r(["./shared"],(function(t){function e(t,n){if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(!e(t[r],n[r]))return!1;return!0}return t===n}var n=r;function r(t){return!function(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var n=e.getImageData(0,0,1,1);return n&&n.width===t.width}()?(void 0===i[e=t&&t.failIfMajorPerformanceCaveat]&&(i[e]=function(t){var e,n=function(t){var e=document.createElement("canvas"),n=Object.create(r.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=t,e.getContext("webgl",n)||e.getContext("experimental-webgl",n)}(t);if(!n)return!1;try{e=n.createShader(n.VERTEX_SHADER)}catch(t){return!1}return!(!e||n.isContextLost())&&(n.shaderSource(e,"void main() {}"),n.compileShader(e),!0===n.getShaderParameter(e,n.COMPILE_STATUS))}(e)),i[e]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var e}(t)}var i={};function o(e,n,r){const i=t.window.document.createElement(e);return void 0!==n&&(i.className=n),r&&r.appendChild(i),i}function a(e,n,r){const i=t.window.document.createElementNS("http://www.w3.org/2000/svg",e);for(const t of Object.keys(n))i.setAttributeNS(null,t,n[t]);return r&&r.appendChild(i),i}r.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const s=t.window.document&&t.window.document.documentElement.style,l=s&&void 0!==s.userSelect?"userSelect":"WebkitUserSelect";let c;function u(){s&&l&&(c=s[l],s[l]="none")}function h(){s&&l&&(s[l]=c)}function p(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",p,!0)}function d(){t.window.addEventListener("click",p,!0),t.window.setTimeout((()=>{t.window.removeEventListener("click",p,!0)}),0)}function f(t,e){const n=t.getBoundingClientRect();return y(t,n,e)}function g(t,e){const n=t.getBoundingClientRect(),r=[];for(let i=0;i<e.length;i++)r.push(y(t,n,e[i]));return r}function m(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button}function y(e,n,r){const i=e.offsetWidth===n.width?1:e.offsetWidth/n.width;return new t.Point((r.clientX-n.left)*i,(r.clientY-n.top)*i)}function v(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*o-i*r;return a?(t[0]=o*(a=1/a),t[1]=-r*a,t[2]=-i*a,t[3]=n*a,t):null}function x(t){const{userImage:e}=t;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}class _ extends t.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:t,callback:e}of this.requestors)this._notify(t,e);this.requestors=[]}}hasImage(t){return!!this.getImage(t)}getImage(t){return this.images[t]}addImage(t,e){this._validate(t,e)&&(this.images[t]=e)}_validate(e,n){let r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "stretchX" value`))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "stretchY" value`))),r=!1),this._validateContent(n.content,n)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "content" value`))),r=!1),r}_validateStretch(t,e){if(!t)return!0;let n=0;for(const r of t){if(r[0]<n||r[1]<r[0]||e<r[1])return!1;n=r[1]}return!0}_validateContent(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))}updateImage(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0}removeImage(t){const e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t,e){let n=!0;if(!this.isLoaded())for(const r of t)this.images[r]||(n=!1);this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})}_notify(e,n){const r={};for(const i of e){this.images[i]||this.fire(new t.Event("styleimagemissing",{id:i}));const e=this.images[i];e?r[i]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf,version:e.version,stretchX:e.stretchX,stretchY:e.stretchY,content:e.content,hasRenderCallback:Boolean(e.userImage&&e.userImage.render)}:t.warnOnce(`Image "${i}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}n(null,r)}getPixelSize(){const{width:t,height:e}=this.atlasImage;return{width:t,height:e}}getPattern(e){const n=this.patterns[e],r=this.getImage(e);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{const n={w:r.data.width+2,h:r.data.height+2,x:0,y:0},i=new t.ImagePosition(n,r);this.patterns[e]={bin:n,position:i}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,n.RGBA),this.atlasTexture&&this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const t in this.patterns)e.push(this.patterns[t].bin);const{w:n,h:r}=t.potpack(e),i=this.atlasImage;i.resize({width:n||1,height:r||1});for(const o in this.patterns){const{bin:e}=this.patterns[o],n=e.x+1,r=e.y+1,a=this.images[o].data,s=a.width,l=a.height;t.RGBAImage.copy(a,i,{x:0,y:0},{x:n,y:r},{width:s,height:l}),t.RGBAImage.copy(a,i,{x:0,y:l-1},{x:n,y:r-1},{width:s,height:1}),t.RGBAImage.copy(a,i,{x:0,y:0},{x:n,y:r+l},{width:s,height:1}),t.RGBAImage.copy(a,i,{x:s-1,y:0},{x:n-1,y:r},{width:1,height:l}),t.RGBAImage.copy(a,i,{x:0,y:0},{x:n+s,y:r},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const e of t){if(this.callbackDispatchedThisFrame[e])continue;this.callbackDispatchedThisFrame[e]=!0;const t=this.images[e];x(t)&&this.updateImage(e,t)}}}const b=new t.Properties({anchor:new t.DataConstantProperty(t.spec.light.anchor),position:new class{constructor(){this.specification=t.spec.light.position}possiblyEvaluate(e,n){return function(e){let[n,r,i]=e;const o=t.degToRad(r+90),a=t.degToRad(i);return{x:n*Math.cos(o)*Math.sin(a),y:n*Math.sin(o)*Math.sin(a),z:n*Math.cos(a),azimuthal:r,polar:i}}(e.expression.evaluate(n))}interpolate(e,n,r){return{x:t.number(e.x,n.x,r),y:t.number(e.y,n.y,r),z:t.number(e.z,n.z,r),azimuthal:t.number(e.azimuthal,n.azimuthal,r),polar:t.number(e.polar,n.polar,r)}}},color:new t.DataConstantProperty(t.spec.light.color),intensity:new t.DataConstantProperty(t.spec.light.intensity)});class w extends t.Evented{constructor(e){super(),this._transitionable=new t.Transitionable(b),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(t.validateLight,e,n))for(const r in e){const n=e[r];t.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-11),n):this._transitionable.setValue(r,n)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(e,n,r){return(!r||!1!==r.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}const S=new t.Properties({source:new t.DataConstantProperty(t.spec.terrain.source),exaggeration:new t.DataConstantProperty(t.spec.terrain.exaggeration)});let C=class extends t.Evented{constructor(e,n){super(),this._transitionable=new t.Transitionable(S),this.set(e),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=n}get(){return this._transitionable.serialize()}set(e){for(const n in e){const r=e[n];t.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-11),r):this._transitionable.setValue(n,r)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}};function E(e,n,r,i){const o=t.smoothstep(45,65,r),[a,s]=k(e,i),l=t.length(n);let c=1-Math.min(1,Math.exp((l-a)/(s-a)*-6));return c*=c*c,c=Math.min(1,1.00747*c),c*o*e.alpha}function k(t,e){const n=.5/Math.tan(.5*e);return[t.range[0]+n,t.range[1]+n]}const M=new t.Properties({range:new t.DataConstantProperty(t.spec.fog.range),color:new t.DataConstantProperty(t.spec.fog.color),"high-color":new t.DataConstantProperty(t.spec.fog["high-color"]),"space-color":new t.DataConstantProperty(t.spec.fog["space-color"]),"horizon-blend":new t.DataConstantProperty(t.spec.fog["horizon-blend"]),"star-intensity":new t.DataConstantProperty(t.spec.fog["star-intensity"])});class T extends t.Evented{constructor(e,n){super(),this._transitionable=new t.Transitionable(M),this.set(e),this._transitioning=this._transitionable.untransitioned(),this._transform=n}get state(){const e=this._transform,n="globe"===e.projection.name,r=t.globeToMercatorTransition(e.zoom),i=this.properties.get("range"),o=[.5,3];return{range:n?[t.number(o[0],i[0],r),t.number(o[1],i[1],r)]:i,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(t.validateFog,e,n)){for(const n of Object.keys(t.spec.fog))e&&void 0===e[n]&&(e[n]=t.spec.fog[n].default);for(const n in e){const r=e[n];t.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-11),r):this._transitionable.setValue(n,r)}}}getOpacity(e){if(!this._transform.projection.supportsFog)return 0;const n=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:t.smoothstep(45,65,e))*n.a}getOpacityAtLatLng(e,n){return this._transform.projection.supportsFog?function(e,n,r){const i=t.MercatorCoordinate.fromLngLat(n),o=r.elevation?r.elevation.getAtPointOrZero(i):0,a=[i.x,i.y,o];return t.transformMat4(a,a,r.mercatorFogMatrix),E(e,a,r.pitch,r._fov)}(this.state,e,n):0}getFovAdjustedRange(t){return this._transform.projection.supportsFog?k(this.state,t):[0,1]}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(e,n,r){return(!r||!1!==r.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}class I{constructor(e,n){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=t.uniqueId();const r=this.workerPool.acquire(this.id);for(let t=0;t<r.length;t++){const e=new I.Actor(r[t],n,this.id);e.name=`Worker ${t}`,this.actors.push(e)}this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0}))}broadcast(e,n,r){t.asyncAll(this.actors,((t,r)=>{t.send(e,n,r)}),r=r||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((t=>{t.remove()})),this.actors=[],this.workerPool.release(this.id)}}function P(e,n,r){return n*(t.EXTENT/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}I.Actor=t.Actor;class O{constructor(t,e,n,r){this.screenBounds=t,this.cameraPoint=e,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=n,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,r)}static createFromScreenPoints(e,n){let r,i;if(e instanceof t.Point||"number"==typeof e[0]){const o=t.Point.convert(e);r=[o],i=n.isPointAboveHorizon(o)}else{const o=t.Point.convert(e[0]),a=t.Point.convert(e[1]);r=[o,a],i=t.polygonizeBounds(o,a).every((t=>n.isPointAboveHorizon(t)))}return new O(r,n.getCameraPoint(),i,n)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(e){return t.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],e)}bufferedCameraGeometry(e){const n=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new t.Point(1,1)):this.screenBounds[1],i=t.polygonizeBounds(n,r,0,!1);return this.cameraPoint.y>r.y&&(this.cameraPoint.x>n.x&&this.cameraPoint.x<r.x?i.splice(3,0,this.cameraPoint):this.cameraPoint.x>=r.x?i[2]=this.cameraPoint:this.cameraPoint.x<=n.x&&(i[3]=this.cameraPoint)),t.bufferConvexPolygon(i,e)}bufferedCameraGeometryGlobe(e){const n=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new t.Point(1,1)):this.screenBounds[1],i=t.polygonizeBounds(n,r,e),o=this.cameraPoint.clone();switch(3*((o.y>n.y)+(o.y>r.y))+((o.x>n.x)+(o.x>r.x))){case 0:i[0]=o,i[4]=o.clone();break;case 1:i.splice(1,0,o);break;case 2:i[1]=o;break;case 3:i.splice(4,0,o);break;case 5:i.splice(2,0,o);break;case 6:i[3]=o;break;case 7:i.splice(3,0,o);break;case 8:i[2]=o}return i}containsTile(e,n,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const o=e.queryPadding/n._pixelsPerMercatorPixel+1,a=r?this._bufferedCameraMercator(o,n):this._bufferedScreenMercator(o,n);let s=e.tileID.wrap+(a.unwrapped?i:0);const l=a.polygon.map((n=>t.getTilePoint(e.tileTransform,n,s)));if(!t.polygonIntersectsBox(l,0,0,t.EXTENT,t.EXTENT))return;s=e.tileID.wrap+(this.screenGeometryMercator.unwrapped?i:0);const c=this.screenGeometryMercator.polygon.map((n=>t.getTileVec3(e.tileTransform,n,s))),u=c.map((e=>new t.Point(e[0],e[1]))),h=n.getFreeCameraOptions().position||new t.MercatorCoordinate(0,0,0),p=t.getTileVec3(e.tileTransform,h,s),d=c.map((e=>{const n=t.sub(e,e,p);return t.normalize(n,n),new t.Ray(p,n)})),f=P(e,1,n.zoom)*n._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:u,tilespaceRays:d,bufferedTilespaceGeometry:l,bufferedTilespaceBounds:(g=t.getBounds(l),g.min.x=t.clamp(g.min.x,0,t.EXTENT),g.min.y=t.clamp(g.min.y,0,t.EXTENT),g.max.x=t.clamp(g.max.x,0,t.EXTENT),g.max.y=t.clamp(g.max.y,0,t.EXTENT),g),tile:e,tileID:e.tileID,pixelToTileUnitsFactor:f};var g}_bufferedScreenMercator(t,e){const n=R(t);if(this._screenRaycastCache[n])return this._screenRaycastCache[n];{let r;return r="globe"===e.projection.name?this._projectAndResample(this.bufferedScreenGeometry(t),e):{polygon:this.bufferedScreenGeometry(t).map((t=>e.pointCoordinate3D(t))),unwrapped:!0},this._screenRaycastCache[n]=r,r}}_bufferedCameraMercator(t,e){const n=R(t);if(this._cameraRaycastCache[n])return this._cameraRaycastCache[n];{let r;return r="globe"===e.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(t),e):{polygon:this.bufferedCameraGeometry(t).map((t=>e.pointCoordinate3D(t))),unwrapped:!0},this._cameraRaycastCache[n]=r,r}}_projectAndResample(e,n){const r=function(e,n){const r=t.multiply([],n.pixelMatrix,n.globeMatrix),i=[0,-t.GLOBE_RADIUS,0,1],o=[0,t.GLOBE_RADIUS,0,1],a=[0,0,0,1];t.transformMat4$1(i,i,r),t.transformMat4$1(o,o,r),t.transformMat4$1(a,a,r);const s=new t.Point(i[0]/i[3],i[1]/i[3]),l=new t.Point(o[0]/o[3],o[1]/o[3]),c=t.polygonContainsPoint(e,s)&&i[3]<a[3],u=t.polygonContainsPoint(e,l)&&o[3]<a[3];if(!c&&!u)return null;const h=function(t,e,n){for(let r=1;r<t.length;r++){const i=D(e.pointCoordinate3D(t[r-1]).x),o=D(e.pointCoordinate3D(t[r]).x);if(n<0){if(i<o)return{idx:r,t:-i/(o-1-i)}}else if(o<i)return{idx:r,t:(1-i)/(o+1-i)}}return null}(e,n,c?-1:1);if(!h)return null;const{idx:p,t:d}=h;let f=p>1?A(e.slice(0,p),n):[],g=p<e.length?A(e.slice(p),n):[];f=f.map((e=>new t.Point(D(e.x),e.y))),g=g.map((e=>new t.Point(D(e.x),e.y)));const m=[...f];0===m.length&&m.push(g[g.length-1]);const y=t.number(m[m.length-1].y,(0===g.length?f[0]:g[0]).y,d);let v;return v=c?[new t.Point(0,y),new t.Point(0,0),new t.Point(1,0),new t.Point(1,y)]:[new t.Point(1,y),new t.Point(1,1),new t.Point(0,1),new t.Point(0,y)],m.push(...v),0===g.length?m.push(f[0]):m.push(...g),{polygon:m.map((e=>new t.MercatorCoordinate(e.x,e.y))),unwrapped:!1}}(e,n);if(r)return r;const i=function(e,n){let r=!1,i=-1/0,o=0;for(let t=0;t<e.length-1;t++)e[t].x>i&&(i=e[t].x,o=t);for(let t=0;t<e.length-1;t++){const n=(o+t)%(e.length-1),i=e[n],a=e[n+1];Math.abs(i.x-a.x)>.5&&(i.x<a.x?(i.x+=1,0===n&&(e[e.length-1].x+=1)):(a.x+=1,n+1===e.length-1&&(e[0].x+=1)),r=!0)}const a=t.mercatorXfromLng(n.center.lng);return r&&a<Math.abs(a-1)&&e.forEach((t=>{t.x-=1})),{polygon:e,unwrapped:r}}(A(e,n).map((e=>new t.Point(D(e.x),e.y))),n);return{polygon:i.polygon.map((e=>new t.MercatorCoordinate(e.x,e.y))),unwrapped:i.unwrapped}}}function A(e,n){return t.resample(e,(t=>{const e=n.pointCoordinate3D(t);t.x=e.x,t.y=e.y}),1/256)}function D(t){return t<0?1+t%1:t%1}function R(t){return 100*t|0}function L(e,n,r,i,o){const a=function(r,i){if(r)return o(r);if(i){e.url&&i.tiles&&e.tiles&&delete e.tiles;const r=t.pick(t.extend(i,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);i.vector_layers&&(r.vectorLayers=i.vector_layers,r.vectorLayerIds=r.vectorLayers.map((t=>t.id))),r.tiles=n.canonicalizeTileset(r,e.url),o(null,r)}};return e.url?t.getJSON(n.transformRequest(n.normalizeSourceURL(e.url,null,r,i),t.ResourceType.Source),a):t.exported.frame((()=>a(null,e)))}class N{constructor(e,n,r){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=n||0,this.maxzoom=r||24}validateBounds(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(e){const n=Math.pow(2,e.z),r=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*n);return e.x>=r&&e.x<o&&e.y>=i&&e.y<a}}class F{constructor(t,e,n){this.context=t;const r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||e.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const z={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class B{constructor(t,e,n,r){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=r,this.context=t;const i=t.gl;this.buffer=i.createBuffer(),t.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||e.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,e){for(let n=0;n<this.attributes.length;n++){const r=e.attributes[this.attributes[n].name];void 0!==r&&t.enableVertexAttribArray(r)}}setVertexAttribPointers(t,e,n){for(let r=0;r<this.attributes.length;r++){const i=this.attributes[r],o=e.attributes[i.name];void 0!==o&&t.vertexAttribPointer(o,i.components,t[z[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ${constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class j extends ${getDefault(){return t.Color.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class U extends ${getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class V extends ${getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class H extends ${getDefault(){return[!0,!0,!0,!0]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class G extends ${getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class W extends ${getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class X extends ${getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class q extends ${getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class Y extends ${getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}}class Z extends ${getDefault(){return[0,1]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class K extends ${getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}}class J extends ${getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class Q extends ${getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}}class tt extends ${getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class et extends ${getDefault(){return t.Color.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class nt extends ${getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class rt extends ${getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}}class it extends ${getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class ot extends ${getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}let at,st=class extends ${getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}};class lt extends ${getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class ct extends ${getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class ut extends ${getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class ht extends ${getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class pt extends ${getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class dt extends ${getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class ft extends ${getDefault(){return null}set(t){const e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class gt extends ${constructor(t){super(t),this.vao=t.extVertexArrayObject}getDefault(){return null}set(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)}}class mt extends ${getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class yt extends ${getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class vt extends ${getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class xt extends ${constructor(t,e){super(t),this.context=t,this.parent=e}getDefault(){return null}}class _t extends xt{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class bt extends xt{attachment(){return this.gl.DEPTH_ATTACHMENT}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,this.attachment(),e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class wt extends bt{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class St{constructor(t,e,n,r){this.context=t,this.width=e,this.height=n;const i=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new _t(t,i),r&&(this.depthAttachment=new bt(t,i))}destroy(){const t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){const e=this.depthAttachment.get();e&&t.deleteRenderbuffer(e)}t.deleteFramebuffer(this.framebuffer)}}class Ct{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.gl=t,this.isWebGL2=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),e){const e=t;this.extVertexArrayObject={createVertexArrayOES:e.createVertexArray.bind(t),deleteVertexArrayOES:e.deleteVertexArray.bind(t),bindVertexArrayOES:e.bindVertexArray.bind(t)}}this.clearColor=new j(this),this.clearDepth=new U(this),this.clearStencil=new V(this),this.colorMask=new H(this),this.depthMask=new G(this),this.stencilMask=new W(this),this.stencilFunc=new X(this),this.stencilOp=new q(this),this.stencilTest=new Y(this),this.depthRange=new Z(this),this.depthTest=new K(this),this.depthFunc=new J(this),this.blend=new Q(this),this.blendFunc=new tt(this),this.blendColor=new et(this),this.blendEquation=new nt(this),this.cullFace=new rt(this),this.cullFaceSide=new it(this),this.frontFace=new ot(this),this.program=new st(this),this.activeTexture=new lt(this),this.viewport=new ct(this),this.bindFramebuffer=new ut(this),this.bindRenderbuffer=new ht(this),this.bindTexture=new pt(this),this.bindVertexBuffer=new dt(this),this.bindElementBuffer=new ft(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new gt(this),this.pixelStoreUnpack=new mt(this),this.pixelStoreUnpackPremultiplyAlpha=new yt(this),this.pixelStoreUnpackFlipY=new vt(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=t.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=t.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=t.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),e||(this.extTextureHalfFloat=t.getExtension("OES_texture_half_float")),(e||this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=e||t.getExtension("OES_standard_derivatives"),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,e){return new F(this,t,e)}createVertexBuffer(t,e,n){return new B(this,t,e,n)}createRenderbuffer(t,e,n){const r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),i}createFramebuffer(t,e,n){return new St(this,t,e,n)}clear(t){let{color:e,depth:n,stencil:r}=t;const i=this.gl;let o=0;e&&(o|=i.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(o|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),void 0!==r&&(o|=i.STENCIL_BUFFER_BIT,this.clearStencil.set(r),this.stencilMask.set(255)),i.clear(o)}setCullFace(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(n){e(n.blendFunction,t.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Et extends t.Evented{constructor(e,n,r,i){if(super(),this.id=e,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(n,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i),this._tileWorkers={},this._deduped=new t.DedupedRequest}load(e){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"}));const n=Array.isArray(this.map._language)?this.map._language.join():this.map._language,r=this.map._worldview;this._tileJSONRequest=L(this._options,this.map._requestManager,n,r,((i,o)=>{this._tileJSONRequest=null,this._loaded=!0,i?(n&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${n}`),r&&2!==r.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${r}`),this.fire(new t.ErrorEvent(i))):o&&(t.extend(this,o),o.bounds&&(this.tileBounds=new N(o.bounds,this.minzoom,this.maxzoom)),t.postTurnstileEvent(o.tiles,this.map._requestManager._customAccessToken),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))),e&&e(i)}))}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(t){return this._options.tiles=t,this.reload(),this}setUrl(t){return this.url=t,this._options.url=t,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return t.extend({},this._options)}loadTile(e,n){const r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),i={request:this.map._requestManager.transformRequest(r,t.ResourceType.Tile),data:void 0,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:e.isSymbolTile};if(i.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state)"loading"===e.state?e.reloadCallback=n:e.request=e.actor.send("reloadTile",i,o.bind(this));else if(e.actor=this._tileWorkers[r]=this._tileWorkers[r]||this.dispatcher.getActor(),this.dispatcher.ready)e.request=e.actor.send("loadTile",i,o.bind(this),void 0,!0);else{const n=t.loadVectorTile.call({deduped:this._deduped},i,((t,n)=>{t||!n?o.call(this,t):(i.data={cacheControl:n.cacheControl,expires:n.expires,rawData:n.rawData.slice(0)},e.actor&&e.actor.send("loadTile",i,o.bind(this),void 0,!0))}),!0);e.request={cancel:n}}function o(r,i){return delete e.request,e.aborted?n(null):r&&404!==r.status?n(r):(i&&i.resourceTiming&&(e.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&e.setExpiryData(i),e.loadVectorData(i,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id})}unloadTile(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class kt extends t.Evented{constructor(e,n,r,i){super(),this.id=e,this.dispatcher=r,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},n),t.extend(this,t.pick(n,["url","scheme","tileSize"]))}load(e){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=L(this._options,this.map._requestManager,null,null,((n,r)=>{this._tileJSONRequest=null,this._loaded=!0,n?this.fire(new t.ErrorEvent(n)):r&&(t.extend(this,r),r.bounds&&(this.tileBounds=new N(r.bounds,this.minzoom,this.maxzoom)),t.postTurnstileEvent(r.tiles),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))),e&&e(n)}))}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(t){return this._options.tiles=t,this.reload(),this}setUrl(t){return this.url=t,this._options.url=t,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return t.extend({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(e,n){const r=t.exported.devicePixelRatio>=2,i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),r,this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(i,t.ResourceType.Tile),((r,i,o,a)=>(delete e.request,e.aborted?(e.state="unloaded",n(null)):r?(e.state="errored",n(r)):i?(this.map._refreshExpiredTiles&&e.setExpiryData({cacheControl:o,expires:a}),e.setTexture(i,this.map.painter),e.state="loaded",t.cacheEntryPossiblyAdded(this.dispatcher),void n(null)):n(null))))}static loadTileData(t,e,n){t.setTexture(e,n)}static unloadTileData(t,e){t.texture&&e.saveTileTexture(t.texture)}abortTile(t,e){t.request&&(t.request.cancel(),delete t.request),e()}unloadTile(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function Mt(e,n,r,i,o,a,s,l){const c=[e,r,o,n,i,a,1,1,1],u=[s,l,1],h=t.adjoint([],c),[p,d,f]=t.transformMat3(u,u,t.transpose(h,h));return t.multiply$1(c,[p,0,0,0,d,0,0,0,f],c)}class Tt extends t.Evented{constructor(t,e,n,r){super(),this.id=t,this.dispatcher=n,this.coordinates=e.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=e,this._dirty=!1}load(e,n){this._loaded=n||!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),((n,r)=>{if(this._imageRequest=null,this._loaded=!0,n)this.fire(new t.ErrorEvent(n));else if(r){const{HTMLImageElement:n}=t.window;this.image=r instanceof n?t.exported.getImageData(r):r,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,e&&(this.coordinates=e),this._finishLoading()}}))}loaded(){return this._loaded}updateImage(t){return this.image&&t.url?(this._imageRequest&&t.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=t.url,this.load(t.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(e){this.coordinates=e,this._boundsArray=void 0;const n=e.map(t.MercatorCoordinate.fromLngLat);return this.tileID=function(e){let n=1/0,r=1/0,i=-1/0,o=-1/0;for(const t of e)n=Math.min(n,t.x),r=Math.min(r,t.y),i=Math.max(i,t.x),o=Math.max(o,t.y);const a=Math.max(i-n,o-r),s=Math.max(0,Math.floor(-Math.log(a)/Math.LN2)),l=Math.pow(2,s);return new t.CanonicalTileID(s,Math.floor((n+i)/2*l),Math.floor((r+o)/2*l))}(n),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(e){for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}if(this._boundsArray)return;const n=t.tileTransform(this.tileID,this.map.transform.projection),[r,i,o,a]=this.coordinates.map((e=>{const r=n.projection.project(e[0],e[1]);return t.getTilePoint(n,r)._round()}));this.perspectiveTransform=function(e,n,r,i,o,a,s,l,c,u){const h=Mt(0,0,e,0,0,n,e,n),p=Mt(r,i,o,a,s,l,c,u);return t.multiply$1(p,t.adjoint(h,h),p),[p[6]/p[8]*e/t.EXTENT,p[7]/p[8]*n/t.EXTENT]}(this.width,this.height,r.x,r.y,i.x,i.y,a.x,a.y,o.x,o.y);const s=this._boundsArray=new t.StructArrayLayout4i8;s.emplaceBack(r.x,r.y,0,0),s.emplaceBack(i.x,i.y,t.EXTENT,0),s.emplaceBack(a.x,a.y,0,t.EXTENT),s.emplaceBack(o.x,o.y,t.EXTENT,t.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=e.createVertexBuffer(s,t.boundsAttributes.members),this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const e=this.map.painter.context,n=e.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new t.Texture(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(e)}loadTile(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const It={vector:Et,raster:kt,"raster-dem":class extends kt{constructor(e,n,r,i){super(e,n,r,i),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox"}loadTile(e,n){const r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function i(t,r){t&&(e.state="errored",n(t)),r&&(e.dem=r,e.dem.onDeserialize(),e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0,e.state="loaded",n(null))}e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),function(r,o,a,s){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(r)e.state="errored",n(r);else if(o){this.map._refreshExpiredTiles&&e.setExpiryData({cacheControl:a,expires:s});const n=t.window.ImageBitmap&&o instanceof t.window.ImageBitmap&&(null==at&&(at=t.window.OffscreenCanvas&&new t.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof t.window.createImageBitmap),at),r=1-(o.width-t.prevPowerOfTwo(o.width))/2;r<1||e.neighboringTiles||(e.neighboringTiles=this._getNeighboringTiles(e.tileID));const l=n?o:t.exported.getImageData(o,r),c={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:l,encoding:this.encoding,padding:r};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",c,i.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(e){const n=e.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?e.wrap-1:e.wrap,a=(n.x+1+r)%r,s=n.x+1===r?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(l[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),l}unloadTile(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded"}},geojson:class extends t.Evented{constructor(e,n,r,i){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=r.getActor(),this.setEventedParent(i),this._data=n.data,this._options=t.extend({},n),this._collectResourceTiming=n.collectResourceTiming,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;const o=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*o,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*o,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?n.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:t.EXTENT,radius:(void 0!==n.clusterRadius?n.clusterRadius:50)*o,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions)}onAdd(t){this.map=t,this.setData(this._data)}setData(t){return this._data=t,this._updateWorkerData(),this}getClusterExpansionZoom(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this}getClusterChildren(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this}getClusterLeaves(t,e,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},r),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new t.Event("dataloading",{dataType:"source"})),this._loaded=!1;const e=t.extend({},this.workerOptions),n=this._data;"string"==typeof n?(e.request=this.map._requestManager.transformRequest(t.exported.resolveURL(n),t.ResourceType.Source),e.request.collectResourceTiming=this._collectResourceTiming):e.data=JSON.stringify(n),this._pendingLoad=this.actor.send(`${this.type}.loadData`,e,((e,n)=>{if(this._loaded=!0,this._pendingLoad=null,e)this.fire(new t.ErrorEvent(e));else{const e={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&n&&n.resourceTiming&&n.resourceTiming[this.id]&&(e.resourceTiming=n.resourceTiming[this.id]),this.fire(new t.Event("data",e)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)}))}loaded(){return this._loaded}loadTile(e,n){const r=e.actor?"reloadTile":"loadTile";e.actor=this.actor,e.request=this.actor.send(r,{type:this.type,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},((t,i)=>(delete e.request,e.unloadVectorData(),e.aborted?n(null):t?n(t):(e.loadVectorData(i,this.map.painter,"reloadTile"===r),n(null)))),void 0,"loadTile"===r)}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0}unloadTile(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return t.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Tt{constructor(t,e,n,r){super(t,e,n,r),this.roundZoom=!0,this.type="video",this.options=e}load(){this._loaded=!1;const e=this.options;this.urls=[];for(const n of e.urls)this.urls.push(this.map._requestManager.transformRequest(n,t.ResourceType.Source).url);t.getVideo(this.urls,((e,n)=>{this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):n&&(this.video=n,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${n.start(0)} and ${n.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const e=this.map.painter.context,n=e.gl;this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(e)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Tt,canvas:class extends Tt{constructor(e,n,r,i){super(e,n,r,i),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some((t=>!Array.isArray(t)||2!==t.length||t.some((t=>"number"!=typeof t))))||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const n=this.map.painter.context;this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(n,this.canvas,n.gl.RGBA,{premultiply:!0}),this._prepareData(n)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}},custom:class extends t.Evented{constructor(e,n,r,i){super(),this.id=e,this.type="custom",this._dataType="raster",this._dispatcher=r,this._implementation=n,this.setEventedParent(i),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new t.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new t.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new N(this._implementation.bounds,this.minzoom,this.maxzoom)),n.update=this._update.bind(this),n.clearTiles=this._clearTiles.bind(this),n.coveringTiles=this._coveringTiles.bind(this),t.extend(this,t.pick(n,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return t.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(e){this._map=e,this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(e),this.load()}onRemove(t){this._implementation.onRemove&&this._implementation.onRemove(t)}hasTile(t){if(this._implementation.hasTile){const{x:e,y:n,z:r}=t.canonical;return this._implementation.hasTile({x:e,y:n,z:r})}return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(e,n){const{x:r,y:i,z:o}=e.tileID.canonical,a=new t.window.AbortController;e.request=Promise.resolve(this._implementation.loadTile({x:r,y:i,z:o},{signal:a.signal})).then(function(r){return delete e.request,e.aborted?(e.state="unloaded",n(null)):void 0===r?(e.state="errored",n(null)):null===r?(this.loadTileData(e,{width:this.tileSize,height:this.tileSize,data:null}),e.state="loaded",n(null)):function(e){return e instanceof t.window.ImageData||e instanceof t.window.HTMLCanvasElement||e instanceof t.window.ImageBitmap||e instanceof t.window.HTMLImageElement}(r)?(this.loadTileData(e,r),e.state="loaded",void n(null)):(e.state="errored",n(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch((t=>{20!==t.code&&(e.state="errored",n(t))})),e.request.cancel=()=>a.abort()}loadTileData(t,e){kt.loadTileData(t,e,this._map.painter)}unloadTileData(t){kt.unloadTileData(t,this._map.painter)}unloadTile(t,e){if(this.unloadTileData(t),this._implementation.unloadTile){const{x:e,y:n,z:r}=t.tileID.canonical;this._implementation.unloadTile({x:e,y:n,z:r})}e()}abortTile(t,e){t.request&&t.request.cancel&&(t.request.cancel(),delete t.request),e()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((t=>({x:t.canonical.x,y:t.canonical.y,z:t.canonical.z})))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Pt=function(e,n,r,i){const o=new It[n.type](e,n,r,i);if(o.id!==e)throw new Error(`Expected Source id to be ${e} instead of ${o.id}`);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o};function Ot(e,n){const r=t.identity([]);return t.scale(r,r,[.5*e.width,.5*-e.height,1]),t.translate(r,r,[1,-1,0]),t.multiply(r,r,e.calculateProjMatrix(n.toUnwrapped())),Float32Array.from(r)}function At(t,e,n,r,i,o,a){let s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=t.tilesIn(r,a,s);l.sort(Rt);const c=[];for(const h of l)c.push({wrappedTileID:h.tile.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(e,n,t._state,h,i,o,Ot(t.transform,h.tile.tileID),s)});const u=function(t){const e={},n={};for(const r of t){const t=r.queryResults,i=r.wrappedTileID,o=n[i]=n[i]||{};for(const n in t){const r=t[n],i=o[n]=o[n]||{},a=e[n]=e[n]||[];for(const t of r)i[t.featureIndex]||(i[t.featureIndex]=!0,a.push(t))}}return e}(c);for(const h in u)u[h].forEach((e=>{const n=e.feature,r=n.layer;r&&"background"!==r.type&&"sky"!==r.type&&(n.source=r.source,r["source-layer"]&&(n.sourceLayer=r["source-layer"]),n.state=void 0!==n.id?t.getFeatureState(r["source-layer"],n.id):{})}));return u}function Dt(t,e){const n=t.getRenderableIds().map((e=>t.getTileByID(e))),r=[],i={};for(let o=0;o<n.length;o++){const t=n[o],a=t.tileID.canonical.key;i[a]||(i[a]=!0,t.querySourceFeatures(r,e))}return r}function Rt(t,e){const n=t.tileID,r=e.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}function Lt(){return null!=po.workerClass?new po.workerClass:new t.window.Worker(po.workerUrl)}const Nt="mapboxgl_preloaded_worker_pool";class Ft{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<Ft.workerCount;)this.workers.push(new Lt);return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((t=>{t.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Nt]}numActive(){return Object.keys(this.active).length}}let zt;function Bt(){return zt||(zt=new Ft),zt}function $t(e,n){const r={};for(const t in e)"ref"!==t&&(r[t]=e[t]);return t.refProperties.forEach((t=>{t in n&&(r[t]=n[t])})),r}function jt(t){t=t.slice();const e=Object.create(null);for(let n=0;n<t.length;n++)e[t[n].id]=t[n];for(let n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=$t(t[n],e[t[n].ref]));return t}Ft.workerCount=2;const Ut={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Vt(t,e,n){n.push({command:Ut.addSource,args:[t,e[t]]})}function Ht(t,e,n){e.push({command:Ut.removeSource,args:[t]}),n[t]=!0}function Gt(t,e,n,r){Ht(t,n,r),Vt(t,e,n)}function Wt(t,n,r){let i;for(i in t[r])if(t[r].hasOwnProperty(i)&&"data"!==i&&!e(t[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!e(t[r][i],n[r][i]))return!1;return!0}function Xt(t,n,r,i,o,a){let s;for(s in n=n||{},t=t||{})t.hasOwnProperty(s)&&(e(t[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}));for(s in n)n.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(e(t[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}))}function qt(t){return t.id}function Yt(t,e){return t[e.id]=e,t}class Zt{constructor(t,e){this.reset(t,e)}reset(t,e){this.points=t||[],this._distances=[0];for(let n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);let n=1,r=this._distances[n];const i=e*this.paddedLength+this.padding;for(;r<i&&n<this._distances.length;)r=this._distances[++n];const o=n-1,a=this._distances[o],s=r-a,l=s>0?(i-a)/s:0;return this.points[o].mult(1-l).add(this.points[n].mult(l))}}class Kt{constructor(t,e,n){const r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(let o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}insertCircle(t,e,n,r){this._forEachCell(e-r,n-r,e+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(r)}_insertBoxCell(t,e,n,r,i,o){this.boxCells[i].push(o)}_insertCircleCell(t,e,n,r,i,o){this.circleCells[i].push(o)}_query(t,e,n,r,i,o){if(n<0||t>this.width||r<0||e>this.height)return!i&&[];const a=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(let t=0;t<this.boxKeys.length;t++)a.push({key:this.boxKeys[t],x1:this.bboxes[4*t],y1:this.bboxes[4*t+1],x2:this.bboxes[4*t+2],y2:this.bboxes[4*t+3]});for(let t=0;t<this.circleKeys.length;t++){const e=this.circles[3*t],n=this.circles[3*t+1],r=this.circles[3*t+2];a.push({key:this.circleKeys[t],x1:e-r,y1:n-r,x2:e+r,y2:n+r})}return o?a.filter(o):a}return this._forEachCell(t,e,n,r,this._queryCell,a,{hitTest:i,seenUids:{box:{},circle:{}}},o),i?a.length>0:a}_queryCircle(t,e,n,r,i){const o=t-n,a=t+n,s=e-n,l=e+n;if(a<0||o>this.width||l<0||s>this.height)return!r&&[];const c=[];return this._forEachCell(o,s,a,l,this._queryCellCircle,c,{hitTest:r,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}},i),r?c.length>0:c}query(t,e,n,r,i){return this._query(t,e,n,r,!1,i)}hitTest(t,e,n,r,i){return this._query(t,e,n,r,!0,i)}hitTestCircle(t,e,n,r){return this._queryCircle(t,e,n,!0,r)}_queryCell(t,e,n,r,i,o,a,s){const l=a.seenUids,c=this.boxCells[i];if(null!==c){const i=this.bboxes;for(const u of c)if(!l.box[u]){l.box[u]=!0;const c=4*u;if(t<=i[c+2]&&e<=i[c+3]&&n>=i[c+0]&&r>=i[c+1]&&(!s||s(this.boxKeys[u]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[u],x1:i[c],y1:i[c+1],x2:i[c+2],y2:i[c+3]})}}}const u=this.circleCells[i];if(null!==u){const i=this.circles;for(const c of u)if(!l.circle[c]){l.circle[c]=!0;const u=3*c;if(this._circleAndRectCollide(i[u],i[u+1],i[u+2],t,e,n,r)&&(!s||s(this.circleKeys[c]))){if(a.hitTest)return o.push(!0),!0;{const t=i[u],e=i[u+1],n=i[u+2];o.push({key:this.circleKeys[c],x1:t-n,y1:e-n,x2:t+n,y2:e+n})}}}}}_queryCellCircle(t,e,n,r,i,o,a,s){const l=a.circle,c=a.seenUids,u=this.boxCells[i];if(null!==u){const t=this.bboxes;for(const e of u)if(!c.box[e]){c.box[e]=!0;const n=4*e;if(this._circleAndRectCollide(l.x,l.y,l.radius,t[n+0],t[n+1],t[n+2],t[n+3])&&(!s||s(this.boxKeys[e])))return o.push(!0),!0}}const h=this.circleCells[i];if(null!==h){const t=this.circles;for(const e of h)if(!c.circle[e]){c.circle[e]=!0;const n=3*e;if(this._circlesCollide(t[n],t[n+1],t[n+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[e])))return o.push(!0),!0}}}_forEachCell(t,e,n,r,i,o,a,s){const l=this._convertToXCellCoord(t),c=this._convertToYCellCoord(e),u=this._convertToXCellCoord(n),h=this._convertToYCellCoord(r);for(let p=l;p<=u;p++)for(let l=c;l<=h;l++)if(i.call(this,t,e,n,r,this.xCellCount*l+p,o,a,s))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,e,n,r,i,o){const a=r-t,s=i-e,l=n+o;return l*l>a*a+s*s}_circleAndRectCollide(t,e,n,r,i,o,a){const s=(o-r)/2,l=Math.abs(t-(r+s));if(l>s+n)return!1;const c=(a-i)/2,u=Math.abs(e-(i+c));if(u>c+n)return!1;if(l<=s||u<=c)return!0;const h=l-s,p=u-c;return h*h+p*p<=n*n}}const Jt={unknown:0,flipRequired:1,flipNotRequired:2},Qt=Math.tan(85*Math.PI/180);function te(e,n,r,i,o,a,s){const l=t.create();if(r)if("globe"===a.name){const e=t.calculateGlobeLabelMatrix(o,n);t.multiply(l,l,e)}else{const e=v([],s);l[0]=e[0],l[1]=e[1],l[4]=e[2],l[5]=e[3],i||t.rotateZ(l,l,o.angle)}else t.multiply(l,o.labelPlaneMatrix,e);return l}function ee(t,e,n,r,i,o,a){const s=te(t,e,n,r,i,o,a);return"globe"===o.name&&n||(s[2]=s[6]=s[10]=s[14]=0),s}function ne(e,n,r,i,o,a,s){if(r){if("globe"===a.name){const l=te(e,n,r,i,o,a,s);return t.invert(l,l),t.multiply(l,e,l),l}{const n=t.clone(e),r=t.identity([]);return r[0]=s[0],r[1]=s[1],r[4]=s[2],r[5]=s[3],t.multiply(n,n,r),i||t.rotateZ(n,n,-o.angle),n}}return o.glCoordMatrix}function re(e,n,r,i){const o=[e,n,r,1];r?t.transformMat4$1(o,o,i):fe(o,o,i);const a=o[3];return o[0]/=a,o[1]/=a,o[2]/=a,o}function ie(t,e){return Math.min(.5+t/e*.5,1.5)}function oe(t,e){const n=t[0]/t[3],r=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&r>=-e[1]&&r<=e[1]}function ae(e,n,r,i,o,a,s,l,c,u){const h=r.transform,p=i?e.textSizeData:e.iconSizeData,d=t.evaluateSizeForZoom(p,r.transform.zoom),f="globe"===h.projection.name,g=[256/r.width*2+1,256/r.height*2+1],m=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;m.clear();let y=null;f&&(y=i?e.text.globeExtVertexArray:e.icon.globeExtVertexArray);const v=e.lineVertexArray,x=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,_=r.transform.width/r.transform.height;let b,w=!1;for(let S=0;S<x.length;S++){const i=x.get(S),{numGlyphs:f,writingMode:C}=i;if(C!==t.WritingMode.vertical||w||b===t.WritingMode.horizontal||(w=!0),b=C,(i.hidden||C===t.WritingMode.vertical)&&!w){de(f,m);continue}w=!1;const E=new t.Point(i.tileAnchorX,i.tileAnchorY);let{x:k,y:M,z:T}=h.projection.projectTilePoint(E.x,E.y,u.canonical);if(c){const[t,e,n]=c(E);k+=t,M+=e,T+=n}const I=[k,M,T,1];if(t.transformMat4$1(I,I,n),!oe(I,g)){de(f,m);continue}const P=ie(r.transform.cameraToCenterDistance,I[3]),O=t.evaluateSizeForFeature(p,d,i),A=s?O/P:O*P,D=re(k,M,T,o);if(D[3]<=0){de(f,m);continue}let R={};const L=s?null:c,N=ce(i,A,!1,l,n,o,a,e.glyphOffsetArray,v,m,y,D,E,R,_,L,h.projection,u,s);w=N.useVertical,L&&N.needsFlipping&&(R={}),(N.notEnoughRoom||w||N.needsFlipping&&ce(i,A,!0,l,n,o,a,e.glyphOffsetArray,v,m,y,D,E,R,_,L,h.projection,u,s).notEnoughRoom)&&de(f,m)}i?(e.text.dynamicLayoutVertexBuffer.updateData(m),y&&e.text.globeExtVertexBuffer.updateData(y)):(e.icon.dynamicLayoutVertexBuffer.updateData(m),y&&e.icon.globeExtVertexBuffer.updateData(y))}function se(t,e,n,r,i,o,a,s,l,c,u,h,p,d,f,g){const{lineStartIndex:m,glyphStartIndex:y,segment:v}=s,x=y+s.numGlyphs,_=m+s.lineLength,b=e.getoffsetX(y),w=e.getoffsetX(x-1),S=pe(t*b,n,r,i,o,a,v,m,_,l,c,u,h,p,!0,d,f,g);if(!S)return null;const C=pe(t*w,n,r,i,o,a,v,m,_,l,c,u,h,p,!0,d,f,g);return C?{first:S,last:C}:null}function le(e,n,r,i){return e===t.WritingMode.horizontal&&Math.abs(i)>Math.abs(r)?{useVertical:!0}:e===t.WritingMode.vertical?i>0?{needsFlipping:!0}:null:n!==Jt.unknown&&function(t,e){return 0===t||Math.abs(e/t)>Qt}(r,i)?n===Jt.flipRequired?{needsFlipping:!0}:null:r<0?{needsFlipping:!0}:null}function ce(e,n,r,i,o,a,s,l,c,u,h,p,d,f,g,m,y,v,x){const _=n/24,b=e.lineOffsetX*_,w=e.lineOffsetY*_,{lineStartIndex:S,glyphStartIndex:C,numGlyphs:E,segment:k,writingMode:M,flipState:T}=e,I=S+e.lineLength,P=e=>{if(h){const[n,r,i]=e.up,o=u.length;t.updateGlobeVertexNormal(h,o+0,n,r,i),t.updateGlobeVertexNormal(h,o+1,n,r,i),t.updateGlobeVertexNormal(h,o+2,n,r,i),t.updateGlobeVertexNormal(h,o+3,n,r,i)}const[n,r,i]=e.point;t.addDynamicAttributes(u,n,r,i,e.angle)};if(E>1){const t=se(_,l,b,w,r,p,d,e,c,a,f,m,!1,y,v,x);if(!t)return{notEnoughRoom:!0};if(i&&!r){let[n,r,i]=t.first.point,[o,a,l]=t.last.point;[n,r]=re(n,r,i,s),[o,a]=re(o,a,l,s);const c=le(M,T,(o-n)*g,a-r);if(e.flipState=c&&c.needsFlipping?Jt.flipRequired:Jt.flipNotRequired,c)return c}P(t.first);for(let e=C+1;e<C+E-1;e++){const t=pe(_*l.getoffsetX(e),b,w,r,p,d,k,S,I,c,a,f,m,!1,!1,y,v,x);if(!t)return u.length-=4*(e-C),{notEnoughRoom:!0};P(t)}P(t.last)}else{if(i&&!r){const n=re(d.x,d.y,0,o),r=S+k+1,i=new t.Point(c.getx(r),c.gety(r)),a=re(i.x,i.y,0,o),s=a[3]>0?a:he(d,i,n,1,o,void 0,y,v.canonical),l=le(M,T,(s[0]-n[0])*g,s[1]-n[1]);if(e.flipState=l&&l.needsFlipping?Jt.flipRequired:Jt.flipNotRequired,l)return l}const n=pe(_*l.getoffsetX(C),b,w,r,p,d,k,S,I,c,a,f,m,!1,!1,y,v,x);if(!n)return{notEnoughRoom:!0};P(n)}return{}}function ue(t,e,n,r,i){const{x:o,y:a,z:s}=r.projectTilePoint(t.x,t.y,e);if(!i)return re(o,a,s,n);const[l,c,u]=i(t);return re(o+l,a+c,s+u,n)}function he(e,n,r,i,o,a,s,l){const c=ue(e.sub(n)._unit()._add(e),l,o,s,a);return t.sub(c,r,c),t.normalize(c,c),t.scaleAndAdd(c,r,c,i)}function pe(e,n,r,i,o,a,s,l,c,u,h,p,d,f,g,m,y,v){const x=i?e-n:e+n;let _=x>0?1:-1,b=0;i&&(_*=-1,b=Math.PI),_<0&&(b+=Math.PI);let w=l+s+(_>0?0:1)|0,S=o,C=o,E=0,k=0;const M=Math.abs(x),T=[],I=[];let P=a,O=P;const A=()=>he(O,P,C,M-E+1,h,d,m,y.canonical);for(;E+k<=M;){if(w+=_,w<l||w>=c)return null;if(C=S,O=P,T.push(C),f&&I.push(O),P=new t.Point(u.getx(w),u.gety(w)),S=p[w],!S){const t=ue(P,y.canonical,h,m,d);S=t[3]>0?p[w]=t:A()}E+=k,k=t.distance(C,S)}g&&d&&(p[w]&&(S=A(),k=t.distance(C,S)),p[w]=S);const D=(M-E)/k,R=P.sub(O)._mult(D)._add(O),L=t.sub([],S,C),N=t.scaleAndAdd([],C,L,D);let F=[0,0,1],z=L[0],B=L[1];if(v&&(F=m.upVector(y.canonical,R.x,R.y),0!==F[0]||0!==F[1]||1!==F[2])){const e=[F[2],0,-F[0]],n=t.cross([],F,e);t.normalize(e,e),t.normalize(n,n),z=t.dot(L,e),B=t.dot(L,n)}if(r){const e=t.cross([],F,L);t.normalize(e,e),t.scaleAndAdd(N,N,e,r*_)}const $=b+Math.atan2(B,z);return T.push(N),f&&I.push(R),{point:N,angle:$,path:T,tilePath:I,up:F}}function de(t,e){const n=e.length,r=n+4*t;e.resize(r),e.float32.fill(-1/0,4*n,4*r)}function fe(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t[3]=n[3]*r+n[7]*i+n[15],t}const ge=100;class me{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Kt(t.width+200,t.height+200,25),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Kt(t.width+200,t.height+200,25);this.transform=t,this.grid=n,this.ignoredGrid=r,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+ge,this.screenBottomBoundary=t.height+ge,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.fogState=e}placeCollisionBox(t,e,n,r,i,o,a,s){let l=n.projectedAnchorX,c=n.projectedAnchorY,u=n.projectedAnchorZ;const h=n.elevation,p=n.tileID,d=t.getProjection();if(h&&p){const[t,e,r]=d.upVector(p.canonical,n.tileAnchorX,n.tileAnchorY),i=d.upVectorScale(p.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;l+=t*h*i,c+=e*h*i,u+=r*h*i}const f=this.projectAndGetPerspectiveRatio(a,l,c,u,n.tileID,"globe"===d.name||!!h||this.transform.pitch>0,d),g=o*f.perspectiveRatio,m=(n.x1*e+r.x-n.padding)*g+f.point.x,y=(n.y1*e+r.y-n.padding)*g+f.point.y,v=(n.x2*e+r.x+n.padding)*g+f.point.x,x=(n.y2*e+r.y+n.padding)*g+f.point.y,_=f.perspectiveRatio<=.55||f.occluded;return!this.isInsideGrid(m,y,v,x)||!i&&this.grid.hitTest(m,y,v,x,s)||_?{box:[],offscreen:!1,occluded:f.occluded}:{box:[m,y,v,x],offscreen:this.isOffscreen(m,y,v,x),occluded:!1}}placeCollisionCircles(e,n,r,i,o,a,s,l,c,u,h,p,d,f,g){const m=[],y=this.transform.elevation,v=e.getProjection(),x=y?y.getAtTileOffsetFunc(g,this.transform.center.lat,this.transform.worldSize,v):null,_=new t.Point(r.tileAnchorX,r.tileAnchorY);let{x:b,y:w,z:S}=v.projectTilePoint(_.x,_.y,g.canonical);if(x){const[t,e,n]=x(_);b+=t,w+=e,S+=n}const C="globe"===v.name,E=this.projectAndGetPerspectiveRatio(s,b,w,S,g,C||!!y||this.transform.pitch>0,v),{perspectiveRatio:k}=E,M=(h?a/k:a*k)/t.ONE_EM,T=re(b,w,S,l),I=E.signedDistanceFromCamera>0?se(M,o,r.lineOffsetX*M,r.lineOffsetY*M,!1,T,_,r,i,l,{},y&&!h?x:null,h&&!!y,v,g,h):null;let P=!1,O=!1,A=!0;if(I&&!E.occluded){const e=.5*d*k+f,r=new t.Point(-100,-100),i=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),o=new Zt,{first:a,last:s}=I,l=a.path.length;let h=[];for(let t=l-1;t>=1;t--)h.push(a.path[t]);for(let t=1;t<s.path.length;t++)h.push(s.path[t]);const g=2.5*e;c&&(h=h.map(((t,e)=>{let[n,r,i]=t;return x&&!C&&(i=x(e<l-1?a.tilePath[l-1-e]:s.tilePath[e-l+2])[2]),re(n,r,i,c)})),h.some((t=>t[3]<=0))&&(h=[]));let y=[];if(h.length>0){let e=1/0,n=-1/0,o=1/0,a=-1/0;for(const t of h)e=Math.min(e,t[0]),o=Math.min(o,t[1]),n=Math.max(n,t[0]),a=Math.max(a,t[1]);n>=r.x&&e<=i.x&&a>=r.y&&o<=i.y&&(y=[h.map((e=>new t.Point(e[0],e[1])))],(e<r.x||n>i.x||o<r.y||a>i.y)&&(y=t.clipLine(y,r.x,r.y,i.x,i.y)))}for(const t of y){o.reset(t,.25*e);let r=0;r=o.length<=.5*e?1:Math.ceil(o.paddedLength/g)+1;for(let t=0;t<r;t++){const i=t/Math.max(r-1,1),a=o.lerp(i),s=a.x+ge,l=a.y+ge;m.push(s,l,e,0);const c=s-e,h=l-e,d=s+e,f=l+e;if(A=A&&this.isOffscreen(c,h,d,f),O=O||this.isInsideGrid(c,h,d,f),!n&&this.grid.hitTestCircle(s,l,e,p)&&(P=!0,!u))return{circles:[],offscreen:!1,collisionDetected:P,occluded:!1}}}}return{circles:!u&&P||!O?[]:m,offscreen:A,collisionDetected:P,occluded:E.occluded}}queryRenderedSymbols(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const n=[];let r=1/0,i=1/0,o=-1/0,a=-1/0;for(const u of e){const e=new t.Point(u.x+ge,u.y+ge);r=Math.min(r,e.x),i=Math.min(i,e.y),o=Math.max(o,e.x),a=Math.max(a,e.y),n.push(e)}const s=this.grid.query(r,i,o,a).concat(this.ignoredGrid.query(r,i,o,a)),l={},c={};for(const u of s){const e=u.key;if(void 0===l[e.bucketInstanceId]&&(l[e.bucketInstanceId]={}),l[e.bucketInstanceId][e.featureIndex])continue;const r=[new t.Point(u.x1,u.y1),new t.Point(u.x2,u.y1),new t.Point(u.x2,u.y2),new t.Point(u.x1,u.y2)];t.polygonIntersectsPolygon(n,r)&&(l[e.bucketInstanceId][e.featureIndex]=!0,void 0===c[e.bucketInstanceId]&&(c[e.bucketInstanceId]=[]),c[e.bucketInstanceId].push(e.featureIndex))}return c}insertCollisionBox(t,e,n,r,i){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:i},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,e,n,r,i){const o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:r,collisionGroupID:i};for(let s=0;s<t.length;s+=4)o.insertCircle(a,t[s],t[s+1],t[s+2])}projectAndGetPerspectiveRatio(e,n,r,i,o,a,s){const l=[n,r,i,1];let c=!1;if(i||this.transform.pitch>0){if(t.transformMat4$1(l,l,e),this.fogState&&o&&"globe"!==s.name){const e=function(e,n,r,i,o,a){const s=a.calculateFogTileMatrix(o),l=[n,r,i];return t.transformMat4(l,l,s),E(e,l,a.pitch,a._fov)}(this.fogState,n,r,i,o.toUnwrapped(),this.transform);c=e>.9}}else fe(l,l,e);const u=l[3];return{point:new t.Point((l[0]/u+1)/2*this.transform.width+ge,(-l[1]/u+1)/2*this.transform.height+ge),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(s)/u*.5,1.5),signedDistanceFromCamera:u,occluded:a&&l[2]>u||c}}isOffscreen(t,e,n,r){return n<ge||t>=this.screenRightBoundary||r<ge||e>this.screenBottomBoundary}isInsideGrid(t,e,n,r){return n>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary}getViewportMatrix(){const e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e}}function ye(e,n,r){const i=n.createTileMatrix(e,e.worldSize,r.toUnwrapped());return t.multiply(new Float32Array(16),e.projMatrix,i)}function ve(t,e,n){if(e.projection.name===n.projection.name)return t.projMatrix;const r=n.clone();return r.setProjection(e.projection),ye(r,e.getProjection(),t)}function xe(t,e,n){return e.name===n.projection.name?t.projMatrix:ye(n,e,t)}class _e{constructor(t,e,n,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&n?1:0,this.placed=n}isHidden(){return 0===this.opacity&&!this.placed}}class be{constructor(t,e,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.text=new _e(t?t.text:null,e,n,i),this.icon=new _e(t?t.icon:null,e,r,i),this.clipped=o}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class we{constructor(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.text=t,this.icon=e,this.skipFade=n,this.clipped=r}}class Se{constructor(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]}}class Ce{constructor(t,e,n,r,i){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i}}class Ee{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:t=>t.collisionGroupID===e}}return this.collisionGroups[t]}}function ke(e,n,r,i,o){const{horizontalAlign:a,verticalAlign:s}=t.getAnchorAlignment(e),l=-(a-.5)*n,c=-(s-.5)*r,u=t.evaluateVariableOffset(e,i);return new t.Point(l+u[0]*o,c+u[1]*o)}function Me(e,n,r,i,o){const a=new t.Point(e,n);return r&&a._rotate(i?o:-o),a}class Te{constructor(t,e,n,r,i){this.transform=t.clone(),this.projection=t.projection.name,this.collisionIndex=new me(this.transform,i),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new Ee(n),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(e,n,r,i){const o=r.getBucket(n),a=r.latestFeatureIndex;if(!o||!a||n.id!==o.layerIds[0])return;const s=o.layers[0].layout,l=r.collisionBoxArray,c=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),u=r.tileSize/t.EXTENT,h=r.tileID.toUnwrapped();this.transform.setProjection(o.projection);const p=(d=r.tileID,f=o.getProjection(),g=this.transform,f.name===this.projection?g.calculateProjMatrix(d.toUnwrapped()):ye(g,f,d));var d,f,g;const m="map"===s.get("text-pitch-alignment"),y="map"===s.get("text-rotation-alignment");n.compileFilter();const v=n.dynamicFilter(),x=n.dynamicFilterNeedsFeature(),_=this.transform.calculatePixelsToTileUnitsMatrix(r),b=ee(p,r.tileID.canonical,m,y,this.transform,o.getProjection(),_);let w=null;if(m){const e=ne(p,r.tileID.canonical,m,y,this.transform,o.getProjection(),_);w=t.multiply([],this.transform.labelPlaneMatrix,e)}let S=null;v&&r.latestFeatureIndex&&(S={unwrappedTileID:h,dynamicFilter:v,dynamicFilterNeedsFeature:x,featureIndex:r.latestFeatureIndex}),this.retainedQueryData[o.bucketInstanceId]=new Ce(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,r.tileID);const C={bucket:o,layout:s,posMatrix:p,textLabelPlaneMatrix:b,labelToScreenMatrix:w,clippingData:S,scale:c,textPixelRatio:u,holdingForFade:r.holdingForFade(),collisionBoxArray:l,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:t.evaluateSizeForZoom(o.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(i)for(const t of o.sortKeyRanges){const{sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i}=t;e.push({sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i,parameters:C})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:C})}attemptAnchorPlacement(t,e,n,r,i,o,a,s,l,c,u,h,p,d,f,g,m,y){const{textOffset0:v,textOffset1:x,crossTileID:_}=h,b=[v,x],w=ke(t,n,r,b,i),S=this.collisionIndex.placeCollisionBox(d,i,e,Me(w.x,w.y,o,a,this.transform.angle),u,s,l,c.predicate);if(g){const t=d.getSymbolInstanceIconSize(y,this.transform.zoom,h.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(d,t,g,Me(w.x,w.y,o,a,this.transform.angle),u,s,l,c.predicate).box.length)return}if(S.box.length>0){let e;return this.prevPlacement&&this.prevPlacement.variableOffsets[_]&&this.prevPlacement.placements[_]&&this.prevPlacement.placements[_].text&&(e=this.prevPlacement.variableOffsets[_].anchor),this.variableOffsets[_]={textOffset:b,width:n,height:r,anchor:t,textScale:i,prevAnchor:e},this.markUsedJustification(d,t,h,f),d.allowVerticalPlacement&&(this.markUsedOrientation(d,f,h),this.placedOrientations[_]=f),{shift:w,placedGlyphBoxes:S}}}placeLayerBucketPart(e,n,r,i){const{bucket:o,layout:a,posMatrix:s,textLabelPlaneMatrix:l,labelToScreenMatrix:c,clippingData:u,textPixelRatio:h,holdingForFade:p,collisionBoxArray:d,partiallyEvaluatedTextSize:f,partiallyEvaluatedIconSize:g,collisionGroup:m}=e.parameters,y=a.get("text-optional"),v=a.get("icon-optional"),x=a.get("text-allow-overlap"),_=a.get("icon-allow-overlap"),b="map"===a.get("text-rotation-alignment"),w="map"===a.get("text-pitch-alignment"),S="none"!==a.get("icon-text-fit"),C="viewport-y"===a.get("symbol-z-order");this.transform.setProjection(o.projection);let E=x&&(_||!o.hasIconData()||v),k=_&&(x||!o.hasTextData()||y);!o.collisionArrays&&d&&o.deserializeCollisionBoxes(d),r&&i&&o.updateCollisionDebugBuffers(this.transform.zoom,d);const M=(e,i,d)=>{const{crossTileID:C,numVerticalGlyphVertices:M}=e;if(u){const r={zoom:this.transform.zoom,pitch:this.transform.pitch};let i=null;if(u.dynamicFilterNeedsFeature){const t=this.retainedQueryData[o.bucketInstanceId];i=u.featureIndex.loadFeature({featureIndex:e.featureIndex,bucketIndex:t.bucketIndex,sourceLayerIndex:t.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,u.dynamicFilter)(r,i,this.retainedQueryData[o.bucketInstanceId].tileID.canonical,new t.Point(e.tileAnchorX,e.tileAnchorY),this.transform.calculateDistanceTileData(u.unwrappedTileID)))return this.placements[C]=new we(!1,!1,!1,!0),void n.add(C)}if(n.has(C))return;if(p)return void(this.placements[C]=new we(!1,!1,!1));let T=!1,I=!1,P=!0,O=!1,A=!1,D=null,R={box:null,offscreen:null,occluded:null},L={box:null,offscreen:null,occluded:null},N=null,F=null,z=null,B=0,$=0,j=0;d.textFeatureIndex?B=d.textFeatureIndex:e.useRuntimeCollisionCircles&&(B=e.featureIndex),d.verticalTextFeatureIndex&&($=d.verticalTextFeatureIndex);const U=t=>{t.tileID=this.retainedQueryData[o.bucketInstanceId].tileID;const e=this.transform.elevation;(e||t.elevation)&&(t.elevation=e?e.getAtTileOffset(t.tileID,t.tileAnchorX,t.tileAnchorY):0)},V=d.textBox;if(V){U(V);const n=n=>{let r=t.WritingMode.horizontal;if(o.allowVerticalPlacement&&!n&&this.prevPlacement){const t=this.prevPlacement.placedOrientations[C];t&&(this.placedOrientations[C]=t,r=t,this.markUsedOrientation(o,r,e))}return r},r=(e,n)=>{if(o.allowVerticalPlacement&&M>0&&d.verticalTextBox){for(const r of o.writingModes)if(r===t.WritingMode.vertical?(R=n(),L=R):R=e(),R&&R.box&&R.box.length)break}else R=e()};if(a.get("text-variable-anchor")){let l=a.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[C]){const t=this.prevPlacement.variableOffsets[C];l.indexOf(t.anchor)>0&&(l=l.filter((e=>e!==t.anchor)),l.unshift(t.anchor))}const c=(t,n,r)=>{const a=o.getSymbolInstanceTextSize(f,e,this.transform.zoom,i),c=(t.x2-t.x1)*a+2*t.padding,u=(t.y2-t.y1)*a+2*t.padding,p=S&&!_?n:null;p&&U(p);let d={box:[],offscreen:!1,occluded:!1};const y=x?2*l.length:l.length;for(let v=0;v<y;++v){const n=this.attemptAnchorPlacement(l[v%l.length],t,c,u,a,b,w,h,s,m,v>=l.length,e,i,o,r,p,f,g);if(n&&(d=n.placedGlyphBoxes,d&&d.box&&d.box.length)){T=!0,D=n.shift;break}}return d};r((()=>c(V,d.iconBox,t.WritingMode.horizontal)),(()=>{const e=d.verticalTextBox;return e&&U(e),o.allowVerticalPlacement&&!(R&&R.box&&R.box.length)&&M>0&&e?c(e,d.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null,occluded:null}})),R&&(T=R.box,P=R.offscreen,O=R.occluded);const u=n(!(!R||!R.box));if(!T&&this.prevPlacement){const t=this.prevPlacement.variableOffsets[C];t&&(this.variableOffsets[C]=t,this.markUsedJustification(o,t.anchor,e,u))}}else{const a=(n,r)=>{const a=o.getSymbolInstanceTextSize(f,e,this.transform.zoom,i),l=this.collisionIndex.placeCollisionBox(o,a,n,new t.Point(0,0),x,h,s,m.predicate);return l&&l.box&&l.box.length&&(this.markUsedOrientation(o,r,e),this.placedOrientations[C]=r),l};r((()=>a(V,t.WritingMode.horizontal)),(()=>{const e=d.verticalTextBox;return o.allowVerticalPlacement&&M>0&&e?(U(e),a(e,t.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}})),n(!!(R&&R.box&&R.box.length))}}if(N=R,T=N&&N.box&&N.box.length>0,P=N&&N.offscreen,O=N&&N.occluded,e.useRuntimeCollisionCircles){const n=o.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex>=0?e.centerJustifiedTextSymbolIndex:e.verticalPlacedTextSymbolIndex),i=t.evaluateSizeForFeature(o.textSizeData,f,n),u=a.get("text-padding");F=this.collisionIndex.placeCollisionCircles(o,x,n,o.lineVertexArray,o.glyphOffsetArray,i,s,l,c,r,w,m.predicate,e.collisionCircleDiameter*i/t.ONE_EM,u,this.retainedQueryData[o.bucketInstanceId].tileID),T=x||F.circles.length>0&&!F.collisionDetected,P=P&&F.offscreen,O=F.occluded}if(d.iconFeatureIndex&&(j=d.iconFeatureIndex),d.iconBox){const n=n=>{U(n);const r=S&&D?Me(D.x,D.y,b,w,this.transform.angle):new t.Point(0,0),i=o.getSymbolInstanceIconSize(g,this.transform.zoom,e.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(o,i,n,r,_,h,s,m.predicate)};L&&L.box&&L.box.length&&d.verticalIconBox?(z=n(d.verticalIconBox),I=z.box.length>0):(z=n(d.iconBox),I=z.box.length>0),P=P&&z.offscreen,A=z.occluded}const H=y||0===e.numHorizontalGlyphVertices&&0===M,G=v||0===e.numIconVertices;if(H||G?G?H||(I=I&&T):T=I&&T:I=T=I&&T,T&&N&&N.box&&this.collisionIndex.insertCollisionBox(N.box,a.get("text-ignore-placement"),o.bucketInstanceId,L&&L.box&&$?$:B,m.ID),I&&z&&this.collisionIndex.insertCollisionBox(z.box,a.get("icon-ignore-placement"),o.bucketInstanceId,j,m.ID),F&&(T&&this.collisionIndex.insertCollisionCircles(F.circles,a.get("text-ignore-placement"),o.bucketInstanceId,B,m.ID),r)){const t=o.bucketInstanceId;let e=this.collisionCircleArrays[t];void 0===e&&(e=this.collisionCircleArrays[t]=new Se);for(let n=0;n<F.circles.length;n+=4)e.circles.push(F.circles[n+0]),e.circles.push(F.circles[n+1]),e.circles.push(F.circles[n+2]),e.circles.push(F.collisionDetected?1:0)}const W="globe"!==o.projection.name;E=E&&(W||!O),k=k&&(W||!A),this.placements[C]=new we(T||E,I||k,P||o.justReloaded),n.add(C)};if(C){const t=o.getSortedSymbolIndexes(this.transform.angle);for(let e=t.length-1;e>=0;--e){const n=t[e];M(o.symbolInstances.get(n),n,o.collisionArrays[n])}}else for(let t=e.symbolInstanceStart;t<e.symbolInstanceEnd;t++)M(o.symbolInstances.get(t),t,o.collisionArrays[t]);if(r&&o.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[o.bucketInstanceId];t.invert(e.invProjMatrix,s),e.viewportMatrix=this.collisionIndex.getViewportMatrix()}o.justReloaded=!1}markUsedJustification(e,n,r,i){const{leftJustifiedTextSymbolIndex:o,centerJustifiedTextSymbolIndex:a,rightJustifiedTextSymbolIndex:s,verticalPlacedTextSymbolIndex:l,crossTileID:c}=r,u=t.getAnchorJustification(n),h=i===t.WritingMode.vertical?l:"left"===u?o:"center"===u?a:"right"===u?s:-1;o>=0&&(e.text.placedSymbolArray.get(o).crossTileID=h>=0&&o!==h?0:c),a>=0&&(e.text.placedSymbolArray.get(a).crossTileID=h>=0&&a!==h?0:c),s>=0&&(e.text.placedSymbolArray.get(s).crossTileID=h>=0&&s!==h?0:c),l>=0&&(e.text.placedSymbolArray.get(l).crossTileID=h>=0&&l!==h?0:c)}markUsedOrientation(e,n,r){const i=n===t.WritingMode.horizontal||n===t.WritingMode.horizontalOnly?n:0,o=n===t.WritingMode.vertical?n:0,{leftJustifiedTextSymbolIndex:a,centerJustifiedTextSymbolIndex:s,rightJustifiedTextSymbolIndex:l,verticalPlacedTextSymbolIndex:c}=r,u=e.text.placedSymbolArray;a>=0&&(u.get(a).placedOrientation=i),s>=0&&(u.get(s).placedOrientation=i),l>=0&&(u.get(l).placedOrientation=i),c>=0&&(u.get(c).placedOrientation=o)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const e=this.prevPlacement;let n=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;const r=e?e.symbolFadeChange(t):1,i=e?e.opacities:{},o=e?e.variableOffsets:{},a=e?e.placedOrientations:{};for(const s in this.placements){const t=this.placements[s],e=i[s];e?(this.opacities[s]=new be(e,r,t.text,t.icon,null,t.clipped),n=n||t.text!==e.text.placed||t.icon!==e.icon.placed):(this.opacities[s]=new be(null,r,t.text,t.icon,t.skipFade,t.clipped),n=n||t.text||t.icon)}for(const s in i){const t=i[s];if(!this.opacities[s]){const e=new be(t,r,!1,!1);e.isHidden()||(this.opacities[s]=e,n=n||t.text.placed||t.icon.placed)}}for(const s in o)this.variableOffsets[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.variableOffsets[s]=o[s]);for(const s in a)this.placedOrientations[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.placedOrientations[s]=a[s]);n?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)}updateLayerOpacities(t,e){const n=new Set;for(const r of e){const e=r.getBucket(t);e&&r.latestFeatureIndex&&t.id===e.layerIds[0]&&this.updateBucketOpacities(e,n,r.collisionBoxArray)}}updateBucketOpacities(e,n,r){e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const i=e.layers[0].layout,o=!!e.layers[0].dynamicFilter(),a=new be(null,0,!1,!1,!0),s=i.get("text-allow-overlap"),l=i.get("icon-allow-overlap"),c=i.get("text-variable-anchor"),u="map"===i.get("text-rotation-alignment"),h="map"===i.get("text-pitch-alignment"),p="none"!==i.get("icon-text-fit"),d=new be(null,0,s&&(l||!e.hasIconData()||i.get("icon-optional")),l&&(s||!e.hasTextData()||i.get("text-optional")),!0);!e.collisionArrays&&r&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(r);const f=(t,e,n)=>{for(let r=0;r<e/4;r++)t.opacityVertexArray.emplaceBack(n)};let g=0;for(let m=0;m<e.symbolInstances.length;m++){const r=e.symbolInstances.get(m),{numHorizontalGlyphVertices:i,numVerticalGlyphVertices:s,crossTileID:l,numIconVertices:y}=r,v=n.has(l);let x=this.opacities[l];v?x=a:x||(x=d,this.opacities[l]=x),n.add(l);const _=i>0||s>0,b=y>0,w=this.placedOrientations[l],S=w===t.WritingMode.vertical,C=w===t.WritingMode.horizontal||w===t.WritingMode.horizontalOnly;if(!_&&!b||x.isHidden()||g++,_){const t=Fe(x.text);f(e.text,i,S?ze:t),f(e.text,s,C?ze:t);const n=x.text.isHidden(),{leftJustifiedTextSymbolIndex:o,centerJustifiedTextSymbolIndex:a,rightJustifiedTextSymbolIndex:c,verticalPlacedTextSymbolIndex:u}=r,h=e.text.placedSymbolArray,p=n||S?1:0;o>=0&&(h.get(o).hidden=p),a>=0&&(h.get(a).hidden=p),c>=0&&(h.get(c).hidden=p),u>=0&&(h.get(u).hidden=n||C?1:0);const d=this.variableOffsets[l];d&&this.markUsedJustification(e,d.anchor,r,w);const g=this.placedOrientations[l];g&&(this.markUsedJustification(e,"left",r,g),this.markUsedOrientation(e,g,r))}if(b){const t=Fe(x.icon),{placedIconSymbolIndex:n,verticalPlacedIconSymbolIndex:i}=r,o=e.icon.placedSymbolArray,a=x.icon.isHidden()?1:0;n>=0&&(f(e.icon,y,S?ze:t),o.get(n).hidden=a),i>=0&&(f(e.icon,r.numVerticalIconVertices,C?ze:t),o.get(i).hidden=a)}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const n=e.collisionArrays[m];if(n){let r=new t.Point(0,0),i=!0;if(n.textBox||n.verticalTextBox){if(c){const t=this.variableOffsets[l];t?(r=ke(t.anchor,t.width,t.height,t.textOffset,t.textScale),u&&r._rotate(h?this.transform.angle:-this.transform.angle)):i=!1}o&&(i=!x.clipped),n.textBox&&Ie(e.textCollisionBox.collisionVertexArray,x.text.placed,!i||S,r.x,r.y),n.verticalTextBox&&Ie(e.textCollisionBox.collisionVertexArray,x.text.placed,!i||C,r.x,r.y)}const a=i&&Boolean(!C&&n.verticalIconBox);n.iconBox&&Ie(e.iconCollisionBox.collisionVertexArray,x.icon.placed,a,p?r.x:0,p?r.y:0),n.verticalIconBox&&Ie(e.iconCollisionBox.collisionVertexArray,x.icon.placed,!a,p?r.x:0,p?r.y:0)}}}if(e.fullyClipped=0===g,e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=t.invProjMatrix,e.placementViewportMatrix=t.viewportMatrix,e.collisionCircleArray=t.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,e){const n=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*n>t}setStale(){this.stale=!0}}function Ie(t,e,n,r,i){t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0)}const Pe=Math.pow(2,25),Oe=Math.pow(2,24),Ae=Math.pow(2,17),De=Math.pow(2,16),Re=Math.pow(2,9),Le=Math.pow(2,8),Ne=Math.pow(2,1);function Fe(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;const e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*Pe+e*Oe+n*Ae+e*De+n*Re+e*Le+n*Ne+e}const ze=0;class Be{constructor(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(t,e,n,r,i){const o=this._bucketParts;for(;this._currentTileIndex<t.length;)if(e.getBucketParts(o,r,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(((t,e)=>t.sortKey-e.sortKey)));this._currentPartIndex<o.length;){const t=o[this._currentPartIndex];if(e.placeLayerBucketPart(t,this._seenCrossTileIDs,n,0===t.symbolInstanceStart),this._currentPartIndex++,i())return!0}return!1}}class $e{constructor(t,e,n,r,i,o,a,s){this.placement=new Te(t,i,o,a,s),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1}isDone(){return this._done}continuePlacement(e,n,r){const i=t.exported.now(),o=()=>{const e=t.exported.now()-i;return!this._forceFullPlacement&&e>2};for(;this._currentPlacementIndex>=0;){const t=n[e[this._currentPlacementIndex]],i=this.placement.collisionIndex.transform.zoom;if("symbol"===t.type&&(!t.minzoom||t.minzoom<=i)&&(!t.maxzoom||t.maxzoom>i)){if(this._inProgressLayer||(this._inProgressLayer=new Be(t)),this._inProgressLayer.continuePlacement(r[t.source],this.placement,this._showCollisionBoxes,t,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const je=512/t.EXTENT/2;class Ue{constructor(e,n,r){this.tileID=e,this.bucketInstanceId=r,this.index=new t.KDBush(n.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const i=e.canonical.x*t.EXTENT,o=e.canonical.y*t.EXTENT;for(let t=0;t<n.length;t++){const{key:e,crossTileID:r,tileAnchorX:a,tileAnchorY:s}=n.get(t),l=Math.floor((i+a)*je),c=Math.floor((o+s)*je);this.index.add(l,c),this.keys.push(e),this.crossTileIDs.push(r)}this.index.finish()}findMatches(e,n,r){const i=this.tileID.canonical.z<n.canonical.z?1:Math.pow(2,this.tileID.canonical.z-n.canonical.z),o=je/Math.pow(2,n.canonical.z-this.tileID.canonical.z),a=n.canonical.x*t.EXTENT,s=n.canonical.y*t.EXTENT;for(let t=0;t<e.length;t++){const n=e.get(t);if(n.crossTileID)continue;const{key:l,tileAnchorX:c,tileAnchorY:u}=n,h=Math.floor((a+c)*o),p=Math.floor((s+u)*o),d=this.index.range(h-i,p-i,h+i,p+i);for(const t of d){const e=this.crossTileIDs[t];if(this.keys[t]===l&&!r.has(e)){r.add(e),n.crossTileID=e;break}}}}}class Ve{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class He{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const e=Math.round((t-this.lng)/360);if(0!==e)for(const n in this.indexes){const t=this.indexes[n],r={};for(const n in t){const i=t[n];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+e),r[i.tileID.key]=i}this.indexes[n]=r}this.lng=t}addBucket(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let i=0;i<e.symbolInstances.length;i++)e.symbolInstances.get(i).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]=new Set);const r=this.usedCrossTileIDs[t.overscaledZ];for(const i in this.indexes){const n=this.indexes[i];if(Number(i)>t.overscaledZ)for(const i in n){const o=n[i];o.tileID.isChildOf(t)&&o.findMatches(e.symbolInstances,t,r)}else{const o=n[t.scaledTo(Number(i)).key];o&&o.findMatches(e.symbolInstances,t,r)}}for(let i=0;i<e.symbolInstances.length;i++){const t=e.symbolInstances.get(i);t.crossTileID||(t.crossTileID=n.generate(),r.add(t.crossTileID))}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Ue(t,e.symbolInstances,e.bucketInstanceId),!0}removeBucketCrossTileIDs(t,e){for(const n of e.crossTileIDs)this.usedCrossTileIDs[t].delete(n)}removeStaleBuckets(t){let e=!1;for(const n in this.indexes){const r=this.indexes[n];for(const i in r)t[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],e=!0)}return e}}class Ge{constructor(){this.layerIndexes={},this.crossTileIDs=new Ve,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,e,n,r){let i=this.layerIndexes[t.id];void 0===i&&(i=this.layerIndexes[t.id]=new He);let o=!1;const a={};"globe"!==r.name&&i.handleWrapJump(n);for(const s of e){const e=s.getBucket(t);e&&t.id===e.layerIds[0]&&(e.bucketInstanceId||(e.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(s.tileID,e,this.crossTileIDs)&&(o=!0),a[e.bucketInstanceId]=!0)}return i.removeStaleBuckets(a)&&(o=!0),o}pruneUnusedLayers(t){const e={};t.forEach((t=>{e[t]=!0}));for(const n in this.layerIndexes)e[n]||delete this.layerIndexes[n]}}const We=(e,n)=>t.emitValidationErrors(e,n&&n.filter((t=>"source.canvas"!==t.identifier))),Xe=t.pick(Ut,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),qe=t.pick(Ut,["setCenter","setZoom","setBearing","setPitch"]),Ye={version:8,layers:[],sources:{}},Ze={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Ke extends t.Evented{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.map=e,this.dispatcher=new I(Bt(),this),this.imageManager=new _,this.imageManager.setEventedParent(this),this.glyphManager=new t.GlyphManager(e._requestManager,n.localFontFamily?t.LocalGlyphMode.all:n.localIdeographFontFamily?t.LocalGlyphMode.ideographs:t.LocalGlyphMode.none,n.localFontFamily||n.localIdeographFontFamily),this.crossTileSymbolIndex=new Ge,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());const r=this;this._rtlTextPluginCallback=Ke.registerForPluginStateChange((e=>{r.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},((e,n)=>{if(t.triggerPluginCompletionEvent(e),n&&n.every((t=>t)))for(const t in r._sourceCaches){const e=r._sourceCaches[t],n=e.getSource().type;"vector"!==n&&"geojson"!==n||e.reload()}}))})),this.on("data",(t=>{if("source"!==t.dataType||"metadata"!==t.sourceDataType)return;const e=this.getSource(t.sourceId);if(e&&e.vectorLayerIds)for(const n in this._layers){const t=this._layers[n];t.source===e.id&&this._validateLayer(t)}}))}loadURL(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new t.Event("dataloading",{dataType:"style"}));const r="boolean"==typeof n.validate?n.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,n.accessToken);const i=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(i,((e,n)=>{this._request=null,e?this.fire(new t.ErrorEvent(e)):n&&this._load(n,r)}))}loadJSON(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.exported.frame((()=>{this._request=null,this._load(e,!1!==n.validate)}))}loadEmpty(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(Ye,!1)}_updateLayerCount(t,e){const n=e?1:-1;t.is3D()&&(this._num3DLayers+=n),"circle"===t.type&&(this._numCircleLayers+=n),"symbol"===t.type&&(this._numSymbolLayers+=n)}_load(e,n){if(n&&We(this,t.validateStyle(e)))return;this._loaded=!0,this.stylesheet=t.clone$1(e),this._updateMapProjection();for(const t in e.sources)this.addSource(t,e.sources[t],{validate:!1});this._changed=!1,e.sprite?this._loadSprite(e.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(e.glyphs);const r=jt(this.stylesheet.layers);this._order=r.map((t=>t.id)),this._layers={},this._serializedLayers={};for(const i of r){const e=t.createStyleLayer(i);e.setEventedParent(this,{layer:{id:e.id}}),this._layers[e.id]=e,this._serializedLayers[e.id]=e.serialize(),this._updateLayerCount(e,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(t){t?this.stylesheet.projection=t:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(e){this._spriteRequest=function(e,n,r){let i,o,a;const s=t.exported.devicePixelRatio>1?"@2x":"";let l=t.getJSON(n.transformRequest(n.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),((t,e)=>{l=null,a||(a=t,i=e,u())})),c=t.getImage(n.transformRequest(n.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),((t,e)=>{c=null,a||(a=t,o=e,u())}));function u(){if(a)r(a);else if(i&&o){const e=t.exported.getImageData(o),n={};for(const r in i){const{width:o,height:a,x:s,y:l,sdf:c,pixelRatio:u,stretchX:h,stretchY:p,content:d}=i[r],f=new t.RGBAImage({width:o,height:a});t.RGBAImage.copy(e,f,{x:s,y:l},{x:0,y:0},{width:o,height:a}),n[r]={data:f,pixelRatio:u,sdf:c,stretchX:h,stretchY:p,content:d}}r(null,n)}}return{cancel(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(e,this.map._requestManager,((e,n)=>{if(this._spriteRequest=null,e)this.fire(new t.ErrorEvent(e));else if(n)for(const t in n)this.imageManager.addImage(t,n[t]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new t.Event("data",{dataType:"style"}))}))}_validateLayer(e){const n=this.getSource(e.source);if(!n)return;const r=e.sourceLayer;r&&("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(r))&&this.fire(new t.ErrorEvent(new Error(`Source layer "${r}" does not exist on source "${n.id}" as specified by style layer "${e.id}"`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const t in this._sourceCaches)if(!this._sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(t){const e=[];for(const n of t){const t=this._layers[n];"custom"!==t.type&&e.push(t.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(const t in this._sourceCaches)if(this._sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(t){return!!this.terrain&&("function"==typeof t.isLayerDraped?t.isLayerDraped():Ze[t.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(e){if(!this._loaded)return;const n=this._changed;if(this._changed){const t=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);(t.length||n.length)&&this._updateWorkerLayers(t,n);for(const e in this._updatedSources){const t=this._updatedSources[e];"reload"===t?this._reloadSource(e):"clear"===t&&this._clearSource(e)}this._updateTilesForChangedImages();for(const r in this._updatedPaintProps)this._layers[r].updateTransitions(e);this.light.updateTransitions(e),this.fog&&this.fog.updateTransitions(e),this._resetUpdates()}const r={};for(const t in this._sourceCaches){const e=this._sourceCaches[t];r[t]=e.used,e.used=!1}for(const t of this._order){const n=this._layers[t];if(n.recalculate(e,this._availableImages),!n.isHidden(e.zoom)){const t=this._getLayerSourceCache(n);t&&(t.used=!0)}const r=this.map.painter;if(r){const t=n.getProgramIds();if(!t)continue;const i=n.getProgramConfiguration(e.zoom);for(const e of t)r.useProgram(e,i)}}for(const i in r){const e=this._sourceCaches[i];r[i]!==e.used&&e.getSource().fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:e.getSource().id}))}this.light.recalculate(e),this.terrain&&this.terrain.recalculate(e),this.fog&&this.fog.recalculate(e),this.z=e.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),n&&this.fire(new t.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const e in this._sourceCaches)this._sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateWorkerLayers(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(n){if(this._checkLoaded(),We(this,t.validateStyle(n)))return!1;(n=t.clone$1(n)).layers=jt(n.layers);const r=function(t,n){if(!t)return[{command:Ut.setStyle,args:[n]}];let r=[];try{if(!e(t.version,n.version))return[{command:Ut.setStyle,args:[n]}];e(t.center,n.center)||r.push({command:Ut.setCenter,args:[n.center]}),e(t.zoom,n.zoom)||r.push({command:Ut.setZoom,args:[n.zoom]}),e(t.bearing,n.bearing)||r.push({command:Ut.setBearing,args:[n.bearing]}),e(t.pitch,n.pitch)||r.push({command:Ut.setPitch,args:[n.pitch]}),e(t.sprite,n.sprite)||r.push({command:Ut.setSprite,args:[n.sprite]}),e(t.glyphs,n.glyphs)||r.push({command:Ut.setGlyphs,args:[n.glyphs]}),e(t.transition,n.transition)||r.push({command:Ut.setTransition,args:[n.transition]}),e(t.light,n.light)||r.push({command:Ut.setLight,args:[n.light]}),e(t.fog,n.fog)||r.push({command:Ut.setFog,args:[n.fog]}),e(t.projection,n.projection)||r.push({command:Ut.setProjection,args:[n.projection]});const i={},o=[];!function(t,n,r,i){let o;for(o in n=n||{},t=t||{})t.hasOwnProperty(o)&&(n.hasOwnProperty(o)||Ht(o,r,i));for(o in n){if(!n.hasOwnProperty(o))continue;const a=n[o];t.hasOwnProperty(o)?e(t[o],a)||("geojson"===t[o].type&&"geojson"===a.type&&Wt(t,n,o)?r.push({command:Ut.setGeoJSONSourceData,args:[o,a.data]}):Gt(o,n,r,i)):Vt(o,n,r)}}(t.sources,n.sources,o,i);const a=[];t.layers&&t.layers.forEach((t=>{t.source&&i[t.source]?r.push({command:Ut.removeLayer,args:[t.id]}):a.push(t)}));let s=t.terrain;s&&i[s.source]&&(r.push({command:Ut.setTerrain,args:[void 0]}),s=void 0),r=r.concat(o),e(s,n.terrain)||r.push({command:Ut.setTerrain,args:[n.terrain]}),function(t,n,r){n=n||[];const i=(t=t||[]).map(qt),o=n.map(qt),a=t.reduce(Yt,{}),s=n.reduce(Yt,{}),l=i.slice(),c=Object.create(null);let u,h,p,d,f,g,m;for(u=0,h=0;u<i.length;u++)p=i[u],s.hasOwnProperty(p)?h++:(r.push({command:Ut.removeLayer,args:[p]}),l.splice(l.indexOf(p,h),1));for(u=0,h=0;u<o.length;u++)p=o[o.length-1-u],l[l.length-1-u]!==p&&(a.hasOwnProperty(p)?(r.push({command:Ut.removeLayer,args:[p]}),l.splice(l.lastIndexOf(p,l.length-h),1)):h++,g=l[l.length-u],r.push({command:Ut.addLayer,args:[s[p],g]}),l.splice(l.length-u,0,p),c[p]=!0);for(u=0;u<o.length;u++)if(p=o[u],d=a[p],f=s[p],!c[p]&&!e(d,f))if(e(d.source,f.source)&&e(d["source-layer"],f["source-layer"])&&e(d.type,f.type)){for(m in Xt(d.layout,f.layout,r,p,null,Ut.setLayoutProperty),Xt(d.paint,f.paint,r,p,null,Ut.setPaintProperty),e(d.filter,f.filter)||r.push({command:Ut.setFilter,args:[p,f.filter]}),e(d.minzoom,f.minzoom)&&e(d.maxzoom,f.maxzoom)||r.push({command:Ut.setLayerZoomRange,args:[p,f.minzoom,f.maxzoom]}),d)d.hasOwnProperty(m)&&"layout"!==m&&"paint"!==m&&"filter"!==m&&"metadata"!==m&&"minzoom"!==m&&"maxzoom"!==m&&(0===m.indexOf("paint.")?Xt(d[m],f[m],r,p,m.slice(6),Ut.setPaintProperty):e(d[m],f[m])||r.push({command:Ut.setLayerProperty,args:[p,m,f[m]]}));for(m in f)f.hasOwnProperty(m)&&!d.hasOwnProperty(m)&&"layout"!==m&&"paint"!==m&&"filter"!==m&&"metadata"!==m&&"minzoom"!==m&&"maxzoom"!==m&&(0===m.indexOf("paint.")?Xt(d[m],f[m],r,p,m.slice(6),Ut.setPaintProperty):e(d[m],f[m])||r.push({command:Ut.setLayerProperty,args:[p,m,f[m]]}))}else r.push({command:Ut.removeLayer,args:[p]}),g=l[l.lastIndexOf(p)+1],r.push({command:Ut.addLayer,args:[f,g]})}(a,n.layers,r)}catch(t){console.warn("Unable to compute style diff:",t),r=[{command:Ut.setStyle,args:[n]}]}return r}(this.serialize(),n).filter((t=>!(t.command in qe)));if(0===r.length)return!1;const i=r.filter((t=>!(t.command in Xe)));if(i.length>0)throw new Error(`Unimplemented: ${i.map((t=>t.command)).join(", ")}.`);return r.forEach((t=>{"setTransition"!==t.command&&"setProjection"!==t.command&&this[t.command].apply(this,t.args)})),this.stylesheet=n,this._updateMapProjection(),!0}addImage(e,n){return this.getImage(e)?this.fire(new t.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(e,n),this._afterImageUpdated(e),this)}updateImage(t,e){this.imageManager.updateImage(t,e)}getImage(t){return this.imageManager.getImage(t)}removeImage(e){return this.getImage(e)?(this.imageManager.removeImage(e),this._afterImageUpdated(e),this):this.fire(new t.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._checkLoaded(),void 0!==this.getSource(e))throw new Error("There is already a source with this ID");if(!n.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(n).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.validateSource,`sources.${e}`,n,null,r))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const i=Pt(e,n,this.dispatcher,this);i.setEventedParent(this,(()=>({isSourceLoaded:this._isSourceCacheLoaded(e),source:i.serialize(),sourceId:e})));const o=n=>{const r=(n?"symbol:":"other:")+e,o=this._sourceCaches[r]=new t.SourceCache(r,i,n);(n?this._symbolSourceCaches:this._otherSourceCaches)[e]=o,o.style=this,o.onAdd(this.map)};o(!1),"vector"!==n.type&&"geojson"!==n.type||o(!0),i.onAdd&&i.onAdd(this.map),this._changed=!0}removeSource(e){this._checkLoaded();const n=this.getSource(e);if(!n)throw new Error("There is no source with this ID");for(const i in this._layers)if(this._layers[i].source===e)return this.fire(new t.ErrorEvent(new Error(`Source "${e}" cannot be removed while layer "${i}" is using it.`)));if(this.terrain&&this.terrain.get().source===e)return this.fire(new t.ErrorEvent(new Error(`Source "${e}" cannot be removed while terrain is using it.`)));const r=this._getSourceCaches(e);for(const i of r)delete this._sourceCaches[i.id],delete this._updatedSources[i.id],i.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:i.getSource().id})),i.setEventedParent(null),i.clearTiles();return delete this._otherSourceCaches[e],delete this._symbolSourceCaches[e],n.setEventedParent(null),n.onRemove&&n.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(t,e){this._checkLoaded(),this.getSource(t).setData(e),this._changed=!0}getSource(t){const e=this._getSourceCache(t);return e&&e.getSource()}_getSources(){const t=[];for(const e in this._otherSourceCaches){const n=this._getSourceCache(e);n&&t.push(n.getSource())}return t}addLayer(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const i=e.id;if(this.getLayer(i))return void this.fire(new t.ErrorEvent(new Error(`Layer with id "${i}" already exists on this map`)));let o;if("custom"===e.type){if(We(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(i,e.source),e=t.clone$1(e),e=t.extend(e,{source:i})),this._validate(t.validateLayer,`layers.${i}`,e,{arrayIndex:-1},r))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[o.id]=o.serialize(),this._updateLayerCount(o,!0)}const a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)return void this.fire(new t.ErrorEvent(new Error(`Layer with id "${n}" does not exist on this map.`)));this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o;const s=this._getLayerSourceCache(o);if(this._removedLayers[i]&&o.source&&s&&"custom"!==o.type){const t=this._removedLayers[i];delete this._removedLayers[i],t.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",s.pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(e,n){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===n)return;const r=this._order.indexOf(e);this._order.splice(r,1);const i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new t.ErrorEvent(new Error(`Layer with id "${n}" does not exist on this map.`))):(this._order.splice(i,0,e),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(e){this._checkLoaded();const n=this._layers[e];if(!n)return void this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be removed.`)));n.setEventedParent(null),this._updateLayerCount(n,!1);const r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(t){return this._layers[t]}hasLayer(t){return t in this._layers}hasLayerType(t){for(const e in this._layers)if(this._layers[e].type===t)return!0;return!1}setLayerZoomRange(e,n,r){this._checkLoaded();const i=this.getLayer(e);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(n,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const o=this.getLayer(n);if(o){if(!e(o.filter,r))return null==r?(o.filter=void 0,void this._updateLayer(o)):void(this._validate(t.validateFilter,`layers.${o.id}.filter`,r,{layerType:o.type},i)||(o.filter=t.clone$1(r),this._updateLayer(o)))}else this.fire(new t.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be filtered.`)))}getFilter(e){const n=this.getLayer(e);return n&&t.clone$1(n.filter)}setLayoutProperty(n,r,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();const a=this.getLayer(n);a?e(a.getLayoutProperty(r),i)||(a.setLayoutProperty(r,i,o),this._updateLayer(a)):this.fire(new t.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(e,n){const r=this.getLayer(e);if(r)return r.getLayoutProperty(n);this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style.`)))}setPaintProperty(n,r,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();const a=this.getLayer(n);a?e(a.getPaintProperty(r),i)||(a.setPaintProperty(r,i,o)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new t.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(t,e){const n=this.getLayer(t);return n&&n.getPaintProperty(e)}setFeatureState(e,n){this._checkLoaded();const r=e.source,i=e.sourceLayer,o=this.getSource(r);if(!o)return void this.fire(new t.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const a=o.type;if("geojson"===a&&i)return void this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===a&&!i)return void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided.")));const s=this._getSourceCaches(r);for(const t of s)t.setFeatureState(i,e.id,n)}removeFeatureState(e,n){this._checkLoaded();const r=e.source,i=this.getSource(r);if(!i)return void this.fire(new t.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const o=i.type,a="vector"===o?e.sourceLayer:void 0;if("vector"===o&&!a)return void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(n&&"string"!=typeof e.id&&"number"!=typeof e.id)return void this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const s=this._getSourceCaches(r);for(const t of s)t.removeFeatureState(a,e.id,n)}getFeatureState(e){this._checkLoaded();const n=e.source,r=e.sourceLayer,i=this.getSource(n);if(i){if("vector"!==i.type||r)return void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(n)[0].getFeatureState(r,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)))}getTransition(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const e={};for(const t in this._sourceCaches){const n=this._sourceCaches[t].getSource();e[n.id]||(e[n.id]=n.serialize())}return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:e,layers:this._serializeLayers(this._order)},(t=>void 0!==t))}_updateLayer(t){this._updatedLayers[t.id]=!0;const e=this._getLayerSourceCache(t);t.source&&!this._updatedSources[t.source]&&e&&"raster"!==e.getSource().type&&(this._updatedSources[t.source]="reload",e.pause()),this._changed=!0,t.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(t){const e=t=>"fill-extrusion"===this._layers[t].type,n={},r=[];for(let o=this._order.length-1;o>=0;o--){const i=this._order[o];if(e(i)){n[i]=o;for(const e of t){const t=e[i];if(t)for(const e of t)r.push(e)}}}r.sort(((t,e)=>e.intersectionZ-t.intersectionZ));const i=[];for(let o=this._order.length-1;o>=0;o--){const a=this._order[o];if(e(a))for(let t=r.length-1;t>=0;t--){const e=r[t].feature;if(n[e.layer.id]<o)break;i.push(e),r.pop()}else for(const e of t){const t=e[a];if(t)for(const e of t)i.push(e.feature)}}return i}queryRenderedFeatures(e,n,r){n&&n.filter&&this._validate(t.validateFilter,"queryRenderedFeatures.filter",n.filter,null,n);const i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const e of n.layers){const n=this._layers[e];if(!n)return this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be queried for features.`))),[];i[n.source]=!0}}const o=[];n.availableImages=this._availableImages;const a=n&&n.layers?n.layers.some((t=>{const e=this.getLayer(t);return e&&e.is3D()})):this.has3DLayers(),s=O.createFromScreenPoints(e,r);for(const t in this._sourceCaches){const e=this._sourceCaches[t].getSource().id;n.layers&&!i[e]||o.push(At(this._sourceCaches[t],this._layers,this._serializedLayers,s,n,r,a,!!this.map._showQueryGeometry))}return this.placement&&o.push(function(t,e,n,r,i,o,a){const s={},l=o.queryRenderedSymbols(r),c=[];for(const u of Object.keys(l).map(Number))c.push(a[u]);c.sort(Rt);for(const u of c){const n=u.featureIndex.lookupSymbolFeatures(l[u.bucketInstanceId],e,u.bucketIndex,u.sourceLayerIndex,i.filter,i.layers,i.availableImages,t);for(const t in n){const e=s[t]=s[t]||[],r=n[t];r.sort(((t,e)=>{const n=u.featureSortOrder;if(n){const r=n.indexOf(t.featureIndex);return n.indexOf(e.featureIndex)-r}return e.featureIndex-t.featureIndex}));for(const t of r)e.push(t)}}for(const u in s)s[u].forEach((e=>{const r=e.feature,i=n(t[u]);if(!i)return;const o=i.getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=o}));return s}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),s.screenGeometry,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(e,n){n&&n.filter&&this._validate(t.validateFilter,"querySourceFeatures.filter",n.filter,null,n);const r=this._getSourceCaches(e);let i=[];for(const t of r)i=i.concat(Dt(t,n));return i}addSourceType(t,e,n){return Ke.getSourceType(t)?n(new Error(`A source type called "${t}" already exists.`)):(Ke.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))}getLight(){return this.light.getLight()}setLight(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();const r=this.light.getLight();let i=!1;for(const a in t)if(!e(t[a],r[a])){i=!0;break}if(!i)return;const o=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(t,n),this.light.updateTransitions(o)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._checkLoaded(),!n)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let i=n;if(1===r){if("object"==typeof i.source){const e="terrain-dem-src";this.addSource(e,i.source),i=t.clone$1(i),i=t.extend(i,{source:e})}if(this._validate(t.validateTerrain,"terrain",i))return}if(!this.terrain||this.terrain&&r!==this.terrain.drapeRenderMode){if(!i)return;this._createTerrain(i,r)}else{const n=this.terrain,r=n.get();for(const e of Object.keys(t.spec.terrain))!i.hasOwnProperty(e)&&t.spec.terrain[e].default&&(i[e]=t.spec.terrain[e].default);for(const t in i)if(!e(i[t],r[t])){n.set(i),this.stylesheet.terrain=i;const t=this._setTransitionParameters({duration:0});n.updateTransitions(t);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(t){const e=this.fog=new T(t,this.map.transform);this.stylesheet.fog=t;const n=this._setTransitionParameters({duration:0});e.updateTransitions(n)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask((()=>{for(const t of this.map._markers)t._evaluateOpacity()}))}getFog(){return this.fog?this.fog.get():null}setFog(t){if(this._checkLoaded(),!t)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const n=this.fog,r=n.get();0===Object.keys(t).length&&n.set(t);for(const i in t)if(!e(t[i],r[i])){n.set(t),this.stylesheet.fog=t;const e=this._setTransitionParameters({duration:0});n.updateTransitions(e);break}}else this._createFog(t);this._markersNeedUpdate=!0}_setTransitionParameters(e){return{now:t.exported.now(),transition:t.extend(e,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const t=this._order.filter((t=>this.isLayerDraped(this._layers[t]))),e=this._order.filter((t=>!this.isLayerDraped(this._layers[t])));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...t),this._drapedFirstOrder.push(...e)}_createTerrain(t,e){const n=this.terrain=new C(t,e);this.stylesheet.terrain=t,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const r=this._setTransitionParameters({duration:0});n.updateTransitions(r)}_force3DLayerUpdate(){for(const t in this._layers){const e=this._layers[t];"fill-extrusion"===e.type&&this._updateLayer(e)}}_forceSymbolLayerUpdate(){for(const t in this._layers){const e=this._layers[t];"symbol"===e.type&&this._updateLayer(e)}}_validate(e,n,r,i){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!o||!1!==o.validate)&&We(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:r,styleSpec:t.spec},i)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this._sourceCaches)this._sourceCaches[t].clearTiles(),this._sourceCaches[t].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(t){const e=this._getSourceCaches(t);for(const n of e)n.clearTiles()}_reloadSource(t){const e=this._getSourceCaches(t);for(const n of e)n.resume(),n.reload()}_reloadSources(){for(const t of this._getSources())t.reload&&t.reload()}_updateSources(t){for(const e in this._sourceCaches)this._sourceCaches[e].update(t)}_generateCollisionBoxes(){for(const t in this._sourceCaches){const e=this._sourceCaches[t];e.resume(),e.reload()}}_updatePlacement(e,n,r,i){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=!1,s=!1;const l={};for(const t of this._order){const n=this._layers[t];if("symbol"!==n.type)continue;if(!l[n.source]){const t=this._getLayerSourceCache(n);if(!t)continue;l[n.source]=t.getRenderableIds(!0).map((e=>t.getTileByID(e))).sort(((t,e)=>e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)))}const r=this.crossTileSymbolIndex.addLayer(n,l[n.source],e.center.lng,e.projection);a=a||r}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),o=o||this._layerOrderChanged||0===r,this._layerOrderChanged&&this.fire(new t.Event("neworder")),(o||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.exported.now(),e.zoom))&&(this.pauseablePlacement=new $e(e,this._order,o,n,r,i,this.placement,this.fog&&e.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.exported.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(const t of this._order){const e=this._layers[t];"symbol"===e.type&&this.placement.updateLayerOpacities(e,l[e.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.exported.now())}_releaseSymbolFadeTiles(){for(const t in this._sourceCaches)this._sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,e,n){this.imageManager.getImages(e.icons,n),this._updateTilesForChangedImages();const r=t=>{t&&t.setDependencies(e.tileID.key,e.type,e.icons)};r(this._otherSourceCaches[e.source]),r(this._symbolSourceCaches[e.source])}getGlyphs(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)}getResource(e,n,r){return t.makeRequest(n,r)}_getSourceCache(t){return this._otherSourceCaches[t]}_getLayerSourceCache(t){return"symbol"===t.type?this._symbolSourceCaches[t.source]:this._otherSourceCaches[t.source]}_getSourceCaches(t){const e=[];return this._otherSourceCaches[t]&&e.push(this._otherSourceCaches[t]),this._symbolSourceCaches[t]&&e.push(this._symbolSourceCaches[t]),e}_isSourceCacheLoaded(e){const n=this._getSourceCaches(e);return 0===n.length?(this.fire(new t.ErrorEvent(new Error(`There is no source with ID '${e}'`))),!1):n.every((t=>t.loaded()))}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Ke.getSourceType=function(t){return It[t]},Ke.setSourceType=function(t,e){It[t]=e},Ke.registerForPluginStateChange=t.registerForPluginStateChange;var Je="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",Qe="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",tn="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",en="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",nn="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let rn={},on={};const an=[];hn(Je,an),hn(tn,an),hn(en,an),hn(nn,an),rn=pn("",tn),on=pn(nn,en);const sn=pn("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),ln=Je,cn="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var un={background:pn("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:pn("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:pn("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:pn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:pn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:pn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:pn("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:pn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:pn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:pn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:pn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:pn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:pn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:pn("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:pn("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:pn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:pn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:pn("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:pn("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:pn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:pn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:pn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:pn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:pn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:pn("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:pn("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Qe),skyboxGradient:pn("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Qe),skyboxCapture:pn("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:pn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:pn("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function hn(t,e){const n=t.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let r of n)if(r=r.trim(),"#"===r[0]&&r.includes("if")&&!r.includes("endif")){r=r.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const t=r.split(" ");for(const n of t)e.includes(n)||e.push(n)}}function pn(t,e){const n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=e.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),i={},o=[...an];return hn(t,o),hn(e,o),{fragmentSource:t=t.replace(n,((t,e,n,r,o)=>(i[o]=!0,"define"===e?`\n#ifndef HAS_UNIFORM_u_${o}\nvarying ${n} ${r} ${o};\n#else\nuniform ${n} ${r} u_${o};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${o}\n    ${n} ${r} ${o} = u_${o};\n#endif\n`))),vertexSource:e=e.replace(n,((t,e,n,r,o)=>{const a="float"===r?"vec2":"vec4",s=o.match(/color/)?"color":a;return i[o]?"define"===e?`\n#ifndef HAS_UNIFORM_u_${o}\nuniform lowp float u_${o}_t;\nattribute ${n} ${a} a_${o};\nvarying ${n} ${r} ${o};\n#else\nuniform ${n} ${r} u_${o};\n#endif\n`:"vec4"===s?`\n#ifndef HAS_UNIFORM_u_${o}\n    ${o} = a_${o};\n#else\n    ${n} ${r} ${o} = u_${o};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${o}\n    ${o} = unpack_mix_${s}(a_${o}, u_${o}_t);\n#else\n    ${n} ${r} ${o} = u_${o};\n#endif\n`:"define"===e?`\n#ifndef HAS_UNIFORM_u_${o}\nuniform lowp float u_${o}_t;\nattribute ${n} ${a} a_${o};\n#else\nuniform ${n} ${r} u_${o};\n#endif\n`:"vec4"===s?`\n#ifndef HAS_UNIFORM_u_${o}\n    ${n} ${r} ${o} = a_${o};\n#else\n    ${n} ${r} ${o} = u_${o};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${o}\n    ${n} ${r} ${o} = unpack_mix_${s}(a_${o}, u_${o}_t);\n#else\n    ${n} ${r} ${o} = u_${o};\n#endif\n`})),staticAttributes:r,usedDefines:o}}class dn{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(t,e,n,r,i,o,a){this.context=t;let s=this.boundPaintVertexBuffers.length!==r.length;for(let c=0;!s&&c<r.length;c++)this.boundPaintVertexBuffers[c]!==r[c]&&(s=!0);let l=this.boundDynamicVertexBuffers.length!==a.length;for(let c=0;!l&&c<a.length;c++)this.boundDynamicVertexBuffers[c]!==a[c]&&(l=!0);if(!t.extVertexArrayObject||!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==n||s||l||this.boundIndexBuffer!==i||this.boundVertexOffset!==o)this.freshBind(e,n,r,i,o,a);else{t.bindVertexArrayOES.set(this.vao);for(const t of a)t&&t.bind();i&&i.dynamicDraw&&i.bind()}}freshBind(t,e,n,r,i,o){let a;const s=t.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),a=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffers=o;else{a=l.currentNumAttributes||0;for(let t=s;t<a;t++)c.disableVertexAttribArray(t)}e.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,i);for(const u of n)u.enableAttributes(c,t),u.bind(),u.setVertexAttribPointers(c,t,i);for(const u of o)u&&(u.enableAttributes(c,t),u.bind(),u.setVertexAttribPointers(c,t,i));r&&r.bind(),l.currentNumAttributes=s}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function fn(e,n){const r=Math.pow(2,n.canonical.z),i=n.canonical.y;return[new t.MercatorCoordinate(0,i/r).toLngLat().lat,new t.MercatorCoordinate(0,(i+1)/r).toLngLat().lat]}function gn(e,n,r,i,o,a,s){const l=e.context,c=l.gl,u=r.fbo;if(!u)return;e.prepareDrawTile();const h=e.useProgram("hillshade");l.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,u.colorAttachment.get());const p=((t,e,n,r)=>{const i=n.paint.get("hillshade-shadow-color"),o=n.paint.get("hillshade-highlight-color"),a=n.paint.get("hillshade-accent-color");let s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=t.transform.angle);const l=!t.options.moving;return{u_matrix:r||t.transform.calculateProjMatrix(e.tileID.toUnwrapped(),l),u_image:0,u_latrange:fn(0,e.tileID),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:o,u_accent:a}})(e,r,i,e.terrain?n.projMatrix:null);e.prepareDrawProgram(l,h,n.toUnwrapped());const{tileBoundsBuffer:d,tileBoundsIndexBuffer:f,tileBoundsSegments:g}=e.getTileBoundsBuffers(r);h.draw(l,c.TRIANGLES,o,a,s,t.CullFaceMode.disabled,p,i.id,d,f,g)}function mn(e,n,r){if(!n.needsDEMTextureUpload)return;const i=e.context,o=i.gl;i.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(r.stride);const a=r.getPixels();n.demTexture?n.demTexture.update(a,{premultiply:!1}):n.demTexture=new t.Texture(i,a,o.RGBA,{premultiply:!1}),n.needsDEMTextureUpload=!1}function yn(e,n,r,i,o,a){const s=e.context,l=s.gl;if(!n.dem)return;const c=n.dem;if(s.activeTexture.set(l.TEXTURE1),mn(e,n,c),!n.demTexture)return;n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);const u=c.dim;s.activeTexture.set(l.TEXTURE0);let h=n.fbo;if(!h){const e=new t.Texture(s,{width:u,height:u,data:null},l.RGBA);e.bind(l.LINEAR,l.CLAMP_TO_EDGE),h=n.fbo=s.createFramebuffer(u,u,!0),h.colorAttachment.set(e.texture)}s.bindFramebuffer.set(h.framebuffer),s.viewport.set([0,0,u,u]);const{tileBoundsBuffer:p,tileBoundsIndexBuffer:d,tileBoundsSegments:f}=e.getMercatorTileBoundsBuffers();e.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,i,o,a,t.CullFaceMode.disabled,((e,n)=>{const r=n.stride,i=t.create();return t.ortho(i,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(i,i,[0,-t.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:e.overscaledZ,u_unpack:n.unpackVector}})(n.tileID,c),r.id,p,d,f),n.needsHillshadePrepare=!1}const vn=e=>({u_matrix:new t.UniformMatrix4f(e),u_image0:new t.Uniform1i(e),u_skirt_height:new t.Uniform1f(e)}),xn=(t,e)=>({u_matrix:t,u_image0:0,u_skirt_height:e}),_n=(t,e,n,r,i,o,a,s,l,c,u,h,p,d,f)=>({u_proj_matrix:Float32Array.from(t),u_globe_matrix:e,u_normalize_matrix:Float32Array.from(r),u_merc_matrix:n,u_zoom_transition:i,u_merc_center:o,u_image0:0,u_frustum_tl:a,u_frustum_tr:s,u_frustum_br:l,u_frustum_bl:c,u_globe_pos:u,u_globe_radius:h,u_viewport:p,u_grid_matrix:f?Float32Array.from(f):new Float32Array(9),u_skirt_height:d});function bn(t,e){return null!=t&&null!=e&&!(!t.hasData()||!e.hasData())&&null!=t.demTexture&&null!=e.demTexture&&t.tileID.key!==e.tileID.key}const wn=new class{constructor(){this.operations={}}newMorphing(t,e,n,r,i){if(t in this.operations){const e=this.operations[t];e.to.tileID.key!==n.tileID.key&&(e.queued=n)}else this.operations[t]={startTime:r,phase:0,duration:i,from:e,to:n,queued:null}}getMorphValuesForProxy(t){if(!(t in this.operations))return null;const e=this.operations[t];return{from:e.from,to:e.to,phase:e.phase}}update(t){for(const e in this.operations){const n=this.operations[e];for(n.phase=(t-n.startTime)/n.duration;n.phase>=1||!this._validOp(n);)if(!this._nextOp(n,t)){delete this.operations[e];break}}}_nextOp(t,e){return!!t.queued&&(t.from=t.to,t.to=t.queued,t.queued=null,t.phase=0,t.startTime=e,!0)}_validOp(t){return t.from.hasData()&&t.to.hasData()}},Sn={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Cn(t){return 6*Math.pow(1.5,22-t)}function En(t,e){const n=1<<t.z;return!e&&(0===t.x||t.x===n-1)||0===t.y||t.y===n-1}const kn=t=>({u_matrix:t});function Mn(e,n,r,i,o){if(o>0){const a=t.exported.now(),s=(a-e.timeAdded)/o,l=n?(a-n.timeAdded)/o:-1,c=r.getSource(),u=i.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-u)>Math.abs(e.tileID.overscaledZ-u),p=h&&e.refreshedUponExpiration?1:t.clamp(h?s:1-l,0,1);return e.refreshedUponExpiration&&s>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}class Tn extends t.SourceCache{constructor(t){const e={type:"raster-dem",maxzoom:t.transform.maxZoom},n=new I(Bt(),null),r=Pt("mock-dem",e,n,t.style);super("mock-dem",r,!1),r.setEventedParent(this),this._sourceLoaded=!0}_loadTile(t,e){t.state="loaded",e(null)}}class In extends t.SourceCache{constructor(t){const e=Pt("proxy",{type:"geojson",maxzoom:t.transform.maxZoom},new I(Bt(),null),t.style);super("proxy",e,!1),e.setEventedParent(this),this.map=this.getSource().map=t,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(e,n,r){if(e.freezeTileCoverage)return;this.transform=e;const i=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce(((n,r)=>{if(n[r.key]="",!this._tiles[r.key]){const n=new t.Tile(r,this._source.tileSize*r.overscaleFactor(),e.tileZoom);n.state="loaded",this._tiles[r.key]=n}return n}),{});for(const t in this._tiles)t in i||(this.freeFBO(t),this._tiles[t].unloadVectorData(),delete this._tiles[t])}freeFBO(t){const e=this.proxyCachedFBO[t];if(void 0!==e){const n=Object.values(e);this.renderCachePool.push(...n),delete this.proxyCachedFBO[t]}}deallocRenderCache(){this.renderCache.forEach((t=>t.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Pn extends t.OverscaledTileID{constructor(t,e,n){super(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y),this.proxyTileKey=e,this.projMatrix=n}}class On extends t.Elevation{constructor(e,n){super(),this.painter=e,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[r,i,o]=function(e){const n=new t.StructArrayLayout2i4,r=new t.StructArrayLayout3ui6,i=131;n.reserve(17161),r.reserve(33800);const o=t.EXTENT/128,a=t.EXTENT+o/2,s=a+o;for(let c=-o;c<s;c+=o)for(let e=-o;e<s;e+=o){const r=e<0||e>a||c<0||c>a?24575:0,i=t.clamp(Math.round(e),0,t.EXTENT),o=t.clamp(Math.round(c),0,t.EXTENT);n.emplaceBack(i+r,o)}const l=(t,e)=>{const n=e*i+t;r.emplaceBack(n+1,n,n+i),r.emplaceBack(n+i,n+i+1,n+1)};for(let t=1;t<129;t++)for(let e=1;e<129;e++)l(e,t);return[0,129].forEach((t=>{for(let e=0;e<130;e++)l(e,t),l(t,e)})),[n,r,32768]}(),a=e.context;this.gridBuffer=a.createVertexBuffer(r,t.posAttributes.members),this.gridIndexBuffer=a.createIndexBuffer(i),this.gridSegments=t.SegmentVector.simpleSegment(0,0,r.length,i.length),this.gridNoSkirtSegments=t.SegmentVector.simpleSegment(0,0,r.length,o),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new In(n.map),this.orthoMatrix=t.create(),t.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,t.EXTENT,0,t.EXTENT,0,1);const s=a.gl;this._overlapStencilMode=new t.StencilMode({func:s.GEQUAL,mask:255},0,255,s.KEEP,s.KEEP,s.REPLACE),this._previousZoom=e.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=n,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Tn(n.map)}set style(t){t.on("data",this._onStyleDataEvent.bind(this)),t.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=t,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",(()=>{this._clearLineLayersFromRenderCache()}))}update(e,n,r){if(e&&e.terrain){this._style!==e&&(this.style=e),this.enabled=!0;const i=e.terrain.properties;this.sourceCache=0===e.terrain.drapeRenderMode?this._mockSourceCache:e._getSourceCache(i.get("source")),this._exaggeration=i.get("exaggeration");const o=()=>{this.sourceCache.used&&t.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const e=this.getScaledDemTileSize();this.sourceCache.update(n,e,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,o(),this._initializing=!0),o(),n.updateElevation(!0,r),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(n),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(t){this._findCoveringTileCache[t]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const e=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==e.efficiency&&t.warnOnce(`Terrain render cache efficiency is not optimal (${e.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${e.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(t){t.coord&&"source"===t.dataType?this._clearRenderCacheForTile(t.sourceCacheId,t.coord):"style"===t.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const t in this._style._sourceCaches)this._style._sourceCaches[t].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((t=>t.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const t=2*this.proxySourceCache.getSource().tileSize;return[t,t]}set useVertexMorphing(t){this._useVertexMorphing=t}updateTileBinding(e){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const n=this.proxySourceCache,r=this.painter.transform;this._initializing&&(this._initializing=0===r._centerAltitude&&-1===this.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(r.center),-1),this._emptyDEMTextureDirty=!this._initializing);const i=this.proxyCoords=n.getIds().map((t=>{const e=n.getTileByID(t).tileID;return e.projMatrix=r.calculateProjMatrix(e.toUnwrapped()),e}));!function(e,n){const r=n.transform.pointCoordinate(n.transform.getCameraPoint()),i=new t.Point(r.x,r.y);e.sort(((e,n)=>{if(n.overscaledZ-e.overscaledZ)return n.overscaledZ-e.overscaledZ;const r=new t.Point(e.canonical.x+(1<<e.canonical.z)*e.wrap,e.canonical.y),o=new t.Point(n.canonical.x+(1<<n.canonical.z)*n.wrap,n.canonical.y),a=i.mult(1<<e.canonical.z);return a.x-=.5,a.y-=.5,a.distSqr(r)-a.distSqr(o)}))}(i,this.painter),this._previousZoom=r.zoom;const o=this.proxyToSource||{};this.proxyToSource={},i.forEach((t=>{this.proxyToSource[t.key]={}})),this.terrainTileForTile={};const a=this._style._sourceCaches;for(const t in a){const n=a[t];if(!n.used)continue;if(n!==this.sourceCache&&this.resetTileLookupCache(n.id),this._setupProxiedCoordsForOrtho(n,e[t],o),n.usedForTerrain)continue;const r=e[t];n.getSource().reparseOverscaled&&this._assignTerrainTiles(r)}this.proxiedCoords[n.id]=i.map((t=>new Pn(t,t.key,this.orthoMatrix))),this._assignTerrainTiles(i),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(o),this.renderingToTexture=!1,this._updateTimestamp=t.exported.now();const s={};this._visibleDemTiles=[];for(const t of this.proxyCoords){const e=this.terrainTileForTile[t.key];if(!e)continue;const n=e.tileID.key;n in s||(this._visibleDemTiles.push(e),s[n]=n)}}_assignTerrainTiles(t){this._initializing||t.forEach((t=>{if(this.terrainTileForTile[t.key])return;const e=this._findTileCoveringTileID(t,this.sourceCache);e&&(this.terrainTileForTile[t.key]=e)}))}_prepareDEMTextures(){const t=this.painter.context,e=t.gl;for(const n in this.terrainTileForTile){const r=this.terrainTileForTile[n],i=r.dem;!i||r.demTexture&&!r.needsDEMTextureUpload||(t.activeTexture.set(e.TEXTURE1),mn(this.painter,r,i))}}_prepareDemTileUniforms(t,e,n,r){if(!e||null==e.demTexture)return!1;const i=t.tileID.canonical,o=Math.pow(2,e.tileID.canonical.z-i.z),a=r||"";return n[`u_dem_tl${a}`]=[i.x*o%1,i.y*o%1],n[`u_dem_scale${a}`]=o,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const e=this.painter.context,n=e.gl;if(!this._emptyDepthBufferTexture){const r=new t.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new t.Texture(e,r,n.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let t=0;const e=this._visibleDemTiles.reduce(((e,n)=>{if(!n.dem)return e;const r=n.dem.tree.minimums[0];return r>0&&t++,e+r}),0);return t?e/t:0}_updateEmptyDEMTexture(){const e=this.painter.context,n=e.gl;e.activeTexture.set(n.TEXTURE2);const r=this._getLoadedAreaMinimum(),i=new t.RGBAImage({width:1,height:1},new Uint8Array(t.DEMData.pack(r,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let o=this._emptyDEMTexture;return o?o.update(i,{premultiply:!1}):o=this._emptyDEMTexture=new t.Texture(e,i,n.RGBA,{premultiply:!1}),o}setupElevationDraw(e,n,r){const i=this.painter.context,o=i.gl,a=(s=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:t.DEMData.getUnpackVector(s),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var s;a.u_dem_size=this.sourceCache.getSource().tileSize,a.u_exaggeration=this.exaggeration();let l=null,c=null,u=1;if(r&&r.morphing&&this._useVertexMorphing){const t=r.morphing.srcDemTile,n=r.morphing.dstDemTile;u=r.morphing.phase,t&&n&&(this._prepareDemTileUniforms(e,t,a,"_prev")&&(c=t),this._prepareDemTileUniforms(e,n,a)&&(l=n))}if(c&&l?(i.activeTexture.set(o.TEXTURE2),l.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),i.activeTexture.set(o.TEXTURE4),c.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),a.u_dem_lerp=u):(l=this.terrainTileForTile[e.tileID.key],i.activeTexture.set(o.TEXTURE2),(this._prepareDemTileUniforms(e,l,a)?l.demTexture:this.emptyDEMTexture).bind(o.NEAREST,o.CLAMP_TO_EDGE)),i.activeTexture.set(o.TEXTURE3),r&&r.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),this._depthFBO&&(a.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),a.u_depth_size_inv=[1,1]),r&&r.useMeterToDem&&l){const e=(1<<l.tileID.canonical.z)*t.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;a.u_meter_to_dem=e}if(r&&r.labelPlaneMatrixInv&&(a.u_label_plane_matrix_inv=r.labelPlaneMatrixInv),n.setTerrainUniformValues(i,a),"globe"===this.painter.transform.projection.name){const t=this.globeUniformValues(this.painter.transform,e.tileID.canonical,r&&r.useDenormalizedUpVectorScale);n.setGlobeUniformValues(i,t)}}globeUniformValues(e,n,r){const i=e.projection;return{u_tile_tl_up:i.upVector(n,0,0),u_tile_tr_up:i.upVector(n,t.EXTENT,0),u_tile_br_up:i.upVector(n,t.EXTENT,t.EXTENT),u_tile_bl_up:i.upVector(n,0,t.EXTENT),u_tile_up_scale:r?t.globeMetersToEcef(1):i.upVectorScale(n,e.center.lat,e.worldSize).metersToTile}}renderToBackBuffer(e){const n=this.painter,r=this.painter.context;0!==e.length&&(r.bindFramebuffer.set(null),r.viewport.set([0,0,n.width,n.height]),n.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(e,n,r,i,o){if("globe"===e.transform.projection.name)!function(e,n,r,i,o){const a=e.context,s=a.gl;let l,c;const u=e.options.showTerrainWireframe?2:0,h=e.transform,p=t.globeUseCustomAntiAliasing(e,a,h),d=(t,n)=>{if(c===t)return;const r=[Sn[t],"PROJECTION_GLOBE_VIEW"];p&&r.push("CUSTOM_ANTIALIASING"),n&&r.push(Sn[u]),l=e.useProgram("globeRaster",null,r),c=t},f=e.colorModeForRenderPass(),g=new t.DepthMode(s.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);wn.update(o);const m=t.calculateGlobeMercatorMatrix(h),y=[t.mercatorXfromLng(h.center.lng),t.mercatorYfromLat(h.center.lat)],v=u?[!1,!0]:[!1],x=e.globeSharedBuffers,_=[h.width*t.exported.devicePixelRatio,h.height*t.exported.devicePixelRatio],b=Float32Array.from(h.globeMatrix),w={useDenormalizedUpVectorScale:!0};if(v.forEach((u=>{const h=e.transform,p=Cn(h.zoom)*n.exaggeration();c=-1;const v=u?s.LINES:s.TRIANGLES;for(const c of i){const i=r.getTile(c),S=t.StencilMode.disabled,C=n.prevTerrainTileForTile[c.key],E=n.terrainTileForTile[c.key];bn(C,E)&&wn.newMorphing(c.key,C,E,o,250),a.activeTexture.set(s.TEXTURE0),i.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE);const k=wn.getMorphValuesForProxy(c.key),M=k?1:0;k&&t.extend$1(w,{morphing:{srcDemTile:k.from,dstDemTile:k.to,phase:t.easeCubicInOut(k.phase)}});const T=t.tileCornersToBounds(c.canonical),I=t.getLatitudinalLod(T.getCenter().lat),P=t.getGridMatrix(c.canonical,T,I,h.worldSize/h._pixelsPerMercatorPixel),O=t.globeNormalizeECEF(t.globeTileBounds(c.canonical)),A=_n(h.projMatrix,b,m,O,t.globeToMercatorTransition(h.zoom),y,h.frustumCorners.TL,h.frustumCorners.TR,h.frustumCorners.BR,h.frustumCorners.BL,h.globeCenterInViewSpace,h.globeRadius,_,p,P);if(d(M,u),n.setupElevationDraw(i,l,w),e.prepareDrawProgram(a,l,c.toUnwrapped()),x){const[n,r,i]=u?x.getWirefameBuffers(e.context,I):x.getGridBuffers(I,0!==p);l.draw(a,v,g,S,f,t.CullFaceMode.backCCW,A,"globe_raster",n,r,i)}}})),x){const o=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];p&&o.push("CUSTOM_ANTIALIASING"),l=e.useProgram("globeRaster",null,o);for(const c of i){const{x:i,y:o,z:u}=c.canonical,p=0===o,d=o===(1<<u)-1,[m,v,b,S]=x.getPoleBuffers(u);if(S&&(p||d)){const o=r.getTile(c);a.activeTexture.set(s.TEXTURE0),o.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE);let x=t.globePoleMatrixForTile(u,i,h);const C=t.globeNormalizeECEF(t.globeTileBounds(c.canonical)),E=(e,n)=>e.draw(a,s.TRIANGLES,g,t.StencilMode.disabled,f,t.CullFaceMode.disabled,_n(h.projMatrix,x,x,C,0,y,h.frustumCorners.TL,h.frustumCorners.TR,h.frustumCorners.BR,h.frustumCorners.BL,h.globeCenterInViewSpace,h.globeRadius,_,0),"globe_pole_raster",n,b,S);n.setupElevationDraw(o,l,w),e.prepareDrawProgram(a,l,c.toUnwrapped()),p&&E(l,m),d&&(x=t.scale(t.create(),x,[1,-1,1]),E(l,v))}}}}(e,n,r,i,o);else{const a=e.context,s=a.gl;let l,c;const u=e.options.showTerrainWireframe?2:0,h=(t,n)=>{if(c===t)return;const r=[Sn[t]];n&&r.push(Sn[u]),l=e.useProgram("terrainRaster",null,r),c=t},p=e.colorModeForRenderPass(),d=new t.DepthMode(s.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);wn.update(o);const f=e.transform,g=Cn(f.zoom)*n.exaggeration();(u?[!1,!0]:[!1]).forEach((u=>{c=-1;const m=u?s.LINES:s.TRIANGLES,[y,v]=u?n.getWirefameBuffer():[n.gridIndexBuffer,n.gridSegments];for(const c of i){const i=r.getTile(c),x=t.StencilMode.disabled,_=n.prevTerrainTileForTile[c.key],b=n.terrainTileForTile[c.key];bn(_,b)&&wn.newMorphing(c.key,_,b,o,250),a.activeTexture.set(s.TEXTURE0),i.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST);const w=wn.getMorphValuesForProxy(c.key),S=w?1:0;let C;w&&(C={morphing:{srcDemTile:w.from,dstDemTile:w.to,phase:t.easeCubicInOut(w.phase)}});const E=xn(c.projMatrix,En(c.canonical,f.renderWorldCopies)?g/10:g);h(S,u),n.setupElevationDraw(i,l,C),e.prepareDrawProgram(a,l,c.toUnwrapped()),l.draw(a,m,d,x,p,t.CullFaceMode.backCCW,E,"terrain_raster",n.gridBuffer,y,v)}}))}}(n,this,this.proxySourceCache,e,this._updateTimestamp),this.renderingToTexture=!0,n.gpuTimingDeferredRenderEnd(),e.splice(0,e.length))}renderBatch(e){if(0===this._drapedRenderBatches.length)return e+1;this.renderingToTexture=!0;const n=this.painter,r=this.painter.context,i=this.proxySourceCache,o=this.proxiedCoords[i.id],a=this._drapedRenderBatches.shift(),s=[],l=n.style.order;let c=0;for(const u of o){const o=i.getTileByID(u.proxyTileKey),h=i.proxyCachedFBO[u.key]?i.proxyCachedFBO[u.key][e]:void 0,p=void 0!==h?i.renderCache[h]:this.pool[c++],d=void 0!==h;if(o.texture=p.tex,d&&!p.dirty){s.push(o.tileID);continue}let f;r.bindFramebuffer.set(p.fb.framebuffer),this.renderedToTile=!1,p.dirty&&(r.clear({color:t.Color.transparent,stencil:0}),p.dirty=!1);for(let t=a.start;t<=a.end;++t){const e=n.style._layers[l[t]];if(e.isHidden(n.transform.zoom))continue;const i=n.style._getLayerSourceCache(e),o=i?this.proxyToSource[u.key][i.id]:[u];if(!o)continue;const a=o;r.viewport.set([0,0,p.fb.width,p.fb.height]),f!==(i?i.id:null)&&(this._setupStencil(p,o,e,i),f=i?i.id:null),n.renderLayer(n,i,e,a)}this.renderedToTile?(p.dirty=!0,s.push(o.tileID)):d||--c,5===c&&(c=0,this.renderToBackBuffer(s))}return this.renderToBackBuffer(s),this.renderingToTexture=!1,r.bindFramebuffer.set(null),r.viewport.set([0,0,n.width,n.height]),a.end+1}postRender(){}renderCacheEfficiency(t){const e=t.order.length;if(0===e)return{efficiency:100};let n,r=0,i=0,o=!1;for(let a=0;a<e;++a){const e=t._layers[t.order[a]];this._style.isLayerDraped(e)?(o&&++r,++i):o||(o=!0,n=e.id)}return 0===i?{efficiency:100}:{efficiency:100*(1-r/i),firstUndrapedLayer:n}}getMinElevationBelowMSL(){let t=0;return this._visibleDemTiles.filter((t=>t.dem)).forEach((e=>{t=Math.min(t,e.dem.tree.minimums[0])})),0===t?t:(t-30)*this._exaggeration}raycast(t,e,n){if(!this._visibleDemTiles)return null;const r=this._visibleDemTiles.filter((t=>t.dem)).map((r=>{const i=r.tileID,o=1<<i.overscaledZ,{x:a,y:s}=i.canonical,l=a/o,c=(a+1)/o,u=s/o,h=(s+1)/o;return{minx:l,miny:u,maxx:c,maxy:h,t:r.dem.tree.raycastRoot(l,u,c,h,t,e,n),tile:r}}));r.sort(((t,e)=>(null!==t.t?t.t:Number.MAX_VALUE)-(null!==e.t?e.t:Number.MAX_VALUE)));for(const i of r){if(null==i.t)return null;const r=i.tile.dem.tree.raycast(i.minx,i.miny,i.maxx,i.maxy,t,e,n);if(null!=r)return r}return null}_createFBO(){const e=this.painter.context,n=e.gl,r=this.drapeBufferSize;e.activeTexture.set(n.TEXTURE0);const i=new t.Texture(e,{width:r[0],height:r[1],data:null},n.RGBA);i.bind(n.LINEAR,n.CLAMP_TO_EDGE);const o=e.createFramebuffer(r[0],r[1],!1);return o.colorAttachment.set(i.texture),o.depthAttachment=new wt(e,o.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=e.createRenderbuffer(e.gl.DEPTH_STENCIL,r[0],r[1]),this._stencilRef=0,o.depthAttachment.set(this._sharedDepthStencil),e.clear({stencil:0})):o.depthAttachment.set(this._sharedDepthStencil),e.extTextureFilterAnisotropic&&!e.extTextureFilterAnisotropicForceOff&&n.texParameterf(n.TEXTURE_2D,e.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,e.extTextureFilterAnisotropicMax),{fb:o,tex:i,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const t in this._style._sourceCaches)if(this._style._sourceCaches[t].hasTransition())return!0;return this._style.order.some((t=>{const e=this._style._layers[t],n=e.isHidden(this.painter.transform.zoom);return"custom"===e.type?!n&&e.shouldRedrape():!n&&e.hasTransition()}))}_clearLineLayersFromRenderCache(){let e=!1;for(const t of this._style._getSources())if(t instanceof Et){e=!0;break}if(!e)return;const n={};for(let r=0;r<this._style.order.length;++r){const e=this._style._layers[this._style.order[r]],i=this._style._getLayerSourceCache(e);if(i&&!n[i.id]&&!e.isHidden(this.painter.transform.zoom)&&"line"===e.type&&e.widthExpression()instanceof t.ZoomDependentExpression){n[i.id]=!0;for(const t of this.proxyCoords){const e=this.proxyToSource[t.key][i.id];if(e)for(const t of e)this._clearRenderCacheForTile(i.id,t)}}}}_clearRasterLayersFromRenderCache(){let t=!1;for(const n in this._style._sourceCaches)if(this._style._sourceCaches[n]._source instanceof kt){t=!0;break}if(!t)return;const e={};for(let n=0;n<this._style.order.length;++n){const t=this._style._layers[this._style.order[n]],r=this._style._getLayerSourceCache(t);if(!r||e[r.id])continue;if(t.isHidden(this.painter.transform.zoom)||"raster"!==t.type)continue;const i=t.paint.get("raster-fade-duration");for(const e of this.proxyCoords){const t=this.proxyToSource[e.key][r.id];if(t)for(const e of t){const t=Mn(r.getTile(e),r.findLoadedParent(e,0),r,this.painter.transform,i);(1!==t.opacity||0!==t.mix)&&this._clearRenderCacheForTile(r.id,e)}}}}_setupDrapedRenderBatches(){const t=this._style.order,e=t.length;if(0===e)return;const n=[];let r,i=0,o=this._style._layers[t[i]];for(;!this._style.isLayerDraped(o)&&o.isHidden(this.painter.transform.zoom)&&++i<e;)o=this._style._layers[t[i]];for(;i<e;++i){const e=this._style._layers[t[i]];e.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(e)?void 0===r&&(r=i):void 0!==r&&(n.push({start:r,end:i-1}),r=void 0))}void 0!==r&&n.push({start:r,end:i-1}),this._drapedRenderBatches=n}_setupRenderCache(t){const e=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,e.renderCache.length>e.renderCachePool.length){const t=Object.values(e.proxyCachedFBO);e.proxyCachedFBO={};for(let n=0;n<t.length;++n){const r=Object.values(t[n]);e.renderCachePool.push(...r)}}return}this._clearRasterLayersFromRenderCache();const n=this.proxyCoords,r=this._tilesDirty;for(let o=n.length-1;o>=0;o--){const i=n[o];if(e.getTileByID(i.key),void 0!==e.proxyCachedFBO[i.key]){const n=t[i.key],o=this.proxyToSource[i.key];let a=0;for(const t in o){const e=o[t],i=n[t];if(!i||i.length!==e.length||e.some(((e,n)=>e!==i[n]||r[t]&&r[t].hasOwnProperty(e.key)))){a=-1;break}++a}for(const t in e.proxyCachedFBO[i.key])e.renderCache[e.proxyCachedFBO[i.key][t]].dirty=a<0||a!==Object.values(n).length}}const i=[...this._drapedRenderBatches];i.sort(((t,e)=>e.end-e.start-(t.end-t.start)));for(const o of i)for(const t of n){if(e.proxyCachedFBO[t.key])continue;let n=e.renderCachePool.pop();void 0===n&&e.renderCache.length<50&&(n=e.renderCache.length,e.renderCache.push(this._createFBO())),void 0!==n&&(e.proxyCachedFBO[t.key]={},e.proxyCachedFBO[t.key][o.start]=n,e.renderCache[n].dirty=!0)}this._tilesDirty={}}_setupStencil(t,e,n,r){if(!r||!this._sourceTilesOverlap[r.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const i=this.painter.context,o=i.gl;if(e.length<=1)return void(this._overlapStencilType=!1);let a;if(n.isTileClipped())a=e.length,this._overlapStencilMode.test={func:o.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(e[0].overscaledZ>e[e.length-1].overscaledZ))return void(this._overlapStencilType=!1);a=1,this._overlapStencilMode.test={func:o.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+a>255&&(i.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=a,this._overlapStencilMode.ref=this._stencilRef,n.isTileClipped()&&this._renderTileClippingMasks(e,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(e){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[e.key]),this._overlapStencilMode):t.StencilMode.disabled}_renderTileClippingMasks(e,n){const r=this.painter,i=this.painter.context,o=i.gl;r._tileClippingMaskIDs={},i.setColorMode(t.ColorMode.disabled),i.setDepthMode(t.DepthMode.disabled);const a=r.useProgram("clippingMask");for(const s of e){const e=r._tileClippingMaskIDs[s.key]=--n;a.draw(i,o.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:o.ALWAYS,mask:0},e,255,o.KEEP,o.KEEP,o.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,kn(s.projMatrix),"$clipping",r.tileExtentBuffer,r.quadTriangleIndexBuffer,r.tileExtentSegments)}}pointCoordinate(e){const n=this.painter.transform;if(e.x<0||e.x>n.width||e.y<0||e.y>n.height)return null;const r=[e.x,e.y,1,1];t.transformMat4$1(r,r,n.pixelMatrixInverse),t.scale$1(r,r,1/r[3]),r[0]/=n.worldSize,r[1]/=n.worldSize;const i=n._camera.position,o=t.mercatorZfromAltitude(1,n.center.lat),a=[i[0],i[1],i[2]/o,0],s=t.subtract([],r.slice(0,3),a);t.normalize(s,s);const l=this.raycast(a,s,this._exaggeration);return null!==l&&l?(t.scaleAndAdd(a,a,s,l),a[3]=a[2],a[2]*=o,a):null}drawDepth(){const e=this.painter,n=e.context,r=this.proxySourceCache,i=Math.ceil(e.width),o=Math.ceil(e.height);if(!this._depthFBO||this._depthFBO.width===i&&this._depthFBO.height===o||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const e=n.gl,r=n.createFramebuffer(i,o,!0);n.activeTexture.set(e.TEXTURE0);const a=new t.Texture(n,{width:i,height:o,data:null},e.RGBA);a.bind(e.NEAREST,e.CLAMP_TO_EDGE),r.colorAttachment.set(a.texture);const s=n.createRenderbuffer(n.gl.DEPTH_COMPONENT16,i,o);r.depthAttachment.set(s),this._depthFBO=r,this._depthTexture=a}n.bindFramebuffer.set(this._depthFBO.framebuffer),n.viewport.set([0,0,i,o]),function(e,n,r,i){if("globe"===e.transform.projection.name)return;const o=e.context,a=o.gl;o.clear({depth:1});const s=e.useProgram("terrainDepth"),l=new t.DepthMode(a.LESS,t.DepthMode.ReadWrite,e.depthRangeFor3D);for(const c of i){const e=r.getTile(c),i=xn(c.projMatrix,0);n.setupElevationDraw(e,s),s.draw(o,a.TRIANGLES,l,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.backCCW,i,"terrain_depth",n.gridBuffer,n.gridIndexBuffer,n.gridNoSkirtSegments)}}(e,this,r,this.proxyCoords)}_setupProxiedCoordsForOrtho(t,e,n){if(t.getSource()instanceof Tt)return this._setupProxiedCoordsForImageSource(t,e,n);this._findCoveringTileCache[t.id]=this._findCoveringTileCache[t.id]||{};const r=this.proxiedCoords[t.id]=[],i=this.proxyCoords;for(let a=0;a<i.length;a++){const e=i[a],o=this._findTileCoveringTileID(e,t);if(o){const i=this._createProxiedId(e,o,n[e.key]&&n[e.key][t.id]);r.push(i),this.proxyToSource[e.key][t.id]=[i]}}let o=!1;for(let a=0;a<e.length;a++){const i=t.getTile(e[a]);if(!i||!i.hasData())continue;const s=this._findTileCoveringTileID(i.tileID,this.proxySourceCache);if(s&&s.tileID.canonical.z!==i.tileID.canonical.z){const e=this.proxyToSource[s.tileID.key][t.id],a=this._createProxiedId(s.tileID,i,n[s.tileID.key]&&n[s.tileID.key][t.id]);e?e.splice(e.length-1,0,a):this.proxyToSource[s.tileID.key][t.id]=[a],r.push(a),o=!0}}this._sourceTilesOverlap[t.id]=o}_setupProxiedCoordsForImageSource(e,n,r){if(!e.getSource().loaded())return;const i=this.proxiedCoords[e.id]=[],o=this.proxyCoords,a=e.getSource(),s=new t.Point(a.tileID.x,a.tileID.y)._div(1<<a.tileID.z),l=a.coordinates.map(t.MercatorCoordinate.fromLngLat).reduce(((t,e)=>(t.min.x=Math.min(t.min.x,e.x-s.x),t.min.y=Math.min(t.min.y,e.y-s.y),t.max.x=Math.max(t.max.x,e.x-s.x),t.max.y=Math.max(t.max.y,e.y-s.y),t)),{min:new t.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new t.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),c=(e,n)=>{const r=e.wrap+e.canonical.x/(1<<e.canonical.z),i=e.canonical.y/(1<<e.canonical.z),o=t.EXTENT/(1<<e.canonical.z),a=n.wrap+n.canonical.x/(1<<n.canonical.z),s=n.canonical.y/(1<<n.canonical.z);return r+o<a+l.min.x||r>a+l.max.x||i+o<s+l.min.y||i>s+l.max.y};for(let t=0;t<o.length;t++){const a=o[t];for(let t=0;t<n.length;t++){const o=e.getTile(n[t]);if(!o||!o.hasData())continue;if(c(a,o.tileID))continue;const s=this._createProxiedId(a,o,r[a.key]&&r[a.key][e.id]),l=this.proxyToSource[a.key][e.id];l?l.push(s):this.proxyToSource[a.key][e.id]=[s],i.push(s)}}}_createProxiedId(e,n,r){let i=this.orthoMatrix;if(r){const t=r.find((t=>t.key===n.tileID.key));if(t)return t}if(n.tileID.key!==e.key){const r=e.canonical.z-n.tileID.canonical.z;let o,a,s;i=t.create();const l=n.tileID.wrap-e.wrap<<e.overscaledZ;r>0?(o=t.EXTENT>>r,a=o*((n.tileID.canonical.x<<r)-e.canonical.x+l),s=o*((n.tileID.canonical.y<<r)-e.canonical.y)):(o=t.EXTENT<<-r,a=t.EXTENT*(n.tileID.canonical.x-(e.canonical.x+l<<-r)),s=t.EXTENT*(n.tileID.canonical.y-(e.canonical.y<<-r))),t.ortho(i,0,o,0,o,0,1),t.translate(i,i,[a,s,0])}return new Pn(n.tileID,e.key,i)}_findTileCoveringTileID(e,n){let r=n.getTile(e);if(r&&r.hasData())return r;const i=this._findCoveringTileCache[n.id],o=i[e.key];if(r=o?n.getTileByID(o):null,r&&r.hasData()||null===o)return r;let a=r?r.tileID:e,s=a.overscaledZ;const l=n.getSource().minzoom,c=[];if(!o){const i=n.getSource().maxzoom;if(e.canonical.z>=i){const r=e.canonical.z-i;n.getSource().reparseOverscaled?(s=Math.max(e.canonical.z+2,n.transform.tileZoom),a=new t.OverscaledTileID(s,e.wrap,i,e.canonical.x>>r,e.canonical.y>>r)):0!==r&&(s=i,a=new t.OverscaledTileID(s,e.wrap,i,e.canonical.x>>r,e.canonical.y>>r))}a.key!==e.key&&(c.push(a.key),r=n.getTile(a))}const u=t=>{c.forEach((e=>{i[e]=t})),c.length=0};for(s-=1;s>=l&&(!r||!r.hasData());s--){r&&u(r.tileID.key);const t=a.calculateScaledKey(s);if(r=n.getTileByID(t),r&&r.hasData())break;const e=i[t];if(null===e)break;void 0===e?c.push(t):r=n.getTileByID(e)}return u(r?r.tileID.key:null),r&&r.hasData()?r:null}findDEMTileFor(t){return this.enabled?this._findTileCoveringTileID(t,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(t,e){let n=this._tilesDirty[t];n||(n=this._tilesDirty[t]={}),n[e.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const e=function(e){let n=0;const r=new t.StructArrayLayout2ui4,i=131;for(let t=1;t<129;t++){for(let e=1;e<129;e++)n=t*i+e,r.emplaceBack(n,n+1),r.emplaceBack(n,n+i),r.emplaceBack(n+1,n+i),128===t&&r.emplaceBack(n+i,n+i+1);r.emplaceBack(n+1,n+1+i)}return r}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(e),this.wireframeSegments=t.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,e.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class An{static cacheKey(t,e,n,r){let i=`${e}${r?r.cacheKey:""}`;for(const o of n)t.usedDefines.includes(o)&&(i+=`/${o}`);return i}constructor(e,n,r,i,o,a){const s=e.gl;this.program=s.createProgram();const l=function(t){const e=[];for(let n=0;n<t.length;n++){if(null===t[n])continue;const r=t[n].split(" ");e.push(r.pop())}return e}(r.staticAttributes),c=i?i.getBinderAttributes():[],u=l.concat(c);let h=i?i.defines():[];h=h.concat(a.map((t=>`#define ${t}`)));const p=e.isWebGL2?"#version 300 es\n":"",d=p+h.concat(e.extStandardDerivatives&&0===p.length?"#extension GL_OES_standard_derivatives : enable\n".concat(cn):cn,cn,ln,sn.fragmentSource,on.fragmentSource,r.fragmentSource).join("\n"),f=p+h.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",ln,sn.vertexSource,on.vertexSource,rn.vertexSource,r.vertexSource).join("\n"),g=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(g,d),s.compileShader(g),s.attachShader(this.program,g);const m=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())this.failedToCreate=!0;else{s.shaderSource(m,f),s.compileShader(m),s.attachShader(this.program,m),this.attributes={},this.numAttributes=u.length;for(let t=0;t<this.numAttributes;t++)u[t]&&(s.bindAttribLocation(this.program,t,u[t]),this.attributes[u[t]]=t);s.linkProgram(this.program),s.deleteShader(m),s.deleteShader(g),this.fixedUniforms=o(e),this.binderUniforms=i?i.getUniforms(e):[],a.includes("TERRAIN")&&(this.terrainUniforms=(e=>({u_dem:new t.Uniform1i(e),u_dem_prev:new t.Uniform1i(e),u_dem_unpack:new t.Uniform4f(e),u_dem_tl:new t.Uniform2f(e),u_dem_scale:new t.Uniform1f(e),u_dem_tl_prev:new t.Uniform2f(e),u_dem_scale_prev:new t.Uniform1f(e),u_dem_size:new t.Uniform1f(e),u_dem_lerp:new t.Uniform1f(e),u_exaggeration:new t.Uniform1f(e),u_depth:new t.Uniform1i(e),u_depth_size_inv:new t.Uniform2f(e),u_meter_to_dem:new t.Uniform1f(e),u_label_plane_matrix_inv:new t.UniformMatrix4f(e)}))(e)),a.includes("GLOBE")&&(this.globeUniforms=(e=>({u_tile_tl_up:new t.Uniform3f(e),u_tile_tr_up:new t.Uniform3f(e),u_tile_br_up:new t.Uniform3f(e),u_tile_bl_up:new t.Uniform3f(e),u_tile_up_scale:new t.Uniform1f(e)}))(e)),a.includes("FOG")&&(this.fogUniforms=(e=>({u_fog_matrix:new t.UniformMatrix4f(e),u_fog_range:new t.Uniform2f(e),u_fog_color:new t.Uniform4f(e),u_fog_horizon_blend:new t.Uniform1f(e),u_fog_temporal_offset:new t.Uniform1f(e),u_frustum_tl:new t.Uniform3f(e),u_frustum_tr:new t.Uniform3f(e),u_frustum_br:new t.Uniform3f(e),u_frustum_bl:new t.Uniform3f(e),u_globe_pos:new t.Uniform3f(e),u_globe_radius:new t.Uniform1f(e),u_globe_transition:new t.Uniform1f(e),u_is_globe:new t.Uniform1i(e),u_viewport:new t.Uniform2f(e)}))(e))}}setTerrainUniformValues(t,e){if(!this.terrainUniforms)return;const n=this.terrainUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const t in e)n[t]&&n[t].set(this.program,t,e[t])}}setGlobeUniformValues(t,e){if(!this.globeUniforms)return;const n=this.globeUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const t in e)n[t]&&n[t].set(this.program,t,e[t])}}setFogUniformValues(t,e){if(!this.fogUniforms)return;const n=this.fogUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const t in e)n[t].set(this.program,t,e[t])}}draw(t,e,n,r,i,o,a,s,l,c,u,h,p,d,f){const g=t.gl;if(this.failedToCreate)return;t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(r),t.setColorMode(i),t.setCullFace(o);for(const y of Object.keys(this.fixedUniforms))this.fixedUniforms[y].set(this.program,y,a[y]);d&&d.setUniforms(this.program,t,this.binderUniforms,h,{zoom:p});const m={[g.LINES]:2,[g.TRIANGLES]:3,[g.LINE_STRIP]:1}[e];for(const y of u.get()){const n=y.vaos||(y.vaos={});(n[s]||(n[s]=new dn)).bind(t,this,l,d?d.getPaintVertexBuffers():[],c,y.vertexOffset,f||[]),g.drawElements(e,y.primitiveLength*m,g.UNSIGNED_SHORT,y.primitiveOffset*m*2)}}}function Dn(t,e){const n=Math.pow(2,e.tileID.overscaledZ),r=e.tileSize*Math.pow(2,t.transform.tileZoom)/n,i=r*(e.tileID.canonical.x+e.tileID.wrap*n),o=r*e.tileID.canonical.y;return{u_image:0,u_texsize:e.imageAtlasTexture.size,u_tile_units_to_pixels:1/P(e,1,t.transform.tileZoom),u_pixel_coord_upper:[i>>16,o>>16],u_pixel_coord_lower:[65535&i,65535&o]}}const Rn=t.create(),Ln=(e,n,r,i,o,a,s,l,c,u,h)=>{const p=n.style.light,d=p.properties.get("position"),f=[d.x,d.y,d.z],g=t.create$1();"viewport"===p.properties.get("anchor")&&(t.fromRotation(g,-n.transform.angle),t.transformMat3(f,f,g));const m=p.properties.get("color"),y=n.transform,v={u_matrix:e,u_lightpos:f,u_lightintensity:p.properties.get("intensity"),u_lightcolor:[m.r,m.g,m.b],u_vertical_gradient:+r,u_opacity:i,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Rn,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:o,u_edge_radius:a};return"globe"===y.projection.name&&(v.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],v.u_zoom_transition=c,v.u_inv_rot_matrix=h,v.u_merc_center=u,v.u_up_dir=y.projection.upVector(new t.CanonicalTileID(0,0,0),u[0]*t.EXTENT,u[1]*t.EXTENT),v.u_height_lift=l),v},Nn=(e,n,r,i,o,a,s,l,c,u,h,p)=>{const d=Ln(e,n,r,i,o,a,s,c,u,h,p),f={u_height_factor:-Math.pow(2,s.overscaledZ)/l.tileSize/8};return t.extend(d,Dn(n,l),f)},Fn=t=>({u_matrix:t}),zn=(e,n,r)=>t.extend(Fn(e),Dn(n,r)),Bn=(t,e)=>({u_matrix:t,u_world:e}),$n=(e,n,r,i)=>t.extend(zn(e,n,r),{u_world:i}),jn=t.create(),Un=(e,n,r,i,o,a)=>{const s=e.transform,l="globe"===s.projection.name;let c;if("map"===a.paint.get("circle-pitch-alignment"))if(l){const e=t.globePixelsToTileUnits(s.zoom,n.canonical)*s._pixelsPerMercatorPixel;c=Float32Array.from([e,0,0,e])}else c=s.calculatePixelsToTileUnitsMatrix(r);else c=new Float32Array([s.pixelsToGLUnits[0],0,0,s.pixelsToGLUnits[1]]);const u={u_camera_to_center_distance:s.cameraToCenterDistance,u_matrix:e.translatePosMatrix(n.projMatrix,r,a.paint.get("circle-translate"),a.paint.get("circle-translate-anchor")),u_device_pixel_ratio:t.exported.devicePixelRatio,u_extrude_scale:c,u_inv_rot_matrix:jn,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(l){u.u_inv_rot_matrix=i,u.u_merc_center=o,u.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],u.u_zoom_transition=t.globeToMercatorTransition(s.zoom);const e=o[0]*t.EXTENT,r=o[1]*t.EXTENT;u.u_up_dir=s.projection.upVector(new t.CanonicalTileID(0,0,0),e,r)}return u},Vn=t=>{const e=[];return"map"===t.paint.get("circle-pitch-alignment")&&e.push("PITCH_WITH_MAP"),"map"===t.paint.get("circle-pitch-scale")&&e.push("SCALE_WITH_MAP"),e},Hn=(e,n,r,i)=>{const o=t.EXTENT/r.tileSize;return{u_matrix:e,u_camera_to_center_distance:n.getCameraToCenterDistance(i),u_extrude_scale:[n.pixelsToGLUnits[0]/o,n.pixelsToGLUnits[1]/o]}},Gn=function(t,e){return{u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}},Wn=t.create(),Xn=(e,n,r,i,o,a,s)=>{const l=e.transform,c="globe"===l.projection.name,u=c?t.globePixelsToTileUnits(l.zoom,n.canonical)*l._pixelsPerMercatorPixel:P(r,1,a),h={u_matrix:n.projMatrix,u_extrude_scale:u,u_intensity:s,u_inv_rot_matrix:Wn,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(c){h.u_inv_rot_matrix=i,h.u_merc_center=o,h.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],h.u_zoom_transition=t.globeToMercatorTransition(l.zoom);const e=o[0]*t.EXTENT,r=o[1]*t.EXTENT;h.u_up_dir=l.projection.upVector(new t.CanonicalTileID(0,0,0),e,r)}return h},qn=(t,e,n,r,i,o,a)=>{const s=t.transform,l=s.calculatePixelsToTileUnitsMatrix(e);return{u_matrix:Kn(t,e,n,r),u_pixels_to_tile_units:l,u_device_pixel_ratio:o,u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:i,u_texsize:Jn(n)?e.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Zn(e,t.transform),u_alpha_discard_threshold:0,u_trim_offset:a}},Yn=(t,e,n,r,i)=>{const o=t.transform;return{u_matrix:Kn(t,e,n,r),u_texsize:e.imageAtlasTexture.size,u_pixels_to_tile_units:o.calculatePixelsToTileUnitsMatrix(e),u_device_pixel_ratio:i,u_image:0,u_tile_units_to_pixels:Zn(e,o),u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Zn(t,e){return 1/P(t,1,e.tileZoom)}function Kn(t,e,n,r){return t.translatePosMatrix(r||e.tileID.projMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}function Jn(t){const e=t.paint.get("line-dasharray").value;return e.value||"constant"!==e.kind}const Qn=(t,e,n,r,i,o)=>{return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(s=i.paint.get("raster-saturation"),s>0?1-1/(1.001-s):-s),u_contrast_factor:(a=i.paint.get("raster-contrast"),a>0?1/(1-a):1+a),u_spin_weights:tr(i.paint.get("raster-hue-rotate")),u_perspective_transform:o};var a,s};function tr(t){t*=Math.PI/180;const e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}const er=t.create(),nr=(e,n,r,i,o,a,s,l,c,u,h,p,d,f,g,m)=>{const y=o.transform,v={u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:y.cameraToCenterDistance,u_rotate_symbol:+r,u_aspect_ratio:y.width/y.height,u_fade_change:o.options.fadeDuration?o.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:s,u_coord_matrix:l,u_is_text:+c,u_pitch_with_map:+i,u_texsize:u,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:er,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:er,u_up_vector:[0,-1,0]};return"globe"===m.name&&(v.u_tile_id=[h.canonical.x,h.canonical.y,1<<h.canonical.z],v.u_zoom_transition=p,v.u_inv_rot_matrix=f,v.u_merc_center=d,v.u_camera_forward=y._camera.forward(),v.u_ecef_origin=t.globeECEFOrigin(y.globeMatrix,h.toUnwrapped()),v.u_tile_matrix=Float32Array.from(y.globeMatrix),v.u_up_vector=g),v},rr=(e,n,r,i,o,a,s,l,c,u,h,p,d,f,g,m,y)=>t.extend(nr(e,n,r,i,o,a,s,l,c,u,p,d,f,g,m,y),{u_gamma_scale:i?o.transform.cameraToCenterDistance*Math.cos(o.terrain?0:o.transform._pitch):1,u_device_pixel_ratio:t.exported.devicePixelRatio,u_is_halo:+h}),ir=(e,n,r,i,o,a,s,l,c,u,h,p,d,f,g,m)=>t.extend(rr(e,n,r,i,o,a,s,l,!0,c,!0,h,p,d,f,g,m),{u_texsize_icon:u,u_texture_icon:1}),or=(t,e,n)=>({u_matrix:t,u_opacity:e,u_color:n}),ar=(e,n,r,i,o)=>t.extend(function(t,e,n){const r=e.imageManager.getPattern(t.toString()),{width:i,height:o}=e.imageManager.getPixelSize(),a=Math.pow(2,n.tileID.overscaledZ),s=n.tileSize*Math.pow(2,e.transform.tileZoom)/a,l=s*(n.tileID.canonical.x+n.tileID.wrap*a),c=s*n.tileID.canonical.y;return{u_image:0,u_pattern_tl:r.tl,u_pattern_br:r.br,u_texsize:[i,o],u_pattern_size:r.displaySize,u_tile_units_to_pixels:1/P(n,1,e.transform.tileZoom),u_pixel_coord_upper:[l>>16,c>>16],u_pixel_coord_lower:[65535&l,65535&c]}}(i,r,o),{u_matrix:e,u_opacity:n}),sr={fillExtrusion:e=>({u_matrix:new t.UniformMatrix4f(e),u_lightpos:new t.Uniform3f(e),u_lightintensity:new t.Uniform1f(e),u_lightcolor:new t.Uniform3f(e),u_vertical_gradient:new t.Uniform1f(e),u_opacity:new t.Uniform1f(e),u_edge_radius:new t.Uniform1f(e),u_ao:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_up_dir:new t.Uniform3f(e),u_height_lift:new t.Uniform1f(e)}),fillExtrusionPattern:e=>({u_matrix:new t.UniformMatrix4f(e),u_lightpos:new t.Uniform3f(e),u_lightintensity:new t.Uniform1f(e),u_lightcolor:new t.Uniform3f(e),u_vertical_gradient:new t.Uniform1f(e),u_height_factor:new t.Uniform1f(e),u_edge_radius:new t.Uniform1f(e),u_ao:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_up_dir:new t.Uniform3f(e),u_height_lift:new t.Uniform1f(e),u_image:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_pixel_coord_upper:new t.Uniform2f(e),u_pixel_coord_lower:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e),u_opacity:new t.Uniform1f(e)}),fill:e=>({u_matrix:new t.UniformMatrix4f(e)}),fillPattern:e=>({u_matrix:new t.UniformMatrix4f(e),u_image:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_pixel_coord_upper:new t.Uniform2f(e),u_pixel_coord_lower:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e)}),fillOutline:e=>({u_matrix:new t.UniformMatrix4f(e),u_world:new t.Uniform2f(e)}),fillOutlinePattern:e=>({u_matrix:new t.UniformMatrix4f(e),u_world:new t.Uniform2f(e),u_image:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_pixel_coord_upper:new t.Uniform2f(e),u_pixel_coord_lower:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e)}),circle:e=>({u_camera_to_center_distance:new t.Uniform1f(e),u_extrude_scale:new t.UniformMatrix2f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_up_dir:new t.Uniform3f(e)}),collisionBox:e=>({u_matrix:new t.UniformMatrix4f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_extrude_scale:new t.Uniform2f(e)}),collisionCircle:e=>({u_matrix:new t.UniformMatrix4f(e),u_inv_matrix:new t.UniformMatrix4f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_viewport_size:new t.Uniform2f(e)}),debug:e=>({u_color:new t.UniformColor(e),u_matrix:new t.UniformMatrix4f(e),u_overlay:new t.Uniform1i(e),u_overlay_scale:new t.Uniform1f(e)}),clippingMask:e=>({u_matrix:new t.UniformMatrix4f(e)}),heatmap:e=>({u_extrude_scale:new t.Uniform1f(e),u_intensity:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_up_dir:new t.Uniform3f(e)}),heatmapTexture:e=>({u_image:new t.Uniform1i(e),u_color_ramp:new t.Uniform1i(e),u_opacity:new t.Uniform1f(e)}),hillshade:e=>({u_matrix:new t.UniformMatrix4f(e),u_image:new t.Uniform1i(e),u_latrange:new t.Uniform2f(e),u_light:new t.Uniform2f(e),u_shadow:new t.UniformColor(e),u_highlight:new t.UniformColor(e),u_accent:new t.UniformColor(e)}),hillshadePrepare:e=>({u_matrix:new t.UniformMatrix4f(e),u_image:new t.Uniform1i(e),u_dimension:new t.Uniform2f(e),u_zoom:new t.Uniform1f(e),u_unpack:new t.Uniform4f(e)}),line:e=>({u_matrix:new t.UniformMatrix4f(e),u_pixels_to_tile_units:new t.UniformMatrix2f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_units_to_pixels:new t.Uniform2f(e),u_dash_image:new t.Uniform1i(e),u_gradient_image:new t.Uniform1i(e),u_image_height:new t.Uniform1f(e),u_texsize:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e),u_alpha_discard_threshold:new t.Uniform1f(e),u_trim_offset:new t.Uniform2f(e)}),linePattern:e=>({u_matrix:new t.UniformMatrix4f(e),u_texsize:new t.Uniform2f(e),u_pixels_to_tile_units:new t.UniformMatrix2f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_image:new t.Uniform1i(e),u_units_to_pixels:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e),u_alpha_discard_threshold:new t.Uniform1f(e)}),raster:e=>({u_matrix:new t.UniformMatrix4f(e),u_tl_parent:new t.Uniform2f(e),u_scale_parent:new t.Uniform1f(e),u_fade_t:new t.Uniform1f(e),u_opacity:new t.Uniform1f(e),u_image0:new t.Uniform1i(e),u_image1:new t.Uniform1i(e),u_brightness_low:new t.Uniform1f(e),u_brightness_high:new t.Uniform1f(e),u_saturation_factor:new t.Uniform1f(e),u_contrast_factor:new t.Uniform1f(e),u_spin_weights:new t.Uniform3f(e),u_perspective_transform:new t.Uniform2f(e)}),symbolIcon:e=>({u_is_size_zoom_constant:new t.Uniform1i(e),u_is_size_feature_constant:new t.Uniform1i(e),u_size_t:new t.Uniform1f(e),u_size:new t.Uniform1f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_rotate_symbol:new t.Uniform1i(e),u_aspect_ratio:new t.Uniform1f(e),u_fade_change:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_label_plane_matrix:new t.UniformMatrix4f(e),u_coord_matrix:new t.UniformMatrix4f(e),u_is_text:new t.Uniform1i(e),u_pitch_with_map:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_camera_forward:new t.Uniform3f(e),u_tile_matrix:new t.UniformMatrix4f(e),u_up_vector:new t.Uniform3f(e),u_ecef_origin:new t.Uniform3f(e),u_texture:new t.Uniform1i(e)}),symbolSDF:e=>({u_is_size_zoom_constant:new t.Uniform1i(e),u_is_size_feature_constant:new t.Uniform1i(e),u_size_t:new t.Uniform1f(e),u_size:new t.Uniform1f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_rotate_symbol:new t.Uniform1i(e),u_aspect_ratio:new t.Uniform1f(e),u_fade_change:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_label_plane_matrix:new t.UniformMatrix4f(e),u_coord_matrix:new t.UniformMatrix4f(e),u_is_text:new t.Uniform1i(e),u_pitch_with_map:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_texture:new t.Uniform1i(e),u_gamma_scale:new t.Uniform1f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_camera_forward:new t.Uniform3f(e),u_tile_matrix:new t.UniformMatrix4f(e),u_up_vector:new t.Uniform3f(e),u_ecef_origin:new t.Uniform3f(e),u_is_halo:new t.Uniform1i(e)}),symbolTextAndIcon:e=>({u_is_size_zoom_constant:new t.Uniform1i(e),u_is_size_feature_constant:new t.Uniform1i(e),u_size_t:new t.Uniform1f(e),u_size:new t.Uniform1f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_rotate_symbol:new t.Uniform1i(e),u_aspect_ratio:new t.Uniform1f(e),u_fade_change:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_label_plane_matrix:new t.UniformMatrix4f(e),u_coord_matrix:new t.UniformMatrix4f(e),u_is_text:new t.Uniform1i(e),u_pitch_with_map:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_texsize_icon:new t.Uniform2f(e),u_texture:new t.Uniform1i(e),u_texture_icon:new t.Uniform1i(e),u_gamma_scale:new t.Uniform1f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_is_halo:new t.Uniform1i(e)}),background:e=>({u_matrix:new t.UniformMatrix4f(e),u_opacity:new t.Uniform1f(e),u_color:new t.UniformColor(e)}),backgroundPattern:e=>({u_matrix:new t.UniformMatrix4f(e),u_opacity:new t.Uniform1f(e),u_image:new t.Uniform1i(e),u_pattern_tl:new t.Uniform2f(e),u_pattern_br:new t.Uniform2f(e),u_texsize:new t.Uniform2f(e),u_pattern_size:new t.Uniform2f(e),u_pixel_coord_upper:new t.Uniform2f(e),u_pixel_coord_lower:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e)}),terrainRaster:vn,terrainDepth:vn,skybox:e=>({u_matrix:new t.UniformMatrix4f(e),u_sun_direction:new t.Uniform3f(e),u_cubemap:new t.Uniform1i(e),u_opacity:new t.Uniform1f(e),u_temporal_offset:new t.Uniform1f(e)}),skyboxGradient:e=>({u_matrix:new t.UniformMatrix4f(e),u_color_ramp:new t.Uniform1i(e),u_center_direction:new t.Uniform3f(e),u_radius:new t.Uniform1f(e),u_opacity:new t.Uniform1f(e),u_temporal_offset:new t.Uniform1f(e)}),skyboxCapture:e=>({u_matrix_3f:new t.UniformMatrix3f(e),u_sun_direction:new t.Uniform3f(e),u_sun_intensity:new t.Uniform1f(e),u_color_tint_r:new t.Uniform4f(e),u_color_tint_m:new t.Uniform4f(e),u_luminance:new t.Uniform1f(e)}),globeRaster:e=>({u_proj_matrix:new t.UniformMatrix4f(e),u_globe_matrix:new t.UniformMatrix4f(e),u_normalize_matrix:new t.UniformMatrix4f(e),u_merc_matrix:new t.UniformMatrix4f(e),u_zoom_transition:new t.Uniform1f(e),u_merc_center:new t.Uniform2f(e),u_image0:new t.Uniform1i(e),u_grid_matrix:new t.UniformMatrix3f(e),u_skirt_height:new t.Uniform1f(e),u_frustum_tl:new t.Uniform3f(e),u_frustum_tr:new t.Uniform3f(e),u_frustum_br:new t.Uniform3f(e),u_frustum_bl:new t.Uniform3f(e),u_globe_pos:new t.Uniform3f(e),u_globe_radius:new t.Uniform1f(e),u_viewport:new t.Uniform2f(e)}),globeAtmosphere:e=>({u_frustum_tl:new t.Uniform3f(e),u_frustum_tr:new t.Uniform3f(e),u_frustum_br:new t.Uniform3f(e),u_frustum_bl:new t.Uniform3f(e),u_horizon:new t.Uniform1f(e),u_transition:new t.Uniform1f(e),u_fadeout_range:new t.Uniform1f(e),u_color:new t.Uniform4f(e),u_high_color:new t.Uniform4f(e),u_space_color:new t.Uniform4f(e),u_star_intensity:new t.Uniform1f(e),u_star_density:new t.Uniform1f(e),u_star_size:new t.Uniform1f(e),u_temporal_offset:new t.Uniform1f(e),u_horizon_angle:new t.Uniform1f(e),u_rotation_matrix:new t.UniformMatrix4f(e)})};let lr;function cr(e,n,r,i,o,a,s){const l=e.context,c=l.gl,u=e.transform,h=e.useProgram("collisionBox"),p=[];let d=0,f=0;for(let b=0;b<i.length;b++){const g=i[b],m=n.getTile(g),y=m.getBucket(r);if(!y)continue;const v=ve(g,y,u);let x=v;0===o[0]&&0===o[1]||(x=e.translatePosMatrix(v,m,o,a));const _=s?y.textCollisionBox:y.iconCollisionBox,w=y.collisionCircleArray;if(w.length>0){const e=t.create(),n=x;t.mul(e,y.placementInvProjMatrix,u.glCoordMatrix),t.mul(e,e,y.placementViewportMatrix),p.push({circleArray:w,circleOffset:f,transform:n,invTransform:e,projection:y.getProjection()}),d+=w.length/4,f=d}_&&(e.terrain&&e.terrain.setupElevationDraw(m,h),h.draw(l,c.LINES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,Hn(x,u,m,y.getProjection()),r.id,_.layoutVertexBuffer,_.indexBuffer,_.segments,null,u.zoom,null,[_.collisionVertexBuffer,_.collisionVertexBufferExt]))}if(!s||!p.length)return;const g=e.useProgram("collisionCircle"),m=new t.StructArrayLayout2f1f2i16;m.resize(4*d),m._trim();let y=0;for(const t of p)for(let e=0;e<t.circleArray.length/4;e++){const n=4*e,r=t.circleArray[n+0],i=t.circleArray[n+1],o=t.circleArray[n+2],a=t.circleArray[n+3];m.emplace(y++,r,i,o,a,0),m.emplace(y++,r,i,o,a,1),m.emplace(y++,r,i,o,a,2),m.emplace(y++,r,i,o,a,3)}(!lr||lr.length<2*d)&&(lr=function(e){const n=2*e,r=new t.StructArrayLayout3ui6;r.resize(n),r._trim();for(let t=0;t<n;t++){const e=6*t;r.uint16[e+0]=4*t+0,r.uint16[e+1]=4*t+1,r.uint16[e+2]=4*t+2,r.uint16[e+3]=4*t+2,r.uint16[e+4]=4*t+3,r.uint16[e+5]=4*t+0}return r}(d));const v=l.createIndexBuffer(lr,!0),x=l.createVertexBuffer(m,t.collisionCircleLayout.members,!0);for(const b of p){const n={u_matrix:b.transform,u_inv_matrix:b.invTransform,u_camera_to_center_distance:(_=u).getCameraToCenterDistance(b.projection),u_viewport_size:[_.width,_.height]};g.draw(l,c.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,n,r.id,x,v,t.SegmentVector.simpleSegment(0,2*b.circleOffset,b.circleArray.length,b.circleArray.length/2),null,u.zoom)}var _;x.destroy(),v.destroy()}const ur=t.create();function hr(e,n){let{width:r,height:i,anchor:o,textOffset:a,textScale:s}=e;const{horizontalAlign:l,verticalAlign:c}=t.getAnchorAlignment(o),u=-(l-.5)*r,h=-(c-.5)*i,p=t.evaluateVariableOffset(o,a);return new t.Point((u/s+p[0])*n,(h/s+p[1])*n)}function pr(e,n,r,i,o,a,s,l,c,u,h){const p=e.text.placedSymbolArray,d=e.text.dynamicLayoutVertexArray,f=e.icon.dynamicLayoutVertexArray,g={},m=e.getProjection(),y=xe(l,m,a),v=a.elevation,x=m.upVectorScale(l.canonical,a.center.lat,a.worldSize).metersToTile;d.clear();for(let _=0;_<p.length;_++){const f=p.get(_),{tileAnchorX:b,tileAnchorY:w,numGlyphs:S}=f,C=f.hidden||!f.crossTileID||e.allowVerticalPlacement&&!f.placedOrientation?null:i[f.crossTileID];if(C){let i=0,p=0,_=0;if(v){const t=v?v.getAtTileOffset(l,b,w):0,[e,n,r]=m.upVector(l.canonical,b,w);i=t*e*x,p=t*n*x,_=t*r*x}let[E,k,M,T]=re(f.projectedAnchorX+i,f.projectedAnchorY+p,f.projectedAnchorZ+_,r?y:s);const I=ie(a.getCameraToCenterDistance(m),T);let P=o.evaluateSizeForFeature(e.textSizeData,u,f)*I/t.ONE_EM;r&&(P*=e.tilePixelRatio/c);const O=hr(C,P);r?(({x:E,y:k,z:M}=m.projectTilePoint(b+O.x,w+O.y,l.canonical)),[E,k,M]=re(E+i,k+p,M+_,s)):(n&&O._rotate(-a.angle),E+=O.x,k+=O.y,M=0);const A=e.allowVerticalPlacement&&f.placedOrientation===t.WritingMode.vertical?Math.PI/2:0;for(let e=0;e<S;e++)t.addDynamicAttributes(d,E,k,M,A);h&&f.associatedIconIndex>=0&&(g[f.associatedIconIndex]={x:E,y:k,z:M,angle:A})}else de(S,d)}if(h){f.clear();const n=e.icon.placedSymbolArray;for(let e=0;e<n.length;e++){const r=n.get(e),{numGlyphs:i}=r,o=g[e];if(r.hidden||!o)de(i,f);else{const{x:e,y:n,z:r,angle:a}=o;for(let o=0;o<i;o++)t.addDynamicAttributes(f,e,n,r,a)}}e.icon.dynamicLayoutVertexBuffer.updateData(f)}e.text.dynamicLayoutVertexBuffer.updateData(d)}function dr(t,e,n){return n.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function fr(e,n,r,i,o,a,s,l,c,u,h,p){const d=e.context,f=d.gl,g=e.transform,m="map"===l,y="map"===c,v=m&&"point"!==r.layout.get("symbol-placement"),x=m&&!y&&!v,_=void 0!==r.layout.get("symbol-sort-key").constantOr(1);let b=!1;const w=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),S=[t.mercatorXfromLng(g.center.lng),t.mercatorYfromLat(g.center.lat)],C=r.layout.get("text-variable-anchor"),E="globe"===g.projection.name,k=[],M=[0,-1,0];let T=M;!E&&!g.mercatorFromTransition||m||(T=function(e){const n=e._camera.getWorldToCamera(e.worldSize,1),r=t.multiply([],n,e.globeMatrix);t.invert(r,r);const i=[0,0,0],o=[0,1,0,0];return t.transformMat4$1(o,o,r),i[0]=o[0],i[1]=o[1],i[2]=o[2],t.normalize(i,i),i}(g));for(const I of i){const i=n.getTile(I),l=i.getBucket(r);if(!l)continue;if("mercator"===l.projection.name&&E)continue;const c=o?l.text:l.icon;if(!c||l.fullyClipped||!c.segments.get().length)continue;const h=c.programConfigurations.get(r.id),p=o||l.sdfIcons,d=o?l.textSizeData:l.iconSizeData,w=y||0!==g.pitch,P=t.evaluateSizeForZoom(d,g.zoom);let O,A,D,R,L=[0,0],N=null;if(o)A=i.glyphAtlasTexture,D=f.LINEAR,O=i.glyphAtlasTexture.size,l.iconsInText&&(L=i.imageAtlasTexture.size,N=i.imageAtlasTexture,R=w||e.options.rotating||e.options.zooming||"composite"===d.kind||"camera"===d.kind?f.LINEAR:f.NEAREST);else{const t=1!==r.layout.get("icon-size").constantOr(0)||l.iconsNeedLinear;A=i.imageAtlasTexture,D=p||e.options.rotating||e.options.zooming||t||w?f.LINEAR:f.NEAREST,O=i.imageAtlasTexture.size}const F="globe"===l.projection.name,z=F?T:M,B=F?t.globeToMercatorTransition(g.zoom):0,$=xe(I,l.getProjection(),g),j=g.calculatePixelsToTileUnitsMatrix(i),U=te($,i.tileID.canonical,y,m,g,l.getProjection(),j),V=e.terrain&&y&&v?t.invert(t.create(),U):ur,H=ne($,i.tileID.canonical,y,m,g,l.getProjection(),j),G=C&&l.hasTextData(),W="none"!==r.layout.get("icon-text-fit")&&G&&l.hasIconData();if(v){const t=g.elevation,n=t?t.getAtTileOffsetFunc(I,g.center.lat,g.worldSize,l.getProjection()):null,r=ee($,i.tileID.canonical,y,m,g,l.getProjection(),j);ae(l,$,e,o,r,H,y,u,n,I)}const X=v||o&&C||W,q=e.translatePosMatrix($,i,a,s),Y=X?ur:U,Z=e.translatePosMatrix(H,i,a,s,!0),K=l.getProjection().createInversionMatrix(g,I.canonical),J=[];e.terrainRenderModeElevated()&&y&&J.push("PITCH_WITH_MAP_TERRAIN"),F&&J.push("PROJECTION_GLOBE_VIEW"),X&&J.push("PROJECTED_POS_ON_VIEWPORT");const Q=p&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let tt;tt=p?l.iconsInText?ir(d.kind,P,x,y,e,q,Y,Z,O,L,I,B,S,K,z,l.getProjection()):rr(d.kind,P,x,y,e,q,Y,Z,o,O,!0,I,B,S,K,z,l.getProjection()):nr(d.kind,P,x,y,e,q,Y,Z,o,O,I,B,S,K,z,l.getProjection());const et={program:e.useProgram(dr(p,o,l),h,J),buffers:c,uniformValues:tt,atlasTexture:A,atlasTextureIcon:N,atlasInterpolation:D,atlasInterpolationIcon:R,isSDF:p,hasHalo:Q,tile:i,labelPlaneMatrixInv:V};if(_&&l.canOverlap){b=!0;const e=c.segments.get();for(const n of e)k.push({segments:new t.SegmentVector([n]),sortKey:n.sortKey,state:et})}else k.push({segments:c.segments,sortKey:0,state:et})}b&&k.sort(((t,e)=>t.sortKey-e.sortKey));for(const t of k){const n=t.state;if(e.terrain&&e.terrain.setupElevationDraw(n.tile,n.program,{useDepthForOcclusion:!E,labelPlaneMatrixInv:n.labelPlaneMatrixInv}),d.activeTexture.set(f.TEXTURE0),n.atlasTexture.bind(n.atlasInterpolation,f.CLAMP_TO_EDGE),n.atlasTextureIcon&&(d.activeTexture.set(f.TEXTURE1),n.atlasTextureIcon&&n.atlasTextureIcon.bind(n.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),n.isSDF){const i=n.uniformValues;n.hasHalo&&(i.u_is_halo=1,gr(n.buffers,t.segments,r,e,n.program,w,h,p,i)),i.u_is_halo=0}gr(n.buffers,t.segments,r,e,n.program,w,h,p,n.uniformValues)}}function gr(e,n,r,i,o,a,s,l,c){const u=i.context,h=[e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer,e.globeExtVertexBuffer];o.draw(u,u.gl.TRIANGLES,a,s,l,t.CullFaceMode.disabled,c,r.id,e.layoutVertexBuffer,e.indexBuffer,n,r.paint,i.transform.zoom,e.programConfigurations.get(r.id),h)}function mr(e,n,r,i,o,a,s){const l=e.context.gl,c=r.paint.get("fill-pattern"),u=c&&c.constantOr(1);let h,p,d,f,g;s?(p=u&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",h=l.LINES):(p=u?"fillPattern":"fill",h=l.TRIANGLES);for(const m of i){const i=n.getTile(m);if(u&&!i.patternsLoaded())continue;const y=i.getBucket(r);if(!y)continue;e.prepareDrawTile();const v=y.programConfigurations.get(r.id),x=e.useProgram(p,v);u&&(e.context.activeTexture.set(l.TEXTURE0),i.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),v.updatePaintBuffers());const _=c.constantOr(null);if(_&&i.imageAtlas){const t=i.imageAtlas.patternPositions[_.toString()];t&&v.setConstantPatternPositions(t)}const b=e.translatePosMatrix(m.projMatrix,i,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(s){f=y.indexBuffer2,g=y.segments2;const t=e.terrain&&e.terrain.renderingToTexture?e.terrain.drapeBufferSize:[l.drawingBufferWidth,l.drawingBufferHeight];d="fillOutlinePattern"===p&&u?$n(b,e,i,t):Bn(b,t)}else f=y.indexBuffer,g=y.segments,d=u?zn(b,e,i):Fn(b);e.prepareDrawProgram(e.context,x,m.toUnwrapped()),x.draw(e.context,h,o,e.stencilModeForClipping(m),a,t.CullFaceMode.disabled,d,r.id,y.layoutVertexBuffer,f,g,r.paint,e.transform.zoom,v)}}function yr(e,n,r,i,o,a,s){const l=e.context,c=l.gl,u=e.transform,h=r.paint.get("fill-extrusion-pattern"),p=h.constantOr(1),d=r.paint.get("fill-extrusion-opacity"),f=[r.paint.get("fill-extrusion-ambient-occlusion-intensity"),r.paint.get("fill-extrusion-ambient-occlusion-radius")],g=r.layout.get("fill-extrusion-edge-radius"),m=g>0&&!r.paint.get("fill-extrusion-rounded-roof"),y=m?0:g,v="globe"===u.projection.name?t.fillExtrusionHeightLift():0,x="globe"===u.projection.name,_=x?t.globeToMercatorTransition(u.zoom):0,b=[t.mercatorXfromLng(u.center.lng),t.mercatorYfromLat(u.center.lat)],w=[];x&&w.push("PROJECTION_GLOBE_VIEW"),f[0]>0&&w.push("FAUX_AO"),m&&w.push("ZERO_ROOF_RADIUS");for(const S of i){const i=n.getTile(S),g=i.getBucket(r);if(!g||g.projection.name!==u.projection.name)continue;const m=g.programConfigurations.get(r.id),C=e.useProgram(p?"fillExtrusionPattern":"fillExtrusion",m,w);if(e.terrain){const t=e.terrain;if(e.style.terrainSetForDrapingOnly())t.setupElevationDraw(i,C,{useMeterToDem:!0});else{if(!g.enableTerrain)continue;if(t.setupElevationDraw(i,C,{useMeterToDem:!0}),vr(l,n,S,g,r,t),!g.centroidVertexBuffer){const t=C.attributes.a_centroid_pos;void 0!==t&&c.vertexAttrib2f(t,0,0)}}}p&&(e.context.activeTexture.set(c.TEXTURE0),i.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),m.updatePaintBuffers());const E=h.constantOr(null);if(E&&i.imageAtlas){const t=i.imageAtlas.patternPositions[E.toString()];t&&m.setConstantPatternPositions(t)}const k=e.translatePosMatrix(S.projMatrix,i,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),M=u.projection.createInversionMatrix(u,S.canonical),T=r.paint.get("fill-extrusion-vertical-gradient"),I=p?Nn(k,e,T,d,f,y,S,i,v,_,b,M):Ln(k,e,T,d,f,y,S,v,_,b,M);e.prepareDrawProgram(l,C,S.toUnwrapped());const P=[];e.terrain&&P.push(g.centroidVertexBuffer),x&&P.push(g.layoutVertexExtBuffer),C.draw(l,l.gl.TRIANGLES,o,a,s,t.CullFaceMode.backCCW,I,r.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,r.paint,e.transform.zoom,m,P)}}function vr(e,n,r,i,o,a){const s=[e=>{let n=e.canonical.x-1,r=e.wrap;return n<0&&(n=(1<<e.canonical.z)-1,r--),new t.OverscaledTileID(e.overscaledZ,r,e.canonical.z,n,e.canonical.y)},e=>{let n=e.canonical.x+1,r=e.wrap;return n===1<<e.canonical.z&&(n=0,r++),new t.OverscaledTileID(e.overscaledZ,r,e.canonical.z,n,e.canonical.y)},e=>new t.OverscaledTileID(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,(0===e.canonical.y?1<<e.canonical.z:e.canonical.y)-1),e=>new t.OverscaledTileID(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y===(1<<e.canonical.z)-1?0:e.canonical.y+1)],l=t=>{const e=n.getSource().minzoom,r=t=>{const e=n.getTileByID(t);if(e&&e.hasData())return e.getBucket(o)},i=[0,-1,1];for(const n of i){if(t.overscaledZ+n<e)continue;const i=r(t.calculateScaledKey(t.overscaledZ+n));if(i)return i}},c=[0,0,0],u=(e,n)=>(c[0]=Math.min(e.min.y,n.min.y),c[1]=Math.max(e.max.y,n.max.y),c[2]=t.EXTENT-n.min.x>e.max.x?n.min.x-t.EXTENT:e.max.x,c),h=(e,n)=>(c[0]=Math.min(e.min.x,n.min.x),c[1]=Math.max(e.max.x,n.max.x),c[2]=t.EXTENT-n.min.y>e.max.y?n.min.y-t.EXTENT:e.max.y,c),p=[(t,e)=>u(t,e),(t,e)=>u(e,t),(t,e)=>h(t,e),(t,e)=>h(e,t)],d=new t.Point(0,0);let f,g,m;const y=(e,n,i,o,s)=>{const l=[[o?i:e,o?e:i,0],[o?i:n,o?n:i,0]],c=s<0?t.EXTENT+s:s,u=[o?c:(e+n)/2,o?(e+n)/2:c,0];return 0===i&&s<0||0!==i&&s>0?a.getForTilePoints(m,[u],!0,g):l.push(u),a.getForTilePoints(r,l,!0,f),Math.max(l[0][2],l[1][2],u[2])/a.exaggeration()};for(let v=0;v<4;v++){const e=(v<2?1:5)-v,n=i.borders[v];if(0===n.length)continue;const o=m=s[v](r),c=l(o);if(!(c&&c instanceof t.FillExtrusionBucket&&c.enableTerrain))continue;if(i.borderDoneWithNeighborZ[v]===c.canonical.z&&c.borderDoneWithNeighborZ[e]===i.canonical.z)continue;if(g=a.findDEMTileFor(o),!g||!g.dem)continue;if(!f){const t=a.findDEMTileFor(r);if(!t||!t.dem)return;f=t}const u=c.borders[e];let h=0;const x=c.borderDoneWithNeighborZ[e]!==i.canonical.z;if(i.canonical.z===c.canonical.z){for(let r=0;r<n.length;r++){const o=i.featuresOnBorder[n[r]],a=o.borders[v];let s;for(;h<u.length&&(s=c.featuresOnBorder[u[h]],!(s.borders[e][1]>a[0]+3));)x&&c.encodeCentroid(void 0,s,!1),h++;if(s&&h<u.length){const n=h;let r=0;for(;!(s.borders[e][0]>a[1]-3)&&(r++,++h!==u.length);)s=c.featuresOnBorder[u[h]];if(s=c.featuresOnBorder[u[n]],o.intersectsCount()>1||s.intersectsCount()>1||1!==r){1!==r&&(h=n),i.encodeCentroid(void 0,o,!1),x&&c.encodeCentroid(void 0,s,!1);continue}const l=p[v](o,s),f=v%2?t.EXTENT-1:0;d.x=y(l[0],Math.min(t.EXTENT-1,l[1]),f,v<2,l[2]),d.y=0,i.encodeCentroid(d,o,!1),x&&c.encodeCentroid(d,s,!1)}else i.encodeCentroid(void 0,o,!1)}i.borderDoneWithNeighborZ[v]=c.canonical.z,i.needsCentroidUpdate=!0,x&&(c.borderDoneWithNeighborZ[e]=i.canonical.z,c.needsCentroidUpdate=!0)}else{for(const t of n)i.encodeCentroid(void 0,i.featuresOnBorder[t],!1);if(x){for(const t of u)c.encodeCentroid(void 0,c.featuresOnBorder[t],!1);c.borderDoneWithNeighborZ[e]=i.canonical.z,c.needsCentroidUpdate=!0}i.borderDoneWithNeighborZ[v]=c.canonical.z,i.needsCentroidUpdate=!0}}(i.needsCentroidUpdate||!i.centroidVertexBuffer&&0!==i.centroidVertexArray.length)&&i.uploadCentroid(e)}const xr=new t.Color(1,0,0,1),_r=new t.Color(0,1,0,1),br=new t.Color(0,0,1,1),wr=new t.Color(1,0,1,1),Sr=new t.Color(0,1,1,1);function Cr(e,n,r){const i=e.context,o=e.transform,a=i.gl,s="globe"===o.projection.name,l=s?["PROJECTION_GLOBE_VIEW"]:null;let c=r.projMatrix;if(s&&t.globeToMercatorTransition(o.zoom)>0){const e=t.transitionTileAABBinECEF(r.canonical,o),n=t.globeDenormalizeECEF(e);c=t.multiply(new Float32Array(16),o.globeMatrix,n),t.multiply(c,o.projMatrix,c)}const u=e.useProgram("debug",null,l),h=n.getTileByID(r.key);e.terrain&&e.terrain.setupElevationDraw(h,u);const p=t.DepthMode.disabled,d=t.StencilMode.disabled,f=e.colorModeForRenderPass(),g="$debug";i.activeTexture.set(a.TEXTURE0),e.emptyTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE),s?h._makeGlobeTileDebugBuffers(e.context,o):h._makeDebugTileBoundsBuffers(e.context,o.projection);const m=h._tileDebugBuffer||e.debugBuffer,y=h._tileDebugIndexBuffer||e.debugIndexBuffer,v=h._tileDebugSegments||e.debugSegments;u.draw(i,a.LINE_STRIP,p,d,f,t.CullFaceMode.disabled,Gn(c,t.Color.red),g,m,y,v,null,null,null,[h._globeTileDebugBorderBuffer]);const x=h.latestRawTileData,_=Math.floor((x&&x.byteLength||0)/1024),b=n.getTile(r).tileSize,w=512/Math.min(b,512)*(r.overscaledZ/o.zoom)*.5;let S=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(S+=` => ${r.overscaledZ}`),S+=` ${_}kb`,function(t,e){t.initDebugOverlayCanvas();const n=t.debugOverlayCanvas,r=t.context.gl,i=t.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(e,5,5),i.strokeText(e,5,5),t.debugOverlayTexture.update(n),t.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(e,S);const C=h._tileDebugTextBuffer||e.debugBuffer,E=h._tileDebugTextIndexBuffer||e.quadTriangleIndexBuffer,k=h._tileDebugTextSegments||e.debugSegments;u.draw(i,a.TRIANGLES,p,d,t.ColorMode.alphaBlended,t.CullFaceMode.disabled,Gn(c,t.Color.transparent,w),g,C,E,k,null,null,null,[h._globeTileDebugTextBuffer])}function Er(t,e,n,r){Mr(t,0,e+n/2,t.transform.width,n,r)}function kr(t,e,n,r){Mr(t,e-n/2,0,n,t.transform.height,r)}function Mr(e,n,r,i,o,a){const s=e.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(n*t.exported.devicePixelRatio,r*t.exported.devicePixelRatio,i*t.exported.devicePixelRatio,o*t.exported.devicePixelRatio),s.clear({color:a}),l.disable(l.SCISSOR_TEST)}const Tr=t.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Ir}=Tr;function Pr(t,e,n,r){t.emplaceBack(e,n,r)}class Or{constructor(e){this.vertexArray=new t.StructArrayLayout3f12,this.indices=new t.StructArrayLayout3ui6,Pr(this.vertexArray,-1,-1,1),Pr(this.vertexArray,1,-1,1),Pr(this.vertexArray,-1,1,1),Pr(this.vertexArray,1,1,1),Pr(this.vertexArray,-1,-1,-1),Pr(this.vertexArray,1,-1,-1),Pr(this.vertexArray,-1,1,-1),Pr(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=e.createVertexBuffer(this.vertexArray,Ir),this.indexBuffer=e.createIndexBuffer(this.indices),this.segment=t.SegmentVector.simpleSegment(0,0,36,12)}}function Ar(e,n,r,i,o,a){const s=e.gl,l=n.paint.get("sky-atmosphere-color"),c=n.paint.get("sky-atmosphere-halo-color"),u=n.paint.get("sky-atmosphere-sun-intensity"),h=((t,e,n,r,i)=>({u_matrix_3f:t,u_sun_direction:e,u_sun_intensity:n,u_color_tint_r:[r.r,r.g,r.b,r.a],u_color_tint_m:[i.r,i.g,i.b,i.a],u_luminance:5e-5}))(t.fromMat4(t.create$1(),i),o,u,l,c);s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+a,n.skyboxTexture,0),r.draw(e,s.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.frontCW,h,"skyboxCapture",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}const Dr=t.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Rr{constructor(e){const n=new t.StructArrayLayout5f20;n.emplaceBack(-1,1,1,0,0),n.emplaceBack(1,1,1,1,0),n.emplaceBack(1,-1,1,1,1),n.emplaceBack(-1,-1,1,0,1);const r=new t.StructArrayLayout3ui6;r.emplaceBack(0,1,2),r.emplaceBack(2,3,0),this.vertexBuffer=e.createVertexBuffer(n,Dr.members),this.indexBuffer=e.createIndexBuffer(r),this.segments=t.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Lr={symbol:function(e,n,r,i,o){if("translucent"!==e.renderPass)return;const a=t.StencilMode.disabled,s=e.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(e,n,r,i,o,a,s){const l=n.transform,c="map"===o,u="map"===a;for(const h of e){const e=i.getTile(h),n=e.getBucket(r);if(!n||!n.text||!n.text.segments.get().length)continue;const o=t.evaluateSizeForZoom(n.textSizeData,l.zoom),a=xe(h,n.getProjection(),l),p=l.calculatePixelsToTileUnitsMatrix(e),d=te(a,e.tileID.canonical,u,c,l,n.getProjection(),p),f="none"!==r.layout.get("icon-text-fit")&&n.hasIconData();if(o){const r=Math.pow(2,l.zoom-e.tileID.overscaledZ);pr(n,c,u,s,t.symbolSize,l,d,h,r,o,f)}}}(i,e,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&fr(e,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),a,s),0!==r.paint.get("text-opacity").constantOr(1)&&fr(e,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&(cr(e,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),cr(e,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))},circle:function(e,n,r,i){if("translucent"!==e.renderPass)return;const o=r.paint.get("circle-opacity"),a=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),l=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0===o.constantOr(1)&&(0===a.constantOr(1)||0===s.constantOr(1)))return;const c=e.context,u=c.gl,h=e.transform,p=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),d=t.StencilMode.disabled,f=e.colorModeForRenderPass(),g="globe"===h.projection.name,m=[t.mercatorXfromLng(h.center.lng),t.mercatorYfromLat(h.center.lat)],y=[];for(let x=0;x<i.length;x++){const o=i[x],a=n.getTile(o),s=a.getBucket(r);if(!s||s.projection.name!==h.projection.name)continue;const c=s.programConfigurations.get(r.id),u=Vn(r);g&&u.push("PROJECTION_GLOBE_VIEW");const p=e.useProgram("circle",c,u),d=s.layoutVertexBuffer,f=s.globeExtVertexBuffer,v=s.indexBuffer,_=h.projection.createInversionMatrix(h,o.canonical),b={programConfiguration:c,program:p,layoutVertexBuffer:d,globeExtVertexBuffer:f,indexBuffer:v,uniformValues:Un(e,o,a,_,m,r),tile:a};if(l){const e=s.segments.get();for(const n of e)y.push({segments:new t.SegmentVector([n]),sortKey:n.sortKey,state:b})}else y.push({segments:s.segments,sortKey:0,state:b})}l&&y.sort(((t,e)=>t.sortKey-e.sortKey));const v={useDepthForOcclusion:!g};for(const x of y){const{programConfiguration:n,program:i,layoutVertexBuffer:o,globeExtVertexBuffer:a,indexBuffer:s,uniformValues:l,tile:g}=x.state,m=x.segments;e.terrain&&e.terrain.setupElevationDraw(g,i,v),e.prepareDrawProgram(c,i,g.tileID.toUnwrapped()),i.draw(c,u.TRIANGLES,p,d,f,t.CullFaceMode.disabled,l,r.id,o,s,m,r.paint,h.zoom,n,[a])}},heatmap:function(e,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){const o=e.context,a=o.gl,s=t.StencilMode.disabled,l=new t.ColorMode([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,n,r){const i=t.gl,o=e.width*r,a=e.height*r;t.activeTexture.set(i.TEXTURE1),t.viewport.set([0,0,o,a]);let s=n.heatmapFbo;if(!s||s&&(s.width!==o||s.height!==a)){s&&s.destroy();const e=i.createTexture();i.bindTexture(i.TEXTURE_2D,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),s=n.heatmapFbo=t.createFramebuffer(o,a,!1),function(t,e,n,r,i,o){const a=t.gl;a.texImage2D(a.TEXTURE_2D,0,t.isWebGL2&&t.extRenderToTextureHalfFloat?a.RGBA16F:a.RGBA,i,o,0,a.RGBA,t.extRenderToTextureHalfFloat?t.isWebGL2?a.HALF_FLOAT:t.extTextureHalfFloat.HALF_FLOAT_OES:a.UNSIGNED_BYTE,null),r.colorAttachment.set(n)}(t,0,e,s,o,a)}else i.bindTexture(i.TEXTURE_2D,s.colorAttachment.get()),t.bindFramebuffer.set(s.framebuffer)}(o,e,r,"globe"===e.transform.projection.name?.5:.25),o.clear({color:t.Color.transparent});const c=e.transform,u="globe"===c.projection.name,h=u?["PROJECTION_GLOBE_VIEW"]:null,p=u?t.CullFaceMode.frontCCW:t.CullFaceMode.disabled,d=[t.mercatorXfromLng(c.center.lng),t.mercatorYfromLat(c.center.lat)];for(let f=0;f<i.length;f++){const g=i[f];if(n.hasRenderableParent(g))continue;const m=n.getTile(g),y=m.getBucket(r);if(!y||y.projection.name!==c.projection.name)continue;const v=y.programConfigurations.get(r.id),x=e.useProgram("heatmap",v,h),{zoom:_}=e.transform;e.terrain&&e.terrain.setupElevationDraw(m,x),e.prepareDrawProgram(o,x,g.toUnwrapped());const b=c.projection.createInversionMatrix(c,g.canonical);x.draw(o,a.TRIANGLES,t.DepthMode.disabled,s,l,p,Xn(e,g,m,b,d,_,r.paint.get("heatmap-intensity")),r.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,r.paint,e.transform.zoom,v,u?[y.globeExtVertexBuffer]:null)}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){const r=e.context,i=r.gl,o=n.heatmapFbo;if(!o)return;r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);let a=n.colorRampTexture;a||(a=n.colorRampTexture=new t.Texture(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(r,i.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,((t,e,n,r)=>({u_image:0,u_color_ramp:1,u_opacity:e.paint.get("heatmap-opacity")}))(0,n),n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}(e,r))},line:function(e,n,r,i){if("translucent"!==e.renderPass)return;const o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0===o.constantOr(1)||0===a.constantOr(1))return;const s=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),l=e.colorModeForRenderPass(),c=e.terrain&&e.terrain.renderingToTexture?1:t.exported.devicePixelRatio,u=r.paint.get("line-dasharray"),h=u.constantOr(1),p=r.layout.get("line-cap"),d=r.paint.get("line-pattern"),f=d.constantOr(1),g=r.paint.get("line-gradient"),m=f?"linePattern":"line",y=e.context,v=y.gl,x=(t=>{const e=[];Jn(t)&&e.push("RENDER_LINE_DASH"),t.paint.get("line-gradient")&&e.push("RENDER_LINE_GRADIENT");const n=t.paint.get("line-trim-offset");0===n[0]&&0===n[1]||e.push("RENDER_LINE_TRIM_OFFSET");const r=t.paint.get("line-pattern").constantOr(1),i=1!==t.paint.get("line-opacity").constantOr(1);return!r&&i&&e.push("RENDER_LINE_ALPHA_DISCARD"),e})(r);let _=x.includes("RENDER_LINE_ALPHA_DISCARD");e.terrain&&e.terrain.clipOrMaskOverlapStencilType()&&(_=!1);for(const b of i){const i=n.getTile(b);if(f&&!i.patternsLoaded())continue;const o=i.getBucket(r);if(!o)continue;e.prepareDrawTile();const a=o.programConfigurations.get(r.id),w=e.useProgram(m,a,x),S=d.constantOr(null);if(S&&i.imageAtlas){const t=i.imageAtlas.patternPositions[S.toString()];t&&a.setConstantPatternPositions(t)}const C=u.constantOr(null),E=p.constantOr(null);if(!f&&C&&E&&i.lineAtlas){const t=i.lineAtlas.getDash(C,E);t&&a.setConstantPatternPositions(t)}let[k,M]=r.paint.get("line-trim-offset");if("round"===E||"square"===E){const t=1;k!==M&&(0===k&&(k-=t),1===M&&(M+=t))}const T=e.terrain?b.projMatrix:null,I=f?Yn(e,i,r,T,c):qn(e,i,r,T,o.lineClipsArray.length,c,[k,M]);if(g){const i=o.gradients[r.id];let a=i.texture;if(r.gradientVersion!==i.version){let s=256;if(r.stepInterpolant){const r=n.getSource().maxzoom,i=b.canonical.z===r?Math.ceil(1<<e.transform.maxZoom-b.canonical.z):1;s=t.clamp(t.nextPowerOfTwo(o.maxLineLength/t.EXTENT*1024*i),256,y.maxTextureSize)}i.gradient=t.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:s,image:i.gradient||void 0,clips:o.lineClipsArray}),i.texture?i.texture.update(i.gradient):i.texture=new t.Texture(y,i.gradient,v.RGBA),i.version=r.gradientVersion,a=i.texture}y.activeTexture.set(v.TEXTURE1),a.bind(r.stepInterpolant?v.NEAREST:v.LINEAR,v.CLAMP_TO_EDGE)}h&&(y.activeTexture.set(v.TEXTURE0),i.lineAtlasTexture.bind(v.LINEAR,v.REPEAT),a.updatePaintBuffers()),f&&(y.activeTexture.set(v.TEXTURE0),i.imageAtlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),a.updatePaintBuffers()),e.prepareDrawProgram(y,w,b.toUnwrapped());const P=n=>{w.draw(y,v.TRIANGLES,s,n,l,t.CullFaceMode.disabled,I,r.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,r.paint,e.transform.zoom,a,[o.layoutVertexBuffer2])};if(_){const n=e.stencilModeForClipping(b).ref;0===n&&e.terrain&&y.clear({stencil:0});const r={func:v.EQUAL,mask:255};I.u_alpha_discard_threshold=.8,P(new t.StencilMode(r,n,255,v.KEEP,v.KEEP,v.INVERT)),I.u_alpha_discard_threshold=0,P(new t.StencilMode(r,n,255,v.KEEP,v.KEEP,v.KEEP))}else P(e.stencilModeForClipping(b))}_&&(e.resetStencilClippingMasks(),e.terrain&&y.clear({stencil:0}))},fill:function(e,n,r,i){const o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0===a.constantOr(1))return;const s=e.colorModeForRenderPass(),l=r.paint.get("fill-pattern"),c=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(t.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===c){const o=e.depthModeForSublayer(1,"opaque"===e.renderPass?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly);mr(e,n,r,i,o,s,!1)}if("translucent"===e.renderPass&&r.paint.get("fill-antialias")){const o=e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,t.DepthMode.ReadOnly);mr(e,n,r,i,o,s,!0)}},"fill-extrusion":function(e,n,r,i){const o=r.paint.get("fill-extrusion-opacity");if(0!==o&&"translucent"===e.renderPass){const a=new t.DepthMode(e.context.gl.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);if(1!==o||r.paint.get("fill-extrusion-pattern").constantOr(1))yr(e,n,r,i,a,t.StencilMode.disabled,t.ColorMode.disabled),yr(e,n,r,i,a,e.stencilModeFor3D(),e.colorModeForRenderPass()),e.resetStencilClippingMasks();else{const o=e.colorModeForRenderPass();yr(e,n,r,i,a,t.StencilMode.disabled,o)}}},hillshade:function(e,n,r,i){if("offscreen"!==e.renderPass&&"translucent"!==e.renderPass)return;const o=e.context,a=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),s=e.colorModeForRenderPass(),l=e.terrain&&e.terrain.renderingToTexture,[c,u]="translucent"!==e.renderPass||l?[{},i]:e.stencilConfigForOverlap(i);for(const h of u){const i=n.getTile(h);if(i.needsHillshadePrepare&&"offscreen"===e.renderPass)yn(e,i,r,a,t.StencilMode.disabled,s);else if("translucent"===e.renderPass){const t=l&&e.terrain?e.terrain.stencilModeForRTTOverlap(h):c[h.overscaledZ];gn(e,h,i,r,a,t,s)}}o.viewport.set([0,0,e.width,e.height]),e.resetStencilClippingMasks()},raster:function(e,n,r,i,o,a){if("translucent"!==e.renderPass)return;if(0===r.paint.get("raster-opacity"))return;if(!i.length)return;const s=e.context,l=s.gl,c=n.getSource(),u=e.useProgram("raster"),h=e.colorModeForRenderPass(),p=e.terrain&&e.terrain.renderingToTexture,[d,f]=c instanceof Tt||p?[{},i]:e.stencilConfigForOverlap(i),g=f[f.length-1].overscaledZ,m=!e.options.moving;for(const y of f){const i=p?t.DepthMode.disabled:e.depthModeForSublayer(y.overscaledZ-g,1===r.paint.get("raster-opacity")?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly,l.LESS),o=y.toUnwrapped(),f=n.getTile(y);if(p&&(!f||!f.hasData()))continue;const v=p?y.projMatrix:e.transform.calculateProjMatrix(o,m),x=e.terrain&&p?e.terrain.stencilModeForRTTOverlap(y):d[y.overscaledZ],_=a?0:r.paint.get("raster-fade-duration");f.registerFadeDuration(_);const b=n.findLoadedParent(y,0),w=Mn(f,b,n,e.transform,_);let S,C;e.terrain&&e.terrain.prepareDrawTile();const E="nearest"===r.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;s.activeTexture.set(l.TEXTURE0),f.texture.bind(E,l.CLAMP_TO_EDGE),s.activeTexture.set(l.TEXTURE1),b?(b.texture.bind(E,l.CLAMP_TO_EDGE),S=Math.pow(2,b.tileID.overscaledZ-f.tileID.overscaledZ),C=[f.tileID.canonical.x*S%1,f.tileID.canonical.y*S%1]):f.texture.bind(E,l.CLAMP_TO_EDGE),f.texture.useMipmap&&s.extTextureFilterAnisotropic&&e.transform.pitch>20&&l.texParameterf(l.TEXTURE_2D,s.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,s.extTextureFilterAnisotropicMax);const k=Qn(v,C||[0,0],S||1,w,r,c instanceof Tt?c.perspectiveTransform:[0,0]);if(e.prepareDrawProgram(s,u,o),c instanceof Tt)c.boundsBuffer&&c.boundsSegments&&u.draw(s,l.TRIANGLES,i,t.StencilMode.disabled,h,t.CullFaceMode.disabled,k,r.id,c.boundsBuffer,e.quadTriangleIndexBuffer,c.boundsSegments);else{const{tileBoundsBuffer:n,tileBoundsIndexBuffer:o,tileBoundsSegments:a}=e.getTileBoundsBuffers(f);u.draw(s,l.TRIANGLES,i,x,h,t.CullFaceMode.disabled,k,r.id,n,o,a)}}e.resetStencilClippingMasks()},background:function(e,n,r,i){const o=r.paint.get("background-color"),a=r.paint.get("background-opacity");if(0===a)return;const s=e.context,l=s.gl,c=e.transform,u=c.tileSize,h=r.paint.get("background-pattern");if(e.isPatternMissing(h))return;const p=!h&&1===o.a&&1===a&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass!==p)return;const d=t.StencilMode.disabled,f=e.depthModeForSublayer(0,"opaque"===p?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly),g=e.colorModeForRenderPass(),m=e.useProgram(h?"backgroundPattern":"background");let y,v=i;v||(y=e.getBackgroundTiles(),v=Object.values(y).map((t=>t.tileID))),h&&(s.activeTexture.set(l.TEXTURE0),e.imageManager.bind(e.context));for(const x of v){const p=x.toUnwrapped(),v=i?x.projMatrix:e.transform.calculateProjMatrix(p);e.prepareDrawTile();const _=n?n.getTile(x):y?y[x.key]:new t.Tile(x,u,c.zoom,e),b=h?ar(v,a,e,h,{tileID:x,tileSize:u}):or(v,a,o);e.prepareDrawProgram(s,m,p);const{tileBoundsBuffer:w,tileBoundsIndexBuffer:S,tileBoundsSegments:C}=e.getTileBoundsBuffers(_);m.draw(s,l.TRIANGLES,f,d,g,t.CullFaceMode.disabled,b,r.id,w,S,C)}},sky:function(e,n,r){const i=e.transform,o="mercator"===i.projection.name||"globe"===i.projection.name?1:t.smoothstep(7,8,i.zoom),a=r.paint.get("sky-opacity")*o;if(0===a)return;const s=e.context,l=r.paint.get("sky-type"),c=new t.DepthMode(s.gl.LEQUAL,t.DepthMode.ReadOnly,[0,1]),u=e.frameCounter/1e3%1;"atmosphere"===l?"offscreen"===e.renderPass?r.needsSkyboxCapture(e)&&(function(e,n,r,i){const o=e.context,a=o.gl;let s=n.skyboxFbo;if(!s){s=n.skyboxFbo=o.createFramebuffer(32,32,!1),n.skyboxGeometry=new Or(o),n.skyboxTexture=o.gl.createTexture(),a.bindTexture(a.TEXTURE_CUBE_MAP,n.skyboxTexture),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR);for(let t=0;t<6;++t)a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,a.RGBA,32,32,0,a.RGBA,a.UNSIGNED_BYTE,null)}o.bindFramebuffer.set(s.framebuffer),o.viewport.set([0,0,32,32]);const l=n.getCenter(e,!0),c=e.useProgram("skyboxCapture"),u=new Float64Array(16);t.identity(u),t.rotateY(u,u,.5*-Math.PI),Ar(o,n,c,u,l,0),t.identity(u),t.rotateY(u,u,.5*Math.PI),Ar(o,n,c,u,l,1),t.identity(u),t.rotateX(u,u,.5*-Math.PI),Ar(o,n,c,u,l,2),t.identity(u),t.rotateX(u,u,.5*Math.PI),Ar(o,n,c,u,l,3),t.identity(u),Ar(o,n,c,u,l,4),t.identity(u),t.rotateY(u,u,Math.PI),Ar(o,n,c,u,l,5),o.viewport.set([0,0,e.width,e.height])}(e,r),r.markSkyboxValid(e)):"sky"===e.renderPass&&function(e,n,r,i,o){const a=e.context,s=a.gl,l=e.transform,c=e.useProgram("skybox");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_CUBE_MAP,n.skyboxTexture);const u=((t,e,n,r,i)=>({u_matrix:t,u_sun_direction:e,u_cubemap:0,u_opacity:r,u_temporal_offset:i}))(l.skyboxMatrix,n.getCenter(e,!1),0,i,o);e.prepareDrawProgram(a,c),c.draw(a,s.TRIANGLES,r,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.backCW,u,"skybox",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(e,r,c,a,u):"gradient"===l&&"sky"===e.renderPass&&function(e,n,r,i,o){const a=e.context,s=a.gl,l=e.transform,c=e.useProgram("skyboxGradient");n.skyboxGeometry||(n.skyboxGeometry=new Or(a)),a.activeTexture.set(s.TEXTURE0);let u=n.colorRampTexture;u||(u=n.colorRampTexture=new t.Texture(a,n.colorRamp,s.RGBA)),u.bind(s.LINEAR,s.CLAMP_TO_EDGE);const h=((e,n,r,i,o)=>({u_matrix:e,u_color_ramp:0,u_center_direction:n,u_radius:t.degToRad(r),u_opacity:i,u_temporal_offset:o}))(l.skyboxMatrix,n.getCenter(e,!1),n.paint.get("sky-gradient-radius"),i,o);e.prepareDrawProgram(a,c),c.draw(a,s.TRIANGLES,r,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.backCW,h,"skyboxGradient",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(e,r,c,a,u)},debug:function(t,e,n){for(let r=0;r<n.length;r++)Cr(t,e,n[r])},custom:function(e,n,r,i){const o=e.context,a=r.implementation;if(!e.transform.projection.unsupportedLayers||!e.transform.projection.unsupportedLayers.includes("custom")||e.terrain&&(e.terrain.renderingToTexture||"offscreen"===e.renderPass)&&r.isLayerDraped()){if("offscreen"===e.renderPass){const n=a.prerender;if(n){if(e.setCustomLayerDefaults(),o.setColorMode(e.colorModeForRenderPass()),"globe"===e.transform.projection.name){const r=e.transform.pointMerc;n.call(a,o.gl,e.transform.customLayerMatrix(),e.transform.getProjection(),e.transform.globeToMercatorMatrix(),t.globeToMercatorTransition(e.transform.zoom),[r.x,r.y],e.transform.pixelsPerMeterRatio)}else n.call(a,o.gl,e.transform.customLayerMatrix());o.setDirty(),e.setBaseState()}}else if("translucent"===e.renderPass){if(e.terrain&&e.terrain.renderingToTexture){const n=a.renderToTile;if(n){const r=i[0].canonical,s=new t.MercatorCoordinate(r.x+i[0].wrap*(1<<r.z),r.y,r.z);o.setDepthMode(t.DepthMode.disabled),o.setStencilMode(t.StencilMode.disabled),o.setColorMode(e.colorModeForRenderPass()),e.setCustomLayerDefaults(),n.call(a,o.gl,s),o.setDirty(),e.setBaseState()}return}e.setCustomLayerDefaults(),o.setColorMode(e.colorModeForRenderPass()),o.setStencilMode(t.StencilMode.disabled);const n="3d"===a.renderingMode?new t.DepthMode(e.context.gl.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,t.DepthMode.ReadOnly);if(o.setDepthMode(n),"globe"===e.transform.projection.name){const n=e.transform.pointMerc;a.render(o.gl,e.transform.customLayerMatrix(),e.transform.getProjection(),e.transform.globeToMercatorMatrix(),t.globeToMercatorTransition(e.transform.zoom),[n.x,n.y],e.transform.pixelsPerMeterRatio)}else a.render(o.gl,e.transform.customLayerMatrix());o.setDirty(),e.setBaseState(),o.bindFramebuffer.set(null)}}else t.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Nr{constructor(e,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.context=new Ct(e,r),this.transform=n,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=t.SourceCache.maxUnderzooming+t.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(t,e){const n=!!t&&!!t.terrain&&this.transform.projection.supportsTerrain;if(!(n||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new On(this,t));const r=this._terrain;this.transform.elevation=n?r:null,r.update(t,this.transform,e)}_updateFog(t){const e=t.fog;if(!e||"globe"===this.transform.projection.name||e.getOpacity(this.transform.pitch)<1||e.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[n,r]=e.getFovAdjustedRange(this.transform._fov);if(n>r)return void(this.transform.fogCullDistSq=null);const i=n+.78*(r-n);this.transform.fogCullDistSq=i*i}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(e,n){if(this.width=e*t.exported.devicePixelRatio,this.height=n*t.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const t of this.style.order)this.style._layers[t].resize()}setup(){const e=this.context,n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,t.posAttributes.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);const r=new t.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(t.EXTENT,0),r.emplaceBack(0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(r,t.posAttributes.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);const i=new t.StructArrayLayout2i4;i.emplaceBack(-1,-1),i.emplaceBack(1,-1),i.emplaceBack(-1,1),i.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(i,t.posAttributes.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);const o=new t.StructArrayLayout4i8;o.emplaceBack(0,0,0,0),o.emplaceBack(t.EXTENT,0,t.EXTENT,0),o.emplaceBack(0,t.EXTENT,0,t.EXTENT),o.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.mercatorBoundsBuffer=e.createVertexBuffer(o,t.boundsAttributes.members),this.mercatorBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);const a=new t.StructArrayLayout3ui6;a.emplaceBack(0,1,2),a.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(a);const s=new t.StructArrayLayout1ui2;for(const t of[0,1,3,2,0])s.emplaceBack(t);this.debugIndexBuffer=e.createIndexBuffer(s),this.emptyTexture=new t.Texture(e,new t.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),e.gl.RGBA),this.identityMat=t.create();const l=this.context.gl;this.stencilClearMode=new t.StencilMode({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO),this.loadTimeStamps.push(t.window.performance.now()),this.atmosphereBuffer=new Rr(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(t){return t._makeTileBoundsBuffers(this.context,this.transform.projection),t._tileBoundsBuffer?{tileBoundsBuffer:t._tileBoundsBuffer,tileBoundsIndexBuffer:t._tileBoundsIndexBuffer,tileBoundsSegments:t._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(e,n.TRIANGLES,t.DepthMode.disabled,this.stencilClearMode,t.ColorMode.disabled,t.CullFaceMode.disabled,kn(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(e,n,r){if(!n||this.currentStencilSource===n.id||!e.isTileClipped()||!r||0===r.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let t=!1;for(const e of r)if(void 0===this._tileClippingMaskIDs[e.key]){t=!0;break}if(!t)return}this.currentStencilSource=n.id;const i=this.context,o=i.gl;this.nextStencilID+r.length>256&&this.clearStencil(),i.setColorMode(t.ColorMode.disabled),i.setDepthMode(t.DepthMode.disabled);const a=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const s of r){const e=n.getTile(s),r=this._tileClippingMaskIDs[s.key]=this.nextStencilID++,{tileBoundsBuffer:l,tileBoundsIndexBuffer:c,tileBoundsSegments:u}=this.getTileBoundsBuffers(e);a.draw(i,o.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:o.ALWAYS,mask:0},r,255,o.KEEP,o.KEEP,o.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,kn(s.projMatrix),"$clipping",l,c,u)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,n=this.context.gl;return new t.StencilMode({func:n.NOTEQUAL,mask:255},e,255,n.KEEP,n.KEEP,n.REPLACE)}stencilModeForClipping(e){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(e);const n=this.context.gl;return new t.StencilMode({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,n.KEEP,n.KEEP,n.REPLACE)}stencilConfigForOverlap(e){const n=this.context.gl,r=e.sort(((t,e)=>e.overscaledZ-t.overscaledZ)),i=r[r.length-1].overscaledZ,o=r[0].overscaledZ-i+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();const e={};for(let r=0;r<o;r++)e[r+i]=new t.StencilMode({func:n.GEQUAL,mask:255},r+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=o,[e,r]}return[{[i]:t.StencilMode.disabled},r]}colorModeForRenderPass(){const e=this.context.gl;if(this._showOverdrawInspector){const n=1/8;return new t.ColorMode([e.CONSTANT_COLOR,e.ONE],new t.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?t.ColorMode.unblended:t.ColorMode.alphaBlended}depthModeForSublayer(e,n,r){if(!this.opaquePassEnabledForLayer())return t.DepthMode.disabled;const i=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new t.DepthMode(r||this.context.gl.LEQUAL,n,[i,i])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,n){this.style=e,this.options=n,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.exported.now()),this.imageManager.beginFrame();const r=this.style.order,i=this.style._sourceCaches;for(const t in i){const e=i[t];e.used&&e.prepare(this.context)}const o={},a={},s={};for(const t in i){const e=i[t];o[t]=e.getVisibleCoordinates(),a[t]=o[t].slice().reverse(),s[t]=e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let t=0;t<r.length;t++)if(this.style._layers[r[t]].is3D()){this.opaquePassCutoff=t;break}if(this.terrain&&(this.terrain.updateTileBinding(s),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new t.GlobeSharedBuffers(this.context)),!t.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const t of r){const n=this.style._layers[t],r=e._getLayerSourceCache(n);if(!n.hasOffscreenPass()||n.isHidden(this.transform.zoom))continue;const i=r?a[r.id]:void 0;("custom"===n.type||n.isSky()||i&&i.length)&&this.renderLayer(this,r,n,i)}this.depthRangeFor3D=[0,1-(e.order.length+2)*this.numSublayers*this.depthEpsilon];const l=this.terrain;if(l&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&l.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:n.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){const t=this.style._layers[r[this.currentLayer]],n=e._getLayerSourceCache(t);if(t.isSky())continue;const i=n?a[n.id]:void 0;this._renderTileClippingMasks(t,n,i),this.renderLayer(this,n,t,i)}if(this.style.fog&&this.transform.projection.supportsFog&&function(e,n){const r=e.context,i=r.gl,o=e.transform,a=new t.DepthMode(i.LEQUAL,t.DepthMode.ReadOnly,[0,1]),s=e.useProgram("globeAtmosphere",null,"globe"===o.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),l=t.globeToMercatorTransition(o.zoom),c=n.properties.get("color").toArray01(),u=n.properties.get("high-color").toArray01(),h=n.properties.get("space-color").toArray01PremultipliedAlpha(),p=t.identity$1([]);t.rotateY$1(p,p,-t.degToRad(o._center.lng)),t.rotateX$1(p,p,t.degToRad(o._center.lat)),t.rotateZ$1(p,p,o.angle),t.rotateX$1(p,p,-o._pitch);const d=t.fromQuat(new Float32Array(16),p),f=t.mapValue(n.properties.get("star-intensity"),0,1,0,.25),g=5e-4,m=t.mapValue(n.properties.get("horizon-blend"),0,1,g,.25),y=t.globeUseCustomAntiAliasing(e,r,o)&&m===g?o.worldSize/(2*Math.PI*1.025)-1:o.globeRadius,v=e.frameCounter/1e3%1,x=t.length(o.globeCenterInViewSpace),_=Math.sqrt(Math.pow(x,2)-Math.pow(y,2)),b=Math.acos(_/x),w=((e,n,r,i,o,a,s,l,c,u,h,p,d,f)=>({u_frustum_tl:e,u_frustum_tr:n,u_frustum_br:r,u_frustum_bl:i,u_horizon:o,u_transition:a,u_fadeout_range:s,u_color:l,u_high_color:c,u_space_color:u,u_star_intensity:h,u_star_size:5*t.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:p,u_horizon_angle:d,u_rotation_matrix:f}))(o.frustumCorners.TL,o.frustumCorners.TR,o.frustumCorners.BR,o.frustumCorners.BL,o.frustumCorners.horizon,l,m,c,u,h,f,v,b,d);e.prepareDrawProgram(r,s);const S=e.atmosphereBuffer;S&&s.draw(r,i.TRIANGLES,a,t.StencilMode.disabled,t.ColorMode.alphaBlended,t.CullFaceMode.backCW,w,"skybox",S.vertexBuffer,S.indexBuffer,S.segments)}(this,this.style.fog),this.renderPass="sky",(t.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){const t=this.style._layers[r[this.currentLayer]],n=e._getLayerSourceCache(t);t.isSky()&&this.renderLayer(this,n,t,n?a[n.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;){const t=this.style._layers[r[this.currentLayer]],n=e._getLayerSourceCache(t);if(t.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(t)){if(t.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const i=n?("symbol"===t.type?s:a)[n.id]:void 0;this._renderTileClippingMasks(t,n,n?o[n.id]:void 0),this.renderLayer(this,n,t,i),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let n=null;t.values(this.style._layers).forEach((t=>{const r=e._getLayerSourceCache(t);r&&!t.isHidden(this.transform.zoom)&&(!n||n.getSource().maxzoom<r.getSource().maxzoom)&&(n=r)})),n&&this.options.showTileBoundaries&&Lr.debug(this,n,n.getVisibleCoordinates())}this.options.showPadding&&function(t){const e=t.transform.padding;Er(t,t.transform.height-(e.top||0),3,xr),Er(t,e.bottom||0,3,_r),kr(t,e.left||0,3,br),kr(t,t.transform.width-(e.right||0),3,wr);const n=t.transform.centerPoint;!function(t,e,n,r){Mr(t,e-1,n-10,2,20,r),Mr(t,e-10,n-1,20,2,r)}(t,n.x,t.transform.height-n.y,Sr)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(t.window.performance.now()),this.saveCanvasCopy())}renderLayer(t,e,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"sky"===n.type||"custom"===n.type||r&&r.length)&&(this.id=n.id,this.gpuTimingStart(n),(!t.transform.projection.unsupportedLayers||!t.transform.projection.unsupportedLayers.includes(n.type)||t.terrain&&"custom"===n.type)&&Lr[n.type](t,e,n,r,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(t){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;let n=this.gpuTimers[t.id];n||(n=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),n.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,n.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const t=this.context.extTimerQuery,e=t.createQueryEXT();this.deferredRenderGpuTimeQueries.push(e),t.beginQueryEXT(t.TIME_ELAPSED_EXT,e)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}collectGpuTimers(){const t=this.gpuTimers;return this.gpuTimers={},t}collectDeferredRenderGpuQueries(){const t=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],t}queryGpuTimers(t){const e={};for(const n in t){const r=t[n],i=this.context.extTimerQuery,o=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),e[n]=o}return e}queryGpuTimeDeferredRender(t){if(!this.options.gpuTimingDeferredRender)return 0;const e=this.context.extTimerQuery;let n=0;for(const r of t)n+=e.getQueryObjectEXT(r,e.QUERY_RESULT_EXT)/1e6,e.deleteQueryEXT(r);return n}translatePosMatrix(e,n,r,i,o){if(!r[0]&&!r[1])return e;const a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){const t=Math.sin(a),e=Math.cos(a);r=[r[0]*e-r[1]*t,r[0]*t+r[1]*e]}const s=[o?r[0]:P(n,r[0],this.transform.zoom),o?r[1]:P(n,r[1],this.transform.zoom),0],l=new Float32Array(16);return t.translate(l,e,s),l}saveTileTexture(t){const e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const e=this._tileTextures[t];return e&&e.length>0?e.pop():null}isPatternMissing(t){return null===t||void 0!==t&&!this.imageManager.getPattern(t.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const t=this.terrain&&this.terrain.renderingToTexture,e=this.terrain&&0===this.terrain.exaggeration(),n=this.style&&this.style.fog,r=[];return this.terrainRenderModeElevated()&&r.push("TERRAIN"),"globe"===this.transform.projection.name&&r.push("GLOBE"),e&&r.push("ZERO_EXAGGERATION"),n&&!t&&0!==n.getOpacity(this.transform.pitch)&&r.push("FOG"),t&&r.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&r.push("OVERDRAW_INSPECTOR"),r}useProgram(t,e,n){this.cache=this.cache||{};const r=n||[],i=this.currentGlobalDefines().concat(r),o=An.cacheKey(un[t],t,i,e);return this.cache[o]||(this.cache[o]=new An(this.context,t,un[t],e,sr[t],i)),this.cache[o]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(e,n,r){if(this.terrain&&this.terrain.renderingToTexture)return;const i=this.style.fog;if(i){const o=i.getOpacity(this.transform.pitch),a=((e,n,r,i,o,a,s,l,c,u,h)=>{const p=e.transform,d=n.properties.get("color").toArray01();d[3]=i;const f=e.frameCounter/1e3%1;return{u_fog_matrix:r?p.calculateFogTileMatrix(r):e.identityMat,u_fog_range:n.getFovAdjustedRange(p._fov),u_fog_color:d,u_fog_horizon_blend:n.properties.get("horizon-blend"),u_fog_temporal_offset:f,u_frustum_tl:o,u_frustum_tr:a,u_frustum_br:s,u_frustum_bl:l,u_globe_pos:c,u_globe_radius:u,u_viewport:h,u_globe_transition:t.globeToMercatorTransition(p.zoom),u_is_globe:+("globe"===p.projection.name)}})(this,i,r,o,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*t.exported.devicePixelRatio,this.transform.height*t.exported.devicePixelRatio]);n.setFogUniformValues(e,a)}}setTileLoadedFlag(t){this.tileLoaded=t}saveCanvasCopy(){const t=this.canvasCopy();t&&(this.frameCopies.push(t),this.tileLoaded=!1)}canvasCopy(){const t=this.context.gl,e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,0,0,t.drawingBufferWidth,t.drawingBufferHeight,0),e}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const t=this.style&&this.style.fog;return!!t&&0!==t.getOpacity(this.transform.pitch)}getBackgroundTiles(){const e=this._backgroundTiles,n=this._backgroundTiles={},r=this.transform.coveringTiles({tileSize:512});for(const i of r)n[i.key]=e[i.key]||new t.Tile(i,512,this.transform.tileZoom,this);return n}clearBackgroundTiles(){this._backgroundTiles={}}}class Fr{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(isNaN(t)||t<0||isNaN(e)||e<0||isNaN(n)||n<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=n,this.right=r}interpolate(e,n,r){return null!=n.top&&null!=e.top&&(this.top=t.number(e.top,n.top,r)),null!=n.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,n.bottom,r)),null!=n.left&&null!=e.left&&(this.left=t.number(e.left,n.left,r)),null!=n.right&&null!=e.right&&(this.right=t.number(e.right,n.right,r)),this}getCenter(e,n){const r=t.clamp((this.left+e-this.right)/2,0,e),i=t.clamp((this.top+n-this.bottom)/2,0,n);return new t.Point(r,i)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new Fr(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function zr(e,n){const r=t.getColumn(e,3);t.fromQuat(e,n),t.setColumn(e,3,r)}function Br(e,n){const r=t.identity$1([]);return t.rotateZ$1(r,r,-n),t.rotateX$1(r,r,-e),r}function $r(e,n){const r=[e[0],e[1],0],i=[n[0],n[1],0];if(t.length(r)>=1e-15){const e=t.normalize([],r);t.scale$2(i,e,t.dot(i,e)),n[0]=i[0],n[1]=i[1]}const o=t.cross([],n,e);if(t.len(o)<1e-15)return null;const a=Math.atan2(-o[1],o[0]);return Br(Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2]),a)}class jr{constructor(t,e){this.position=t,this.orientation=e}get position(){return this._position}set position(e){if(e){const n=e instanceof t.MercatorCoordinate?e:new t.MercatorCoordinate(e[0],e[1],e[2]);this._renderWorldCopies&&(n.x=t.wrap(n.x,0,1)),this._position=n}else this._position=null}lookAtPoint(e,n){if(this.orientation=null,!this.position)return;const r=this.position,i=this._elevation?this._elevation.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(e)):0,o=t.MercatorCoordinate.fromLngLat(e,i),a=[o.x-r.x,o.y-r.y,o.z-r.z];n||(n=[0,0,1]),n[2]=Math.abs(n[2]),this.orientation=$r(a,n)}setPitchBearing(e,n){this.orientation=Br(t.degToRad(e),t.degToRad(-n))}}class Ur{constructor(e,n){this._transform=t.identity([]),this.orientation=n,this.position=e}get mercatorPosition(){const e=this.position;return new t.MercatorCoordinate(e[0],e[1],e[2])}get position(){const e=t.getColumn(this._transform,3);return[e[0],e[1],e[2]]}set position(e){var n;e&&t.setColumn(this._transform,3,[(n=e)[0],n[1],n[2],1])}get orientation(){return this._orientation}set orientation(e){this._orientation=e||t.identity$1([]),e&&zr(this._transform,this._orientation)}getPitchBearing(){const t=this.forward(),e=this.right();return{bearing:Math.atan2(-e[1],e[0]),pitch:Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2])}}setPitchBearing(t,e){this._orientation=Br(t,e),zr(this._transform,this._orientation)}forward(){const e=t.getColumn(this._transform,2);return[-e[0],-e[1],-e[2]]}up(){const e=t.getColumn(this._transform,1);return[-e[0],-e[1],-e[2]]}right(){const e=t.getColumn(this._transform,0);return[e[0],e[1],e[2]]}getCameraToWorld(e,n){const r=new Float64Array(16);return t.invert(r,this.getWorldToCamera(e,n)),r}getWorldToCameraPosition(e,n,r){const i=this.position;t.scale$2(i,i,-e);const o=new Float64Array(16);return t.fromScaling(o,[r,r,r]),t.translate(o,o,i),o[10]*=n,o}getWorldToCamera(e,n){const r=new Float64Array(16),i=new Float64Array(4),o=this.position;return t.conjugate(i,this._orientation),t.scale$2(o,o,-e),t.fromQuat(r,i),t.translate(r,r,o),r[1]*=-1,r[5]*=-1,r[9]*=-1,r[13]*=-1,r[8]*=n,r[9]*=n,r[10]*=n,r[11]*=n,r}getCameraToClipPerspective(e,n,r,i){const o=new Float64Array(16);return t.perspective(o,e,n,r,i),o}getDistanceToElevation(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=0===e?0:t.mercatorZfromAltitude(e,n?t.latFromMercatorY(this.position[1]):this.position[1]),i=this.forward();return(r-this.position[2])/i[2]}clone(){return new Ur([...this.position],[...this.orientation])}}function Vr(e,n){const r=Gr(e.projection,e.zoom,e.width,e.height),i=function(e,n,r,i,o){const a=new t.LngLat(r.lng-180*Wr,r.lat),s=new t.LngLat(r.lng+180*Wr,r.lat),l=e.project(a.lng,a.lat),c=e.project(s.lng,s.lat),u=-Math.atan2(c.y-l.y,c.x-l.x),h=t.MercatorCoordinate.fromLngLat(r);h.y=t.clamp(h.y,-1+Wr,1-Wr);const p=h.toLngLat(),d=e.project(p.lng,p.lat),f=t.MercatorCoordinate.fromLngLat(p);f.x+=Wr;const g=f.toLngLat(),m=e.project(g.lng,g.lat),y=qr(m.x-d.x,m.y-d.y,u),v=t.MercatorCoordinate.fromLngLat(p);v.y+=Wr;const x=v.toLngLat(),_=e.project(x.lng,x.lat),b=qr(_.x-d.x,_.y-d.y,u),w=Math.abs(y.x)/Math.abs(b.y),S=t.identity([]);t.rotateZ(S,S,-u*(1-(o?0:i)));const C=t.identity([]);return t.scale(C,C,[1,1-(1-w)*i,1]),C[4]=-b.x/b.y*i,t.rotateZ(C,C,u),t.multiply(C,S,C),C}(e.projection,0,e.center,r,n),o=Hr(e);return t.scale(i,i,[o,o,1]),i}function Hr(e){const n=e.projection,r=Gr(e.projection,e.zoom,e.width,e.height),i=Xr(n,e.center),o=Xr(n,t.LngLat.convert(n.center));return Math.pow(2,i*r+(1-r)*o)}function Gr(e,n,r,i){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0;const a=e.range;if(!a)return 0;const s=Math.min(o,Math.max(r,i)),l=Math.log(s/1024)/Math.LN2;return t.smoothstep(a[0]+l,a[1]+l,n)}const Wr=1/4e4;function Xr(e,n){const r=t.clamp(n.lat,-t.MAX_MERCATOR_LATITUDE,t.MAX_MERCATOR_LATITUDE),i=new t.LngLat(n.lng-180*Wr,r),o=new t.LngLat(n.lng+180*Wr,r),a=e.project(i.lng,r),s=e.project(o.lng,r),l=t.MercatorCoordinate.fromLngLat(i),c=t.MercatorCoordinate.fromLngLat(o),u=s.x-a.x,h=s.y-a.y,p=c.x-l.x,d=c.y-l.y,f=Math.sqrt((p*p+d*d)/(u*u+h*h));return Math.log(f)/Math.LN2}function qr(t,e,n){const r=Math.cos(n),i=Math.sin(n);return{x:t*r-e*i,y:t*i+e*r}}class Yr{constructor(e,n,r,i,o,a,s){this.tileSize=512,this._renderWorldCopies=void 0===o||o,this._minZoom=e||0,this._maxZoom=n||22,this._minPitch=null==r?0:r,this._maxPitch=null==i?60:i,this.setProjection(a),this.setMaxBounds(s),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Fr,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Ur,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const t=new Yr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return t._elevation=this._elevation,t._centerAltitude=this._centerAltitude,t._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,t.tileSize=this.tileSize,t.mercatorFromTransition=this.mercatorFromTransition,t.width=this.width,t.height=this.height,t.cameraElevationReference=this.cameraElevationReference,t._center=this._center,t._setZoom(this.zoom),t._seaLevelZoom=this._seaLevelZoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._nearZ=this._nearZ,t._farZ=this._farZ,t._averageElevation=this._averageElevation,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._camera=this._camera.clone(),t._calcMatrices(),t.freezeTileCoverage=this.freezeTileCoverage,t.frustumCorners=this.frustumCorners,t}get elevation(){return this._elevation}set elevation(t){this._elevation!==t&&(this._elevation=t,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||n)&&this._updateCameraOnTerrain(),(t||n)&&this._constrainCamera(e),this._calcMatrices()}getProjection(){return t.pick(this.projection,["name","center","parallels"])}setProjection(n){this.projectionOptions=n||{name:"mercator"};const r=this.projection?this.getProjection():void 0;this.projection=t.getProjection(this.projectionOptions);const i=!e(r,this.getProjection());return i&&this._calcMatrices(),this.mercatorFromTransition=!1,i}setMercatorFromTransition(){const e=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=t.getProjection({name:"mercator"});const n=e!==this.projection.name;return n&&this._calcMatrices(),n}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const t=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(t))}get cameraWorldSize(){const t=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(t))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return t.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.Point(this.width,this.height)}get bearing(){return t.wrap(this.rotation,-180,180)}set bearing(t){this.rotation=t}get rotation(){return-this.angle/Math.PI*180}set rotation(e){const n=-e*Math.PI/180;var r;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=(r=new t.ARRAY_TYPE(4),t.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r),function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);t[0]=r*l+o*s,t[1]=i*l+a*s,t[2]=r*-s+o*l,t[3]=i*-s+a*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const n=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const t=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/t)}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=t.degToRad(e),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(t){this._averageElevation=t,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(t){const e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._setZoom(e),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(t){this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const t=this._elevation;this._centerAltitude=t.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=t.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const e=this._elevation,n=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],r=this.horizonLineFromTop();let i=0,o=0;for(let a=0;a<n.length;a++){const s=new t.Point(n[a][0]*this.width,r+n[a][1]*(this.height-r)),l=e.pointCoordinate(s);if(!l)continue;const c=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);i+=l[3]*c,o+=c}return 0===o?NaN:i/o}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const t=this._seaLevelZoom,e=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),n=this.pixelsPerMeter/this.worldSize*e,r=this._mercatorZfromZoom(t),i=this._mercatorZfromZoom(this._maxZoom),o=Math.max(r-n,i);this._setZoom(this._zoomFromMercatorZ(o))}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}computeZoomRelativeTo(e){const n=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,e.toAltitude()));let r;r=e.z<this._camera.position[2]?[n.x,n.y,n.z]:[e.x,e.y,e.z];const i=t.length(t.sub([],this._camera.position,r));return t.clamp(this._zoomFromMercatorZ(i),this._minZoom,this._maxZoom)}setFreeCameraOptions(e){if(!this.height)return;if(!e.position&&!e.orientation)return;this._updateCameraState();let n=!1;if(e.orientation&&!t.exactEquals(e.orientation,this._camera.orientation)&&(n=this._setCameraOrientation(e.orientation)),e.position){const r=[e.position.x,e.position.y,e.position.z];t.exactEquals$1(r,this._camera.position)||(this._setCameraPosition(r),n=!0)}n&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const e=this._camera.position,n=new jr;return n.position=new t.MercatorCoordinate(e[0],e[1],e[2]),n.orientation=this._camera.orientation,n._elevation=this.elevation,n._renderWorldCopies=this.renderWorldCopies,n}_setCameraOrientation(e){if(!t.length$1(e))return!1;t.normalize$1(e,e);const n=t.transformQuat([],[0,0,-1],e),r=t.transformQuat([],[0,-1,0],e);if(r[2]<0)return!1;const i=$r(n,r);return!!i&&(this._camera.orientation=i,!0)}_setCameraPosition(e){const n=this.zoomScale(this.minZoom)*this.tileSize,r=this.zoomScale(this.maxZoom)*this.tileSize,i=this.cameraToCenterDistance;e[2]=t.clamp(e[2],i/r,i/n),this._camera.position=e}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,e,n){this._unmodified=!1,this._edgeInsets.interpolate(t,e,n),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)}getVisibleUnwrappedCoordinates(e){const n=[new t.UnwrappedTileID(0,e)];if(this.renderWorldCopies){const r=this.pointCoordinate(new t.Point(0,0)),i=this.pointCoordinate(new t.Point(this.width,0)),o=this.pointCoordinate(new t.Point(this.width,this.height)),a=this.pointCoordinate(new t.Point(0,this.height)),s=Math.floor(Math.min(r.x,i.x,o.x,a.x)),l=Math.floor(Math.max(r.x,i.x,o.x,a.x)),c=1;for(let u=s-c;u<=l+c;u++)0!==u&&n.push(new t.UnwrappedTileID(u,e))}return n}coveringTiles(e){let n=this.coveringZoomLevel(e);const r=n,i=this.elevation&&!e.isTerrainDEM,o="mercator"===this.projection.name;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);const a=this.locationCoordinate(this.center),s=this.center.lat,l=1<<n,c=[l*a.x,l*a.y,0],u="globe"===this.projection.name,h=!u,p=t.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n,h),d=u?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),f=l*t.mercatorZfromAltitude(1,this.center.lat),g=this._camera.position[2]/t.mercatorZfromAltitude(1,this.center.lat),m=[l*d.x,l*d.y,g*(h?1:f)],y=this.cameraToCenterDistance/e.tileSize*(e.roundZoom?1:.502),v=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?n:0,x=e.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,_=e.isTerrainDEM?-x:this._elevation?this._elevation.getMinElevationBelowMSL():0,b=this.projection.isReprojectedInTileSpace?Hr(this):1,w=e=>{const n=1/4e4,r=new t.MercatorCoordinate(e.x+n,e.y,e.z),i=new t.MercatorCoordinate(e.x,e.y+n,e.z),o=e.toLngLat(),a=r.toLngLat(),s=i.toLngLat(),l=this.locationCoordinate(o),c=this.locationCoordinate(a),u=this.locationCoordinate(s),h=Math.hypot(c.x-l.x,c.y-l.y),p=Math.hypot(u.x-l.x,u.y-l.y);return Math.sqrt(h*p)*b/n},S=e=>{const n=x,r=_;return{aabb:t.tileAABB(this,l,0,0,0,e,r,n,this.projection),zoom:0,x:0,y:0,minZ:r,maxZ:n,wrap:e,fullyVisible:!1}},C=[];let E=[];const k=n,M=e.reparseOverscaled?r:n,T=t=>t*t,I=T((g-this._centerAltitude)*f),P=t=>{if(!this._elevation||!t.tileID||!o)return;const e=this._elevation.getMinMaxForTile(t.tileID),n=t.aabb;e?(n.min[2]=e.min,n.max[2]=e.max,n.center[2]=(n.min[2]+n.max[2])/2):(t.shouldSplit=O(t),t.shouldSplit||(n.min[2]=n.max[2]=n.center[2]=this._centerAltitude))},O=e=>{if(e.zoom<v)return!0;if(e.zoom===k)return!1;if(null!=e.shouldSplit)return e.shouldSplit;const n=e.aabb.distanceX(m),o=e.aabb.distanceY(m);let a=I,l=1;if(u){a=T(e.aabb.distanceZ(m));const n=Math.pow(2,e.zoom),r=t.latFromMercatorY((e.y+1)/n),i=t.latFromMercatorY(e.y/n),o=Math.min(Math.max(s,r),i),c=t.circumferenceAtLatitude(o)/t.circumferenceAtLatitude(s);if(l=o===s?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,c/this._mercatorScaleRatio),this.zoom<=t.GLOBE_ZOOM_THRESHOLD_MIN&&e.zoom===k-1&&c>=.9)return!0}else if(i&&(a=T(e.aabb.distanceZ(m)*f)),this.projection.isReprojectedInTileSpace&&r<=5){const n=Math.pow(2,e.zoom),r=w(new t.MercatorCoordinate((e.x+.5)/n,(e.y+.5)/n));l=r>.85?1:r}const c=n*n+o*o+a,h=T((1<<k-e.zoom)*y*l*((t,e)=>{if(e*T(.707)<t)return 1;const n=Math.sqrt(e/t);return n/(1.4144271570014144+(Math.pow(1.1,n-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(a,I),c));return c<h};if(this.renderWorldCopies)for(let t=1;t<=3;t++)C.push(S(-t)),C.push(S(t));for(C.push(S(0));C.length>0;){const r=C.pop(),a=r.x,s=r.y;let h=r.fullyVisible;if(!h){const t=r.aabb.intersects(p);if(0===t)continue;h=2===t}if(r.zoom!==k&&O(r))for(let e=0;e<4;e++){const n=(a<<1)+e%2,c=(s<<1)+(e>>1),p={aabb:o?r.aabb.quadrant(e):t.tileAABB(this,l,r.zoom+1,n,c,r.wrap,r.minZ,r.maxZ,this.projection),zoom:r.zoom+1,x:n,y:c,wrap:r.wrap,fullyVisible:h,tileID:void 0,shouldSplit:void 0,minZ:r.minZ,maxZ:r.maxZ};i&&!u&&(p.tileID=new t.OverscaledTileID(r.zoom+1===k?M:r.zoom+1,r.wrap,r.zoom+1,n,c),P(p)),C.push(p)}else{const i=r.zoom===k?M:r.zoom;if(e.minzoom&&e.minzoom>i)continue;const o=c[0]-(.5+a+(r.wrap<<r.zoom))*(1<<n-r.zoom),l=c[1]-.5-s,u=r.tileID?r.tileID:new t.OverscaledTileID(i,r.wrap,r.zoom,a,s);E.push({tileID:u,distanceSq:o*o+l*l})}}if(this.fogCullDistSq){const n=this.fogCullDistSq,r=this.horizonLineFromTop();E=E.filter((i=>{const o=[0,0,0,1],a=[t.EXTENT,t.EXTENT,0,1],s=this.calculateFogTileMatrix(i.tileID.toUnwrapped());t.transformMat4$1(o,o,s),t.transformMat4$1(a,a,s);const l=t.getAABBPointSquareDist(o,a);if(0===l)return!0;let c=!1;const u=this._elevation;if(u&&l>n&&0!==r){const n=this.calculateProjMatrix(i.tileID.toUnwrapped());let o;e.isTerrainDEM||(o=u.getMinMaxForTile(i.tileID)),o||(o={min:_,max:x});const a=t.furthestTileCorner(this.rotation),s=[a[0]*t.EXTENT,a[1]*t.EXTENT,o.max];t.transformMat4(s,s,n),c=(1-s[1])*this.height*.5<r}return l<n||c}))}return E.sort(((t,e)=>t.distanceSq-e.distanceSq)).map((t=>t.tileID))}resize(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(e){const n=t.clamp(e.lat,-t.MAX_MERCATOR_LATITUDE,t.MAX_MERCATOR_LATITUDE),r=this.projection.project(e.lng,n);return new t.Point(r.x*this.worldSize,r.y*this.worldSize)}unproject(t){return this.projection.unproject(t.x/this.worldSize,t.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/t.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(e,n){let r,i;const o=this.centerPoint;if("globe"===this.projection.name){const t=this.worldSize;r=(n.x-o.x)/t,i=(n.y-o.y)/t}else{const t=this.pointCoordinate(n),e=this.pointCoordinate(o);r=t.x-e.x,i=t.y-e.y}const a=this.locationCoordinate(e);this.setLocation(new t.MercatorCoordinate(a.x-r,a.y-i))}setLocation(t){this.center=this.coordinateLocation(t),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(t){return this.projection.locationPoint(this,t)}locationPoint3D(t){return this.projection.locationPoint(this,t,!0)}pointLocation(t){return this.coordinateLocation(this.pointCoordinate(t))}pointLocation3D(t){return this.coordinateLocation(this.pointCoordinate3D(t))}locationCoordinate(e,n){const r=n?t.mercatorZfromAltitude(n,e.lat):void 0,i=this.projection.project(e.lng,e.lat);return new t.MercatorCoordinate(i.x,i.y,r)}coordinateLocation(t){return this.projection.unproject(t.x,t.y)}pointRayIntersection(e,n){const r=null!=n?n:this._centerAltitude,i=[e.x,e.y,0,1],o=[e.x,e.y,1,1];t.transformMat4$1(i,i,this.pixelMatrixInverse),t.transformMat4$1(o,o,this.pixelMatrixInverse);const a=o[3];t.scale$1(i,i,1/i[3]),t.scale$1(o,o,1/a);const s=i[2],l=o[2];return{p0:i,p1:o,t:s===l?0:(r-s)/(l-s)}}screenPointToMercatorRay(e){const n=[e.x,e.y,0,1],r=[e.x,e.y,1,1];return t.transformMat4$1(n,n,this.pixelMatrixInverse),t.transformMat4$1(r,r,this.pixelMatrixInverse),t.scale$1(n,n,1/n[3]),t.scale$1(r,r,1/r[3]),n[2]=t.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,r[2]=t.mercatorZfromAltitude(r[2],this._center.lat)*this.worldSize,t.scale$1(n,n,1/this.worldSize),t.scale$1(r,r,1/this.worldSize),new t.Ray([n[0],n[1],n[2]],t.normalize([],t.sub([],r,n)))}rayIntersectionCoordinate(e){const{p0:n,p1:r,t:i}=e,o=t.mercatorZfromAltitude(n[2],this._center.lat),a=t.mercatorZfromAltitude(r[2],this._center.lat);return new t.MercatorCoordinate(t.number(n[0],r[0],i)/this.worldSize,t.number(n[1],r[1],i)/this.worldSize,t.number(o,a,i))}pointCoordinate(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._centerAltitude;return this.projection.pointCoordinate(this,t.x,t.y,e)}pointCoordinate3D(e){if(!this.elevation)return this.pointCoordinate(e);let n=this.projection.pointCoordinate3D(this,e.x,e.y);if(n)return new t.MercatorCoordinate(n[0],n[1],n[2]);let r=0,i=this.horizonLineFromTop();if(e.y>i)return this.pointCoordinate(e);const o=.02*i,a=e.clone();for(let s=0;s<10&&i-r>o;s++){a.y=t.number(r,i,.66);const e=this.projection.pointCoordinate3D(this,a.x,a.y);e?(i=a.y,n=e):r=a.y}return n?new t.MercatorCoordinate(n[0],n[1],n[2]):this.pointCoordinate(e)}isPointAboveHorizon(t){return this.projection.isPointAboveHorizon(this,t)}isPointOnSurface(e){if(e.y<0||e.y>this.height||e.x<0||e.x>this.width)return!1;if(this.elevation||this.zoom>=t.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(e);const n=this.pointCoordinate(e);return n.y>=0&&n.y<=1}_coordinatePoint(e,n){const r=n&&this.elevation?this.elevation.getAtPointOrZero(e,this._centerAltitude):this._centerAltitude,i=[e.x*this.worldSize,e.y*this.worldSize,r+e.toAltitude(),1];return t.transformMat4$1(i,i,this.pixelMatrix),i[3]>0?new t.Point(i[0]/i[3],i[1]/i[3]):new t.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:e,left:n}=this._edgeInsets,r=this.height-this._edgeInsets.bottom,i=this.width-this._edgeInsets.right,o=this.pointLocation3D(new t.Point(n,e)),a=this.pointLocation3D(new t.Point(i,e)),s=this.pointLocation3D(new t.Point(i,r)),l=this.pointLocation3D(new t.Point(n,r));let c=Math.min(o.lng,a.lng,s.lng,l.lng),u=Math.max(o.lng,a.lng,s.lng,l.lng),h=Math.min(o.lat,a.lat,s.lat,l.lat),p=Math.max(o.lat,a.lat,s.lat,l.lat);const d=Math.pow(2,-this.zoom)/16*270,f="globe"===this.projection.name?1:4,g=(e,n,r,i,o)=>{const a=(e+r)/2,s=(n+i)/2,l=new t.Point(a,s),{lng:m,lat:y}=this.pointLocation3D(l),v=Math.max(0,c-m,h-y,m-u,y-p);c=Math.min(c,m),u=Math.max(u,m),h=Math.min(h,y),p=Math.max(p,y),(o<f||v>d)&&(g(e,n,a,s,o+1),g(a,s,r,i,o+1))};if(g(n,e,i,e,1),g(i,e,i,r,1),g(i,r,n,r,1),g(n,r,n,e,1),"globe"===this.projection.name){const[e,n]=t.polesInViewport(this);e?(p=90,u=180,c=-180):n&&(h=-90,u=180,c=-180)}return new t.LngLatBounds(new t.LngLat(c,h),new t.LngLat(u,p))}_getBoundsRectangular(e,n){const{top:r,left:i}=this._edgeInsets,o=this.height-this._edgeInsets.bottom,a=this.width-this._edgeInsets.right,s=new t.Point(i,r),l=new t.Point(a,r),c=new t.Point(a,o),u=new t.Point(i,o);let h=this.pointCoordinate(s,e),p=this.pointCoordinate(l,e);const d=this.pointCoordinate(c,n),f=this.pointCoordinate(u,n),g=(t,e)=>(e.y-t.y)/(e.x-t.x);return h.y>1&&p.y>=0?h=new t.MercatorCoordinate((1-f.y)/g(f,h)+f.x,1):h.y<0&&p.y<=1&&(h=new t.MercatorCoordinate(-f.y/g(f,h)+f.x,0)),p.y>1&&h.y>=0?p=new t.MercatorCoordinate((1-d.y)/g(d,p)+d.x,1):p.y<0&&h.y<=1&&(p=new t.MercatorCoordinate(-d.y/g(d,p)+d.x,0)),(new t.LngLatBounds).extend(this.coordinateLocation(h)).extend(this.coordinateLocation(p)).extend(this.coordinateLocation(f)).extend(this.coordinateLocation(d))}_getBoundsRectangularTerrain(){const t=this.elevation;if(!t.visibleDemTiles.length||t.isUsingMockSource())return this._getBoundsRectangular(0,0);const e=t.visibleDemTiles.reduce(((t,e)=>{if(e.dem){const n=e.dem.tree;t.min=Math.min(t.min,n.minimums[0]),t.max=Math.max(t.max,n.maximums[0])}return t}),{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(e.min*t.exaggeration(),e.max*t.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,n=this.height/2-e*(1-this._horizonShift);return t?Math.max(0,n):n}getMaxBounds(){return this.maxBounds}setMaxBounds(e){this.maxBounds=e,this.minLat=-t.MAX_MERCATOR_LATITUDE,this.maxLat=t.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,e&&(this.minLat=e.getSouth(),this.maxLat=e.getNorth(),this.minLng=e.getWest(),this.maxLng=e.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=t.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=t.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=t.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=t.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(t,e){return this.projection.createTileMatrix(this,e,t)}calculateDistanceTileData(e){const n=e.key,r=this._distanceTileDataCache;if(r[n])return r[n];const i=e.canonical,o=1/this.height,a=this.cameraWorldSize,s=a/this.zoomScale(i.z),l=(i.x+Math.pow(2,i.z)*e.wrap)*s,c=i.y*s,u=this.point;u.x*=a/this.worldSize,u.y*=a/this.worldSize;const h=this.angle,p=Math.sin(-h),d=-Math.cos(-h);return r[n]={bearing:[p,d],center:[(u.x-l)*o,(u.y-c)*o],scale:s/t.EXTENT*o},r[n]}calculateFogTileMatrix(e){const n=e.key,r=this._fogTileMatrixCache;if(r[n])return r[n];const i=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,e);return t.multiply(i,this.worldToFogMatrix,i),r[n]=new Float32Array(i),r[n]}calculateProjMatrix(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=e.key,i=n?this._alignedProjMatrixCache:this._projMatrixCache;if(i[r])return i[r];const o=this.calculatePosMatrix(e,this.worldSize);return t.multiply(o,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:n?this.alignedProjMatrix:this.projMatrix,o),i[r]=new Float32Array(o),i[r]}calculatePixelsToTileUnitsMatrix(e){const n=e.tileID.key,r=this._pixelsToTileUnitsCache;if(r[n])return r[n];const i=function(e,n){const{scale:r}=e.tileTransform,i=r*t.EXTENT/(e.tileSize*Math.pow(2,n.zoom-e.tileID.overscaledZ+e.tileID.canonical.z));return o=new Float32Array(4),l=(a=n.inverseAdjustmentMatrix)[1],c=a[2],u=a[3],p=(s=[i,i])[1],o[0]=a[0]*(h=s[0]),o[1]=l*h,o[2]=c*p,o[3]=u*p,o;var o,a,s,l,c,u,h,p}(e,this);return r[n]=i,r[n]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const e=1/this.worldSize,n=t.fromScaling([],[e,e,e]);return t.multiply(n,n,this.globeMatrix),n}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const e=this._elevation;this._updateCameraState();const n=t.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,r=this._computeCameraPosition(n),i=this._camera.forward(),o=t.mercatorZfromAltitude(1,this._center.lat);r[2]/=o,i[2]/=o,t.normalize(i,i);const a=e.raycast(r,i,e.exaggeration());if(a){const e=t.scaleAndAdd([],r,i,a),n=new t.MercatorCoordinate(e[0],e[1],t.mercatorZfromAltitude(e[2],t.latFromMercatorY(e[1]))),s=(n.z+t.length([n.x-r[0],n.y-r[1],n.z-r[2]*o]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(s),this._centerAltitude=n.toAltitude(),this._center=this.coordinateLocation(n),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._elevation)return;const n=this._elevation,r=t.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,i=this._computeCameraPosition(r),o=n.getAtPointOrZero(new t.MercatorCoordinate(...i)),a=this.pixelsPerMeter/this.worldSize*o,s=this._minimumHeightOverTerrain(),l=i[2]-a;if(l<=s)if(l<0||e){const e=this.locationCoordinate(this._center,this._centerAltitude),n=[i[0],i[1],e.z-i[2]],r=t.length(n);n[2]-=(s-l)/this._pixelsPerMercatorPixel;const o=t.length(n);if(0===o)return;t.scale$2(n,n,r/o*this._pixelsPerMercatorPixel),this._camera.position=[i[0],i[1],e.z*this._pixelsPerMercatorPixel-n[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const e="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||e){const n=this.center;return n.lat=t.clamp(n.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!e)&&(n.lng=t.clamp(n.lng,this.minLng,this.maxLng)),this.center=n,void(this._constraining=!1)}const n=this._unmodified,{x:r,y:i}=this.point;let o=0,a=r,s=i;const l=this.width/2,c=this.height/2,u=this.worldMinY*this.scale,h=this.worldMaxY*this.scale;if(i-c<u&&(s=u+c),i+c>h&&(s=h-c),h-u<this.height&&(o=Math.max(o,this.height/(h-u)),s=(h+u)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const t=this.worldMinX*this.scale,e=this.worldMaxX*this.scale,n=this.worldSize/2-(t+e)/2;a=(r+n+this.worldSize)%this.worldSize-n,a-l<t&&(a=t+l),a+l>e&&(a=e-l),e-t<this.width&&(o=Math.max(o,this.width/(e-t)),a=(e+t)/2)}a===r&&s===i||(this.center=this.unproject(new t.Point(a,s))),o&&(this.zoom+=this.scaleZoom(o)),this._constrainCamera(),this._unmodified=n,this._constraining=!1}_minZoomForBounds(){let t=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(t=Math.max(t,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),t}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const e=this.centerOffset,n=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=t.mercatorZfromAltitude(1,this.center.lat)/t.mercatorZfromAltitude(1,t.GLOBE_SCALE_MATCH_LATITUDE));const r=Gr(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,r),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const i="meters"===this.projection.zAxisUnit?n:1,o=this._camera.getWorldToCamera(this.worldSize,i),a=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);a[8]=2*-e.x/this.width,a[9]=2*e.y/this.height;let s=t.mul([],a,o);if(this.projection.isReprojectedInTileSpace){const e=this.locationCoordinate(this.center),n=t.identity([]);t.translate(n,n,[e.x*this.worldSize,e.y*this.worldSize,0]),t.multiply(n,n,Vr(this)),t.translate(n,n,[-e.x*this.worldSize,-e.y*this.worldSize,0]),t.multiply(s,s,n),this.inverseAdjustmentMatrix=function(t){const e=Vr(t,!0);return v([],[e[0],e[1],e[4],e[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=t.scale([],s,[this.worldSize,this.worldSize,this.worldSize/i,1]),this.projMatrix=s,this.invProjMatrix=t.invert(new Float64Array(16),this.projMatrix);const l=t.invert([],a);this.frustumCorners=t.FrustumCorners.fromInvProjectionMatrix(l,this.horizonLineFromTop(),this.height);const c=new Float32Array(16);t.identity(c),t.scale(c,c,[1,-1,1]),t.rotateX(c,c,this._pitch),t.rotateZ(c,c,this.angle);const u=t.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),h=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;u[8]=2*-e.x/this.width,u[9]=2*(e.y+h)/this.height,this.skyboxMatrix=t.multiply(c,u,c);const p=this.point,d=p.x,f=p.y,g=this.width%2/2,m=this.height%2/2,y=Math.cos(this.angle),x=Math.sin(this.angle),_=d-Math.round(d)+y*g+x*m,b=f-Math.round(f)+y*m+x*g,w=new Float64Array(s);if(t.translate(w,w,[_>.5?_-1:_,b>.5?b-1:b,0]),this.alignedProjMatrix=w,s=t.create(),t.scale(s,s,[this.width/2,-this.height/2,1]),t.translate(s,s,[1,-1,0]),this.labelPlaneMatrix=s,s=t.create(),t.scale(s,s,[1,-1,1]),t.translate(s,s,[-1,-1,0]),t.scale(s,s,[2/this.width,2/this.height,1]),this.glCoordMatrix=s,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},s=t.invert(new Float64Array(16),this.pixelMatrix),!s)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=s,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=t.calculateGlobeMatrix(this);const e=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=t.transformMat4(e,e,o),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=s;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const e=this.cameraWorldSizeForFog,n=this.cameraPixelsPerMeter,r=this._camera.position,i=1/this.height/this._pixelsPerMercatorPixel,o=[e,e,n];t.scale$2(o,o,i),t.scale$2(r,r,-1),t.multiply$2(r,r,o);const a=t.create();t.translate(a,a,r),t.scale(a,a,o),this.mercatorFogMatrix=a,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(e,n,i)}_computeCameraPosition(t){const e=(t=t||this.pixelsPerMeter)/this.pixelsPerMeter,n=this._camera.forward(),r=this.point,i=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*e-t/this.worldSize*this._centerAltitude;return[r.x/this.worldSize-n[0]*i,r.y/this.worldSize-n[1]*i,t/this.worldSize*this._centerAltitude-n[2]*i]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(e){const n=this._maxCameraBoundsDistance()*Math.cos(this._pitch),r=this._camera.position[2],i=e[2];let o=1;this.projection.wrap&&(this.center=this.center.wrap()),i>0&&(o=Math.min((n-r)/i,1)),this._camera.position=t.scaleAndAdd([],this._camera.position,e,o),this._updateStateFromCamera()}_updateStateFromCamera(){const e=this._camera.position,n=this._camera.forward(),{pitch:r,bearing:i}=this._camera.getPitchBearing(),o=t.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,a=this._mercatorZfromZoom(this._maxZoom)*Math.cos(t.degToRad(this._maxPitch)),s=Math.max((e[2]-o)/Math.cos(r),a),l=this._zoomFromMercatorZ(s);t.scaleAndAdd(e,e,n,s),this._pitch=t.clamp(r,t.degToRad(this.minPitch),t.degToRad(this.maxPitch)),this.angle=t.wrap(i,-Math.PI,Math.PI),this._setZoom(t.clamp(l,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new t.MercatorCoordinate(e[0],e[1],e[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(t){return Math.pow(2,t)*this.tileSize}_mercatorZfromZoom(t){return this.cameraToCenterDistance/this._worldSizeFromZoom(t)}_minimumHeightOverTerrain(){const t=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(t)}_zoomFromMercatorZ(t){return this.scaleZoom(this.cameraToCenterDistance/(t*this.tileSize))}zoomFromMercatorZAdjusted(e){let n=0,r=t.GLOBE_ZOOM_THRESHOLD_MAX,i=0,o=1/0;for(;r-n>1e-6&&r>n;){const t=n+.5*(r-n),a=this.tileSize*Math.pow(2,t),s=this.getCameraToCenterDistance(this.projection,t,a),l=this.scaleZoom(s/(e*this.tileSize)),c=Math.abs(t-l);c<o&&(o=c,i=t),t<l?n=t:r=t}return i}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(t.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(e,n){const r=Math.min(e.x,n.x),i=Math.max(e.x,n.x),o=Math.min(e.y,n.y),a=Math.max(e.y,n.y);if(o<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const s=[new t.Point(r,o),new t.Point(i,a),new t.Point(r,a),new t.Point(i,o)],l=this.renderWorldCopies?-3:0,c=this.renderWorldCopies?4:1;for(const t of s){const e=this.pointRayIntersection(t);if(e.t<0)return!0;const n=this.rayIntersectionCoordinate(e);if(n.x<l||n.y<0||n.x>c||n.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+t.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new t.Point(0,0),new t.Point(this.width,this.height))}zoomDeltaToMovement(e,n){const r=t.length(t.sub([],this._camera.position,e)),i=this._zoomFromMercatorZ(r)+n;return r-this._mercatorZfromZoom(i)}getCameraPoint(){if("globe"===this.projection.name){const e=function(e,n){let[r,i,o]=e;const a=[r,i,o,1];t.transformMat4$1(a,a,n);const s=a[3]=Math.max(a[3],1e-6);return a[0]/=s,a[1]/=s,a[2]/=s,a}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new t.Point(e[0],e[1])}{const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,e))}}getCameraToCenterDistance(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.zoom,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.worldSize;const r=Gr(t,e,this.width,this.height,1024),i=t.pixelSpaceConversion(this.center.lat,n,r);return.5/Math.tan(.5*this._fov)*this.height*i}getWorldToCameraMatrix(){const e=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&t.multiply(e,e,this.globeMatrix),e}}function Zr(t,e){let n=!1,r=null;const i=()=>{r=null,n&&(t(),r=setTimeout(i,e),n=!1)};return()=>(n=!0,r||i(),r)}class Kr{constructor(e){this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Zr(this._updateHashUnthrottled.bind(this),300)}addTo(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),e.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),t.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const e=this._map;if(!e)return"";const n=Jr(e);if(this._hashName){const e=this._hashName;let r=!1;const i=t.window.location.hash.slice(1).split("&").map((t=>{const i=t.split("=")[0];return i===e?(r=!0,`${i}=${n}`):t})).filter((t=>t));return r||i.push(`${e}=${n}`),`#${i.join("&")}`}return`#${n}`}_getCurrentHash(){const e=t.window.location.hash.replace("#","");if(this._hashName){let t;return e.split("&").map((t=>t.split("="))).forEach((e=>{e[0]===this._hashName&&(t=e)})),(t&&t[1]||"").split("/")}return e.split("/")}_onHashChange(){const t=this._map;if(!t)return!1;const e=this._getCurrentHash();if(e.length>=3&&!e.some((t=>isNaN(t)))){const n=t.dragRotate.isEnabled()&&t.touchZoomRotate.isEnabled()?+(e[3]||0):t.getBearing();return t.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:n,pitch:+(e[4]||0)}),!0}return!1}_updateHashUnthrottled(){const e=t.window.location.href.replace(/(#.+)?$/,this.getHashString());t.window.history.replaceState(t.window.history.state,null,e)}}function Jr(t,e){const n=t.getCenter(),r=Math.round(100*t.getZoom())/100,i=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,i),a=Math.round(n.lng*o)/o,s=Math.round(n.lat*o)/o,l=t.getBearing(),c=t.getPitch();let u=e?`/${a}/${s}/${r}`:`${r}/${s}/${a}`;return(l||c)&&(u+="/"+Math.round(10*l)/10),c&&(u+=`/${Math.round(c)}`),u}const Qr={linearity:.3,easing:t.bezier(0,0,.3,1)},ti=t.extend({deceleration:2500,maxSpeed:1400},Qr),ei=t.extend({deceleration:20,maxSpeed:1400},Qr),ni=t.extend({deceleration:1e3,maxSpeed:360},Qr),ri=t.extend({deceleration:1e3,maxSpeed:90},Qr);class ii{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.exported.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,n=t.exported.now();for(;e.length>0&&n-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._map._prefersReducedMotion())return;if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:t}of this._inertiaBuffer)n.zoom+=t.zoomDelta||0,n.bearing+=t.bearingDelta||0,n.pitch+=t.pitchDelta||0,t.panDelta&&n.pan._add(t.panDelta),t.around&&(n.around=t.around),t.pinchAround&&(n.pinchAround=t.pinchAround);const r=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,i={};if(n.pan.mag()){const o=ai(n.pan.mag(),r,t.extend({},ti,e||{}));i.offset=n.pan.mult(o.amount/n.pan.mag()),i.center=this._map.transform.center,oi(i,o)}if(n.zoom){const t=ai(n.zoom,r,ei);i.zoom=this._map.transform.zoom+t.amount,oi(i,t)}if(n.bearing){const e=ai(n.bearing,r,ni);i.bearing=this._map.transform.bearing+t.clamp(e.amount,-179,179),oi(i,e)}if(n.pitch){const t=ai(n.pitch,r,ri);i.pitch=this._map.transform.pitch+t.amount,oi(i,t)}if(i.zoom||i.bearing){const t=void 0===n.pinchAround?n.around:n.pinchAround;i.around=t?this._map.unproject(t):this._map.getCenter()}return this.clear(),i.noMoveStart=!0,i}}function oi(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function ai(e,n,r){const{maxSpeed:i,linearity:o,deceleration:a}=r,s=t.clamp(e*o/(n/1e3),-i,i),l=Math.abs(s)/(a*o);return{easing:r.easing,duration:1e3*l,amount:s*(l/2)}}class si extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o=f(n.getCanvasContainer(),r),a=n.unproject(o);super(e,t.extend({point:o,lngLat:a,originalEvent:r},i)),this._defaultPrevented=!1,this.target=n}}class li extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,r){const i="touchend"===e?r.changedTouches:r.touches,o=g(n.getCanvasContainer(),i),a=o.map((t=>n.unproject(t))),s=o.reduce(((t,e,n,r)=>t.add(e.div(r.length))),new t.Point(0,0));super(e,{points:o,point:s,lngLats:a,lngLat:n.unproject(s),originalEvent:r}),this._defaultPrevented=!1}}class ci extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,e,n){super(t,{originalEvent:n}),this._defaultPrevented=!1}}class ui{constructor(t,e){this._map=t,this._clickTolerance=e.clickTolerance}reset(){this._mousedownPos=void 0}wheel(t){return this._firePreventable(new ci(t.type,this._map,t))}mousedown(t,e){return this._mousedownPos=e,this._firePreventable(new si(t.type,this._map,t))}mouseup(t){this._map.fire(new si(t.type,this._map,t))}preclick(e){const n=t.extend({},e);n.type="preclick",this._map.fire(new si(n.type,this._map,n))}click(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||(this.preclick(t),this._map.fire(new si(t.type,this._map,t)))}dblclick(t){return this._firePreventable(new si(t.type,this._map,t))}mouseover(t){this._map.fire(new si(t.type,this._map,t))}mouseout(t){this._map.fire(new si(t.type,this._map,t))}touchstart(t){return this._firePreventable(new li(t.type,this._map,t))}touchmove(t){this._map.fire(new li(t.type,this._map,t))}touchend(t){this._map.fire(new li(t.type,this._map,t))}touchcancel(t){this._map.fire(new li(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class hi{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(t){this._map.fire(new si(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new si("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new si(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class pi{constructor(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(u(),this._startPos=this._lastPos=e,this._active=!0)}mousemoveWindow(t,e){if(!this._active)return;const n=e,r=this._startPos,i=this._lastPos;if(!r||!i||i.equals(n)||!this._box&&n.dist(r)<this._clickTolerance)return;this._lastPos=n,this._box||(this._box=o("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));const a=Math.min(r.x,n.x),s=Math.max(r.x,n.x),l=Math.min(r.y,n.y),c=Math.max(r.y,n.y);this._map._requestDomTask((()=>{this._box&&(this._box.style.transform=`translate(${a}px,${l}px)`,this._box.style.width=s-a+"px",this._box.style.height=c-l+"px")}))}mouseupWindow(e,n){if(!this._active)return;const r=this._startPos,i=n;if(r&&0===e.button){if(this.reset(),d(),r.x!==i.x||r.y!==i.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:t=>t.fitScreenCoordinates(r,i,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",e)}}keydown(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),h(),delete this._startPos,delete this._lastPos}_fireEvent(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))}}function di(t,e){const n={};for(let r=0;r<t.length;r++)n[t[r].identifier]=e[r];return n}class fi{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(e,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=e.timeStamp),r.length===this.numTouches&&(this.centroid=function(e){const n=new t.Point(0,0);for(const t of e)n._add(t);return n.div(e.length)}(n),this.touches=di(r,n)))}touchmove(t,e,n){if(this.aborted||!this.centroid)return;const r=di(n,e);for(const i in this.touches){const t=r[i];(!t||t.dist(this.touches[i])>30)&&(this.aborted=!0)}}touchend(t,e,n){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){const t=!this.aborted&&this.centroid;if(this.reset(),t)return t}}}class gi{constructor(t){this.singleTap=new fi(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(t,e,n){this.singleTap.touchstart(t,e,n)}touchmove(t,e,n){this.singleTap.touchmove(t,e,n)}touchend(t,e,n){const r=this.singleTap.touchend(t,e,n);if(r){const e=t.timeStamp-this.lastTime<500,n=!this.lastTap||this.lastTap.dist(r)<30;if(e&&n||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}class mi{constructor(){this._zoomIn=new gi({numTouches:1,numTaps:2}),this._zoomOut=new gi({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,e,n){this._zoomIn.touchstart(t,e,n),this._zoomOut.touchstart(t,e,n)}touchmove(t,e,n){this._zoomIn.touchmove(t,e,n),this._zoomOut.touchmove(t,e,n)}touchend(t,e,n){const r=this._zoomIn.touchend(t,e,n),i=this._zoomOut.touchend(t,e,n);return r?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(r)},{originalEvent:t})}):i?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(i)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const yi={0:1,2:2};class vi{constructor(t){this.reset(),this._clickTolerance=t.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(t,e){return!1}_move(t,e){return{}}mousedown(t,e){if(this._lastPoint)return;const n=m(t);this._correctButton(t,n)&&(this._lastPoint=e,this._eventButton=n)}mousemoveWindow(t,e){const n=this._lastPoint;if(n)if(t.preventDefault(),null!=this._eventButton&&function(t,e){const n=yi[e];return void 0===t.buttons||(t.buttons&n)!==n}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(n,e)}mouseupWindow(t){this._lastPoint&&m(t)===this._eventButton&&(this._moved&&d(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xi extends vi{mousedown(t,e){super.mousedown(t,e),this._lastPoint&&(this._active=!0)}_correctButton(t,e){return 0===e&&!t.ctrlKey}_move(t,e){return{around:e,panDelta:e.sub(t)}}}class _i extends vi{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const n=.8*(e.x-t.x);if(n)return this._active=!0,{bearingDelta:n}}contextmenu(t){t.preventDefault()}}class bi extends vi{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const n=-.5*(e.y-t.y);if(n)return this._active=!0,{pitchDelta:n}}contextmenu(t){t.preventDefault()}}class wi{constructor(e,n){this._map=e,this._el=e.getCanvasContainer(),this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset(),t.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)}touchstart(t,e,n){return this._calculateTransform(t,e,n)}touchmove(e,n,r){if(this._active&&!(r.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===r.length&&!t.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return e.cancelable&&e.preventDefault(),this._calculateTransform(e,n,r)}}touchend(t,e,n){this._calculateTransform(t,e,n),this._active&&n.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,n,r){r.length>0&&(this._active=!0);const i=di(r,n),o=new t.Point(0,0),a=new t.Point(0,0);let s=0;for(const t in i){const e=i[t],n=this._touches[t];n&&(o._add(e),a._add(e.sub(n)),s++,i[t]=e)}if(this._touches=i,s<this._minTouches||!a.mag())return;const l=a.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:l}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=o("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")}),500)}}class Si{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(t){}_move(t,e,n){return{}}touchstart(t,e,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([e[0],e[1]]))}touchmove(t,e,n){const r=this._firstTwoTouches;if(!r)return;t.preventDefault();const[i,o]=r,a=Ci(n,e,i),s=Ci(n,e,o);if(!a||!s)return;const l=this._aroundCenter?null:a.add(s).div(2);return this._move([a,s],l,t)}touchend(t,e,n){if(!this._firstTwoTouches)return;const[r,i]=this._firstTwoTouches,o=Ci(n,e,r),a=Ci(n,e,i);o&&a||(this._active&&d(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ci(t,e,n){for(let r=0;r<t.length;r++)if(t[r].identifier===n)return e[r]}function Ei(t,e){return Math.log(t/e)/Math.LN2}class ki extends Si{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,e){const n=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Ei(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ei(this._distance,n),pinchAround:e}}}function Mi(t,e){return 180*t.angleWith(e)/Math.PI}class Ti extends Si{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,e){const n=this._vector;if(this._vector=t[0].sub(t[1]),n&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Mi(this._vector,n),pinchAround:e}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const e=25/(Math.PI*this._minDiameter)*360,n=this._startVector;if(!n)return!1;const r=Mi(t,n);return Math.abs(r)<e}}function Ii(t){return Math.abs(t.y)>Math.abs(t.x)}class Pi extends Si{constructor(t){super(),this._map=t}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(t){this._lastPoints=t,Ii(t[0].sub(t[1]))&&(this._valid=!1)}_move(e,n,r){const i=this._lastPoints;if(!i)return;const o=e[0].sub(i[0]),a=e[1].sub(i[1]);return this._map._cooperativeGestures&&!t.isFullscreen()&&r.touches.length<3||(this._valid=this.gestureBeginsVertically(o,a,r.timeStamp),!this._valid)?void 0:(this._lastPoints=e,this._active=!0,{pitchDelta:(o.y+a.y)/2*-.5})}gestureBeginsVertically(t,e,n){if(void 0!==this._valid)return this._valid;const r=t.mag()>=2,i=e.mag()>=2;if(!r&&!i)return;if(!r||!i)return null==this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;const o=t.y>0==e.y>0;return Ii(t)&&Ii(e)&&o}}const Oi={panStep:100,bearingStep:15,pitchStep:10};class Ai{constructor(){const t=Oi;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let e=0,n=0,r=0,i=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),i=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),i=1);break;case 38:t.shiftKey?r=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?r=-1:(t.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(n=0,r=0),{cameraAnimation:a=>{const s=a.getZoom();a.easeTo({duration:300,easeId:"keyboardHandler",easing:Di,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:a.getBearing()+n*this._bearingStep,pitch:a.getPitch()+r*this._pitchStep,offset:[-i*this._panStep,-o*this._panStep],center:a.getCenter()},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Di(t){return t*(2-t)}const Ri=4.000244140625;class Li{constructor(e,n){this._map=e,this._el=e.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,t.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(e){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(e.ctrlKey||e.metaKey||this.isZooming()||t.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let n=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const r=t.exported.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%Ri==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this._active||this._start(e)),e.preventDefault()}_onTimeout(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const e=f(this._el,t);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:e,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const e=this._map.transform;"wheel"===this._type&&e.projection.wrap&&(e._center.lng>=180||e._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const n=()=>e._terrainEnabled()&&this._aroundCoord?e.computeZoomRelativeTo(this._aroundCoord):e.zoom;if(0!==this._delta){const t="wheel"===this._type&&Math.abs(this._delta)>Ri?this._wheelZoomRate:this._defaultZoomRate;let r=2/(1+Math.exp(-Math.abs(this._delta*t)));this._delta<0&&0!==r&&(r=1/r);const i=n(),o=Math.pow(2,i),a="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):o;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(a*r))),"wheel"===this._type&&(this._startZoom=i,this._easing=this._smoothOutEasing(200)),this._delta=0}const r="number"==typeof this._targetZoom?this._targetZoom:n(),i=this._startZoom,o=this._easing;let a,s=!1;if("wheel"===this._type&&i&&o){const e=Math.min((t.exported.now()-this._lastWheelEventTime)/200,1),n=o(e);a=t.number(i,r,n),e<1?this._frameId||(this._frameId=!0):s=!0}else a=r,s=!0;return this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!s,zoomDelta:a-n(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let n=t.ease;if(this._prevEase){const e=this._prevEase,r=(t.exported.now()-e.start)/e.duration,i=e.easing(r+.01)-e.easing(r),o=.27/Math.sqrt(i*i+1e-4)*.01,a=Math.sqrt(.0729-o*o);n=t.bezier(o,a,.25,1)}return this._prevEase={start:t.exported.now(),duration:e,easing:n},n}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=o("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(t.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")}),200)}}class Ni{constructor(t,e){this._clickZoom=t,this._tapZoom=e}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Fi{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(t,e){return t.preventDefault(),{cameraAnimation:n=>{n.easeTo({duration:300,zoom:n.getZoom()+(t.shiftKey?-1:1),around:n.unproject(e)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class zi{constructor(){this._tap=new gi({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(t,e,n){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=e[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(t,e,n))}touchmove(t,e,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;const r=e[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,t.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(t,e,n)}touchend(t,e,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(t,e,n)&&(this._tapTime=t.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Bi{constructor(t,e,n){this._el=t,this._mousePan=e,this._touchPan=n}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class $i{constructor(t,e,n){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=n}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ji{constructor(t,e,n,r){this._el=t,this._touchZoom=e,this._touchRotate=n,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ui=t=>t.zoom||t.drag||t.pitch||t.rotate;class Vi extends t.Event{}class Hi{constructor(){this.constants=[1,1,.01],this.radius=0}setup(e,n){const r=t.sub([],n,e);this.radius=t.length(r[2]<0?t.div([],r,this.constants):[r[0],r[1],0])}projectRay(e){t.div(e,e,this.constants),t.normalize(e,e),t.mul$1(e,e,this.constants);const n=t.scale$2([],e,this.radius);if(n[2]>0){const e=t.scale$2([],[0,0,1],t.dot(n,[0,0,1])),r=t.scale$2([],t.normalize([],[n[0],n[1],0]),this.radius),i=t.add([],n,t.scale$2([],t.sub([],t.add([],r,e),n),2));n[0]=i[0],n[1]=i[1]}return n}}function Gi(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}class Wi{constructor(e,n){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ii(e),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Hi,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(n),t.bindAll(["handleEvent","handleWindowEvent"],this);const r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[t.window,"blur",void 0]];for(const[i,o,a]of this._listeners)i.addEventListener(o,i===t.window.document?this.handleWindowEvent:this.handleEvent,a)}destroy(){for(const[e,n,r]of this._listeners)e.removeEventListener(n,e===t.window.document?this.handleWindowEvent:this.handleEvent,r)}_addDefaultHandlers(t){const e=this._map,n=e.getCanvasContainer();this._add("mapEvent",new ui(e,t));const r=e.boxZoom=new pi(e,t);this._add("boxZoom",r);const i=new mi,o=new Fi;e.doubleClickZoom=new Ni(o,i),this._add("tapZoom",i),this._add("clickZoom",o);const a=new zi;this._add("tapDragZoom",a);const s=e.touchPitch=new Pi(e);this._add("touchPitch",s);const l=new _i(t),c=new bi(t);e.dragRotate=new $i(t,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);const u=new xi(t),h=new wi(e,t);e.dragPan=new Bi(n,u,h),this._add("mousePan",u),this._add("touchPan",h,["touchZoom","touchRotate"]);const p=new Ti,d=new ki;e.touchZoomRotate=new ji(n,d,p,a),this._add("touchRotate",p,["touchPan","touchZoom"]),this._add("touchZoom",d,["touchPan","touchRotate"]),this._add("blockableMapEvent",new hi(e));const f=e.scrollZoom=new Li(e,this);this._add("scrollZoom",f,["mousePan"]);const g=e.keyboard=new Ai;this._add("keyboard",g);for(const m of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])t.interactive&&t[m]&&e[m].enable(t[m])}_add(t,e,n){this._handlers.push({handlerName:t,handler:e,allowed:n}),this._handlersById[t]=e}stop(t){if(!this._updatingCamera){for(const{handler:t}of this._handlers)t.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ui(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(t,e,n){for(const r in t)if(r!==n&&(!e||e.indexOf(r)<0))return!0;return!1}handleWindowEvent(t){this.handleEvent(t,`${t.type}Window`)}_getMapTouches(t){const e=[];for(const n of t)this._el.contains(n.target)&&e.push(n);return e}handleEvent(t,e){this._updatingCamera=!0;const n="renderFrame"===t.type,r=n?void 0:t,i={needsRenderFrame:!1},o={},a={},s=t.touches?this._getMapTouches(t.touches):void 0,l=s?g(this._el,s):n?void 0:f(this._el,t);for(const{handlerName:h,handler:p,allowed:d}of this._handlers){if(!p.isEnabled())continue;let n;this._blockedByActive(a,d,h)?p.reset():p[e||t.type]&&(n=p[e||t.type](t,l,s),this.mergeHandlerResult(i,o,n,h,r),n&&n.needsRenderFrame&&this._triggerRenderFrame()),(n||p.isActive())&&(a[h]=p)}const c={};for(const h in this._previousActiveHandlers)a[h]||(c[h]=r);this._previousActiveHandlers=a,(Object.keys(c).length||Gi(i))&&(this._changes.push([i,o,c]),this._triggerRenderFrame()),(Object.keys(a).length||Gi(i))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:u}=i;u&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],u(this._map))}mergeHandlerResult(e,n,r,i,o){if(!r)return;t.extend(e,r);const a={handlerName:i,originalEvent:r.originalEvent||o};void 0!==r.zoomDelta&&(n.zoom=a),void 0!==r.panDelta&&(n.drag=a),void 0!==r.pitchDelta&&(n.pitch=a),void 0!==r.bearingDelta&&(n.rotate=a)}_applyChanges(){const e={},n={},r={};for(const[i,o,a]of this._changes)i.panDelta&&(e.panDelta=(e.panDelta||new t.Point(0,0))._add(i.panDelta)),i.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+i.zoomDelta),i.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+i.bearingDelta),i.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+i.pitchDelta),void 0!==i.around&&(e.around=i.around),void 0!==i.aroundCoord&&(e.aroundCoord=i.aroundCoord),void 0!==i.pinchAround&&(e.pinchAround=i.pinchAround),i.noInertia&&(e.noInertia=i.noInertia),t.extend(n,o),t.extend(r,a);this._updateMapTransform(e,n,r),this._changes=[]}_updateMapTransform(e,n,r){const i=this._map,o=i.transform,a=t=>[t.x,t.y,t.z];if((t=>{const e=this._eventsInProgress.drag;return e&&!this._handlersById[e.handlerName].isActive()})()&&!Gi(e)){const t=o.zoom;o.cameraElevationReference="sea",o.recenterOnTerrain(),o.cameraElevationReference="ground",t!==o.zoom&&this._map._update(!0)}if(o._isCameraConstrained&&i._stop(!0),!Gi(e))return void this._fireEvents(n,r,!0);let{panDelta:s,zoomDelta:l,bearingDelta:c,pitchDelta:u,around:h,aroundCoord:p,pinchAround:d}=e;o._isCameraConstrained&&(l>0&&(l=0),o._isCameraConstrained=!1),void 0!==d&&(h=d),(l||(t=>n[t]&&!this._eventsInProgress[t])("drag"))&&h&&(this._dragOrigin=a(o.pointCoordinate3D(h)),this._trackingEllipsoid.setup(o._camera.position,this._dragOrigin)),o.cameraElevationReference="sea",i._stop(!0),h=h||i.transform.centerPoint,c&&(o.bearing+=c),u&&(o.pitch+=u),o._updateCameraState();const f=[0,0,0];if(s)if("mercator"===o.projection.name){const t=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(h).dir),e=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(h.sub(s)).dir);f[0]=e[0]-t[0],f[1]=e[1]-t[1]}else{const e=o.pointCoordinate(h);if("globe"===o.projection.name){s=s.rotate(-o.angle);const n=o._pixelsPerMercatorPixel/o.worldSize;f[0]=-s.x*t.mercatorScale(t.latFromMercatorY(e.y))*n,f[1]=-s.y*t.mercatorScale(o.center.lat)*n}else{const t=o.pointCoordinate(h.sub(s));e&&t&&(f[0]=t.x-e.x,f[1]=t.y-e.y)}}const g=o.zoom,m=[0,0,0];if(l){const e=a(p||o.pointCoordinate3D(h)),n={dir:t.normalize([],t.sub([],e,o._camera.position))};if(n.dir[2]<0){const r=o.zoomDeltaToMovement(e,l);t.scale$2(m,n.dir,r)}}const y=t.add(f,f,m);o._translateCameraConstrained(y),l&&Math.abs(o.zoom-g)>1e-4&&o.recenterOnTerrain(),o.cameraElevationReference="ground",this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(n,r,!0)}_fireEvents(e,n,r){const i=Ui(this._eventsInProgress),o=Ui(e),a={};for(const t in e){const{originalEvent:n}=e[t];this._eventsInProgress[t]||(a[`${t}start`]=n),this._eventsInProgress[t]=e[t]}!i&&o&&this._fireEvent("movestart",o.originalEvent);for(const t in a)this._fireEvent(t,a[t]);o&&this._fireEvent("move",o.originalEvent);for(const t in e){const{originalEvent:n}=e[t];this._fireEvent(t,n)}const s={};let l;for(const t in this._eventsInProgress){const{handlerName:e,originalEvent:r}=this._eventsInProgress[t];this._handlersById[e].isActive()||(delete this._eventsInProgress[t],l=n[e]||r,s[`${t}end`]=l)}for(const t in s)this._fireEvent(t,s[t]);const c=Ui(this._eventsInProgress);if(r&&(i||o)&&!c){this._updatingCamera=!0;const e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),n=t=>0!==t&&-this._bearingSnap<t&&t<this._bearingSnap;e?(n(e.bearing||this._map.getBearing())&&(e.bearing=0),this._map.easeTo(e,{originalEvent:l})):(this._map.fire(new t.Event("moveend",{originalEvent:l})),n(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(e,n){this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((t=>{this._frameId=void 0,this.handleEvent(new Vi("renderFrame",{timeStamp:t})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Xi="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class qi extends t.Evented{constructor(e,n){super(),this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=n.bearingSnap,this._respectPrefersReducedMotion=!1!==n.respectPrefersReducedMotion,t.bindAll(["_renderFrameCallback"],this)}getCenter(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(t,e){return this.jumpTo({center:t},e)}panBy(e,n,r){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),r)}panTo(e,n,r){return this.easeTo(t.extend({center:e},n),r)}getZoom(){return this.transform.zoom}setZoom(t,e){return this.jumpTo({zoom:t},e),this}zoomTo(e,n,r){return this.easeTo(t.extend({zoom:e},n),r)}zoomIn(t,e){return this.zoomTo(this.getZoom()+1,t,e),this}zoomOut(t,e){return this.zoomTo(this.getZoom()-1,t,e),this}getBearing(){return this.transform.bearing}setBearing(t,e){return this.jumpTo({bearing:t},e),this}getPadding(){return this.transform.padding}setPadding(t,e){return this.jumpTo({padding:t},e),this}rotateTo(e,n,r){return this.easeTo(t.extend({bearing:e},n),r)}resetNorth(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this}resetNorthPitch(e,n){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),n),this}snapToNorth(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this}getPitch(){return this.transform.pitch}setPitch(t,e){return this.jumpTo({pitch:t},e),this}cameraForBounds(e,n){e=t.LngLatBounds.convert(e);const r=n&&n.bearing||0,i=n&&n.pitch||0,o=e.getNorthWest(),a=e.getSouthEast();return this._cameraForBounds(this.transform,o,a,r,i,n)}_extendCameraOptions(e){const n={top:0,bottom:0,right:0,left:0};if("number"==typeof(e=t.extend({padding:n,offset:[0,0],maxZoom:this.transform.maxZoom},e)).padding){const t=e.padding;e.padding={top:t,bottom:t,right:t,left:t}}return e.padding=t.extend(n,e.padding),e}_minimumAABBFrustumDistance(t,e){const n=e.max[0]-e.min[0],r=e.max[1]-e.min[1];return n/r>t.aspect?n/(2*Math.tan(.5*t.fovX)*t.aspect):r/(2*Math.tan(.5*t.fovY)*t.aspect)}_cameraForBoundsOnGlobe(e,n,r,i,o,a){const s=e.clone(),l=this._extendCameraOptions(a);s.bearing=i,s.pitch=o;const c=t.LngLat.convert(n),u=t.LngLat.convert(r),h=.5*(c.lat+u.lat),p=.5*(c.lng+u.lng),d=t.latLngToECEF(h,p),f=t.normalize([],d),g=t.normalize([],t.cross([],f,[0,1,0])),m=t.cross([],g,f),y=[g[0],g[1],g[2],0,m[0],m[1],m[2],0,f[0],f[1],f[2],0,0,0,0,1],v=[d,t.latLngToECEF(c.lat,c.lng),t.latLngToECEF(u.lat,c.lng),t.latLngToECEF(u.lat,u.lng),t.latLngToECEF(c.lat,u.lng),t.latLngToECEF(h,c.lng),t.latLngToECEF(h,u.lng),t.latLngToECEF(c.lat,p),t.latLngToECEF(u.lat,p)];let x=t.Aabb.fromPoints(v.map((e=>[t.dot(g,e),t.dot(m,e),t.dot(f,e)])));const _=t.transformMat4([],x.center,y);0===t.squaredLength(_)&&t.set(_,0,0,1),t.normalize(_,_),t.scale$2(_,_,t.GLOBE_RADIUS),s.center=t.ecefToLatLng(_);const b=s.getWorldToCameraMatrix(),w=t.invert(new Float64Array(16),b);x=t.Aabb.applyTransform(x,t.multiply([],b,y)),t.transformMat4(_,_,b);const S=.5*(x.max[2]-x.min[2]),C=this._minimumAABBFrustumDistance(s,x),E=t.scale$2([],[0,0,1],S),k=t.add(E,_,E),M=C+(0===s.pitch?0:t.distance(_,k)),T=s.globeCenterInViewSpace,I=t.sub([],_,[T[0],T[1],T[2]]);t.normalize(I,I),t.scale$2(I,I,M);const P=t.add([],_,I);t.transformMat4(P,P,w);const O=t.earthRadius/t.GLOBE_RADIUS,A=t.length(P),D=t.mercatorZfromAltitude(Math.max(A*O-t.earthRadius,Number.EPSILON),0),R=Math.min(s.zoomFromMercatorZAdjusted(D),l.maxZoom);return R>.5*(t.GLOBE_ZOOM_THRESHOLD_MIN+t.GLOBE_ZOOM_THRESHOLD_MAX)?(s.setProjection({name:"mercator"}),s.zoom=R,this._cameraForBounds(s,n,r,i,o,a)):{center:s.center,zoom:R,bearing:i,pitch:o}}queryTerrainElevation(e,n){const r=this.transform.elevation;return r?(n=t.extend({},{exaggerated:!0},n),r.getAtPoint(t.MercatorCoordinate.fromLngLat(e),null,n.exaggerated)):null}_cameraForBounds(e,n,r,i,o,a){if("globe"===e.projection.name)return this._cameraForBoundsOnGlobe(e,n,r,i,o,a);const s=e.clone(),l=this._extendCameraOptions(a),c=s.padding;s.bearing=i,s.pitch=o;const u=t.LngLat.convert(n),h=t.LngLat.convert(r),p=new t.LngLat(u.lng,h.lat),d=new t.LngLat(h.lng,u.lat),f=s.project(u),g=s.project(h),m=this.queryTerrainElevation(u),y=this.queryTerrainElevation(h),v=this.queryTerrainElevation(p),x=this.queryTerrainElevation(d),_=[[f.x,f.y,Math.min(m||0,y||0,v||0,x||0)],[g.x,g.y,Math.max(m||0,y||0,v||0,x||0)]];let b=t.Aabb.fromPoints(_);const w=s.getWorldToCameraMatrix(),S=t.invert(new Float64Array(16),w);b=t.Aabb.applyTransform(b,w);const C=t.sub([],b.max,b.min),E=c.left||0,k=c.right||0,M=c.bottom||0,T=c.top||0,{left:I,right:P,top:O,bottom:A}=l.padding,D=.5*(E+k),R=.5*(T+M),L=Math.min(s.scaleZoom(s.scale*Math.min((s.width-(E+k+I+P))/C[0],(s.height-(M+T+A+O))/C[1])),l.maxZoom),N=s.scale/s.zoomScale(L);b=new t.Aabb([b.min[0]-(I+D)*N,b.min[1]-(A+R)*N,b.min[2]],[b.max[0]+(P+D)*N,b.max[1]+(O+R)*N,b.max[2]]);const F=.5*C[2],z=this._minimumAABBFrustumDistance(s,b),B=[0,0,1,0];t.transformMat4$1(B,B,w),t.normalize$2(B,B);const $=t.scale$2([],B,z+F),j=t.add([],b.center,$),U=("number"==typeof l.offset.x&&"number"==typeof l.offset.y?new t.Point(l.offset.x,l.offset.y):t.Point.convert(l.offset)).rotate(-t.degToRad(i));b.center[0]-=U.x*N,b.center[1]+=U.y*N,t.transformMat4(b.center,b.center,S),t.transformMat4(j,j,S);const V=[b.center[0],b.center[1],j[2]*s.pixelsPerMeter];t.scale$2(V,V,1/s.worldSize);const H=t.lngFromMercatorX(V[0]),G=t.latFromMercatorY(V[1]),W=Math.min(s._zoomFromMercatorZ(V[2]),l.maxZoom),X=new t.LngLat(H,G);return s.mercatorFromTransition&&W<.5*(t.GLOBE_ZOOM_THRESHOLD_MIN+t.GLOBE_ZOOM_THRESHOLD_MAX)?(s.setProjection({name:"globe"}),s.zoom=W,this._cameraForBounds(s,n,r,i,o,a)):{center:X,zoom:W,bearing:i,pitch:o}}fitBounds(t,e,n){const r=this.cameraForBounds(t,e);return this._fitInternal(r,e,n)}fitScreenCoordinates(e,n,r,i,o){const a=t.Point.convert(e),s=t.Point.convert(n),l=new t.Point(Math.min(a.x,s.x),Math.min(a.y,s.y)),c=new t.Point(Math.max(a.x,s.x),Math.max(a.y,s.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(a,s))return this;const u=this.transform.pointLocation3D(l),h=this.transform.pointLocation3D(c),p=this.transform.pointLocation3D(new t.Point(l.x,c.y)),d=this.transform.pointLocation3D(new t.Point(c.x,l.y)),f=[Math.min(u.lng,h.lng,p.lng,d.lng),Math.min(u.lat,h.lat,p.lat,d.lat)],g=[Math.max(u.lng,h.lng,p.lng,d.lng),Math.max(u.lat,h.lat,p.lat,d.lat)],m=i&&i.pitch?i.pitch:this.getPitch(),y=this._cameraForBounds(this.transform,f,g,r,m,i);return this._fitInternal(y,i,o)}_fitInternal(e,n,r){return e?(delete(n=t.extend(e,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this}jumpTo(e,n){this.stop();const r=e.preloadOnly?this.transform.clone():this.transform;let i=!1,o=!1,a=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(i=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=t.LngLat.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(o=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(a=!0,r.pitch=+e.pitch),null==e.padding||r.isPaddingEqual(e.padding)||(r.padding=e.padding),e.preloadOnly?(this._preloadTiles(r),this):(this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),i&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),o&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),a&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||t.warnOnce(Xi),this.transform.getFreeCameraOptions()}setFreeCameraOptions(e,n){const r=this.transform;if(!r.projection.supportsFreeCamera)return t.warnOnce(Xi),this;this.stop();const i=r.zoom,o=r.pitch,a=r.bearing;r.setFreeCameraOptions(e);const s=i!==r.zoom,l=o!==r.pitch,c=a!==r.bearing;return this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),s&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),c&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),l&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n)),this}easeTo(e,n){this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||this._prefersReducedMotion(e))&&(e.duration=0);const r=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in e?+e.zoom:i,c="bearing"in e?this._normalizeBearing(e.bearing,o):o,u="pitch"in e?+e.pitch:a,h="padding"in e?e.padding:r.padding,p=t.Point.convert(e.offset);let d,f,g;if("globe"===r.projection.name){const n=t.MercatorCoordinate.fromLngLat(r.center),i=p.rotate(-r.angle);n.x+=i.x/r.worldSize,n.y+=i.y/r.worldSize;const o=n.toLngLat(),a=t.LngLat.convert(e.center||o);this._normalizeCenter(a),d=r.centerPoint.add(i),f=new t.Point(n.x,n.y).mult(r.worldSize),g=new t.Point(t.mercatorXfromLng(a.lng),t.mercatorYfromLat(a.lat)).mult(r.worldSize).sub(f)}else{d=r.centerPoint.add(p);const n=r.pointLocation(d),i=t.LngLat.convert(e.center||n);this._normalizeCenter(i),f=r.project(n),g=r.project(i).sub(f)}const m=r.zoomScale(l-i);let y,v;e.around&&(y=t.LngLat.convert(e.around),v=r.locationPoint(y));const x=this._zooming||l!==i,_=this._rotating||o!==c,b=this._pitching||u!==a,w=!r.isPaddingEqual(h),S=r=>S=>{if(x&&(r.zoom=t.number(i,l,S)),_&&(r.bearing=t.number(o,c,S)),b&&(r.pitch=t.number(a,u,S)),w&&(r.interpolatePadding(s,h,S),d=r.centerPoint.add(p)),y)r.setLocationAtPoint(y,v);else{const t=r.zoomScale(r.zoom-i),e=l>i?Math.min(2,m):Math.max(.5,m),n=Math.pow(e,1-S),o=r.unproject(f.add(g.mult(S*n)).mult(t));r.setLocationAtPoint(r.renderWorldCopies?o.wrap():o,d)}return e.preloadOnly||this._fireMoveEvents(n),r};if(e.preloadOnly){const t=this._emulate(S,e.duration,r);return this._preloadTiles(t),this}const C={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=x,this._rotating=_,this._pitching=b,this._padding=w,this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,C),this._ease(S(r),(t=>{r.recenterOnTerrain(),this._afterEase(n,t)}),e),this}_prepareEase(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._moving=!0,this.transform.cameraElevationReference="sea",n||r.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!r.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!r.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!r.pitching&&this.fire(new t.Event("pitchstart",e))}_fireMoveEvents(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))}_afterEase(e,n){if(this._easeId&&n&&this._easeId===n)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const r=this._zooming,i=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new t.Event("zoomend",e)),i&&this.fire(new t.Event("rotateend",e)),o&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}flyTo(e,n){if(this._prefersReducedMotion(e)){const r=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,n)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);const r=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in e?t.clamp(+e.zoom,r.minZoom,r.maxZoom):i,c="bearing"in e?this._normalizeBearing(e.bearing,o):o,u="pitch"in e?+e.pitch:a,h="padding"in e?e.padding:r.padding,p=r.zoomScale(l-i),d=t.Point.convert(e.offset);let f=r.centerPoint.add(d);const g=r.pointLocation(f),m=t.LngLat.convert(e.center||g);this._normalizeCenter(m);const y=r.project(g),v=r.project(m).sub(y);let x=e.curve;const _=Math.max(r.width,r.height),b=_/p,w=v.mag();if("minZoom"in e){const n=t.clamp(Math.min(e.minZoom,i,l),r.minZoom,r.maxZoom),o=_/r.zoomScale(n-i);x=Math.sqrt(o/w*2)}const S=x*x;function C(t){const e=(b*b-_*_+(t?-1:1)*S*S*w*w)/(2*(t?b:_)*S*w);return Math.log(Math.sqrt(e*e+1)-e)}function E(t){return(Math.exp(t)-Math.exp(-t))/2}function k(t){return(Math.exp(t)+Math.exp(-t))/2}const M=C(0);let T=function(t){return k(M)/k(M+x*t)},I=function(t){return _*((k(M)*(E(e=M+x*t)/k(e))-E(M))/S)/w;var e},P=(C(1)-M)/x;if(Math.abs(w)<1e-6||!isFinite(P)){if(Math.abs(_-b)<1e-6)return this.easeTo(e,n);const t=b<_?-1:1;P=Math.abs(Math.log(b/_))/x,I=function(){return 0},T=function(e){return Math.exp(t*x*e)}}e.duration="duration"in e?+e.duration:1e3*P/("screenSpeed"in e?+e.screenSpeed/x:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0);const O=o!==c,A=u!==a,D=!r.isPaddingEqual(h),R=r=>p=>{const g=p*P,x=1/T(g);r.zoom=1===p?l:i+r.scaleZoom(x),O&&(r.bearing=t.number(o,c,p)),A&&(r.pitch=t.number(a,u,p)),D&&(r.interpolatePadding(s,h,p),f=r.centerPoint.add(d));const _=1===p?m:r.unproject(y.add(v.mult(I(g))).mult(x));return r.setLocationAtPoint(r.renderWorldCopies?_.wrap():_,f),r._updateCameraOnTerrain(),e.preloadOnly||this._fireMoveEvents(n),r};if(e.preloadOnly){const t=this._emulate(R,e.duration,r);return this._preloadTiles(t),this}return this._zooming=!0,this._rotating=O,this._pitching=A,this._padding=D,this._prepareEase(n,!1),this._ease(R(r),(()=>this._afterEase(n)),e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const t=this._onEaseEnd;this._onEaseEnd=void 0,t.call(this,e)}if(!t){const t=this.handlers;t&&t.stop(!1)}return this}_ease(e,n,r){!1===r.animate||0===r.duration?(e(1),n()):(this._easeStart=t.exported.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const e=Math.min((t.exported.now()-this._easeStart)/this._easeOptions.duration,1),n=this._onEaseFrame;n&&n(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(e,n){e=t.wrap(e,-180,180);const r=Math.abs(e-n);return Math.abs(e-360-n)<r&&(e-=360),Math.abs(e+360-n)<r&&(e+=360),e}_normalizeCenter(t){const e=this.transform;if(!e.renderWorldCopies||e.maxBounds)return;const n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}_prefersReducedMotion(e){return this._respectPrefersReducedMotion&&t.exported.prefersReducedMotion&&!(e&&e.essential)}_emulate(t,e,n){const r=Math.ceil(15*e/1e3),i=[],o=t(n.clone());for(let a=0;a<=r;a++){const t=o(a/r);i.push(t.clone())}return i}}class Yi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e,t.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(t){const e=this.options&&this.options.compact;return this._map=t,this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=o("button","mapboxgl-ctrl-attrib-button",this._container),o("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=o("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(t,e){const n=this._map._getUIString(`AttributionControl.${e}`);t.setAttribute("aria-label",n),t.removeAttribute("title"),t.firstElementChild&&t.firstElementChild.setAttribute("title",n)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));const n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){const r=n.reduce(((t,e,r)=>(e.value&&(t+=`${e.key}=${e.value}${r<n.length-1?"&":""}`),t)),"?");e.href=`${t.config.FEEDBACK_URL}/${r}#${Jr(this._map,!0)}`,e.rel="noopener nofollow",this._setElementTitle(e,"MapFeedback")}}_updateData(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let t=[];if(this._map.style.stylesheet){const t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}const e=this._map.style._sourceCaches;for(const r in e){const n=e[r];if(n.used){const e=n.getSource();e.attribution&&t.indexOf(e.attribution)<0&&t.push(e.attribution)}}t.sort(((t,e)=>t.length-e.length)),t=t.filter(((e,n)=>{for(let r=n+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=[...this.options.customAttribution,...t]:t.unshift(this.options.customAttribution));const n=t.join(" | ");n!==this._attribHTML&&(this._attribHTML=n,t.length?(this._innerContainer.innerHTML=n,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Zi{constructor(){t.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(t){this._map=t,this._container=o("div","mapboxgl-ctrl");const e=o("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const t=this._map.style._sourceCaches;if(0===Object.entries(t).length)return!0;for(const e in t){const n=t[e].getSource();if(n.hasOwnProperty("mapbox_logo")&&!n.mapbox_logo)return!1}return!0}_updateCompact(){const t=this._container.children;if(t.length){const e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}}}class Ki{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e}remove(t){const e=this._currentlyRunning,n=e?this._queue.concat(e):this._queue;for(const r of n)if(r.id===t)return void(r.cancelled=!0)}run(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const e=this._currentlyRunning=this._queue;this._queue=[];for(const n of e)if(!n.cancelled&&(n.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Ji(e,n,r){if(e=new t.LngLat(e.lng,e.lat),n){const i=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),a=360*Math.ceil(Math.abs(e.lng-r.center.lng)/360),s=r.locationPoint(e).distSqr(n),l=n.x<0||n.y<0||n.x>r.width||n.y>r.height;r.locationPoint(i).distSqr(n)<s&&(l||Math.abs(i.lng-r.center.lng)<a)?e=i:r.locationPoint(o).distSqr(n)<s&&(l||Math.abs(o.lng-r.center.lng)<a)&&(e=o)}for(;Math.abs(e.lng-r.center.lng)>180;){const t=r.locationPoint(e);if(t.x>=0&&t.y>=0&&t.x<=r.width&&t.y<=r.height)break;e.lng>r.center.lng?e.lng-=360:e.lng+=360}return e}const Qi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class to extends t.Evented{constructor(e,n){if(super(),(e instanceof t.window.HTMLElement||n)&&(e=t.extend({element:e},n)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&e.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=e&&e.occludedOpacity||.2,e&&e.element)this._element=e.element,this._offset=t.Point.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=o("div");const n=41,r=27,i=a("svg",{display:"block",height:n*this._scale+"px",width:r*this._scale+"px",viewBox:`0 0 ${r} ${n}`},this._element),s=a("radialGradient",{id:"shadowGradient"},a("defs",{},i));a("stop",{offset:"10%","stop-opacity":.4},s),a("stop",{offset:"100%","stop-opacity":.05},s),a("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},i),a("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},i),a("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},i),a("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},i),this._offset=t.Point.convert(e&&e.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(t=>{t.preventDefault()})),this._element.addEventListener("mousedown",(t=>{t.preventDefault()}));const r=this._element.classList;for(const t in Qi)r.remove(`mapboxgl-marker-anchor-${t}`);r.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(t){return t===this._map||(this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._updateMoving),t.on("moveend",this._update),t.on("remove",this._clearFadeTimer),t._addMarker(this),this.setDraggable(this._draggable),this._update(),t.on("click",this._onMapClick)),this}remove(){const t=this._map;return t&&(t.off("click",this._onMapClick),t.off("move",this._updateMoving),t.off("moveend",this._update),t.off("mousedown",this._addDragHandler),t.off("touchstart",this._addDragHandler),t.off("mouseup",this._onUp),t.off("touchend",this._onUp),t.off("mousemove",this._onMove),t.off("touchmove",this._onMove),t.off("remove",this._clearFadeTimer),t._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const e=38.1,n=13.5,r=Math.sqrt(Math.pow(n,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-e],"bottom-left":[r,-1*(e-n+r)],"bottom-right":[-r,-1*(e-n+r)],left:[n,-1*(e-n)],right:[-n,-1*(e-n)]}:this._offset}this._popup=t,t._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(t){const e=t.code,n=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==n&&13!==n||this.togglePopup()}_onMapClick(t){const e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const t=this._popup;return t?(t.isOpen()?(t.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(t.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const t=this._map,e=this._pos;if(!t||!e)return!1;const n=t.unproject(e),r=t.getFreeCameraOptions();if(!r.position)return!1;const i=r.position.toLngLat();return i.distanceTo(n)<.9*i.distanceTo(this._lngLat)}_evaluateOpacity(){const e=this._map;if(!e)return;const n=this._pos;if(!n||n.x<0||n.x>e.transform.width||n.y<0||n.y>e.transform.height)return void this._clearFadeTimer();const r=e.unproject(n);let i;e._showingGlobe()&&t.isLngLatBehindGlobe(e.transform,this._lngLat)?i=0:(i=1-e._queryFogOpacity(r),e.transform._terrainEnabled()&&e.getTerrain()&&this._behindTerrain()&&(i*=this._occludedOpacity)),this._element.style.opacity=`${i}`,this._element.style.pointerEvents=i>0?"auto":"none",this._popup&&this._popup._setOpacity(i),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const t=this._pos;if(!t||!this._map)return;const e=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${t.x}px,${t.y}px)\n            ${Qi[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${e.x}px,${e.y}px)\n        `}_calculateXYTransform(){const e=this._pos,n=this._map,r=this.getPitchAlignment();if(!n||!e||"map"!==r)return"";if(!n._showingGlobe()){const t=n.getPitch();return t?`rotateX(${t}deg)`:""}const i=t.radToDeg(t.globeTiltAtLngLat(n.transform,this._lngLat)),o=e.sub(t.globeCenterToScreenPoint(n.transform)),a=Math.abs(o.x)+Math.abs(o.y);if(0===a)return"";const s=i/a;return`rotateX(${-o.y*s}deg) rotateY(${o.x*s}deg)`}_calculateZTransform(){const e=this._pos,n=this._map;if(!n||!e)return"";let r=0;const i=this.getRotationAlignment();if("map"===i)if(n._showingGlobe()){const e=n.project(new t.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),i=n.project(new t.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(e);r=t.radToDeg(Math.atan2(i.y,i.x))-90}else r=-n.getBearing();else if("horizon"===i){const i=t.smoothstep(4,6,n.getZoom()),o=t.globeCenterToScreenPoint(n.transform);o.y+=i*n.transform.height;const a=e.sub(o),s=t.radToDeg(Math.atan2(a.y,a.x));r=(s>90?s-270:s+90)*(1-i)}return r+=this._rotation,r?`rotateZ(${r}deg)`:""}_update(e){t.window.cancelAnimationFrame(this._updateFrameId);const n=this._map;n&&(n.transform.renderWorldCopies&&(this._lngLat=Ji(this._lngLat,this._pos,n.transform)),this._pos=n.project(this._lngLat),!0===e?this._updateFrameId=t.window.requestAnimationFrame((()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())})):this._pos=this._pos.round(),n._requestDomTask((()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(n._showingGlobe()||n.getTerrain()||n.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))})))}getOffset(){return this._offset}setOffset(e){return this._offset=t.Point.convert(e),this._update(),this}_onMove(e){const n=this._map;if(!n)return;const r=this._pointerdownPos,i=this._positionDelta;if(r&&i){if(!this._isDragging){const t=this._clickTolerance||n._clickTolerance;if(e.point.dist(r)<t)return;this._isDragging=!0}this._pos=e.point.sub(i),this._lngLat=n.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const e=this._map;e&&(e.off("mousemove",this._onMove),e.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"}_addDragHandler(t){const e=this._map,n=this._pos;e&&n&&this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(n),this._pointerdownPos=t.point,this._state="pending",e.on("mousemove",this._onMove),e.on("touchmove",this._onMove),e.once("mouseup",this._onUp),e.once("touchend",this._onUp))}setDraggable(t){this._draggable=!!t;const e=this._map;return e&&(t?(e.on("mousedown",this._addDragHandler),e.on("touchstart",this._addDragHandler)):(e.off("mousedown",this._addDragHandler),e.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(t){return this._occludedOpacity=t||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const eo={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},no=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ro(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new t.Point(0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bottom";if("number"==typeof e){const r=Math.round(Math.sqrt(.5*Math.pow(e,2)));switch(n){case"top":return new t.Point(0,e);case"top-left":return new t.Point(r,r);case"top-right":return new t.Point(-r,r);case"bottom":return new t.Point(0,-e);case"bottom-left":return new t.Point(r,-r);case"bottom-right":return new t.Point(-r,-r);case"left":return new t.Point(e,0);case"right":return new t.Point(-e,0)}return new t.Point(0,0)}return e instanceof t.Point||Array.isArray(e)?t.Point.convert(e):t.Point.convert(e[n]||[0,0])}class io{constructor(t){this.jumpTo(t)}getValue(e){if(e<=this._startTime)return this._start;if(e>=this._endTime)return this._end;const n=t.easeCubicInOut((e-this._startTime)/(this._endTime-this._startTime));return this._start*(1-n)+this._end*n}isEasing(t){return t>=this._startTime&&t<=this._endTime}jumpTo(t){this._startTime=-1/0,this._endTime=-1/0,this._start=t,this._end=t}easeTo(t,e,n){this._start=this.getValue(e),this._end=t,this._startTime=e,this._endTime=e+n}}const oo={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},ao={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},so={showCompass:!0,showZoom:!0,visualizePitch:!1};class lo{constructor(e,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._clickTolerance=10,this.element=n,this.mouseRotate=new _i({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,r&&(this.mousePitch=new bi({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener("mousedown",this.mousedown),n.addEventListener("touchstart",this.touchstart,{passive:!1}),n.addEventListener("touchmove",this.touchmove),n.addEventListener("touchend",this.touchend),n.addEventListener("touchcancel",this.reset)}down(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),u()}move(t,e){const n=this.map,r=this.mouseRotate.mousemoveWindow(t,e),i=r&&r.bearingDelta;if(i&&n.setBearing(n.getBearing()+i),this.mousePitch){const r=this.mousePitch.mousemoveWindow(t,e),i=r&&r.pitchDelta;i&&n.setPitch(n.getPitch()+i)}}off(){const t=this.element;t.removeEventListener("mousedown",this.mousedown),t.removeEventListener("touchstart",this.touchstart,{passive:!1}),t.removeEventListener("touchmove",this.touchmove),t.removeEventListener("touchend",this.touchend),t.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){h(),t.window.removeEventListener("mousemove",this.mousemove),t.window.removeEventListener("mouseup",this.mouseup)}mousedown(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:()=>e.preventDefault()}),f(this.element,e)),t.window.addEventListener("mousemove",this.mousemove),t.window.addEventListener("mouseup",this.mouseup)}mousemove(t){this.move(t,f(this.element,t))}mouseup(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()}touchstart(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=g(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>t.preventDefault()},this._startPos))}touchmove(t){1!==t.targetTouches.length?this.reset():(this._lastPos=g(this.element,t.targetTouches)[0],this.move({preventDefault:()=>t.preventDefault()},this._lastPos))}touchend(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const co={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},uo={maxWidth:100,unit:"metric"},ho={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},po={version:t.version,supported:n,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:class extends qi{constructor(e){if(t.LivePerformanceUtils.mark(t.PerformanceMarkers.create),null!=(e=t.extend({},ao,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(e.antialias&&t.isSafariWithAntialiasingBug(t.window)&&(e.antialias=!1,t.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Yr(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),e),this._interactive=e.interactive,this._minTileCacheSize=e.minTileCacheSize,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._useWebGL2=e.useWebGL2,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=e.crossSourceCollisions,this._collectResourceTiming=e.collectResourceTiming,this._optimizeForTerrain=e.optimizeForTerrain,this._language=this._parseLanguage(e.language),this._worldview=e.worldview,this._renderTaskQueue=new Ki,this._domRenderTaskQueue=new Ki,this._controls=[],this._markers=[],this._popups=[],this._mapId=t.uniqueId(),this._locale=t.extend({},oo,e.locale),this._clickTolerance=e.clickTolerance,this._cooperativeGestures=e.cooperativeGestures,this._performanceMetricsCollection=e.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new io(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new t.RequestManager(e.transformRequest,e.accessToken,e.testMode),this._silenceAuthErrors=!!e.testMode,"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error(`Container '${e.container}' not found.`)}else{if(!(e.container instanceof t.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(this._container.childNodes.length>0&&t.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1),t.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),t.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Wi(this,e),this._localFontFamily=e.localFontFamily,this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),e.projection&&this.setProjection(e.projection),this._hash=e.hash&&new Kr("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),e.attributionControl&&this.addControl(new Yi({customAttribution:e.customAttribution})),this._logoControl=new Zi,this.addControl(this._logoControl,e.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(e=>{this._update("style"===e.dataType),this.fire(new t.Event(`${e.dataType}data`,e))})),this.on("dataloading",(e=>{this.fire(new t.Event(`${e.dataType}dataloading`,e))}))}_getMapId(){return this._mapId}addControl(e,n){if(void 0===n&&(n=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const r=e.onAdd(this);this._controls.push(e);const i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this}removeControl(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this}hasControl(t){return this._controls.indexOf(t)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(e){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const n=!this._moving;return n&&this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)),this.fire(new t.Event("resize",e)),n&&this.fire(new t.Event("moveend",e)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()}setMinZoom(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e?this.setZoom(e):this.fire(new t.Event("zoomstart")).fire(new t.Event("zoom")).fire(new t.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e?this.setZoom(e):this.fire(new t.Event("zoomstart")).fire(new t.Event("zoom")).fire(new t.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e?this.setPitch(e):this.fire(new t.Event("pitchstart")).fire(new t.Event("pitch")).fire(new t.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(e){if((e=null==e?85:e)>85)throw new Error("maxPitch must be less than or equal to 85");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e?this.setPitch(e):this.fire(new t.Event("pitchstart")).fire(new t.Event("pitch")).fire(new t.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(t){return this.transform.renderWorldCopies=t,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(e){return"auto"===e?t.window.navigator.language:Array.isArray(e)?0===e.length?void 0:e.map((e=>"auto"===e?t.window.navigator.language:e)):e}setLanguage(t){const e=this._parseLanguage(t);if(!this.style||e===this._language)return this;this._language=e,this.style._reloadSources();for(const n of this._controls)n._setLanguage&&n._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(t){return this.style&&t!==this._worldview?(this._worldview=t,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(t){return this._lazyInitEmptyStyle(),t?"string"==typeof t&&(t={name:t}):t=null,this._useExplicitProjection=!!t,this._prioritizeAndUpdateProjection(t,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const e=this.transform,n=e.projection.name;let r;"globe"===n&&e.zoom>=t.GLOBE_ZOOM_THRESHOLD_MAX?(e.setMercatorFromTransition(),r=!0):"mercator"===n&&e.zoom<t.GLOBE_ZOOM_THRESHOLD_MAX&&(e.setProjection({name:"globe"}),r=!0),r&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(t,e){return this._updateProjection(t||e||{name:"mercator"})}_updateProjection(e){let n;if(n="globe"===e.name&&this.transform.zoom>=t.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(e),this.style.applyProjectionUpdate(),n){this.painter.clearBackgroundTiles();for(const t in this.style._sourceCaches)this.style._sourceCaches[t].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(e){return this.transform.locationPoint3D(t.LngLat.convert(e))}unproject(e){return this.transform.pointLocation3D(t.Point.convert(e))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(t,e,n){if("mouseenter"===t||"mouseover"===t){let r=!1;const i=i=>{const o=e.filter((t=>this.getLayer(t))),a=o.length?this.queryRenderedFeatures(i.point,{layers:o}):[];a.length?r||(r=!0,n.call(this,new si(t,this,i.originalEvent,{features:a}))):r=!1},o=()=>{r=!1};return{layers:new Set(e),listener:n,delegates:{mousemove:i,mouseout:o}}}if("mouseleave"===t||"mouseout"===t){let r=!1;const i=i=>{const o=e.filter((t=>this.getLayer(t)));(o.length?this.queryRenderedFeatures(i.point,{layers:o}):[]).length?r=!0:r&&(r=!1,n.call(this,new si(t,this,i.originalEvent)))},o=e=>{r&&(r=!1,n.call(this,new si(t,this,e.originalEvent)))};return{layers:new Set(e),listener:n,delegates:{mousemove:i,mouseout:o}}}{const r=t=>{const r=e.filter((t=>this.getLayer(t))),i=r.length?this.queryRenderedFeatures(t.point,{layers:r}):[];i.length&&(t.features=i,n.call(this,t),delete t.features)};return{layers:new Set(e),listener:n,delegates:{[t]:r}}}}on(t,e,n){if(void 0===n)return super.on(t,e);Array.isArray(e)||(e=[e]);const r=this._createDelegatedListener(t,e,n);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(r);for(const i in r.delegates)this.on(i,r.delegates[i]);return this}once(t,e,n){if(void 0===n)return super.once(t,e);Array.isArray(e)||(e=[e]);const r=this._createDelegatedListener(t,e,n);for(const i in r.delegates)this.once(i,r.delegates[i]);return this}off(t,e,n){if(void 0===n)return super.off(t,e);e=new Set(Array.isArray(e)?e:[e]);const r=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0},i=this._delegatedListeners?this._delegatedListeners[t]:void 0;return i&&(t=>{for(let i=0;i<t.length;i++){const o=t[i];if(o.listener===n&&r(o.layers,e)){for(const t in o.delegates)this.off(t,o.delegates[t]);return t.splice(i,1),this}}})(i),this}queryRenderedFeatures(e,n){return this.style?(void 0!==n||void 0===e||e instanceof t.Point||Array.isArray(e)||(n=e,e=void 0),this.style.queryRenderedFeatures(e=e||[[0,0],[this.transform.width,this.transform.height]],n=n||{},this.transform)):[]}querySourceFeatures(t,e){return this.style.querySourceFeatures(t,e)}isPointOnSurface(e){const{name:n}=this.transform.projection;return"globe"!==n&&"mercator"!==n&&t.warnOnce(`${n} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(t.Point.convert(e))}setStyle(e,n){return!1!==(n=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&n.localFontFamily===this._localFontFamily&&this.style&&e?(this._diffStyle(e,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._localFontFamily=n.localFontFamily,this._updateStyle(e,n))}_getUIString(t){const e=this._locale[t];if(null==e)throw new Error(`Missing UI string '${t}'`);return e}_updateStyle(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),t&&(this.style=new Ke(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Ke(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(e,n){if("string"==typeof e){const r=this._requestManager.normalizeStyleURL(e),i=this._requestManager.transformRequest(r,t.ResourceType.Style);t.getJSON(i,((e,r)=>{e?this.fire(new t.ErrorEvent(e)):r&&this._updateDiff(r,n)}))}else"object"==typeof e&&this._updateDiff(e,n)}_updateDiff(e,n){try{this.style.setState(e)&&this._update(!0)}catch(r){t.warnOnce(`Unable to perform style diff: ${r.message||r.error||r}.  Rebuilding the style from scratch.`),this._updateStyle(e,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(t.warnOnce("There is no style added to the map."),!1)}addSource(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)}isSourceLoaded(t){return!!this.style&&this.style._isSourceCacheLoaded(t)}areTilesLoaded(){const t=this.style&&this.style._sourceCaches;for(const e in t){const n=t[e]._tiles;for(const t in n){const e=n[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}}return!0}addSourceType(t,e,n){this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,n)}removeSource(t){return this.style.removeSource(t),this._updateTerrain(),this._update(!0)}getSource(t){return this.style.getSource(t)}addImage(e,n){let{pixelRatio:r=1,sdf:i=!1,stretchX:o,stretchY:a,content:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._lazyInitEmptyStyle(),n instanceof t.window.HTMLImageElement||t.window.ImageBitmap&&n instanceof t.window.ImageBitmap){const{width:l,height:c,data:u}=t.exported.getImageData(n);this.style.addImage(e,{data:new t.RGBAImage({width:l,height:c},u),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:i,version:0})}else if(void 0===n.width||void 0===n.height)this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:l,height:c}=n,u=n;this.style.addImage(e,{data:new t.RGBAImage({width:l,height:c},new Uint8Array(u.data)),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:i,version:0,userImage:u}),u.onAdd&&u.onAdd(this,e)}}updateImage(e,n){const r=this.style.getImage(e);if(!r)return void this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const i=n instanceof t.window.HTMLImageElement||t.window.ImageBitmap&&n instanceof t.window.ImageBitmap?t.exported.getImageData(n):n,{width:o,height:a}=i;void 0!==o&&void 0!==a?o===r.data.width&&a===r.data.height?(r.data.replace(i.data,!(n instanceof t.window.HTMLImageElement||t.window.ImageBitmap&&n instanceof t.window.ImageBitmap)),this.style.updateImage(e,r)):this.fire(new t.ErrorEvent(new Error(`The width and height of the updated image (${o}, ${a})\n                must be that same as the previous version of the image\n                (${r.data.width}, ${r.data.height})`))):this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(t){this.style.removeImage(t)}loadImage(e,n){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),((e,r)=>{n(e,r instanceof t.window.HTMLImageElement?t.exported.getImageData(r):r)}))}listImages(){return this.style.listImages()}addLayer(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)}moveLayer(t,e){return this.style.moveLayer(t,e),this._update(!0)}removeLayer(t){return this.style.removeLayer(t),this._update(!0)}getLayer(t){return this.style.getLayer(t)}setLayerZoomRange(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)}setFilter(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.style.setFilter(t,e,n),this._update(!0)}getFilter(t){return this.style.getFilter(t)}setPaintProperty(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setPaintProperty(t,e,n,r),this._update(!0)}getPaintProperty(t,e){return this.style.getPaintProperty(t,e)}setLayoutProperty(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setLayoutProperty(t,e,n,r),this._update(!0)}getLayoutProperty(t,e){return this.style.getLayoutProperty(t,e)}setLight(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(t){return this._lazyInitEmptyStyle(),!t&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(t),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(t){return this._lazyInitEmptyStyle(),this.style.setFog(t),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(e){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(t.LngLat.convert(e),this.transform):0}setFeatureState(t,e){return this.style.setFeatureState(t,e),this._update()}removeFeatureState(t,e){return this.style.removeFeatureState(t,e),this._update()}getFeatureState(t){return this.style.getFeatureState(t)}_updateContainerDimensions(){if(!this._container)return;const e=this._container.getBoundingClientRect().width||400,n=this._container.getBoundingClientRect().height||300;let r,i,o,a=this._container;for(;a&&(!i||!o);){const e=t.window.getComputedStyle(a).transform;e&&"none"!==e&&(r=e.match(/matrix.*\((.+)\)/)[1].split(", "),r[0]&&"0"!==r[0]&&"1"!==r[0]&&(i=r[0]),r[3]&&"0"!==r[3]&&"1"!==r[3]&&(o=r[3])),a=a.parentElement}this._containerWidth=i?Math.abs(e/i):e,this._containerHeight=o?Math.abs(n/o):n}_detectMissingCSS(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=o("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();const e=this._canvasContainer=o("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=o("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const n=this._controlContainer=o("div","mapboxgl-control-container",t),r=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((t=>{r[t]=o("div",`mapboxgl-ctrl-${t}`,n)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(e,n){const r=t.exported.devicePixelRatio||1;this._canvas.width=r*Math.ceil(e),this._canvas.height=r*Math.ceil(n),this._canvas.style.width=`${e}px`,this._canvas.style.height=`${n}px`}_addMarker(t){this._markers.push(t)}_removeMarker(t){const e=this._markers.indexOf(t);-1!==e&&this._markers.splice(e,1)}_addPopup(t){this._popups.push(t)}_removePopup(t){const e=this._popups.indexOf(t);-1!==e&&this._popups.splice(e,1)}_setupPainter(){const e=t.extend({},n.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._useWebGL2&&this._canvas.getContext("webgl2",e),i=r||this._canvas.getContext("webgl",e)||this._canvas.getContext("experimental-webgl",e);i?(this._useWebGL2&&!r&&t.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),t.storeAuthState(i,!0),this.painter=new Nr(i,this.transform,!!r),this.on("data",(t=>{"source"===t.dataType&&this.painter.setTileLoadedFlag(!0)})),t.exported$1.testSupport(i)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))}_contextRestored(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))}_onMapScroll(t){if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(t){return this._update(),this._renderTaskQueue.add(t)}_cancelRenderFrame(t){this._renderTaskQueue.remove(t)}_requestDomTask(t){!this.loaded()||this.loaded()&&!this.isMoving()?t():this._domRenderTaskQueue.add(t)}_render(e){let n;const r=this.painter.context.extTimerQuery,i=t.exported.now();if(this.listens("gpu-timing-frame")&&(n=r.createQueryEXT(),r.beginQueryEXT(r.TIME_ELAPSED_EXT,n)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],t.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],t.window.performance.now())),this._renderTaskQueue.run(e),this._domRenderTaskQueue.run(e),this._removed)return;this._updateProjectionTransition();const o=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const e=this.transform.zoom,n=this.transform.pitch,r=t.exported.now(),i=new t.EvaluationParameters(e,{now:r,fadeDuration:o,pitch:n,transition:this.style.getTransition()});this.style.update(i)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let a=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),a=this._updateAverageElevation(i),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):a=this._updateAverageElevation(i),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,o,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:o,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),n){const e=t.exported.now()-i;r.endQueryEXT(r.TIME_ELAPSED_EXT,n),setTimeout((()=>{const o=r.getQueryObjectEXT(n,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(n),this.fire(new t.Event("gpu-timing-frame",{cpuTime:e,gpuTime:o})),t.window.performance.mark("frame-gpu",{startTime:i,detail:{gpuTime:o}})}),50)}if(this.listens("gpu-timing-layer")){const e=this.painter.collectGpuTimers();setTimeout((()=>{const n=this.painter.queryGpuTimers(e);this.fire(new t.Event("gpu-timing-layer",{layerTimes:n}))}),50)}if(this.listens("gpu-timing-deferred-render")){const e=this.painter.collectDeferredRenderGpuQueries();setTimeout((()=>{const n=this.painter.queryGpuTimeDeferredRender(e);this.fire(new t.Event("gpu-timing-deferred-render",{gpuTime:n}))}),50)}const s=this._sourcesDirty||this._styleDirty||this._placementDirty||a;if(s||this._repaint)this.triggerRepaint();else{const e=!this.isMoving()&&this.loaded();if(e&&(a=this._updateAverageElevation(i,!0)),a)this.triggerRepaint();else if(this._triggerFrame(!1),e&&(this.fire(new t.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const e=this._calculateSpeedIndex();this.fire(new t.Event("speedindexcompleted",{speedIndex:e})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||s||(this._fullyLoaded=!0,t.LivePerformanceUtils.mark(t.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&t.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(t){for(const e of this._markers)t&&!this.getRenderWorldCopies()&&(e._lngLat=e._lngLat.wrap()),e._update();for(const e of this._popups)!t||this.getRenderWorldCopies()||e._trackPointer||(e._lngLat=e._lngLat.wrap()),e._update()}_updateAverageElevation(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=t=>(this.transform.averageElevation=t,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&n(0);if((e||t-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(t)){const e=this.transform.averageElevation;let r=this.transform.sampleAverageElevation(),i=!1;this.transform.elevation&&(i=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(r)?r=0:this._averageElevationLastSampledAt=t;const o=Math.abs(e-r);if(o>1){if(this._isInitialLoad||i)return this._averageElevation.jumpTo(r),n(r);this._averageElevation.easeTo(r,t,300)}else if(o>1e-4)return this._averageElevation.jumpTo(r),n(r)}return!!this._averageElevation.isEasing(t)&&n(this._averageElevation.getValue(t))}_authenticate(){t.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(e=>{if(e&&(e.message===t.AUTH_ERR_MSG||401===e.status)){const e=this.painter.context.gl;t.storeAuthState(e,!1),this._logoControl instanceof Zi&&this._logoControl._updateLogo(),e&&e.clear(e.DEPTH_BUFFER_BIT|e.COLOR_BUFFER_BIT|e.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new t.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),t.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}))}_updateTerrain(){const t=this._isDragging();this.painter.updateTerrain(this.style,t)}_calculateSpeedIndex(){const t=this.painter.canvasCopy(),e=this.painter.getCanvasCopiesAndTimestamps();e.timeStamps.push(performance.now());const n=this.painter.context.gl,r=n.createFramebuffer();function i(t){n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0);const e=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4);return n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,e),e}return n.bindFramebuffer(n.FRAMEBUFFER,r),this._canvasPixelComparison(i(t),e.canvasCopies.map(i),e.timeStamps)}_canvasPixelComparison(t,e,n){let r=n[1]-n[0];const i=t.length/4;for(let o=0;o<e.length;o++){const a=e[o];let s=0;for(let e=0;e<a.length;e+=4)a[e]===t[e]&&a[e+1]===t[e+1]&&a[e+2]===t[e+2]&&a[e+3]===t[e+3]&&(s+=1);r+=(n[o+2]-n[o+1])*(1-s/i)}return r}remove(){this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1),t.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),t.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new t.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(e){this._renderNextFrame=this._renderNextFrame||e,this.style&&!this._frame&&(this._frame=t.exported.frame((t=>{const e=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,e&&this._render(t)})))}_preloadTiles(e){const n=this.style?Object.values(this.style._sourceCaches):[];return t.asyncAll(n,((t,n)=>t._preloadTiles(e,n)),(()=>{this.triggerRepaint()})),this}_onWindowOnline(){this._update()}_onWindowResize(t){this._trackResize&&this.resize({originalEvent:t})._update()}_onVisibilityChange(){"hidden"===t.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(t){this._showTerrainWireframe!==t&&(this._showTerrainWireframe=t,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(t){this._speedIndexTiming!==t&&(this._speedIndexTiming=t,this._update())}get showPadding(){return!!this._showPadding}set showPadding(t){this._showPadding!==t&&(this._showPadding=t,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())}get repaint(){return!!this._repaint}set repaint(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(t){this._vertices=t,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(t){this._showTileAABBs!==t&&(this._showTileAABBs=t,t&&this._update())}_setCacheLimits(e,n){t.setCacheLimits(e,n)}get version(){return t.version}},NavigationControl:class{constructor(e){this.options=t.extend({},so,e),this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(t=>{this._map&&this._map.zoomIn({},{originalEvent:t})})),o("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(t=>{this._map&&this._map.zoomOut({},{originalEvent:t})})),o("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(t=>{const e=this._map;e&&(this.options.visualizePitch?e.resetNorthPitch({},{originalEvent:t}):e.resetNorth({},{originalEvent:t}))})),this._compassIcon=o("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const t=this._map;if(!t)return;const e=t.getZoom(),n=e===t.getMaxZoom(),r=e===t.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=r,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",r.toString())}_rotateCompassArrow(){const t=this._map;if(!t)return;const e=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(t.transform.pitch*(Math.PI/180)),.5)}) rotateX(${t.transform.pitch}deg) rotateZ(${t.transform.angle*(180/Math.PI)}deg)`:`rotate(${t.transform.angle*(180/Math.PI)}deg)`;t._requestDomTask((()=>{this._compassIcon&&(this._compassIcon.style.transform=e)}))}onAdd(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),t.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&t.on("pitch",this._rotateCompassArrow),t.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new lo(t,this._compass,this.options.visualizePitch)),this._container}onRemove(){const t=this._map;t&&(this._container.remove(),this.options.showZoom&&t.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&t.off("pitch",this._rotateCompassArrow),t.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(t,e){const n=o("button",t,this._container);return n.type="button",n.addEventListener("click",e),n}_setButtonTitle(t,e){if(!this._map)return;const n=this._map._getUIString(`NavigationControl.${e}`);t.setAttribute("aria-label",n),t.firstElementChild&&t.firstElementChild.setAttribute("title",n)}},GeolocateControl:class extends t.Evented{constructor(e){super(),this.options=t.extend({geolocation:t.window.navigator.geolocation},co,e),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Zr(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(t){return this._map=t,this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(e){var n=this;const r=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!!n.options.geolocation;n._supportsGeolocation=t,e(t)};void 0!==this._supportsGeolocation?e(this._supportsGeolocation):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then((t=>r("denied"!==t.state))).catch((()=>r())):r()}_isOutOfMapMaxBounds(t){const e=this._map.getMaxBounds(),n=t.coords;return!!e&&(n.longitude<e.getWest()||n.longitude>e.getEast()||n.latitude<e.getSouth()||n.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}}_updateCamera(e){const n=new t.LngLat(e.coords.longitude,e.coords.latitude),r=e.coords.accuracy,i=this._map.getBearing(),o=t.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),o,{geolocateSource:!0})}_updateMarker(e){if(e){const n=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const e=this._map.transform,n=t.mercatorZfromAltitude(1,e._center.lat)*e.worldSize,r=Math.ceil(2*this._accuracy*n);this._circleElement.style.width=`${r}px`,this._circleElement.style.height=`${r}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(e){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this._geolocateButton=o("button","mapboxgl-ctrl-geolocate",this._container),o("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e)}else{const t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o("div","mapboxgl-user-location"),this._dotElement.appendChild(o("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(o("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new to({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=o("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new to({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(e=>{e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new t.Event("trackuserlocationend")))}))}}_onDeviceOrientation(t){this._userLocationDotMarker&&(t.webkitCompassHeading?this._heading=t.webkitCompassHeading:!0===t.absolute&&(this._heading=-1*t.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let t;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(t={maximumAge:6e5,timeout:0},this._noTimeout=!0):(t=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,t),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const e=()=>{t.window.addEventListener("ondeviceorientationabsolute"in t.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==t.window.DeviceMotionEvent&&"function"==typeof t.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((t=>{"granted"===t&&e()})).catch(console.error):e()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),t.window.removeEventListener("deviceorientation",this._onDeviceOrientation),t.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Yi,ScaleControl:class{constructor(e){this.options=t.extend({},uo,e),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch(t){return!1}}(),t.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const t=this.options.maxWidth||100,e=this._map,n=e._containerHeight/2,r=e._containerWidth/2-t/2,i=e.unproject([r,n]),o=e.unproject([r+t,n]),a=i.distanceTo(o);if("imperial"===this.options.unit){const e=3.2808*a;e>5280?this._setScale(t,e/5280,"mile"):this._setScale(t,e,"foot")}else"nautical"===this.options.unit?this._setScale(t,a/1852,"nautical-mile"):a>=1e3?this._setScale(t,a/1e3,"kilometer"):this._setScale(t,a,"meter")}_setScale(t,e,n){this._map._requestDomTask((()=>{const r=function(t){const e=Math.pow(10,`${Math.floor(t)}`.length-1);let n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(t){const e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(n),e*n}(e),i=r/e;this._container.innerHTML=this._isNumberFormatSupported&&"nautical-mile"!==n?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:n}).format(r):`${r}&nbsp;${ho[n]}`,this._container.style.width=t*i+"px"}))}onAdd(t){return this._map=t,this._language=t.getLanguage(),this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(t){this._language=t,this._update()}setUnit(t){this.options.unit=t,this._update()}},FullscreenControl:class{constructor(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in t.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!t.window.document.fullscreenEnabled&&!t.window.document.webkitFullscreenEnabled)}_setupUI(){const e=this._fullscreenButton=o("button","mapboxgl-ctrl-fullscreen",this._controlContainer);o("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden","true"),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",t)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(t.window.document.fullscreenElement||t.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends t.Evented{constructor(e){super(),this.options=t.extend(Object.create(eo),e),t.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(e&&e.className?e.className.trim().split(/\s+/):[])}addTo(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&e.on("preclick",this._onClose),this.options.closeOnMove&&e.on("move",this._onClose),e.on("remove",this.remove),this._update(),e._addPopup(this),this._focusFirstElement(),this._trackPointer?(e.on("mousemove",this._onMouseEvent),e.on("mouseup",this._onMouseEvent),e._canvasContainer.classList.add("mapboxgl-track-pointer")):e.on("move",this._update),this.fire(new t.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const e=this._map;return e&&(e.off("move",this._update),e.off("move",this._onClose),e.off("preclick",this._onClose),e.off("click",this._onClose),e.off("remove",this.remove),e.off("mousemove",this._onMouseEvent),e.off("mouseup",this._onMouseEvent),e.off("drag",this._onMouseEvent),e._canvasContainer&&e._canvasContainer.classList.remove("mapboxgl-track-pointer"),e._removePopup(this),this._map=void 0),this.fire(new t.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(e){this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update();const n=this._map;return n&&(n.on("move",this._update),n.off("mousemove",this._onMouseEvent),n._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const t=this._map;return t&&(t.off("move",this._update),t.on("mousemove",this._onMouseEvent),t.on("drag",this._onMouseEvent),t._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(e){return this.setDOMContent(t.window.document.createTextNode(e))}setHTML(e){const n=t.window.document.createDocumentFragment(),r=t.window.document.createElement("body");let i;for(r.innerHTML=e;i=r.firstChild,i;)n.appendChild(i);return this.setDOMContent(n)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(t){return this.options.maxWidth=t,this._update(),this}setDOMContent(t){let e=this._content;if(e)for(;e.hasChildNodes();)e.firstChild&&e.removeChild(e.firstChild);else e=this._content=o("div","mapboxgl-popup-content",this._container||void 0);if(e.appendChild(t),this.options.closeButton){const t=this._closeButton=o("button","mapboxgl-popup-close-button",e);t.type="button",t.setAttribute("aria-label","Close popup"),t.setAttribute("aria-hidden","true"),t.innerHTML="&#215;",t.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(t){return this._classList.add(t),this._updateClassList(),this}removeClassName(t){return this._classList.delete(t),this._updateClassList(),this}setOffset(t){return this.options.offset=t,this._update(),this}toggleClassName(t){let e;return this._classList.delete(t)?e=!1:(this._classList.add(t),e=!0),this._updateClassList(),e}_onMouseEvent(t){this._update(t.point)}_getAnchor(t){if(this.options.anchor)return this.options.anchor;const e=this._map,n=this._container,r=this._pos;if(!e||!n||!r)return"bottom";const i=n.offsetWidth,o=n.offsetHeight,a=r.x<i/2,s=r.x>e.transform.width-i/2;if(r.y+t<o)return a?"top-left":s?"top-right":"top";if(r.y>e.transform.height-o){if(a)return"bottom-left";if(s)return"bottom-right"}return a?"left":s?"right":"bottom"}_updateClassList(){const t=this._container;if(!t)return;const e=[...this._classList];e.push("mapboxgl-popup"),this._anchor&&e.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&e.push("mapboxgl-popup-track-pointer"),t.className=e.join(" ")}_update(e){const n=this._map,r=this._content;if(!n||!this._lngLat&&!this._trackPointer||!r)return;let i=this._container;if(i||(i=this._container=o("div","mapboxgl-popup",n.getContainer()),this._tip=o("div","mapboxgl-popup-tip",i),i.appendChild(r)),this.options.maxWidth&&i.style.maxWidth!==this.options.maxWidth&&(i.style.maxWidth=this.options.maxWidth),n.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ji(this._lngLat,this._pos,n.transform)),!this._trackPointer||e){const t=this._pos=this._trackPointer&&e?e:n.project(this._lngLat),r=ro(this.options.offset),i=this._anchor=this._getAnchor(r.y),o=ro(this.options.offset,i),a=t.add(o).round();n._requestDomTask((()=>{this._container&&i&&(this._container.style.transform=`${Qi[i]} translate(${a.x}px,${a.y}px)`)}))}if(!this._marker&&n._showingGlobe()){const e=t.isLngLatBehindGlobe(n.transform,this._lngLat)?0:1;this._setOpacity(e)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const t=this._container.querySelector(no);t&&t.focus()}_onClose(){this.remove()}_setOpacity(t){this._container&&(this._container.style.opacity=`${t}`),this._content&&(this._content.style.pointerEvents=t?"auto":"none")}},Marker:to,Style:Ke,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,FreeCameraOptions:jr,Evented:t.Evented,config:t.config,prewarm:function(){Bt().acquire(Nt)},clearPrewarmedResources:function(){const t=zt;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(Nt),zt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return Ft.workerCount},set workerCount(t){Ft.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage(e){t.clearTileCache(e)},workerUrl:"",workerClass:null,setNow:t.exported.setNow,restoreNow:t.exported.restoreNow};return po})),n}()},1725:function(t){"use strict";var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(t,i){for(var o,a,s=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),l=1;l<arguments.length;l++){for(var c in o=Object(arguments[l]))n.call(o,c)&&(s[c]=o[c]);if(e){a=e(o);for(var u=0;u<a.length;u++)r.call(o,a[u])&&(s[a[u]]=o[a[u]])}}return s}},2592:function(t){"use strict";var e=function(t){return t!==t};t.exports=function(t,n){return 0===t&&0===n?1/t===1/n:t===n||!(!e(t)||!e(n))}},3454:function(t,e,n){"use strict";var r=n(9396),i=n(9722),o=n(2592),a=n(3355),s=n(3118),l=i(a(),Object);r(l,{getPolyfill:a,implementation:o,shim:s}),t.exports=l},3355:function(t,e,n){"use strict";var r=n(2592);t.exports=function(){return"function"===typeof Object.is?Object.is:r}},3118:function(t,e,n){"use strict";var r=n(3355),i=n(9396);t.exports=function(){var t=r();return i(Object,{is:t},{is:function(){return Object.is!==t}}),t}},1949:function(t,e,n){"use strict";var r;if(!Object.keys){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,a=n(7635),s=Object.prototype.propertyIsEnumerable,l=!s.call({toString:null},"toString"),c=s.call((function(){}),"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(t){var e=t.constructor;return e&&e.prototype===t},p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},d=function(){if("undefined"===typeof window)return!1;for(var t in window)try{if(!p["$"+t]&&i.call(window,t)&&null!==window[t]&&"object"===typeof window[t])try{h(window[t])}catch(e){return!0}}catch(e){return!0}return!1}();r=function(t){var e=null!==t&&"object"===typeof t,n="[object Function]"===o.call(t),r=a(t),s=e&&"[object String]"===o.call(t),p=[];if(!e&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var f=c&&n;if(s&&t.length>0&&!i.call(t,0))for(var g=0;g<t.length;++g)p.push(String(g));if(r&&t.length>0)for(var m=0;m<t.length;++m)p.push(String(m));else for(var y in t)f&&"prototype"===y||!i.call(t,y)||p.push(String(y));if(l)for(var v=function(t){if("undefined"===typeof window||!d)return h(t);try{return h(t)}catch(e){return!1}}(t),x=0;x<u.length;++x)v&&"constructor"===u[x]||!i.call(t,u[x])||p.push(u[x]);return p}}t.exports=r},4892:function(t,e,n){"use strict";var r=Array.prototype.slice,i=n(7635),o=Object.keys,a=o?function(t){return o(t)}:n(1949),s=Object.keys;a.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);t||(Object.keys=function(t){return i(t)?s(r.call(t)):s(t)})}else Object.keys=a;return Object.keys||a},t.exports=a},7635:function(t){"use strict";var e=Object.prototype.toString;t.exports=function(t){var n=e.call(t),r="[object Arguments]"===n;return r||(r="[object Array]"!==n&&null!==t&&"object"===typeof t&&"number"===typeof t.length&&t.length>=0&&"[object Function]"===e.call(t.callee)),r}},3654:function(t){"use strict";var e=t.exports;t.exports.isNumber=function(t){return"number"===typeof t},t.exports.findMin=function(t){if(0===t.length)return 1/0;for(var e=t[0],n=1;n<t.length;n++)e=Math.min(e,t[n]);return e},t.exports.findMax=function(t){if(0===t.length)return-1/0;for(var e=t[0],n=1;n<t.length;n++)e=Math.max(e,t[n]);return e},t.exports.findMinMulti=function(t){for(var n=e.findMin(t[0]),r=1;r<t.length;r++)n=Math.min(n,e.findMin(t[r]));return n},t.exports.findMaxMulti=function(t){for(var n=e.findMax(t[0]),r=1;r<t.length;r++)n=Math.max(n,e.findMax(t[r]));return n},t.exports.inside=function(t,e,n){return t<=n&&n<=e}},1024:function(t,e,n){"use strict";var r=Math.log(2),i=t.exports,o=n(3654);function a(t){return 1-Math.abs(t)}t.exports.getUnifiedMinMax=function(t,e){return i.getUnifiedMinMaxMulti([t],e)},t.exports.getUnifiedMinMaxMulti=function(t,e){e=e||{};var n=!1,r=!1,i=o.isNumber(e.width)?e.width:2,a=o.isNumber(e.size)?e.size:50,s=o.isNumber(e.min)?e.min:(n=!0,o.findMinMulti(t)),l=o.isNumber(e.max)?e.max:(r=!0,o.findMaxMulti(t)),c=(l-s)/(a-1);return n&&(s-=2*i*c),r&&(l+=2*i*c),{min:s,max:l}},t.exports.create=function(t,e){if(e=e||{},!t||0===t.length)return[];var n=o.isNumber(e.size)?e.size:50,r=o.isNumber(e.width)?e.width:2,s=i.getUnifiedMinMax(t,{size:n,width:r,min:e.min,max:e.max}),l=s.min,c=s.max-l,u=c/(n-1);if(0===c)return[{x:l,y:1}];for(var h=[],p=0;p<n;p++)h.push({x:l+p*u,y:0});var d=function(t,e){for(var n={},r=0,i=-e;i<=e;i++)r+=t(i/e),n[i]=r;return n}(a,r),f=d[r],g=d[r-1]-d[r-2],m=0;t.forEach((function(t){var e=function(t){return Math.floor((t-l)/u)}(t);if(!(e+r<0||e-r>=h.length)){var n=Math.max(e-r,0),i=e,a=Math.min(e+r,h.length-1),s=n-(e-r),c=e+r-a,p=d[-r-1+s]||0,y=d[-r-1+c]||0,v=f/(f-p-y);s>0&&(m+=v*(s-1)*g);var x=Math.max(0,e-r+1);o.inside(0,h.length-1,x)&&(h[x].y+=1*v*g),o.inside(0,h.length-1,i+1)&&(h[i+1].y-=2*v*g),o.inside(0,h.length-1,a+1)&&(h[a+1].y+=1*v*g)}}));var y=m,v=0,x=0;return h.forEach((function(t){v+=t.y,y+=v,t.y=y,x+=y})),x>0&&h.forEach((function(t){t.y/=x})),h},t.exports.getExpectedValueFromPdf=function(t){if(t&&0!==t.length){var e=0;return t.forEach((function(t){e+=t.x*t.y})),e}},t.exports.getXWithLeftTailArea=function(t,e){if(t&&0!==t.length){for(var n=0,r=0,i=0;i<t.length&&(r=i,!((n+=t[i].y)>=e));i++);return t[r].x}},t.exports.getPerplexity=function(t){if(t&&0!==t.length){var e=0;return t.forEach((function(t){var n=Math.log(t.y);isFinite(n)&&(e+=t.y*n)})),e=-e/r,Math.pow(2,e)}}},5164:function(t){t.exports=function(t,e,n,r){var i=t[0],o=t[1],a=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var s=(r-n)/2,l=0,c=s-1;l<s;c=l++){var u=e[n+2*l+0],h=e[n+2*l+1],p=e[n+2*c+0],d=e[n+2*c+1];h>o!==d>o&&i<(p-u)*(o-h)/(d-h)+u&&(a=!a)}return a}},5021:function(t,e,n){var r=n(5164),i=n(1850);t.exports=function(t,e,n,o){return e.length>0&&Array.isArray(e[0])?i(t,e,n,o):r(t,e,n,o)},t.exports.nested=i,t.exports.flat=r},1850:function(t){t.exports=function(t,e,n,r){var i=t[0],o=t[1],a=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var s=r-n,l=0,c=s-1;l<s;c=l++){var u=e[l+n][0],h=e[l+n][1],p=e[c+n][0],d=e[c+n][1];h>o!==d>o&&i<(p-u)*(o-h)/(d-h)+u&&(a=!a)}return a}},9056:function(t){t.exports=function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}var r=function(){function t(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null}return t}();function i(t,e){return t>e?1:t<e?-1:0}function o(t,e,n){for(var i=new r(null,null),o=i,a=i;;){var s=n(t,e.key);if(s<0){if(null===e.left)break;if(n(t,e.left.key)<0){var l=e.left;if(e.left=l.right,l.right=e,null===(e=l).left)break}a.left=e,a=e,e=e.left}else{if(!(s>0))break;if(null===e.right)break;if(n(t,e.right.key)>0&&(l=e.right,e.right=l.left,l.left=e,null===(e=l).right))break;o.right=e,o=e,e=e.right}}return o.right=e.left,a.left=e.right,e.left=i.right,e.right=i.left,e}function a(t,e,n,i){var a=new r(t,e);if(null===n)return a.left=a.right=null,a;var s=i(t,(n=o(t,n,i)).key);return s<0?(a.left=n.left,a.right=n,n.left=null):s>=0&&(a.right=n.right,a.left=n,n.right=null),a}function s(t,e,n){var r=null,i=null;if(e){var a=n((e=o(t,e,n)).key,t);0===a?(r=e.left,i=e.right):a<0?(i=e.right,e.right=null,r=e):(r=e.left,e.left=null,i=e)}return{left:r,right:i}}function l(t,e,n){return null===e?t:(null===t||((e=o(t.key,e,n)).left=t),e)}function c(t,e,n,r,i){if(t){r(e+(n?"\u2514\u2500\u2500 ":"\u251c\u2500\u2500 ")+i(t)+"\n");var o=e+(n?"    ":"\u2502   ");t.left&&c(t.left,o,!1,r,i),t.right&&c(t.right,o,!0,r,i)}}var u=function(){function t(t){void 0===t&&(t=i),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=a(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var n=new r(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var i=this._comparator,a=o(t,this._root,i),s=i(t,a.key);return 0===s?this._root=a:(s<0?(n.left=a.left,n.right=a,a.left=null):s>0&&(n.right=a.right,n.left=a,a.right=null),this._size++,this._root=n),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,n){var r;return null===e?null:0===n(t,(e=o(t,e,n)).key)?(null===e.left?r=e.right:(r=o(t,e.left,n)).right=e.right,this._size--,r):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=o(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return e;e=r<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=o(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var n=this._root,r=[],i=!1;!i;)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),t.call(e,n),n=n.right):i=!0;return this},t.prototype.range=function(t,e,n,r){for(var i=[],o=this._comparator,a=this._root;0!==i.length||a;)if(a)i.push(a),a=a.left;else{if(o((a=i.pop()).key,e)>0)break;if(o(a.key,t)>=0&&n.call(r,a))return this;a=a.right}return this},t.prototype.keys=function(){var t=[];return this.forEach((function(e){var n=e.key;return t.push(n)})),t},t.prototype.values=function(){var t=[];return this.forEach((function(e){var n=e.data;return t.push(n)})),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,n=!1,r=0,i=[];!n;)if(e)i.push(e),e=e.left;else if(i.length>0){if(e=i.pop(),r===t)return e;r++,e=e.right}else n=!0;return null},t.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?(n=e,e=e.left):e=e.right}return n},t.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?e=e.left:(n=e,e=e.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return d(this._root)},t.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var r=t.length,i=this._comparator;if(n&&m(t,e,0,r-1,i),null===this._root)this._root=h(t,e,0,r),this._size=r;else{var o=g(this.toList(),p(t,e),i);r=this._size+r,this._root=f({head:o},0,r)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return c(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},t.prototype.update=function(t,e,n){var r=this._comparator,i=s(t,this._root,r),o=i.left,c=i.right;r(t,e)<0?c=a(e,n,c,r):o=a(e,n,o,r),this._root=l(o,c,r)},t.prototype.split=function(t){return s(t,this._root,this._comparator)},t}();function h(t,e,n,i){var o=i-n;if(o>0){var a=n+Math.floor(o/2),s=t[a],l=e[a],c=new r(s,l);return c.left=h(t,e,n,a),c.right=h(t,e,a+1,i),c}return null}function p(t,e){for(var n=new r(null,null),i=n,o=0;o<t.length;o++)i=i.next=new r(t[o],e[o]);return i.next=null,n.next}function d(t){for(var e=t,n=[],i=!1,o=new r(null,null),a=o;!i;)e?(n.push(e),e=e.left):n.length>0?e=(e=a=a.next=n.pop()).right:i=!0;return a.next=null,o.next}function f(t,e,n){var r=n-e;if(r>0){var i=e+Math.floor(r/2),o=f(t,e,i),a=t.head;return a.left=o,t.head=t.head.next,a.right=f(t,i+1,n),a}return null}function g(t,e,n){for(var i=new r(null,null),o=i,a=t,s=e;null!==a&&null!==s;)n(a.key,s.key)<0?(o.next=a,a=a.next):(o.next=s,s=s.next),o=o.next;return null!==a?o.next=a:null!==s&&(o.next=s),i.next}function m(t,e,n,r,i){if(!(n>=r)){for(var o=t[n+r>>1],a=n-1,s=r+1;;){do{a++}while(i(t[a],o)<0);do{s--}while(i(t[s],o)>0);if(a>=s)break;var l=t[a];t[a]=t[s],t[s]=l,l=e[a],e[a]=e[s],e[s]=l}m(t,e,n,s,i),m(t,e,s+1,r,i)}}var y=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},v=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,r=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:r,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},x=Number.EPSILON;void 0===x&&(x=Math.pow(2,-52));var _=x*x,b=function(t,e){if(-x<t&&t<x&&-x<e&&e<x)return 0;var n=t-e;return n*n<_*t*e?0:t<e?-1:1},w=function(){function e(){t(this,e),this.reset()}return n(e,[{key:"reset",value:function(){this.xRounder=new S,this.yRounder=new S}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),e}(),S=function(){function e(){t(this,e),this.tree=new u,this.round(0)}return n(e,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===b(e.key,n.key))return this.tree.remove(t),n.key;var r=this.tree.next(e);return null!==r&&0===b(e.key,r.key)?(this.tree.remove(t),r.key):t}}]),e}(),C=new w,E=function(t,e){return t.x*e.y-t.y*e.x},k=function(t,e){return t.x*e.x+t.y*e.y},M=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y},o=E(r,i);return b(o,0)},T=function(t){return Math.sqrt(k(t,t))},I=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return E(i,r)/T(i)/T(r)},P=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return k(i,r)/T(i)/T(r)},O=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},A=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},D=function(t,e,n,r){if(0===e.x)return A(n,r,t.x);if(0===r.x)return A(t,e,n.x);if(0===e.y)return O(n,r,t.y);if(0===r.y)return O(t,e,n.y);var i=E(e,r);if(0==i)return null;var o={x:n.x-t.x,y:n.y-t.y},a=E(o,e)/i,s=E(o,r)/i;return{x:(t.x+s*e.x+(n.x+a*r.x))/2,y:(t.y+s*e.y+(n.y+a*r.y))/2}},R=function(){function e(n,r){t(this,e),void 0===n.events?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=r}return n(e,null,[{key:"compare",value:function(t,n){var r=e.comparePoints(t.point,n.point);return 0!==r?r:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:N.compare(t.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),n(e,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,r=e.length;n<r;n++){var i=e[n];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var r=e+1;r<t;r++){var i=this.point.events[r];void 0===i.consumedBy&&n.otherSE.point.events===i.otherSE.point.events&&n.segment.consume(i.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var r=this.point.events[e];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,r=function(r){var i=r.otherSE;n.set(r,{sine:I(e.point,t.point,i.point),cosine:P(e.point,t.point,i.point)})};return function(t,e){n.has(t)||r(t),n.has(e)||r(e);var i=n.get(t),o=i.sine,a=i.cosine,s=n.get(e),l=s.sine,c=s.cosine;return o>=0&&l>=0?a<c?1:a>c?-1:0:o<0&&l<0?a<c?-1:a>c?1:0:l<o?-1:l>o?1:0}}}]),e}(),L=0,N=function(){function e(n,r,i,o){t(this,e),this.id=++L,this.leftSE=n,n.segment=this,n.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=n,this.rings=i,this.windings=o}return n(e,null,[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,r=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o<n)return 1;if(i<r)return-1;var a=t.leftSE.point.y,s=e.leftSE.point.y,l=t.rightSE.point.y,c=e.rightSE.point.y;if(n<r){if(s<a&&s<l)return 1;if(s>a&&s>l)return-1;var u=t.comparePoint(e.leftSE.point);if(u<0)return 1;if(u>0)return-1;var h=e.comparePoint(t.rightSE.point);return 0!==h?h:-1}if(n>r){if(a<s&&a<c)return-1;if(a>s&&a>c)return 1;var p=e.comparePoint(t.leftSE.point);if(0!==p)return p;var d=t.comparePoint(e.rightSE.point);return d<0?1:d>0?-1:1}if(a<s)return-1;if(a>s)return 1;if(i<o){var f=e.comparePoint(t.rightSE.point);if(0!==f)return f}if(i>o){var g=t.comparePoint(e.rightSE.point);if(g<0)return 1;if(g>0)return-1}if(i!==o){var m=l-a,y=i-n,v=c-s,x=o-r;if(m>y&&v<x)return 1;if(m<y&&v>x)return-1}return i>o?1:i<o||l<c?-1:l>c?1:t.id<e.id?-1:t.id>e.id?1:0}}]),n(e,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;var i=(t.y-e.y)/r.y,o=e.x+i*r.x;if(t.x===o)return 0;var a=(t.x-e.x)/r.x,s=e.y+a*r.y;return t.y===s?0:t.y<s?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),r=v(e,n);if(null===r)return null;var i=this.leftSE.point,o=this.rightSE.point,a=t.leftSE.point,s=t.rightSE.point,l=y(e,a)&&0===this.comparePoint(a),c=y(n,i)&&0===t.comparePoint(i),u=y(e,s)&&0===this.comparePoint(s),h=y(n,o)&&0===t.comparePoint(o);if(c&&l)return h&&!u?o:!h&&u?s:null;if(c)return u&&i.x===s.x&&i.y===s.y?null:i;if(l)return h&&o.x===a.x&&o.y===a.y?null:a;if(h&&u)return null;if(h)return o;if(u)return s;var p=D(i,this.vector(),a,t.vector());return null===p?null:y(r,p)?C.round(p.x,p.y):null}},{key:"split",value:function(t){var n=[],r=void 0!==t.events,i=new R(t,!0),o=new R(t,!1),a=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var s=new e(i,a,this.rings.slice(),this.windings.slice());return R.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),R.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(t){for(var n=this,r=t;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=e.compare(n,r);if(0!==i){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var a=n;n=r,r=a}for(var s=0,l=r.rings.length;s<l;s++){var c=r.rings[s],u=r.windings[s],h=n.rings.indexOf(c);-1===h?(n.rings.push(c),n.windings.push(u)):n.windings[h]+=u}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var a=this.rings[i],s=this.windings[i],l=e.indexOf(a);-1===l?(e.push(a),n.push(s)):n[l]+=s}for(var c=[],u=[],h=0,p=e.length;h<p;h++)if(0!==n[h]){var d=e[h],f=d.poly;if(-1===u.indexOf(f))if(d.isExterior)c.push(f);else{-1===u.indexOf(f)&&u.push(f);var g=c.indexOf(d.poly);-1!==g&&c.splice(g,1)}}for(var m=0,y=c.length;m<y;m++){var v=c[m].multiPoly;-1===r.indexOf(v)&&r.push(v)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(W.type){case"union":var n=0===t.length,r=0===e.length;this._isInResult=n!==r;break;case"intersection":var i,o;t.length<e.length?(i=t.length,o=e.length):(i=e.length,o=t.length),this._isInResult=o===W.numMultiPolys&&i<o;break;case"xor":var a=Math.abs(t.length-e.length);this._isInResult=a%2===1;break;case"difference":var s=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=s(t)!==s(e);break;default:throw new Error("Unrecognized operation type found ".concat(W.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,n,r){var i,o,a,s=R.comparePoints(t,n);if(s<0)i=t,o=n,a=1;else{if(!(s>0))throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));i=n,o=t,a=-1}return new e(new R(i,!0),new R(o,!1),[r],[a])}}]),e}(),F=function(){function e(n,r,i){if(t(this,e),!Array.isArray(n)||0===n.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=i,this.segments=[],"number"!==typeof n[0][0]||"number"!==typeof n[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=C.round(n[0][0],n[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var a=o,s=1,l=n.length;s<l;s++){if("number"!==typeof n[s][0]||"number"!==typeof n[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var c=C.round(n[s][0],n[s][1]);c.x===a.x&&c.y===a.y||(this.segments.push(N.fromRing(a,c,this)),c.x<this.bbox.ll.x&&(this.bbox.ll.x=c.x),c.y<this.bbox.ll.y&&(this.bbox.ll.y=c.y),c.x>this.bbox.ur.x&&(this.bbox.ur.x=c.x),c.y>this.bbox.ur.y&&(this.bbox.ur.y=c.y),a=c)}o.x===a.x&&o.y===a.y||this.segments.push(N.fromRing(a,o,this))}return n(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}}]),e}(),z=function(){function e(n,r){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new F(n[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,o=n.length;i<o;i++){var a=new F(n[i],this,!1);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.interiorRings.push(a)}this.multiPoly=r}return n(e,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var r=this.interiorRings[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),e}(),B=function(){function e(n,r){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"===typeof n[0][0][0]&&(n=[n])}catch(s){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,o=n.length;i<o;i++){var a=new z(n[i],this);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.polys.push(a)}this.isSubject=r}return n(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var r=this.polys[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),e}(),$=function(){function e(n){t(this,e),this.events=n;for(var r=0,i=n.length;r<i;r++)n[r].segment.ringOut=this;this.poly=null}return n(e,null,[{key:"factory",value:function(t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];if(o.isInResult()&&!o.ringOut){for(var a=null,s=o.leftSE,l=o.rightSE,c=[s],u=s.point,h=[];a=s,s=l,c.push(s),s.point!==u;)for(;;){var p=s.getAvailableLinkedEvents();if(0===p.length){var d=c[0].point,f=c[c.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(d.x,",")+" ".concat(d.y,"]. Last matching segment found ends at")+" [".concat(f.x,", ").concat(f.y,"]."))}if(1===p.length){l=p[0].otherSE;break}for(var g=null,m=0,y=h.length;m<y;m++)if(h[m].point===s.point){g=m;break}if(null===g){h.push({index:c.length,point:s.point});var v=s.getLeftmostComparator(a);l=p.sort(v)[0].otherSE;break}var x=h.splice(g)[0],_=c.splice(x.index);_.unshift(_[0].otherSE),n.push(new e(_.reverse()))}n.push(new e(c))}}return n}}]),n(e,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,r=this.events.length-1;n<r;n++){var i=this.events[n].point,o=this.events[n+1].point;0!==M(i,t,o)&&(e.push(i),t=i)}if(1===e.length)return null;var a=e[0],s=e[1];0===M(a,t,s)&&e.shift(),e.push(e[0]);for(var l=this.isExteriorRing()?1:-1,c=this.isExteriorRing()?0:e.length-1,u=this.isExteriorRing()?e.length:-1,h=[],p=c;p!=u;p+=l)h.push([e[p].x,e[p].y]);return h}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var r=this.events[e];R.compare(t,r)>0&&(t=r)}for(var i=t.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),e}(),j=function(){function e(n){t(this,e),this.exteriorRing=n,n.poly=this,this.interiorRings=[]}return n(e,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,n=this.interiorRings.length;e<n;e++){var r=this.interiorRings[e].getGeom();null!==r&&t.push(r)}return t}}]),e}(),U=function(){function e(n){t(this,e),this.rings=n,this.polys=this._composePolys(n)}return n(e,[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var r=this.polys[e].getGeom();null!==r&&t.push(r)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(!i.poly)if(i.isExteriorRing())e.push(new j(i));else{var o=i.enclosingRing();o.poly||e.push(new j(o)),o.poly.addInterior(i)}}return e}}]),e}(),V=function(){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N.compare;t(this,e),this.queue=n,this.tree=new u(r),this.segments=[]}return n(e,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var r=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!r)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var i=r,o=r,a=void 0,s=void 0;void 0===a;)null===(i=this.tree.prev(i))?a=null:void 0===i.key.consumedBy&&(a=i.key);for(;void 0===s;)null===(o=this.tree.next(o))?s=null:void 0===o.key.consumedBy&&(s=o.key);if(t.isLeft){var l=null;if(a){var c=a.getIntersection(e);if(null!==c&&(e.isAnEndpoint(c)||(l=c),!a.isAnEndpoint(c)))for(var u=this._splitSafely(a,c),h=0,p=u.length;h<p;h++)n.push(u[h])}var d=null;if(s){var f=s.getIntersection(e);if(null!==f&&(e.isAnEndpoint(f)||(d=f),!s.isAnEndpoint(f)))for(var g=this._splitSafely(s,f),m=0,y=g.length;m<y;m++)n.push(g[m])}if(null!==l||null!==d){var v=null;v=null===l?d:null===d||R.comparePoints(l,d)<=0?l:d,this.queue.remove(e.rightSE),n.push(e.rightSE);for(var x=e.split(v),_=0,b=x.length;_<b;_++)n.push(x[_])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=a)}else{if(a&&s){var w=a.getIntersection(s);if(null!==w){if(!a.isAnEndpoint(w))for(var S=this._splitSafely(a,w),C=0,E=S.length;C<E;C++)n.push(S[C]);if(!s.isAnEndpoint(w))for(var k=this._splitSafely(s,w),M=0,T=k.length;M<T;M++)n.push(k[M])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var r=t.split(e);return r.push(n),void 0===t.consumedBy&&this.tree.insert(t),r}}]),e}(),H="undefined"!==typeof process&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,G="undefined"!==typeof process&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,W=new(function(){function e(){t(this,e)}return n(e,[{key:"run",value:function(t,e,n){W.type=t,C.reset();for(var r=[new B(e,!0)],i=0,o=n.length;i<o;i++)r.push(new B(n[i],!1));if(W.numMultiPolys=r.length,"difference"===W.type)for(var a=r[0],s=1;s<r.length;)null!==v(r[s].bbox,a.bbox)?s++:r.splice(s,1);if("intersection"===W.type)for(var l=0,c=r.length;l<c;l++)for(var h=r[l],p=l+1,d=r.length;p<d;p++)if(null===v(h.bbox,r[p].bbox))return[];for(var f=new u(R.compare),g=0,m=r.length;g<m;g++)for(var y=r[g].getSweepEvents(),x=0,_=y.length;x<_;x++)if(f.insert(y[x]),f.size>H)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var b=new V(f),w=f.size,S=f.pop();S;){var E=S.key;if(f.size===w){var k=E.segment;throw new Error("Unable to pop() ".concat(E.isLeft?"left":"right"," SweepEvent ")+"[".concat(E.point.x,", ").concat(E.point.y,"] from segment #").concat(k.id," ")+"[".concat(k.leftSE.point.x,", ").concat(k.leftSE.point.y,"] -> ")+"[".concat(k.rightSE.point.x,", ").concat(k.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(f.size>H)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(b.segments.length>G)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var M=b.process(E),T=0,I=M.length;T<I;T++){var P=M[T];void 0===P.consumedBy&&f.insert(P)}w=f.size,S=f.pop()}C.reset();var O=$.factory(b.segments);return new U(O).getGeom()}}]),e}()),X=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return W.run("union",t,n)},q=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return W.run("intersection",t,n)},Y=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return W.run("xor",t,n)},Z=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return W.run("difference",t,n)};return{union:X,intersection:q,xor:Y,difference:Z}}()},888:function(t,e,n){"use strict";var r=n(9047);function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},2007:function(t,e,n){t.exports=n(888)()},9047:function(t){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},1977:function(t,e,n){"use strict";t.exports=i,t.exports.default=i;var r=n(5287);function i(t,e){if(!(this instanceof i))return new i(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function a(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,r,i){i||(i=m(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],l(i,t.leaf?r(o):o);return i}function l(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function c(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function g(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function m(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(t,e,n,i,o){for(var a,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=i||(a=e+Math.ceil((n-e)/i/2)*i,r(t,a,e,n,o),s.push(e,a,a,n))}i.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!g(t,e))return n;for(var i,o,a,s,l=[];e;){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],g(t,s=e.leaf?r(a):a)&&(e.leaf?n.push(a):f(t,s)?this._all(a,n):l.push(a));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!g(t,e))return!1;for(var r,i,o,a,s=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],g(t,a=e.leaf?n(o):o)){if(e.leaf||f(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=m([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,a,s=this.data,l=this.toBBox(t),c=[],u=[];s||c.length;){if(s||(s=c.pop(),r=c[c.length-1],n=u.pop(),a=!0),s.leaf&&-1!==(i=o(t,s.children,e)))return s.children.splice(i,1),c.push(s),this._condense(c),this;a||s.leaf||!f(s,l)?r?(n++,s=r.children[n],a=!1):s=null:(c.push(s),u.push(n),n=0,r=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:c,compareMinY:u,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return a(i=m(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=m([])).leaf=!1,i.height=r;var l,c,u,h,p=Math.ceil(o/s),d=p*Math.ceil(Math.sqrt(s));for(y(t,e,n,d,this.compareMinX),l=e;l<=n;l+=d)for(y(t,l,u=Math.min(l+d-1,n),p,this.compareMinY),c=l;c<=u;c+=p)h=Math.min(c+p-1,u),i.children.push(this._build(t,c,h,r-1));return a(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,a,s,l,c,u,p,d,f;r.push(e),!e.leaf&&r.length-1!==n;){for(u=p=1/0,i=0,o=e.children.length;i<o;i++)l=h(a=e.children[i]),d=t,f=a,(c=(Math.max(f.maxX,d.maxX)-Math.min(f.minX,d.minX))*(Math.max(f.maxY,d.maxY)-Math.min(f.minY,d.minY))-l)<p?(p=c,u=l<u?l:u,s=a):c===p&&l<u&&(u=l,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],a=this._chooseSubtree(i,this.data,e,o);for(a.children.push(t),l(a,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=m(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,a(n,this.toBBox),a(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=m([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,l,c,u,p;for(c=u=1/0,r=e;r<=n-e;r++)a=d(i=s(t,0,r,this.toBBox),o=s(t,r,n,this.toBBox)),l=h(i)+h(o),a<c?(c=a,p=r,u=l<u?l:u):a===c&&l<u&&(u=l,p=r);return p},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:c,i=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,c=s(t,0,e,a),u=s(t,n-e,n,a),h=p(c)+p(u);for(i=e;i<n-e;i++)o=t.children[i],l(c,t.leaf?a(o):o),h+=p(c);for(i=n-e-1;i>=e;i--)o=t.children[i],l(u,t.leaf?a(o):o),h+=p(u);return h},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)l(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():a(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},5287:function(t){t.exports=function(){"use strict";function t(t,n,i,o,a){e(t,n,i||0,o||t.length-1,a||r)}function e(t,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,l=r-i+1,c=Math.log(s),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(s-u)/s)*(l-s/2<0?-1:1);e(t,r,Math.max(i,Math.floor(r-l*u/s+h)),Math.min(o,Math.floor(r+(s-l)*u/s+h)),a)}var p=t[r],d=i,f=o;for(n(t,i,r),a(t[o],p)>0&&n(t,i,o);d<f;){for(n(t,d,f),d++,f--;a(t[d],p)<0;)d++;for(;a(t[f],p)>0;)f--}0===a(t[i],p)?n(t,i,f):n(t,++f,o),f<=r&&(i=f+1),r<=f&&(o=f-1)}}function n(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function r(t,e){return t<e?-1:t>e?1:0}return t}()},4501:function(t,e){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,x=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function b(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case u:case h:case o:case s:case a:case d:return t;default:switch(t=t&&t.$$typeof){case c:case p:case m:case g:case l:return t;default:return e}}case i:return e}}}function w(t){return b(t)===h}e.isFragment=function(t){return b(t)===o},e.isMemo=function(t){return b(t)===g}},3873:function(t,e,n){"use strict";t.exports=n(4501)},7673:function(t,e,n){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(1),i=n(2),o=n(3),a=r.forwardRef(((t,e)=>{let{accept:n=".csv, text/csv",cssClass:i="csv-reader-input",cssInputClass:a="csv-input",cssLabelClass:s="csv-label",fileEncoding:l="UTF-8",inputId:c="react-csv-reader-input",inputName:u="react-csv-reader-input",inputStyle:h={},label:p,onError:d=(()=>{}),onFileLoaded:f,parserOptions:g={},disabled:m=!1,strict:y=!1}=t;return r.createElement("div",{className:i},p&&r.createElement("label",{className:s,htmlFor:c},p),r.createElement("input",{className:a,type:"file",id:c,name:u,style:h,accept:n,onChange:t=>{let e=new FileReader;const r=t.target.files;if(r.length>0){const t={name:r[0].name,size:r[0].size,type:r[0].type};if(y&&n.indexOf(t.type)<=0)return void d(new Error(`[strict mode] Accept type not respected: got '${t.type}' but not in '${n}'`));e.onload=n=>{var i;const a=o.parse(e.result,Object.assign(g,{error:d,encoding:l}));f(null!==(i=null==a?void 0:a.data)&&void 0!==i?i:[],t,r[0])},e.readAsText(r[0],l)}},disabled:m,ref:e}))}));a.propTypes={accept:i.string,cssClass:i.string,cssInputClass:i.string,cssLabelClass:i.string,fileEncoding:i.string,inputId:i.string,inputName:i.string,inputStyle:i.object,label:i.oneOfType([i.string,i.element]),onError:i.func,onFileLoaded:i.func.isRequired,parserOptions:i.object,disabled:i.bool,strict:i.bool},e.default=a},function(t,e){t.exports=n(2791)},function(t,e){t.exports=n(2007)},function(t,e,n){var r,i;void 0===(i="function"==typeof(r=function t(){"use strict";var e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},n=!e.document&&!!e.postMessage,r=n&&/blob:/i.test((e.location||{}).protocol),i={},o=0,a={parse:function(n,r){var s=(r=r||{}).dynamicTyping||!1;if(b(s)&&(r.dynamicTypingFunction=s,s={}),r.dynamicTyping=s,r.transform=!!b(r.transform)&&r.transform,r.worker&&a.WORKERS_SUPPORTED){var l=function(){if(!a.WORKERS_SUPPORTED)return!1;var n,r,s=(n=e.URL||e.webkitURL||null,r=t.toString(),a.BLOB_URL||(a.BLOB_URL=n.createObjectURL(new Blob(["(",r,")();"],{type:"text/javascript"})))),l=new e.Worker(s);return l.onmessage=m,l.id=o++,i[l.id]=l}();return l.userStep=r.step,l.userChunk=r.chunk,l.userComplete=r.complete,l.userError=r.error,r.step=b(r.step),r.chunk=b(r.chunk),r.complete=b(r.complete),r.error=b(r.error),delete r.worker,void l.postMessage({input:n,config:r,workerId:l.id})}var d=null;return a.NODE_STREAM_INPUT,"string"==typeof n?d=r.download?new c(r):new h(r):!0===n.readable&&b(n.read)&&b(n.on)?d=new p(r):(e.File&&n instanceof File||n instanceof Object)&&(d=new u(r)),d.stream(n)},unparse:function(t,e){var n=!1,r=!0,i=",",o="\r\n",s='"',l=s+s,c=!1,u=null,h=!1;!function(){if("object"==typeof e){if("string"!=typeof e.delimiter||a.BAD_DELIMITERS.filter((function(t){return-1!==e.delimiter.indexOf(t)})).length||(i=e.delimiter),("boolean"==typeof e.quotes||"function"==typeof e.quotes||Array.isArray(e.quotes))&&(n=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(c=e.skipEmptyLines),"string"==typeof e.newline&&(o=e.newline),"string"==typeof e.quoteChar&&(s=e.quoteChar),"boolean"==typeof e.header&&(r=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");u=e.columns}void 0!==e.escapeChar&&(l=e.escapeChar+s),"boolean"==typeof e.escapeFormulae&&(h=e.escapeFormulae)}}();var p=new RegExp(f(s),"g");if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return g(null,t,c);if("object"==typeof t[0])return g(u||d(t[0]),t,c)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:d(t.data[0])),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),g(t.fields||[],t.data||[],c);throw new Error("Unable to serialize unrecognized input");function d(t){if("object"!=typeof t)return[];var e=[];for(var n in t)e.push(n);return e}function g(t,e,n){var a="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var s=Array.isArray(t)&&0<t.length,l=!Array.isArray(e[0]);if(s&&r){for(var c=0;c<t.length;c++)0<c&&(a+=i),a+=m(t[c],c);0<e.length&&(a+=o)}for(var u=0;u<e.length;u++){var h=s?t.length:e[u].length,p=!1,d=s?0===Object.keys(e[u]).length:0===e[u].length;if(n&&!s&&(p="greedy"===n?""===e[u].join("").trim():1===e[u].length&&0===e[u][0].length),"greedy"===n&&s){for(var f=[],g=0;g<h;g++){var y=l?t[g]:g;f.push(e[u][y])}p=""===f.join("").trim()}if(!p){for(var v=0;v<h;v++){0<v&&!d&&(a+=i);var x=s&&l?t[v]:v;a+=m(e[u][x],v)}u<e.length-1&&(!n||0<h&&!d)&&(a+=o)}}return a}function m(t,e){if(null==t)return"";if(t.constructor===Date)return JSON.stringify(t).slice(1,25);!0===h&&"string"==typeof t&&null!==t.match(/^[=+\-@].*$/)&&(t="'"+t);var r=t.toString().replace(p,l);return"boolean"==typeof n&&n||"function"==typeof n&&n(t,e)||Array.isArray(n)&&n[e]||function(t,e){for(var n=0;n<e.length;n++)if(-1<t.indexOf(e[n]))return!0;return!1}(r,a.BAD_DELIMITERS)||-1<r.indexOf(i)||" "===r.charAt(0)||" "===r.charAt(r.length-1)?s+r+s:r}}};if(a.RECORD_SEP=String.fromCharCode(30),a.UNIT_SEP=String.fromCharCode(31),a.BYTE_ORDER_MARK="\ufeff",a.BAD_DELIMITERS=["\r","\n",'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!n&&!!e.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=g,a.ParserHandle=d,a.NetworkStreamer=c,a.FileStreamer=u,a.StringStreamer=h,a.ReadableStreamStreamer=p,e.jQuery){var s=e.jQuery;s.fn.parse=function(t){var n=t.config||{},r=[];return this.each((function(t){if("INPUT"!==s(this).prop("tagName").toUpperCase()||"file"!==s(this).attr("type").toLowerCase()||!e.FileReader||!this.files||0===this.files.length)return!0;for(var i=0;i<this.files.length;i++)r.push({file:this.files[i],inputElem:this,instanceConfig:s.extend({},n)})})),i(),this;function i(){if(0!==r.length){var e,n,i,l=r[0];if(b(t.before)){var c=t.before(l.file,l.inputElem);if("object"==typeof c){if("abort"===c.action)return e=l.file,n=l.inputElem,i=c.reason,void(b(t.error)&&t.error({name:"AbortError"},e,n,i));if("skip"===c.action)return void o();"object"==typeof c.config&&(l.instanceConfig=s.extend(l.instanceConfig,c.config))}else if("skip"===c)return void o()}var u=l.instanceConfig.complete;l.instanceConfig.complete=function(t){b(u)&&u(t,l.file,l.inputElem),o()},a.parse(l.file,l.instanceConfig)}else b(t.complete)&&t.complete()}function o(){r.splice(0,1),i()}}}function l(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=x(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new d(e),(this._handle.streamer=this)._config=e}.call(this,t),this.parseChunk=function(t,n){if(this.isFirstChunk&&b(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(t);void 0!==i&&(t=i)}this.isFirstChunk=!1,this._halted=!1;var o=this._partialLine+t;this._partialLine="";var s=this._handle.parse(o,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var l=s.meta.cursor;this._finished||(this._partialLine=o.substring(l-this._baseIndex),this._baseIndex=l),s&&s.data&&(this._rowCount+=s.data.length);var c=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(r)e.postMessage({results:s,workerId:a.WORKER_ID,finished:c});else if(b(this._config.chunk)&&!n){if(this._config.chunk(s,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);s=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(s.data),this._completeResults.errors=this._completeResults.errors.concat(s.errors),this._completeResults.meta=s.meta),this._completed||!c||!b(this._config.complete)||s&&s.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),c||s&&s.meta.paused||this._nextChunk(),s}this._halted=!0},this._sendError=function(t){b(this._config.error)?this._config.error(t):r&&this._config.error&&e.postMessage({workerId:a.WORKER_ID,error:t,finished:!1})}}function c(t){var e;(t=t||{}).chunkSize||(t.chunkSize=a.RemoteChunkSize),l.call(this,t),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),n||(e.onload=_(this._chunkLoaded,this),e.onerror=_(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var r in t)e.setRequestHeader(r,t[r])}if(this._config.chunkSize){var i=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+i)}try{e.send(this._config.downloadRequestBody)}catch(t){this._chunkError(t.message)}n&&0===e.status&&this._chunkError()}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(t){var e=t.getResponseHeader("Content-Range");return null===e?-1:parseInt(e.substring(e.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){var n=e.statusText||t;this._sendError(new Error(n))}}function u(t){var e,n;(t=t||{}).chunkSize||(t.chunkSize=a.LocalChunkSize),l.call(this,t);var r="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,n=t.slice||t.webkitSlice||t.mozSlice,r?((e=new FileReader).onload=_(this._chunkLoaded,this),e.onerror=_(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var i=Math.min(this._start+this._config.chunkSize,this._input.size);t=n.call(t,this._start,i)}var o=e.readAsText(t,this._config.encoding);r||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function h(t){var e;l.call(this,t=t||{}),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t,n=this._config.chunkSize;return n?(t=e.substring(0,n),e=e.substring(n)):(t=e,e=""),this._finished=!e,this.parseChunk(t)}}}function p(t){l.call(this,t=t||{});var e=[],n=!0,r=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):n=!0},this._streamData=_((function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}}),this),this._streamError=_((function(t){this._streamCleanUp(),this._sendError(t)}),this),this._streamEnd=_((function(){this._streamCleanUp(),r=!0,this._streamData("")}),this),this._streamCleanUp=_((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function d(t){var e,n,r,i=Math.pow(2,53),o=-i,s=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)(e[-+]?\d+)?\s*$/,l=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,c=this,u=0,h=0,p=!1,d=!1,m=[],y={data:[],errors:[],meta:{}};if(b(t.step)){var v=t.step;t.step=function(e){if(y=e,S())w();else{if(w(),0===y.data.length)return;u+=e.data.length,t.preview&&u>t.preview?n.abort():(y.data=y.data[0],v(y,c))}}}function _(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function w(){if(y&&r&&(E("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),r=!1),t.skipEmptyLines)for(var e=0;e<y.data.length;e++)_(y.data[e])&&y.data.splice(e--,1);return S()&&function(){if(y)if(Array.isArray(y.data[0])){for(var e=0;S()&&e<y.data.length;e++)y.data[e].forEach(n);y.data.splice(0,1)}else y.data.forEach(n);function n(e,n){b(t.transformHeader)&&(e=t.transformHeader(e,n)),m.push(e)}}(),function(){if(!y||!t.header&&!t.dynamicTyping&&!t.transform)return y;function e(e,n){var r,i=t.header?{}:[];for(r=0;r<e.length;r++){var o=r,a=e[r];t.header&&(o=r>=m.length?"__parsed_extra":m[r]),t.transform&&(a=t.transform(a,o)),a=C(o,a),"__parsed_extra"===o?(i[o]=i[o]||[],i[o].push(a)):i[o]=a}return t.header&&(r>m.length?E("FieldMismatch","TooManyFields","Too many fields: expected "+m.length+" fields but parsed "+r,h+n):r<m.length&&E("FieldMismatch","TooFewFields","Too few fields: expected "+m.length+" fields but parsed "+r,h+n)),i}var n=1;return!y.data.length||Array.isArray(y.data[0])?(y.data=y.data.map(e),n=y.data.length):y.data=e(y.data,0),t.header&&y.meta&&(y.meta.fields=m),h+=n,y}()}function S(){return t.header&&0===m.length}function C(e,n){return r=e,t.dynamicTypingFunction&&void 0===t.dynamicTyping[r]&&(t.dynamicTyping[r]=t.dynamicTypingFunction(r)),!0===(t.dynamicTyping[r]||t.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(function(t){if(s.test(t)){var e=parseFloat(t);if(o<e&&e<i)return!0}return!1}(n)?parseFloat(n):l.test(n)?new Date(n):""===n?null:n):n;var r}function E(t,e,n,r){var i={type:t,code:e,message:n};void 0!==r&&(i.row=r),y.errors.push(i)}this.parse=function(i,o,s){var l=t.quoteChar||'"';if(t.newline||(t.newline=function(t,e){t=t.substring(0,1048576);var n=new RegExp(f(e)+"([^]*?)"+f(e),"gm"),r=(t=t.replace(n,"")).split("\r"),i=t.split("\n"),o=1<i.length&&i[0].length<r[0].length;if(1===r.length||o)return"\n";for(var a=0,s=0;s<r.length;s++)"\n"===r[s][0]&&a++;return a>=r.length/2?"\r\n":"\r"}(i,l)),r=!1,t.delimiter)b(t.delimiter)&&(t.delimiter=t.delimiter(i),y.meta.delimiter=t.delimiter);else{var c=function(e,n,r,i,o){var s,l,c,u;o=o||[",","\t","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var h=0;h<o.length;h++){var p=o[h],d=0,f=0,m=0;c=void 0;for(var y=new g({comments:i,delimiter:p,newline:n,preview:10}).parse(e),v=0;v<y.data.length;v++)if(r&&_(y.data[v]))m++;else{var x=y.data[v].length;f+=x,void 0!==c?0<x&&(d+=Math.abs(x-c),c=x):c=x}0<y.data.length&&(f/=y.data.length-m),(void 0===l||d<=l)&&(void 0===u||u<f)&&1.99<f&&(l=d,s=p,u=f)}return{successful:!!(t.delimiter=s),bestDelimiter:s}}(i,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);c.successful?t.delimiter=c.bestDelimiter:(r=!0,t.delimiter=a.DefaultDelimiter),y.meta.delimiter=t.delimiter}var u=x(t);return t.preview&&t.header&&u.preview++,e=i,n=new g(u),y=n.parse(e,o,s),w(),p?{meta:{paused:!0}}:y||{meta:{paused:!1}}},this.paused=function(){return p},this.pause=function(){p=!0,n.abort(),e=b(t.chunk)?"":e.substring(n.getCharIndex())},this.resume=function(){c.streamer._halted?(p=!1,c.streamer.parseChunk(e,!0)):setTimeout(c.resume,3)},this.aborted=function(){return d},this.abort=function(){d=!0,n.abort(),y.meta.aborted=!0,b(t.complete)&&t.complete(y),e=""}}function f(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function g(t){var e,n=(t=t||{}).delimiter,r=t.newline,i=t.comments,o=t.step,s=t.preview,l=t.fastMode,c=e=void 0===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(c=t.escapeChar),("string"!=typeof n||-1<a.BAD_DELIMITERS.indexOf(n))&&(n=","),i===n)throw new Error("Comment character same as delimiter");!0===i?i="#":("string"!=typeof i||-1<a.BAD_DELIMITERS.indexOf(i))&&(i=!1),"\n"!==r&&"\r"!==r&&"\r\n"!==r&&(r="\n");var u=0,h=!1;this.parse=function(t,a,p){if("string"!=typeof t)throw new Error("Input must be a string");var d=t.length,g=n.length,m=r.length,y=i.length,v=b(o),x=[],_=[],w=[],S=u=0;if(!t)return F();if(l||!1!==l&&-1===t.indexOf(e)){for(var C=t.split(r),E=0;E<C.length;E++){if(w=C[E],u+=w.length,E!==C.length-1)u+=r.length;else if(p)return F();if(!i||w.substring(0,y)!==i){if(v){if(x=[],D(w.split(n)),z(),h)return F()}else D(w.split(n));if(s&&s<=E)return x=x.slice(0,s),F(!0)}}return F()}for(var k=t.indexOf(n,u),M=t.indexOf(r,u),T=new RegExp(f(c)+f(e),"g"),I=t.indexOf(e,u);;)if(t[u]!==e)if(i&&0===w.length&&t.substring(u,u+y)===i){if(-1===M)return F();u=M+m,M=t.indexOf(r,u),k=t.indexOf(n,u)}else{if(-1!==k&&(k<M||-1===M)){if(!(k<I)){w.push(t.substring(u,k)),u=k+g,k=t.indexOf(n,u);continue}var P=B(k,I,M);if(P&&void 0!==P.nextDelim){k=P.nextDelim,I=P.quoteSearch,w.push(t.substring(u,k)),u=k+g,k=t.indexOf(n,u);continue}}if(-1===M)break;if(w.push(t.substring(u,M)),N(M+m),v&&(z(),h))return F();if(s&&x.length>=s)return F(!0)}else for(I=u,u++;;){if(-1===(I=t.indexOf(e,I+1)))return p||_.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:x.length,index:u}),L();if(I===d-1)return L(t.substring(u,I).replace(T,e));if(e!==c||t[I+1]!==c){if(e===c||0===I||t[I-1]!==c){-1!==k&&k<I+1&&(k=t.indexOf(n,I+1)),-1!==M&&M<I+1&&(M=t.indexOf(r,I+1));var O=R(-1===M?k:Math.min(k,M));if(t[I+1+O]===n){w.push(t.substring(u,I).replace(T,e)),t[u=I+1+O+g]!==e&&(I=t.indexOf(e,u)),k=t.indexOf(n,u),M=t.indexOf(r,u);break}var A=R(M);if(t.substring(I+1+A,I+1+A+m)===r){if(w.push(t.substring(u,I).replace(T,e)),N(I+1+A+m),k=t.indexOf(n,u),I=t.indexOf(e,u),v&&(z(),h))return F();if(s&&x.length>=s)return F(!0);break}_.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:x.length,index:u}),I++}}else I++}return L();function D(t){x.push(t),S=u}function R(e){var n=0;if(-1!==e){var r=t.substring(I+1,e);r&&""===r.trim()&&(n=r.length)}return n}function L(e){return p||(void 0===e&&(e=t.substring(u)),w.push(e),u=d,D(w),v&&z()),F()}function N(e){u=e,D(w),w=[],M=t.indexOf(r,u)}function F(t){return{data:x,errors:_,meta:{delimiter:n,linebreak:r,aborted:h,truncated:!!t,cursor:S+(a||0)}}}function z(){o(F()),x=[],_=[]}function B(r,i,o){var a={nextDelim:void 0,quoteSearch:void 0},s=t.indexOf(e,i+1);if(i<r&&r<s&&(s<o||-1===o)){var l=t.indexOf(n,s);if(-1===l)return a;s<l&&(s=t.indexOf(e,s+1)),a=B(l,s,o)}else a={nextDelim:r,quoteSearch:i};return a}},this.abort=function(){h=!0},this.getCharIndex=function(){return u}}function m(t){var e=t.data,n=i[e.workerId],r=!1;if(e.error)n.userError(e.error,e.file);else if(e.results&&e.results.data){var o={abort:function(){r=!0,y(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:v,resume:v};if(b(n.userStep)){for(var a=0;a<e.results.data.length&&(n.userStep({data:e.results.data[a],errors:e.results.errors,meta:e.results.meta},o),!r);a++);delete e.results}else b(n.userChunk)&&(n.userChunk(e.results,o,e.file),delete e.results)}e.finished&&!r&&y(e.workerId,e.results)}function y(t,e){var n=i[t];b(n.userComplete)&&n.userComplete(e),n.terminate(),delete i[t]}function v(){throw new Error("Not implemented.")}function x(t){if("object"!=typeof t||null===t)return t;var e=Array.isArray(t)?[]:{};for(var n in t)e[n]=x(t[n]);return e}function _(t,e){return function(){t.apply(e,arguments)}}function b(t){return"function"==typeof t}return r&&(e.onmessage=function(t){var n=t.data;if(void 0===a.WORKER_ID&&n&&(a.WORKER_ID=n.workerId),"string"==typeof n.input)e.postMessage({workerId:a.WORKER_ID,results:a.parse(n.input,n.config),finished:!0});else if(e.File&&n.input instanceof File||n.input instanceof Object){var r=a.parse(n.input,n.config);r&&e.postMessage({workerId:a.WORKER_ID,results:r,finished:!0})}}),(c.prototype=Object.create(l.prototype)).constructor=c,(u.prototype=Object.create(l.prototype)).constructor=u,(h.prototype=Object.create(h.prototype)).constructor=h,(p.prototype=Object.create(l.prototype)).constructor=p,a})?r.apply(e,[]):r)||(t.exports=i)}])},4463:function(t,e,n){"use strict";var r=n(2791),i=n(5296);function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(t,e){c(t,e),c(t+"Capture",e)}function c(t,e){for(s[t]=e,t=0;t<e.length;t++)a.add(e[t])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},f={};function g(t,e,n,r,i,o,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){m[t]=new g(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];m[e]=new g(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){m[t]=new g(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){m[t]=new g(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){m[t]=new g(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){m[t]=new g(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){m[t]=new g(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){m[t]=new g(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){m[t]=new g(t,5,!1,t.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(t){return t[1].toUpperCase()}function x(t,e,n,r){var i=m.hasOwnProperty(e)?m[e]:null;(null!==i?0!==i.type:r||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!h.call(f,t)||!h.call(d,t)&&(p.test(t)?f[t]=!0:(d[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(y,v);m[e]=new g(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(y,v);m[e]=new g(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(y,v);m[e]=new g(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),M=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function L(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=R&&t[R]||t["@@iterator"])?t:null}var N,F=Object.assign;function z(t){if(void 0===N)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);N=e&&e[1]||""}return"\n"+N+t}var B=!1;function $(t,e){if(!t||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=a&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?z(t):""}function j(t){switch(t.tag){case 5:return z(t.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return t=$(t.type,!1);case 11:return t=$(t.type.render,!1);case 1:return t=$(t.type,!0);default:return""}}function U(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case S:return"Fragment";case w:return"Portal";case E:return"Profiler";case C:return"StrictMode";case I:return"Suspense";case P:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case M:return(t.displayName||"Context")+".Consumer";case k:return(t._context.displayName||"Context")+".Provider";case T:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case O:return null!==(e=t.displayName||null)?e:U(t.type)||"Memo";case A:e=t._payload,t=t._init;try{return U(t(e))}catch(n){}}return null}function V(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(e);case 8:return e===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function H(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function G(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function W(t){t._valueTracker||(t._valueTracker=function(t){var e=G(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function X(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=G(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function q(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Y(t,e){var n=e.checked;return F({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function Z(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=H(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function K(t,e){null!=(e=e.checked)&&x(t,"checked",e,!1)}function J(t,e){K(t,e);var n=H(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,H(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Q(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&q(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+H(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function rt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(o(91));return F({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function it(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(o(92));if(et(n)){if(1<n.length)throw Error(o(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:H(n)}}function ot(t,e){var n=H(e.value),r=H(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function at(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function st(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?st(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ct,ut,ht=(ut=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ct=ct||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ct.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return ut(t,e)}))}:ut);function pt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var dt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ft=["Webkit","ms","Moz","O"];function gt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||dt.hasOwnProperty(t)&&dt[t]?(""+e).trim():e+"px"}function mt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=gt(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(dt).forEach((function(t){ft.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),dt[e]=dt[t]}))}));var yt=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vt(t,e){if(e){if(yt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(o(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(o(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(o(62))}}function xt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _t=null;function bt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var wt=null,St=null,Ct=null;function Et(t){if(t=xi(t)){if("function"!==typeof wt)throw Error(o(280));var e=t.stateNode;e&&(e=bi(e),wt(t.stateNode,t.type,e))}}function kt(t){St?Ct?Ct.push(t):Ct=[t]:St=t}function Mt(){if(St){var t=St,e=Ct;if(Ct=St=null,Et(t),e)for(t=0;t<e.length;t++)Et(e[t])}}function Tt(t,e){return t(e)}function It(){}var Pt=!1;function Ot(t,e,n){if(Pt)return t(e,n);Pt=!0;try{return Tt(t,e,n)}finally{Pt=!1,(null!==St||null!==Ct)&&(It(),Mt())}}function At(t,e){var n=t.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(o(231,e,typeof n));return n}var Dt=!1;if(u)try{var Rt={};Object.defineProperty(Rt,"passive",{get:function(){Dt=!0}}),window.addEventListener("test",Rt,Rt),window.removeEventListener("test",Rt,Rt)}catch(ut){Dt=!1}function Lt(t,e,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Nt=!1,Ft=null,zt=!1,Bt=null,$t={onError:function(t){Nt=!0,Ft=t}};function jt(t,e,n,r,i,o,a,s,l){Nt=!1,Ft=null,Lt.apply($t,arguments)}function Ut(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Vt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Ht(t){if(Ut(t)!==t)throw Error(o(188))}function Gt(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Ut(t)))throw Error(o(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Ht(i),t;if(a===r)return Ht(i),e;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?t:e}(t))?Wt(t):null}function Wt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=Wt(t);if(null!==e)return e;t=t.sibling}return null}var Xt=i.unstable_scheduleCallback,qt=i.unstable_cancelCallback,Yt=i.unstable_shouldYield,Zt=i.unstable_requestPaint,Kt=i.unstable_now,Jt=i.unstable_getCurrentPriorityLevel,Qt=i.unstable_ImmediatePriority,te=i.unstable_UserBlockingPriority,ee=i.unstable_NormalPriority,ne=i.unstable_LowPriority,re=i.unstable_IdlePriority,ie=null,oe=null;var ae=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(se(t)/le|0)|0},se=Math.log,le=Math.LN2;var ce=64,ue=4194304;function he(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function pe(t,e){var n=t.pendingLanes;if(0===n)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=he(s):0!==(o&=a)&&(r=he(o))}else 0!==(a=n&~i)?r=he(a):0!==o&&(r=he(o));if(0===r)return 0;if(0!==e&&e!==r&&0===(e&i)&&((i=r&-r)>=(o=e&-e)||16===i&&0!==(4194240&o)))return e;if(0!==(4&r)&&(r|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-ae(e)),r|=t[n],e&=~i;return r}function de(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function fe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function ge(){var t=ce;return 0===(4194240&(ce<<=1))&&(ce=64),t}function me(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ye(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-ae(e)]=n}function ve(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ae(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var xe=0;function _e(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var be,we,Se,Ce,Ee,ke=!1,Me=[],Te=null,Ie=null,Pe=null,Oe=new Map,Ae=new Map,De=[],Re="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Le(t,e){switch(t){case"focusin":case"focusout":Te=null;break;case"dragenter":case"dragleave":Ie=null;break;case"mouseover":case"mouseout":Pe=null;break;case"pointerover":case"pointerout":Oe.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ae.delete(e.pointerId)}}function Ne(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==e&&(null!==(e=xi(e))&&we(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function Fe(t){var e=vi(t.target);if(null!==e){var n=Ut(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Vt(n)))return t.blockedOn=e,void Ee(t.priority,(function(){Se(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function ze(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ye(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=xi(n))&&we(e),t.blockedOn=n,!1;var r=new(n=t.nativeEvent).constructor(n.type,n);_t=r,n.target.dispatchEvent(r),_t=null,e.shift()}return!0}function Be(t,e,n){ze(t)&&n.delete(e)}function $e(){ke=!1,null!==Te&&ze(Te)&&(Te=null),null!==Ie&&ze(Ie)&&(Ie=null),null!==Pe&&ze(Pe)&&(Pe=null),Oe.forEach(Be),Ae.forEach(Be)}function je(t,e){t.blockedOn===e&&(t.blockedOn=null,ke||(ke=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,$e)))}function Ue(t){function e(e){return je(e,t)}if(0<Me.length){je(Me[0],t);for(var n=1;n<Me.length;n++){var r=Me[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==Te&&je(Te,t),null!==Ie&&je(Ie,t),null!==Pe&&je(Pe,t),Oe.forEach(e),Ae.forEach(e),n=0;n<De.length;n++)(r=De[n]).blockedOn===t&&(r.blockedOn=null);for(;0<De.length&&null===(n=De[0]).blockedOn;)Fe(n),null===n.blockedOn&&De.shift()}var Ve=_.ReactCurrentBatchConfig,He=!0;function Ge(t,e,n,r){var i=xe,o=Ve.transition;Ve.transition=null;try{xe=1,Xe(t,e,n,r)}finally{xe=i,Ve.transition=o}}function We(t,e,n,r){var i=xe,o=Ve.transition;Ve.transition=null;try{xe=4,Xe(t,e,n,r)}finally{xe=i,Ve.transition=o}}function Xe(t,e,n,r){if(He){var i=Ye(t,e,n,r);if(null===i)Hr(t,e,r,qe,n),Le(t,r);else if(function(t,e,n,r,i){switch(e){case"focusin":return Te=Ne(Te,t,e,n,r,i),!0;case"dragenter":return Ie=Ne(Ie,t,e,n,r,i),!0;case"mouseover":return Pe=Ne(Pe,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Oe.set(o,Ne(Oe.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ae.set(o,Ne(Ae.get(o)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r))r.stopPropagation();else if(Le(t,r),4&e&&-1<Re.indexOf(t)){for(;null!==i;){var o=xi(i);if(null!==o&&be(o),null===(o=Ye(t,e,n,r))&&Hr(t,e,r,qe,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Hr(t,e,r,null,n)}}var qe=null;function Ye(t,e,n,r){if(qe=null,null!==(t=vi(t=bt(r))))if(null===(e=Ut(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Vt(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qe=t,null}function Ze(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jt()){case Qt:return 1;case te:return 4;case ee:case ne:return 16;case re:return 536870912;default:return 16}default:return 16}}var Ke=null,Je=null,Qe=null;function tn(){if(Qe)return Qe;var t,e,n=Je,r=n.length,i="value"in Ke?Ke.value:Ke.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return Qe=i.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function on(t){function e(e,n,r,i,o){for(var a in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),hn=F({},cn,{view:0,detail:0}),pn=on(hn),dn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(an=t.screenX-ln.screenX,sn=t.screenY-ln.screenY):sn=an=0,ln=t),an)},movementY:function(t){return"movementY"in t?t.movementY:sn}}),fn=on(dn),gn=on(F({},dn,{dataTransfer:0})),mn=on(F({},hn,{relatedTarget:0})),yn=on(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},cn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xn=on(vn),_n=on(F({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Sn[t])&&!!e[t]}function En(){return Cn}var kn=F({},hn,{key:function(t){if(t.key){var e=bn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?wn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Mn=on(kn),Tn=on(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=on(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Pn=on(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=F({},dn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),An=on(On),Dn=[9,13,27,32],Rn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Nn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!Rn||Ln&&8<Ln&&11>=Ln),zn=String.fromCharCode(32),Bn=!1;function $n(t,e){switch(t){case"keyup":return-1!==Dn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Un=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Vn[t.type]:"textarea"===e}function Gn(t,e,n,r){kt(r),0<(e=Wr(e,"onChange")).length&&(n=new un("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Wn=null,Xn=null;function qn(t){zr(t,0)}function Yn(t){if(X(_i(t)))return t}function Zn(t,e){if("change"===t)return e}var Kn=!1;if(u){var Jn;if(u){var Qn="oninput"in document;if(!Qn){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),Qn="function"===typeof tr.oninput}Jn=Qn}else Jn=!1;Kn=Jn&&(!document.documentMode||9<document.documentMode)}function er(){Wn&&(Wn.detachEvent("onpropertychange",nr),Xn=Wn=null)}function nr(t){if("value"===t.propertyName&&Yn(Xn)){var e=[];Gn(e,Xn,t,bt(t)),Ot(qn,e)}}function rr(t,e,n){"focusin"===t?(er(),Xn=n,(Wn=e).attachEvent("onpropertychange",nr)):"focusout"===t&&er()}function ir(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Yn(Xn)}function or(t,e){if("click"===t)return Yn(e)}function ar(t,e){if("input"===t||"change"===t)return Yn(e)}var sr="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function lr(t,e){if(sr(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(e,i)||!sr(t[i],e[i]))return!1}return!0}function cr(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ur(t,e){var n,r=cr(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=cr(r)}}function hr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function pr(){for(var t=window,e=q();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=q((t=e.contentWindow).document)}return e}function dr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function fr(t){var e=pr(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(e=r.start,void 0===(t=r.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var a=ur(n,r);i&&a&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&((e=e.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,vr=null,xr=!1;function _r(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==mr||mr!==q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Wr(yr,"onSelect")).length&&(e=new un("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=mr)))}function br(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var wr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},Sr={},Cr={};function Er(t){if(Sr[t])return Sr[t];if(!wr[t])return t;var e,n=wr[t];for(e in n)if(n.hasOwnProperty(e)&&e in Cr)return Sr[t]=n[e];return t}u&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var kr=Er("animationend"),Mr=Er("animationiteration"),Tr=Er("animationstart"),Ir=Er("transitionend"),Pr=new Map,Or="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(t,e){Pr.set(t,e),l(e,[t])}for(var Dr=0;Dr<Or.length;Dr++){var Rr=Or[Dr];Ar(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Ar(kr,"onAnimationEnd"),Ar(Mr,"onAnimationIteration"),Ar(Tr,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,i,a,s,l,c){if(jt.apply(this,arguments),Nt){if(!Nt)throw Error(o(198));var u=Ft;Nt=!1,Ft=null,zt||(zt=!0,Bt=u)}}(r,e,void 0,t),t.currentTarget=null}function zr(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break t;Fr(i,s,c),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break t;Fr(i,s,c),o=l}}}if(zt)throw t=Bt,zt=!1,Bt=null,t}function Br(t,e){var n=e[gi];void 0===n&&(n=e[gi]=new Set);var r=t+"__bubble";n.has(r)||(Vr(e,t,2,!1),n.add(r))}function $r(t,e,n){var r=0;e&&(r|=4),Vr(n,t,r,e)}var jr="_reactListening"+Math.random().toString(36).slice(2);function Ur(t){if(!t[jr]){t[jr]=!0,a.forEach((function(e){"selectionchange"!==e&&(Nr.has(e)||$r(e,!1,t),$r(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[jr]||(e[jr]=!0,$r("selectionchange",!1,e))}}function Vr(t,e,n,r){switch(Ze(e)){case 1:var i=Ge;break;case 4:i=We;break;default:i=Xe}n=i.bind(null,e,n,t),i=void 0,!Dt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Hr(t,e,n,r,i){var o=r;if(0===(1&e)&&0===(2&e)&&null!==r)t:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=vi(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue t}s=s.parentNode}}r=r.return}Ot((function(){var r=o,i=bt(n),a=[];t:{var s=Pr.get(t);if(void 0!==s){var l=un,c=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":l=Mn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case kr:case Mr:case Tr:l=yn;break;case Ir:l=Pn;break;case"scroll":l=pn;break;case"wheel":l=An;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=0!==(4&e),h=!u&&"scroll"===t,p=u?null!==s?s+"Capture":null:s;u=[];for(var d,f=r;null!==f;){var g=(d=f).stateNode;if(5===d.tag&&null!==g&&(d=g,null!==p&&(null!=(g=At(f,p))&&u.push(Gr(f,g,d)))),h)break;f=f.return}0<u.length&&(s=new l(s,c,null,n,i),a.push({event:s,listeners:u}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(s="mouseover"===t||"pointerover"===t)||n===_t||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[fi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=Ut(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,g="onMouseLeave",p="onMouseEnter",f="mouse","pointerout"!==t&&"pointerover"!==t||(u=Tn,g="onPointerLeave",p="onPointerEnter",f="pointer"),h=null==l?s:_i(l),d=null==c?s:_i(c),(s=new u(g,f+"leave",l,n,i)).target=h,s.relatedTarget=d,g=null,vi(i)===r&&((u=new u(p,f+"enter",c,n,i)).target=d,u.relatedTarget=h,g=u),h=g,l&&c)t:{for(p=c,f=0,d=u=l;d;d=Xr(d))f++;for(d=0,g=p;g;g=Xr(g))d++;for(;0<f-d;)u=Xr(u),f--;for(;0<d-f;)p=Xr(p),d--;for(;f--;){if(u===p||null!==p&&u===p.alternate)break t;u=Xr(u),p=Xr(p)}u=null}else u=null;null!==l&&qr(a,s,l,u,!1),null!==c&&null!==h&&qr(a,h,c,u,!0)}if("select"===(l=(s=r?_i(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=Zn;else if(Hn(s))if(Kn)m=ar;else{m=ir;var y=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=or);switch(m&&(m=m(t,r))?Gn(a,m,n,i):(y&&y(t,s,r),"focusout"===t&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&tt(s,"number",s.value)),y=r?_i(r):window,t){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,vr=null);break;case"focusout":vr=yr=mr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,_r(a,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":_r(a,n,i)}var v;if(Rn)t:{switch(t){case"compositionstart":var x="onCompositionStart";break t;case"compositionend":x="onCompositionEnd";break t;case"compositionupdate":x="onCompositionUpdate";break t}x=void 0}else Un?$n(t,n)&&(x="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(x="onCompositionStart");x&&(Fn&&"ko"!==n.locale&&(Un||"onCompositionStart"!==x?"onCompositionEnd"===x&&Un&&(v=tn()):(Je="value"in(Ke=i)?Ke.value:Ke.textContent,Un=!0)),0<(y=Wr(r,x)).length&&(x=new _n(x,t,null,n,i),a.push({event:x,listeners:y}),v?x.data=v:null!==(v=jn(n))&&(x.data=v))),(v=Nn?function(t,e){switch(t){case"compositionend":return jn(e);case"keypress":return 32!==e.which?null:(Bn=!0,zn);case"textInput":return(t=e.data)===zn&&Bn?null:t;default:return null}}(t,n):function(t,e){if(Un)return"compositionend"===t||!Rn&&$n(t,e)?(t=tn(),Qe=Je=Ke=null,Un=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}zr(a,e)}))}function Gr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wr(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=At(t,n))&&r.unshift(Gr(t,o,i)),null!=(o=At(t,e))&&r.push(Gr(t,o,i))),t=t.return}return r}function Xr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function qr(t,e,n,r,i){for(var o=e._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=At(n,o))&&a.unshift(Gr(n,l,s)):i||null!=(l=At(n,o))&&a.push(Gr(n,l,s))),n=n.return}0!==a.length&&t.push({event:e,listeners:a})}var Yr=/\r\n?/g,Zr=/\u0000|\uFFFD/g;function Kr(t){return("string"===typeof t?t:""+t).replace(Yr,"\n").replace(Zr,"")}function Jr(t,e,n){if(e=Kr(e),Kr(t)!==e&&n)throw Error(o(425))}function Qr(){}var ti=null,ei=null;function ni(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(t){return oi.resolve(null).then(t).catch(si)}:ri;function si(t){setTimeout((function(){throw t}))}function li(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return t.removeChild(i),void Ue(e);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ue(e)}function ci(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function ui(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var hi=Math.random().toString(36).slice(2),pi="__reactFiber$"+hi,di="__reactProps$"+hi,fi="__reactContainer$"+hi,gi="__reactEvents$"+hi,mi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(t){var e=t[pi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fi]||n[pi]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=ui(t);null!==t;){if(n=t[pi])return n;t=ui(t)}return e}n=(t=n).parentNode}return null}function xi(t){return!(t=t[pi]||t[fi])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function _i(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(o(33))}function bi(t){return t[di]||null}var wi=[],Si=-1;function Ci(t){return{current:t}}function Ei(t){0>Si||(t.current=wi[Si],wi[Si]=null,Si--)}function ki(t,e){Si++,wi[Si]=t.current,t.current=e}var Mi={},Ti=Ci(Mi),Ii=Ci(!1),Pi=Mi;function Oi(t,e){var n=t.type.contextTypes;if(!n)return Mi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Ai(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Di(){Ei(Ii),Ei(Ti)}function Ri(t,e,n){if(Ti.current!==Mi)throw Error(o(168));ki(Ti,e),ki(Ii,n)}function Li(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(o(108,V(t)||"Unknown",i));return F({},n,r)}function Ni(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mi,Pi=Ti.current,ki(Ti,t),ki(Ii,Ii.current),!0}function Fi(t,e,n){var r=t.stateNode;if(!r)throw Error(o(169));n?(t=Li(t,e,Pi),r.__reactInternalMemoizedMergedChildContext=t,Ei(Ii),Ei(Ti),ki(Ti,t)):Ei(Ii),ki(Ii,n)}var zi=null,Bi=!1,$i=!1;function ji(t){null===zi?zi=[t]:zi.push(t)}function Ui(){if(!$i&&null!==zi){$i=!0;var t=0,e=xe;try{var n=zi;for(xe=1;t<n.length;t++){var r=n[t];do{r=r(!0)}while(null!==r)}zi=null,Bi=!1}catch(i){throw null!==zi&&(zi=zi.slice(t+1)),Xt(Qt,Ui),i}finally{xe=e,$i=!1}}return null}var Vi=[],Hi=0,Gi=null,Wi=0,Xi=[],qi=0,Yi=null,Zi=1,Ki="";function Ji(t,e){Vi[Hi++]=Wi,Vi[Hi++]=Gi,Gi=t,Wi=e}function Qi(t,e,n){Xi[qi++]=Zi,Xi[qi++]=Ki,Xi[qi++]=Yi,Yi=t;var r=Zi;t=Ki;var i=32-ae(r)-1;r&=~(1<<i),n+=1;var o=32-ae(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Zi=1<<32-ae(e)+i|n<<i|r,Ki=o+t}else Zi=1<<o|n<<i|r,Ki=t}function to(t){null!==t.return&&(Ji(t,1),Qi(t,1,0))}function eo(t){for(;t===Gi;)Gi=Vi[--Hi],Vi[Hi]=null,Wi=Vi[--Hi],Vi[Hi]=null;for(;t===Yi;)Yi=Xi[--qi],Xi[qi]=null,Ki=Xi[--qi],Xi[qi]=null,Zi=Xi[--qi],Xi[qi]=null}var no=null,ro=null,io=!1,oo=null;function ao(t,e){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function so(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,no=t,ro=ci(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,no=t,ro=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==Yi?{id:Zi,overflow:Ki}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=e,n.return=t,t.child=n,no=t,ro=null,!0);default:return!1}}function lo(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function co(t){if(io){var e=ro;if(e){var n=e;if(!so(t,e)){if(lo(t))throw Error(o(418));e=ci(n.nextSibling);var r=no;e&&so(t,e)?ao(r,n):(t.flags=-4097&t.flags|2,io=!1,no=t)}}else{if(lo(t))throw Error(o(418));t.flags=-4097&t.flags|2,io=!1,no=t}}}function uo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;no=t}function ho(t){if(t!==no)return!1;if(!io)return uo(t),io=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!ni(t.type,t.memoizedProps)),e&&(e=ro)){if(lo(t))throw po(),Error(o(418));for(;e;)ao(t,e),e=ci(e.nextSibling)}if(uo(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(o(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){ro=ci(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}ro=null}}else ro=no?ci(t.stateNode.nextSibling):null;return!0}function po(){for(var t=ro;t;)t=ci(t.nextSibling)}function fo(){ro=no=null,io=!1}function go(t){null===oo?oo=[t]:oo.push(t)}var mo=_.ReactCurrentBatchConfig;function yo(t,e){if(t&&t.defaultProps){for(var n in e=F({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var vo=Ci(null),xo=null,_o=null,bo=null;function wo(){bo=_o=xo=null}function So(t){var e=vo.current;Ei(vo),t._currentValue=e}function Co(t,e,n){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==r&&(r.childLanes|=e)):null!==r&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Eo(t,e){xo=t,bo=_o=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(_s=!0),t.firstContext=null)}function ko(t){var e=t._currentValue;if(bo!==t)if(t={context:t,memoizedValue:e,next:null},null===_o){if(null===xo)throw Error(o(308));_o=t,xo.dependencies={lanes:0,firstContext:t}}else _o=_o.next=t;return e}var Mo=null;function To(t){null===Mo?Mo=[t]:Mo.push(t)}function Io(t,e,n,r){var i=e.interleaved;return null===i?(n.next=n,To(e)):(n.next=i.next,i.next=n),e.interleaved=n,Po(t,r)}function Po(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var Oo=!1;function Ao(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Do(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ro(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Lo(t,e,n){var r=t.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Il)){var i=r.pending;return null===i?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Po(t,n)}return null===(i=r.interleaved)?(e.next=e,To(r)):(e.next=i.next,i.next=e),r.interleaved=e,Po(t,n)}function No(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ve(t,n)}}function Fo(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=e:o=o.next=e}else i=o=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zo(t,e,n,r){var i=t.updateQueue;Oo=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=t.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==o){var h=i.baseState;for(a=0,u=c=l=null,s=o;;){var p=s.lane,d=s.eventTime;if((r&p)===p){null!==u&&(u=u.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});t:{var f=t,g=s;switch(p=e,d=n,g.tag){case 1:if("function"===typeof(f=g.payload)){h=f.call(d,h,p);break t}h=f;break t;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(p="function"===typeof(f=g.payload)?f.call(d,h,p):f)||void 0===p)break t;h=F({},h,p);break t;case 2:Oo=!0}}null!==s.callback&&0!==s.lane&&(t.flags|=64,null===(p=i.effects)?i.effects=[s]:p.push(s))}else d={eventTime:d,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=d,l=h):u=u.next=d,a|=p;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(p=s).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(e=i.shared.interleaved)){i=e;do{a|=i.lane,i=i.next}while(i!==e)}else null===o&&(i.shared.lanes=0);Fl|=a,t.lanes=a,t.memoizedState=h}}function Bo(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var $o=(new r.Component).refs;function jo(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:F({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var Uo={isMounted:function(t){return!!(t=t._reactInternals)&&Ut(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ec(),i=nc(t),o=Ro(r,i);o.payload=e,void 0!==n&&null!==n&&(o.callback=n),null!==(e=Lo(t,o,i))&&(rc(e,t,i,r),No(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ec(),i=nc(t),o=Ro(r,i);o.tag=1,o.payload=e,void 0!==n&&null!==n&&(o.callback=n),null!==(e=Lo(t,o,i))&&(rc(e,t,i,r),No(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ec(),r=nc(t),i=Ro(n,r);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),null!==(e=Lo(t,i,r))&&(rc(e,t,r,n),No(e,t,r))}};function Vo(t,e,n,r,i,o,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function Ho(t,e,n){var r=!1,i=Mi,o=e.contextType;return"object"===typeof o&&null!==o?o=ko(o):(i=Ai(e)?Pi:Ti.current,o=(r=null!==(r=e.contextTypes)&&void 0!==r)?Oi(t,i):Mi),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Uo,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Go(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Uo.enqueueReplaceState(e,e.state,null)}function Wo(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=$o,Ao(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=ko(o):(o=Ai(e)?Pi:Ti.current,i.context=Oi(t,o)),i.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(jo(t,e,o,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&Uo.enqueueReplaceState(i,i.state,null),zo(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308)}function Xo(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,t));var i=r,a=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===a?e.ref:(e=function(t){var e=i.refs;e===$o&&(e=i.refs={}),null===t?delete e[a]:e[a]=t},e._stringRef=a,e)}if("string"!==typeof t)throw Error(o(284));if(!n._owner)throw Error(o(290,t))}return t}function qo(t,e){throw t=Object.prototype.toString.call(e),Error(o(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Yo(t){return(0,t._init)(t._payload)}function Zo(t){function e(e,n){if(t){var r=e.deletions;null===r?(e.deletions=[n],e.flags|=16):r.push(n)}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Rc(t,e)).index=0,t.sibling=null,t}function a(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags|=2,n):r:(e.flags|=2,n):(e.flags|=1048576,n)}function s(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,r){return null===e||6!==e.tag?((e=zc(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function c(t,e,n,r){var o=n.type;return o===S?h(t,e,n.props.children,r,n.key):null!==e&&(e.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===A&&Yo(o)===e.type)?((r=i(e,n.props)).ref=Xo(t,e,n),r.return=t,r):((r=Lc(n.type,n.key,n.props,null,t.mode,r)).ref=Xo(t,e,n),r.return=t,r)}function u(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Bc(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,o){return null===e||7!==e.tag?((e=Nc(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function p(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=zc(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case b:return(n=Lc(e.type,e.key,e.props,null,t.mode,n)).ref=Xo(t,null,e),n.return=t,n;case w:return(e=Bc(e,t.mode,n)).return=t,e;case A:return p(t,(0,e._init)(e._payload),n)}if(et(e)||L(e))return(e=Nc(e,t.mode,n,null)).return=t,e;qo(t,e)}return null}function d(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(t,e,n,r):null;case w:return n.key===i?u(t,e,n,r):null;case A:return d(t,e,(i=n._init)(n._payload),r)}if(et(n)||L(n))return null!==i?null:h(t,e,n,r,null);qo(t,n)}return null}function f(t,e,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i);case w:return u(e,t=t.get(null===r.key?n:r.key)||null,r,i);case A:return f(t,e,n,(0,r._init)(r._payload),i)}if(et(r)||L(r))return h(e,t=t.get(n)||null,r,i,null);qo(e,r)}return null}function g(i,o,s,l){for(var c=null,u=null,h=o,g=o=0,m=null;null!==h&&g<s.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var y=d(i,h,s[g],l);if(null===y){null===h&&(h=m);break}t&&h&&null===y.alternate&&e(i,h),o=a(y,o,g),null===u?c=y:u.sibling=y,u=y,h=m}if(g===s.length)return n(i,h),io&&Ji(i,g),c;if(null===h){for(;g<s.length;g++)null!==(h=p(i,s[g],l))&&(o=a(h,o,g),null===u?c=h:u.sibling=h,u=h);return io&&Ji(i,g),c}for(h=r(i,h);g<s.length;g++)null!==(m=f(h,i,g,s[g],l))&&(t&&null!==m.alternate&&h.delete(null===m.key?g:m.key),o=a(m,o,g),null===u?c=m:u.sibling=m,u=m);return t&&h.forEach((function(t){return e(i,t)})),io&&Ji(i,g),c}function m(i,s,l,c){var u=L(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var h=u=null,g=s,m=s=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var x=d(i,g,v.value,c);if(null===x){null===g&&(g=y);break}t&&g&&null===x.alternate&&e(i,g),s=a(x,s,m),null===h?u=x:h.sibling=x,h=x,g=y}if(v.done)return n(i,g),io&&Ji(i,m),u;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=p(i,v.value,c))&&(s=a(v,s,m),null===h?u=v:h.sibling=v,h=v);return io&&Ji(i,m),u}for(g=r(i,g);!v.done;m++,v=l.next())null!==(v=f(g,i,m,v.value,c))&&(t&&null!==v.alternate&&g.delete(null===v.key?m:v.key),s=a(v,s,m),null===h?u=v:h.sibling=v,h=v);return t&&g.forEach((function(t){return e(i,t)})),io&&Ji(i,m),u}return function t(r,o,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case b:t:{for(var c=a.key,u=o;null!==u;){if(u.key===c){if((c=a.type)===S){if(7===u.tag){n(r,u.sibling),(o=i(u,a.props.children)).return=r,r=o;break t}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===A&&Yo(c)===u.type){n(r,u.sibling),(o=i(u,a.props)).ref=Xo(r,u,a),o.return=r,r=o;break t}n(r,u);break}e(r,u),u=u.sibling}a.type===S?((o=Nc(a.props.children,r.mode,l,a.key)).return=r,r=o):((l=Lc(a.type,a.key,a.props,null,r.mode,l)).ref=Xo(r,o,a),l.return=r,r=l)}return s(r);case w:t:{for(u=a.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break t}n(r,o);break}e(r,o),o=o.sibling}(o=Bc(a,r.mode,l)).return=r,r=o}return s(r);case A:return t(r,o,(u=a._init)(a._payload),l)}if(et(a))return g(r,o,a,l);if(L(a))return m(r,o,a,l);qo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=zc(a,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var Ko=Zo(!0),Jo=Zo(!1),Qo={},ta=Ci(Qo),ea=Ci(Qo),na=Ci(Qo);function ra(t){if(t===Qo)throw Error(o(174));return t}function ia(t,e){switch(ki(na,e),ki(ea,t),ki(ta,Qo),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Ei(ta),ki(ta,e)}function oa(){Ei(ta),Ei(ea),Ei(na)}function aa(t){ra(na.current);var e=ra(ta.current),n=lt(e,t.type);e!==n&&(ki(ea,t),ki(ta,n))}function sa(t){ea.current===t&&(Ei(ta),Ei(ea))}var la=Ci(0);function ca(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ua=[];function ha(){for(var t=0;t<ua.length;t++)ua[t]._workInProgressVersionPrimary=null;ua.length=0}var pa=_.ReactCurrentDispatcher,da=_.ReactCurrentBatchConfig,fa=0,ga=null,ma=null,ya=null,va=!1,xa=!1,_a=0,ba=0;function wa(){throw Error(o(321))}function Sa(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sr(t[n],e[n]))return!1;return!0}function Ca(t,e,n,r,i,a){if(fa=a,ga=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,pa.current=null===t||null===t.memoizedState?ss:ls,t=n(r,i),xa){a=0;do{if(xa=!1,_a=0,25<=a)throw Error(o(301));a+=1,ya=ma=null,e.updateQueue=null,pa.current=cs,t=n(r,i)}while(xa)}if(pa.current=as,e=null!==ma&&null!==ma.next,fa=0,ya=ma=ga=null,va=!1,e)throw Error(o(300));return t}function Ea(){var t=0!==_a;return _a=0,t}function ka(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ya?ga.memoizedState=ya=t:ya=ya.next=t,ya}function Ma(){if(null===ma){var t=ga.alternate;t=null!==t?t.memoizedState:null}else t=ma.next;var e=null===ya?ga.memoizedState:ya.next;if(null!==e)ya=e,ma=t;else{if(null===t)throw Error(o(310));t={memoizedState:(ma=t).memoizedState,baseState:ma.baseState,baseQueue:ma.baseQueue,queue:ma.queue,next:null},null===ya?ga.memoizedState=ya=t:ya=ya.next=t}return ya}function Ta(t,e){return"function"===typeof e?e(t):e}function Ia(t){var e=Ma(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=ma,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,c=null,u=a;do{var h=u.lane;if((fa&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var p={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=p,s=r):c=c.next=p,ga.lanes|=h,Fl|=h}u=u.next}while(null!==u&&u!==a);null===c?s=r:c.next=l,sr(r,e.memoizedState)||(_s=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=c,n.lastRenderedState=r}if(null!==(t=n.interleaved)){i=t;do{a=i.lane,ga.lanes|=a,Fl|=a,i=i.next}while(i!==t)}else null===i&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Pa(t){var e=Ma(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=t(a,s.action),s=s.next}while(s!==i);sr(a,e.memoizedState)||(_s=!0),e.memoizedState=a,null===e.baseQueue&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function Oa(){}function Aa(t,e){var n=ga,r=Ma(),i=e(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,_s=!0),r=r.queue,Ha(La.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||null!==ya&&1&ya.memoizedState.tag){if(n.flags|=2048,Ba(9,Ra.bind(null,n,r,i,e),void 0,null),null===Pl)throw Error(o(349));0!==(30&fa)||Da(n,e,i)}return i}function Da(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=ga.updateQueue)?(e={lastEffect:null,stores:null},ga.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Ra(t,e,n,r){e.value=n,e.getSnapshot=r,Na(e)&&Fa(t)}function La(t,e,n){return n((function(){Na(e)&&Fa(t)}))}function Na(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sr(t,n)}catch(r){return!0}}function Fa(t){var e=Po(t,1);null!==e&&rc(e,t,1,-1)}function za(t){var e=ka();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:t},e.queue=t,t=t.dispatch=ns.bind(null,ga,t),[e.memoizedState,t]}function Ba(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=ga.updateQueue)?(e={lastEffect:null,stores:null},ga.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function $a(){return Ma().memoizedState}function ja(t,e,n,r){var i=ka();ga.flags|=t,i.memoizedState=Ba(1|e,n,void 0,void 0===r?null:r)}function Ua(t,e,n,r){var i=Ma();r=void 0===r?null:r;var o=void 0;if(null!==ma){var a=ma.memoizedState;if(o=a.destroy,null!==r&&Sa(r,a.deps))return void(i.memoizedState=Ba(e,n,o,r))}ga.flags|=t,i.memoizedState=Ba(1|e,n,o,r)}function Va(t,e){return ja(8390656,8,t,e)}function Ha(t,e){return Ua(2048,8,t,e)}function Ga(t,e){return Ua(4,2,t,e)}function Wa(t,e){return Ua(4,4,t,e)}function Xa(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function qa(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Ua(4,4,Xa.bind(null,e,t),n)}function Ya(){}function Za(t,e){var n=Ma();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Sa(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ka(t,e){var n=Ma();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Sa(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ja(t,e,n){return 0===(21&fa)?(t.baseState&&(t.baseState=!1,_s=!0),t.memoizedState=n):(sr(n,e)||(n=ge(),ga.lanes|=n,Fl|=n,t.baseState=!0),e)}function Qa(t,e){var n=xe;xe=0!==n&&4>n?n:4,t(!0);var r=da.transition;da.transition={};try{t(!1),e()}finally{xe=n,da.transition=r}}function ts(){return Ma().memoizedState}function es(t,e,n){var r=nc(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(t))is(e,n);else if(null!==(n=Io(t,e,n,r))){rc(n,t,r,ec()),os(n,e,r)}}function ns(t,e,n){var r=nc(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(t))is(e,i);else{var o=t.alternate;if(0===t.lanes&&(null===o||0===o.lanes)&&null!==(o=e.lastRenderedReducer))try{var a=e.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var l=e.interleaved;return null===l?(i.next=i,To(e)):(i.next=l.next,l.next=i),void(e.interleaved=i)}}catch(c){}null!==(n=Io(t,e,i,r))&&(rc(n,t,r,i=ec()),os(n,e,r))}}function rs(t){var e=t.alternate;return t===ga||null!==e&&e===ga}function is(t,e){xa=va=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function os(t,e,n){if(0!==(4194240&n)){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ve(t,n)}}var as={readContext:ko,useCallback:wa,useContext:wa,useEffect:wa,useImperativeHandle:wa,useInsertionEffect:wa,useLayoutEffect:wa,useMemo:wa,useReducer:wa,useRef:wa,useState:wa,useDebugValue:wa,useDeferredValue:wa,useTransition:wa,useMutableSource:wa,useSyncExternalStore:wa,useId:wa,unstable_isNewReconciler:!1},ss={readContext:ko,useCallback:function(t,e){return ka().memoizedState=[t,void 0===e?null:e],t},useContext:ko,useEffect:Va,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,ja(4194308,4,Xa.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ja(4194308,4,t,e)},useInsertionEffect:function(t,e){return ja(4,2,t,e)},useMemo:function(t,e){var n=ka();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ka();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=es.bind(null,ga,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},ka().memoizedState=t},useState:za,useDebugValue:Ya,useDeferredValue:function(t){return ka().memoizedState=t},useTransition:function(){var t=za(!1),e=t[0];return t=Qa.bind(null,t[1]),ka().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ga,i=ka();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=e(),null===Pl)throw Error(o(349));0!==(30&fa)||Da(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,Va(La.bind(null,r,a,t),[t]),r.flags|=2048,Ba(9,Ra.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=ka(),e=Pl.identifierPrefix;if(io){var n=Ki;e=":"+e+"R"+(n=(Zi&~(1<<32-ae(Zi)-1)).toString(32)+n),0<(n=_a++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=ba++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ls={readContext:ko,useCallback:Za,useContext:ko,useEffect:Ha,useImperativeHandle:qa,useInsertionEffect:Ga,useLayoutEffect:Wa,useMemo:Ka,useReducer:Ia,useRef:$a,useState:function(){return Ia(Ta)},useDebugValue:Ya,useDeferredValue:function(t){return Ja(Ma(),ma.memoizedState,t)},useTransition:function(){return[Ia(Ta)[0],Ma().memoizedState]},useMutableSource:Oa,useSyncExternalStore:Aa,useId:ts,unstable_isNewReconciler:!1},cs={readContext:ko,useCallback:Za,useContext:ko,useEffect:Ha,useImperativeHandle:qa,useInsertionEffect:Ga,useLayoutEffect:Wa,useMemo:Ka,useReducer:Pa,useRef:$a,useState:function(){return Pa(Ta)},useDebugValue:Ya,useDeferredValue:function(t){var e=Ma();return null===ma?e.memoizedState=t:Ja(e,ma.memoizedState,t)},useTransition:function(){return[Pa(Ta)[0],Ma().memoizedState]},useMutableSource:Oa,useSyncExternalStore:Aa,useId:ts,unstable_isNewReconciler:!1};function us(t,e){try{var n="",r=e;do{n+=j(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:i,digest:null}}function hs(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function ps(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function fs(t,e,n){(n=Ro(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Gl||(Gl=!0,Wl=r),ps(0,e)},n}function gs(t,e,n){(n=Ro(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ps(0,e)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ps(0,e),"function"!==typeof r&&(null===Xl?Xl=new Set([this]):Xl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function ms(t,e,n){var r=t.pingCache;if(null===r){r=t.pingCache=new ds;var i=new Set;r.set(e,i)}else void 0===(i=r.get(e))&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=kc.bind(null,t,e,n),e.then(t,t))}function ys(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function vs(t,e,n,r,i){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=Ro(-1,1)).tag=2,Lo(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var xs=_.ReactCurrentOwner,_s=!1;function bs(t,e,n,r){e.child=null===t?Jo(e,null,n,r):Ko(e,t.child,n,r)}function ws(t,e,n,r,i){n=n.render;var o=e.ref;return Eo(e,i),r=Ca(t,e,n,r,o,i),n=Ea(),null===t||_s?(io&&n&&to(e),e.flags|=1,bs(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Gs(t,e,i))}function Ss(t,e,n,r,i){if(null===t){var o=n.type;return"function"!==typeof o||Dc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Lc(n.type,null,r,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,Cs(t,e,o,r,i))}if(o=t.child,0===(t.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&t.ref===e.ref)return Gs(t,e,i)}return e.flags|=1,(t=Rc(o,r)).ref=e.ref,t.return=e,e.child=t}function Cs(t,e,n,r,i){if(null!==t){var o=t.memoizedProps;if(lr(o,r)&&t.ref===e.ref){if(_s=!1,e.pendingProps=r=o,0===(t.lanes&i))return e.lanes=t.lanes,Gs(t,e,i);0!==(131072&t.flags)&&(_s=!0)}}return Ms(t,e,n,r,i)}function Es(t,e,n){var r=e.pendingProps,i=r.children,o=null!==t?t.memoizedState:null;if("hidden"===r.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Rl,Dl),Dl|=n;else{if(0===(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ki(Rl,Dl),Dl|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,ki(Rl,Dl),Dl|=r}else null!==o?(r=o.baseLanes|n,e.memoizedState=null):r=n,ki(Rl,Dl),Dl|=r;return bs(t,e,i,n),e.child}function ks(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ms(t,e,n,r,i){var o=Ai(n)?Pi:Ti.current;return o=Oi(e,o),Eo(e,i),n=Ca(t,e,n,r,o,i),r=Ea(),null===t||_s?(io&&r&&to(e),e.flags|=1,bs(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Gs(t,e,i))}function Ts(t,e,n,r,i){if(Ai(n)){var o=!0;Ni(e)}else o=!1;if(Eo(e,i),null===e.stateNode)Hs(t,e),Ho(e,n,r),Wo(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=ko(c):c=Oi(e,c=Ai(n)?Pi:Ti.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==c)&&Go(e,a,r,c),Oo=!1;var p=e.memoizedState;a.state=p,zo(e,r,a,i),l=e.memoizedState,s!==r||p!==l||Ii.current||Oo?("function"===typeof u&&(jo(e,n,u,r),l=e.memoizedState),(s=Oo||Vo(e,n,s,r,p,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.flags|=4194308)):("function"===typeof a.componentDidMount&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"===typeof a.componentDidMount&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Do(t,e),s=e.memoizedProps,c=e.type===e.elementType?s:yo(e.type,s),a.props=c,h=e.pendingProps,p=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=ko(l):l=Oi(e,l=Ai(n)?Pi:Ti.current);var d=n.getDerivedStateFromProps;(u="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||p!==l)&&Go(e,a,r,l),Oo=!1,p=e.memoizedState,a.state=p,zo(e,r,a,i);var f=e.memoizedState;s!==h||p!==f||Ii.current||Oo?("function"===typeof d&&(jo(e,n,d,r),f=e.memoizedState),(c=Oo||Vo(e,n,c,r,p,f,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof a.componentDidUpdate&&(e.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=f),a.props=r,a.state=f,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Is(t,e,n,r,o,i)}function Is(t,e,n,r,i,o){ks(t,e);var a=0!==(128&e.flags);if(!r&&!a)return i&&Fi(e,n,!1),Gs(t,e,o);r=e.stateNode,xs.current=e;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&a?(e.child=Ko(e,t.child,null,o),e.child=Ko(e,null,s,o)):bs(t,e,s,o),e.memoizedState=r.state,i&&Fi(e,n,!0),e.child}function Ps(t){var e=t.stateNode;e.pendingContext?Ri(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Ri(0,e.context,!1),ia(t,e.containerInfo)}function Os(t,e,n,r,i){return fo(),go(i),e.flags|=256,bs(t,e,n,r),e.child}var As,Ds,Rs,Ls,Ns={dehydrated:null,treeContext:null,retryLane:0};function Fs(t){return{baseLanes:t,cachePool:null,transitions:null}}function zs(t,e,n){var r,i=e.pendingProps,a=la.current,s=!1,l=0!==(128&e.flags);if((r=l)||(r=(null===t||null!==t.memoizedState)&&0!==(2&a)),r?(s=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(a|=1),ki(la,1&a),null===t)return co(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=i.children,t=i.fallback,s?(i=e.mode,s=e.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Fc(l,i,0,null),t=Nc(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Fs(n),e.memoizedState=Ns,t):Bs(e,l));if(null!==(a=t.memoizedState)&&null!==(r=a.dehydrated))return function(t,e,n,r,i,a,s){if(n)return 256&e.flags?(e.flags&=-257,$s(t,e,s,r=hs(Error(o(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(a=Nc(a,i,s,null)).flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,0!==(1&e.mode)&&Ko(e,t.child,null,s),e.child.memoizedState=Fs(s),e.memoizedState=Ns,a);if(0===(1&e.mode))return $s(t,e,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,$s(t,e,s,r=hs(a=Error(o(419)),r,void 0))}if(l=0!==(s&t.childLanes),_s||l){if(null!==(r=Pl)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Po(t,i),rc(r,t,i,-1))}return mc(),$s(t,e,s,r=hs(Error(o(421))))}return"$?"===i.data?(e.flags|=128,e.child=t.child,e=Tc.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,ro=ci(i.nextSibling),no=e,io=!0,oo=null,null!==t&&(Xi[qi++]=Zi,Xi[qi++]=Ki,Xi[qi++]=Yi,Zi=t.id,Ki=t.overflow,Yi=e),e=Bs(e,r.children),e.flags|=4096,e)}(t,e,l,i,r,a,n);if(s){s=i.fallback,l=e.mode,r=(a=t.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&e.child!==a?((i=e.child).childLanes=0,i.pendingProps=c,e.deletions=null):(i=Rc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Rc(r,s):(s=Nc(s,l,n,null)).flags|=2,s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,l=null===(l=t.child.memoizedState)?Fs(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~n,e.memoizedState=Ns,i}return t=(s=t.child).sibling,i=Rc(s,{mode:"visible",children:i.children}),0===(1&e.mode)&&(i.lanes=n),i.return=e,i.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Bs(t,e){return(e=Fc({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function $s(t,e,n,r){return null!==r&&go(r),Ko(e,t.child,null,n),(t=Bs(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function js(t,e,n){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),Co(t.return,e,n)}function Us(t,e,n,r,i){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Vs(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(bs(t,e,r.children,n),0!==(2&(r=la.current)))r=1&r|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&js(t,n,e);else if(19===t.tag)js(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ki(la,r),0===(1&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===ca(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Us(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===ca(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Us(e,!0,n,null,o);break;case"together":Us(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Hs(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Gs(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Fl|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(o(153));if(null!==e.child){for(n=Rc(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Rc(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Ws(t,e){if(!io)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Xs(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function qs(t,e,n){var r=e.pendingProps;switch(eo(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xs(e),null;case 1:case 17:return Ai(e.type)&&Di(),Xs(e),null;case 3:return r=e.stateNode,oa(),Ei(Ii),Ei(Ti),ha(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(ho(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==oo&&(sc(oo),oo=null))),Ds(t,e),Xs(e),null;case 5:sa(e);var i=ra(na.current);if(n=e.type,null!==t&&null!=e.stateNode)Rs(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(null===e.stateNode)throw Error(o(166));return Xs(e),null}if(t=ra(ta.current),ho(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[pi]=e,r[di]=a,t=0!==(1&e.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Br(Lr[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":Z(r,a),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Br("invalid",r);break;case"textarea":it(r,a),Br("invalid",r)}for(var l in vt(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,t),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,t),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Br("scroll",r)}switch(n){case"input":W(r),Q(r,a,!0);break;case"textarea":W(r),at(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Qr)}r=i,e.updateQueue=r,null!==r&&(e.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=st(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),"select"===n&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[pi]=e,t[di]=r,As(t,e,!1,!1),e.stateNode=t;t:{switch(l=xt(n,r),n){case"dialog":Br("cancel",t),Br("close",t),i=r;break;case"iframe":case"object":case"embed":Br("load",t),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Br(Lr[i],t);i=r;break;case"source":Br("error",t),i=r;break;case"img":case"image":case"link":Br("error",t),Br("load",t),i=r;break;case"details":Br("toggle",t),i=r;break;case"input":Z(t,r),i=Y(t,r),Br("invalid",t);break;case"option":default:i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Br("invalid",t);break;case"textarea":it(t,r),i=rt(t,r),Br("invalid",t)}for(a in vt(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?mt(t,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&ht(t,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&pt(t,u):"number"===typeof u&&pt(t,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Br("scroll",t):null!=u&&x(t,a,u,l))}switch(n){case"input":W(t),Q(t,r,!1);break;case"textarea":W(t),at(t);break;case"option":null!=r.value&&t.setAttribute("value",""+H(r.value));break;case"select":t.multiple=!!r.multiple,null!=(a=r.value)?nt(t,!!r.multiple,a,!1):null!=r.defaultValue&&nt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(t.onclick=Qr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Xs(e),null;case 6:if(t&&null!=e.stateNode)Ls(t,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(o(166));if(n=ra(na.current),ra(ta.current),ho(e)){if(r=e.stateNode,n=e.memoizedProps,r[pi]=e,(a=r.nodeValue!==n)&&null!==(t=no))switch(t.tag){case 3:Jr(r.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&t.mode))}a&&(e.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[pi]=e,e.stateNode=r}return Xs(e),null;case 13:if(Ei(la),r=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&e.mode)&&0===(128&e.flags))po(),fo(),e.flags|=98560,a=!1;else if(a=ho(e),null!==r&&null!==r.dehydrated){if(null===t){if(!a)throw Error(o(318));if(!(a=null!==(a=e.memoizedState)?a.dehydrated:null))throw Error(o(317));a[pi]=e}else fo(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Xs(e),a=!1}else null!==oo&&(sc(oo),oo=null),a=!0;if(!a)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((r=null!==r)!==(null!==t&&null!==t.memoizedState)&&r&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&la.current)?0===Ll&&(Ll=3):mc())),null!==e.updateQueue&&(e.flags|=4),Xs(e),null);case 4:return oa(),Ds(t,e),null===t&&Ur(e.stateNode.containerInfo),Xs(e),null;case 10:return So(e.type._context),Xs(e),null;case 19:if(Ei(la),null===(a=e.memoizedState))return Xs(e),null;if(r=0!==(128&e.flags),null===(l=a.rendering))if(r)Ws(a,!1);else{if(0!==Ll||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=ca(t))){for(e.flags|=128,Ws(a,!1),null!==(r=l.updateQueue)&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;null!==n;)t=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ki(la,1&la.current|2),e.child}t=t.sibling}null!==a.tail&&Kt()>Vl&&(e.flags|=128,r=!0,Ws(a,!1),e.lanes=4194304)}else{if(!r)if(null!==(t=ca(l))){if(e.flags|=128,r=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),Ws(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!io)return Xs(e),null}else 2*Kt()-a.renderingStartTime>Vl&&1073741824!==n&&(e.flags|=128,r=!0,Ws(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=a.last)?n.sibling=l:e.child=l,a.last=l)}return null!==a.tail?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Kt(),e.sibling=null,n=la.current,ki(la,r?1&n|2:1&n),e):(Xs(e),null);case 22:case 23:return pc(),r=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==r&&(e.flags|=8192),r&&0!==(1&e.mode)?0!==(1073741824&Dl)&&(Xs(e),6&e.subtreeFlags&&(e.flags|=8192)):Xs(e),null;case 24:case 25:return null}throw Error(o(156,e.tag))}function Ys(t,e){switch(eo(e),e.tag){case 1:return Ai(e.type)&&Di(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return oa(),Ei(Ii),Ei(Ti),ha(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return sa(e),null;case 13:if(Ei(la),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(o(340));fo()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Ei(la),null;case 4:return oa(),null;case 10:return So(e.type._context),null;case 22:case 23:return pc(),null;default:return null}}As=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ds=function(){},Rs=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ra(ta.current);var o,a=null;switch(n){case"input":i=Y(t,i),r=Y(t,r),a=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),a=[];break;case"textarea":i=rt(t,i),r=rt(t,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(t.onclick=Qr)}for(u in vt(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Br("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}},Ls=function(t,e,n,r){n!==r&&(e.flags|=4)};var Zs=!1,Ks=!1,Js="function"===typeof WeakSet?WeakSet:Set,Qs=null;function tl(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(t,e,r)}else n.current=null}function el(t,e,n){try{n()}catch(r){Ec(t,e,r)}}var nl=!1;function rl(t,e,n){var r=e.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(e,n,o)}i=i.next}while(i!==r)}}function il(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ol(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function al(t){var e=t.alternate;null!==e&&(t.alternate=null,al(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[pi],delete e[di],delete e[gi],delete e[mi],delete e[yi])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sl(t){return 5===t.tag||3===t.tag||4===t.tag}function ll(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||sl(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function cl(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=Qr));else if(4!==r&&null!==(t=t.child))for(cl(t,e,n),t=t.sibling;null!==t;)cl(t,e,n),t=t.sibling}function ul(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(ul(t,e,n),t=t.sibling;null!==t;)ul(t,e,n),t=t.sibling}var hl=null,pl=!1;function dl(t,e,n){for(n=n.child;null!==n;)fl(t,e,n),n=n.sibling}function fl(t,e,n){if(oe&&"function"===typeof oe.onCommitFiberUnmount)try{oe.onCommitFiberUnmount(ie,n)}catch(s){}switch(n.tag){case 5:Ks||tl(n,e);case 6:var r=hl,i=pl;hl=null,dl(t,e,n),pl=i,null!==(hl=r)&&(pl?(t=hl,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(pl?(t=hl,n=n.stateNode,8===t.nodeType?li(t.parentNode,n):1===t.nodeType&&li(t,n),Ue(t)):li(hl,n.stateNode));break;case 4:r=hl,i=pl,hl=n.stateNode.containerInfo,pl=!0,dl(t,e,n),hl=r,pl=i;break;case 0:case 11:case 14:case 15:if(!Ks&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&el(n,e,a),i=i.next}while(i!==r)}dl(t,e,n);break;case 1:if(!Ks&&(tl(n,e),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Ec(n,e,s)}dl(t,e,n);break;case 21:dl(t,e,n);break;case 22:1&n.mode?(Ks=(r=Ks)||null!==n.memoizedState,dl(t,e,n),Ks=r):dl(t,e,n);break;default:dl(t,e,n)}}function gl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Js),e.forEach((function(e){var r=Ic.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function ml(t,e){var n=e.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,s=e,l=s;t:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,pl=!1;break t;case 3:case 4:hl=l.stateNode.containerInfo,pl=!0;break t}l=l.return}if(null===hl)throw Error(o(160));fl(a,s,i),hl=null,pl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ec(i,e,u)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)yl(e,t),e=e.sibling}function yl(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ml(e,t),vl(t),4&r){try{rl(3,t,t.return),il(3,t)}catch(m){Ec(t,t.return,m)}try{rl(5,t,t.return)}catch(m){Ec(t,t.return,m)}}break;case 1:ml(e,t),vl(t),512&r&&null!==n&&tl(n,n.return);break;case 5:if(ml(e,t),vl(t),512&r&&null!==n&&tl(n,n.return),32&t.flags){var i=t.stateNode;try{pt(i,"")}catch(m){Ec(t,t.return,m)}}if(4&r&&null!=(i=t.stateNode)){var a=t.memoizedProps,s=null!==n?n.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&K(i,a),xt(l,s);var u=xt(l,a);for(s=0;s<c.length;s+=2){var h=c[s],p=c[s+1];"style"===h?mt(i,p):"dangerouslySetInnerHTML"===h?ht(i,p):"children"===h?pt(i,p):x(i,h,p,u)}switch(l){case"input":J(i,a);break;case"textarea":ot(i,a);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?nt(i,!!a.multiple,f,!1):d!==!!a.multiple&&(null!=a.defaultValue?nt(i,!!a.multiple,a.defaultValue,!0):nt(i,!!a.multiple,a.multiple?[]:"",!1))}i[di]=a}catch(m){Ec(t,t.return,m)}}break;case 6:if(ml(e,t),vl(t),4&r){if(null===t.stateNode)throw Error(o(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(m){Ec(t,t.return,m)}}break;case 3:if(ml(e,t),vl(t),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ue(e.containerInfo)}catch(m){Ec(t,t.return,m)}break;case 4:default:ml(e,t),vl(t);break;case 13:ml(e,t),vl(t),8192&(i=t.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Ul=Kt())),4&r&&gl(t);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&t.mode?(Ks=(u=Ks)||h,ml(e,t),Ks=u):ml(e,t),vl(t),8192&r){if(u=null!==t.memoizedState,(t.stateNode.isHidden=u)&&!h&&0!==(1&t.mode))for(Qs=t,h=t.child;null!==h;){for(p=Qs=h;null!==Qs;){switch(f=(d=Qs).child,d.tag){case 0:case 11:case 14:case 15:rl(4,d,d.return);break;case 1:tl(d,d.return);var g=d.stateNode;if("function"===typeof g.componentWillUnmount){r=d,n=d.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){Ec(r,n,m)}}break;case 5:tl(d,d.return);break;case 22:if(null!==d.memoizedState){wl(p);continue}}null!==f?(f.return=d,Qs=f):wl(p)}h=h.sibling}t:for(h=null,p=t;;){if(5===p.tag){if(null===h){h=p;try{i=p.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=p.stateNode,s=void 0!==(c=p.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=gt("display",s))}catch(m){Ec(t,t.return,m)}}}else if(6===p.tag){if(null===h)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(m){Ec(t,t.return,m)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===t)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===t)break t;for(;null===p.sibling;){if(null===p.return||p.return===t)break t;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:ml(e,t),vl(t),4&r&&gl(t);case 21:}}function vl(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(sl(n)){var r=n;break t}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(pt(i,""),r.flags&=-33),ul(t,ll(t),i);break;case 3:case 4:var a=r.stateNode.containerInfo;cl(t,ll(t),a);break;default:throw Error(o(161))}}catch(s){Ec(t,t.return,s)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function xl(t,e,n){Qs=t,_l(t,e,n)}function _l(t,e,n){for(var r=0!==(1&t.mode);null!==Qs;){var i=Qs,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Zs;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Ks;s=Zs;var c=Ks;if(Zs=a,(Ks=l)&&!c)for(Qs=i;null!==Qs;)l=(a=Qs).child,22===a.tag&&null!==a.memoizedState?Sl(i):null!==l?(l.return=a,Qs=l):Sl(i);for(;null!==o;)Qs=o,_l(o,e,n),o=o.sibling;Qs=i,Zs=s,Ks=c}bl(t)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Qs=o):bl(t)}}function bl(t){for(;null!==Qs;){var e=Qs;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Ks||il(5,e);break;case 1:var r=e.stateNode;if(4&e.flags&&!Ks)if(null===n)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:yo(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;null!==a&&Bo(e,a,r);break;case 3:var s=e.updateQueue;if(null!==s){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}Bo(e,s,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var u=e.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var p=h.dehydrated;null!==p&&Ue(p)}}}break;default:throw Error(o(163))}Ks||512&e.flags&&ol(e)}catch(d){Ec(e,e.return,d)}}if(e===t){Qs=null;break}if(null!==(n=e.sibling)){n.return=e.return,Qs=n;break}Qs=e.return}}function wl(t){for(;null!==Qs;){var e=Qs;if(e===t){Qs=null;break}var n=e.sibling;if(null!==n){n.return=e.return,Qs=n;break}Qs=e.return}}function Sl(t){for(;null!==Qs;){var e=Qs;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{il(4,e)}catch(l){Ec(e,n,l)}break;case 1:var r=e.stateNode;if("function"===typeof r.componentDidMount){var i=e.return;try{r.componentDidMount()}catch(l){Ec(e,i,l)}}var o=e.return;try{ol(e)}catch(l){Ec(e,o,l)}break;case 5:var a=e.return;try{ol(e)}catch(l){Ec(e,a,l)}}}catch(l){Ec(e,e.return,l)}if(e===t){Qs=null;break}var s=e.sibling;if(null!==s){s.return=e.return,Qs=s;break}Qs=e.return}}var Cl,El=Math.ceil,kl=_.ReactCurrentDispatcher,Ml=_.ReactCurrentOwner,Tl=_.ReactCurrentBatchConfig,Il=0,Pl=null,Ol=null,Al=0,Dl=0,Rl=Ci(0),Ll=0,Nl=null,Fl=0,zl=0,Bl=0,$l=null,jl=null,Ul=0,Vl=1/0,Hl=null,Gl=!1,Wl=null,Xl=null,ql=!1,Yl=null,Zl=0,Kl=0,Jl=null,Ql=-1,tc=0;function ec(){return 0!==(6&Il)?Kt():-1!==Ql?Ql:Ql=Kt()}function nc(t){return 0===(1&t.mode)?1:0!==(2&Il)&&0!==Al?Al&-Al:null!==mo.transition?(0===tc&&(tc=ge()),tc):0!==(t=xe)?t:t=void 0===(t=window.event)?16:Ze(t.type)}function rc(t,e,n,r){if(50<Kl)throw Kl=0,Jl=null,Error(o(185));ye(t,n,r),0!==(2&Il)&&t===Pl||(t===Pl&&(0===(2&Il)&&(zl|=n),4===Ll&&lc(t,Al)),ic(t,r),1===n&&0===Il&&0===(1&e.mode)&&(Vl=Kt()+500,Bi&&Ui()))}function ic(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-ae(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=de(s,e)):l<=e&&(t.expiredLanes|=s),o&=~s}}(t,e);var r=pe(t,t===Pl?Al:0);if(0===r)null!==n&&qt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(null!=n&&qt(n),1===e)0===t.tag?function(t){Bi=!0,ji(t)}(cc.bind(null,t)):ji(cc.bind(null,t)),ai((function(){0===(6&Il)&&Ui()})),n=null;else{switch(_e(r)){case 1:n=Qt;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=re}n=Pc(n,oc.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function oc(t,e){if(Ql=-1,tc=0,0!==(6&Il))throw Error(o(327));var n=t.callbackNode;if(Sc()&&t.callbackNode!==n)return null;var r=pe(t,t===Pl?Al:0);if(0===r)return null;if(0!==(30&r)||0!==(r&t.expiredLanes)||e)e=yc(t,r);else{e=r;var i=Il;Il|=2;var a=gc();for(Pl===t&&Al===e||(Hl=null,Vl=Kt()+500,dc(t,e));;)try{xc();break}catch(l){fc(t,l)}wo(),kl.current=a,Il=i,null!==Ol?e=0:(Pl=null,Al=0,e=Ll)}if(0!==e){if(2===e&&(0!==(i=fe(t))&&(r=i,e=ac(t,i))),1===e)throw n=Nl,dc(t,0),lc(t,r),ic(t,Kt()),n;if(6===e)lc(t,r);else{if(i=t.current.alternate,0===(30&r)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(i)&&(2===(e=yc(t,r))&&(0!==(a=fe(t))&&(r=a,e=ac(t,a))),1===e))throw n=Nl,dc(t,0),lc(t,r),ic(t,Kt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(o(345));case 2:case 5:wc(t,jl,Hl);break;case 3:if(lc(t,r),(130023424&r)===r&&10<(e=Ul+500-Kt())){if(0!==pe(t,0))break;if(((i=t.suspendedLanes)&r)!==r){ec(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ri(wc.bind(null,t,jl,Hl),e);break}wc(t,jl,Hl);break;case 4:if(lc(t,r),(4194240&r)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-ae(r);a=1<<s,(s=e[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Kt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){t.timeoutHandle=ri(wc.bind(null,t,jl,Hl),r);break}wc(t,jl,Hl);break;default:throw Error(o(329))}}}return ic(t,Kt()),t.callbackNode===n?oc.bind(null,t):null}function ac(t,e){var n=$l;return t.current.memoizedState.isDehydrated&&(dc(t,e).flags|=256),2!==(t=yc(t,e))&&(e=jl,jl=n,null!==e&&sc(e)),t}function sc(t){null===jl?jl=t:jl.push.apply(jl,t)}function lc(t,e){for(e&=~Bl,e&=~zl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ae(e),r=1<<n;t[n]=-1,e&=~r}}function cc(t){if(0!==(6&Il))throw Error(o(327));Sc();var e=pe(t,0);if(0===(1&e))return ic(t,Kt()),null;var n=yc(t,e);if(0!==t.tag&&2===n){var r=fe(t);0!==r&&(e=r,n=ac(t,r))}if(1===n)throw n=Nl,dc(t,0),lc(t,e),ic(t,Kt()),n;if(6===n)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wc(t,jl,Hl),ic(t,Kt()),null}function uc(t,e){var n=Il;Il|=1;try{return t(e)}finally{0===(Il=n)&&(Vl=Kt()+500,Bi&&Ui())}}function hc(t){null!==Yl&&0===Yl.tag&&0===(6&Il)&&Sc();var e=Il;Il|=1;var n=Tl.transition,r=xe;try{if(Tl.transition=null,xe=1,t)return t()}finally{xe=r,Tl.transition=n,0===(6&(Il=e))&&Ui()}}function pc(){Dl=Rl.current,Ei(Rl)}function dc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,ii(n)),null!==Ol)for(n=Ol.return;null!==n;){var r=n;switch(eo(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:oa(),Ei(Ii),Ei(Ti),ha();break;case 5:sa(r);break;case 4:oa();break;case 13:case 19:Ei(la);break;case 10:So(r.type._context);break;case 22:case 23:pc()}n=n.return}if(Pl=t,Ol=t=Rc(t.current,null),Al=Dl=e,Ll=0,Nl=null,Bl=zl=Fl=0,jl=$l=null,null!==Mo){for(e=0;e<Mo.length;e++)if(null!==(r=(n=Mo[e]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}Mo=null}return t}function fc(t,e){for(;;){var n=Ol;try{if(wo(),pa.current=as,va){for(var r=ga.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}va=!1}if(fa=0,ya=ma=ga=null,xa=!1,_a=0,Ml.current=null,null===n||null===n.return){Ll=1,Nl=e,Ol=null;break}t:{var a=t,s=n.return,l=n,c=e;if(e=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,p=h.tag;if(0===(1&h.mode)&&(0===p||11===p||15===p)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=ys(s);if(null!==f){f.flags&=-257,vs(f,s,l,0,e),1&f.mode&&ms(a,u,e),c=u;var g=(e=f).updateQueue;if(null===g){var m=new Set;m.add(c),e.updateQueue=m}else g.add(c);break t}if(0===(1&e)){ms(a,u,e),mc();break t}c=Error(o(426))}else if(io&&1&l.mode){var y=ys(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),vs(y,s,l,0,e),go(us(c,l));break t}}a=c=us(c,l),4!==Ll&&(Ll=2),null===$l?$l=[a]:$l.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e,Fo(a,fs(0,c,e));break t;case 1:l=c;var v=a.type,x=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Xl||!Xl.has(x)))){a.flags|=65536,e&=-e,a.lanes|=e,Fo(a,gs(a,l,e));break t}}a=a.return}while(null!==a)}bc(n)}catch(_){e=_,Ol===n&&null!==n&&(Ol=n=n.return);continue}break}}function gc(){var t=kl.current;return kl.current=as,null===t?as:t}function mc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Pl||0===(268435455&Fl)&&0===(268435455&zl)||lc(Pl,Al)}function yc(t,e){var n=Il;Il|=2;var r=gc();for(Pl===t&&Al===e||(Hl=null,dc(t,e));;)try{vc();break}catch(i){fc(t,i)}if(wo(),Il=n,kl.current=r,null!==Ol)throw Error(o(261));return Pl=null,Al=0,Ll}function vc(){for(;null!==Ol;)_c(Ol)}function xc(){for(;null!==Ol&&!Yt();)_c(Ol)}function _c(t){var e=Cl(t.alternate,t,Dl);t.memoizedProps=t.pendingProps,null===e?bc(t):Ol=e,Ml.current=null}function bc(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=qs(n,e,Dl)))return void(Ol=n)}else{if(null!==(n=Ys(n,e)))return n.flags&=32767,void(Ol=n);if(null===t)return Ll=6,void(Ol=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Ol=e);Ol=e=t}while(null!==e);0===Ll&&(Ll=5)}function wc(t,e,n){var r=xe,i=Tl.transition;try{Tl.transition=null,xe=1,function(t,e,n,r){do{Sc()}while(null!==Yl);if(0!==(6&Il))throw Error(o(327));n=t.finishedWork;var i=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ae(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}(t,a),t===Pl&&(Ol=Pl=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||ql||(ql=!0,Pc(ee,(function(){return Sc(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Tl.transition,Tl.transition=null;var s=xe;xe=1;var l=Il;Il|=4,Ml.current=null,function(t,e){if(ti=He,dr(t=pr())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var r=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(b){n=null;break t}var s=0,l=-1,c=-1,u=0,h=0,p=t,d=null;e:for(;;){for(var f;p!==n||0!==i&&3!==p.nodeType||(l=s+i),p!==a||0!==r&&3!==p.nodeType||(c=s+r),3===p.nodeType&&(s+=p.nodeValue.length),null!==(f=p.firstChild);)d=p,p=f;for(;;){if(p===t)break e;if(d===n&&++u===i&&(l=s),d===a&&++h===r&&(c=s),null!==(f=p.nextSibling))break;d=(p=d).parentNode}p=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ei={focusedElem:t,selectionRange:n},He=!1,Qs=e;null!==Qs;)if(t=(e=Qs).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,Qs=t;else for(;null!==Qs;){e=Qs;try{var g=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=e.stateNode,x=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:yo(e.type,m),y);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var _=e.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(o(163))}}catch(b){Ec(e,e.return,b)}if(null!==(t=e.sibling)){t.return=e.return,Qs=t;break}Qs=e.return}g=nl,nl=!1}(t,n),yl(n,t),fr(ei),He=!!ti,ei=ti=null,t.current=n,xl(n,t,i),Zt(),Il=l,xe=s,Tl.transition=a}else t.current=n;if(ql&&(ql=!1,Yl=t,Zl=i),a=t.pendingLanes,0===a&&(Xl=null),function(t){if(oe&&"function"===typeof oe.onCommitFiberRoot)try{oe.onCommitFiberRoot(ie,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),ic(t,Kt()),null!==e)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gl)throw Gl=!1,t=Wl,Wl=null,t;0!==(1&Zl)&&0!==t.tag&&Sc(),a=t.pendingLanes,0!==(1&a)?t===Jl?Kl++:(Kl=0,Jl=t):Kl=0,Ui()}(t,e,n,r)}finally{Tl.transition=i,xe=r}return null}function Sc(){if(null!==Yl){var t=_e(Zl),e=Tl.transition,n=xe;try{if(Tl.transition=null,xe=16>t?16:t,null===Yl)var r=!1;else{if(t=Yl,Yl=null,Zl=0,0!==(6&Il))throw Error(o(331));var i=Il;for(Il|=4,Qs=t.current;null!==Qs;){var a=Qs,s=a.child;if(0!==(16&Qs.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Qs=u;null!==Qs;){var h=Qs;switch(h.tag){case 0:case 11:case 15:rl(8,h,a)}var p=h.child;if(null!==p)p.return=h,Qs=p;else for(;null!==Qs;){var d=(h=Qs).sibling,f=h.return;if(al(h),h===u){Qs=null;break}if(null!==d){d.return=f,Qs=d;break}Qs=f}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Qs=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Qs=s;else t:for(;null!==Qs;){if(0!==(2048&(a=Qs).flags))switch(a.tag){case 0:case 11:case 15:rl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Qs=v;break t}Qs=a.return}}var x=t.current;for(Qs=x;null!==Qs;){var _=(s=Qs).child;if(0!==(2064&s.subtreeFlags)&&null!==_)_.return=s,Qs=_;else t:for(s=x;null!==Qs;){if(0!==(2048&(l=Qs).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(w){Ec(l,l.return,w)}if(l===s){Qs=null;break t}var b=l.sibling;if(null!==b){b.return=l.return,Qs=b;break t}Qs=l.return}}if(Il=i,Ui(),oe&&"function"===typeof oe.onPostCommitFiberRoot)try{oe.onPostCommitFiberRoot(ie,t)}catch(w){}r=!0}return r}finally{xe=n,Tl.transition=e}}return!1}function Cc(t,e,n){t=Lo(t,e=fs(0,e=us(n,e),1),1),e=ec(),null!==t&&(ye(t,1,e),ic(t,e))}function Ec(t,e,n){if(3===t.tag)Cc(t,t,n);else for(;null!==e;){if(3===e.tag){Cc(e,t,n);break}if(1===e.tag){var r=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xl||!Xl.has(r))){e=Lo(e,t=gs(e,t=us(n,t),1),1),t=ec(),null!==e&&(ye(e,1,t),ic(e,t));break}}e=e.return}}function kc(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=ec(),t.pingedLanes|=t.suspendedLanes&n,Pl===t&&(Al&n)===n&&(4===Ll||3===Ll&&(130023424&Al)===Al&&500>Kt()-Ul?dc(t,0):Bl|=n),ic(t,e)}function Mc(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ue,0===(130023424&(ue<<=1))&&(ue=4194304)));var n=ec();null!==(t=Po(t,e))&&(ye(t,e,n),ic(t,n))}function Tc(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Mc(t,n)}function Ic(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(e),Mc(t,n)}function Pc(t,e){return Xt(t,e)}function Oc(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(t,e,n,r){return new Oc(t,e,n,r)}function Dc(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Rc(t,e){var n=t.alternate;return null===n?((n=Ac(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Lc(t,e,n,r,i,a){var s=2;if(r=t,"function"===typeof t)Dc(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case S:return Nc(n.children,i,a,e);case C:s=8,i|=8;break;case E:return(t=Ac(12,n,e,2|i)).elementType=E,t.lanes=a,t;case I:return(t=Ac(13,n,e,i)).elementType=I,t.lanes=a,t;case P:return(t=Ac(19,n,e,i)).elementType=P,t.lanes=a,t;case D:return Fc(n,i,a,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case k:s=10;break t;case M:s=9;break t;case T:s=11;break t;case O:s=14;break t;case A:s=16,r=null;break t}throw Error(o(130,null==t?t:typeof t,""))}return(e=Ac(s,n,e,i)).elementType=t,e.type=r,e.lanes=a,e}function Nc(t,e,n,r){return(t=Ac(7,t,r,e)).lanes=n,t}function Fc(t,e,n,r){return(t=Ac(22,t,r,e)).elementType=D,t.lanes=n,t.stateNode={isHidden:!1},t}function zc(t,e,n){return(t=Ac(6,t,null,e)).lanes=n,t}function Bc(t,e,n){return(e=Ac(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $c(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=me(0),this.expirationTimes=me(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=me(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(t,e,n,r,i,o,a,s,l){return t=new $c(t,e,n,s,l),1===e?(e=1,!0===o&&(e|=8)):e=0,o=Ac(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ao(o),t}function Uc(t){if(!t)return Mi;t:{if(Ut(t=t._reactInternals)!==t||1!==t.tag)throw Error(o(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Ai(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(o(171))}if(1===t.tag){var n=t.type;if(Ai(n))return Li(t,n,e)}return e}function Vc(t,e,n,r,i,o,a,s,l){return(t=jc(n,r,!0,t,0,o,0,s,l)).context=Uc(null),n=t.current,(o=Ro(r=ec(),i=nc(n))).callback=void 0!==e&&null!==e?e:null,Lo(n,o,i),t.current.lanes=i,ye(t,i,r),ic(t,r),t}function Hc(t,e,n,r){var i=e.current,o=ec(),a=nc(i);return n=Uc(n),null===e.context?e.context=n:e.pendingContext=n,(e=Ro(o,a)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),null!==(t=Lo(i,e,a))&&(rc(t,i,a,o),No(t,i,a)),a}function Gc(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Wc(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Xc(t,e){Wc(t,e),(t=t.alternate)&&Wc(t,e)}Cl=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Ii.current)_s=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return _s=!1,function(t,e,n){switch(e.tag){case 3:Ps(e),fo();break;case 5:aa(e);break;case 1:Ai(e.type)&&Ni(e);break;case 4:ia(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ki(vo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=e.memoizedState))return null!==r.dehydrated?(ki(la,1&la.current),e.flags|=128,null):0!==(n&e.child.childLanes)?zs(t,e,n):(ki(la,1&la.current),null!==(t=Gs(t,e,n))?t.sibling:null);ki(la,1&la.current);break;case 19:if(r=0!==(n&e.childLanes),0!==(128&t.flags)){if(r)return Vs(t,e,n);e.flags|=128}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(la,la.current),r)break;return null;case 22:case 23:return e.lanes=0,Es(t,e,n)}return Gs(t,e,n)}(t,e,n);_s=0!==(131072&t.flags)}else _s=!1,io&&0!==(1048576&e.flags)&&Qi(e,Wi,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Hs(t,e),t=e.pendingProps;var i=Oi(e,Ti.current);Eo(e,n),i=Ca(null,e,r,t,i,n);var a=Ea();return e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ai(r)?(a=!0,Ni(e)):a=!1,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ao(e),i.updater=Uo,e.stateNode=i,i._reactInternals=e,Wo(e,r,t,n),e=Is(null,e,r,!0,a,n)):(e.tag=0,io&&a&&to(e),bs(null,e,i,n),e=e.child),e;case 16:r=e.elementType;t:{switch(Hs(t,e),t=e.pendingProps,r=(i=r._init)(r._payload),e.type=r,i=e.tag=function(t){if("function"===typeof t)return Dc(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===T)return 11;if(t===O)return 14}return 2}(r),t=yo(r,t),i){case 0:e=Ms(null,e,r,t,n);break t;case 1:e=Ts(null,e,r,t,n);break t;case 11:e=ws(null,e,r,t,n);break t;case 14:e=Ss(null,e,r,yo(r.type,t),n);break t}throw Error(o(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,Ms(t,e,r,i=e.elementType===r?i:yo(r,i),n);case 1:return r=e.type,i=e.pendingProps,Ts(t,e,r,i=e.elementType===r?i:yo(r,i),n);case 3:t:{if(Ps(e),null===t)throw Error(o(387));r=e.pendingProps,i=(a=e.memoizedState).element,Do(t,e),zo(e,r,null,n);var s=e.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,256&e.flags){e=Os(t,e,r,n,i=us(Error(o(423)),e));break t}if(r!==i){e=Os(t,e,r,n,i=us(Error(o(424)),e));break t}for(ro=ci(e.stateNode.containerInfo.firstChild),no=e,io=!0,oo=null,n=Jo(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),r===i){e=Gs(t,e,n);break t}bs(t,e,r,n)}e=e.child}return e;case 5:return aa(e),null===t&&co(e),r=e.type,i=e.pendingProps,a=null!==t?t.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(e.flags|=32),ks(t,e),bs(t,e,s,n),e.child;case 6:return null===t&&co(e),null;case 13:return zs(t,e,n);case 4:return ia(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=Ko(e,null,r,n):bs(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,ws(t,e,r,i=e.elementType===r?i:yo(r,i),n);case 7:return bs(t,e,e.pendingProps,n),e.child;case 8:case 12:return bs(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value,ki(vo,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!Ii.current){e=Gs(t,e,n);break t}}else for(null!==(a=e.child)&&(a.return=e);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Ro(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Co(a.return,n,e),l.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===e.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Co(s,n,e),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===e){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}bs(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Eo(e,n),r=r(i=ko(i)),e.flags|=1,bs(t,e,r,n),e.child;case 14:return i=yo(r=e.type,e.pendingProps),Ss(t,e,r,i=yo(r.type,i),n);case 15:return Cs(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yo(r,i),Hs(t,e),e.tag=1,Ai(r)?(t=!0,Ni(e)):t=!1,Eo(e,n),Ho(e,r,i),Wo(e,r,i,n),Is(null,e,r,!0,t,n);case 19:return Vs(t,e,n);case 22:return Es(t,e,n)}throw Error(o(156,e.tag))};var qc="function"===typeof reportError?reportError:function(t){console.error(t)};function Yc(t){this._internalRoot=t}function Zc(t){this._internalRoot=t}function Kc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Jc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Qc(){}function tu(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var t=Gc(a);s.call(t)}}Hc(e,a,t,i)}else a=function(t,e,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var t=Gc(a);o.call(t)}}var a=Vc(e,r,t,0,null,!1,0,"",Qc);return t._reactRootContainer=a,t[fi]=a.current,Ur(8===t.nodeType?t.parentNode:t),hc(),a}for(;i=t.lastChild;)t.removeChild(i);if("function"===typeof r){var s=r;r=function(){var t=Gc(l);s.call(t)}}var l=jc(t,0,!1,null,0,!1,0,"",Qc);return t._reactRootContainer=l,t[fi]=l.current,Ur(8===t.nodeType?t.parentNode:t),hc((function(){Hc(e,l,n,r)})),l}(n,e,t,i,r);return Gc(a)}Zc.prototype.render=Yc.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(o(409));Hc(t,e,null,null)},Zc.prototype.unmount=Yc.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;hc((function(){Hc(null,t,null,null)})),e[fi]=null}},Zc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ce();t={blockedOn:null,target:t,priority:e};for(var n=0;n<De.length&&0!==e&&e<De[n].priority;n++);De.splice(n,0,t),0===n&&Fe(t)}},be=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=he(e.pendingLanes);0!==n&&(ve(e,1|n),ic(e,Kt()),0===(6&Il)&&(Vl=Kt()+500,Ui()))}break;case 13:hc((function(){var e=Po(t,1);if(null!==e){var n=ec();rc(e,t,1,n)}})),Xc(t,1)}},we=function(t){if(13===t.tag){var e=Po(t,134217728);if(null!==e)rc(e,t,134217728,ec());Xc(t,134217728)}},Se=function(t){if(13===t.tag){var e=nc(t),n=Po(t,e);if(null!==n)rc(n,t,e,ec());Xc(t,e)}},Ce=function(){return xe},Ee=function(t,e){var n=xe;try{return xe=t,e()}finally{xe=n}},wt=function(t,e,n){switch(e){case"input":if(J(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=bi(r);if(!i)throw Error(o(90));X(r),J(r,i)}}}break;case"textarea":ot(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},Tt=uc,It=hc;var eu={usingClientEntryPoint:!1,Events:[xi,_i,bi,kt,Mt,uc]},nu={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Gt(t))?null:t.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{ie=iu.inject(ru),oe=iu}catch(ut){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kc(e))throw Error(o(200));return function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!Kc(t))throw Error(o(299));var n=!1,r="",i=qc;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(r=e.identifierPrefix),void 0!==e.onRecoverableError&&(i=e.onRecoverableError)),e=jc(t,1,!1,null,0,n,0,r,i),t[fi]=e.current,Ur(8===t.nodeType?t.parentNode:t),new Yc(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(o(188));throw t=Object.keys(t).join(","),Error(o(268,t))}return t=null===(t=Gt(e))?null:t.stateNode},e.flushSync=function(t){return hc(t)},e.hydrate=function(t,e,n){if(!Jc(e))throw Error(o(200));return tu(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Kc(t))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),e=Vc(e,null,t,1,null!=n?n:null,i,0,a,s),t[fi]=e.current,Ur(t),r)for(t=0;t<r.length;t++)i=(i=(n=r[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Zc(e)},e.render=function(t,e,n){if(!Jc(e))throw Error(o(200));return tu(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Jc(t))throw Error(o(40));return!!t._reactRootContainer&&(hc((function(){tu(null,null,t,!1,(function(){t._reactRootContainer=null,t[fi]=null}))})),!0)},e.unstable_batchedUpdates=uc,e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Jc(n))throw Error(o(200));if(null==t||void 0===t._reactInternals)throw Error(o(38));return tu(t,e,n,!1,r)},e.version="18.2.0-next-9e3b772b8-20220608"},1250:function(t,e,n){"use strict";var r=n(4164);e.createRoot=r.createRoot,e.hydrateRoot=r.hydrateRoot},4164:function(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(4463)},37:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return h.default}}),e.default=void 0;var i=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!==typeof t)return{default:t};var n=g(e);if(n&&n.has(t))return n.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=t[a]}i.default=t,n&&n.set(t,i);return i}(n(2791)),o=f(n(2007)),a=f(n(4164)),s=f(n(8182)),l=n(2280),c=n(580),u=n(2693),h=f(n(8091)),p=f(n(1655)),d=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function f(t){return t&&t.__esModule?t:{default:t}}function g(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(g=function(t){return t?n:e})(t)}function m(){return m=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m.apply(this,arguments)}function y(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){M(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(t,e){return S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},S(t,e)}function C(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=k(t);if(e){var o=k(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return E(t)}(this,n)}}function E(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k(t){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},k(t)}function M(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e)}(u,t);var e,n,r,o=C(u);function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),M(E(e=o.call(this,t)),"onDragStart",(function(t,n){if((0,p.default)("Draggable: onDragStart: %j",n),!1===e.props.onStart(t,(0,c.createDraggableData)(E(e),n)))return!1;e.setState({dragging:!0,dragged:!0})})),M(E(e),"onDrag",(function(t,n){if(!e.state.dragging)return!1;(0,p.default)("Draggable: onDrag: %j",n);var r=(0,c.createDraggableData)(E(e),n),i={x:r.x,y:r.y};if(e.props.bounds){var o=i.x,a=i.y;i.x+=e.state.slackX,i.y+=e.state.slackY;var s=_((0,c.getBoundPosition)(E(e),i.x,i.y),2),l=s[0],u=s[1];i.x=l,i.y=u,i.slackX=e.state.slackX+(o-i.x),i.slackY=e.state.slackY+(a-i.y),r.x=i.x,r.y=i.y,r.deltaX=i.x-e.state.x,r.deltaY=i.y-e.state.y}if(!1===e.props.onDrag(t,r))return!1;e.setState(i)})),M(E(e),"onDragStop",(function(t,n){if(!e.state.dragging)return!1;if(!1===e.props.onStop(t,(0,c.createDraggableData)(E(e),n)))return!1;(0,p.default)("Draggable: onDragStop: %j",n);var r={dragging:!1,slackX:0,slackY:0};if(Boolean(e.props.position)){var i=e.props.position,o=i.x,a=i.y;r.x=o,r.y=a}e.setState(r)})),e.state={dragging:!1,dragged:!1,x:t.position?t.position.x:t.defaultPosition.x,y:t.position?t.position.y:t.defaultPosition.y,prevPropsPosition:x({},t.position),slackX:0,slackY:0,isElementSVG:!1},!t.position||t.onDrag||t.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),e}return e=u,r=[{key:"getDerivedStateFromProps",value:function(t,e){var n=t.position,r=e.prevPropsPosition;return!n||r&&n.x===r.x&&n.y===r.y?null:((0,p.default)("Draggable: getDerivedStateFromProps %j",{position:n,prevPropsPosition:r}),{x:n.x,y:n.y,prevPropsPosition:x({},n)})}}],(n=[{key:"componentDidMount",value:function(){"undefined"!==typeof window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var t,e,n;return null!==(t=null===(e=this.props)||void 0===e||null===(n=e.nodeRef)||void 0===n?void 0:n.current)&&void 0!==t?t:a.default.findDOMNode(this)}},{key:"render",value:function(){var t,e=this.props,n=(e.axis,e.bounds,e.children),r=e.defaultPosition,o=e.defaultClassName,a=e.defaultClassNameDragging,u=e.defaultClassNameDragged,p=e.position,f=e.positionOffset,g=(e.scale,y(e,d)),v={},_=null,b=!Boolean(p)||this.state.dragging,w=p||r,S={x:(0,c.canDragX)(this)&&b?this.state.x:w.x,y:(0,c.canDragY)(this)&&b?this.state.y:w.y};this.state.isElementSVG?_=(0,l.createSVGTransform)(S,f):v=(0,l.createCSSTransform)(S,f);var C=(0,s.default)(n.props.className||"",o,(M(t={},a,this.state.dragging),M(t,u,this.state.dragged),t));return i.createElement(h.default,m({},g,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),i.cloneElement(i.Children.only(n),{className:C,style:x(x({},n.props.style),v),transform:_}))}}])&&w(e.prototype,n),r&&w(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(i.Component);e.default=T,M(T,"displayName","Draggable"),M(T,"propTypes",x(x({},h.default.propTypes),{},{axis:o.default.oneOf(["both","x","y","none"]),bounds:o.default.oneOfType([o.default.shape({left:o.default.number,right:o.default.number,top:o.default.number,bottom:o.default.number}),o.default.string,o.default.oneOf([!1])]),defaultClassName:o.default.string,defaultClassNameDragging:o.default.string,defaultClassNameDragged:o.default.string,defaultPosition:o.default.shape({x:o.default.number,y:o.default.number}),positionOffset:o.default.shape({x:o.default.oneOfType([o.default.number,o.default.string]),y:o.default.oneOfType([o.default.number,o.default.string])}),position:o.default.shape({x:o.default.number,y:o.default.number}),className:u.dontSetMe,style:u.dontSetMe,transform:u.dontSetMe})),M(T,"defaultProps",x(x({},h.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))},8091:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!==typeof t)return{default:t};var n=p(e);if(n&&n.has(t))return n.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=t[a]}i.default=t,n&&n.set(t,i);return i}(n(2791)),o=h(n(2007)),a=h(n(4164)),s=n(2280),l=n(580),c=n(2693),u=h(n(1655));function h(t){return t&&t.__esModule?t:{default:t}}function p(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(p=function(t){return t?n:e})(t)}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e){return m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},m(t,e)}function y(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=x(t);if(e){var o=x(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}(this,n)}}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b={start:"touchstart",move:"touchmove",stop:"touchend"},w={start:"mousedown",move:"mousemove",stop:"mouseup"},S=w,C=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e)}(c,t);var e,n,r,o=y(c);function c(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return _(v(t=o.call.apply(o,[this].concat(n))),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),_(v(t),"mounted",!1),_(v(t),"handleDragStart",(function(e){if(t.props.onMouseDown(e),!t.props.allowAnyClick&&"number"===typeof e.button&&0!==e.button)return!1;var n=t.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var r=n.ownerDocument;if(!(t.props.disabled||!(e.target instanceof r.defaultView.Node)||t.props.handle&&!(0,s.matchesSelectorAndParentsTo)(e.target,t.props.handle,n)||t.props.cancel&&(0,s.matchesSelectorAndParentsTo)(e.target,t.props.cancel,n))){"touchstart"===e.type&&e.preventDefault();var i=(0,s.getTouchIdentifier)(e);t.setState({touchIdentifier:i});var o=(0,l.getControlPosition)(e,i,v(t));if(null!=o){var a=o.x,c=o.y,h=(0,l.createCoreData)(v(t),a,c);(0,u.default)("DraggableCore: handleDragStart: %j",h),(0,u.default)("calling",t.props.onStart),!1!==t.props.onStart(e,h)&&!1!==t.mounted&&(t.props.enableUserSelectHack&&(0,s.addUserSelectStyles)(r),t.setState({dragging:!0,lastX:a,lastY:c}),(0,s.addEvent)(r,S.move,t.handleDrag),(0,s.addEvent)(r,S.stop,t.handleDragStop))}}})),_(v(t),"handleDrag",(function(e){var n=(0,l.getControlPosition)(e,t.state.touchIdentifier,v(t));if(null!=n){var r=n.x,i=n.y;if(Array.isArray(t.props.grid)){var o=r-t.state.lastX,a=i-t.state.lastY,s=d((0,l.snapToGrid)(t.props.grid,o,a),2);if(o=s[0],a=s[1],!o&&!a)return;r=t.state.lastX+o,i=t.state.lastY+a}var c=(0,l.createCoreData)(v(t),r,i);if((0,u.default)("DraggableCore: handleDrag: %j",c),!1!==t.props.onDrag(e,c)&&!1!==t.mounted)t.setState({lastX:r,lastY:i});else try{t.handleDragStop(new MouseEvent("mouseup"))}catch(p){var h=document.createEvent("MouseEvents");h.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),t.handleDragStop(h)}}})),_(v(t),"handleDragStop",(function(e){if(t.state.dragging){var n=(0,l.getControlPosition)(e,t.state.touchIdentifier,v(t));if(null!=n){var r=n.x,i=n.y;if(Array.isArray(t.props.grid)){var o=r-t.state.lastX||0,a=i-t.state.lastY||0,c=d((0,l.snapToGrid)(t.props.grid,o,a),2);o=c[0],a=c[1],r=t.state.lastX+o,i=t.state.lastY+a}var h=(0,l.createCoreData)(v(t),r,i);if(!1===t.props.onStop(e,h)||!1===t.mounted)return!1;var p=t.findDOMNode();p&&t.props.enableUserSelectHack&&(0,s.removeUserSelectStyles)(p.ownerDocument),(0,u.default)("DraggableCore: handleDragStop: %j",h),t.setState({dragging:!1,lastX:NaN,lastY:NaN}),p&&((0,u.default)("DraggableCore: Removing handlers"),(0,s.removeEvent)(p.ownerDocument,S.move,t.handleDrag),(0,s.removeEvent)(p.ownerDocument,S.stop,t.handleDragStop))}}})),_(v(t),"onMouseDown",(function(e){return S=w,t.handleDragStart(e)})),_(v(t),"onMouseUp",(function(e){return S=w,t.handleDragStop(e)})),_(v(t),"onTouchStart",(function(e){return S=b,t.handleDragStart(e)})),_(v(t),"onTouchEnd",(function(e){return S=b,t.handleDragStop(e)})),t}return e=c,(n=[{key:"componentDidMount",value:function(){this.mounted=!0;var t=this.findDOMNode();t&&(0,s.addEvent)(t,b.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var t=this.findDOMNode();if(t){var e=t.ownerDocument;(0,s.removeEvent)(e,w.move,this.handleDrag),(0,s.removeEvent)(e,b.move,this.handleDrag),(0,s.removeEvent)(e,w.stop,this.handleDragStop),(0,s.removeEvent)(e,b.stop,this.handleDragStop),(0,s.removeEvent)(t,b.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,s.removeUserSelectStyles)(e)}}},{key:"findDOMNode",value:function(){var t,e,n;return null!==(t=this.props)&&void 0!==t&&t.nodeRef?null===(e=this.props)||void 0===e||null===(n=e.nodeRef)||void 0===n?void 0:n.current:a.default.findDOMNode(this)}},{key:"render",value:function(){return i.cloneElement(i.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}])&&g(e.prototype,n),r&&g(e,r),Object.defineProperty(e,"prototype",{writable:!1}),c}(i.Component);e.default=C,_(C,"displayName","DraggableCore"),_(C,"propTypes",{allowAnyClick:o.default.bool,disabled:o.default.bool,enableUserSelectHack:o.default.bool,offsetParent:function(t,e){if(t[e]&&1!==t[e].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:o.default.arrayOf(o.default.number),handle:o.default.string,cancel:o.default.string,nodeRef:o.default.object,onStart:o.default.func,onDrag:o.default.func,onStop:o.default.func,onMouseDown:o.default.func,scale:o.default.number,className:c.dontSetMe,style:c.dontSetMe,transform:c.dontSetMe}),_(C,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},9962:function(t,e,n){"use strict";var r=n(37),i=r.default,o=r.DraggableCore;t.exports=i,t.exports.default=i,t.exports.DraggableCore=o},2280:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.addClassName=d,e.addEvent=function(t,e,n,r){if(!t)return;var i=l({capture:!0},r);t.addEventListener?t.addEventListener(e,n,i):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n},e.addUserSelectStyles=function(t){if(!t)return;var e=t.getElementById("react-draggable-style-el");e||((e=t.createElement("style")).type="text/css",e.id="react-draggable-style-el",e.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",e.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",t.getElementsByTagName("head")[0].appendChild(e));t.body&&d(t.body,"react-draggable-transparent-selection")},e.createCSSTransform=function(t,e){var n=p(t,e,"px");return c({},(0,o.browserPrefixToKey)("transform",o.default),n)},e.createSVGTransform=function(t,e){return p(t,e,"")},e.getTouch=function(t,e){return t.targetTouches&&(0,i.findInArray)(t.targetTouches,(function(t){return e===t.identifier}))||t.changedTouches&&(0,i.findInArray)(t.changedTouches,(function(t){return e===t.identifier}))},e.getTouchIdentifier=function(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier},e.getTranslation=p,e.innerHeight=function(t){var e=t.clientHeight,n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,i.int)(n.paddingTop),e-=(0,i.int)(n.paddingBottom)},e.innerWidth=function(t){var e=t.clientWidth,n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,i.int)(n.paddingLeft),e-=(0,i.int)(n.paddingRight)},e.matchesSelector=h,e.matchesSelectorAndParentsTo=function(t,e,n){var r=t;do{if(h(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1},e.offsetXYFromParent=function(t,e,n){var r=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-r.left)/n,o=(t.clientY+e.scrollTop-r.top)/n;return{x:i,y:o}},e.outerHeight=function(t){var e=t.clientHeight,n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,i.int)(n.borderTopWidth),e+=(0,i.int)(n.borderBottomWidth)},e.outerWidth=function(t){var e=t.clientWidth,n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,i.int)(n.borderLeftWidth),e+=(0,i.int)(n.borderRightWidth)},e.removeClassName=f,e.removeEvent=function(t,e,n,r){if(!t)return;var i=l({capture:!0},r);t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null},e.removeUserSelectStyles=function(t){if(!t)return;try{if(t.body&&f(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{var e=(t.defaultView||window).getSelection();e&&"Caret"!==e.type&&e.removeAllRanges()}}catch(n){}};var i=n(2693),o=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!==typeof t)return{default:t};var n=a(e);if(n&&n.has(t))return n.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var l=o?Object.getOwnPropertyDescriptor(t,s):null;l&&(l.get||l.set)?Object.defineProperty(i,s,l):i[s]=t[s]}i.default=t,n&&n.set(t,i);return i}(n(4021));function a(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(a=function(t){return t?n:e})(t)}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u="";function h(t,e){return u||(u=(0,i.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(e){return(0,i.isFunction)(t[e])}))),!!(0,i.isFunction)(t[u])&&t[u](e)}function p(t,e,n){var r=t.x,i=t.y,o="translate(".concat(r).concat(n,",").concat(i).concat(n,")");if(e){var a="".concat("string"===typeof e.x?e.x:e.x+n),s="".concat("string"===typeof e.y?e.y:e.y+n);o="translate(".concat(a,", ").concat(s,")")+o}return o}function d(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(t.className+=" ".concat(e))}function f(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}},4021:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.browserPrefixToKey=i,e.browserPrefixToStyle=function(t,e){return e?"-".concat(e.toLowerCase(),"-").concat(t):t},e.default=void 0,e.getPrefix=r;var n=["Moz","Webkit","O","ms"];function r(){var t,e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"===typeof window)return"";var o=null===(t=window.document)||void 0===t||null===(e=t.documentElement)||void 0===e?void 0:e.style;if(!o)return"";if(r in o)return"";for(var a=0;a<n.length;a++)if(i(r,n[a])in o)return n[a];return""}function i(t,e){return e?"".concat(e).concat(function(t){for(var e="",n=!0,r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):"-"===t[r]?n=!0:e+=t[r];return e}(t)):t}var o=r();e.default=o},1655:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){0}},580:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.canDragX=function(t){return"both"===t.props.axis||"x"===t.props.axis},e.canDragY=function(t){return"both"===t.props.axis||"y"===t.props.axis},e.createCoreData=function(t,e,n){var i=t.state,a=!(0,r.isNum)(i.lastX),s=o(t);return a?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-i.lastX,deltaY:n-i.lastY,lastX:i.lastX,lastY:i.lastY,x:e,y:n}},e.createDraggableData=function(t,e){var n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}},e.getBoundPosition=function(t,e,n){if(!t.props.bounds)return[e,n];var a=t.props.bounds;a="string"===typeof a?a:function(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}(a);var s=o(t);if("string"===typeof a){var l,c=s.ownerDocument,u=c.defaultView;if(!((l="parent"===a?s.parentNode:c.querySelector(a))instanceof u.HTMLElement))throw new Error('Bounds selector "'+a+'" could not find an element.');var h=l,p=u.getComputedStyle(s),d=u.getComputedStyle(h);a={left:-s.offsetLeft+(0,r.int)(d.paddingLeft)+(0,r.int)(p.marginLeft),top:-s.offsetTop+(0,r.int)(d.paddingTop)+(0,r.int)(p.marginTop),right:(0,i.innerWidth)(h)-(0,i.outerWidth)(s)-s.offsetLeft+(0,r.int)(d.paddingRight)-(0,r.int)(p.marginRight),bottom:(0,i.innerHeight)(h)-(0,i.outerHeight)(s)-s.offsetTop+(0,r.int)(d.paddingBottom)-(0,r.int)(p.marginBottom)}}(0,r.isNum)(a.right)&&(e=Math.min(e,a.right));(0,r.isNum)(a.bottom)&&(n=Math.min(n,a.bottom));(0,r.isNum)(a.left)&&(e=Math.max(e,a.left));(0,r.isNum)(a.top)&&(n=Math.max(n,a.top));return[e,n]},e.getControlPosition=function(t,e,n){var r="number"===typeof e?(0,i.getTouch)(t,e):null;if("number"===typeof e&&!r)return null;var a=o(n),s=n.props.offsetParent||a.offsetParent||a.ownerDocument.body;return(0,i.offsetXYFromParent)(r||t,s,n.props.scale)},e.snapToGrid=function(t,e,n){var r=Math.round(e/t[0])*t[0],i=Math.round(n/t[1])*t[1];return[r,i]};var r=n(2693),i=n(2280);function o(t){var e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}},2693:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dontSetMe=function(t,e,n){if(t[e])return new Error("Invalid prop ".concat(e," passed to ").concat(n," - do not set this, set it on the child."))},e.findInArray=function(t,e){for(var n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]},e.int=function(t){return parseInt(t,10)},e.isFunction=function(t){return"function"===typeof t||"[object Function]"===Object.prototype.toString.call(t)},e.isNum=function(t){return"number"===typeof t&&!isNaN(t)}},1372:function(t,e){"use strict";var n=60103,r=60106,i=60107,o=60108,a=60114,s=60109,l=60110,c=60112,u=60113,h=60120,p=60115,d=60116,f=60121,g=60122,m=60117,y=60129,v=60131;if("function"===typeof Symbol&&Symbol.for){var x=Symbol.for;n=x("react.element"),r=x("react.portal"),i=x("react.fragment"),o=x("react.strict_mode"),a=x("react.profiler"),s=x("react.provider"),l=x("react.context"),c=x("react.forward_ref"),u=x("react.suspense"),h=x("react.suspense_list"),p=x("react.memo"),d=x("react.lazy"),f=x("react.block"),g=x("react.server.block"),m=x("react.fundamental"),y=x("react.debug_trace_mode"),v=x("react.legacy_hidden")}function _(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case n:switch(t=t.type){case i:case a:case o:case u:case h:return t;default:switch(t=t&&t.$$typeof){case l:case c:case d:case p:case s:return t;default:return e}}case r:return e}}}e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===i||t===a||t===y||t===o||t===u||t===h||t===v||"object"===typeof t&&null!==t&&(t.$$typeof===d||t.$$typeof===p||t.$$typeof===s||t.$$typeof===l||t.$$typeof===c||t.$$typeof===m||t.$$typeof===f||t[0]===g)},e.typeOf=_},7441:function(t,e,n){"use strict";t.exports=n(1372)},2722:function(t,e,n){var r=Array.prototype.slice,i=n(2117),o=n(4275),a=t.exports=function(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?n.strict?t===e:t==e:function(t,e,n){var c,u;if(s(t)||s(e))return!1;if(t.prototype!==e.prototype)return!1;if(o(t))return!!o(e)&&(t=r.call(t),e=r.call(e),a(t,e,n));if(l(t)){if(!l(e))return!1;if(t.length!==e.length)return!1;for(c=0;c<t.length;c++)if(t[c]!==e[c])return!1;return!0}try{var h=i(t),p=i(e)}catch(d){return!1}if(h.length!=p.length)return!1;for(h.sort(),p.sort(),c=h.length-1;c>=0;c--)if(h[c]!=p[c])return!1;for(c=h.length-1;c>=0;c--)if(u=h[c],!a(t[u],e[u],n))return!1;return typeof t===typeof e}(t,e,n))};function s(t){return null===t||void 0===t}function l(t){return!(!t||"object"!==typeof t||"number"!==typeof t.length)&&("function"===typeof t.copy&&"function"===typeof t.slice&&!(t.length>0&&"number"!==typeof t[0]))}},4275:function(t,e){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function i(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=n?r:i).supported=r,e.unsupported=i},2117:function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"===typeof Object.keys?Object.keys:n).shim=n},6374:function(t,e,n){"use strict";var r=n(2791),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(u=e.ref),e)a.call(e,r)&&!l.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===o[r]&&(o[r]=e[r]);return{$$typeof:i,type:t,key:c,ref:u,props:o,_owner:s.current}}e.Fragment=o,e.jsx=c,e.jsxs=c},9117:function(t,e){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),d=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||f}function v(){}function x(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},v.prototype=y.prototype;var _=x.prototype=new v;_.constructor=x,g(_,y.prototype),_.isPureReactComponent=!0;var b=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function E(t,e,r){var i,o={},a=null,s=null;if(null!=e)for(i in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)w.call(e,i)&&!C.hasOwnProperty(i)&&(o[i]=e[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(t&&t.defaultProps)for(i in l=t.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:t,key:a,ref:s,props:o,_owner:S.current}}function k(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var M=/\/+/g;function T(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function I(t,e,i,o,a){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var l=!1;if(null===t)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=t),t=""===o?"."+T(l,0):o,b(a)?(i="",null!=t&&(i=t.replace(M,"$&/")+"/"),I(a,e,i,"",(function(t){return t}))):null!=a&&(k(a)&&(a=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(M,"$&/")+"/")+t)),e.push(a)),1;if(l=0,o=""===o?".":o+":",b(t))for(var c=0;c<t.length;c++){var u=o+T(s=t[c],c);l+=I(s,e,i,u,a)}else if(u=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=d&&t[d]||t["@@iterator"])?t:null}(t),"function"===typeof u)for(t=u.call(t),c=0;!(s=t.next()).done;)l+=I(s=s.value,e,i,u=o+T(s,c++),a);else if("object"===s)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function P(t,e,n){if(null==t)return t;var r=[],i=0;return I(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function O(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var A={current:null},D={transition:null},R={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:D,ReactCurrentOwner:S};e.Children={map:P,forEach:function(t,e,n){P(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return P(t,(function(){e++})),e},toArray:function(t){return P(t,(function(t){return t}))||[]},only:function(t){if(!k(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=y,e.Fragment=i,e.Profiler=a,e.PureComponent=x,e.StrictMode=o,e.Suspense=u,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,e.cloneElement=function(t,e,r){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=g({},t.props),o=t.key,a=t.ref,s=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,s=S.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)w.call(e,c)&&!C.hasOwnProperty(c)&&(i[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:t.type,key:o,ref:a,props:i,_owner:s}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:t},t.Consumer=t},e.createElement=E,e.createFactory=function(t){var e=E.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:c,render:t}},e.isValidElement=k,e.lazy=function(t){return{$$typeof:p,_payload:{_status:-1,_result:t},_init:O}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=D.transition;D.transition={};try{t()}finally{D.transition=e}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(t,e){return A.current.useCallback(t,e)},e.useContext=function(t){return A.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return A.current.useDeferredValue(t)},e.useEffect=function(t,e){return A.current.useEffect(t,e)},e.useId=function(){return A.current.useId()},e.useImperativeHandle=function(t,e,n){return A.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return A.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return A.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return A.current.useMemo(t,e)},e.useReducer=function(t,e,n){return A.current.useReducer(t,e,n)},e.useRef=function(t){return A.current.useRef(t)},e.useState=function(t){return A.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return A.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return A.current.useTransition()},e.version="18.2.0"},2791:function(t,e,n){"use strict";t.exports=n(9117)},184:function(t,e,n){"use strict";t.exports=n(6374)},5844:function(t,e,n){"use strict";var r=n(4583).functionsHaveConfigurableNames(),i=Object,o=TypeError;t.exports=function(){if(null!=this&&this!==i(this))throw new o("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.unicodeSets&&(t+="v"),this.sticky&&(t+="y"),t},r&&Object.defineProperty&&Object.defineProperty(t.exports,"name",{value:"get flags"})},3535:function(t,e,n){"use strict";var r=n(9396),i=n(9722),o=n(5844),a=n(1334),s=n(7888),l=i(a());r(l,{getPolyfill:a,implementation:o,shim:s}),t.exports=l},1334:function(t,e,n){"use strict";var r=n(5844),i=n(9396).supportsDescriptors,o=Object.getOwnPropertyDescriptor;t.exports=function(){if(i&&"gim"===/a/gim.flags){var t=o(RegExp.prototype,"flags");if(t&&"function"===typeof t.get&&"boolean"===typeof RegExp.prototype.dotAll&&"boolean"===typeof RegExp.prototype.hasIndices){var e="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){e+="d"}}),Object.defineProperty(n,"sticky",{get:function(){e+="y"}}),"dy"===e)return t.get}}return r}},7888:function(t,e,n){"use strict";var r=n(9396).supportsDescriptors,i=n(1334),o=Object.getOwnPropertyDescriptor,a=Object.defineProperty,s=TypeError,l=Object.getPrototypeOf,c=/a/;t.exports=function(){if(!r||!l)throw new s("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=i(),e=l(c),n=o(e,"flags");return n&&n.get===t||a(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}},4460:function(t,e){!function(t){"use strict";const e=134217729,n=33306690738754706e-32;function r(t,e,n,r,i){let o,a,s,l,c=e[0],u=r[0],h=0,p=0;u>c==u>-c?(o=c,c=e[++h]):(o=u,u=r[++p]);let d=0;if(h<t&&p<n)for(u>c==u>-c?(s=o-((a=c+o)-c),c=e[++h]):(s=o-((a=u+o)-u),u=r[++p]),o=a,0!==s&&(i[d++]=s);h<t&&p<n;)u>c==u>-c?(s=o-((a=o+c)-(l=a-o))+(c-l),c=e[++h]):(s=o-((a=o+u)-(l=a-o))+(u-l),u=r[++p]),o=a,0!==s&&(i[d++]=s);for(;h<t;)s=o-((a=o+c)-(l=a-o))+(c-l),c=e[++h],o=a,0!==s&&(i[d++]=s);for(;p<n;)s=o-((a=o+u)-(l=a-o))+(u-l),u=r[++p],o=a,0!==s&&(i[d++]=s);return 0===o&&0!==d||(i[d++]=o),d}function i(t){return new Float64Array(t)}const o=33306690738754716e-32,a=22204460492503146e-32,s=11093356479670487e-47,l=i(4),c=i(8),u=i(12),h=i(16),p=i(4);t.orient2d=function(t,i,d,f,g,m){const y=(i-m)*(d-g),v=(t-g)*(f-m),x=y-v;if(0===y||0===v||y>0!=v>0)return x;const _=Math.abs(y+v);return Math.abs(x)>=o*_?x:-function(t,i,o,d,f,g,m){let y,v,x,_,b,w,S,C,E,k,M,T,I,P,O,A,D,R;const L=t-f,N=o-f,F=i-g,z=d-g;b=(O=(C=L-(S=(w=e*L)-(w-L)))*(k=z-(E=(w=e*z)-(w-z)))-((P=L*z)-S*E-C*E-S*k))-(M=O-(D=(C=F-(S=(w=e*F)-(w-F)))*(k=N-(E=(w=e*N)-(w-N)))-((A=F*N)-S*E-C*E-S*k))),l[0]=O-(M+b)+(b-D),b=(I=P-((T=P+M)-(b=T-P))+(M-b))-(M=I-A),l[1]=I-(M+b)+(b-A),b=(R=T+M)-T,l[2]=T-(R-b)+(M-b),l[3]=R;let B=function(t,e){let n=e[0];for(let r=1;r<t;r++)n+=e[r];return n}(4,l),$=a*m;if(B>=$||-B>=$)return B;if(y=t-(L+(b=t-L))+(b-f),x=o-(N+(b=o-N))+(b-f),v=i-(F+(b=i-F))+(b-g),_=d-(z+(b=d-z))+(b-g),0===y&&0===v&&0===x&&0===_)return B;if($=s*m+n*Math.abs(B),(B+=L*_+z*y-(F*x+N*v))>=$||-B>=$)return B;b=(O=(C=y-(S=(w=e*y)-(w-y)))*(k=z-(E=(w=e*z)-(w-z)))-((P=y*z)-S*E-C*E-S*k))-(M=O-(D=(C=v-(S=(w=e*v)-(w-v)))*(k=N-(E=(w=e*N)-(w-N)))-((A=v*N)-S*E-C*E-S*k))),p[0]=O-(M+b)+(b-D),b=(I=P-((T=P+M)-(b=T-P))+(M-b))-(M=I-A),p[1]=I-(M+b)+(b-A),b=(R=T+M)-T,p[2]=T-(R-b)+(M-b),p[3]=R;const j=r(4,l,4,p,c);b=(O=(C=L-(S=(w=e*L)-(w-L)))*(k=_-(E=(w=e*_)-(w-_)))-((P=L*_)-S*E-C*E-S*k))-(M=O-(D=(C=F-(S=(w=e*F)-(w-F)))*(k=x-(E=(w=e*x)-(w-x)))-((A=F*x)-S*E-C*E-S*k))),p[0]=O-(M+b)+(b-D),b=(I=P-((T=P+M)-(b=T-P))+(M-b))-(M=I-A),p[1]=I-(M+b)+(b-A),b=(R=T+M)-T,p[2]=T-(R-b)+(M-b),p[3]=R;const U=r(j,c,4,p,u);b=(O=(C=y-(S=(w=e*y)-(w-y)))*(k=_-(E=(w=e*_)-(w-_)))-((P=y*_)-S*E-C*E-S*k))-(M=O-(D=(C=v-(S=(w=e*v)-(w-v)))*(k=x-(E=(w=e*x)-(w-x)))-((A=v*x)-S*E-C*E-S*k))),p[0]=O-(M+b)+(b-D),b=(I=P-((T=P+M)-(b=T-P))+(M-b))-(M=I-A),p[1]=I-(M+b)+(b-A),b=(R=T+M)-T,p[2]=T-(R-b)+(M-b),p[3]=R;const V=r(U,u,4,p,h);return h[V-1]}(t,i,d,f,g,m,_)},t.orient2dfast=function(t,e,n,r,i,o){return(e-o)*(n-i)-(t-i)*(r-o)},Object.defineProperty(t,"__esModule",{value:!0})}(e)},6813:function(t,e){"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var r=n-1>>>1,i=t[r];if(!(0<o(i,e)))break t;t[r]=e,t[n]=i,n=r}}function r(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=t[s],c=s+1,u=t[c];if(0>o(l,n))c<i&&0>o(u,l)?(t[r]=u,t[c]=n,r=c):(t[r]=l,t[s]=n,r=s);else{if(!(c<i&&0>o(u,n)))break t;t[r]=u,t[c]=n,r=c}}}return e}function o(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var c=[],u=[],h=1,p=null,d=3,f=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function _(t){for(var e=r(u);null!==e;){if(null===e.callback)i(u);else{if(!(e.startTime<=t))break;i(u),e.sortIndex=e.expirationTime,n(c,e)}e=r(u)}}function b(t){if(m=!1,_(t),!g)if(null!==r(c))g=!0,D(w);else{var e=r(u);null!==e&&R(b,e.startTime-t)}}function w(t,n){g=!1,m&&(m=!1,v(k),k=-1),f=!0;var o=d;try{for(_(n),p=r(c);null!==p&&(!(p.expirationTime>n)||t&&!I());){var a=p.callback;if("function"===typeof a){p.callback=null,d=p.priorityLevel;var s=a(p.expirationTime<=n);n=e.unstable_now(),"function"===typeof s?p.callback=s:p===r(c)&&i(c),_(n)}else i(c);p=r(c)}if(null!==p)var l=!0;else{var h=r(u);null!==h&&R(b,h.startTime-n),l=!1}return l}finally{p=null,d=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,C=!1,E=null,k=-1,M=5,T=-1;function I(){return!(e.unstable_now()-T<M)}function P(){if(null!==E){var t=e.unstable_now();T=t;var n=!0;try{n=E(!0,t)}finally{n?S():(C=!1,E=null)}}else C=!1}if("function"===typeof x)S=function(){x(P)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,A=O.port2;O.port1.onmessage=P,S=function(){A.postMessage(null)}}else S=function(){y(P,0)};function D(t){E=t,C||(C=!0,S())}function R(t,n){k=y((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){g||f||(g=!0,D(w))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(t){switch(d){case 1:case 2:case 3:var e=3;break;default:e=d}var n=d;d=e;try{return t()}finally{d=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=d;d=t;try{return e()}finally{d=n}},e.unstable_scheduleCallback=function(t,i,o){var a=e.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,t){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return t={id:h++,callback:i,priorityLevel:t,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(t.sortIndex=o,n(u,t),null===r(c)&&t===r(u)&&(m?(v(k),k=-1):m=!0,R(b,o-a))):(t.sortIndex=s,n(c,t),g||f||(g=!0,D(w))),t},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(t){var e=d;return function(){var n=d;d=e;try{return t.apply(this,arguments)}finally{d=n}}}},5296:function(t,e,n){"use strict";t.exports=n(6813)},9613:function(t){t.exports=function(t,e,n,r){var i=n?n.call(r,t,e):void 0;if(void 0!==i)return!!i;if(t===e)return!0;if("object"!==typeof t||!t||"object"!==typeof e||!e)return!1;var o=Object.keys(t),a=Object.keys(e);if(o.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(e),l=0;l<o.length;l++){var c=o[l];if(!s(c))return!1;var u=t[c],h=e[c];if(!1===(i=n?n.call(r,u,h,c):void 0)||void 0===i&&u!==h)return!1}return!0}},3010:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SensorTabIndex=e.SensorClassName=e.SizeSensorId=void 0;e.SizeSensorId="size-sensor-id";e.SensorClassName="size-sensor-object";e.SensorTabIndex="-1"},8281:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,n=null;return function(){for(var r=this,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];clearTimeout(n),n=setTimeout((function(){t.apply(r,o)}),e)}}},2904:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=1;e.default=function(){return"".concat(n++)}},315:function(t,e,n){"use strict";e.ak=void 0;var r=n(4374);e.ak=function(t,e){var n=(0,r.getSensor)(t);return n.bind(e),function(){n.unbind(e)}}},4374:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.removeSensor=e.getSensor=void 0;var r,i=(r=n(2904))&&r.__esModule?r:{default:r},o=n(6413),a=n(3010);var s={};e.getSensor=function(t){var e=t.getAttribute(a.SizeSensorId);if(e&&s[e])return s[e];var n=(0,i.default)();t.setAttribute(a.SizeSensorId,n);var r=(0,o.createSensor)(t);return s[n]=r,r};e.removeSensor=function(t){var e=t.element.getAttribute(a.SizeSensorId);t.element.removeAttribute(a.SizeSensorId),t.destroy(),e&&s[e]&&delete s[e]}},6413:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createSensor=void 0;var r=n(8850),i=n(4881),o="undefined"!==typeof ResizeObserver?i.createSensor:r.createSensor;e.createSensor=o},8850:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createSensor=void 0;var r,i=(r=n(8281))&&r.__esModule?r:{default:r},o=n(3010);e.createSensor=function(t){var e=void 0,n=[],r=(0,i.default)((function(){n.forEach((function(e){e(t)}))})),a=function(){e&&e.parentNode&&(e.contentDocument&&e.contentDocument.defaultView.removeEventListener("resize",r),e.parentNode.removeChild(e),e=void 0,n=[])};return{element:t,bind:function(i){e||(e=function(){"static"===getComputedStyle(t).position&&(t.style.position="relative");var e=document.createElement("object");return e.onload=function(){e.contentDocument.defaultView.addEventListener("resize",r),r()},e.style.display="block",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.height="100%",e.style.width="100%",e.style.overflow="hidden",e.style.pointerEvents="none",e.style.zIndex="-1",e.style.opacity="0",e.setAttribute("class",o.SensorClassName),e.setAttribute("tabindex",o.SensorTabIndex),e.type="text/html",t.appendChild(e),e.data="about:blank",e}()),-1===n.indexOf(i)&&n.push(i)},destroy:a,unbind:function(t){var r=n.indexOf(t);-1!==r&&n.splice(r,1),0===n.length&&e&&a()}}}},4881:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createSensor=void 0;var r,i=(r=n(8281))&&r.__esModule?r:{default:r};e.createSensor=function(t){var e=void 0,n=[],r=(0,i.default)((function(){n.forEach((function(e){e(t)}))})),o=function(){e.disconnect(),n=[],e=void 0};return{element:t,bind:function(i){e||(e=function(){var e=new ResizeObserver(r);return e.observe(t),r(),e}()),-1===n.indexOf(i)&&n.push(i)},destroy:o,unbind:function(t){var r=n.indexOf(t);-1!==r&&n.splice(r,1),0===n.length&&e&&o()}}}},1848:function(t){"use strict";t.exports={eudist:function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var a=(t[o]||0)-(e[o]||0);i+=a*a}return n?Math.sqrt(i):i},mandist:function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++)i+=Math.abs((t[o]||0)-(e[o]||0));return n?Math.sqrt(i):i},dist:function(t,e,n){var r=Math.abs(t-e);return n?r:r*r}}},3556:function(t,e,n){"use strict";var r=n(1848),i=r.eudist,o=r.dist;t.exports={kmrand:function(t,e){for(var n={},r=[],i=e<<2,o=t.length,a=t[0].length>0;r.length<e&&i-- >0;){var s=t[Math.floor(Math.random()*o)],l=a?s.join("_"):""+s;n[l]||(n[l]=!0,r.push(s))}if(r.length<e)throw new Error("Error initializating clusters");return r},kmpp:function(t,e){var n=t[0].length?i:o,r=[],a=t.length,s=t[0].length>0,l=t[Math.floor(Math.random()*a)];s&&l.join("_");for(r.push(l);r.length<e;){for(var c=[],u=r.length,h=0,p=[],d=0;d<a;d++){for(var f=1/0,g=0;g<u;g++){var m=n(t[d],r[g]);m<=f&&(f=m)}c[d]=f}for(var y=0;y<a;y++)h+=c[y];for(var v=0;v<a;v++)p[v]={i:v,v:t[v],pr:c[v]/h,cs:0};p.sort((function(t,e){return t.pr-e.pr})),p[0].cs=p[0].pr;for(var x=1;x<a;x++)p[x].cs=p[x-1].cs+p[x].pr;for(var _=Math.random(),b=0;b<a-1&&p[b++].cs<_;);r.push(p[b-1].v)}return r}}},6530:function(t,e,n){"use strict";var r=n(1848),i=n(3556),o=r.eudist,a=(r.mandist,r.dist,i.kmrand),s=i.kmpp;function l(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}t.exports=function(t,e,n,r){var i=[],c=[],u=[],h=[],p=!1,d=r||1e4,f=t.length,g=t[0].length,m=g>0,y=[];if(n)i="kmrand"==n?a(t,e):"kmpp"==n?s(t,e):n;else for(var v={};i.length<e;){var x=Math.floor(Math.random()*f);v[x]||(v[x]=!0,i.push(t[x]))}do{l(e,0,y);for(var _=0;_<f;_++){for(var b=1/0,w=0,S=0;S<e;S++){(h=m?o(t[_],i[S]):Math.abs(t[_]-i[S]))<=b&&(b=h,w=S)}u[_]=w,y[w]++}for(var C=[],E=(c=[],0);E<e;E++)C[E]=m?l(g,0,C[E]):0,c[E]=i[E];if(m){for(var k=0;k<e;k++)i[k]=[];for(var M=0;M<f;M++)for(var T=C[u[M]],I=t[M],P=0;P<g;P++)T[P]+=I[P];p=!0;for(var O=0;O<e;O++){for(var A=i[O],D=C[O],R=c[O],L=y[O],N=0;N<g;N++)A[N]=D[N]/L||0;if(p)for(var F=0;F<g;F++)if(R[F]!=A[F]){p=!1;break}}}else{for(var z=0;z<f;z++){C[u[z]]+=t[z]}for(var B=0;B<e;B++)i[B]=C[B]/y[B]||0;p=!0;for(var $=0;$<e;$++)if(c[$]!=i[$]){p=!1;break}}p=p||--d<=0}while(!p);return{it:1e4-d,k:e,idxs:u,centroids:i}}},4613:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return r}});class r{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,r=e[t];for(;t>0;){const i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r}_down(t){const{data:e,compare:n}=this,r=this.length>>1,i=e[t];for(;t<r;){let r=1+(t<<1),o=e[r];const a=r+1;if(a<this.length&&n(e[a],o)<0&&(r=a,o=e[a]),n(o,i)>=0)break;e[t]=o,t=r}e[t]=i}}function i(t,e){return t<e?-1:t>e?1:0}},9388:function(t,e,n){"use strict";n.d(e,{CR:function(){return u},Jh:function(){return l},XA:function(){return c},ZT:function(){return i},_T:function(){return a},ev:function(){return p},mG:function(){return s},pi:function(){return o},pr:function(){return h}});var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(e){o(e)}}function s(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))}function l(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(l){s=[6,l],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}Object.create;function c(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function h(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function p(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create},4035:function(t,e){!function(t){"use strict";function e(){}function n(t){this.message=t||""}function r(t){this.message=t||""}function i(t){this.message=t||""}function o(){}function a(t){return null===t?Rt:t.color}function s(t){return null===t?null:t.parent}function l(t,e){null!==t&&(t.color=e)}function c(t){return null===t?null:t.left}function u(t){return null===t?null:t.right}function h(){this.root_=null,this.size_=0}function p(){}function d(){this.array_=[],arguments[0]instanceof _t&&this.addAll(arguments[0])}function f(){}function g(t){this.message=t||""}function m(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(void 0===this||null===this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var y=function(){};y.prototype.interfaces_=function(){return[]},y.prototype.getClass=function(){return y},y.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var v=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),x=function(){},_={MAX_VALUE:{configurable:!0}};x.isNaN=function(t){return Number.isNaN(t)},x.doubleToLongBits=function(t){return t},x.longBitsToDouble=function(t){return t},x.isInfinite=function(t){return!Number.isFinite(t)},_.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(x,_);var b=function(){},w=function(){},S=function(){},C=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},E={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};C.prototype.setOrdinate=function(t,e){switch(t){case C.X:this.x=e;break;case C.Y:this.y=e;break;case C.Z:this.z=e;break;default:throw new v("Invalid ordinate index: "+t)}},C.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!y.equalsWithTolerance(this.x,e.x,n)&&!!y.equalsWithTolerance(this.y,e.y,n)}},C.prototype.getOrdinate=function(t){switch(t){case C.X:return this.x;case C.Y:return this.y;case C.Z:return this.z}throw new v("Invalid ordinate index: "+t)},C.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||x.isNaN(this.z))&&x.isNaN(t.z)},C.prototype.equals=function(t){return t instanceof C&&this.equals2D(t)},C.prototype.equalInZ=function(t,e){return y.equalsWithTolerance(this.z,t.z,e)},C.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},C.prototype.clone=function(){},C.prototype.copy=function(){return new C(this)},C.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},C.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},C.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},C.prototype.hashCode=function(){var t=17;return 37*(t=37*t+C.hashCode(this.x))+C.hashCode(this.y)},C.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},C.prototype.interfaces_=function(){return[b,w,e]},C.prototype.getClass=function(){return C},C.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=x.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},E.DimensionalComparator.get=function(){return k},E.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},E.NULL_ORDINATE.get=function(){return x.NaN},E.X.get=function(){return 0},E.Y.get=function(){return 1},E.Z.get=function(){return 2},Object.defineProperties(C,E);var k=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new v("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};k.prototype.compare=function(t,e){var n=t,r=e,i=k.compare(n.x,r.x);if(0!==i)return i;var o=k.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:k.compare(n.z,r.z)},k.prototype.interfaces_=function(){return[S]},k.prototype.getClass=function(){return k},k.compare=function(t,e){return t<e?-1:t>e?1:x.isNaN(t)?x.isNaN(e)?0:-1:x.isNaN(e)?1:0};var M=function(){};M.prototype.create=function(){},M.prototype.interfaces_=function(){return[]},M.prototype.getClass=function(){return M};var T=function(){},I={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};T.prototype.interfaces_=function(){return[]},T.prototype.getClass=function(){return T},T.toLocationSymbol=function(t){switch(t){case T.EXTERIOR:return"e";case T.BOUNDARY:return"b";case T.INTERIOR:return"i";case T.NONE:return"-"}throw new v("Unknown location value: "+t)},I.INTERIOR.get=function(){return 0},I.BOUNDARY.get=function(){return 1},I.EXTERIOR.get=function(){return 2},I.NONE.get=function(){return-1},Object.defineProperties(T,I);var P=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},O=function(){},A={LOG_10:{configurable:!0}};O.prototype.interfaces_=function(){return[]},O.prototype.getClass=function(){return O},O.log10=function(t){var e=Math.log(t);return x.isInfinite(e)||x.isNaN(e)?e:e/O.LOG_10},O.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},O.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},O.wrap=function(t,e){return t<0?e- -t%e:t%e},O.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],a=arguments[0];return r>a&&(a=r),i>a&&(a=i),o>a&&(a=o),a}},O.average=function(t,e){return(t+e)/2},A.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(O,A);var D=function(t){this.str=t};D.prototype.append=function(t){this.str+=t},D.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},D.prototype.toString=function(t){return this.str};var R=function(t){this.value=t};R.prototype.intValue=function(){return this.value},R.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},R.isNaN=function(t){return Number.isNaN(t)};var L=function(){};L.isWhitespace=function(t){return t<=32&&t>=0||127===t},L.toUpperCase=function(t){return t.toUpperCase()};var N=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length)if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0]));else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r,i)}},F={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};N.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},N.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=N.magnitude(n._hi),i=N.TEN.pow(r);(n=n.divide(i)).gt(N.TEN)?(n=n.divide(N.TEN),r+=1):n.lt(N.ONE)&&(n=n.multiply(N.TEN),r-=1);for(var o=r+1,a=new D,s=N.MAX_PRINT_DIGITS-1,l=0;l<=s;l++){t&&l===o&&a.append(".");var c=Math.trunc(n._hi);if(c<0)break;var u=!1,h=0;c>9?(u=!0,h="9"):h="0"+c,a.append(h),n=n.subtract(N.valueOf(c)).multiply(N.TEN),u&&n.selfAdd(N.TEN);var p=!0,d=N.magnitude(n._hi);if(d<0&&Math.abs(d)>=s-l&&(p=!1),!p)break}return e[0]=r,a.toString()},N.prototype.sqr=function(){return this.multiply(this)},N.prototype.doubleValue=function(){return this._hi+this._lo},N.prototype.subtract=function(){if(arguments[0]instanceof N){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},N.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},N.prototype.isZero=function(){return 0===this._hi&&0===this._lo},N.prototype.selfSubtract=function(){if(arguments[0]instanceof N){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},N.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},N.prototype.min=function(t){return this.le(t)?this:t},N.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof N){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,l=null,c=null,u=null,h=null;return l=this._hi/n,h=(i=(c=N.SPLIT*l)-(i=c-l))*(a=(h=N.SPLIT*n)-(a=h-n))-(u=l*n)+i*(s=n-a)+(o=l-i)*a+o*s,h=l+(c=(this._hi-u-h+this._lo-l*r)/n),this._hi=h,this._lo=l-h+c,this}},N.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},N.prototype.divide=function(){if(arguments[0]instanceof N){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,a=null,s=null,l=null;return n=(o=this._hi/t._hi)-(e=(a=N.SPLIT*o)-(e=a-o)),l=e*(r=(l=N.SPLIT*t._hi)-(r=l-t._hi))-(s=o*t._hi)+e*(i=t._hi-r)+n*r+n*i,a=(this._hi-s-l+this._lo-o*t._lo)/t._hi,new N(l=o+a,o-l+a)}if("number"==typeof arguments[0]){var c=arguments[0];return x.isNaN(c)?N.createNaN():N.copy(this).selfDivide(c,0)}},N.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},N.prototype.pow=function(t){if(0===t)return N.valueOf(1);var e=new N(this),n=N.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},N.prototype.ceil=function(){if(this.isNaN())return N.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new N(t,e)},N.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},N.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},N.prototype.setValue=function(){if(arguments[0]instanceof N){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},N.prototype.max=function(t){return this.ge(t)?this:t},N.prototype.sqrt=function(){if(this.isZero())return N.valueOf(0);if(this.isNegative())return N.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=N.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},N.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof N){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,a=null,s=null;return o=(i=this._hi+e)-(a=i-this._hi),r=(s=(o=e-a+(this._hi-o))+this._lo)+(i-(n=i+s)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var l=arguments[0],c=arguments[1],u=null,h=null,p=null,d=null,f=null,g=null,m=null;d=this._hi+l,h=this._lo+c,f=d-(g=d-this._hi),p=h-(m=h-this._lo);var y=(u=d+(g=(f=l-g+(this._hi-f))+h))+(g=(p=c-m+(this._lo-p))+(g+(d-u))),v=g+(u-y);return this._hi=y,this._lo=v,this}},N.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof N){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,l=null,c=null;i=(l=N.SPLIT*this._hi)-this._hi,c=N.SPLIT*n,i=l-i,o=this._hi-i,a=c-n;var u=(l=this._hi*n)+(c=i*(a=c-a)-l+i*(s=n-a)+o*a+o*s+(this._hi*r+this._lo*n)),h=c+(i=l-u);return this._hi=u,this._lo=h,this}},N.prototype.selfSqr=function(){return this.selfMultiply(this)},N.prototype.floor=function(){if(this.isNaN())return N.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new N(t,e)},N.prototype.negate=function(){return this.isNaN()?this:new N(-this._hi,-this._lo)},N.prototype.clone=function(){},N.prototype.multiply=function(){if(arguments[0]instanceof N){var t=arguments[0];return t.isNaN()?N.createNaN():N.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return x.isNaN(e)?N.createNaN():N.copy(this).selfMultiply(e,0)}},N.prototype.isNaN=function(){return x.isNaN(this._hi)},N.prototype.intValue=function(){return Math.trunc(this._hi)},N.prototype.toString=function(){var t=N.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},N.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+N.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+N.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},N.prototype.reciprocal=function(){var t=null,e=null,n=null,r=null,i=null,o=null,a=null,s=null;e=(i=1/this._hi)-(t=(o=N.SPLIT*i)-(t=o-i)),n=(s=N.SPLIT*this._hi)-this._hi;var l=i+(o=(1-(a=i*this._hi)-(s=t*(n=s-n)-a+t*(r=this._hi-n)+e*n+e*r)-i*this._lo)/this._hi);return new N(l,i-l+o)},N.prototype.toSciNotation=function(){if(this.isZero())return N.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=N.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},N.prototype.abs=function(){return this.isNaN()?N.NaN:this.isNegative()?this.negate():new N(this)},N.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},N.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},N.prototype.add=function(){if(arguments[0]instanceof N){var t=arguments[0];return N.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return N.copy(this).selfAdd(e)}},N.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof N){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},N.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},N.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},N.prototype.trunc=function(){return this.isNaN()?N.NaN:this.isPositive()?this.floor():this.ceil()},N.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},N.prototype.interfaces_=function(){return[e,b,w]},N.prototype.getClass=function(){return N},N.sqr=function(t){return N.valueOf(t).selfMultiply(t)},N.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return N.parse(t)}if("number"==typeof arguments[0])return new N(arguments[0])},N.sqrt=function(t){return N.valueOf(t).sqrt()},N.parse=function(t){for(var e=0,n=t.length;L.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new N,a=0,s=0,l=0;!(e>=n);){var c=t.charAt(e);if(e++,L.isDigit(c)){var u=c-"0";o.selfMultiply(N.TEN),o.selfAdd(u),a++}else{if("."!==c){if("e"===c||"E"===c){var h=t.substring(e);try{l=R.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+c+"' at position "+e+" in string "+t)}s=a}}var p=o,d=a-s-l;if(0===d)p=o;else if(d>0){var f=N.TEN.pow(d);p=o.divide(f)}else if(d<0){var g=N.TEN.pow(-d);p=o.multiply(g)}return r?p.negate():p},N.createNaN=function(){return new N(x.NaN,x.NaN)},N.copy=function(t){return new N(t)},N.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},N.stringOfChar=function(t,e){for(var n=new D,r=0;r<e;r++)n.append(t);return n.toString()},F.PI.get=function(){return new N(3.141592653589793,12246467991473532e-32)},F.TWO_PI.get=function(){return new N(6.283185307179586,24492935982947064e-32)},F.PI_2.get=function(){return new N(1.5707963267948966,6123233995736766e-32)},F.E.get=function(){return new N(2.718281828459045,14456468917292502e-32)},F.NaN.get=function(){return new N(x.NaN,x.NaN)},F.EPS.get=function(){return 123259516440783e-46},F.SPLIT.get=function(){return 134217729},F.MAX_PRINT_DIGITS.get=function(){return 32},F.TEN.get=function(){return N.valueOf(10)},F.ONE.get=function(){return N.valueOf(1)},F.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},F.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(N,F);var z=function(){},B={DP_SAFE_EPSILON:{configurable:!0}};z.prototype.interfaces_=function(){return[]},z.prototype.getClass=function(){return z},z.orientationIndex=function(t,e,n){var r=z.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=N.valueOf(e.x).selfAdd(-t.x),o=N.valueOf(e.y).selfAdd(-t.y),a=N.valueOf(n.x).selfAdd(-e.x),s=N.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},z.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},z.intersection=function(t,e,n,r){var i=N.valueOf(r.y).selfSubtract(n.y).selfMultiply(N.valueOf(e.x).selfSubtract(t.x)),o=N.valueOf(r.x).selfSubtract(n.x).selfMultiply(N.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=N.valueOf(r.x).selfSubtract(n.x).selfMultiply(N.valueOf(t.y).selfSubtract(n.y)),l=N.valueOf(r.y).selfSubtract(n.y).selfMultiply(N.valueOf(t.x).selfSubtract(n.x)),c=s.subtract(l).selfDivide(a).doubleValue(),u=N.valueOf(t.x).selfAdd(N.valueOf(e.x).selfSubtract(t.x).selfMultiply(c)).doubleValue(),h=N.valueOf(e.x).selfSubtract(t.x).selfMultiply(N.valueOf(t.y).selfSubtract(n.y)),p=N.valueOf(e.y).selfSubtract(t.y).selfMultiply(N.valueOf(t.x).selfSubtract(n.x)),d=h.subtract(p).selfDivide(a).doubleValue(),f=N.valueOf(n.y).selfAdd(N.valueOf(r.y).selfSubtract(n.y).selfMultiply(d)).doubleValue();return new C(u,f)},z.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=i-o;if(i>0){if(o<=0)return z.signum(a);r=i+o}else{if(!(i<0))return z.signum(a);if(o>=0)return z.signum(a);r=-i-o}var s=z.DP_SAFE_EPSILON*r;return a>=s||-a>=s?z.signum(a):2},z.signum=function(t){return t>0?1:t<0?-1:0},B.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(z,B);var $=function(){},j={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};j.X.get=function(){return 0},j.Y.get=function(){return 1},j.Z.get=function(){return 2},j.M.get=function(){return 3},$.prototype.setOrdinate=function(t,e,n){},$.prototype.size=function(){},$.prototype.getOrdinate=function(t,e){},$.prototype.getCoordinate=function(){},$.prototype.getCoordinateCopy=function(t){},$.prototype.getDimension=function(){},$.prototype.getX=function(t){},$.prototype.clone=function(){},$.prototype.expandEnvelope=function(t){},$.prototype.copy=function(){},$.prototype.getY=function(t){},$.prototype.toCoordinateArray=function(){},$.prototype.interfaces_=function(){return[w]},$.prototype.getClass=function(){return $},Object.defineProperties($,j);var U=function(){},V=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(U),H=function(){};H.arraycopy=function(t,e,n,r,i){for(var o=0,a=e;a<e+i;a++)n[r+o]=t[a],o++},H.getProperty=function(t){return{"line.separator":"\n"}[t]};var G=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof C&&arguments[1]instanceof C){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var l=arguments[0],c=arguments[1],u=arguments[2];this.x=l,this.y=c,this.w=u}else if(4===arguments.length){var h=arguments[0],p=arguments[1],d=arguments[2],f=arguments[3],g=h.y-p.y,m=p.x-h.x,y=h.x*p.y-p.x*h.y,v=d.y-f.y,x=f.x-d.x,_=d.x*f.y-f.x*d.y;this.x=m*_-x*y,this.y=v*y-g*_,this.w=g*x-v*m}};G.prototype.getY=function(){var t=this.y/this.w;if(x.isNaN(t)||x.isInfinite(t))throw new V;return t},G.prototype.getX=function(){var t=this.x/this.w;if(x.isNaN(t)||x.isInfinite(t))throw new V;return t},G.prototype.getCoordinate=function(){var t=new C;return t.x=this.getX(),t.y=this.getY(),t},G.prototype.interfaces_=function(){return[]},G.prototype.getClass=function(){return G},G.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-r.y,l=r.x-n.x,c=n.x*r.y-r.x*n.y,u=i*l-s*o,h=(o*c-l*a)/u,p=(s*a-i*c)/u;if(x.isNaN(h)||x.isInfinite(h)||x.isNaN(p)||x.isInfinite(p))throw new V;return new C(h,p)};var W=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof C){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],l=arguments[3];this.init(o,a,s,l)}},X={serialVersionUID:{configurable:!0}};W.prototype.getArea=function(){return this.getWidth()*this.getHeight()},W.prototype.equals=function(t){if(!(t instanceof W))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},W.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new W;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new W(e,r,n,i)},W.prototype.isNull=function(){return this._maxx<this._minx},W.prototype.getMaxX=function(){return this._maxx},W.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof C){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof W){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},W.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof W){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof C){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},W.prototype.getMinY=function(){return this._miny},W.prototype.getMinX=function(){return this._minx},W.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof C){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof W){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},W.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},W.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},W.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},W.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},W.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},W.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},W.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},W.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},W.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},W.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof W){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof C){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},W.prototype.centre=function(){return this.isNull()?null:new C((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},W.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof C){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof W){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},W.prototype.getMaxY=function(){return this._maxy},W.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},W.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+C.hashCode(this._minx))+C.hashCode(this._maxx))+C.hashCode(this._miny))+C.hashCode(this._maxy)},W.prototype.interfaces_=function(){return[b,e]},W.prototype.getClass=function(){return W},W.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),l=Math.max(o.x,a.x),c=Math.min(r.x,i.x),u=Math.max(r.x,i.x);return!(c>l)&&!(u<s)&&(s=Math.min(o.y,a.y),l=Math.max(o.y,a.y),c=Math.min(r.y,i.y),u=Math.max(r.y,i.y),!(c>l)&&!(u<s))}},X.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(W,X);var q={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Y=function(t){this.geometryFactory=t||new ye};Y.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=q.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=q.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],K[n]&&(e=K[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Y.prototype.write=function(t){return this.extractGeometry(t)},Y.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Z[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Z[e].apply(this,[t])+")"};var Z={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Z.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Z.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Z.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Z.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Z.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Z.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+Z.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Z.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},K={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(q.spaces);return this.geometryFactory.createPoint(new C(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(q.trimParens,"$1"),r.push(K.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(q.spaces),r.push(new C(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(q.spaces),r.push(new C(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(q.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(q.trimParens,"$1"),r.push(K.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(q.parenComma),a=[],s=0,l=o.length;s<l;++s)e=o[s].replace(q.trimParens,"$1"),n=K.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===s?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(q.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(q.trimParens,"$1"),r.push(K.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},J=function(t){this.parser=new Y(t)};J.prototype.write=function(t){return this.parser.write(t)},J.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Q=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),tt=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Q),et=function(){};et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},et.shouldNeverReachHere=function(){if(0===arguments.length)et.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new tt("Should never reach here"+(null!==t?": "+t:""))}},et.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],et.isTrue(t,null);else if(2===arguments.length&&(e=arguments[1],!(t=arguments[0])))throw null===e?new tt:new tt(e)},et.equals=function(){var t,e,n;if(2===arguments.length)t=arguments[0],e=arguments[1],et.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new tt("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var nt=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new C,this._intPt[1]=new C,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},rt={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};nt.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},nt.prototype.getTopologySummary=function(){var t=new D;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},nt.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},nt.prototype.getIntersectionNum=function(){return this._result},nt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},nt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},nt.prototype.setPrecisionModel=function(t){this._precisionModel=t},nt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},nt.prototype.getIntersection=function(t){return this._intPt[t]},nt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},nt.prototype.hasIntersection=function(){return this._result!==nt.NO_INTERSECTION},nt.prototype.getEdgeDistance=function(t,e){return nt.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},nt.prototype.isCollinear=function(){return this._result===nt.COLLINEAR_INTERSECTION},nt.prototype.toString=function(){return J.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+J.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},nt.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},nt.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},nt.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt},nt.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=r>i?a:s)||t.equals(e)||(o=Math.max(a,s))}return et.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},nt.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return et.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},rt.DONT_INTERSECT.get=function(){return 0},rt.DO_INTERSECT.get=function(){return 1},rt.COLLINEAR.get=function(){return 2},rt.NO_INTERSECTION.get=function(){return 0},rt.POINT_INTERSECTION.get=function(){return 1},rt.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(nt,rt);var it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new W(this._inputLines[0][0],this._inputLines[0][1]),n=new W(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,W.intersects(n,r,e)&&0===st.orientationIndex(n,r,e)&&0===st.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=G.intersection(t,n,r,i)}catch(a){if(!(a instanceof V))throw a;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new C(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=z.intersection(t,e,n,r),a=this.isInSegmentEnvelopes(o);H.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&H.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new C(t),o=new C(e),a=new C(n),s=new C(r),l=new C;this.normalizeToEnvCentre(i,o,a,s,l);var c=this.safeHCoordinateIntersection(i,o,a,s);return c.x+=l.x,c.y+=l.y,c},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=W.intersects(e,n,r),a=W.intersects(e,n,i),s=W.intersects(r,i,e),l=W.intersects(r,i,n);return o&&a?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):s&&l?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||a||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&l?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&l?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,l=t.y>e.y?t.y:e.y,c=n.x<r.x?n.x:r.x,u=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,p=n.y>r.y?n.y:r.y,d=((o>c?o:c)+(s<h?s:h))/2,f=((a>u?a:u)+(l<p?l:p))/2;i.x=d,i.y=f,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!W.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=st.orientationIndex(e,n,r),a=st.orientationIndex(e,n,i);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=st.orientationIndex(r,i,e),l=st.orientationIndex(r,i,n);return s>0&&l>0||s<0&&l<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===l?this.computeCollinearIntersection(e,n,r,i):(0===o||0===a||0===s||0===l?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new C(r):0===a?this._intPt[0]=new C(i):0===s?this._intPt[0]=new C(e):0===l&&(this._intPt[0]=new C(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=st.distancePointLine(t,n,r),a=st.distancePointLine(e,n,r);return a<o&&(o=a,i=e),(a=st.distancePointLine(n,t,e))<o&&(o=a,i=n),(a=st.distancePointLine(r,t,e))<o&&(o=a,i=r),i},e}(nt),ot=function(){};ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,a=n.y-e.y;return ot.signOfDet2x2(r,i,o,a)},ot.signOfDet2x2=function(t,e,n,r){var i=null,o=null,a=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(a=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=a*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(a=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=a*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var at=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};at.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,a=e.x-this._p.x,s=e.y-this._p.y,l=ot.signOfDet2x2(i,o,a,s);if(0===l)return this._isPointOnSegment=!0,null;s<o&&(l=-l),l>0&&this._crossingCount++}},at.prototype.isPointInPolygon=function(){return this.getLocation()!==T.EXTERIOR},at.prototype.getLocation=function(){return this._isPointOnSegment?T.BOUNDARY:this._crossingCount%2==1?T.INTERIOR:T.EXTERIOR},at.prototype.isOnSegment=function(){return this._isPointOnSegment},at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},at.locatePointInRing=function(){if(arguments[0]instanceof C&&P(arguments[1],$)){for(var t=arguments[1],e=new at(arguments[0]),n=new C,r=new C,i=1;i<t.size();i++)if(t.getCoordinate(i,n),t.getCoordinate(i-1,r),e.countSegment(n,r),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof C&&arguments[1]instanceof Array){for(var o=arguments[1],a=new at(arguments[0]),s=1;s<o.length;s++){var l=o[s],c=o[s-1];if(a.countSegment(l,c),a.isOnSegment())return a.getLocation()}return a.getLocation()}};var st=function(){},lt={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.orientationIndex=function(t,e,n){return z.orientationIndex(t,e,n)},st.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(P(arguments[0],$)){var a=arguments[0],s=a.size();if(s<3)return 0;var l=new C,c=new C,u=new C;a.getCoordinate(0,c),a.getCoordinate(1,u);var h=c.x;u.x-=h;for(var p=0,d=1;d<s-1;d++)l.y=c.y,c.x=u.x,c.y=u.y,a.getCoordinate(d+1,u),u.x-=h,p+=c.x*(l.y-u.y);return p/2}},st.distanceLineLine=function(t,e,n,r){if(t.equals(e))return st.distancePointLine(t,n,r);if(n.equals(r))return st.distancePointLine(r,t,e);var i=!1;if(W.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var a=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,l=a/o;(l<0||l>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?O.min(st.distancePointLine(t,n,r),st.distancePointLine(e,n,r),st.distancePointLine(n,t,e),st.distancePointLine(r,t,e)):0},st.isPointInRing=function(t,e){return st.locatePointInRing(t,e)!==T.EXTERIOR},st.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new C;t.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<e;a++){t.getCoordinate(a,r);var s=r.x,l=r.y,c=s-i,u=l-o;n+=Math.sqrt(c*c+u*u),i=s,o=l}return n},st.isCCW=function(t){var e=t.length-1;if(e<3)throw new v("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var a=r;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==r);var s=r;do{s=(s+1)%e}while(t[s].equals2D(n)&&s!==r);var l=t[a],c=t[s];if(l.equals2D(n)||c.equals2D(n)||l.equals2D(c))return!1;var u=st.computeOrientation(l,n,c);return 0===u?l.x>c.x:u>0},st.locatePointInRing=function(t,e){return at.locatePointInRing(t,e)},st.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},st.computeOrientation=function(t,e,n){return st.orientationIndex(t,e,n)},st.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new v("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=st.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var l=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),c=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/l;if(c<=0)return o.distance(a);if(c>=1)return o.distance(s);var u=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/l;return Math.abs(u)*Math.sqrt(l)}},st.isOnLine=function(t,e){for(var n=new it,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},lt.CLOCKWISE.get=function(){return-1},lt.RIGHT.get=function(){return st.CLOCKWISE},lt.COUNTERCLOCKWISE.get=function(){return 1},lt.LEFT.get=function(){return st.COUNTERCLOCKWISE},lt.COLLINEAR.get=function(){return 0},lt.STRAIGHT.get=function(){return st.COLLINEAR},Object.defineProperties(st,lt);var ct=function(){};ct.prototype.filter=function(t){},ct.prototype.interfaces_=function(){return[]},ct.prototype.getClass=function(){return ct};var ut=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},ht={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ut.prototype.isGeometryCollection=function(){return this.getSortIndex()===ut.SORTINDEX_GEOMETRYCOLLECTION},ut.prototype.getFactory=function(){return this._factory},ut.prototype.getGeometryN=function(t){return this},ut.prototype.getArea=function(){return 0},ut.prototype.isRectangle=function(){return!1},ut.prototype.equals=function(){if(arguments[0]instanceof ut){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof ut))return!1;var n=e;return this.equalsExact(n)}},ut.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},ut.prototype.geometryChanged=function(){this.apply(ut.geometryChangedFilter)},ut.prototype.geometryChangedAction=function(){this._envelope=null},ut.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},ut.prototype.getLength=function(){return 0},ut.prototype.getNumGeometries=function(){return 1},ut.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},ut.prototype.getUserData=function(){return this._userData},ut.prototype.getSRID=function(){return this._SRID},ut.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ut.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===ut.SORTINDEX_GEOMETRYCOLLECTION)throw new v("This method does not support GeometryCollection arguments")},ut.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},ut.prototype.norm=function(){var t=this.copy();return t.normalize(),t},ut.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ut.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new W(this._envelope)},ut.prototype.setSRID=function(t){this._SRID=t},ut.prototype.setUserData=function(t){this._userData=t},ut.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0},ut.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ut.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ut.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ut.SORTINDEX_MULTIPOINT||this.getSortIndex()===ut.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ut.SORTINDEX_MULTIPOLYGON},ut.prototype.interfaces_=function(){return[w,b,e]},ut.prototype.getClass=function(){return ut},ut.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},ut.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},ht.serialVersionUID.get=function(){return 0x799ea46522854c00},ht.SORTINDEX_POINT.get=function(){return 0},ht.SORTINDEX_MULTIPOINT.get=function(){return 1},ht.SORTINDEX_LINESTRING.get=function(){return 2},ht.SORTINDEX_LINEARRING.get=function(){return 3},ht.SORTINDEX_MULTILINESTRING.get=function(){return 4},ht.SORTINDEX_POLYGON.get=function(){return 5},ht.SORTINDEX_MULTIPOLYGON.get=function(){return 6},ht.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},ht.geometryChangedFilter.get=function(){return pt},Object.defineProperties(ut,ht);var pt=function(){};pt.interfaces_=function(){return[ct]},pt.filter=function(t){t.geometryChangedAction()};var dt=function(){};dt.prototype.filter=function(t){},dt.prototype.interfaces_=function(){return[]},dt.prototype.getClass=function(){return dt};var ft=function(){},gt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};ft.prototype.isInBoundary=function(t){},ft.prototype.interfaces_=function(){return[]},ft.prototype.getClass=function(){return ft},gt.Mod2BoundaryNodeRule.get=function(){return mt},gt.EndPointBoundaryNodeRule.get=function(){return yt},gt.MultiValentEndPointBoundaryNodeRule.get=function(){return vt},gt.MonoValentEndPointBoundaryNodeRule.get=function(){return xt},gt.MOD2_BOUNDARY_RULE.get=function(){return new mt},gt.ENDPOINT_BOUNDARY_RULE.get=function(){return new yt},gt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new vt},gt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new xt},gt.OGC_SFS_BOUNDARY_RULE.get=function(){return ft.MOD2_BOUNDARY_RULE},Object.defineProperties(ft,gt);var mt=function(){};mt.prototype.isInBoundary=function(t){return t%2==1},mt.prototype.interfaces_=function(){return[ft]},mt.prototype.getClass=function(){return mt};var yt=function(){};yt.prototype.isInBoundary=function(t){return t>0},yt.prototype.interfaces_=function(){return[ft]},yt.prototype.getClass=function(){return yt};var vt=function(){};vt.prototype.isInBoundary=function(t){return t>1},vt.prototype.interfaces_=function(){return[ft]},vt.prototype.getClass=function(){return vt};var xt=function(){};xt.prototype.isInBoundary=function(t){return 1===t},xt.prototype.interfaces_=function(){return[ft]},xt.prototype.getClass=function(){return xt};var _t=function(){};_t.prototype.add=function(){},_t.prototype.addAll=function(){},_t.prototype.isEmpty=function(){},_t.prototype.iterator=function(){},_t.prototype.size=function(){},_t.prototype.toArray=function(){},_t.prototype.remove=function(){},(n.prototype=new Error).name="IndexOutOfBoundsException";var bt=function(){};bt.prototype.hasNext=function(){},bt.prototype.next=function(){},bt.prototype.remove=function(){};var wt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(_t);(r.prototype=new Error).name="NoSuchElementException";var St=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof _t&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,_t]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Ct(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new n;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(wt),Ct=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new r;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(bt),Et=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[1],n=!1,r=arguments[0].iterator();r.hasNext();)this.add(r.next(),e),n=!0;return n}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1];return this.add(n,r,!0),!0}if(arguments[0]instanceof C&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;t.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],l=arguments[1];if(arguments[2])for(var c=0;c<s.length;c++)this.add(s[c],l);else for(var u=s.length-1;u>=0;u--)this.add(s[u],l);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof C){var h=arguments[0],p=arguments[1];if(!arguments[2]){var d=this.size();if(d>0){if(h>0&&this.get(h-1).equals2D(p))return null;if(h<d&&this.get(h).equals2D(p))return null}}t.prototype.add.call(this,h,p)}}else if(4===arguments.length){var f=arguments[0],g=arguments[1],m=arguments[2],y=arguments[3],v=1;m>y&&(v=-1);for(var x=m;x!==y;x+=v)this.add(f[x],g);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new C(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(St),kt=function(){},Mt={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Mt.ForwardComparator.get=function(){return Tt},Mt.BidirectionalComparator.get=function(){return It},Mt.coordArrayType.get=function(){return new Array(0).fill(null)},kt.prototype.interfaces_=function(){return[]},kt.prototype.getClass=function(){return kt},kt.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},kt.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(kt.indexOf(r,e)<0)return r}return null},kt.scroll=function(t,e){var n=kt.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);H.arraycopy(t,n,r,0,t.length-n),H.arraycopy(t,0,r,t.length-n,n),H.arraycopy(r,0,t,0,t.length)},kt.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],i[a]))return!1;return!0}},kt.intersection=function(t,e){for(var n=new Et,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},kt.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},kt.removeRepeatedPoints=function(t){return kt.hasRepeatedPoints(t)?new Et(t,!1).toCoordinateArray():t},kt.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},kt.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},kt.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new C(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],l=0;l<s;l++)o[a+l]=new C(r[i+l])},kt.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},kt.envelope=function(t){for(var e=new W,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},kt.toCoordinateArray=function(t){return t.toArray(kt.coordArrayType)},kt.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},kt.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},kt.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},kt.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},kt.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},kt.extract=function(t,e,n){e=O.clamp(e,0,t.length);var r=(n=O.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=e;a<=n;a++)i[o++]=t[a];return i},Object.defineProperties(kt,Mt);var Tt=function(){};Tt.prototype.compare=function(t,e){return kt.compare(t,e)},Tt.prototype.interfaces_=function(){return[S]},Tt.prototype.getClass=function(){return Tt};var It=function(){};It.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=kt.compare(n,r);return kt.isEqualReversed(n,r)?0:i},It.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=kt.increasingDirection(n),o=kt.increasingDirection(r),a=i>0?0:n.length-1,s=o>0?0:n.length-1,l=0;l<n.length;l++){var c=n[a].compareTo(r[s]);if(0!==c)return c;a+=i,s+=o}return 0},It.prototype.interfaces_=function(){return[S]},It.prototype.getClass=function(){return It};var Pt=function(){};Pt.prototype.get=function(){},Pt.prototype.put=function(){},Pt.prototype.size=function(){},Pt.prototype.values=function(){},Pt.prototype.entrySet=function(){};var Ot=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pt);(i.prototype=new Error).name="OperationNotSupported",(o.prototype=new _t).contains=function(){};var At=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof _t&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Dt(this)},e}(o),Dt=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new r;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new i},e}(bt),Rt=0;(h.prototype=new Ot).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},h.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Rt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:n,color:Rt,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},h.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(s(t)===c(s(s(t)))){var e=u(s(s(t)));1===a(e)?(l(s(t),Rt),l(e,Rt),l(s(s(t)),1),t=s(s(t))):(t===u(s(t))&&(t=s(t),this.rotateLeft(t)),l(s(t),Rt),l(s(s(t)),1),this.rotateRight(s(s(t))))}else{var n=c(s(s(t)));1===a(n)?(l(s(t),Rt),l(n,Rt),l(s(s(t)),1),t=s(s(t))):(t===c(s(t))&&(t=s(t),this.rotateRight(t)),l(s(t),Rt),l(s(s(t)),1),this.rotateLeft(s(s(t))))}this.root_.color=Rt},h.prototype.values=function(){var t=new St,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=h.successor(e));)t.add(e.value);return t},h.prototype.entrySet=function(){var t=new At,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=h.successor(e));)t.add(e);return t},h.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},h.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},h.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},h.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},h.prototype.size=function(){return this.size_};var Lt=function(){};Lt.prototype.interfaces_=function(){return[]},Lt.prototype.getClass=function(){return Lt},p.prototype=new o,(d.prototype=new p).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},d.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},d.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},d.prototype.remove=function(t){throw new i},d.prototype.size=function(){return this.array_.length},d.prototype.isEmpty=function(){return 0===this.array_.length},d.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},d.prototype.iterator=function(){return new Nt(this)};var Nt=function(t){this.treeSet_=t,this.position_=0};Nt.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new r;return this.treeSet_.array_[this.position_++]},Nt.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Nt.prototype.remove=function(){throw new i};var Ft=function(){};Ft.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},Ft.asList=function(t){for(var e=new St,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var zt=function(){},Bt={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Bt.P.get=function(){return 0},Bt.L.get=function(){return 1},Bt.A.get=function(){return 2},Bt.FALSE.get=function(){return-1},Bt.TRUE.get=function(){return-2},Bt.DONTCARE.get=function(){return-3},Bt.SYM_FALSE.get=function(){return"F"},Bt.SYM_TRUE.get=function(){return"T"},Bt.SYM_DONTCARE.get=function(){return"*"},Bt.SYM_P.get=function(){return"0"},Bt.SYM_L.get=function(){return"1"},Bt.SYM_A.get=function(){return"2"},zt.prototype.interfaces_=function(){return[]},zt.prototype.getClass=function(){return zt},zt.toDimensionSymbol=function(t){switch(t){case zt.FALSE:return zt.SYM_FALSE;case zt.TRUE:return zt.SYM_TRUE;case zt.DONTCARE:return zt.SYM_DONTCARE;case zt.P:return zt.SYM_P;case zt.L:return zt.SYM_L;case zt.A:return zt.SYM_A}throw new v("Unknown dimension value: "+t)},zt.toDimensionValue=function(t){switch(L.toUpperCase(t)){case zt.SYM_FALSE:return zt.FALSE;case zt.SYM_TRUE:return zt.TRUE;case zt.SYM_DONTCARE:return zt.DONTCARE;case zt.SYM_P:return zt.P;case zt.SYM_L:return zt.L;case zt.SYM_A:return zt.A}throw new v("Unknown dimension symbol: "+t)},Object.defineProperties(zt,Bt);var $t=function(){};$t.prototype.filter=function(t){},$t.prototype.interfaces_=function(){return[]},$t.prototype.getClass=function(){return $t};var jt=function(){};jt.prototype.filter=function(t,e){},jt.prototype.isDone=function(){},jt.prototype.isGeometryChanged=function(){},jt.prototype.interfaces_=function(){return[]},jt.prototype.getClass=function(){return jt};var Ut=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new v("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new W,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Ft.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=zt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=zt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new d(Ft.asList(this._geometries)),n=new d(Ft.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[1],i=arguments[0],o=this.getNumGeometries(),a=i.getNumGeometries(),s=0;s<o&&s<a;){var l=this.getGeometryN(s),c=i.getGeometryN(s),u=l.compareToSameClass(c,r);if(0!==u)return u;s++}return s<o?1:s<a?-1:0}},e.prototype.apply=function(){if(P(arguments[0],dt))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(P(arguments[0],jt)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(P(arguments[0],$t)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(P(arguments[0],ct)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),et.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(ut),Vt=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ut.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?zt.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Ht(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Lt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(Ut),Ht=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=ft.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};Ht.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Ht.prototype.getBoundary=function(){return this._geom instanceof Yt?this.boundaryLineString(this._geom):this._geom instanceof Vt?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Ht.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Ht.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Ht.prototype.computeBoundaryCoordinates=function(t){var e=new St;this._endpointMap=new h;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return kt.toCoordinateArray(e)},Ht.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Gt,this._endpointMap.put(t,e)),e.count++},Ht.prototype.interfaces_=function(){return[]},Ht.prototype.getClass=function(){return Ht},Ht.getBoundary=function(){return 1===arguments.length?new Ht(arguments[0]).getBoundary():2===arguments.length?new Ht(arguments[0],arguments[1]).getBoundary():void 0};var Gt=function(){this.count=null};Gt.prototype.interfaces_=function(){return[]},Gt.prototype.getClass=function(){return Gt};var Wt=function(){},Xt={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Wt.prototype.interfaces_=function(){return[]},Wt.prototype.getClass=function(){return Wt},Wt.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Wt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",a=new function(){}(new function(){}(Wt.getStackTrace(r))),s=0;s<i;s++)try{o+=a.readLine()+Wt.NEWLINE}catch(t){if(!(t instanceof f))throw t;et.shouldNeverReachHere()}return o}},Wt.split=function(t,e){for(var n=e.length,r=new St,i=""+t,o=i.indexOf(e);o>=0;){var a=i.substring(0,o);r.add(a),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var s=new Array(r.size()).fill(null),l=0;l<s.length;l++)s[l]=r.get(l);return s},Wt.toString=function(){if(1===arguments.length){var t=arguments[0];return Wt.SIMPLE_ORDINATE_FORMAT.format(t)}},Wt.spaces=function(t){return Wt.chars(" ",t)},Xt.NEWLINE.get=function(){return H.getProperty("line.separator")},Xt.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Wt,Xt);var qt=function(){};qt.prototype.interfaces_=function(){return[]},qt.prototype.getClass=function(){return qt},qt.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},qt.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,$.X)===t.getOrdinate(e-1,$.X)&&t.getOrdinate(0,$.Y)===t.getOrdinate(e-1,$.Y)},qt.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(t.getOrdinate(i,o)!==e.getOrdinate(i,o)&&(!x.isNaN(a)||!x.isNaN(s)))return!1}return!0},qt.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(qt.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)qt.copy(e,i-1,r,o,1);return r},qt.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)qt.swap(t,r,e-r)},qt.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},qt.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)qt.copyCoord(t,e+o,n,r+o)},qt.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new D;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Wt.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},qt.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?qt.createClosedRing(t,e,4):e.getOrdinate(0,$.X)===e.getOrdinate(n-1,$.X)&&e.getOrdinate(0,$.Y)===e.getOrdinate(n-1,$.Y)?e:qt.createClosedRing(t,e,n+1)},qt.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();qt.copy(e,0,r,0,i);for(var o=i;o<n;o++)qt.copy(e,0,r,o,1);return r};var Yt=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new W:this._points.expandEnvelope(new W)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&qt.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?zt.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return st.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return qt.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(P(arguments[0],dt))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(P(arguments[0],jt)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else(P(arguments[0],$t)||P(arguments[0],ct))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Ht(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new v("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Lt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(ut),Zt=function(){};Zt.prototype.interfaces_=function(){return[]},Zt.prototype.getClass=function(){return Zt};var Kt=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new W;var t=new W;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return zt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(P(arguments[0],dt)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(P(arguments[0],jt)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(P(arguments[0],$t)||P(arguments[0],ct))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),et.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Zt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(ut),Jt=function(){};Jt.prototype.interfaces_=function(){return[]},Jt.prototype.getClass=function(){return Jt};var Qt=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new v("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new v("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(st.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(st.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var l=t.getX(s),c=t.getY(s);if(l!==o===(c!==a))return!1;o=l,a=c}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e,i=this._shell,o=r._shell;if(!i.equalsExact(o,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(r._holes[a],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);Ft.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);H.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=kt.minCoordinate(e.getCoordinates());kt.scroll(r,i),H.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],st.isCCW(e.getCoordinates())===n&&kt.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[1],i=arguments[0],o=this._shell,a=i._shell,s=o.compareToSameClass(a,r);if(0!==s)return s;for(var l=this.getNumInteriorRing(),c=i.getNumInteriorRing(),u=0;u<l&&u<c;){var h=this.getInteriorRingN(u),p=i.getInteriorRingN(u),d=h.compareToSameClass(p,r);if(0!==d)return d;u++}return u<l?1:u<c?-1:0}},e.prototype.apply=function(t){if(P(t,dt)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(P(t,jt)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(P(t,$t))t.filter(this);else if(P(t,ct)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Jt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(ut),te=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ut.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return zt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Zt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(Ut),ee=function(t){function e(e,n){e instanceof C&&n instanceof ye&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ut.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return zt.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return qt.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new v("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new v("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Yt),ne=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ut.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new St,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Jt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(Ut),re=function(t){this._factory=t||null,this._isUserDataCopied=!1},ie={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};re.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},re.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},re.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Ut?this.editGeometryCollection(t,e):t instanceof Qt?this.editPolygon(t,e):t instanceof Kt||t instanceof Yt?e.edit(t,this._factory):(et.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},re.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new St,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===te?this._factory.createMultiPoint(r.toArray([])):n.getClass()===Vt?this._factory.createMultiLineString(r.toArray([])):n.getClass()===ne?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},re.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new St,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(r,i.toArray([]))},re.prototype.interfaces_=function(){return[]},re.prototype.getClass=function(){return re},re.GeometryEditorOperation=function(){},ie.NoOpGeometryOperation.get=function(){return oe},ie.CoordinateOperation.get=function(){return ae},ie.CoordinateSequenceOperation.get=function(){return se},Object.defineProperties(re,ie);var oe=function(){};oe.prototype.edit=function(t,e){return t},oe.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},oe.prototype.getClass=function(){return oe};var ae=function(){};ae.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof ee?e.createLinearRing(n):t instanceof Yt?e.createLineString(n):t instanceof Kt?n.length>0?e.createPoint(n[0]):e.createPoint():t},ae.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},ae.prototype.getClass=function(){return ae};var se=function(){};se.prototype.edit=function(t,e){return t instanceof ee?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Yt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Kt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},se.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},se.prototype.getClass=function(){return se};var le=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new C}else if(P(arguments[0],$)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=s;for(var l=0;l<a;l++)this._coordinates[l]=new C}},ce={serialVersionUID:{configurable:!0}};le.prototype.setOrdinate=function(t,e,n){switch(e){case $.X:this._coordinates[t].x=n;break;case $.Y:this._coordinates[t].y=n;break;case $.Z:this._coordinates[t].z=n;break;default:throw new v("invalid ordinateIndex")}},le.prototype.size=function(){return this._coordinates.length},le.prototype.getOrdinate=function(t,e){switch(e){case $.X:return this._coordinates[t].x;case $.Y:return this._coordinates[t].y;case $.Z:return this._coordinates[t].z}return x.NaN},le.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},le.prototype.getCoordinateCopy=function(t){return new C(this._coordinates[t])},le.prototype.getDimension=function(){return this._dimension},le.prototype.getX=function(t){return this._coordinates[t].x},le.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new le(t,this._dimension)},le.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},le.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new le(t,this._dimension)},le.prototype.toString=function(){if(this._coordinates.length>0){var t=new D(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},le.prototype.getY=function(t){return this._coordinates[t].y},le.prototype.toCoordinateArray=function(){return this._coordinates},le.prototype.interfaces_=function(){return[$,e]},le.prototype.getClass=function(){return le},ce.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(le,ce);var ue=function(){},he={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ue.prototype.readResolve=function(){return ue.instance()},ue.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new le(arguments[0]);if(P(arguments[0],$))return new le(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new le(t):new le(t,e)}},ue.prototype.interfaces_=function(){return[M,e]},ue.prototype.getClass=function(){return ue},ue.instance=function(){return ue.instanceObject},he.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},he.instanceObject.get=function(){return new ue},Object.defineProperties(ue,he);var pe=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new St,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new At;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(Pt),de=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ge){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},fe={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};de.prototype.equals=function(t){if(!(t instanceof de))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},de.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new R(n).compareTo(new R(r))},de.prototype.getScale=function(){return this._scale},de.prototype.isFloating=function(){return this._modelType===de.FLOATING||this._modelType===de.FLOATING_SINGLE},de.prototype.getType=function(){return this._modelType},de.prototype.toString=function(){var t="UNKNOWN";return this._modelType===de.FLOATING?t="Floating":this._modelType===de.FLOATING_SINGLE?t="Floating-Single":this._modelType===de.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},de.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return x.isNaN(t)||this._modelType===de.FLOATING_SINGLE?t:this._modelType===de.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof C){var e=arguments[0];if(this._modelType===de.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},de.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===de.FLOATING?t=16:this._modelType===de.FLOATING_SINGLE?t=6:this._modelType===de.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},de.prototype.setScale=function(t){this._scale=Math.abs(t)},de.prototype.interfaces_=function(){return[e,b]},de.prototype.getClass=function(){return de},de.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},fe.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},fe.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(de,fe);var ge=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},me={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};ge.prototype.readResolve=function(){return ge.nameToTypeMap.get(this._name)},ge.prototype.toString=function(){return this._name},ge.prototype.interfaces_=function(){return[e]},ge.prototype.getClass=function(){return ge},me.serialVersionUID.get=function(){return-552860263173159e4},me.nameToTypeMap.get=function(){return new pe},Object.defineProperties(ge,me),de.Type=ge,de.FIXED=new ge("FIXED"),de.FLOATING=new ge("FLOATING"),de.FLOATING_SINGLE=new ge("FLOATING SINGLE");var ye=function t(){this._precisionModel=new de,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?P(arguments[0],M)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof de&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},ve={serialVersionUID:{configurable:!0}};ye.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new C(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new C(t.getMinX(),t.getMinY()),new C(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new C(t.getMinX(),t.getMinY()),new C(t.getMinX(),t.getMaxY()),new C(t.getMaxX(),t.getMaxY()),new C(t.getMaxX(),t.getMinY()),new C(t.getMinX(),t.getMinY())]),null)},ye.prototype.createLineString=function(t){return t?t instanceof Array?new Yt(this.getCoordinateSequenceFactory().create(t),this):P(t,$)?new Yt(t,this):void 0:new Yt(this.getCoordinateSequenceFactory().create([]),this)},ye.prototype.createMultiLineString=function(){return 0===arguments.length?new Vt(null,this):1===arguments.length?new Vt(arguments[0],this):void 0},ye.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(ye.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof Qt)return this.createMultiPolygon(ye.toPolygonArray(t));if(s instanceof Yt)return this.createMultiLineString(ye.toLineStringArray(t));if(s instanceof Kt)return this.createMultiPoint(ye.toPointArray(t));et.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},ye.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},ye.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof C){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(P(arguments[0],$))return new Kt(arguments[0],this)}},ye.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},ye.prototype.createPolygon=function(){if(0===arguments.length)return new Qt(null,null,this);if(1===arguments.length){if(P(arguments[0],$)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ee){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new Qt(arguments[0],arguments[1],this)},ye.prototype.getSRID=function(){return this._SRID},ye.prototype.createGeometryCollection=function(){return 0===arguments.length?new Ut(null,this):1===arguments.length?new Ut(arguments[0],this):void 0},ye.prototype.createGeometry=function(t){return new re(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},ye.prototype.getPrecisionModel=function(){return this._precisionModel},ye.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(P(arguments[0],$))return new ee(arguments[0],this)}},ye.prototype.createMultiPolygon=function(){return 0===arguments.length?new ne(null,this):1===arguments.length?new ne(arguments[0],this):void 0},ye.prototype.createMultiPoint=function(){if(0===arguments.length)return new te(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new te(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(P(arguments[0],$)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),r=0;r<e.size();r++){var i=this.getCoordinateSequenceFactory().create(1,e.getDimension());qt.copy(e,r,i,0,1),n[r]=this.createPoint(i)}return this.createMultiPoint(n)}}},ye.prototype.interfaces_=function(){return[e]},ye.prototype.getClass=function(){return ye},ye.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.getDefaultCoordinateSequenceFactory=function(){return ue.instance()},ye.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},ve.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(ye,ve);var xe=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],_e=function(t){this.geometryFactory=t||new ye};_e.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!be[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==xe.indexOf(n)?be[n].apply(this,[e.coordinates]):"GeometryCollection"===n?be[n].apply(this,[e.geometries]):be[n].apply(this,[e])},_e.prototype.write=function(t){var e=t.getGeometryType();if(!we[e])throw new Error("Geometry is not supported");return we[e].apply(this,[t])};var be={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!be[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=be.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new C(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new C(t[0],t[1]),new C(t[2],t[1]),new C(t[2],t[3]),new C(t[0],t[3]),new C(t[0],t[1])])},Point:function(t){var e=new C(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(be.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=be.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(be.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=be.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],a=be.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(be.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},we={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:we.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=we.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(we.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=we.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=we.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=we.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=we.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(we[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},Se=function(t){this.geometryFactory=t||new ye,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new _e(this.geometryFactory)};Se.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===de.FIXED&&this.reducePrecision(e),e},Se.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Ce=function(){this.parser=new _e(this.geometryFactory)};Ce.prototype.write=function(t){return this.parser.write(t)};var Ee=function(){},ke={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Ee.prototype.interfaces_=function(){return[]},Ee.prototype.getClass=function(){return Ee},Ee.opposite=function(t){return t===Ee.LEFT?Ee.RIGHT:t===Ee.RIGHT?Ee.LEFT:t},ke.ON.get=function(){return 0},ke.LEFT.get=function(){return 1},ke.RIGHT.get=function(){return 2},Object.defineProperties(Ee,ke),(g.prototype=new Error).name="EmptyStackException",(m.prototype=new wt).add=function(t){return this.array_.push(t),!0},m.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},m.prototype.push=function(t){return this.array_.push(t),t},m.prototype.pop=function(t){if(0===this.array_.length)throw new g;return this.array_.pop()},m.prototype.peek=function(){if(0===this.array_.length)throw new g;return this.array_[this.array_.length-1]},m.prototype.empty=function(){return 0===this.array_.length},m.prototype.isEmpty=function(){return this.empty()},m.prototype.search=function(t){return this.array_.indexOf(t)},m.prototype.size=function(){return this.array_.length},m.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Me=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Me.prototype.getCoordinate=function(){return this._minCoord},Me.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Me.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();et.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=st.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===st.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===st.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Me.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Ee.LEFT;return n[e].y<n[e+1].y&&(r=Ee.RIGHT),r},Me.prototype.getEdge=function(){return this._orientedDe},Me.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Me.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Me.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}et.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Ee.LEFT&&(this._orientedDe=this._minDe.getSym())},Me.prototype.interfaces_=function(){return[]},Me.prototype.getClass=function(){return Me};var Te=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new C(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Q),Ie=function(){this.array_=[]};Ie.prototype.addLast=function(t){this.array_.push(t)},Ie.prototype.removeFirst=function(){return this.array_.shift()},Ie.prototype.isEmpty=function(){return 0===this.array_.length};var Pe=function(){this._finder=null,this._dirEdgeList=new St,this._nodes=new St,this._rightMostCoord=null,this._env=null,this._finder=new Me};Pe.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Pe.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Pe.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Te("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Pe.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Ee.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Pe.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Pe.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Ee.RIGHT)>=1&&e.getDepth(Ee.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Pe.prototype.computeDepths=function(t){var e=new At,n=new Ie,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},Pe.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Pe.prototype.getEnvelope=function(){if(null===this._env){for(var t=new W,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Pe.prototype.addReachable=function(t){var e=new m;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Pe.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Ee.LEFT,t.getDepth(Ee.RIGHT)),e.setDepth(Ee.RIGHT,t.getDepth(Ee.LEFT))},Pe.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Pe.prototype.getNodes=function(){return this._nodes},Pe.prototype.getDirectedEdges=function(){return this._dirEdgeList},Pe.prototype.interfaces_=function(){return[b]},Pe.prototype.getClass=function(){return Pe};var Oe=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Ee.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[Ee.ON]=o,this.location[Ee.LEFT]=a,this.location[Ee.RIGHT]=s}};Oe.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Oe.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==T.NONE)return!1;return!0},Oe.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===T.NONE&&(this.location[e]=t)},Oe.prototype.isLine=function(){return 1===this.location.length},Oe.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Ee.ON]=this.location[Ee.ON],e[Ee.LEFT]=T.NONE,e[Ee.RIGHT]=T.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===T.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Oe.prototype.getLocations=function(){return this.location},Oe.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Ee.LEFT];this.location[Ee.LEFT]=this.location[Ee.RIGHT],this.location[Ee.RIGHT]=t},Oe.prototype.toString=function(){var t=new D;return this.location.length>1&&t.append(T.toLocationSymbol(this.location[Ee.LEFT])),t.append(T.toLocationSymbol(this.location[Ee.ON])),this.location.length>1&&t.append(T.toLocationSymbol(this.location[Ee.RIGHT])),t.toString()},Oe.prototype.setLocations=function(t,e,n){this.location[Ee.ON]=t,this.location[Ee.LEFT]=e,this.location[Ee.RIGHT]=n},Oe.prototype.get=function(t){return t<this.location.length?this.location[t]:T.NONE},Oe.prototype.isArea=function(){return this.location.length>1},Oe.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===T.NONE)return!0;return!1},Oe.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Ee.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Oe.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(T.NONE)},Oe.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Oe.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Oe.prototype.interfaces_=function(){return[]},Oe.prototype.getClass=function(){return Oe};var Ae=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Oe(e),this.elt[1]=new Oe(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Oe(n.elt[0]),this.elt[1]=new Oe(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Oe(T.NONE),this.elt[1]=new Oe(T.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new Oe(o,a,s),this.elt[1]=new Oe(o,a,s)}else if(4===arguments.length){var l=arguments[0],c=arguments[1],u=arguments[2],h=arguments[3];this.elt[0]=new Oe(T.NONE,T.NONE,T.NONE),this.elt[1]=new Oe(T.NONE,T.NONE,T.NONE),this.elt[l].setLocations(c,u,h)}};Ae.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Ae.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Ae.prototype.isNull=function(t){return this.elt[t].isNull()},Ae.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Ae.prototype.isLine=function(t){return this.elt[t].isLine()},Ae.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Oe(t.elt[e]):this.elt[e].merge(t.elt[e])},Ae.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Ae.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Ee.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Ae.prototype.toString=function(){var t=new D;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Ae.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Ae.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Ae.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Ee.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Ae.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Ae.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Ae.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Oe(this.elt[t].location[0]))},Ae.prototype.interfaces_=function(){return[]},Ae.prototype.getClass=function(){return Ae},Ae.toLineLabel=function(t){for(var e=new Ae(T.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var De=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new St,this._pts=new St,this._label=new Ae(T.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new St,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};De.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=st.isCCW(this._ring.getCoordinates())},De.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},De.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Te("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Te("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();et.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},De.prototype.getLinearRing=function(){return this._ring},De.prototype.getCoordinate=function(t){return this._pts.get(t)},De.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},De.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;n&&(a=r.length-1);for(var s=a;s>=0;s--)this._pts.add(r[s])}},De.prototype.isHole=function(){return this._isHole},De.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},De.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!st.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},De.prototype.addHole=function(t){this._holes.add(t)},De.prototype.isShell=function(){return null===this._shell},De.prototype.getLabel=function(){return this._label},De.prototype.getEdges=function(){return this._edges},De.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},De.prototype.getShell=function(){return this._shell},De.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Ee.RIGHT);if(n===T.NONE)return null;if(this._label.getLocation(e)===T.NONE)return this._label.setLocation(e,n),null}},De.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},De.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},De.prototype.interfaces_=function(){return[]},De.prototype.getClass=function(){return De};var Re=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(De),Le=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new St,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Re(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(De),Ne=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};Ne.prototype.setVisited=function(t){this._isVisited=t},Ne.prototype.setInResult=function(t){this._isInResult=t},Ne.prototype.isCovered=function(){return this._isCovered},Ne.prototype.isCoveredSet=function(){return this._isCoveredSet},Ne.prototype.setLabel=function(t){this._label=t},Ne.prototype.getLabel=function(){return this._label},Ne.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Ne.prototype.updateIM=function(t){et.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Ne.prototype.isInResult=function(){return this._isInResult},Ne.prototype.isVisited=function(){return this._isVisited},Ne.prototype.interfaces_=function(){return[]},Ne.prototype.getClass=function(){return Ne};var Fe=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Ae(0,T.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=T.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==T.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Ae(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Ae)for(var n=arguments[0],r=0;r<2;r++){var i=this.computeMergedLocation(n,r);this._label.getLocation(r)===T.NONE&&this._label.setLocation(r,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=T.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case T.BOUNDARY:n=T.INTERIOR;break;case T.INTERIOR:default:n=T.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ne),ze=function(){this.nodeMap=new h,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};ze.prototype.find=function(t){return this.nodeMap.get(t)},ze.prototype.addNode=function(){if(arguments[0]instanceof C){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Fe){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},ze.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},ze.prototype.iterator=function(){return this.nodeMap.values().iterator()},ze.prototype.values=function(){return this.nodeMap.values()},ze.prototype.getBoundaryNodes=function(t){for(var e=new St,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===T.BOUNDARY&&e.add(r)}return e},ze.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},ze.prototype.interfaces_=function(){return[]},ze.prototype.getClass=function(){return ze};var Be=function(){},$e={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Be.prototype.interfaces_=function(){return[]},Be.prototype.getClass=function(){return Be},Be.isNorthern=function(t){return t===Be.NE||t===Be.NW},Be.isOpposite=function(t,e){return t!==e&&2===(t-e+4)%4},Be.commonHalfPlane=function(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},Be.isInHalfPlane=function(t,e){return e===Be.SE?t===Be.SE||t===Be.SW:t===e||t===e+1},Be.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new v("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Be.NE:Be.SE:e>=0?Be.NW:Be.SW}if(arguments[0]instanceof C&&arguments[1]instanceof C){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new v("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Be.NE:Be.SE:r.y>=n.y?Be.NW:Be.SW}},$e.NE.get=function(){return 0},$e.NW.get=function(){return 1},$e.SW.get=function(){return 2},$e.SE.get=function(){return 3},Object.defineProperties(Be,$e);var je=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._edge=e,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this._edge=i,this.init(o,a),this._label=s}};je.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:st.computeOrientation(t._p0,t._p1,this._p1)},je.prototype.getDy=function(){return this._dy},je.prototype.getCoordinate=function(){return this._p0},je.prototype.setNode=function(t){this._node=t},je.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},je.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},je.prototype.getDirectedCoordinate=function(){return this._p1},je.prototype.getDx=function(){return this._dx},je.prototype.getLabel=function(){return this._label},je.prototype.getEdge=function(){return this._edge},je.prototype.getQuadrant=function(){return this._quadrant},je.prototype.getNode=function(){return this._node},je.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},je.prototype.computeLabel=function(t){},je.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Be.quadrant(this._dx,this._dy),et.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},je.prototype.interfaces_=function(){return[b]},je.prototype.getClass=function(){return je};var Ue=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Ae(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Te("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Ee.LEFT)===T.INTERIOR&&this._label.getLocation(e,Ee.RIGHT)===T.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Ee.LEFT]+"/"+this._depth[Ee.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,T.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,T.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Ee.LEFT&&(r=-1);var i=Ee.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===T.EXTERIOR&&e===T.INTERIOR?1:t===T.INTERIOR&&e===T.EXTERIOR?-1:0},e}(je),Ve=function(){};Ve.prototype.createNode=function(t){return new Fe(t,null)},Ve.prototype.interfaces_=function(){return[]},Ve.prototype.getClass=function(){return Ve};var He=function(){if(this._edges=new St,this._nodes=null,this._edgeEndList=new St,0===arguments.length)this._nodes=new ze(new Ve);else if(1===arguments.length){var t=arguments[0];this._nodes=new ze(t)}};He.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},He.prototype.find=function(t){return this._nodes.find(t)},He.prototype.addNode=function(){if(arguments[0]instanceof Fe){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof C){var e=arguments[0];return this._nodes.addNode(e)}},He.prototype.getNodeIterator=function(){return this._nodes.iterator()},He.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},He.prototype.debugPrintln=function(t){H.out.println(t)},He.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===T.BOUNDARY},He.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},He.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&st.computeOrientation(t,e,r)===st.COLLINEAR&&Be.quadrant(t,e)===Be.quadrant(n,r)},He.prototype.getEdgeEnds=function(){return this._edgeEndList},He.prototype.debugPrint=function(t){H.out.print(t)},He.prototype.getEdgeIterator=function(){return this._edges.iterator()},He.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},He.prototype.insertEdge=function(t){this._edges.add(t)},He.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},He.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new Ue(n,!0),i=new Ue(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},He.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},He.prototype.getNodes=function(){return this._nodes.values()},He.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},He.prototype.interfaces_=function(){return[]},He.prototype.getClass=function(){return He},He.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Ge=function(){this._geometryFactory=null,this._shellList=new St;var t=arguments[0];this._geometryFactory=t};Ge.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},Ge.prototype.computePolygons=function(t){for(var e=new St,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Ge.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Te("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},Ge.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new St,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else r.add(o)}return r},Ge.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Ge.prototype.buildMaximalEdgeRings=function(t){for(var e=new St,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Le(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},Ge.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Ge.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Ge.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var l=s.next(),c=l.getLinearRing(),u=c.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var h=!1;u.contains(r)&&st.isPointInRing(i,c.getCoordinates())&&(h=!0),h&&(null===o||a.contains(u))&&(o=l)}return o},Ge.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return et.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Ge.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];He.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new St,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Ge.prototype.interfaces_=function(){return[]},Ge.prototype.getClass=function(){return Ge};var We=function(){};We.prototype.getBounds=function(){},We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We};var Xe=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Xe.prototype.getItem=function(){return this._item},Xe.prototype.getBounds=function(){return this._bounds},Xe.prototype.interfaces_=function(){return[We,e]},Xe.prototype.getClass=function(){return Xe};var qe=function(){this._size=null,this._items=null,this._size=0,this._items=new St,this._items.add(null)};qe.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},qe.prototype.size=function(){return this._size},qe.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},qe.prototype.clear=function(){this._size=0,this._items.clear()},qe.prototype.isEmpty=function(){return 0===this._size},qe.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},qe.prototype.interfaces_=function(){return[]},qe.prototype.getClass=function(){return qe};var Ye=function(){};Ye.prototype.visitItem=function(t){},Ye.prototype.interfaces_=function(){return[]},Ye.prototype.getClass=function(){return Ye};var Ze=function(){};Ze.prototype.insert=function(t,e){},Ze.prototype.remove=function(t,e){},Ze.prototype.query=function(){},Ze.prototype.interfaces_=function(){return[]},Ze.prototype.getClass=function(){return Ze};var Ke=function(){if(this._childBoundables=new St,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Je={serialVersionUID:{configurable:!0}};Ke.prototype.getLevel=function(){return this._level},Ke.prototype.size=function(){return this._childBoundables.size()},Ke.prototype.getChildBoundables=function(){return this._childBoundables},Ke.prototype.addChildBoundable=function(t){et.isTrue(null===this._bounds),this._childBoundables.add(t)},Ke.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Ke.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Ke.prototype.interfaces_=function(){return[We,e]},Ke.prototype.getClass=function(){return Ke},Je.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Ke,Je);var Qe=function(){};Qe.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Qe.min=function(t){return Qe.sort(t),t.get(0)},Qe.sort=function(t,e){var n=t.toArray();e?Ft.sort(n,e):Ft.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},Qe.singletonList=function(t){var e=new St;return e.add(t),e};var tn=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};tn.prototype.expandToQueue=function(t,e){var n=tn.isComposite(this._boundable1),r=tn.isComposite(this._boundable2);if(n&&r)return tn.area(this._boundable1)>tn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new v("neither boundable is composite")},tn.prototype.isLeaves=function(){return!(tn.isComposite(this._boundable1)||tn.isComposite(this._boundable2))},tn.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},tn.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new tn(o,e,this._itemDistance);a.getDistance()<r&&n.add(a)}},tn.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tn.prototype.getDistance=function(){return this._distance},tn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tn.prototype.interfaces_=function(){return[b]},tn.prototype.getClass=function(){return tn},tn.area=function(t){return t.getBounds().getArea()},tn.isComposite=function(t){return t instanceof Ke};var en=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new St,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];et.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nn={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};en.prototype.getNodeCapacity=function(){return this._nodeCapacity},en.prototype.lastNode=function(t){return t.get(t.size()-1)},en.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Ke?t+=this.size(n):n instanceof Xe&&(t+=1)}return t}},en.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Xe&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},en.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new St:t}if(1===arguments.length){for(var e=arguments[0],n=new St,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Ke){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof Xe?n.add(i.getItem()):et.shouldNeverReachHere()}return n.size()<=0?null:n}},en.prototype.insert=function(t,e){et.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Xe(t,e))},en.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new St;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(et.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof Ke?this.boundablesAtLevel(n,a,i):(et.isTrue(a instanceof Xe),-1===n&&i.add(a))}return null}},en.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new St;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(P(arguments[2],Ye)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke)for(var i=arguments[0],o=arguments[2],a=arguments[1].getChildBoundables(),s=0;s<a.size();s++){var l=a.get(s);this.getIntersectsOp().intersects(l.getBounds(),i)&&(l instanceof Ke?this.query(i,l,o):l instanceof Xe?o.visitItem(l.getItem()):et.shouldNeverReachHere())}else if(P(arguments[2],wt)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke)for(var c=arguments[0],u=arguments[2],h=arguments[1].getChildBoundables(),p=0;p<h.size();p++){var d=h.get(p);this.getIntersectsOp().intersects(d.getBounds(),c)&&(d instanceof Ke?this.query(c,d,u):d instanceof Xe?u.add(d.getItem()):et.shouldNeverReachHere())}},en.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},en.prototype.getRoot=function(){return this.build(),this._root},en.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var a=null,s=r.getChildBoundables().iterator();s.hasNext();){var l=s.next();if(this.getIntersectsOp().intersects(l.getBounds(),n)&&l instanceof Ke&&(o=this.remove(n,l,i))){a=l;break}}return null!==a&&a.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(a),o}},en.prototype.createHigherLevels=function(t,e){et.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},en.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Ke){var r=this.depth(n);r>t&&(t=r)}}return t+1}},en.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var n=new St;n.add(this.createNode(e));var r=new St(t);Qe.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},en.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},en.prototype.interfaces_=function(){return[e]},en.prototype.getClass=function(){return en},en.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},nn.IntersectsOp.get=function(){return rn},nn.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nn.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(en,nn);var rn=function(){},on=function(){};on.prototype.distance=function(t,e){},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on};var an=function(t){function n(e){e=e||n.DEFAULT_NODE_CAPACITY,t.call(this,e)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var r={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return n.prototype.createParentBoundablesFromVerticalSlices=function(t,e){et.isTrue(t.length>0);for(var n=new St,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},n.prototype.createNode=function(t){return new sn(t)},n.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},n.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},n.prototype.getIntersectsOp=function(){return n.intersectsOp},n.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new St;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r},n.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(P(arguments[2],Ye)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke){var i=arguments[0],o=arguments[1],a=arguments[2];t.prototype.query.call(this,i,o,a)}else if(P(arguments[2],wt)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke){var s=arguments[0],l=arguments[1],c=arguments[2];t.prototype.query.call(this,s,l,c)}},n.prototype.getComparator=function(){return n.yComparator},n.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},n.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},n.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},n.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new St(t);Qe.sort(i,n.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,e)},n.prototype.nearestNeighbour=function(){if(1===arguments.length){if(P(arguments[0],on)){var t=arguments[0],e=new tn(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof tn){var r=arguments[0];return this.nearestNeighbour(r,x.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof n&&P(arguments[1],on)){var i=arguments[0],o=arguments[1],a=new tn(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof tn&&"number"==typeof arguments[1]){var s=arguments[0],l=arguments[1],c=null,u=new qe;for(u.add(s);!u.isEmpty()&&l>0;){var h=u.poll(),p=h.getDistance();if(p>=l)break;h.isLeaves()?(l=p,c=h):h.expandToQueue(u,l)}return[c.getBoundable(0).getItem(),c.getBoundable(1).getItem()]}}else if(3===arguments.length){var d=arguments[2],f=new Xe(arguments[0],arguments[1]),g=new tn(this.getRoot(),f,d);return this.nearestNeighbour(g)[0]}},n.prototype.interfaces_=function(){return[Ze,e]},n.prototype.getClass=function(){return n},n.centreX=function(t){return n.avg(t.getMinX(),t.getMaxX())},n.avg=function(t,e){return(t+e)/2},n.centreY=function(t){return n.avg(t.getMinY(),t.getMaxY())},r.STRtreeNode.get=function(){return sn},r.serialVersionUID.get=function(){return 0x39920f7d5f261e0},r.xComparator.get=function(){return{interfaces_:function(){return[S]},compare:function(e,r){return t.compareDoubles(n.centreX(e.getBounds()),n.centreX(r.getBounds()))}}},r.yComparator.get=function(){return{interfaces_:function(){return[S]},compare:function(e,r){return t.compareDoubles(n.centreY(e.getBounds()),n.centreY(r.getBounds()))}}},r.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},r.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(n,r),n}(en),sn=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new W(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ke),ln=function(){};ln.prototype.interfaces_=function(){return[]},ln.prototype.getClass=function(){return ln},ln.relativeSign=function(t,e){return t<e?-1:t>e?1:0},ln.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=ln.relativeSign(e.x,n.x),i=ln.relativeSign(e.y,n.y);switch(t){case 0:return ln.compareValue(r,i);case 1:return ln.compareValue(i,r);case 2:return ln.compareValue(i,-r);case 3:return ln.compareValue(-r,i);case 4:return ln.compareValue(-r,-i);case 5:return ln.compareValue(-i,-r);case 6:return ln.compareValue(-i,r);case 7:return ln.compareValue(r,-i)}return et.shouldNeverReachHere("invalid octant value"),0},ln.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var cn=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new C(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};cn.prototype.getCoordinate=function(){return this.coord},cn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},cn.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:ln.compare(this._segmentOctant,this.coord,e.coord)},cn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},cn.prototype.isInterior=function(){return this._isInterior},cn.prototype.interfaces_=function(){return[b]},cn.prototype.getClass=function(){return cn};var un=function(){this._nodeMap=new h,this._edge=null;var t=arguments[0];this._edge=t};un.prototype.getSplitCoordinates=function(){var t=new Et;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},un.prototype.addCollapsedNodes=function(){var t=new St;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},un.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},un.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new R(e+1))}},un.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new C(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new C(e.coord))},un.prototype.iterator=function(){return this._nodeMap.values().iterator()},un.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},un.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},un.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new R(e[0])),r=i}},un.prototype.getEdge=function(){return this._edge},un.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},un.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new C(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new C(e.coord)),new fn(o,this._edge.getData())},un.prototype.add=function(t,e){var n=new cn(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(et.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},un.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new Q("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new Q("bad split edge end point at "+i)},un.prototype.interfaces_=function(){return[]},un.prototype.getClass=function(){return un};var hn=function(){};hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn},hn.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new v("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof C&&arguments[1]instanceof C){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new v("Cannot compute the octant for two identical points "+i);return hn.octant(a,s)}};var pn=function(){};pn.prototype.getCoordinates=function(){},pn.prototype.size=function(){},pn.prototype.getCoordinate=function(t){},pn.prototype.isClosed=function(){},pn.prototype.setData=function(t){},pn.prototype.getData=function(){},pn.prototype.interfaces_=function(){return[]},pn.prototype.getClass=function(){return pn};var dn=function(){};dn.prototype.addIntersection=function(t,e){},dn.prototype.interfaces_=function(){return[pn]},dn.prototype.getClass=function(){return dn};var fn=function(){this._nodeList=new un(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};fn.prototype.getCoordinates=function(){return this._pts},fn.prototype.size=function(){return this._pts.length},fn.prototype.getCoordinate=function(t){return this._pts[t]},fn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},fn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},fn.prototype.setData=function(t){this._data=t},fn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:hn.octant(t,e)},fn.prototype.getData=function(){return this._data},fn.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],r=arguments[3],i=new C(arguments[0].getIntersection(r));this.addIntersection(i,n)}},fn.prototype.toString=function(){return J.toLineString(new le(this._pts))},fn.prototype.getNodeList=function(){return this._nodeList},fn.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},fn.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},fn.prototype.interfaces_=function(){return[dn]},fn.prototype.getClass=function(){return fn},fn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new St;return fn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)};var gn=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new C,this.p1=new C;else if(1===arguments.length){var t=arguments[0];this.p0=new C(t.p0),this.p1=new C(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new C(e,n),this.p1=new C(r,i)}},mn={serialVersionUID:{configurable:!0}};gn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},gn.prototype.orientationIndex=function(){if(arguments[0]instanceof gn){var t=arguments[0],e=st.orientationIndex(this.p0,this.p1,t.p0),n=st.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof C){var r=arguments[0];return st.orientationIndex(this.p0,this.p1,r)}},gn.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},gn.prototype.isVertical=function(){return this.p0.x===this.p1.x},gn.prototype.equals=function(t){if(!(t instanceof gn))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},gn.prototype.intersection=function(t){var e=new it;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},gn.prototype.project=function(){if(arguments[0]instanceof C){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new C(t);var e=this.projectionFactor(t),n=new C;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof gn){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var a=this.project(r.p0);i<0&&(a=this.p0),i>1&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new gn(a,s)}},gn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},gn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},gn.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},gn.prototype.distancePerpendicular=function(t){return st.distancePointLinePerpendicular(t,this.p0,this.p1)},gn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},gn.prototype.midPoint=function(){return gn.midPoint(this.p0,this.p1)},gn.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?x.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},gn.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=x.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(i=a.distance(t.p1))<r&&(r=i,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var l=t.closestPoint(this.p1);return(i=l.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=l),n},gn.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},gn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},gn.prototype.getLength=function(){return this.p0.distance(this.p1)},gn.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},gn.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},gn.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},gn.prototype.lineIntersection=function(t){try{return G.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof V))throw t}return null},gn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},gn.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,l=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*i/a,l=e*o/a}return new C(n-l,r+s)},gn.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},gn.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||x.isNaN(e))&&(e=1),e},gn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},gn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},gn.prototype.distance=function(){if(arguments[0]instanceof gn){var t=arguments[0];return st.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof C){var e=arguments[0];return st.distancePointLine(e,this.p0,this.p1)}},gn.prototype.pointAlong=function(t){var e=new C;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},gn.prototype.hashCode=function(){var t=x.doubleToLongBits(this.p0.x);t^=31*x.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=x.doubleToLongBits(this.p1.x);return n^=31*x.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},gn.prototype.interfaces_=function(){return[b,e]},gn.prototype.getClass=function(){return gn},gn.midPoint=function(t,e){return new C((t.x+e.x)/2,(t.y+e.y)/2)},mn.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(gn,mn);var yn=function(){this.tempEnv1=new W,this.tempEnv2=new W,this._overlapSeg1=new gn,this._overlapSeg2=new gn};yn.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},yn.prototype.interfaces_=function(){return[]},yn.prototype.getClass=function(){return yn};var vn=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};vn.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},vn.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,r),a<n&&this.computeSelect(t,a,n,r)},vn.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},vn.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},vn.prototype.setId=function(t){this._id=t},vn.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},vn.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new W(t,e)}return this._env},vn.prototype.getEndIndex=function(){return this._end},vn.prototype.getStartIndex=function(){return this._start},vn.prototype.getContext=function(){return this._context},vn.prototype.getId=function(){return this._id},vn.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var a=this._pts[t],s=this._pts[e],l=n._pts[r],c=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(l,c),!o.tempEnv1.intersects(o.tempEnv2))return null;var u=Math.trunc((t+e)/2),h=Math.trunc((r+i)/2);t<u&&(r<h&&this.computeOverlapsInternal(t,u,n,r,h,o),h<i&&this.computeOverlapsInternal(t,u,n,h,i,o)),u<e&&(r<h&&this.computeOverlapsInternal(u,e,n,r,h,o),h<i&&this.computeOverlapsInternal(u,e,n,h,i,o))},vn.prototype.interfaces_=function(){return[]},vn.prototype.getClass=function(){return vn};var xn=function(){};xn.prototype.interfaces_=function(){return[]},xn.prototype.getClass=function(){return xn},xn.getChainStartIndices=function(t){var e=0,n=new St;n.add(new R(e));do{var r=xn.findChainEnd(t,e);n.add(new R(r)),e=r}while(e<t.length-1);return xn.toIntArray(n)},xn.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=Be.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||Be.quadrant(t[i-1],t[i])===r);)i++;return i-1},xn.getChains=function(){if(1===arguments.length){var t=arguments[0];return xn.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new St,i=xn.getChainStartIndices(e),o=0;o<i.length-1;o++){var a=new vn(e,i[o],i[o+1],n);r.add(a)}return r}},xn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var _n=function(){};_n.prototype.computeNodes=function(t){},_n.prototype.getNodedSubstrings=function(){},_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n};var bn=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};bn.prototype.setSegmentIntersector=function(t){this._segInt=t},bn.prototype.interfaces_=function(){return[_n]},bn.prototype.getClass=function(){return bn};var wn=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new St,this._index=new an,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return fn.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=xn.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new Sn(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return Sn},Object.defineProperties(e,n),e}(bn),Sn=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],n=arguments[2],r=arguments[3],i=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(i,e,o,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(yn),Cn=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},En={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Cn.prototype.getEndCapStyle=function(){return this._endCapStyle},Cn.prototype.isSingleSided=function(){return this._isSingleSided},Cn.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Cn.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Cn.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Cn.JOIN_ROUND&&(this._quadrantSegments=Cn.DEFAULT_QUADRANT_SEGMENTS)},Cn.prototype.getJoinStyle=function(){return this._joinStyle},Cn.prototype.setJoinStyle=function(t){this._joinStyle=t},Cn.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Cn.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Cn.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Cn.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Cn.prototype.getMitreLimit=function(){return this._mitreLimit},Cn.prototype.setMitreLimit=function(t){this._mitreLimit=t},Cn.prototype.setSingleSided=function(t){this._isSingleSided=t},Cn.prototype.interfaces_=function(){return[]},Cn.prototype.getClass=function(){return Cn},Cn.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},En.CAP_ROUND.get=function(){return 1},En.CAP_FLAT.get=function(){return 2},En.CAP_SQUARE.get=function(){return 3},En.JOIN_ROUND.get=function(){return 1},En.JOIN_MITRE.get=function(){return 2},En.JOIN_BEVEL.get=function(){return 3},En.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},En.DEFAULT_MITRE_LIMIT.get=function(){return 5},En.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Cn,En);var kn=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=st.COUNTERCLOCKWISE,this._inputLine=t||null},Mn={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};kn.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(i,o,a)&&!!this.isShallow(i,o,a,r)&&this.isShallowSampled(i,o,t,n,r)},kn.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=kn.DELETE,i=!0,r=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},kn.prototype.isShallowConcavity=function(t,e,n,r){return st.computeOrientation(t,e,n)===this._angleOrientation&&st.distancePointLine(e,t,n)<r},kn.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/kn.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(t,e,this._inputLine[a],i))return!1;return!0},kn.prototype.isConcave=function(t,e,n){return st.computeOrientation(t,e,n)===this._angleOrientation},kn.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=st.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},kn.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===kn.DELETE;)e++;return e},kn.prototype.isShallow=function(t,e,n,r){return st.distancePointLine(e,t,n)<r},kn.prototype.collapseLine=function(){for(var t=new Et,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==kn.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},kn.prototype.interfaces_=function(){return[]},kn.prototype.getClass=function(){return kn},kn.simplify=function(t,e){return new kn(t).simplify(e)},Mn.INIT.get=function(){return 0},Mn.DELETE.get=function(){return 1},Mn.KEEP.get=function(){return 1},Mn.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(kn,Mn);var Tn=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new St},In={COORDINATE_ARRAY_TYPE:{configurable:!0}};Tn.prototype.getCoordinates=function(){return this._ptList.toArray(Tn.COORDINATE_ARRAY_TYPE)},Tn.prototype.setPrecisionModel=function(t){this._precisionModel=t},Tn.prototype.addPt=function(t){var e=new C(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Tn.prototype.revere=function(){},Tn.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},Tn.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Tn.prototype.toString=function(){return(new ye).createLineString(this.getCoordinates()).toString()},Tn.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new C(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Tn.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Tn.prototype.interfaces_=function(){return[]},Tn.prototype.getClass=function(){return Tn},In.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Tn,In);var Pn=function(){},On={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Pn.prototype.interfaces_=function(){return[]},Pn.prototype.getClass=function(){return Pn},Pn.toDegrees=function(t){return 180*t/Math.PI},Pn.normalize=function(t){for(;t>Math.PI;)t-=Pn.PI_TIMES_2;for(;t<=-Math.PI;)t+=Pn.PI_TIMES_2;return t},Pn.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},Pn.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},Pn.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},Pn.interiorAngle=function(t,e,n){var r=Pn.angle(e,t),i=Pn.angle(e,n);return Math.abs(i-r)},Pn.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Pn.PI_TIMES_2;t>=Pn.PI_TIMES_2&&(t=0)}else{for(;t>=Pn.PI_TIMES_2;)t-=Pn.PI_TIMES_2;t<0&&(t=0)}return t},Pn.angleBetween=function(t,e,n){var r=Pn.angle(e,t),i=Pn.angle(e,n);return Pn.diff(r,i)},Pn.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Pn.toRadians=function(t){return t*Math.PI/180},Pn.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Pn.COUNTERCLOCKWISE:n<0?Pn.CLOCKWISE:Pn.NONE},Pn.angleBetweenOriented=function(t,e,n){var r=Pn.angle(e,t),i=Pn.angle(e,n)-r;return i<=-Math.PI?i+Pn.PI_TIMES_2:i>Math.PI?i-Pn.PI_TIMES_2:i},On.PI_TIMES_2.get=function(){return 2*Math.PI},On.PI_OVER_2.get=function(){return Math.PI/2},On.PI_OVER_4.get=function(){return Math.PI/4},On.COUNTERCLOCKWISE.get=function(){return st.COUNTERCLOCKWISE},On.CLOCKWISE.get=function(){return st.CLOCKWISE},On.NONE.get=function(){return st.COLLINEAR},Object.defineProperties(Pn,On);var An=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new gn,this._seg1=new gn,this._offset0=new gn,this._offset1=new gn,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new it,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Cn.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Dn={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};An.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=st.computeOrientation(this._s0,this._s1,this._s2),r=n===st.CLOCKWISE&&this._side===Ee.LEFT||n===st.COUNTERCLOCKWISE&&this._side===Ee.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},An.prototype.addLineEndCap=function(t,e){var n=new gn(t,e),r=new gn;this.computeOffsetSegment(n,Ee.LEFT,this._distance,r);var i=new gn;this.computeOffsetSegment(n,Ee.RIGHT,this._distance,i);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case Cn.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,st.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Cn.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case Cn.CAP_SQUARE:var l=new C;l.x=Math.abs(this._distance)*Math.cos(s),l.y=Math.abs(this._distance)*Math.sin(s);var c=new C(r.p1.x+l.x,r.p1.y+l.y),u=new C(i.p1.x+l.x,i.p1.y+l.y);this._segList.addPt(c),this._segList.addPt(u)}},An.prototype.getCoordinates=function(){return this._segList.getCoordinates()},An.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=G.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof V))throw t;o=new C(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},An.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),l=n.x-t.x,c=n.y-t.y,u=Math.atan2(c,l);r===st.CLOCKWISE?s<=u&&(s+=2*Math.PI):s>=u&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,u,r,i),this._segList.addPt(n)},An.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*An.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Cn.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Cn.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},An.prototype.createSquare=function(t){this._segList.addPt(new C(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new C(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new C(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new C(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},An.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},An.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},An.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},An.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},An.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Pn.angle(i,this._seg0.p0),a=Pn.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=Pn.normalize(o+a),l=Pn.normalize(s+Math.PI),c=r*n,u=n-c*Math.abs(Math.sin(a)),h=i.x+c*Math.cos(l),p=i.y+c*Math.sin(l),d=new C(h,p),f=new gn(i,d),g=f.pointAlongOffset(1,u),m=f.pointAlongOffset(1,-u);this._side===Ee.LEFT?(this._segList.addPt(g),this._segList.addPt(m)):(this._segList.addPt(m),this._segList.addPt(g))},An.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Ee.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),l=i*n*o/s,c=i*n*a/s;r.p0.x=t.p0.x-c,r.p0.y=t.p0.y+l,r.p1.x=t.p1.x-c,r.p1.y=t.p1.y+l},An.prototype.addFilletArc=function(t,e,n,r,i){var o=r===st.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var l=a/s,c=0,u=new C;c<a;){var h=e+o*c;u.x=t.x+i*Math.cos(h),u.y=t.y+i*Math.sin(h),this._segList.addPt(u),c+=l}},An.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*An.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new C((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new C((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},An.prototype.createCircle=function(t){var e=new C(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},An.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},An.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Tn,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*An.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},An.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Cn.JOIN_BEVEL||this._bufParams.getJoinStyle()===Cn.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,st.CLOCKWISE,this._distance))},An.prototype.closeRing=function(){this._segList.closeRing()},An.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},An.prototype.interfaces_=function(){return[]},An.prototype.getClass=function(){return An},Dn.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Dn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Dn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Dn.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(An,Dn);var Rn=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Rn.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&kt.reverse(o),o},Rn.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=kn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Ee.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(t,!1);var s=kn.simplify(t,r),l=s.length-1;n.initSideSegments(s[0],s[1],Ee.LEFT),n.addFirstSegment();for(var c=2;c<=l;c++)n.addNextSegment(s[c],!0)}n.addLastSegment(),n.closeRing()},Rn.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Ee.RIGHT&&(r=-r);var i=kn.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()},Rn.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=kn.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Ee.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var a=kn.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],Ee.LEFT);for(var l=s-2;l>=0;l--)e.addNextSegment(a[l],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},Rn.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Cn.CAP_ROUND:e.createCircle(t);break;case Cn.CAP_SQUARE:e.createSquare(t)}},Rn.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},Rn.prototype.getBufferParameters=function(){return this._bufParams},Rn.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Rn.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Rn.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Rn.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=kn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Ee.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{var s=kn.simplify(t,r),l=s.length-1;n.initSideSegments(s[0],s[1],Ee.LEFT),n.addFirstSegment();for(var c=2;c<=l;c++)n.addNextSegment(s[c],!0)}n.addLastSegment()},Rn.prototype.getSegGen=function(t){return new An(this._precisionModel,this._bufParams,t)},Rn.prototype.interfaces_=function(){return[]},Rn.prototype.getClass=function(){return Rn},Rn.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new C(t[n]);return e};var Ln=function(){this._subgraphs=null,this._seg=new gn,this._cga=new st;var t=arguments[0];this._subgraphs=t},Nn={DepthSegment:{configurable:!0}};Ln.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new St,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(P(arguments[2],wt)&&arguments[0]instanceof C&&arguments[1]instanceof Ue){for(var o=arguments[0],a=arguments[1],s=arguments[2],l=a.getEdge().getCoordinates(),c=0;c<l.length-1;c++)if(this._seg.p0=l[c],this._seg.p1=l[c+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x)&&!(this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||st.computeOrientation(this._seg.p0,this._seg.p1,o)===st.RIGHT)){var u=a.getDepth(Ee.LEFT);this._seg.p0.equals(l[c])||(u=a.getDepth(Ee.RIGHT));var h=new Fn(this._seg,u);s.add(h)}}else if(P(arguments[2],wt)&&arguments[0]instanceof C&&P(arguments[1],wt))for(var p=arguments[0],d=arguments[2],f=arguments[1].iterator();f.hasNext();){var g=f.next();g.isForward()&&this.findStabbedSegments(p,g,d)}},Ln.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Qe.min(e)._leftDepth},Ln.prototype.interfaces_=function(){return[]},Ln.prototype.getClass=function(){return Ln},Nn.DepthSegment.get=function(){return Fn},Object.defineProperties(Ln,Nn);var Fn=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new gn(t),this._leftDepth=e};Fn.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Fn.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Fn.prototype.toString=function(){return this._upwardSeg.toString()},Fn.prototype.interfaces_=function(){return[b]},Fn.prototype.getClass=function(){return Fn};var zn=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};zn.prototype.area=function(){return zn.area(this.p0,this.p1,this.p2)},zn.prototype.signedArea=function(){return zn.signedArea(this.p0,this.p1,this.p2)},zn.prototype.interpolateZ=function(t){if(null===t)throw new v("Supplied point is null.");return zn.interpolateZ(t,this.p0,this.p1,this.p2)},zn.prototype.longestSideLength=function(){return zn.longestSideLength(this.p0,this.p1,this.p2)},zn.prototype.isAcute=function(){return zn.isAcute(this.p0,this.p1,this.p2)},zn.prototype.circumcentre=function(){return zn.circumcentre(this.p0,this.p1,this.p2)},zn.prototype.area3D=function(){return zn.area3D(this.p0,this.p1,this.p2)},zn.prototype.centroid=function(){return zn.centroid(this.p0,this.p1,this.p2)},zn.prototype.inCentre=function(){return zn.inCentre(this.p0,this.p1,this.p2)},zn.prototype.interfaces_=function(){return[]},zn.prototype.getClass=function(){return zn},zn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},zn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},zn.det=function(t,e,n,r){return t*r-e*n},zn.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,a=n.x-i,s=r.x-i,l=n.y-o,c=r.y-o,u=a*c-s*l,h=t.x-i,p=t.y-o,d=(c*h-s*p)/u,f=(-l*h+a*p)/u;return e.z+d*(n.z-e.z)+f*(r.z-e.z)},zn.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),a=r;return i>a&&(a=i),o>a&&(a=o),a},zn.isAcute=function(t,e,n){return!!Pn.isAcute(t,e,n)&&!!Pn.isAcute(e,n,t)&&!!Pn.isAcute(n,t,e)},zn.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,a=t.y-i,s=e.x-r,l=e.y-i,c=2*zn.det(o,a,s,l),u=zn.det(a,o*o+a*a,l,s*s+l*l),h=zn.det(o,o*o+a*a,s,s*s+l*l);return new C(r-u/c,i+h/c)},zn.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new G(t.x+n/2,t.y+r/2,1),o=new G(t.x-r+n/2,t.y+n+r/2,1);return new G(i,o)},zn.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,a=n.y-t.y;return new C(t.x+i*o,t.y+i*a)},zn.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,l=n.z-t.z,c=i*l-o*s,u=o*a-r*l,h=r*s-i*a,p=c*c+u*u+h*h;return Math.sqrt(p)/2},zn.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new C(r,i)},zn.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),a=r+i+o,s=(r*t.x+i*e.x+o*n.x)/a,l=(r*t.y+i*e.y+o*n.y)/a;return new C(s,l)};var Bn=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new St;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};Bn.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,T.EXTERIOR,T.INTERIOR)},Bn.prototype.addPolygon=function(t){var e=this._distance,n=Ee.LEFT;this._distance<0&&(e=-this._distance,n=Ee.RIGHT);var r=t.getExteriorRing(),i=kt.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,T.EXTERIOR,T.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=kt.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,e,Ee.opposite(n),T.INTERIOR,T.EXTERIOR)}},Bn.prototype.isTriangleErodedCompletely=function(t,e){var n=new zn(t[0],t[1],t[2]),r=n.inCentre();return st.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},Bn.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=kt.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,T.EXTERIOR,T.INTERIOR)},Bn.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new fn(t,new Ae(0,T.BOUNDARY,e,n));this._curveList.add(r)},Bn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Bn.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<ee.MINIMUM_VALID_SIZE)return null;var o=r,a=i;t.length>=ee.MINIMUM_VALID_SIZE&&st.isCCW(t)&&(o=i,a=r,n=Ee.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},Bn.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Qt?this.addPolygon(t):t instanceof Yt?this.addLineString(t):t instanceof Kt?this.addPoint(t):(t instanceof te||t instanceof Vt||t instanceof ne||t instanceof Ut)&&this.addCollection(t)},Bn.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},Bn.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},Bn.prototype.interfaces_=function(){return[]},Bn.prototype.getClass=function(){return Bn};var $n=function(){};$n.prototype.locate=function(t){},$n.prototype.interfaces_=function(){return[]},$n.prototype.getClass=function(){return $n};var jn=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};jn.prototype.next=function(){if(this._atStart)return this._atStart=!1,jn.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new r;var t=this._parent.getGeometryN(this._index++);return t instanceof Ut?(this._subcollectionIterator=new jn(t),this._subcollectionIterator.next()):t},jn.prototype.remove=function(){throw new Error(this.getClass().getName())},jn.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},jn.prototype.interfaces_=function(){return[bt]},jn.prototype.getClass=function(){return jn},jn.isAtomic=function(t){return!(t instanceof Ut)};var Un=function(){this._geom=null;var t=arguments[0];this._geom=t};Un.prototype.locate=function(t){return Un.locate(t,this._geom)},Un.prototype.interfaces_=function(){return[$n]},Un.prototype.getClass=function(){return Un},Un.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&st.isPointInRing(t,e.getCoordinates())},Un.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Un.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(Un.isPointInRing(t,i))return!1}return!0},Un.containsPoint=function(t,e){if(e instanceof Qt)return Un.containsPointInPolygon(t,e);if(e instanceof Ut)for(var n=new jn(e);n.hasNext();){var r=n.next();if(r!==e&&Un.containsPoint(t,r))return!0}return!1},Un.locate=function(t,e){return e.isEmpty()?T.EXTERIOR:Un.containsPoint(t,e)?T.INTERIOR:T.EXTERIOR};var Vn=function(){this._edgeMap=new h,this._edgeList=null,this._ptInAreaLocation=[T.NONE,T.NONE]};Vn.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Vn.prototype.propagateSideLabels=function(t){for(var e=T.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Ee.LEFT)!==T.NONE&&(e=r.getLocation(t,Ee.LEFT))}if(e===T.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,Ee.ON)===T.NONE&&s.setLocation(t,Ee.ON,i),s.isArea(t)){var l=s.getLocation(t,Ee.LEFT),c=s.getLocation(t,Ee.RIGHT);if(c!==T.NONE){if(c!==i)throw new Te("side location conflict",a.getCoordinate());l===T.NONE&&et.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=l}else et.isTrue(s.getLocation(t,Ee.LEFT)===T.NONE,"found single null side"),s.setLocation(t,Ee.RIGHT,i),s.setLocation(t,Ee.LEFT,i)}}},Vn.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Vn.prototype.print=function(t){H.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Vn.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Vn.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Ee.LEFT);et.isTrue(r!==T.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();et.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,Ee.LEFT),l=a.getLocation(t,Ee.RIGHT);if(s===l)return!1;if(l!==i)return!1;i=s}return!0},Vn.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Vn.prototype.iterator=function(){return this.getEdges().iterator()},Vn.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new St(this._edgeMap.values())),this._edgeList},Vn.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===T.NONE&&(this._ptInAreaLocation[t]=Un.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Vn.prototype.toString=function(){var t=new D;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Vn.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Vn.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===T.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),l=0;l<2;l++)if(s.isAnyNull(l)){var c=T.NONE;if(e[l])c=T.EXTERIOR;else{var u=a.getCoordinate();c=this.getLocation(l,u,t)}s.setAllLocationsIfNull(l,c)}},Vn.prototype.getDegree=function(){return this._edgeMap.size()},Vn.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Vn.prototype.interfaces_=function(){return[]},Vn.prototype.getClass=function(){return Vn};var Hn=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Te("no outgoing dirEdge found",this.getCoordinate());et.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return Be.isNorthern(i)&&Be.isNorthern(o)?n:Be.isNorthern(i)||Be.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(et.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){H.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new St;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Ee.LEFT),r=t.getDepth(Ee.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new Te("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],a=arguments[2],s=arguments[0];s<o;s++){var l=this._edgeList.get(s);l.setEdgeDepths(Ee.RIGHT,a),a=l.getDepth(Ee.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(et.isTrue(null!==e,"found null for first outgoing dirEdge"),et.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=T.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=T.INTERIOR;break}if(r.isInResult()){t=T.EXTERIOR;break}}}if(t===T.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===T.INTERIOR):(a.isInResult()&&(i=T.EXTERIOR),s.isInResult()&&(i=T.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Ae(T.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==T.INTERIOR&&o!==T.BOUNDARY||this._label.setLocation(i,T.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Vn),Gn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new Fe(t,new Hn)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ve),Wn=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Wn.prototype.compareTo=function(t){var e=t;return Wn.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Wn.prototype.interfaces_=function(){return[b]},Wn.prototype.getClass=function(){return Wn},Wn.orientation=function(t){return 1===kt.increasingDirection(t)},Wn.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,a=e?t.length:-1,s=r?n.length:-1,l=e?0:t.length-1,c=r?0:n.length-1;;){var u=t[l].compareTo(n[c]);if(0!==u)return u;var h=(l+=i)===a,p=(c+=o)===s;if(h&&!p)return-1;if(!h&&p)return 1;if(h&&p)return 0}};var Xn=function(){this._edges=new St,this._ocaMap=new h};Xn.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Xn.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Xn.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Xn.prototype.iterator=function(){return this._edges.iterator()},Xn.prototype.getEdges=function(){return this._edges},Xn.prototype.get=function(t){return this._edges.get(t)},Xn.prototype.findEqualEdge=function(t){var e=new Wn(t.getCoordinates());return this._ocaMap.get(e)},Xn.prototype.add=function(t){this._edges.add(t);var e=new Wn(t.getCoordinates());this._ocaMap.put(e,t)},Xn.prototype.interfaces_=function(){return[]},Xn.prototype.getClass=function(){return Xn};var qn=function(){};qn.prototype.processIntersections=function(t,e,n,r){},qn.prototype.isDone=function(){},qn.prototype.interfaces_=function(){return[]},qn.prototype.getClass=function(){return qn};var Yn=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Yn.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Yn.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Yn.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Yn.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Yn.prototype.getLineIntersector=function(){return this._li},Yn.prototype.hasProperIntersection=function(){return this._hasProper},Yn.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Yn.prototype.hasIntersection=function(){return this._hasIntersection},Yn.prototype.isDone=function(){return!1},Yn.prototype.hasInteriorIntersection=function(){return this._hasInterior},Yn.prototype.interfaces_=function(){return[qn]},Yn.prototype.getClass=function(){return Yn},Yn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Zn=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new C(t),this.segmentIndex=e,this.dist=n};Zn.prototype.getSegmentIndex=function(){return this.segmentIndex},Zn.prototype.getCoordinate=function(){return this.coord},Zn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Zn.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Zn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Zn.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Zn.prototype.getDistance=function(){return this.dist},Zn.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Zn.prototype.interfaces_=function(){return[b]},Zn.prototype.getClass=function(){return Zn};var Kn=function(){this._nodeMap=new h,this.edge=null;var t=arguments[0];this.edge=t};Kn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Kn.prototype.iterator=function(){return this._nodeMap.values().iterator()},Kn.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Kn.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Kn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new C(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new nr(o,new Ae(this.edge._label))},Kn.prototype.add=function(t,e,n){var r=new Zn(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},Kn.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Kn.prototype.interfaces_=function(){return[]},Kn.prototype.getClass=function(){return Kn};var Jn=function(){};Jn.prototype.getChainStartIndices=function(t){var e=0,n=new St;n.add(new R(e));do{var r=this.findChainEnd(t,e);n.add(new R(r)),e=r}while(e<t.length-1);return Jn.toIntArray(n)},Jn.prototype.findChainEnd=function(t,e){for(var n=Be.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&Be.quadrant(t[r-1],t[r])===n;)r++;return r-1},Jn.prototype.interfaces_=function(){return[]},Jn.prototype.getClass=function(){return Jn},Jn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Qn=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new W,this.env2=new W;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Jn;this.startIndex=e.getChainStartIndices(this.pts)};Qn.prototype.getCoordinates=function(){return this.pts},Qn.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},Qn.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},Qn.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],l=arguments[4],c=arguments[5],u=this.pts[i],h=this.pts[o],p=a.pts[s],d=a.pts[l];if(o-i==1&&l-s==1)return c.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(u,h),this.env2.init(p,d),!this.env1.intersects(this.env2))return null;var f=Math.trunc((i+o)/2),g=Math.trunc((s+l)/2);i<f&&(s<g&&this.computeIntersectsForChain(i,f,a,s,g,c),g<l&&this.computeIntersectsForChain(i,f,a,g,l,c)),f<o&&(s<g&&this.computeIntersectsForChain(f,o,a,s,g,c),g<l&&this.computeIntersectsForChain(f,o,a,g,l,c))}},Qn.prototype.getStartIndexes=function(){return this.startIndex},Qn.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn};var tr=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},er={NULL_VALUE:{configurable:!0}};tr.prototype.getDepth=function(t,e){return this._depth[t][e]},tr.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},tr.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==tr.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===tr.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===tr.NULL_VALUE}},tr.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},tr.prototype.getDelta=function(t){return this._depth[t][Ee.RIGHT]-this._depth[t][Ee.LEFT]},tr.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?T.EXTERIOR:T.INTERIOR},tr.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},tr.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==T.EXTERIOR&&r!==T.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=tr.depthAtLocation(r):this._depth[e][n]+=tr.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===T.INTERIOR&&this._depth[i][o]++}},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},tr.depthAtLocation=function(t){return t===T.EXTERIOR?0:t===T.INTERIOR?1:tr.NULL_VALUE},er.NULL_VALUE.get=function(){return-1},Object.defineProperties(tr,er);var nr=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Kn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new tr,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Ae.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(r=!1),this.pts[a].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Qn(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new W;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new C(t.getIntersection(r)),o=e,a=t.getEdgeDistance(n,r),s=o+1;if(s<this.pts.length){var l=this.pts[s];i.equals2D(l)&&(o=s,a=0)}this.eiList.add(i,o,a)},e.prototype.toString=function(){var t=new D;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Ee.ON),e.getLocation(1,Ee.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Ee.LEFT),e.getLocation(1,Ee.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Ee.RIGHT),e.getLocation(1,Ee.RIGHT),2))},e}(Ne),rr=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Xn,this._bufParams=t||null};rr.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},rr.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Ae(t.getLabel())).flip(),n.merge(r);var i=rr.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(rr.depthDelta(t.getLabel()))},rr.prototype.buildSubgraphs=function(t,e){for(var n=new St,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new Ln(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},rr.prototype.createSubgraphs=function(t){for(var e=new St,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Pe;i.create(r),e.add(i)}}return Qe.sort(e,Qe.reverseOrder()),e},rr.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},rr.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new wn,n=new it;return n.setPrecisionModel(t),e.setSegmentIntersector(new Yn(n)),e},rr.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Rn(n,this._bufParams),i=new Bn(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new He(new Gn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new Ge(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},rr.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new nr(i.getCoordinates(),new Ae(a));this.insertUniqueEdge(s)}}},rr.prototype.setNoder=function(t){this._workingNoder=t},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr},rr.depthDelta=function(t){var e=t.getLocation(0,Ee.LEFT),n=t.getLocation(0,Ee.RIGHT);return e===T.INTERIOR&&n===T.EXTERIOR?1:e===T.EXTERIOR&&n===T.INTERIOR?-1:0},rr.convertSegStrings=function(t){for(var e=new ye,n=new St;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var ir=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ir.prototype.rescale=function(){if(P(arguments[0],_t))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&H.out.println(n)}},ir.prototype.scale=function(){if(P(arguments[0],_t)){for(var t=arguments[0],e=new St,n=t.iterator();n.hasNext();){var r=n.next();e.add(new fn(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),a=0;a<i.length;a++)o[a]=new C(Math.round((i[a].x-this._offsetX)*this._scaleFactor),Math.round((i[a].y-this._offsetY)*this._scaleFactor),i[a].z);return kt.removeRepeatedPoints(o)}},ir.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ir.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ir.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ir.prototype.interfaces_=function(){return[_n]},ir.prototype.getClass=function(){return ir};var or=function(){this._li=new it,this._segStrings=null;var t=arguments[0];this._segStrings=t},ar={fact:{configurable:!0}};or.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new Q("found endpt/interior pt intersection at index "+o+" :pt "+n)},or.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.getCoordinates(),s=o.getCoordinates(),l=0;l<a.length-1;l++)for(var c=0;c<s.length-1;c++)this.checkInteriorIntersections(i,l,o,c);else if(4===arguments.length){var u=arguments[0],h=arguments[1],p=arguments[2],d=arguments[3];if(u===p&&h===d)return null;var f=u.getCoordinates()[h],g=u.getCoordinates()[h+1],m=p.getCoordinates()[d],y=p.getCoordinates()[d+1];if(this._li.computeIntersection(f,g,m,y),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,f,g)||this.hasInteriorIntersection(this._li,m,y)))throw new Q("found non-noded intersection at "+f+"-"+g+" and "+m+"-"+y)}},or.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},or.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},or.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},or.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Q("found non-noded collapse at "+or.fact.createLineString([t,e,n]))},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},ar.fact.get=function(){return new ye},Object.defineProperties(or,ar);var sr=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new v("Scale factor must be non-zero");1!==e&&(this._pt=new C(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new C,this._p1Scaled=new C),this.initCorners(this._pt)},lr={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};sr.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return et.isTrue(!(a&&s),"Found bad envelope test"),s},sr.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new C(this._maxx,this._maxy),this._corner[1]=new C(this._minx,this._maxy),this._corner[2]=new C(this._minx,this._miny),this._corner[3]=new C(this._maxx,this._miny)},sr.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},sr.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},sr.prototype.getCoordinate=function(){return this._originalPt},sr.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},sr.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=sr.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new W(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},sr.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},sr.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!n||!r)||!!t.equals(this._pt)||!!e.equals(this._pt))))},sr.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr},lr.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(sr,lr);var cr=function(){this.tempEnv1=new W,this.selectedSegment=new gn};cr.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr};var ur=function(){this._index=null;var t=arguments[0];this._index=t},hr={HotPixelSnapAction:{configurable:!0}};ur.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new pr(e,n,r);return this._index.query(i,{interfaces_:function(){return[Ye]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},ur.prototype.interfaces_=function(){return[]},ur.prototype.getClass=function(){return ur},hr.HotPixelSnapAction.get=function(){return pr},Object.defineProperties(ur,hr);var pr=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(cr),dr=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new St};dr.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)this._interiorIntersections.add(this._li.getIntersection(l));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},dr.prototype.isDone=function(){return!1},dr.prototype.getInteriorIntersections=function(){return this._interiorIntersections},dr.prototype.interfaces_=function(){return[qn]},dr.prototype.getClass=function(){return dr};var fr=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new it,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};fr.prototype.checkCorrectness=function(t){var e=fn.getNodedSubstrings(t),n=new or(e);try{n.checkValid()}catch(t){if(!(t instanceof U))throw t;t.printStackTrace()}},fr.prototype.getNodedSubstrings=function(){return fn.getNodedSubstrings(this._nodedSegStrings)},fr.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},fr.prototype.findInteriorIntersections=function(t,e){var n=new dr(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},fr.prototype.computeVertexSnaps=function(){if(P(arguments[0],_t))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof fn)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new sr(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},fr.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new wn,this._pointSnapper=new ur(this._noder.getIndex()),this.snapRound(t,this._li)},fr.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new sr(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},fr.prototype.interfaces_=function(){return[_n]},fr.prototype.getClass=function(){return fr};var gr=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Cn,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},mr={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};gr.prototype.bufferFixedPrecision=function(t){var e=new ir(new fr(new de(1)),t.getScale()),n=new rr(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},gr.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=gr.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Te))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=gr.precisionScaleFactor(this._argGeom,this._distance,n),i=new de(r);this.bufferFixedPrecision(i)}},gr.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===de.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},gr.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},gr.prototype.bufferOriginalPrecision=function(){try{var t=new rr(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Q))throw t;this._saveException=t}},gr.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},gr.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},gr.prototype.interfaces_=function(){return[]},gr.prototype.getClass=function(){return gr},gr.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new gr(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ut&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],r=new gr(arguments[0]);return r.setQuadrantSegments(n),r.getResultGeometry(e)}if(arguments[2]instanceof Cn&&arguments[0]instanceof ut&&"number"==typeof arguments[1]){var i=arguments[1];return new gr(arguments[0],arguments[2]).getResultGeometry(i)}}else if(4===arguments.length){var o=arguments[1],a=arguments[2],s=arguments[3],l=new gr(arguments[0]);return l.setQuadrantSegments(a),l.setEndCapStyle(s),l.getResultGeometry(o)}},gr.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=O.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},mr.CAP_ROUND.get=function(){return Cn.CAP_ROUND},mr.CAP_BUTT.get=function(){return Cn.CAP_FLAT},mr.CAP_FLAT.get=function(){return Cn.CAP_FLAT},mr.CAP_SQUARE.get=function(){return Cn.CAP_SQUARE},mr.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(gr,mr);var yr=function(){this._pt=[new C,new C],this._distance=x.NaN,this._isNull=!0};yr.prototype.getCoordinates=function(){return this._pt},yr.prototype.getCoordinate=function(t){return this._pt[t]},yr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},yr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},yr.prototype.getDistance=function(){return this._distance},yr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},yr.prototype.interfaces_=function(){return[]},yr.prototype.getClass=function(){return yr};var vr=function(){};vr.prototype.interfaces_=function(){return[]},vr.prototype.getClass=function(){return vr},vr.computeDistance=function(){if(arguments[2]instanceof yr&&arguments[0]instanceof Yt&&arguments[1]instanceof C)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),r=new gn,i=0;i<n.length-1;i++){r.setCoordinates(n[i],n[i+1]);var o=r.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof yr&&arguments[0]instanceof Qt&&arguments[1]instanceof C){var a=arguments[0],s=arguments[1],l=arguments[2];vr.computeDistance(a.getExteriorRing(),s,l);for(var c=0;c<a.getNumInteriorRing();c++)vr.computeDistance(a.getInteriorRingN(c),s,l)}else if(arguments[2]instanceof yr&&arguments[0]instanceof ut&&arguments[1]instanceof C){var u=arguments[0],h=arguments[1],p=arguments[2];if(u instanceof Yt)vr.computeDistance(u,h,p);else if(u instanceof Qt)vr.computeDistance(u,h,p);else if(u instanceof Ut)for(var d=u,f=0;f<d.getNumGeometries();f++){var g=d.getGeometryN(f);vr.computeDistance(g,h,p)}else p.setMinimum(u.getCoordinate(),h)}else if(arguments[2]instanceof yr&&arguments[0]instanceof gn&&arguments[1]instanceof C){var m=arguments[1],y=arguments[2],v=arguments[0].closestPoint(m);y.setMinimum(v,m)}};var xr=function(t){this._maxPtDist=new yr,this._inputGeom=t||null},_r={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};xr.prototype.computeMaxMidpointDistance=function(t){var e=new wr(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},xr.prototype.computeMaxVertexDistance=function(t){var e=new br(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},xr.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},xr.prototype.getDistancePoints=function(){return this._maxPtDist},xr.prototype.interfaces_=function(){return[]},xr.prototype.getClass=function(){return xr},_r.MaxPointDistanceFilter.get=function(){return br},_r.MaxMidpointDistanceFilter.get=function(){return wr},Object.defineProperties(xr,_r);var br=function(t){this._maxPtDist=new yr,this._minPtDist=new yr,this._geom=t||null};br.prototype.filter=function(t){this._minPtDist.initialize(),vr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},br.prototype.getMaxPointDistance=function(){return this._maxPtDist},br.prototype.interfaces_=function(){return[dt]},br.prototype.getClass=function(){return br};var wr=function(t){this._maxPtDist=new yr,this._minPtDist=new yr,this._geom=t||null};wr.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new C((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),vr.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},wr.prototype.isDone=function(){return!1},wr.prototype.isGeometryChanged=function(){return!1},wr.prototype.getMaxPointDistance=function(){return this._maxPtDist},wr.prototype.interfaces_=function(){return[jt]},wr.prototype.getClass=function(){return wr};var Sr=function(t){this._comps=t||null};Sr.prototype.filter=function(t){t instanceof Qt&&this._comps.add(t)},Sr.prototype.interfaces_=function(){return[$t]},Sr.prototype.getClass=function(){return Sr},Sr.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Sr.getPolygons(t,new St)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Qt?n.add(e):e instanceof Ut&&e.apply(new Sr(n)),n}};var Cr=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Cr.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ee){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Yt&&this._lines.add(t)},Cr.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Cr.prototype.interfaces_=function(){return[ct]},Cr.prototype.getClass=function(){return Cr},Cr.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Cr.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Cr.getLines(e,n))}},Cr.getLines=function(){if(1===arguments.length){var t=arguments[0];return Cr.getLines(t,!1)}if(2===arguments.length){if(P(arguments[0],_t)&&P(arguments[1],_t)){for(var e=arguments[1],n=arguments[0].iterator();n.hasNext();){var r=n.next();Cr.getLines(r,e)}return e}if(arguments[0]instanceof ut&&"boolean"==typeof arguments[1]){var i=arguments[0],o=arguments[1],a=new St;return i.apply(new Cr(a,o)),a}if(arguments[0]instanceof ut&&P(arguments[1],_t)){var s=arguments[0],l=arguments[1];return s instanceof Yt?l.add(s):s.apply(new Cr(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&P(arguments[0],_t)&&P(arguments[1],_t)){for(var c=arguments[1],u=arguments[2],h=arguments[0].iterator();h.hasNext();){var p=h.next();Cr.getLines(p,c,u)}return c}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ut&&P(arguments[1],_t)){var d=arguments[1],f=arguments[2];return arguments[0].apply(new Cr(d,f)),d}}};var Er=function(){if(this._boundaryRule=ft.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new v("Rule must be non-null");this._boundaryRule=t}};Er.prototype.locateInternal=function(){if(arguments[0]instanceof C&&arguments[1]instanceof Qt){var t=arguments[0],e=arguments[1];if(e.isEmpty())return T.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===T.EXTERIOR)return T.EXTERIOR;if(r===T.BOUNDARY)return T.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),a=this.locateInPolygonRing(t,o);if(a===T.INTERIOR)return T.EXTERIOR;if(a===T.BOUNDARY)return T.BOUNDARY}return T.INTERIOR}if(arguments[0]instanceof C&&arguments[1]instanceof Yt){var s=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(s))return T.EXTERIOR;var c=l.getCoordinates();return l.isClosed()||!s.equals(c[0])&&!s.equals(c[c.length-1])?st.isOnLine(s,c)?T.INTERIOR:T.EXTERIOR:T.BOUNDARY}if(arguments[0]instanceof C&&arguments[1]instanceof Kt){var u=arguments[0];return arguments[1].getCoordinate().equals2D(u)?T.INTERIOR:T.EXTERIOR}},Er.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?st.locatePointInRing(t,e.getCoordinates()):T.EXTERIOR},Er.prototype.intersects=function(t,e){return this.locate(t,e)!==T.EXTERIOR},Er.prototype.updateLocationInfo=function(t){t===T.INTERIOR&&(this._isIn=!0),t===T.BOUNDARY&&this._numBoundaries++},Er.prototype.computeLocation=function(t,e){if(e instanceof Kt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Yt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Qt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Vt)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof ne)for(var o=e,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof Ut)for(var l=new jn(e);l.hasNext();){var c=l.next();c!==e&&this.computeLocation(t,c)}},Er.prototype.locate=function(t,e){return e.isEmpty()?T.EXTERIOR:e instanceof Yt||e instanceof Qt?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?T.BOUNDARY:this._numBoundaries>0||this._isIn?T.INTERIOR:T.EXTERIOR)},Er.prototype.interfaces_=function(){return[]},Er.prototype.getClass=function(){return Er};var kr=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._component=e,this._segIndex=n,this._pt=r}},Mr={INSIDE_AREA:{configurable:!0}};kr.prototype.isInsideArea=function(){return this._segIndex===kr.INSIDE_AREA},kr.prototype.getCoordinate=function(){return this._pt},kr.prototype.getGeometryComponent=function(){return this._component},kr.prototype.getSegmentIndex=function(){return this._segIndex},kr.prototype.interfaces_=function(){return[]},kr.prototype.getClass=function(){return kr},Mr.INSIDE_AREA.get=function(){return-1},Object.defineProperties(kr,Mr);var Tr=function(t){this._pts=t||null};Tr.prototype.filter=function(t){t instanceof Kt&&this._pts.add(t)},Tr.prototype.interfaces_=function(){return[$t]},Tr.prototype.getClass=function(){return Tr},Tr.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Kt?Qe.singletonList(t):Tr.getPoints(t,new St)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Kt?n.add(e):e instanceof Ut&&e.apply(new Tr(n)),n}};var Ir=function(){this._locations=null;var t=arguments[0];this._locations=t};Ir.prototype.filter=function(t){(t instanceof Kt||t instanceof Yt||t instanceof Qt)&&this._locations.add(new kr(t,0,t.getCoordinate()))},Ir.prototype.interfaces_=function(){return[$t]},Ir.prototype.getClass=function(){return Ir},Ir.getLocations=function(t){var e=new St;return t.apply(new Ir(e)),e};var Pr=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Er,this._minDistanceLocation=null,this._minDistance=x.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Pr.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=Sr.getPolygons(this._geom[e]);if(i.size()>0){var o=Ir.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&P(arguments[0],wt)&&P(arguments[1],wt)){for(var a=arguments[0],s=arguments[1],l=arguments[2],c=0;c<a.size();c++)for(var u=a.get(c),h=0;h<s.size();h++)if(this.computeContainmentDistance(u,s.get(h),l),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof kr&&arguments[1]instanceof Qt){var p=arguments[0],d=arguments[1],f=arguments[2],g=p.getCoordinate();if(T.EXTERIOR!==this._ptLocator.locate(g,d))return this._minDistance=0,f[0]=p,f[1]=new kr(d,g),null}},Pr.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Pr.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Cr.getLines(this._geom[0]),n=Cr.getLines(this._geom[1]),r=Tr.getPoints(this._geom[0]),i=Tr.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Pr.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Pr.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Pr.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Pr.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Yt&&arguments[1]instanceof Kt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var a=st.distancePointLine(i,r[o],r[o+1]);if(a<this._minDistance){this._minDistance=a;var s=new gn(r[o],r[o+1]).closestPoint(i);n[0]=new kr(t,o,s),n[1]=new kr(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Yt&&arguments[1]instanceof Yt){var l=arguments[0],c=arguments[1],u=arguments[2];if(l.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this._minDistance)return null;for(var h=l.getCoordinates(),p=c.getCoordinates(),d=0;d<h.length-1;d++)for(var f=0;f<p.length-1;f++){var g=st.distanceLineLine(h[d],h[d+1],p[f],p[f+1]);if(g<this._minDistance){this._minDistance=g;var m=new gn(h[d],h[d+1]),y=new gn(p[f],p[f+1]),v=m.closestPoints(y);u[0]=new kr(l,d,v[0]),u[1]=new kr(c,f,v[1])}if(this._minDistance<=this._terminateDistance)return null}}},Pr.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o),s=i.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,n[0]=new kr(i,0,i.getCoordinate()),n[1]=new kr(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Pr.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new v("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Pr.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Pr.prototype.interfaces_=function(){return[]},Pr.prototype.getClass=function(){return Pr},Pr.distance=function(t,e){return new Pr(t,e).distance()},Pr.isWithinDistance=function(t,e,n){return new Pr(t,e,n).distance()<=n},Pr.nearestPoints=function(t,e){return new Pr(t,e).nearestPoints()};var Or=function(){this._pt=[new C,new C],this._distance=x.NaN,this._isNull=!0};Or.prototype.getCoordinates=function(){return this._pt},Or.prototype.getCoordinate=function(t){return this._pt[t]},Or.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Or.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Or.prototype.toString=function(){return J.toLineString(this._pt[0],this._pt[1])},Or.prototype.getDistance=function(){return this._distance},Or.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Or.prototype.interfaces_=function(){return[]},Or.prototype.getClass=function(){return Or};var Ar=function(){};Ar.prototype.interfaces_=function(){return[]},Ar.prototype.getClass=function(){return Ar},Ar.computeDistance=function(){if(arguments[2]instanceof Or&&arguments[0]instanceof Yt&&arguments[1]instanceof C)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new gn,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof Or&&arguments[0]instanceof Qt&&arguments[1]instanceof C){var s=arguments[0],l=arguments[1],c=arguments[2];Ar.computeDistance(s.getExteriorRing(),l,c);for(var u=0;u<s.getNumInteriorRing();u++)Ar.computeDistance(s.getInteriorRingN(u),l,c)}else if(arguments[2]instanceof Or&&arguments[0]instanceof ut&&arguments[1]instanceof C){var h=arguments[0],p=arguments[1],d=arguments[2];if(h instanceof Yt)Ar.computeDistance(h,p,d);else if(h instanceof Qt)Ar.computeDistance(h,p,d);else if(h instanceof Ut)for(var f=h,g=0;g<f.getNumGeometries();g++){var m=f.getGeometryN(g);Ar.computeDistance(m,p,d)}else d.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof Or&&arguments[0]instanceof gn&&arguments[1]instanceof C){var y=arguments[1],v=arguments[2],x=arguments[0].closestPoint(y);v.setMinimum(x,y)}};var Dr=function(){this._g0=null,this._g1=null,this._ptDist=new Or,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Rr={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Dr.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Dr.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new v("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Dr.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Dr.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Dr.prototype.computeOrientedDistance=function(t,e,n){var r=new Lr(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new Nr(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Dr.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Dr.prototype.interfaces_=function(){return[]},Dr.prototype.getClass=function(){return Dr},Dr.distance=function(){if(2===arguments.length)return new Dr(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new Dr(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},Rr.MaxPointDistanceFilter.get=function(){return Lr},Rr.MaxDensifiedByFractionDistanceFilter.get=function(){return Nr},Object.defineProperties(Dr,Rr);var Lr=function(){this._maxPtDist=new Or,this._minPtDist=new Or,this._euclideanDist=new Ar,this._geom=null;var t=arguments[0];this._geom=t};Lr.prototype.filter=function(t){this._minPtDist.initialize(),Ar.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Lr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Lr.prototype.interfaces_=function(){return[dt]},Lr.prototype.getClass=function(){return Lr};var Nr=function(){this._maxPtDist=new Or,this._minPtDist=new Or,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Nr.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=n.x+a*i,l=n.y+a*o,c=new C(s,l);this._minPtDist.initialize(),Ar.computeDistance(this._geom,c,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Nr.prototype.isDone=function(){return!1},Nr.prototype.isGeometryChanged=function(){return!1},Nr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Nr.prototype.interfaces_=function(){return[jt]},Nr.prototype.getClass=function(){return Nr};var Fr=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},zr={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Fr.prototype.checkMaximumDistance=function(t,e,n){var r=new Dr(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+J.toLineString(i[0],i[1])+")"}},Fr.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Fr.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Fr.VERBOSE&&H.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Fr.prototype.checkNegativeValid=function(){if(!(this._input instanceof Qt||this._input instanceof ne||this._input instanceof Ut))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Fr.prototype.getErrorIndicator=function(){return this._errorIndicator},Fr.prototype.checkMinimumDistance=function(t,e,n){var r=new Pr(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+J.toLineString(i[0],i[1])+" )"}},Fr.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Fr.prototype.getErrorLocation=function(){return this._errorLocation},Fr.prototype.getPolygonLines=function(t){for(var e=new St,n=new Cr(e),r=Sr.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},Fr.prototype.getErrorMessage=function(){return this._errMsg},Fr.prototype.interfaces_=function(){return[]},Fr.prototype.getClass=function(){return Fr},zr.VERBOSE.get=function(){return!1},zr.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Fr,zr);var Br=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},$r={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Br.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Br.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Br.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new W(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new W(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Br.prototype.checkDistance=function(){var t=new Fr(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Br.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Br.prototype.checkPolygonal=function(){this._result instanceof Qt||this._result instanceof ne||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Br.prototype.getErrorIndicator=function(){return this._errorIndicator},Br.prototype.getErrorLocation=function(){return this._errorLocation},Br.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Br.prototype.report=function(t){if(!Br.VERBOSE)return null;H.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Br.prototype.getErrorMessage=function(){return this._errorMsg},Br.prototype.interfaces_=function(){return[]},Br.prototype.getClass=function(){return Br},Br.isValidMsg=function(t,e,n){var r=new Br(t,e,n);return r.isValid()?null:r.getErrorMessage()},Br.isValid=function(t,e,n){return!!new Br(t,e,n).isValid()},$r.VERBOSE.get=function(){return!1},$r.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Br,$r);var jr=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};jr.prototype.getCoordinates=function(){return this._pts},jr.prototype.size=function(){return this._pts.length},jr.prototype.getCoordinate=function(t){return this._pts[t]},jr.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},jr.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:hn.octant(this.getCoordinate(t),this.getCoordinate(t+1))},jr.prototype.setData=function(t){this._data=t},jr.prototype.getData=function(){return this._data},jr.prototype.toString=function(){return J.toLineString(new le(this._pts))},jr.prototype.interfaces_=function(){return[pn]},jr.prototype.getClass=function(){return jr};var Ur=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new St,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Ur.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Ur.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Ur.prototype.getIntersectionSegments=function(){return this._intSegments},Ur.prototype.count=function(){return this._intersectionCount},Ur.prototype.getIntersections=function(){return this._intersections},Ur.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Ur.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Ur.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Ur.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Ur.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Ur.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Ur.prototype.interfaces_=function(){return[qn]},Ur.prototype.getClass=function(){return Ur},Ur.createAllIntersectionsFinder=function(t){var e=new Ur(t);return e.setFindAllIntersections(!0),e},Ur.createAnyIntersectionFinder=function(t){return new Ur(t)},Ur.createIntersectionCounter=function(t){var e=new Ur(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Vr=function(){this._li=new it,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Vr.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Vr.prototype.getIntersections=function(){return this._segInt.getIntersections()},Vr.prototype.isValid=function(){return this.execute(),this._isValid},Vr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Vr.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Ur(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new wn;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Vr.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Te(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Vr.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+J.toLineString(t[0],t[1])+" and "+J.toLineString(t[2],t[3])},Vr.prototype.interfaces_=function(){return[]},Vr.prototype.getClass=function(){return Vr},Vr.computeIntersections=function(t){var e=new Vr(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Hr=function t(){this._nv=null;var e=arguments[0];this._nv=new Vr(t.toSegmentStrings(e))};Hr.prototype.checkValid=function(){this._nv.checkValid()},Hr.prototype.interfaces_=function(){return[]},Hr.prototype.getClass=function(){return Hr},Hr.toSegmentStrings=function(t){for(var e=new St,n=t.iterator();n.hasNext();){var r=n.next();e.add(new jr(r.getCoordinates(),r))}return e},Hr.checkValid=function(t){new Hr(t).checkValid()};var Gr=function(t){this._mapOp=t};Gr.prototype.map=function(t){for(var e=new St,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(ye.toGeometryArray(e))},Gr.prototype.interfaces_=function(){return[]},Gr.prototype.getClass=function(){return Gr},Gr.map=function(t,e){return new Gr(e).map(t)};var Wr=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new St,this._resultLineList=new St;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Wr.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Wr.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Wr.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Wr.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!ki.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Wr.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Wr.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Wr.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Wr.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(et.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(ki.isResultOfOp(r,e)&&e===ki.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Wr.prototype.interfaces_=function(){return[]},Wr.prototype.getClass=function(){return Wr};var Xr=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new St;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Xr.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Xr.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!n.isInResult()&&!n.isIncidentEdgeInResult()&&(0===n.getEdges().getDegree()||t===ki.INTERSECTION)){var r=n.getLabel();ki.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Xr.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Xr.prototype.interfaces_=function(){return[]},Xr.prototype.getClass=function(){return Xr};var qr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};qr.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},qr.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof ee&&!r.isEmpty()||(n=!1);for(var i=new St,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof ee||(n=!1),i.add(a))}if(n)return this._factory.createPolygon(r,i.toArray([]));var s=new St;return null!==r&&s.add(r),s.addAll(i),this._factory.buildGeometry(s)},qr.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},qr.prototype.getInputGeometry=function(){return this._inputGeom},qr.prototype.transformMultiLineString=function(t,e){for(var n=new St,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},qr.prototype.transformCoordinates=function(t,e){return this.copy(t)},qr.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},qr.prototype.transformMultiPoint=function(t,e){for(var n=new St,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},qr.prototype.transformMultiPolygon=function(t,e){for(var n=new St,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},qr.prototype.copy=function(t){return t.copy()},qr.prototype.transformGeometryCollection=function(t,e){for(var n=new St,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(ye.toGeometryArray(n)):this._factory.buildGeometry(n)},qr.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Kt)return this.transformPoint(t,null);if(t instanceof te)return this.transformMultiPoint(t,null);if(t instanceof ee)return this.transformLinearRing(t,null);if(t instanceof Yt)return this.transformLineString(t,null);if(t instanceof Vt)return this.transformMultiLineString(t,null);if(t instanceof Qt)return this.transformPolygon(t,null);if(t instanceof ne)return this.transformMultiPolygon(t,null);if(t instanceof Ut)return this.transformGeometryCollection(t,null);throw new v("Unknown Geometry subtype: "+t.getClass().getName())},qr.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},qr.prototype.interfaces_=function(){return[]},qr.prototype.getClass=function(){return qr};var Yr=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new gn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Yt&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=r}};Yr.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new C(o)),0===r&&this._isClosed&&t.set(t.size()-1,new C(o)))}},Yr.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Yr.prototype.snapTo=function(t){var e=new Et(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Yr.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new C(i),!1)}},Yr.prototype.findSegmentIndexToSnap=function(t,e){for(var n=x.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},Yr.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Yr.prototype.interfaces_=function(){return[]},Yr.prototype.getClass=function(){return Yr},Yr.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Zr=function(t){this._srcGeom=t||null},Kr={SNAP_PRECISION_FACTOR:{configurable:!0}};Zr.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Jr(e,n).transform(this._srcGeom)},Zr.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new Jr(t,n,!0).transform(this._srcGeom),i=r;return e&&P(i,Jt)&&(i=r.buffer(0)),i},Zr.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Zr.prototype.extractTargetCoordinates=function(t){for(var e=new d,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},Zr.prototype.computeMinimumSegmentLength=function(t){for(var e=x.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},Zr.prototype.interfaces_=function(){return[]},Zr.prototype.getClass=function(){return Zr},Zr.snap=function(t,e,n){var r=new Array(2).fill(null),i=new Zr(t);r[0]=i.snapTo(e,n);var o=new Zr(e);return r[1]=o.snapTo(r[0],n),r},Zr.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Zr.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===de.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Zr.computeOverlaySnapTolerance(i),Zr.computeOverlaySnapTolerance(o))}},Zr.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Zr.SNAP_PRECISION_FACTOR},Zr.snapToSelf=function(t,e,n){return new Zr(t).snapToSelf(e,n)},Kr.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Zr,Kr);var Jr=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Yr(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(qr),Qr=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Qr.prototype.getCommon=function(){return x.longBitsToDouble(this._commonBits)},Qr.prototype.add=function(t){var e=x.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Qr.signExpBits(this._commonBits),this._isFirst=!1,null):Qr.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Qr.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Qr.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Qr.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=x.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+x.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},Qr.prototype.interfaces_=function(){return[]},Qr.prototype.getClass=function(){return Qr},Qr.getBit=function(t,e){return 0!=(t&1<<e)?1:0},Qr.signExpBits=function(t){return t>>52},Qr.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Qr.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(Qr.getBit(t,r)!==Qr.getBit(e,r))return n;n++}return 52};var ti=function(){this._commonCoord=null,this._ccFilter=new ni},ei={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};ti.prototype.addCommonBits=function(t){var e=new ri(this._commonCoord);t.apply(e),t.geometryChanged()},ti.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new C(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new ri(e);return t.apply(n),t.geometryChanged(),t},ti.prototype.getCommonCoordinate=function(){return this._commonCoord},ti.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ei.CommonCoordinateFilter.get=function(){return ni},ei.Translater.get=function(){return ri},Object.defineProperties(ti,ei);var ni=function(){this._commonBitsX=new Qr,this._commonBitsY=new Qr};ni.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},ni.prototype.getCommonCoordinate=function(){return new C(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ni.prototype.interfaces_=function(){return[dt]},ni.prototype.getClass=function(){return ni};var ri=function(){this.trans=null;var t=arguments[0];this.trans=t};ri.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},ri.prototype.isDone=function(){return!1},ri.prototype.isGeometryChanged=function(){return!0},ri.prototype.interfaces_=function(){return[jt]},ri.prototype.getClass=function(){return ri};var ii=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ii.prototype.selfSnap=function(t){return new Zr(t).snapTo(t,this._snapTolerance)},ii.prototype.removeCommonBits=function(t){this._cbr=new ti,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ii.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ii.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=ki.overlayOp(e[0],e[1],t);return this.prepareResult(n)},ii.prototype.checkValid=function(t){t.isValid()||H.out.println("Snapped geometry is invalid")},ii.prototype.computeSnapTolerance=function(){this._snapTolerance=Zr.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ii.prototype.snap=function(t){var e=this.removeCommonBits(t);return Zr.snap(e[0],e[1],this._snapTolerance)},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.overlayOp=function(t,e,n){return new ii(t,e).getResultGeometry(n)},ii.union=function(t,e){return ii.overlayOp(t,e,ki.UNION)},ii.intersection=function(t,e){return ii.overlayOp(t,e,ki.INTERSECTION)},ii.symDifference=function(t,e){return ii.overlayOp(t,e,ki.SYMDIFFERENCE)},ii.difference=function(t,e){return ii.overlayOp(t,e,ki.DIFFERENCE)};var oi=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};oi.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=ki.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof Q))throw t;r=t}if(!n)try{e=ii.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Q?r:t}return e},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},oi.overlayOp=function(t,e,n){return new oi(t,e).getResultGeometry(n)},oi.union=function(t,e){return oi.overlayOp(t,e,ki.UNION)},oi.intersection=function(t,e){return oi.overlayOp(t,e,ki.INTERSECTION)},oi.symDifference=function(t,e){return oi.overlayOp(t,e,ki.SYMDIFFERENCE)},oi.difference=function(t,e){return oi.overlayOp(t,e,ki.DIFFERENCE)};var ai=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};ai.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},ai.prototype.interfaces_=function(){return[]},ai.prototype.getClass=function(){return ai};var si=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},li={INSERT:{configurable:!0},DELETE:{configurable:!0}};si.prototype.isDelete=function(){return this._eventType===si.DELETE},si.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},si.prototype.getObject=function(){return this._obj},si.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},si.prototype.getInsertEvent=function(){return this._insertEvent},si.prototype.isInsert=function(){return this._eventType===si.INSERT},si.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},si.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},si.prototype.interfaces_=function(){return[b]},si.prototype.getClass=function(){return si},li.INSERT.get=function(){return 1},li.DELETE.get=function(){return 2},Object.defineProperties(si,li);var ci=function(){};ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci};var ui=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};ui.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(ui.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},ui.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ui.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},ui.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ui.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},ui.prototype.hasProperIntersection=function(){return this._hasProper},ui.prototype.hasIntersection=function(){return this._hasIntersection},ui.prototype.isDone=function(){return this._isDone},ui.prototype.isBoundaryPoint=function(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},ui.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},ui.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},ui.prototype.interfaces_=function(){return[]},ui.prototype.getClass=function(){return ui},ui.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var hi=function(t){function e(){t.call(this),this.events=new St,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){Qe.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof ui&&P(arguments[0],wt)&&P(arguments[1],wt)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&P(arguments[0],wt)&&arguments[1]instanceof ui){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new ai(n,i),a=new si(e,n.getMinX(i),o);this.events.add(a),this.events.add(new si(n.getMaxX(i),a))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(i.computeIntersections(s,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();){var i=r.next();this.addEdge(i,n)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ci),pi=function(){this._min=x.POSITIVE_INFINITY,this._max=x.NEGATIVE_INFINITY},di={NodeComparator:{configurable:!0}};pi.prototype.getMin=function(){return this._min},pi.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},pi.prototype.getMax=function(){return this._max},pi.prototype.toString=function(){return J.toLineString(new C(this._min,0),new C(this._max,0))},pi.prototype.interfaces_=function(){return[]},pi.prototype.getClass=function(){return pi},di.NodeComparator.get=function(){return fi},Object.defineProperties(pi,di);var fi=function(){};fi.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},fi.prototype.interfaces_=function(){return[S]},fi.prototype.getClass=function(){return fi};var gi=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pi),mi=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pi),yi=function(){this._leaves=new St,this._root=null,this._level=0};yi.prototype.buildTree=function(){Qe.sort(this._leaves,new pi.NodeComparator);for(var t=this._leaves,e=null,n=new St;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},yi.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new gi(t,e,n))},yi.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},yi.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},yi.prototype.printNode=function(t){H.out.println(J.toLineString(new C(t._min,this._level),new C(t._max,this._level)))},yi.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},yi.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new mi(t.get(n),t.get(n+1));e.add(i)}}},yi.prototype.interfaces_=function(){return[]},yi.prototype.getClass=function(){return yi};var vi=function(){this._items=new St};vi.prototype.visitItem=function(t){this._items.add(t)},vi.prototype.getItems=function(){return this._items},vi.prototype.interfaces_=function(){return[Ye]},vi.prototype.getClass=function(){return vi};var xi=function(){this._index=null;var t=arguments[0];if(!P(t,Jt))throw new v("Argument must be Polygonal");this._index=new wi(t)},_i={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};xi.prototype.locate=function(t){var e=new at(t),n=new bi(e);return this._index.query(t.y,t.y,n),e.getLocation()},xi.prototype.interfaces_=function(){return[$n]},xi.prototype.getClass=function(){return xi},_i.SegmentVisitor.get=function(){return bi},_i.IntervalIndexedGeometry.get=function(){return wi},Object.defineProperties(xi,_i);var bi=function(){this._counter=null;var t=arguments[0];this._counter=t};bi.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},bi.prototype.interfaces_=function(){return[Ye]},bi.prototype.getClass=function(){return bi};var wi=function(){this._index=new yi;var t=arguments[0];this.init(t)};wi.prototype.init=function(t){for(var e=Cr.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},wi.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new gn(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},wi.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new vi;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},wi.prototype.interfaces_=function(){return[]},wi.prototype.getClass=function(){return wi};var Si=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new pe,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Er,2===arguments.length){var e=arguments[0],n=arguments[1],r=ft.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;T.NONE,r.getLocation(t,Ee.ON)===T.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[1],r=arguments[2],i=new ui(arguments[0],!0,!1);i.setIsDoneIfProperInt(r);var o=this.createEdgeSetIntersector(),a=this._parentGeom instanceof ee||this._parentGeom instanceof Qt||this._parentGeom instanceof ne,s=n||!a;return o.computeIntersections(this._edges,i,s),this.addSelfIntersectionNodes(this._argIndex),i}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new ui(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Kt){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,T.INTERIOR)}else if(arguments[0]instanceof C){var e=arguments[0];this.insertPoint(this._argIndex,e,T.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),T.EXTERIOR,T.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,T.INTERIOR,T.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],T.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],T.BOUNDARY)},e.prototype.addLineString=function(t){var e=kt.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new nr(e,new Ae(this._argIndex,T.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),et.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===T.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=kt.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;st.isCCW(r)&&(i=n,o=e);var a=new nr(r,new Ae(this._argIndex,T.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],T.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Ae(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new hi},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ne&&(this._useBoundaryDeterminationRule=!1),e instanceof Qt)this.addPolygon(e);else if(e instanceof Yt)this.addLineString(e);else if(e instanceof Kt)this.addPoint(e);else if(e instanceof te)this.addCollection(e);else if(e instanceof Vt)this.addCollection(e);else if(e instanceof ne)this.addCollection(e);else{if(!(e instanceof Ut))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return P(this._parentGeom,Jt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new xi(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?T.BOUNDARY:T.INTERIOR},e}(He),Ci=function(){if(this._li=new it,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Si(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=ft.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Si(0,e,r),this._arg[1]=new Si(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Si(0,i,a),this._arg[1]=new Si(1,o,a)}};Ci.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Ci.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Ci.prototype.interfaces_=function(){return[]},Ci.prototype.getClass=function(){return Ci};var Ei=function(){};Ei.prototype.interfaces_=function(){return[]},Ei.prototype.getClass=function(){return Ei},Ei.map=function(){if(arguments[0]instanceof ut&&P(arguments[1],Ei.MapOp)){for(var t=arguments[0],e=arguments[1],n=new St,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(P(arguments[0],_t)&&P(arguments[1],Ei.MapOp)){for(var o=arguments[0],a=arguments[1],s=new St,l=o.iterator();l.hasNext();){var c=l.next(),u=a.map(c);null!==u&&s.add(u)}return s}},Ei.MapOp=function(){};var ki=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Er,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Xn,this._resultPolyList=new St,this._resultLineList=new St,this._resultPointList=new St,this._graph=new He(new Gn),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Ae(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new St;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==T.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new St,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new St;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Hr.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Ge(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Wr(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Xr(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Ee.RIGHT),i.getLocation(1,Ee.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(et.isTrue(!r.isNull(i,Ee.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Ee.LEFT,r.getLocation(i,Ee.LEFT)),et.isTrue(!r.isNull(i,Ee.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Ee.RIGHT,r.getLocation(i,Ee.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ci);ki.overlayOp=function(t,e,n){return new ki(t,e).getResultGeometry(n)},ki.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return ki.createEmptyResult(ki.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Gr.map(t,{interfaces_:function(){return[Ei.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,ki.INTERSECTION)},ki.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return ki.createEmptyResult(ki.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,ki.SYMDIFFERENCE)},ki.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case ki.INTERSECTION:o=Math.min(r,i);break;case ki.UNION:o=Math.max(r,i);break;case ki.DIFFERENCE:o=r;break;case ki.SYMDIFFERENCE:o=Math.max(r,i)}return o},ki.createEmptyResult=function(t,e,n,r){var i=null;switch(ki.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},ki.difference=function(t,e){return t.isEmpty()?ki.createEmptyResult(ki.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,ki.DIFFERENCE))},ki.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return ki.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];switch(i===T.BOUNDARY&&(i=T.INTERIOR),o===T.BOUNDARY&&(o=T.INTERIOR),a){case ki.INTERSECTION:return i===T.INTERIOR&&o===T.INTERIOR;case ki.UNION:return i===T.INTERIOR||o===T.INTERIOR;case ki.DIFFERENCE:return i===T.INTERIOR&&o!==T.INTERIOR;case ki.SYMDIFFERENCE:return i===T.INTERIOR&&o!==T.INTERIOR||i!==T.INTERIOR&&o===T.INTERIOR}return!1}},ki.INTERSECTION=1,ki.UNION=2,ki.DIFFERENCE=3,ki.SYMDIFFERENCE=4;var Mi=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Er,this._seg=new gn;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Mi.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Mi.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?T.BOUNDARY:this._ptLocator.locate(t,this._g)},Mi.prototype.extractLinework=function(t){var e=new Ti;t.apply(e);var n=e.getLinework(),r=ye.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Mi.prototype.interfaces_=function(){return[]},Mi.prototype.getClass=function(){return Mi};var Ti=function(){this._linework=null,this._linework=new St};Ti.prototype.getLinework=function(){return this._linework},Ti.prototype.filter=function(t){if(t instanceof Qt){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Ti.prototype.interfaces_=function(){return[$t]},Ti.prototype.getClass=function(){return Ti};var Ii=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Ii.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Ii.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Ii.prototype.getPoints=function(t){for(var e=new St,n=Cr.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Ii.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=Math.sqrt(i*i+o*o),s=n*i/a,l=n*o/a,c=(e.x+t.x)/2,u=(e.y+t.y)/2;if(this._doLeft){var h=new C(c-l,u+s);r.add(h)}if(this._doRight){var p=new C(c+l,u-s);r.add(p)}},Ii.prototype.interfaces_=function(){return[]},Ii.prototype.getClass=function(){return Ii};var Pi=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new St;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Mi(this._geom[0],this._boundaryDistanceTolerance),new Mi(this._geom[1],this._boundaryDistanceTolerance),new Mi(this._geom[2],this._boundaryDistanceTolerance)]},Oi={TOLERANCE:{configurable:!0}};Pi.prototype.reportResult=function(t,e,n){H.out.println("Overlay result invalid - A:"+T.toLocationSymbol(e[0])+" B:"+T.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+T.toLocationSymbol(e[2]))},Pi.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Pi.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Pi.hasLocation(this._location,T.BOUNDARY)||this.isValidResult(r,this._location)}},Pi.prototype.addTestPts=function(t){var e=new Ii(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Pi.prototype.isValidResult=function(t,e){var n=ki.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===T.INTERIOR);return r||this.reportResult(t,e,n),r},Pi.prototype.getInvalidLocation=function(){return this._invalidLocation},Pi.prototype.interfaces_=function(){return[]},Pi.prototype.getClass=function(){return Pi},Pi.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Pi.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Zr.computeSizeBasedSnapTolerance(t),Zr.computeSizeBasedSnapTolerance(e))},Pi.isValid=function(t,e,n,r){return new Pi(t,e,r).isValid(n)},Oi.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Pi,Oi);var Ai=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Ai.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Ai.prototype.combine=function(){for(var t=new St,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Ai.prototype.interfaces_=function(){return[]},Ai.prototype.getClass=function(){return Ai},Ai.combine=function(){if(1===arguments.length)return new Ai(arguments[0]).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Ai(Ai.createList(t,e)).combine()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];return new Ai(Ai.createList(n,r,i)).combine()}},Ai.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Ai.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new St;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new St;return a.add(r),a.add(i),a.add(o),a}};var Di=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new St)},Ri={STRTREE_NODE_CAPACITY:{configurable:!0}};Di.prototype.reduceToGeometries=function(t){for(var e=new St,n=t.iterator();n.hasNext();){var r=n.next(),i=null;P(r,wt)?i=this.unionTree(r):r instanceof ut&&(i=r),e.add(i)}return e},Di.prototype.extractByEnvelope=function(t,e,n){for(var r=new St,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Di.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Ai.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Di.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new an(Di.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Di.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Di.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Di.getGeometry(e,n),Di.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),a=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,r);return this.unionSafe(a,s)}},Di.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Di.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Di.prototype.unionActual=function(t,e){return Di.restrictToPolygons(t.union(e))},Di.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Di.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new St,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),a=this.unionActual(i,o);return r.add(a),Ai.combine(r)},Di.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Di.prototype.interfaces_=function(){return[]},Di.prototype.getClass=function(){return Di},Di.restrictToPolygons=function(t){if(P(t,Jt))return t;var e=Sr.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(ye.toPolygonArray(e))},Di.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Di.union=function(t){return new Di(t).union()},Ri.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Di,Ri);var Li=function(){};Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li},Li.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return ki.createEmptyResult(ki.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,ki.UNION)},t.GeoJSONReader=Se,t.GeoJSONWriter=Ce,t.OverlayOp=ki,t.UnionOp=Li,t.BufferOp=gr,Object.defineProperty(t,"__esModule",{value:!0})}(e)}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},function(){var t,e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};t=t||[null,e({}),e([]),e(e)];for(var s=2&i&&r;"object"==typeof s&&!~t.indexOf(s);s=e(s))Object.getOwnPropertyNames(s).forEach((function(t){a[t]=function(){return r[t]}}));return a.default=function(){return r},n.d(o,a),o}}(),n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},n.p="/",n.nc=void 0,function(){"use strict";var t={};n.r(t),n.d(t,{Decoder:function(){return JL},Encoder:function(){return ZL},PacketType:function(){return YL},protocol:function(){return qL}});var e={};n.r(e),n.d(e,{assign:function(){return Bq},default:function(){return oY},defaultI18n:function(){return Vq},format:function(){return rY},parse:function(){return iY},setGlobalDateI18n:function(){return Gq},setGlobalDateMasks:function(){return nY}});var r={};n.r(r),n.d(r,{Arc:function(){return gK},DataMarker:function(){return bK},DataRegion:function(){return SK},Html:function(){return RK},Image:function(){return xK},Line:function(){return hK},Region:function(){return yK},RegionFilter:function(){return EK},Shape:function(){return MK},Text:function(){return dK}});var i={};n.r(i),n.d(i,{ellipsisHead:function(){return $K},ellipsisMiddle:function(){return UK},ellipsisTail:function(){return jK},getDefault:function(){return BK}});var o={};n.r(o),n.d(o,{equidistance:function(){return KK},equidistanceWithReverseBoth:function(){return JK},getDefault:function(){return XK},reserveBoth:function(){return ZK},reserveFirst:function(){return qK},reserveLast:function(){return YK}});var a={};n.r(a),n.d(a,{fixedAngle:function(){return eJ},getDefault:function(){return tJ},unfixedAngle:function(){return nJ}});var s={};n.r(s),n.d(s,{autoEllipsis:function(){return i},autoHide:function(){return o},autoRotate:function(){return a}});var l={};n.r(l),n.d(l,{Base:function(){return cJ},Circle:function(){return dJ},Html:function(){return xJ},Line:function(){return hJ}});var c={};n.r(c),n.d(c,{CONTAINER_CLASS:function(){return zJ},CROSSHAIR_X:function(){return GJ},CROSSHAIR_Y:function(){return WJ},LIST_CLASS:function(){return $J},LIST_ITEM_CLASS:function(){return jJ},MARKER_CLASS:function(){return UJ},NAME_CLASS:function(){return HJ},TITLE_CLASS:function(){return BJ},VALUE_CLASS:function(){return VJ}});var u={};n.r(u),n.d(u,{Base:function(){return a4},Circle:function(){return l4},Ellipse:function(){return h4},Image:function(){return f4},Line:function(){return v4},Marker:function(){return N4},Path:function(){return X4},Polygon:function(){return Z4},Polyline:function(){return J4},Rect:function(){return t5},Text:function(){return n5}});var h={};n.r(h),n.d(h,{Canvas:function(){return s5},Group:function(){return i4},Shape:function(){return u},getArcParams:function(){return N3},version:function(){return l5}});var p={};n.r(p),n.d(p,{Base:function(){return b5},Circle:function(){return S5},Dom:function(){return E5},Ellipse:function(){return M5},Image:function(){return I5},Line:function(){return O5},Marker:function(){return L5},Path:function(){return F5},Polygon:function(){return B5},Polyline:function(){return j5},Rect:function(){return V5},Text:function(){return Y5}});var d={};n.r(d),n.d(d,{Canvas:function(){return g6},Group:function(){return x5},Shape:function(){return p},version:function(){return m6}});var f={};n.r(f),n.d(f,{cluster:function(){return zut},hierarchy:function(){return Jst},pack:function(){return Xst},packEnclose:function(){return Ist},packSiblings:function(){return Ust},partition:function(){return Aut},stratify:function(){return Vut},tree:function(){return Zut},treemap:function(){return eht},treemapBinary:function(){return nht},treemapDice:function(){return Out},treemapResquarify:function(){return iht},treemapSlice:function(){return Kut},treemapSliceDice:function(){return rht},treemapSquarify:function(){return tht}});var g,m=n(2791),y=n.t(m,2),v=n(1250);function x(){return x=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},x.apply(this,arguments)}!function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"}(g||(g={}));const _="popstate";function b(t,e){if(!1===t||null===t||"undefined"===typeof t)throw new Error(e)}function w(t,e){if(!t){"undefined"!==typeof console&&console.warn(e);try{throw new Error(e)}catch(kg){}}}function S(t,e){return{usr:t.state,key:t.key,idx:e}}function C(t,e,n,r){return void 0===n&&(n=null),x({pathname:"string"===typeof t?t:t.pathname,search:"",hash:""},"string"===typeof e?k(e):e,{state:n,key:e&&e.key||r||Math.random().toString(36).substr(2,8)})}function E(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&"?"!==n&&(e+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(e+="#"===r.charAt(0)?r:"#"+r),e}function k(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function M(t,e,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,s=g.Pop,l=null,c=u();function u(){return(a.state||{idx:null}).idx}function h(){s=g.Pop;let t=u(),e=null==t?null:t-c;c=t,l&&l({action:s,location:d.location,delta:e})}function p(t){let e="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof t?t:E(t);return b(e,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,e)}null==c&&(c=0,a.replaceState(x({},a.state,{idx:c}),""));let d={get action(){return s},get location(){return t(i,a)},listen(t){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(_,h),l=t,()=>{i.removeEventListener(_,h),l=null}},createHref(t){return e(i,t)},createURL:p,encodeLocation(t){let e=p(t);return{pathname:e.pathname,search:e.search,hash:e.hash}},push:function(t,e){s=g.Push;let r=C(d.location,t,e);n&&n(r,t),c=u()+1;let h=S(r,c),p=d.createHref(r);try{a.pushState(h,"",p)}catch(f){i.location.assign(p)}o&&l&&l({action:s,location:d.location,delta:1})},replace:function(t,e){s=g.Replace;let r=C(d.location,t,e);n&&n(r,t),c=u();let i=S(r,c),h=d.createHref(r);a.replaceState(i,"",h),o&&l&&l({action:s,location:d.location,delta:0})},go(t){return a.go(t)}};return d}var T;!function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"}(T||(T={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function I(t,e,n){void 0===n&&(n="/");let r=V(("string"===typeof e?k(e):e).pathname||"/",n);if(null==r)return null;let i=P(t);!function(t){t.sort(((t,e)=>t.score!==e.score?e.score-t.score:function(t,e){let n=t.length===e.length&&t.slice(0,-1).every(((t,n)=>t===e[n]));return n?t[t.length-1]-e[e.length-1]:0}(t.routesMeta.map((t=>t.childrenIndex)),e.routesMeta.map((t=>t.childrenIndex)))))}(i);let o=null;for(let a=0;null==o&&a<i.length;++a)o=$(i[a],U(r));return o}function P(t,e,n,r){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(t,i,o)=>{let a={relativePath:void 0===o?t.path||"":o,caseSensitive:!0===t.caseSensitive,childrenIndex:i,route:t};a.relativePath.startsWith("/")&&(b(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let s=X([r,a.relativePath]),l=n.concat(a);t.children&&t.children.length>0&&(b(!0!==t.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),P(t.children,e,l,s)),(null!=t.path||t.index)&&e.push({path:s,score:B(s,t.index),routesMeta:l})};return t.forEach(((t,e)=>{var n;if(""!==t.path&&null!=(n=t.path)&&n.includes("?"))for(let r of O(t.path))i(t,e,r);else i(t,e)})),e}function O(t){let e=t.split("/");if(0===e.length)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let a=O(r.join("/")),s=[];return s.push(...a.map((t=>""===t?o:[o,t].join("/")))),i&&s.push(...a),s.map((e=>t.startsWith("/")&&""===e?"/":e))}const A=/^:\w+$/,D=3,R=2,L=1,N=10,F=-2,z=t=>"*"===t;function B(t,e){let n=t.split("/"),r=n.length;return n.some(z)&&(r+=F),e&&(r+=R),n.filter((t=>!z(t))).reduce(((t,e)=>t+(A.test(e)?D:""===e?L:N)),r)}function $(t,e){let{routesMeta:n}=t,r={},i="/",o=[];for(let a=0;a<n.length;++a){let t=n[a],s=a===n.length-1,l="/"===i?e:e.slice(i.length)||"/",c=j({path:t.relativePath,caseSensitive:t.caseSensitive,end:s},l);if(!c)return null;Object.assign(r,c.params);let u=t.route;o.push({params:r,pathname:X([i,c.pathname]),pathnameBase:q(X([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=X([i,c.pathnameBase]))}return o}function j(t,e){"string"===typeof t&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=function(t,e,n){void 0===e&&(e=!1);void 0===n&&(n=!0);w("*"===t||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were "'+t.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+t.replace(/\*$/,"/*")+'".');let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,((t,e)=>(r.push(e),"/([^\\/]+)")));t.endsWith("*")?(r.push("*"),i+="*"===t||"/*"===t?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==t&&"/"!==t&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,e?void 0:"i");return[o,r]}(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1),l=r.reduce(((t,e,n)=>{if("*"===e){let t=s[n]||"";a=o.slice(0,o.length-t.length).replace(/(.)\/+$/,"$1")}return t[e]=function(t,e){try{return decodeURIComponent(t)}catch(n){return w(!1,'The value for the URL param "'+e+'" will not be decoded because the string "'+t+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),t}}(s[n]||"",e),t}),{});return{params:l,pathname:o,pathnameBase:a,pattern:t}}function U(t){try{return decodeURI(t)}catch(e){return w(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+e+")."),t}}function V(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&"/"!==r?null:t.slice(n)||"/"}function H(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified `to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function G(t){return t.filter(((t,e)=>0===e||t.route.path&&t.route.path.length>0))}function W(t,e,n,r){let i;void 0===r&&(r=!1),"string"===typeof t?i=k(t):(i=x({},t),b(!i.pathname||!i.pathname.includes("?"),H("?","pathname","search",i)),b(!i.pathname||!i.pathname.includes("#"),H("#","pathname","hash",i)),b(!i.search||!i.search.includes("#"),H("#","search","hash",i)));let o,a=""===t||""===i.pathname,s=a?"/":i.pathname;if(r||null==s)o=n;else{let t=e.length-1;if(s.startsWith("..")){let e=s.split("/");for(;".."===e[0];)e.shift(),t-=1;i.pathname=e.join("/")}o=t>=0?e[t]:"/"}let l=function(t,e){void 0===e&&(e="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof t?k(t):t,o=n?n.startsWith("/")?n:function(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach((t=>{".."===t?n.length>1&&n.pop():"."!==t&&n.push(t)})),n.length>1?n.join("/"):"/"}(n,e):e;return{pathname:o,search:Y(r),hash:Z(i)}}(i,o),c=s&&"/"!==s&&s.endsWith("/"),u=(a||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const X=t=>t.join("/").replace(/\/\/+/g,"/"),q=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Y=t=>t&&"?"!==t?t.startsWith("?")?t:"?"+t:"",Z=t=>t&&"#"!==t?t.startsWith("#")?t:"#"+t:"";class K extends Error{}function J(t){return null!=t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"boolean"===typeof t.internal&&"data"in t}const Q=["post","put","patch","delete"],tt=(new Set(Q),["get",...Q]);new Set(tt),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");function et(){return et=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},et.apply(this,arguments)}const nt=m.createContext(null);const rt=m.createContext(null);const it=m.createContext(null);const ot=m.createContext(null);const at=m.createContext({outlet:null,matches:[],isDataRoute:!1});const st=m.createContext(null);function lt(){return null!=m.useContext(ot)}function ct(){return lt()||b(!1),m.useContext(ot).location}function ut(t){m.useContext(it).static||m.useLayoutEffect(t)}function ht(){let{isDataRoute:t}=m.useContext(at);return t?function(){let{router:t}=bt(xt.UseNavigateStable),e=St(_t.UseNavigateStable),n=m.useRef(!1);return ut((()=>{n.current=!0})),m.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?t.navigate(r):t.navigate(r,et({fromRouteId:e},i)))}),[t,e])}():function(){lt()||b(!1);let{basename:t,navigator:e}=m.useContext(it),{matches:n}=m.useContext(at),{pathname:r}=ct(),i=JSON.stringify(G(n).map((t=>t.pathnameBase))),o=m.useRef(!1);ut((()=>{o.current=!0}));let a=m.useCallback((function(n,a){if(void 0===a&&(a={}),!o.current)return;if("number"===typeof n)return void e.go(n);let s=W(n,JSON.parse(i),r,"path"===a.relative);"/"!==t&&(s.pathname="/"===s.pathname?t:X([t,s.pathname])),(a.replace?e.replace:e.push)(s,a.state,a)}),[t,e,i,r]);return a}()}function pt(t,e){let{relative:n}=void 0===e?{}:e,{matches:r}=m.useContext(at),{pathname:i}=ct(),o=JSON.stringify(G(r).map((t=>t.pathnameBase)));return m.useMemo((()=>W(t,JSON.parse(o),i,"path"===n)),[t,o,i,n])}function dt(t,e,n){lt()||b(!1);let{navigator:r}=m.useContext(it),{matches:i}=m.useContext(at),o=i[i.length-1],a=o?o.params:{},s=(o&&o.pathname,o?o.pathnameBase:"/");o&&o.route;let l,c=ct();if(e){var u;let t="string"===typeof e?k(e):e;"/"===s||(null==(u=t.pathname)?void 0:u.startsWith(s))||b(!1),l=t}else l=c;let h=l.pathname||"/",p=I(t,{pathname:"/"===s?h:h.slice(s.length)||"/"});let d=vt(p&&p.map((t=>Object.assign({},t,{params:Object.assign({},a,t.params),pathname:X([s,r.encodeLocation?r.encodeLocation(t.pathname).pathname:t.pathname]),pathnameBase:"/"===t.pathnameBase?s:X([s,r.encodeLocation?r.encodeLocation(t.pathnameBase).pathname:t.pathnameBase])}))),i,n);return e&&d?m.createElement(ot.Provider,{value:{location:et({pathname:"/",search:"",hash:"",state:null,key:"default"},l),navigationType:g.Pop}},d):d}function ft(){let t=function(){var t;let e=m.useContext(st),n=wt(_t.UseRouteError),r=St(_t.UseRouteError);if(e)return e;return null==(t=n.errors)?void 0:t[r]}(),e=J(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},e),n?m.createElement("pre",{style:i},n):null,null)}const gt=m.createElement(ft,null);class mt extends m.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||"idle"!==e.revalidation&&"idle"===t.revalidation?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error?m.createElement(at.Provider,{value:this.props.routeContext},m.createElement(st.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function yt(t){let{routeContext:e,match:n,children:r}=t,i=m.useContext(nt);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),m.createElement(at.Provider,{value:e},r)}function vt(t,e,n){var r;if(void 0===e&&(e=[]),void 0===n&&(n=null),null==t){var i;if(null==(i=n)||!i.errors)return null;t=n.matches}let o=t,a=null==(r=n)?void 0:r.errors;if(null!=a){let t=o.findIndex((t=>t.route.id&&(null==a?void 0:a[t.route.id])));t>=0||b(!1),o=o.slice(0,Math.min(o.length,t+1))}return o.reduceRight(((t,r,i)=>{let s=r.route.id?null==a?void 0:a[r.route.id]:null,l=null;n&&(l=r.route.errorElement||gt);let c=e.concat(o.slice(0,i+1)),u=()=>{let e;return e=s?l:r.route.Component?m.createElement(r.route.Component,null):r.route.element?r.route.element:t,m.createElement(yt,{match:r,routeContext:{outlet:t,matches:c,isDataRoute:null!=n},children:e})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?m.createElement(mt,{location:n.location,revalidation:n.revalidation,component:l,error:s,children:u(),routeContext:{outlet:null,matches:c,isDataRoute:!0}}):u()}),null)}var xt,_t;function bt(t){let e=m.useContext(nt);return e||b(!1),e}function wt(t){let e=m.useContext(rt);return e||b(!1),e}function St(t){let e=function(t){let e=m.useContext(at);return e||b(!1),e}(),n=e.matches[e.matches.length-1];return n.route.id||b(!1),n.route.id}!function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"}(xt||(xt={})),function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"}(_t||(_t={}));function Ct(t){b(!1)}function Et(t){let{basename:e="/",children:n=null,location:r,navigationType:i=g.Pop,navigator:o,static:a=!1}=t;lt()&&b(!1);let s=e.replace(/^\/*/,"/"),l=m.useMemo((()=>({basename:s,navigator:o,static:a})),[s,o,a]);"string"===typeof r&&(r=k(r));let{pathname:c="/",search:u="",hash:h="",state:p=null,key:d="default"}=r,f=m.useMemo((()=>{let t=V(c,s);return null==t?null:{location:{pathname:t,search:u,hash:h,state:p,key:d},navigationType:i}}),[s,c,u,h,p,d,i]);return null==f?null:m.createElement(it.Provider,{value:l},m.createElement(ot.Provider,{children:n,value:f}))}function kt(t){let{children:e,location:n}=t;return dt(It(e),n)}var Mt;!function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"}(Mt||(Mt={}));new Promise((()=>{}));class Tt extends m.Component{constructor(t){super(t),this.state={error:null}}static getDerivedStateFromError(t){return{error:t}}componentDidCatch(t,e){console.error("<Await> caught the following error during render",t,e)}render(){let{children:t,errorElement:e,resolve:n}=this.props,r=null,i=Mt.pending;if(n instanceof Promise)if(this.state.error){Mt.error;let t=this.state.error;Promise.reject().catch((()=>{})),Object.defineProperty(r,"_tracked",{get:()=>!0}),Object.defineProperty(r,"_error",{get:()=>t})}else n._tracked?(n,void 0!==r._error?Mt.error:void 0!==r._data?Mt.success:Mt.pending):(Mt.pending,Object.defineProperty(n,"_tracked",{get:()=>!0}),n.then((t=>Object.defineProperty(n,"_data",{get:()=>t})),(t=>Object.defineProperty(n,"_error",{get:()=>t}))));else Mt.success,Promise.resolve(),Object.defineProperty(r,"_tracked",{get:()=>!0}),Object.defineProperty(r,"_data",{get:()=>n});if(i===Mt.error&&r._error instanceof AbortedDeferredError)throw neverSettledPromise;if(i===Mt.error&&!e)throw r._error;if(i===Mt.error)return React.createElement(AwaitContext.Provider,{value:r,children:e});if(i===Mt.success)return React.createElement(AwaitContext.Provider,{value:r,children:t});throw r}}function It(t,e){void 0===e&&(e=[]);let n=[];return m.Children.forEach(t,((t,r)=>{if(!m.isValidElement(t))return;let i=[...e,r];if(t.type===m.Fragment)return void n.push.apply(n,It(t.props.children,i));t.type!==Ct&&b(!1),t.props.index&&t.props.children&&b(!1);let o={id:t.props.id||i.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(o.children=It(t.props.children,i)),n.push(o)})),n}function Pt(){return Pt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pt.apply(this,arguments)}function Ot(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}const At=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function Dt(t){let{basename:e,children:n,window:r}=t,i=m.useRef();var o;null==i.current&&(i.current=(void 0===(o={window:r,v5Compat:!0})&&(o={}),M((function(t,e){let{pathname:n,search:r,hash:i}=t.location;return C("",{pathname:n,search:r,hash:i},e.state&&e.state.usr||null,e.state&&e.state.key||"default")}),(function(t,e){return"string"===typeof e?e:E(e)}),null,o)));let a=i.current,[s,l]=m.useState({action:a.action,location:a.location});return m.useLayoutEffect((()=>a.listen(l)),[a]),m.createElement(Et,{basename:e,children:n,location:s.location,navigationType:s.action,navigator:a})}const Rt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Lt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nt=m.forwardRef((function(t,e){let n,{onClick:r,relative:i,reloadDocument:o,replace:a,state:s,target:l,to:c,preventScrollReset:u}=t,h=Ot(t,At),{basename:p}=m.useContext(it),d=!1;if("string"===typeof c&&Lt.test(c)&&(n=c,Rt))try{let t=new URL(window.location.href),e=c.startsWith("//")?new URL(t.protocol+c):new URL(c),n=V(e.pathname,p);e.origin===t.origin&&null!=n?c=n+e.search+e.hash:d=!0}catch(kg){}let f=function(t,e){let{relative:n}=void 0===e?{}:e;lt()||b(!1);let{basename:r,navigator:i}=m.useContext(it),{hash:o,pathname:a,search:s}=pt(t,{relative:n}),l=a;return"/"!==r&&(l="/"===a?r:X([r,a])),i.createHref({pathname:l,search:s,hash:o})}(c,{relative:i}),g=function(t,e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:a}=void 0===e?{}:e,s=ht(),l=ct(),c=pt(t,{relative:a});return m.useCallback((e=>{if(function(t,e){return 0===t.button&&(!e||"_self"===e)&&!function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)}(e,n)){e.preventDefault();let n=void 0!==r?r:E(l)===E(c);s(t,{replace:n,state:i,preventScrollReset:o,relative:a})}}),[l,s,c,r,i,n,t,o,a])}(c,{replace:a,state:s,target:l,preventScrollReset:u,relative:i});return m.createElement("a",Pt({},h,{href:n||f,onClick:d||o?r:function(t){r&&r(t),t.defaultPrevented||g(t)},ref:e,target:l}))}));var Ft,zt;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmitImpl="useSubmitImpl",t.UseFetcher="useFetcher"})(Ft||(Ft={})),function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"}(zt||(zt={}));function Bt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}var $t={read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};var jt=function t(e,n){function r(t,r,i){if("undefined"!==typeof document){"number"===typeof(i=Bt({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var a in i)i[a]&&(o+="; "+a,!0!==i[a]&&(o+="="+i[a].split(";")[0]));return document.cookie=t+"="+e.write(r,t)+o}}return Object.create({set:r,get:function(t){if("undefined"!==typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],r={},i=0;i<n.length;i++){var o=n[i].split("="),a=o.slice(1).join("=");try{var s=decodeURIComponent(o[0]);if(r[s]=e.read(a,s),t===s)break}catch(kg){}}return t?r[t]:r}},remove:function(t,e){r(t,"",Bt({},e,{expires:-1}))},withAttributes:function(e){return t(this.converter,Bt({},this.attributes,e))},withConverter:function(e){return t(Bt({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(e)}})}($t,{path:"/"});function Ut(t,e){return function(){return t.apply(e,arguments)}}const{toString:Vt}=Object.prototype,{getPrototypeOf:Ht}=Object,Gt=(t=>e=>{const n=Vt.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Wt=t=>(t=t.toLowerCase(),e=>Gt(e)===t),Xt=t=>e=>typeof e===t,{isArray:qt}=Array,Yt=Xt("undefined");const Zt=Wt("ArrayBuffer");const Kt=Xt("string"),Jt=Xt("function"),Qt=Xt("number"),te=t=>null!==t&&"object"===typeof t,ee=t=>{if("object"!==Gt(t))return!1;const e=Ht(t);return(null===e||e===Object.prototype||null===Object.getPrototypeOf(e))&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},ne=Wt("Date"),re=Wt("File"),ie=Wt("Blob"),oe=Wt("FileList"),ae=Wt("URLSearchParams");function se(t,e){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),qt(t))for(n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else{const r=i?Object.getOwnPropertyNames(t):Object.keys(t),o=r.length;let a;for(n=0;n<o;n++)a=r[n],e.call(null,t[a],a,t)}}function le(t,e){e=e.toLowerCase();const n=Object.keys(t);let r,i=n.length;for(;i-- >0;)if(r=n[i],e===r.toLowerCase())return r;return null}const ce="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,ue=t=>!Yt(t)&&t!==ce;const he=(pe="undefined"!==typeof Uint8Array&&Ht(Uint8Array),t=>pe&&t instanceof pe);var pe;const de=Wt("HTMLFormElement"),fe=(t=>{let{hasOwnProperty:e}=t;return(t,n)=>e.call(t,n)})(Object.prototype),ge=Wt("RegExp"),me=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};se(n,((n,i)=>{!1!==e(n,i,t)&&(r[i]=n)})),Object.defineProperties(t,r)},ye="abcdefghijklmnopqrstuvwxyz",ve="0123456789",xe={DIGIT:ve,ALPHA:ye,ALPHA_DIGIT:ye+ye.toUpperCase()+ve};const _e=Wt("AsyncFunction");var be={isArray:qt,isArrayBuffer:Zt,isBuffer:function(t){return null!==t&&!Yt(t)&&null!==t.constructor&&!Yt(t.constructor)&&Jt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:t=>{let e;return t&&("function"===typeof FormData&&t instanceof FormData||Jt(t.append)&&("formdata"===(e=Gt(t))||"object"===e&&Jt(t.toString)&&"[object FormData]"===t.toString()))},isArrayBufferView:function(t){let e;return e="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&Zt(t.buffer),e},isString:Kt,isNumber:Qt,isBoolean:t=>!0===t||!1===t,isObject:te,isPlainObject:ee,isUndefined:Yt,isDate:ne,isFile:re,isBlob:ie,isRegExp:ge,isFunction:Jt,isStream:t=>te(t)&&Jt(t.pipe),isURLSearchParams:ae,isTypedArray:he,isFileList:oe,forEach:se,merge:function t(){const{caseless:e}=ue(this)&&this||{},n={},r=(r,i)=>{const o=e&&le(n,i)||i;ee(n[o])&&ee(r)?n[o]=t(n[o],r):ee(r)?n[o]=t({},r):qt(r)?n[o]=r.slice():n[o]=r};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&se(arguments[i],r);return n},extend:function(t,e,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return se(e,((e,r)=>{n&&Jt(e)?t[r]=Ut(e,n):t[r]=e}),{allOwnKeys:r}),t},trim:t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),inherits:(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},toFlatObject:(t,e,n,r)=>{let i,o,a;const s={};if(e=e||{},null==t)return e;do{for(i=Object.getOwnPropertyNames(t),o=i.length;o-- >0;)a=i[o],r&&!r(a,t,e)||s[a]||(e[a]=t[a],s[a]=!0);t=!1!==n&&Ht(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},kindOf:Gt,kindOfTest:Wt,endsWith:(t,e,n)=>{t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return-1!==r&&r===n},toArray:t=>{if(!t)return null;if(qt(t))return t;let e=t.length;if(!Qt(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},forEachEntry:(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let r;for(;(r=n.next())&&!r.done;){const n=r.value;e.call(t,n[0],n[1])}},matchAll:(t,e)=>{let n;const r=[];for(;null!==(n=t.exec(e));)r.push(n);return r},isHTMLForm:de,hasOwnProperty:fe,hasOwnProp:fe,reduceDescriptors:me,freezeMethods:t=>{me(t,((e,n)=>{if(Jt(t)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=t[n];Jt(r)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(t,e)=>{const n={},r=t=>{t.forEach((t=>{n[t]=!0}))};return qt(t)?r(t):r(String(t).split(e)),n},toCamelCase:t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(t,e,n){return e.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(t,e)=>(t=+t,Number.isFinite(t)?t:e),findKey:le,global:ce,isContextDefined:ue,ALPHABET:xe,generateString:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xe.ALPHA_DIGIT,n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n},isSpecCompliantForm:function(t){return!!(t&&Jt(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator])},toJSONObject:t=>{const e=new Array(10),n=(t,r)=>{if(te(t)){if(e.indexOf(t)>=0)return;if(!("toJSON"in t)){e[r]=t;const i=qt(t)?[]:{};return se(t,((t,e)=>{const o=n(t,r+1);!Yt(o)&&(i[e]=o)})),e[r]=void 0,i}}return t};return n(t,0)},isAsyncFn:_e,isThenable:t=>t&&(te(t)||Jt(t))&&Jt(t.then)&&Jt(t.catch)};function we(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}be.inherits(we,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:be.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Se=we.prototype,Ce={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((t=>{Ce[t]={value:t}})),Object.defineProperties(we,Ce),Object.defineProperty(Se,"isAxiosError",{value:!0}),we.from=(t,e,n,r,i,o)=>{const a=Object.create(Se);return be.toFlatObject(t,a,(function(t){return t!==Error.prototype}),(t=>"isAxiosError"!==t)),we.call(a,t.message,e,n,r,i),a.cause=t,a.name=t.name,o&&Object.assign(a,o),a};var Ee=we;function ke(t){return be.isPlainObject(t)||be.isArray(t)}function Me(t){return be.endsWith(t,"[]")?t.slice(0,-2):t}function Te(t,e,n){return t?t.concat(e).map((function(t,e){return t=Me(t),!n&&e?"["+t+"]":t})).join(n?".":""):e}const Ie=be.toFlatObject(be,{},null,(function(t){return/^is[A-Z]/.test(t)}));var Pe=function(t,e,n){if(!be.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=be.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(t,e){return!be.isUndefined(e[t])}));const r=n.metaTokens,i=n.visitor||c,o=n.dots,a=n.indexes,s=(n.Blob||"undefined"!==typeof Blob&&Blob)&&be.isSpecCompliantForm(e);if(!be.isFunction(i))throw new TypeError("visitor must be a function");function l(t){if(null===t)return"";if(be.isDate(t))return t.toISOString();if(!s&&be.isBlob(t))throw new Ee("Blob is not supported. Use a Buffer instead.");return be.isArrayBuffer(t)||be.isTypedArray(t)?s&&"function"===typeof Blob?new Blob([t]):Buffer.from(t):t}function c(t,n,i){let s=t;if(t&&!i&&"object"===typeof t)if(be.endsWith(n,"{}"))n=r?n:n.slice(0,-2),t=JSON.stringify(t);else if(be.isArray(t)&&function(t){return be.isArray(t)&&!t.some(ke)}(t)||(be.isFileList(t)||be.endsWith(n,"[]"))&&(s=be.toArray(t)))return n=Me(n),s.forEach((function(t,r){!be.isUndefined(t)&&null!==t&&e.append(!0===a?Te([n],r,o):null===a?n:n+"[]",l(t))})),!1;return!!ke(t)||(e.append(Te(i,n,o),l(t)),!1)}const u=[],h=Object.assign(Ie,{defaultVisitor:c,convertValue:l,isVisitable:ke});if(!be.isObject(t))throw new TypeError("data must be an object");return function t(n,r){if(!be.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),be.forEach(n,(function(n,o){!0===(!(be.isUndefined(n)||null===n)&&i.call(e,n,be.isString(o)?o.trim():o,r,h))&&t(n,r?r.concat(o):[o])})),u.pop()}}(t),e};function Oe(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function(t){return e[t]}))}function Ae(t,e){this._pairs=[],t&&Pe(t,this,e)}const De=Ae.prototype;De.append=function(t,e){this._pairs.push([t,e])},De.toString=function(t){const e=t?function(e){return t.call(this,e,Oe)}:Oe;return this._pairs.map((function(t){return e(t[0])+"="+e(t[1])}),"").join("&")};var Re=Ae;function Le(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ne(t,e,n){if(!e)return t;const r=n&&n.encode||Le,i=n&&n.serialize;let o;if(o=i?i(e,n):be.isURLSearchParams(e)?e.toString():new Re(e,n).toString(r),o){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}var Fe=class{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){be.forEach(this.handlers,(function(e){null!==e&&t(e)}))}},ze={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Be="undefined"!==typeof URLSearchParams?URLSearchParams:Re,$e="undefined"!==typeof FormData?FormData:null,je="undefined"!==typeof Blob?Blob:null;const Ue=(()=>{let t;return("undefined"===typeof navigator||"ReactNative"!==(t=navigator.product)&&"NativeScript"!==t&&"NS"!==t)&&("undefined"!==typeof window&&"undefined"!==typeof document)})();var Ve={isBrowser:!0,classes:{URLSearchParams:Be,FormData:$e,Blob:je},isStandardBrowserEnv:Ue,isStandardBrowserWebWorkerEnv:"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};var He=function(t){function e(t,n,r,i){let o=t[i++];const a=Number.isFinite(+o),s=i>=t.length;if(o=!o&&be.isArray(r)?r.length:o,s)return be.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!a;r[o]&&be.isObject(r[o])||(r[o]=[]);return e(t,n,r[o],i)&&be.isArray(r[o])&&(r[o]=function(t){const e={},n=Object.keys(t);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],e[o]=t[o];return e}(r[o])),!a}if(be.isFormData(t)&&be.isFunction(t.entries)){const n={};return be.forEachEntry(t,((t,r)=>{e(function(t){return be.matchAll(/\w+|\[(\w*)]/g,t).map((t=>"[]"===t[0]?"":t[1]||t[0]))}(t),r,n,0)})),n}return null};const Ge={"Content-Type":void 0};const We={transitional:ze,adapter:["xhr","http"],transformRequest:[function(t,e){const n=e.getContentType()||"",r=n.indexOf("application/json")>-1,i=be.isObject(t);i&&be.isHTMLForm(t)&&(t=new FormData(t));if(be.isFormData(t))return r&&r?JSON.stringify(He(t)):t;if(be.isArrayBuffer(t)||be.isBuffer(t)||be.isStream(t)||be.isFile(t)||be.isBlob(t))return t;if(be.isArrayBufferView(t))return t.buffer;if(be.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return Pe(t,new Ve.classes.URLSearchParams,Object.assign({visitor:function(t,e,n,r){return Ve.isNode&&be.isBuffer(t)?(this.append(e,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}(t,this.formSerializer).toString();if((o=be.isFileList(t))||n.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return Pe(o?{"files[]":t}:t,e&&new e,this.formSerializer)}}return i||r?(e.setContentType("application/json",!1),function(t,e,n){if(be.isString(t))try{return(e||JSON.parse)(t),be.trim(t)}catch(kg){if("SyntaxError"!==kg.name)throw kg}return(n||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){const e=this.transitional||We.transitional,n=e&&e.forcedJSONParsing,r="json"===this.responseType;if(t&&be.isString(t)&&(n&&!this.responseType||r)){const n=!(e&&e.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(kg){if(n){if("SyntaxError"===kg.name)throw Ee.from(kg,Ee.ERR_BAD_RESPONSE,this,null,this.response);throw kg}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ve.classes.FormData,Blob:Ve.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};be.forEach(["delete","get","head"],(function(t){We.headers[t]={}})),be.forEach(["post","put","patch"],(function(t){We.headers[t]=be.merge(Ge)}));var Xe=We;const qe=be.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);const Ye=Symbol("internals");function Ze(t){return t&&String(t).trim().toLowerCase()}function Ke(t){return!1===t||null==t?t:be.isArray(t)?t.map(Ke):String(t)}function Je(t,e,n,r,i){return be.isFunction(r)?r.call(this,e,n):(i&&(e=n),be.isString(e)?be.isString(r)?-1!==e.indexOf(r):be.isRegExp(r)?r.test(e):void 0:void 0)}class Qe{constructor(t){t&&this.set(t)}set(t,e,n){const r=this;function i(t,e,n){const i=Ze(e);if(!i)throw new Error("header name must be a non-empty string");const o=be.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||e]=Ke(t))}const o=(t,e)=>be.forEach(t,((t,n)=>i(t,n,e)));return be.isPlainObject(t)||t instanceof this.constructor?o(t,e):be.isString(t)&&(t=t.trim())&&!(t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim()))(t)?o((t=>{const e={};let n,r,i;return t&&t.split("\n").forEach((function(t){i=t.indexOf(":"),n=t.substring(0,i).trim().toLowerCase(),r=t.substring(i+1).trim(),!n||e[n]&&qe[n]||("set-cookie"===n?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)})),e})(t),e):null!=t&&i(e,t,n),this}get(t,e){if(t=Ze(t)){const n=be.findKey(this,t);if(n){const t=this[n];if(!e)return t;if(!0===e)return function(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}(t);if(be.isFunction(e))return e.call(this,t,n);if(be.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Ze(t)){const n=be.findKey(this,t);return!(!n||void 0===this[n]||e&&!Je(0,this[n],n,e))}return!1}delete(t,e){const n=this;let r=!1;function i(t){if(t=Ze(t)){const i=be.findKey(n,t);!i||e&&!Je(0,n[i],i,e)||(delete n[i],r=!0)}}return be.isArray(t)?t.forEach(i):i(t),r}clear(t){const e=Object.keys(this);let n=e.length,r=!1;for(;n--;){const i=e[n];t&&!Je(0,this[i],i,t,!0)||(delete this[i],r=!0)}return r}normalize(t){const e=this,n={};return be.forEach(this,((r,i)=>{const o=be.findKey(n,i);if(o)return e[o]=Ke(r),void delete e[i];const a=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((t,e,n)=>e.toUpperCase()+n))}(i):String(i).trim();a!==i&&delete e[i],e[a]=Ke(r),n[a]=!0})),this}concat(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.constructor.concat(this,...e)}toJSON(t){const e=Object.create(null);return be.forEach(this,((n,r)=>{null!=n&&!1!==n&&(e[r]=t&&be.isArray(n)?n.join(", "):n)})),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((t=>{let[e,n]=t;return e+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t){const e=new this(t);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((t=>e.set(t))),e}static accessor(t){const e=(this[Ye]=this[Ye]={accessors:{}}).accessors,n=this.prototype;function r(t){const r=Ze(t);e[r]||(!function(t,e){const n=be.toCamelCase(" "+e);["get","set","has"].forEach((r=>{Object.defineProperty(t,r+n,{value:function(t,n,i){return this[r].call(this,e,t,n,i)},configurable:!0})}))}(n,t),e[r]=!0)}return be.isArray(t)?t.forEach(r):r(t),this}}Qe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),be.freezeMethods(Qe.prototype),be.freezeMethods(Qe);var tn=Qe;function en(t,e){const n=this||Xe,r=e||n,i=tn.from(r.headers);let o=r.data;return be.forEach(t,(function(t){o=t.call(n,o,i.normalize(),e?e.status:void 0)})),i.normalize(),o}function nn(t){return!(!t||!t.__CANCEL__)}function rn(t,e,n){Ee.call(this,null==t?"canceled":t,Ee.ERR_CANCELED,e,n),this.name="CanceledError"}be.inherits(rn,Ee,{__CANCEL__:!0});var on=rn;var an=Ve.isStandardBrowserEnv?{write:function(t,e,n,r,i,o){const a=[];a.push(t+"="+encodeURIComponent(e)),be.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),be.isString(r)&&a.push("path="+r),be.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function sn(t,e){return t&&!function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}(e)?function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}var ln=Ve.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function r(n){let r=n;return t&&(e.setAttribute("href",r),r=e.href),e.setAttribute("href",r),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return n=r(window.location.href),function(t){const e=be.isString(t)?r(t):t;return e.protocol===n.protocol&&e.host===n.host}}():function(){return!0};var cn=function(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i,o=0,a=0;return e=void 0!==e?e:1e3,function(s){const l=Date.now(),c=r[a];i||(i=l),n[o]=s,r[o]=l;let u=a,h=0;for(;u!==o;)h+=n[u++],u%=t;if(o=(o+1)%t,o===a&&(a=(a+1)%t),l-i<e)return;const p=c&&l-c;return p?Math.round(1e3*h/p):void 0}};function un(t,e){let n=0;const r=cn(50,250);return i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,s=o-n,l=r(s);n=o;const c={loaded:o,total:a,progress:a?o/a:void 0,bytes:s,rate:l||void 0,estimated:l&&a&&o<=a?(a-o)/l:void 0,event:i};c[e?"download":"upload"]=!0,t(c)}}var hn="undefined"!==typeof XMLHttpRequest&&function(t){return new Promise((function(e,n){let r=t.data;const i=tn.from(t.headers).normalize(),o=t.responseType;let a;function s(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}be.isFormData(r)&&(Ve.isStandardBrowserEnv||Ve.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.setContentType("multipart/form-data;",!1));let l=new XMLHttpRequest;if(t.auth){const e=t.auth.username||"",n=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(e+":"+n))}const c=sn(t.baseURL,t.url);function u(){if(!l)return;const r=tn.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders());!function(t,e,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?e(new Ee("Request failed with status code "+n.status,[Ee.ERR_BAD_REQUEST,Ee.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}((function(t){e(t),s()}),(function(t){n(t),s()}),{data:o&&"text"!==o&&"json"!==o?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:r,config:t,request:l}),l=null}if(l.open(t.method.toUpperCase(),Ne(c,t.params,t.paramsSerializer),!0),l.timeout=t.timeout,"onloadend"in l?l.onloadend=u:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))&&setTimeout(u)},l.onabort=function(){l&&(n(new Ee("Request aborted",Ee.ECONNABORTED,t,l)),l=null)},l.onerror=function(){n(new Ee("Network Error",Ee.ERR_NETWORK,t,l)),l=null},l.ontimeout=function(){let e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const r=t.transitional||ze;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(new Ee(e,r.clarifyTimeoutError?Ee.ETIMEDOUT:Ee.ECONNABORTED,t,l)),l=null},Ve.isStandardBrowserEnv){const e=(t.withCredentials||ln(c))&&t.xsrfCookieName&&an.read(t.xsrfCookieName);e&&i.set(t.xsrfHeaderName,e)}void 0===r&&i.setContentType(null),"setRequestHeader"in l&&be.forEach(i.toJSON(),(function(t,e){l.setRequestHeader(e,t)})),be.isUndefined(t.withCredentials)||(l.withCredentials=!!t.withCredentials),o&&"json"!==o&&(l.responseType=t.responseType),"function"===typeof t.onDownloadProgress&&l.addEventListener("progress",un(t.onDownloadProgress,!0)),"function"===typeof t.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",un(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=e=>{l&&(n(!e||e.type?new on(null,t,l):e),l.abort(),l=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const h=function(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(c);h&&-1===Ve.protocols.indexOf(h)?n(new Ee("Unsupported protocol "+h+":",Ee.ERR_BAD_REQUEST,t)):l.send(r||null)}))};const pn={http:null,xhr:hn};be.forEach(pn,((t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(kg){}Object.defineProperty(t,"adapterName",{value:e})}}));var dn=t=>{t=be.isArray(t)?t:[t];const{length:e}=t;let n,r;for(let i=0;i<e&&(n=t[i],!(r=be.isString(n)?pn[n.toLowerCase()]:n));i++);if(!r){if(!1===r)throw new Ee(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT");throw new Error(be.hasOwnProp(pn,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`)}if(!be.isFunction(r))throw new TypeError("adapter is not a function");return r};function fn(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new on(null,t)}function gn(t){fn(t),t.headers=tn.from(t.headers),t.data=en.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1);return dn(t.adapter||Xe.adapter)(t).then((function(e){return fn(t),e.data=en.call(t,t.transformResponse,e),e.headers=tn.from(e.headers),e}),(function(e){return nn(e)||(fn(t),e&&e.response&&(e.response.data=en.call(t,t.transformResponse,e.response),e.response.headers=tn.from(e.response.headers))),Promise.reject(e)}))}const mn=t=>t instanceof tn?t.toJSON():t;function yn(t,e){e=e||{};const n={};function r(t,e,n){return be.isPlainObject(t)&&be.isPlainObject(e)?be.merge.call({caseless:n},t,e):be.isPlainObject(e)?be.merge({},e):be.isArray(e)?e.slice():e}function i(t,e,n){return be.isUndefined(e)?be.isUndefined(t)?void 0:r(void 0,t,n):r(t,e,n)}function o(t,e){if(!be.isUndefined(e))return r(void 0,e)}function a(t,e){return be.isUndefined(e)?be.isUndefined(t)?void 0:r(void 0,t):r(void 0,e)}function s(n,i,o){return o in e?r(n,i):o in t?r(void 0,n):void 0}const l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(t,e)=>i(mn(t),mn(e),!0)};return be.forEach(Object.keys(Object.assign({},t,e)),(function(r){const o=l[r]||i,a=o(t[r],e[r],r);be.isUndefined(a)&&o!==s||(n[r]=a)})),n}const vn="1.4.0",xn={};["object","boolean","number","function","string","symbol"].forEach(((t,e)=>{xn[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}}));const _n={};xn.transitional=function(t,e,n){function r(t,e){return"[Axios v1.4.0] Transitional option '"+t+"'"+e+(n?". "+n:"")}return(n,i,o)=>{if(!1===t)throw new Ee(r(i," has been removed"+(e?" in "+e:"")),Ee.ERR_DEPRECATED);return e&&!_n[i]&&(_n[i]=!0,console.warn(r(i," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,i,o)}};var bn={assertOptions:function(t,e,n){if("object"!==typeof t)throw new Ee("options must be an object",Ee.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const o=r[i],a=e[o];if(a){const e=t[o],n=void 0===e||a(e,o,t);if(!0!==n)throw new Ee("option "+o+" must be "+n,Ee.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Ee("Unknown option "+o,Ee.ERR_BAD_OPTION)}},validators:xn};const wn=bn.validators;class Sn{constructor(t){this.defaults=t,this.interceptors={request:new Fe,response:new Fe}}request(t,e){"string"===typeof t?(e=e||{}).url=t:e=t||{},e=yn(this.defaults,e);const{transitional:n,paramsSerializer:r,headers:i}=e;let o;void 0!==n&&bn.assertOptions(n,{silentJSONParsing:wn.transitional(wn.boolean),forcedJSONParsing:wn.transitional(wn.boolean),clarifyTimeoutError:wn.transitional(wn.boolean)},!1),null!=r&&(be.isFunction(r)?e.paramsSerializer={serialize:r}:bn.assertOptions(r,{encode:wn.function,serialize:wn.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase(),o=i&&be.merge(i.common,i[e.method]),o&&be.forEach(["delete","get","head","post","put","patch","common"],(t=>{delete i[t]})),e.headers=tn.concat(o,i);const a=[];let s=!0;this.interceptors.request.forEach((function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(s=s&&t.synchronous,a.unshift(t.fulfilled,t.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(t){l.push(t.fulfilled,t.rejected)}));let u,h=0;if(!s){const t=[gn.bind(this),void 0];for(t.unshift.apply(t,a),t.push.apply(t,l),u=t.length,c=Promise.resolve(e);h<u;)c=c.then(t[h++],t[h++]);return c}u=a.length;let p=e;for(h=0;h<u;){const t=a[h++],e=a[h++];try{p=t(p)}catch(d){e.call(this,d);break}}try{c=gn.call(this,p)}catch(d){return Promise.reject(d)}for(h=0,u=l.length;h<u;)c=c.then(l[h++],l[h++]);return c}getUri(t){return Ne(sn((t=yn(this.defaults,t)).baseURL,t.url),t.params,t.paramsSerializer)}}be.forEach(["delete","get","head","options"],(function(t){Sn.prototype[t]=function(e,n){return this.request(yn(n||{},{method:t,url:e,data:(n||{}).data}))}})),be.forEach(["post","put","patch"],(function(t){function e(e){return function(n,r,i){return this.request(yn(i||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Sn.prototype[t]=e(),Sn.prototype[t+"Form"]=e(!0)}));var Cn=Sn;class En{constructor(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise((function(t){e=t}));const n=this;this.promise.then((t=>{if(!n._listeners)return;let e=n._listeners.length;for(;e-- >0;)n._listeners[e](t);n._listeners=null})),this.promise.then=t=>{let e;const r=new Promise((t=>{n.subscribe(t),e=t})).then(t);return r.cancel=function(){n.unsubscribe(e)},r},t((function(t,r,i){n.reason||(n.reason=new on(t,r,i),e(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}static source(){let t;return{token:new En((function(e){t=e})),cancel:t}}}var kn=En;const Mn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Mn).forEach((t=>{let[e,n]=t;Mn[n]=e}));var Tn=Mn;const In=function t(e){const n=new Cn(e),r=Ut(Cn.prototype.request,n);return be.extend(r,Cn.prototype,n,{allOwnKeys:!0}),be.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return t(yn(e,n))},r}(Xe);In.Axios=Cn,In.CanceledError=on,In.CancelToken=kn,In.isCancel=nn,In.VERSION=vn,In.toFormData=Pe,In.AxiosError=Ee,In.Cancel=In.CanceledError,In.all=function(t){return Promise.all(t)},In.spread=function(t){return function(e){return t.apply(null,e)}},In.isAxiosError=function(t){return be.isObject(t)&&!0===t.isAxiosError},In.mergeConfig=yn,In.AxiosHeaders=tn,In.formToJSON=t=>He(be.isHTMLForm(t)?new FormData(t):t),In.HttpStatusCode=Tn,In.default=In;var Pn=In,On=n(8182);const An=t=>"number"==typeof t&&!isNaN(t),Dn=t=>"string"==typeof t,Rn=t=>"function"==typeof t,Ln=t=>Dn(t)||Rn(t)?t:null,Nn=t=>(0,m.isValidElement)(t)||Dn(t)||Rn(t)||An(t);function Fn(t){let{enter:e,exit:n,appendPosition:r=!1,collapse:i=!0,collapseDuration:o=300}=t;return function(t){let{children:a,position:s,preventExitTransition:l,done:c,nodeRef:u,isIn:h}=t;const p=r?`${e}--${s}`:e,d=r?`${n}--${s}`:n,f=(0,m.useRef)(0);return(0,m.useLayoutEffect)((()=>{const t=u.current,e=p.split(" "),n=r=>{r.target===u.current&&(t.dispatchEvent(new Event("d")),t.removeEventListener("animationend",n),t.removeEventListener("animationcancel",n),0===f.current&&"animationcancel"!==r.type&&t.classList.remove(...e))};t.classList.add(...e),t.addEventListener("animationend",n),t.addEventListener("animationcancel",n)}),[]),(0,m.useEffect)((()=>{const t=u.current,e=()=>{t.removeEventListener("animationend",e),i?function(t,e,n){void 0===n&&(n=300);const{scrollHeight:r,style:i}=t;requestAnimationFrame((()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame((()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,n)}))}))}(t,c,o):c()};h||(l?e():(f.current=1,t.className+=` ${d}`,t.addEventListener("animationend",e)))}),[h]),m.createElement(m.Fragment,null,a)}}function zn(t,e){return{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}}const Bn={list:new Map,emitQueue:new Map,on(t,e){return this.list.has(t)||this.list.set(t,[]),this.list.get(t).push(e),this},off(t,e){if(e){const n=this.list.get(t).filter((t=>t!==e));return this.list.set(t,n),this}return this.list.delete(t),this},cancelEmit(t){const e=this.emitQueue.get(t);return e&&(e.forEach(clearTimeout),this.emitQueue.delete(t)),this},emit(t){this.list.has(t)&&this.list.get(t).forEach((e=>{const n=setTimeout((()=>{e(...[].slice.call(arguments,1))}),0);this.emitQueue.has(t)||this.emitQueue.set(t,[]),this.emitQueue.get(t).push(n)}))}},$n=t=>{let{theme:e,type:n,...r}=t;return m.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===e?"currentColor":`var(--toastify-icon-color-${n})`,...r})},jn={info:function(t){return m.createElement($n,{...t},m.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return m.createElement($n,{...t},m.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return m.createElement($n,{...t},m.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return m.createElement($n,{...t},m.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return m.createElement("div",{className:"Toastify__spinner"})}};function Un(t){const[,e]=(0,m.useReducer)((t=>t+1),0),[n,r]=(0,m.useState)([]),i=(0,m.useRef)(null),o=(0,m.useRef)(new Map).current,a=t=>-1!==n.indexOf(t),s=(0,m.useRef)({toastKey:1,displayedToast:0,count:0,queue:[],props:t,containerId:null,isToastActive:a,getToast:t=>o.get(t)}).current;function l(t){let{containerId:e}=t;const{limit:n}=s.props;!n||e&&s.containerId!==e||(s.count-=s.queue.length,s.queue=[])}function c(t){r((e=>null==t?[]:e.filter((e=>e!==t))))}function u(){const{toastContent:t,toastProps:e,staleId:n}=s.queue.shift();p(t,e,n)}function h(t,n){let{delay:r,staleId:a,...l}=n;if(!Nn(t)||function(t){return!i.current||s.props.enableMultiContainer&&t.containerId!==s.props.containerId||o.has(t.toastId)&&null==t.updateId}(l))return;const{toastId:h,updateId:d,data:f}=l,{props:g}=s,y=()=>c(h),v=null==d;v&&s.count++;const x={...g,style:g.toastStyle,key:s.toastKey++,...Object.fromEntries(Object.entries(l).filter((t=>{let[e,n]=t;return null!=n}))),toastId:h,updateId:d,data:f,closeToast:y,isIn:!1,className:Ln(l.className||g.toastClassName),bodyClassName:Ln(l.bodyClassName||g.bodyClassName),progressClassName:Ln(l.progressClassName||g.progressClassName),autoClose:!l.isLoading&&(_=l.autoClose,b=g.autoClose,!1===_||An(_)&&_>0?_:b),deleteToast(){const t=zn(o.get(h),"removed");o.delete(h),Bn.emit(4,t);const n=s.queue.length;if(s.count=null==h?s.count-s.displayedToast:s.count-1,s.count<0&&(s.count=0),n>0){const t=null==h?s.props.limit:1;if(1===n||1===t)s.displayedToast++,u();else{const e=t>n?n:t;s.displayedToast=e;for(let t=0;t<e;t++)u()}}else e()}};var _,b;x.iconOut=function(t){let{theme:e,type:n,isLoading:r,icon:i}=t,o=null;const a={theme:e,type:n};return!1===i||(Rn(i)?o=i(a):(0,m.isValidElement)(i)?o=(0,m.cloneElement)(i,a):Dn(i)||An(i)?o=i:r?o=jn.spinner():(t=>t in jn)(n)&&(o=jn[n](a))),o}(x),Rn(l.onOpen)&&(x.onOpen=l.onOpen),Rn(l.onClose)&&(x.onClose=l.onClose),x.closeButton=g.closeButton,!1===l.closeButton||Nn(l.closeButton)?x.closeButton=l.closeButton:!0===l.closeButton&&(x.closeButton=!Nn(g.closeButton)||g.closeButton);let w=t;(0,m.isValidElement)(t)&&!Dn(t.type)?w=(0,m.cloneElement)(t,{closeToast:y,toastProps:x,data:f}):Rn(t)&&(w=t({closeToast:y,toastProps:x,data:f})),g.limit&&g.limit>0&&s.count>g.limit&&v?s.queue.push({toastContent:w,toastProps:x,staleId:a}):An(r)?setTimeout((()=>{p(w,x,a)}),r):p(w,x,a)}function p(t,e,n){const{toastId:i}=e;n&&o.delete(n);const a={content:t,props:e};o.set(i,a),r((t=>[...t,i].filter((t=>t!==n)))),Bn.emit(4,zn(a,null==a.props.updateId?"added":"updated"))}return(0,m.useEffect)((()=>(s.containerId=t.containerId,Bn.cancelEmit(3).on(0,h).on(1,(t=>i.current&&c(t))).on(5,l).emit(2,s),()=>{o.clear(),Bn.emit(3,s)})),[]),(0,m.useEffect)((()=>{s.props=t,s.isToastActive=a,s.displayedToast=n.length})),{getToastToRender:function(e){const n=new Map,r=Array.from(o.values());return t.newestOnTop&&r.reverse(),r.forEach((t=>{const{position:e}=t.props;n.has(e)||n.set(e,[]),n.get(e).push(t)})),Array.from(n,(t=>e(t[0],t[1])))},containerRef:i,isToastActive:a}}function Vn(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientX:t.clientX}function Hn(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientY:t.clientY}function Gn(t){const[e,n]=(0,m.useState)(!1),[r,i]=(0,m.useState)(!1),o=(0,m.useRef)(null),a=(0,m.useRef)({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,s=(0,m.useRef)(t),{autoClose:l,pauseOnHover:c,closeToast:u,onClick:h,closeOnClick:p}=t;function d(e){if(t.draggable){"touchstart"===e.nativeEvent.type&&e.nativeEvent.preventDefault(),a.didMove=!1,document.addEventListener("mousemove",v),document.addEventListener("mouseup",x),document.addEventListener("touchmove",v),document.addEventListener("touchend",x);const n=o.current;a.canCloseOnClick=!0,a.canDrag=!0,a.boundingRect=n.getBoundingClientRect(),n.style.transition="",a.x=Vn(e.nativeEvent),a.y=Hn(e.nativeEvent),"x"===t.draggableDirection?(a.start=a.x,a.removalDistance=n.offsetWidth*(t.draggablePercent/100)):(a.start=a.y,a.removalDistance=n.offsetHeight*(80===t.draggablePercent?1.5*t.draggablePercent:t.draggablePercent/100))}}function f(e){if(a.boundingRect){const{top:n,bottom:r,left:i,right:o}=a.boundingRect;"touchend"!==e.nativeEvent.type&&t.pauseOnHover&&a.x>=i&&a.x<=o&&a.y>=n&&a.y<=r?y():g()}}function g(){n(!0)}function y(){n(!1)}function v(n){const r=o.current;a.canDrag&&r&&(a.didMove=!0,e&&y(),a.x=Vn(n),a.y=Hn(n),a.delta="x"===t.draggableDirection?a.x-a.start:a.y-a.start,a.start!==a.x&&(a.canCloseOnClick=!1),r.style.transform=`translate${t.draggableDirection}(${a.delta}px)`,r.style.opacity=""+(1-Math.abs(a.delta/a.removalDistance)))}function x(){document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",x),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",x);const e=o.current;if(a.canDrag&&a.didMove&&e){if(a.canDrag=!1,Math.abs(a.delta)>a.removalDistance)return i(!0),void t.closeToast();e.style.transition="transform 0.2s, opacity 0.2s",e.style.transform=`translate${t.draggableDirection}(0)`,e.style.opacity="1"}}(0,m.useEffect)((()=>{s.current=t})),(0,m.useEffect)((()=>(o.current&&o.current.addEventListener("d",g,{once:!0}),Rn(t.onOpen)&&t.onOpen((0,m.isValidElement)(t.children)&&t.children.props),()=>{const t=s.current;Rn(t.onClose)&&t.onClose((0,m.isValidElement)(t.children)&&t.children.props)})),[]),(0,m.useEffect)((()=>(t.pauseOnFocusLoss&&(document.hasFocus()||y(),window.addEventListener("focus",g),window.addEventListener("blur",y)),()=>{t.pauseOnFocusLoss&&(window.removeEventListener("focus",g),window.removeEventListener("blur",y))})),[t.pauseOnFocusLoss]);const _={onMouseDown:d,onTouchStart:d,onMouseUp:f,onTouchEnd:f};return l&&c&&(_.onMouseEnter=y,_.onMouseLeave=g),p&&(_.onClick=t=>{h&&h(t),a.canCloseOnClick&&u()}),{playToast:g,pauseToast:y,isRunning:e,preventExitTransition:r,toastRef:o,eventHandlers:_}}function Wn(t){let{closeToast:e,theme:n,ariaLabel:r="close"}=t;return m.createElement("button",{className:`Toastify__close-button Toastify__close-button--${n}`,type:"button",onClick:t=>{t.stopPropagation(),e(t)},"aria-label":r},m.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},m.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function Xn(t){let{delay:e,isRunning:n,closeToast:r,type:i="default",hide:o,className:a,style:s,controlledProgress:l,progress:c,rtl:u,isIn:h,theme:p}=t;const d=o||l&&0===c,f={...s,animationDuration:`${e}ms`,animationPlayState:n?"running":"paused",opacity:d?0:1};l&&(f.transform=`scaleX(${c})`);const g=(0,On.default)("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${p}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":u}),y=Rn(a)?a({rtl:u,type:i,defaultClassName:g}):(0,On.default)(g,a);return m.createElement("div",{role:"progressbar","aria-hidden":d?"true":"false","aria-label":"notification timer",className:y,style:f,[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{h&&r()}})}const qn=t=>{const{isRunning:e,preventExitTransition:n,toastRef:r,eventHandlers:i}=Gn(t),{closeButton:o,children:a,autoClose:s,onClick:l,type:c,hideProgressBar:u,closeToast:h,transition:p,position:d,className:f,style:g,bodyClassName:y,bodyStyle:v,progressClassName:x,progressStyle:_,updateId:b,role:w,progress:S,rtl:C,toastId:E,deleteToast:k,isIn:M,isLoading:T,iconOut:I,closeOnClick:P,theme:O}=t,A=(0,On.default)("Toastify__toast",`Toastify__toast-theme--${O}`,`Toastify__toast--${c}`,{"Toastify__toast--rtl":C},{"Toastify__toast--close-on-click":P}),D=Rn(f)?f({rtl:C,position:d,type:c,defaultClassName:A}):(0,On.default)(A,f),R=!!S||!s,L={closeToast:h,type:c,theme:O};let N=null;return!1===o||(N=Rn(o)?o(L):(0,m.isValidElement)(o)?(0,m.cloneElement)(o,L):Wn(L)),m.createElement(p,{isIn:M,done:k,position:d,preventExitTransition:n,nodeRef:r},m.createElement("div",{id:E,onClick:l,className:D,...i,style:g,ref:r},m.createElement("div",{...M&&{role:w},className:Rn(y)?y({type:c}):(0,On.default)("Toastify__toast-body",y),style:v},null!=I&&m.createElement("div",{className:(0,On.default)("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!T})},I),m.createElement("div",null,a)),N,m.createElement(Xn,{...b&&!R?{key:`pb-${b}`}:{},rtl:C,theme:O,delay:s,isRunning:e,isIn:M,closeToast:h,hide:u,type:c,style:_,className:x,controlledProgress:R,progress:S||0})))},Yn=function(t,e){return void 0===e&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},Zn=Fn(Yn("bounce",!0)),Kn=(Fn(Yn("slide",!0)),Fn(Yn("zoom")),Fn(Yn("flip")),(0,m.forwardRef)(((t,e)=>{const{getToastToRender:n,containerRef:r,isToastActive:i}=Un(t),{className:o,style:a,rtl:s,containerId:l}=t;function c(t){const e=(0,On.default)("Toastify__toast-container",`Toastify__toast-container--${t}`,{"Toastify__toast-container--rtl":s});return Rn(o)?o({position:t,rtl:s,defaultClassName:e}):(0,On.default)(e,Ln(o))}return(0,m.useEffect)((()=>{e&&(e.current=r.current)}),[]),m.createElement("div",{ref:r,className:"Toastify",id:l},n(((t,e)=>{const n=e.length?{...a}:{...a,pointerEvents:"none"};return m.createElement("div",{className:c(t),style:n,key:`container-${t}`},e.map(((t,n)=>{let{content:r,props:o}=t;return m.createElement(qn,{...o,isIn:i(o.toastId),style:{...o.style,"--nth":n+1,"--len":e.length},key:`toast-${o.key}`},r)})))})))})));Kn.displayName="ToastContainer",Kn.defaultProps={position:"top-right",transition:Zn,autoClose:5e3,closeButton:Wn,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let Jn,Qn=new Map,tr=[],er=1;function nr(){return""+er++}function rr(t){return t&&(Dn(t.toastId)||An(t.toastId))?t.toastId:nr()}function ir(t,e){return Qn.size>0?Bn.emit(0,t,e):tr.push({content:t,options:e}),e.toastId}function or(t,e){return{...e,type:e&&e.type||t,toastId:rr(e)}}function ar(t){return(e,n)=>ir(e,or(t,n))}function sr(t,e){return ir(t,or("default",e))}sr.loading=(t,e)=>ir(t,or("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),sr.promise=function(t,e,n){let r,{pending:i,error:o,success:a}=e;i&&(r=Dn(i)?sr.loading(i,n):sr.loading(i.render,{...n,...i}));const s={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(t,e,i)=>{if(null==e)return void sr.dismiss(r);const o={type:t,...s,...n,data:i},a=Dn(e)?{render:e}:e;return r?sr.update(r,{...o,...a}):sr(a.render,{...o,...a}),i},c=Rn(t)?t():t;return c.then((t=>l("success",a,t))).catch((t=>l("error",o,t))),c},sr.success=ar("success"),sr.info=ar("info"),sr.error=ar("error"),sr.warning=ar("warning"),sr.warn=sr.warning,sr.dark=(t,e)=>ir(t,or("default",{theme:"dark",...e})),sr.dismiss=t=>{Qn.size>0?Bn.emit(1,t):tr=tr.filter((e=>null!=t&&e.options.toastId!==t))},sr.clearWaitingQueue=function(t){return void 0===t&&(t={}),Bn.emit(5,t)},sr.isActive=t=>{let e=!1;return Qn.forEach((n=>{n.isToastActive&&n.isToastActive(t)&&(e=!0)})),e},sr.update=function(t,e){void 0===e&&(e={}),setTimeout((()=>{const n=function(t,e){let{containerId:n}=e;const r=Qn.get(n||Jn);return r&&r.getToast(t)}(t,e);if(n){const{props:r,content:i}=n,o={delay:100,...r,...e,toastId:e.toastId||t,updateId:nr()};o.toastId!==t&&(o.staleId=t);const a=o.render||i;delete o.render,ir(a,o)}}),0)},sr.done=t=>{sr.update(t,{progress:1})},sr.onChange=t=>(Bn.on(4,t),()=>{Bn.off(4,t)}),sr.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},sr.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},Bn.on(2,(t=>{Jn=t.containerId||t,Qn.set(Jn,t),tr.forEach((t=>{Bn.emit(0,t.content,t.options)})),tr=[]})).on(3,(t=>{Qn.delete(t.containerId||t),0===Qn.size&&Bn.off(0).off(1).off(5)}));var lr=n(184);var cr=t=>{let{item:e,active:n}=t;const[r,i]=(0,m.useState)(!1);return(0,lr.jsxs)(Nt,{to:e.path,className:n?"sidebar-item-active":"sidebar-item",children:[(0,lr.jsx)("img",{src:e.icon,alt:`icon-${e.icon}`,className:"sidebar-item-icon"}),(0,lr.jsx)("span",{className:"sidebar-item-label",children:e.title})]})};n.p;var ur=n.p+"static/media/logout.bc6bc316adefecff4e581e725d3972b2.svg";var hr=function(t){let{menu:e}=t;const n=ct(),r=ht(),[i,o]=(0,m.useState)(1);return(0,m.useEffect)((()=>{e.forEach((t=>{n.pathname===t.path&&o(t.id)}))}),[n.pathname]),(0,lr.jsx)("nav",{className:"sidebar",children:(0,lr.jsxs)("div",{className:"sidebar-container",children:[(0,lr.jsx)("div",{className:"sidebar-logo-container"}),(0,lr.jsxs)("div",{className:"sidebar-container",children:[(0,lr.jsx)("div",{className:"sidebar-items",children:e.map(((t,e)=>(0,lr.jsx)("div",{onClick:()=>{return e=t.id,void o(e);var e},children:(0,lr.jsx)(cr,{active:t.id===i,item:t})},e)))}),(0,lr.jsxs)("div",{className:"sidebar-footer",onClick:async()=>{try{const t=await Pn.get("/api/v1/admin/logout",{headers:{Cookies:jt.get("admin_cookie")}});200===t.status&&(sr.success(t.message),r("/"))}catch(t){console.error(t)}},children:[(0,lr.jsx)("span",{className:"sidebar-item-label",children:"Logout"}),(0,lr.jsx)("img",{src:ur,alt:"icon-logout",className:"sidebar-item-icon"})]})]})]})})};var pr=n.p+"static/media/dashboard.5f874f71463e66998e016f71a14b8dbc.svg";var dr=n.p+"static/media/shipping.a9e6b8f89589387690bf35f9c4a690ea.svg";var fr=n.p+"static/media/product.626d898b33019cfababf30346fad7e19.svg";var gr=n.p+"static/media/user.d8bc220e4938b5e080429f7cc252dc46.svg";var mr=[{id:1,icon:pr,path:"/summary",title:"DataBase Summary"},{id:2,icon:fr,path:"/drtable",title:"Driver/Rider Details"},{id:3,icon:dr,path:"/drroutestable",title:"Driver/Rider Routes"},{id:4,icon:gr,path:"/displaynodestable",title:"Nodes Table"},{id:5,icon:gr,path:"/displayallnodes",title:"All Nodes"},{id:6,icon:gr,path:"/displaymaproutes",title:"Map Routes"},{id:7,icon:gr,path:"/displaynearestnode",title:"Display Nearest Node"}];var yr=n.p+"static/media/notification.9736b29d361e50fe895dd9034bfb1ac1.svg";var vr=n.p+"static/media/settings.9397f24aeef3aee302d5f608adb1dd9b.svg";var xr=function(t){let{btnText:e}=t;const[n,r]=(0,m.useState)("");return(0,m.useEffect)((()=>{(async()=>{try{let t=await Pn.get("/api/v1/admin/role",{headers:{Cookies:jt.get("admin_cookie")}});r(t.data.currentRole)}catch(t){console.error("Error fetching data:",t)}})()}),[]),(0,lr.jsxs)("div",{className:"dashbord-header-container",children:[e&&(0,lr.jsx)("button",{className:"dashbord-header-btn",onClick:()=>{window.location.reload(!1)},children:e}),(0,lr.jsxs)("h3",{children:["Role:"," ","SuperAdmin"===n?"Super Admin":"Admin"===n?"Admin":"User"]}),(0,lr.jsxs)("div",{className:"dashbord-header-right",children:[(0,lr.jsx)("img",{src:yr,alt:"notification-icon",className:"dashbord-header-icon"}),(0,lr.jsx)("img",{src:vr,alt:"settings-icon",className:"dashbord-header-icon"}),(0,lr.jsx)("img",{className:"dashbord-header-avatar",src:"https://reqres.in/img/faces/9-image.jpg"})]})]})};function _r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function br(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function wr(t,e){if(t){if("string"===typeof t)return _r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_r(t,e):void 0}}function Sr(t){return function(t){if(Array.isArray(t))return _r(t)}(t)||br(t)||wr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cr(t){return Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cr(t)}function Er(){Er=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(T){l=function(t,e,n){return t[e]=n}}function c(t,e,n,i){var o=e&&e.prototype instanceof p?e:p,a=Object.create(o.prototype),s=new E(i||[]);return r(a,"_invoke",{value:b(t,n,s)}),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(T){return{type:"throw",arg:T}}}t.wrap=c;var h={};function p(){}function d(){}function f(){}var g={};l(g,o,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(k([])));y&&y!==e&&n.call(y,o)&&(g=y);var v=f.prototype=p.prototype=Object.create(g);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function i(r,o,a,s){var l=u(t[r],t,o);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==Cr(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,a,s)}),(function(t){i("throw",t,a,s)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return i("throw",t,a,s)}))}s(l.arg)}var o;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){i(t,n,e,r)}))}return o=o?o.then(r,r):r()}})}function b(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return M()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function w(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=u(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return d.prototype=f,r(v,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:d,configurable:!0}),d.displayName=l(f,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,l(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},x(_.prototype),l(_.prototype,a,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new _(c(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(v),l(v,s,"Generator"),l(v,o,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=k,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:k(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function kr(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(c){return void n(c)}s.done?e(l):Promise.resolve(l).then(r,i)}function Mr(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){kr(o,r,i,a,s,"next",t)}function s(t){kr(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Tr(t){var e=function(t,e){if("object"!==Cr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Cr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Cr(e)?e:String(e)}function Ir(t,e,n){return(e=Tr(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Or(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pr(Object(n),!0).forEach((function(e){Ir(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ar,Dr=n(4164),Rr=n.t(Dr,2),Lr=Or({},Rr),Nr=Lr.version,Fr=Lr.render,zr=Lr.unmountComponentAtNode;try{Number((Nr||"").split(".")[0])>=18&&(Ar=Lr.createRoot)}catch(kg){}function Br(t){var e=Lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;e&&"object"===Cr(e)&&(e.usingClientEntryPoint=t)}var $r="__rc_react_root__";function jr(t,e){Ar?function(t,e){Br(!0);var n=e[$r]||Ar(e);Br(!1),n.render(t),e[$r]=n}(t,e):function(t,e){Fr(t,e)}(t,e)}function Ur(t){return Vr.apply(this,arguments)}function Vr(){return(Vr=Mr(Er().mark((function t(e){return Er().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.resolve().then((function(){var t;null===(t=e[$r])||void 0===t||t.unmount(),delete e[$r]})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Hr(t){zr(t)}function Gr(t){return Wr.apply(this,arguments)}function Wr(){return(Wr=Mr(Er().mark((function t(e){return Er().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===Ar){t.next=2;break}return t.abrupt("return",Ur(e));case 2:Hr(e);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Xr=function(t){for(var e,n=0,r=0,i=t.length;i>=4;++r,i-=4)e=1540483477*(65535&(e=255&t.charCodeAt(r)|(255&t.charCodeAt(++r))<<8|(255&t.charCodeAt(++r))<<16|(255&t.charCodeAt(++r))<<24))+(59797*(e>>>16)<<16),n=1540483477*(65535&(e^=e>>>24))+(59797*(e>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&t.charCodeAt(r+2))<<16;case 2:n^=(255&t.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)};function qr(t,e,n){var r=m.useRef({});return"value"in r.current&&!n(r.current.condition,e)||(r.current.value=t(),r.current.condition=e),r.current.value}var Yr={},Zr=[];function Kr(t,e){}function Jr(t,e){}function Qr(t,e,n){e||Yr[n]||(t(!1,n),Yr[n]=!0)}function ti(t,e){Qr(Kr,t,e)}function ei(t,e){Qr(Jr,t,e)}ti.preMessage=function(t){Zr.push(t)},ti.resetWarned=function(){Yr={}},ti.noteOnce=ei;var ni=ti;var ri=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Set;return function t(e,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=r.has(e);if(ni(!a,"Warning: There may be circular references"),a)return!1;if(e===i)return!0;if(n&&o>1)return!1;r.add(e);var s=o+1;if(Array.isArray(e)){if(!Array.isArray(i)||e.length!==i.length)return!1;for(var l=0;l<e.length;l++)if(!t(e[l],i[l],s))return!1;return!0}if(e&&i&&"object"===Cr(e)&&"object"===Cr(i)){var c=Object.keys(e);return c.length===Object.keys(i).length&&c.every((function(n){return t(e[n],i[n],s)}))}return!1}(t,e)};function ii(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Tr(r.key),r)}}function ai(t,e,n){return e&&oi(t.prototype,e),n&&oi(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var si=function(){function t(e){ii(this,t),Ir(this,"instanceId",void 0),Ir(this,"cache",new Map),this.instanceId=e}return ai(t,[{key:"get",value:function(t){return this.cache.get(t.join("%"))||null}},{key:"update",value:function(t,e){var n=t.join("%"),r=e(this.cache.get(n));null===r?this.cache.delete(n):this.cache.set(n,r)}}]),t}(),li=si,ci="data-token-hash",ui="data-css-hash",hi="__cssinjs_instance__";function pi(){var t=Math.random().toString(12).slice(2);if("undefined"!==typeof document&&document.head&&document.body){var e=document.body.querySelectorAll("style[".concat(ui,"]"))||[],n=document.head.firstChild;Array.from(e).forEach((function(e){e[hi]=e[hi]||t,e[hi]===t&&document.head.insertBefore(e,n)}));var r={};Array.from(document.querySelectorAll("style[".concat(ui,"]"))).forEach((function(e){var n,i=e.getAttribute(ui);r[i]?e[hi]===t&&(null===(n=e.parentNode)||void 0===n||n.removeChild(e)):r[i]=!0}))}return new li(t)}var di=m.createContext({hashPriority:"low",cache:pi(),defaultCache:!0}),fi=di;function gi(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}function mi(t,e){if(!t)return!1;if(t.contains)return t.contains(e);for(var n=e;n;){if(n===t)return!0;n=n.parentNode}return!1}var yi="data-rc-order",vi="rc-util-key",xi=new Map;function _i(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mark;return t?t.startsWith("data-")?t:"data-".concat(t):vi}function bi(t){return t.attachTo?t.attachTo:document.querySelector("head")||document.body}function wi(t){return Array.from((xi.get(t)||t).children).filter((function(t){return"STYLE"===t.tagName}))}function Si(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!gi())return null;var n=e.csp,r=e.prepend,i=document.createElement("style");i.setAttribute(yi,function(t){return"queue"===t?"prependQueue":t?"prepend":"append"}(r)),null!==n&&void 0!==n&&n.nonce&&(i.nonce=null===n||void 0===n?void 0:n.nonce),i.innerHTML=t;var o=bi(e),a=o.firstChild;if(r){if("queue"===r){var s=wi(o).filter((function(t){return["prepend","prependQueue"].includes(t.getAttribute(yi))}));if(s.length)return o.insertBefore(i,s[s.length-1].nextSibling),i}o.insertBefore(i,a)}else o.appendChild(i);return i}function Ci(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return wi(bi(e)).find((function(n){return n.getAttribute(_i(e))===t}))}function Ei(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Ci(t,e);n&&bi(e).removeChild(n)}function ki(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){var n=xi.get(t);if(!n||!mi(document,n)){var r=Si("",e),i=r.parentNode;xi.set(t,i),t.removeChild(r)}}(bi(n),n);var r=Ci(e,n);if(r){var i,o,a;if(null!==(i=n.csp)&&void 0!==i&&i.nonce&&r.nonce!==(null===(o=n.csp)||void 0===o?void 0:o.nonce))r.nonce=null===(a=n.csp)||void 0===a?void 0:a.nonce;return r.innerHTML!==t&&(r.innerHTML=t),r}var s=Si(t,n);return s.setAttribute(_i(n),e),s}function Mi(t){var e="";return Object.keys(t).forEach((function(n){var r=t[n];e+=n,r&&"object"===Cr(r)?e+=Mi(r):e+=r})),e}var Ti="layer-".concat(Date.now(),"-").concat(Math.random()).replace(/\./g,""),Ii="903px";var Pi=void 0;function Oi(){return void 0===Pi&&(Pi=function(t,e){if(gi()){var n;ki(t,Ti);var r=document.createElement("div");r.style.position="fixed",r.style.left="0",r.style.top="0",null===e||void 0===e||e(r),document.body.appendChild(r);var i=getComputedStyle(r).width===Ii;return null===(n=r.parentNode)||void 0===n||n.removeChild(r),Ei(Ti),i}return!1}("@layer ".concat(Ti," { .").concat(Ti," { width: ").concat(Ii,"!important; } }"),(function(t){t.className=Ti}))),Pi}function Ai(t){if(Array.isArray(t))return t}function Di(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ri(t,e){return Ai(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||wr(t,e)||Di()}var Li=function(){return!1};function Ni(t,e,n,r){var i=m.useContext(fi).cache,o=[t].concat(Sr(e));Li();return m.useMemo((function(){i.update(o,(function(t){var e=Ri(t||[],2),r=e[0];return[(void 0===r?0:r)+1,e[1]||n()]}))}),[o.join("_")]),m.useEffect((function(){return function(){i.update(o,(function(t){var e=Ri(t||[],2),n=e[0],i=void 0===n?0:n,o=e[1];return 0===i-1?(null===r||void 0===r||r(o,!1),null):[i-1,o]}))}}),o),i.get(o)[1]}var Fi={},zi="css",Bi=new Map;function $i(t,e){Bi.set(t,(Bi.get(t)||0)-1);var n=Array.from(Bi.keys()),r=n.filter((function(t){return(Bi.get(t)||0)<=0}));r.length<n.length&&r.forEach((function(t){!function(t,e){"undefined"!==typeof document&&document.querySelectorAll("style[".concat(ci,'="').concat(t,'"]')).forEach((function(t){var n;t[hi]===e&&(null===(n=t.parentNode)||void 0===n||n.removeChild(t))}))}(t,e),Bi.delete(t)}))}function ji(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(0,m.useContext)(fi).cache.instanceId,i=n.salt,o=void 0===i?"":i,a=n.override,s=void 0===a?Fi:a,l=n.formatToken,c=m.useMemo((function(){return Object.assign.apply(Object,[{}].concat(Sr(e)))}),[e]),u=m.useMemo((function(){return Mi(c)}),[c]),h=m.useMemo((function(){return Mi(s)}),[s]),p=Ni("token",[o,t.id,u,h],(function(){var e=Or(Or({},t.getDerivativeToken(c)),s);l&&(e=l(e));var n=function(t,e){return Xr("".concat(e,"_").concat(Mi(t)))}(e,o);e._tokenKey=n,function(t){Bi.set(t,(Bi.get(t)||0)+1)}(n);var r="".concat(zi,"-").concat(Xr(n));return e._hashId=r,[e,r]}),(function(t){$i(t[0]._tokenKey,r)}));return p}function Ui(){return Ui=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ui.apply(this,arguments)}var Vi={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Hi="comm",Gi="rule",Wi="decl",Xi="@import",qi="@keyframes",Yi="@layer",Zi=Math.abs,Ki=String.fromCharCode;Object.assign;function Ji(t){return t.trim()}function Qi(t,e,n){return t.replace(e,n)}function to(t,e){return t.indexOf(e)}function eo(t,e){return 0|t.charCodeAt(e)}function no(t,e,n){return t.slice(e,n)}function ro(t){return t.length}function io(t){return t.length}function oo(t,e){return e.push(t),t}function ao(t,e){for(var n="",r=io(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function so(t,e,n,r){switch(t.type){case Yi:if(t.children.length)break;case Xi:case Wi:return t.return=t.return||t.value;case Hi:return"";case qi:return t.return=t.value+"{"+ao(t.children,r)+"}";case Gi:t.value=t.props.join(",")}return ro(n=ao(t.children,r))?t.return=t.value+"{"+n+"}":""}var lo=1,co=1,uo=0,ho=0,po=0,fo="";function go(t,e,n,r,i,o,a){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:lo,column:co,length:a,return:""}}function mo(){return po=ho>0?eo(fo,--ho):0,co--,10===po&&(co=1,lo--),po}function yo(){return po=ho<uo?eo(fo,ho++):0,co++,10===po&&(co=1,lo++),po}function vo(){return eo(fo,ho)}function xo(){return ho}function _o(t,e){return no(fo,t,e)}function bo(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function wo(t){return lo=co=1,uo=ro(fo=t),ho=0,[]}function So(t){return fo="",t}function Co(t){return Ji(_o(ho-1,Mo(91===t?t+2:40===t?t+1:t)))}function Eo(t){for(;(po=vo())&&po<33;)yo();return bo(t)>2||bo(po)>3?"":" "}function ko(t,e){for(;--e&&yo()&&!(po<48||po>102||po>57&&po<65||po>70&&po<97););return _o(t,xo()+(e<6&&32==vo()&&32==yo()))}function Mo(t){for(;yo();)switch(po){case t:return ho;case 34:case 39:34!==t&&39!==t&&Mo(po);break;case 40:41===t&&Mo(t);break;case 92:yo()}return ho}function To(t,e){for(;yo()&&t+po!==57&&(t+po!==84||47!==vo()););return"/*"+_o(e,ho-1)+"*"+Ki(47===t?t:yo())}function Io(t){for(;!bo(vo());)yo();return _o(t,ho)}function Po(t){return So(Oo("",null,null,null,[""],t=wo(t),0,[0],t))}function Oo(t,e,n,r,i,o,a,s,l){for(var c=0,u=0,h=a,p=0,d=0,f=0,g=1,m=1,y=1,v=0,x="",_=i,b=o,w=r,S=x;m;)switch(f=v,v=yo()){case 40:if(108!=f&&58==eo(S,h-1)){-1!=to(S+=Qi(Co(v),"&","&\f"),"&\f")&&(y=-1);break}case 34:case 39:case 91:S+=Co(v);break;case 9:case 10:case 13:case 32:S+=Eo(f);break;case 92:S+=ko(xo()-1,7);continue;case 47:switch(vo()){case 42:case 47:oo(Do(To(yo(),xo()),e,n),l);break;default:S+="/"}break;case 123*g:s[c++]=ro(S)*y;case 125*g:case 59:case 0:switch(v){case 0:case 125:m=0;case 59+u:-1==y&&(S=Qi(S,/\f/g,"")),d>0&&ro(S)-h&&oo(d>32?Ro(S+";",r,n,h-1):Ro(Qi(S," ","")+";",r,n,h-2),l);break;case 59:S+=";";default:if(oo(w=Ao(S,e,n,c,u,i,s,x,_=[],b=[],h),o),123===v)if(0===u)Oo(S,e,w,w,_,o,h,s,b);else switch(99===p&&110===eo(S,3)?100:p){case 100:case 108:case 109:case 115:Oo(t,w,w,r&&oo(Ao(t,w,w,0,0,i,s,x,i,_=[],h),b),i,b,h,s,r?_:b);break;default:Oo(S,w,w,w,[""],b,0,s,b)}}c=u=d=0,g=y=1,x=S="",h=a;break;case 58:h=1+ro(S),d=f;default:if(g<1)if(123==v)--g;else if(125==v&&0==g++&&125==mo())continue;switch(S+=Ki(v),v*g){case 38:y=u>0?1:(S+="\f",-1);break;case 44:s[c++]=(ro(S)-1)*y,y=1;break;case 64:45===vo()&&(S+=Co(yo())),p=vo(),u=h=ro(x=S+=Io(xo())),v++;break;case 45:45===f&&2==ro(S)&&(g=0)}}return o}function Ao(t,e,n,r,i,o,a,s,l,c,u){for(var h=i-1,p=0===i?o:[""],d=io(p),f=0,g=0,m=0;f<r;++f)for(var y=0,v=no(t,h+1,h=Zi(g=a[f])),x=t;y<d;++y)(x=Ji(g>0?p[y]+" "+v:Qi(v,/&\f/g,p[y])))&&(l[m++]=x);return go(t,e,n,0===i?Gi:s,l,c,u)}function Do(t,e,n){return go(t,e,n,Hi,Ki(po),no(t,2,-2),0)}function Ro(t,e,n,r){return go(t,e,n,Wi,no(t,0,r),no(t,r+1,-1),r)}var Lo=gi(),No="_multi_value_";function Fo(t){return ao(Po(t),so).replace(/\{%%%\:[^;];}/g,";")}var zo=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{root:!0,parentSelectors:[]},i=r.root,o=r.injectHash,a=r.parentSelectors,s=n.hashId,l=n.layer,c=(n.path,n.hashPriority),u=n.transformers,h=void 0===u?[]:u,p=(n.linters,""),d={};function f(e){var r=e.getName(s);if(!d[r]){var i=Ri(t(e.style,n,{root:!1,parentSelectors:a}),1)[0];d[r]="@keyframes ".concat(e.getName(s)).concat(i)}}var g=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.forEach((function(e){Array.isArray(e)?t(e,n):e&&n.push(e)})),n}(Array.isArray(e)?e:[e]);if(g.forEach((function(e){var r="string"!==typeof e||i?e:{};if("string"===typeof r)p+="".concat(r,"\n");else if(r._keyframe)f(r);else{var l=h.reduce((function(t,e){var n;return(null===e||void 0===e||null===(n=e.visit)||void 0===n?void 0:n.call(e,t))||t}),r);Object.keys(l).forEach((function(e){var r=l[e];if("object"!==Cr(r)||!r||"animationName"===e&&r._keyframe||function(t){return"object"===Cr(t)&&t&&("_skip_check_"in t||No in t)}(r)){var u;function b(t,e){var n=t.replace(/[A-Z]/g,(function(t){return"-".concat(t.toLowerCase())})),r=e;Vi[t]||"number"!==typeof r||0===r||(r="".concat(r,"px")),"animationName"===t&&null!==e&&void 0!==e&&e._keyframe&&(f(e),r=e.getName(s)),p+="".concat(n,":").concat(r,";")}var h=null!==(u=null===r||void 0===r?void 0:r.value)&&void 0!==u?u:r;"object"===Cr(r)&&null!==r&&void 0!==r&&r[No]&&Array.isArray(h)?h.forEach((function(t){b(e,t)})):b(e,h)}else{var g=!1,m=e.trim(),y=!1;(i||o)&&s?m.startsWith("@")?g=!0:m=function(t,e,n){if(!e)return t;var r=".".concat(e),i="low"===n?":where(".concat(r,")"):r,o=t.split(",").map((function(t){var e,n=t.trim().split(/\s+/),r=n[0]||"",o=(null===(e=r.match(/^\w+/))||void 0===e?void 0:e[0])||"";return[r="".concat(o).concat(i).concat(r.slice(o.length))].concat(Sr(n.slice(1))).join(" ")}));return o.join(",")}(e,s,c):!i||s||"&"!==m&&""!==m||(m="",y=!0);var v=Ri(t(r,n,{root:y,injectHash:g,parentSelectors:[].concat(Sr(a),[m])}),2),x=v[0],_=v[1];d=Or(Or({},d),_),p+="".concat(m).concat(x)}}))}})),i){if(l&&Oi()){var m=l.split(","),y=m[m.length-1].trim();p="@layer ".concat(y," {").concat(p,"}"),m.length>1&&(p="@layer ".concat(l,"{%%%:%}").concat(p))}}else p="{".concat(p,"}");return[p,d]};function Bo(){return null}function $o(t,e){var n=t.token,r=t.path,i=t.hashId,o=t.layer,a=t.nonce,s=m.useContext(fi),l=s.autoClear,c=(s.mock,s.defaultCache),u=s.hashPriority,h=s.container,p=s.ssrInline,d=s.transformers,f=s.linters,g=s.cache,y=n._tokenKey,v=[y].concat(Sr(r)),x=Lo;var _=Ni("style",v,(function(){var t=e(),n=Ri(zo(t,{hashId:i,hashPriority:u,layer:o,path:r.join("-"),transformers:d,linters:f}),2),s=n[0],l=n[1],c=Fo(s),p=function(t,e){return Xr("".concat(t.join("%")).concat(e))}(v,c);if(x){var m={mark:ui,prepend:"queue",attachTo:h},_="function"===typeof a?a():a;_&&(m.csp={nonce:_});var b=ki(c,p,m);b[hi]=g.instanceId,b.setAttribute(ci,y),Object.keys(l).forEach((function(t){ki(Fo(l[t]),"_effect-".concat(t),m)}))}return[c,y,p]}),(function(t,e){var n=Ri(t,3)[2];(e||l)&&Lo&&Ei(n,{mark:ui})})),b=Ri(_,3),w=b[0],S=b[1],C=b[2];return function(t){var e,n;p&&!x&&c?e=m.createElement("style",Ui({},(Ir(n={},ci,S),Ir(n,ui,C),n),{dangerouslySetInnerHTML:{__html:w}})):e=m.createElement(Bo,null);return m.createElement(m.Fragment,null,e,t)}}var jo=function(){function t(e,n){ii(this,t),Ir(this,"name",void 0),Ir(this,"style",void 0),Ir(this,"_keyframe",!0),this.name=e,this.style=n}return ai(t,[{key:"getName",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t?"".concat(t,"-").concat(this.name):this.name}}]),t}(),Uo=jo;var Vo=function(){function t(){ii(this,t),Ir(this,"cache",void 0),Ir(this,"keys",void 0),Ir(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return ai(t,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i={map:this.cache};return t.forEach((function(t){var e,n;i?i=null===(e=i)||void 0===e||null===(n=e.map)||void 0===n?void 0:n.get(t):i=void 0})),null!==(e=i)&&void 0!==e&&e.value&&r&&(i.value[1]=this.cacheCallTimes++),null===(n=i)||void 0===n?void 0:n.value}},{key:"get",value:function(t){var e;return null===(e=this.internalGet(t,!0))||void 0===e?void 0:e[0]}},{key:"has",value:function(t){return!!this.internalGet(t)}},{key:"set",value:function(e,n){var r=this;if(!this.has(e)){if(this.size()+1>t.MAX_CACHE_SIZE+t.MAX_CACHE_OFFSET){var i=this.keys.reduce((function(t,e){var n=Ri(t,2)[1];return r.internalGet(e)[1]<n?[e,r.internalGet(e)[1]]:t}),[this.keys[0],this.cacheCallTimes]),o=Ri(i,1)[0];this.delete(o)}this.keys.push(e)}var a=this.cache;e.forEach((function(t,i){if(i===e.length-1)a.set(t,{value:[n,r.cacheCallTimes++]});else{var o=a.get(t);o?o.map||(o.map=new Map):a.set(t,{map:new Map}),a=a.get(t).map}}))}},{key:"deleteByPath",value:function(t,e){var n,r=t.get(e[0]);if(1===e.length)return r.map?t.set(e[0],{map:r.map}):t.delete(e[0]),null===(n=r.value)||void 0===n?void 0:n[0];var i=this.deleteByPath(r.map,e.slice(1));return r.map&&0!==r.map.size||r.value||t.delete(e[0]),i}},{key:"delete",value:function(t){if(this.has(t))return this.keys=this.keys.filter((function(e){return!function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(e,t)})),this.deleteByPath(this.cache,t)}}]),t}();Ir(Vo,"MAX_CACHE_SIZE",20),Ir(Vo,"MAX_CACHE_OFFSET",5);var Ho=0,Go=function(){function t(e){ii(this,t),Ir(this,"derivatives",void 0),Ir(this,"id",void 0),this.derivatives=Array.isArray(e)?e:[e],this.id=Ho,0===e.length&&e.length,Ho+=1}return ai(t,[{key:"getDerivativeToken",value:function(t){return this.derivatives.reduce((function(e,n){return n(t,e)}),void 0)}}]),t}(),Wo=new Vo;function Xo(t){var e=Array.isArray(t)?t:[t];return Wo.has(e)||Wo.set(e,new Go(e)),Wo.get(e)}function qo(t){return t.notSplit=!0,t}qo(["borderTop","borderBottom"]),qo(["borderTop"]),qo(["borderBottom"]),qo(["borderLeft","borderRight"]),qo(["borderLeft"]),qo(["borderRight"]);var Yo=(0,m.createContext)({});function Zo(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ko(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jo(t,e){return Jo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Jo(t,e)}function Qo(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jo(t,e)}function ta(t){return ta=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ta(t)}function ea(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(kg){return!1}}();return function(){var n,r=ta(t);if(e){var i=ta(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Cr(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ko(t)}(this,n)}}var na=n(3873);function ra(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return m.Children.forEach(t,(function(t){(void 0!==t&&null!==t||e.keepEmpty)&&(Array.isArray(t)?n=n.concat(ra(t)):(0,na.isFragment)(t)&&t.props?n=n.concat(ra(t.props.children,e)):n.push(t))})),n}var ia="RC_FORM_INTERNAL_HOOKS",oa=function(){ni(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},aa=m.createContext({getFieldValue:oa,getFieldsValue:oa,getFieldError:oa,getFieldWarning:oa,getFieldsError:oa,isFieldsTouched:oa,isFieldTouched:oa,isFieldValidating:oa,isFieldsValidating:oa,resetFields:oa,setFields:oa,setFieldValue:oa,setFieldsValue:oa,validateFields:oa,submit:oa,getInternalHooks:function(){return oa(),{dispatch:oa,initEntityValue:oa,registerField:oa,useSubscribe:oa,setInitialValues:oa,destroyForm:oa,setCallbacks:oa,registerWatch:oa,getFields:oa,setValidateMessages:oa,setPreserve:oa,getInitialValue:oa}}}),sa=m.createContext(null);function la(t){return void 0===t||null===t?[]:Array.isArray(t)?t:[t]}function ca(){return ca=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ca.apply(this,arguments)}function ua(t){return ua=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ua(t)}function ha(t,e){return ha=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ha(t,e)}function pa(t,e,n){return pa=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(kg){return!1}}()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&ha(i,n.prototype),i},pa.apply(null,arguments)}function da(t){var e="function"===typeof Map?new Map:void 0;return da=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return pa(t,arguments,ua(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),ha(r,t)},da(t)}var fa=/%[sdj%]/g;function ga(t){if(!t||!t.length)return null;var e={};return t.forEach((function(t){var n=t.field;e[n]=e[n]||[],e[n].push(t)})),e}function ma(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=0,o=n.length;if("function"===typeof t)return t.apply(null,n);if("string"===typeof t){var a=t.replace(fa,(function(t){if("%%"===t)return"%";if(i>=o)return t;switch(t){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(Gn){return"[Circular]"}break;default:return t}}));return a}return t}function ya(t,e){return void 0===t||null===t||(!("array"!==e||!Array.isArray(t)||t.length)||!(!function(t){return"string"===t||"url"===t||"hex"===t||"email"===t||"date"===t||"pattern"===t}(e)||"string"!==typeof t||t))}function va(t,e,n){var r=0,i=t.length;!function o(a){if(a&&a.length)n(a);else{var s=r;r+=1,s<i?e(t[s],o):n([])}}([])}var xa=function(t){var e,n;function r(e,n){var r;return(r=t.call(this,"Async Validation Error")||this).errors=e,r.fields=n,r}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,ha(e,n),r}(da(Error));function _a(t,e,n,r,i){if(e.first){var o=new Promise((function(e,o){var a=function(t){var e=[];return Object.keys(t).forEach((function(n){e.push.apply(e,t[n]||[])})),e}(t);va(a,n,(function(t){return r(t),t.length?o(new xa(t,ga(t))):e(i)}))}));return o.catch((function(t){return t})),o}var a=!0===e.firstFields?Object.keys(t):e.firstFields||[],s=Object.keys(t),l=s.length,c=0,u=[],h=new Promise((function(e,o){var h=function(t){if(u.push.apply(u,t),++c===l)return r(u),u.length?o(new xa(u,ga(u))):e(i)};s.length||(r(u),e(i)),s.forEach((function(e){var r=t[e];-1!==a.indexOf(e)?va(r,n,h):function(t,e,n){var r=[],i=0,o=t.length;function a(t){r.push.apply(r,t||[]),++i===o&&n(r)}t.forEach((function(t){e(t,a)}))}(r,n,h)}))}));return h.catch((function(t){return t})),h}function ba(t,e){return function(n){var r,i;return r=t.fullFields?function(t,e){for(var n=t,r=0;r<e.length;r++){if(void 0==n)return n;n=n[e[r]]}return n}(e,t.fullFields):e[n.field||t.fullField],(i=n)&&void 0!==i.message?(n.field=n.field||t.fullField,n.fieldValue=r,n):{message:"function"===typeof n?n():n,fieldValue:r,field:n.field||t.fullField}}}function wa(t,e){if(e)for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];"object"===typeof r&&"object"===typeof t[n]?t[n]=ca({},t[n],r):t[n]=r}return t}var Sa,Ca=function(t,e,n,r,i,o){!t.required||n.hasOwnProperty(t.field)&&!ya(e,o||t.type)||r.push(ma(i.messages.required,t.fullField))},Ea=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,ka=/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i,Ma={integer:function(t){return Ma.number(t)&&parseInt(t,10)===t},float:function(t){return Ma.number(t)&&!Ma.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch(kg){return!1}},date:function(t){return"function"===typeof t.getTime&&"function"===typeof t.getMonth&&"function"===typeof t.getYear&&!isNaN(t.getTime())},number:function(t){return!isNaN(t)&&"number"===typeof t},object:function(t){return"object"===typeof t&&!Ma.array(t)},method:function(t){return"function"===typeof t},email:function(t){return"string"===typeof t&&t.length<=320&&!!t.match(Ea)},url:function(t){return"string"===typeof t&&t.length<=2048&&!!t.match(function(){if(Sa)return Sa;var t="[a-fA-F\\d:]",e=function(e){return e&&e.includeBoundaries?"(?:(?<=\\s|^)(?="+t+")|(?<="+t+")(?=\\s|$))":""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",i=("\n(?:\n(?:"+r+":){7}(?:"+r+"|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:"+r+":){6}(?:"+n+"|:"+r+"|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:"+r+":){5}(?::"+n+"|(?::"+r+"){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:"+r+":){4}(?:(?::"+r+"){0,1}:"+n+"|(?::"+r+"){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:"+r+":){3}(?:(?::"+r+"){0,2}:"+n+"|(?::"+r+"){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:"+r+":){2}(?:(?::"+r+"){0,3}:"+n+"|(?::"+r+"){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:"+r+":){1}(?:(?::"+r+"){0,4}:"+n+"|(?::"+r+"){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::"+r+"){0,5}:"+n+"|(?::"+r+"){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n").replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),o=new RegExp("(?:^"+n+"$)|(?:^"+i+"$)"),a=new RegExp("^"+n+"$"),s=new RegExp("^"+i+"$"),l=function(t){return t&&t.exact?o:new RegExp("(?:"+e(t)+n+e(t)+")|(?:"+e(t)+i+e(t)+")","g")};l.v4=function(t){return t&&t.exact?a:new RegExp(""+e(t)+n+e(t),"g")},l.v6=function(t){return t&&t.exact?s:new RegExp(""+e(t)+i+e(t),"g")};var c=l.v4().source,u=l.v6().source;return Sa=new RegExp("(?:^(?:(?:(?:[a-z]+:)?//)|www\\.)(?:\\S+(?::\\S*)?@)?(?:localhost|"+c+"|"+u+'|(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:[/?#][^\\s"]*)?$)',"i")}())},hex:function(t){return"string"===typeof t&&!!t.match(ka)}},Ta="enum",Ia={required:Ca,whitespace:function(t,e,n,r,i){(/^\s+$/.test(e)||""===e)&&r.push(ma(i.messages.whitespace,t.fullField))},type:function(t,e,n,r,i){if(t.required&&void 0===e)Ca(t,e,n,r,i);else{var o=t.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(o)>-1?Ma[o](e)||r.push(ma(i.messages.types[o],t.fullField,t.type)):o&&typeof e!==t.type&&r.push(ma(i.messages.types[o],t.fullField,t.type))}},range:function(t,e,n,r,i){var o="number"===typeof t.len,a="number"===typeof t.min,s="number"===typeof t.max,l=e,c=null,u="number"===typeof e,h="string"===typeof e,p=Array.isArray(e);if(u?c="number":h?c="string":p&&(c="array"),!c)return!1;p&&(l=e.length),h&&(l=e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),o?l!==t.len&&r.push(ma(i.messages[c].len,t.fullField,t.len)):a&&!s&&l<t.min?r.push(ma(i.messages[c].min,t.fullField,t.min)):s&&!a&&l>t.max?r.push(ma(i.messages[c].max,t.fullField,t.max)):a&&s&&(l<t.min||l>t.max)&&r.push(ma(i.messages[c].range,t.fullField,t.min,t.max))},enum:function(t,e,n,r,i){t[Ta]=Array.isArray(t[Ta])?t[Ta]:[],-1===t[Ta].indexOf(e)&&r.push(ma(i.messages[Ta],t.fullField,t[Ta].join(", ")))},pattern:function(t,e,n,r,i){if(t.pattern)if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(e)||r.push(ma(i.messages.pattern.mismatch,t.fullField,e,t.pattern));else if("string"===typeof t.pattern){new RegExp(t.pattern).test(e)||r.push(ma(i.messages.pattern.mismatch,t.fullField,e,t.pattern))}}},Pa=function(t,e,n,r,i){var o=t.type,a=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(ya(e,o)&&!t.required)return n();Ia.required(t,e,r,a,i,o),ya(e,o)||Ia.type(t,e,r,a,i)}n(a)},Oa={string:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(ya(e,"string")&&!t.required)return n();Ia.required(t,e,r,o,i,"string"),ya(e,"string")||(Ia.type(t,e,r,o,i),Ia.range(t,e,r,o,i),Ia.pattern(t,e,r,o,i),!0===t.whitespace&&Ia.whitespace(t,e,r,o,i))}n(o)},method:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(ya(e)&&!t.required)return n();Ia.required(t,e,r,o,i),void 0!==e&&Ia.type(t,e,r,o,i)}n(o)},number:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(""===e&&(e=void 0),ya(e)&&!t.required)return n();Ia.required(t,e,r,o,i),void 0!==e&&(Ia.type(t,e,r,o,i),Ia.range(t,e,r,o,i))}n(o)},boolean:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(ya(e)&&!t.required)return n();Ia.required(t,e,r,o,i),void 0!==e&&Ia.type(t,e,r,o,i)}n(o)},regexp:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(ya(e)&&!t.required)return n();Ia.required(t,e,r,o,i),ya(e)||Ia.type(t,e,r,o,i)}n(o)},integer:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(ya(e)&&!t.required)return n();Ia.required(t,e,r,o,i),void 0!==e&&(Ia.type(t,e,r,o,i),Ia.range(t,e,r,o,i))}n(o)},float:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(ya(e)&&!t.required)return n();Ia.required(t,e,r,o,i),void 0!==e&&(Ia.type(t,e,r,o,i),Ia.range(t,e,r,o,i))}n(o)},array:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if((void 0===e||null===e)&&!t.required)return n();Ia.required(t,e,r,o,i,"array"),void 0!==e&&null!==e&&(Ia.type(t,e,r,o,i),Ia.range(t,e,r,o,i))}n(o)},object:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(ya(e)&&!t.required)return n();Ia.required(t,e,r,o,i),void 0!==e&&Ia.type(t,e,r,o,i)}n(o)},enum:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(ya(e)&&!t.required)return n();Ia.required(t,e,r,o,i),void 0!==e&&Ia.enum(t,e,r,o,i)}n(o)},pattern:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(ya(e,"string")&&!t.required)return n();Ia.required(t,e,r,o,i),ya(e,"string")||Ia.pattern(t,e,r,o,i)}n(o)},date:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(ya(e,"date")&&!t.required)return n();var a;if(Ia.required(t,e,r,o,i),!ya(e,"date"))a=e instanceof Date?e:new Date(e),Ia.type(t,a,r,o,i),a&&Ia.range(t,a.getTime(),r,o,i)}n(o)},url:Pa,hex:Pa,email:Pa,required:function(t,e,n,r,i){var o=[],a=Array.isArray(e)?"array":typeof e;Ia.required(t,e,r,o,i,a),n(o)},any:function(t,e,n,r,i){var o=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(ya(e)&&!t.required)return n();Ia.required(t,e,r,o,i)}n(o)}};function Aa(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var Da=Aa(),Ra=function(){function t(t){this.rules=null,this._messages=Da,this.define(t)}var e=t.prototype;return e.define=function(t){var e=this;if(!t)throw new Error("Cannot configure a schema with no rules");if("object"!==typeof t||Array.isArray(t))throw new Error("Rules must be an object");this.rules={},Object.keys(t).forEach((function(n){var r=t[n];e.rules[n]=Array.isArray(r)?r:[r]}))},e.messages=function(t){return t&&(this._messages=wa(Aa(),t)),this._messages},e.validate=function(e,n,r){var i=this;void 0===n&&(n={}),void 0===r&&(r=function(){});var o=e,a=n,s=r;if("function"===typeof a&&(s=a,a={}),!this.rules||0===Object.keys(this.rules).length)return s&&s(null,o),Promise.resolve(o);if(a.messages){var l=this.messages();l===Da&&(l=Aa()),wa(l,a.messages),a.messages=l}else a.messages=this.messages();var c={};(a.keys||Object.keys(this.rules)).forEach((function(t){var n=i.rules[t],r=o[t];n.forEach((function(n){var a=n;"function"===typeof a.transform&&(o===e&&(o=ca({},o)),r=o[t]=a.transform(r)),(a="function"===typeof a?{validator:a}:ca({},a)).validator=i.getValidationMethod(a),a.validator&&(a.field=t,a.fullField=a.fullField||t,a.type=i.getType(a),c[t]=c[t]||[],c[t].push({rule:a,value:r,source:o,field:t}))}))}));var u={};return _a(c,a,(function(e,n){var r,i=e.rule,s=("object"===i.type||"array"===i.type)&&("object"===typeof i.fields||"object"===typeof i.defaultField);function l(t,e){return ca({},e,{fullField:i.fullField+"."+t,fullFields:i.fullFields?[].concat(i.fullFields,[t]):[t]})}function c(r){void 0===r&&(r=[]);var c=Array.isArray(r)?r:[r];!a.suppressWarning&&c.length&&t.warning("async-validator:",c),c.length&&void 0!==i.message&&(c=[].concat(i.message));var h=c.map(ba(i,o));if(a.first&&h.length)return u[i.field]=1,n(h);if(s){if(i.required&&!e.value)return void 0!==i.message?h=[].concat(i.message).map(ba(i,o)):a.error&&(h=[a.error(i,ma(a.messages.required,i.field))]),n(h);var p={};i.defaultField&&Object.keys(e.value).map((function(t){p[t]=i.defaultField})),p=ca({},p,e.rule.fields);var d={};Object.keys(p).forEach((function(t){var e=p[t],n=Array.isArray(e)?e:[e];d[t]=n.map(l.bind(null,t))}));var f=new t(d);f.messages(a.messages),e.rule.options&&(e.rule.options.messages=a.messages,e.rule.options.error=a.error),f.validate(e.value,e.rule.options||a,(function(t){var e=[];h&&h.length&&e.push.apply(e,h),t&&t.length&&e.push.apply(e,t),n(e.length?e:null)}))}else n(h)}if(s=s&&(i.required||!i.required&&e.value),i.field=e.field,i.asyncValidator)r=i.asyncValidator(i,e.value,c,e.source,a);else if(i.validator){try{r=i.validator(i,e.value,c,e.source,a)}catch(h){null==console.error||console.error(h),a.suppressValidatorError||setTimeout((function(){throw h}),0),c(h.message)}!0===r?c():!1===r?c("function"===typeof i.message?i.message(i.fullField||i.field):i.message||(i.fullField||i.field)+" fails"):r instanceof Array?c(r):r instanceof Error&&c(r.message)}r&&r.then&&r.then((function(){return c()}),(function(t){return c(t)}))}),(function(t){!function(t){var e=[],n={};function r(t){var n;Array.isArray(t)?e=(n=e).concat.apply(n,t):e.push(t)}for(var i=0;i<t.length;i++)r(t[i]);e.length?(n=ga(e),s(e,n)):s(null,o)}(t)}),o)},e.getType=function(t){if(void 0===t.type&&t.pattern instanceof RegExp&&(t.type="pattern"),"function"!==typeof t.validator&&t.type&&!Oa.hasOwnProperty(t.type))throw new Error(ma("Unknown rule type %s",t.type));return t.type||"string"},e.getValidationMethod=function(t){if("function"===typeof t.validator)return t.validator;var e=Object.keys(t),n=e.indexOf("message");return-1!==n&&e.splice(n,1),1===e.length&&"required"===e[0]?Oa.required:Oa[this.getType(t)]||void 0},t}();Ra.register=function(t,e){if("function"!==typeof e)throw new Error("Cannot register a validator by type, validator is not a function");Oa[t]=e},Ra.warning=function(){},Ra.messages=Da,Ra.validators=Oa;var La="'${name}' is not a valid ${type}",Na={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:La,method:La,array:La,object:La,number:La,date:La,boolean:La,integer:La,float:La,regexp:La,email:La,url:La,hex:La},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}};function Fa(t,e){for(var n=t,r=0;r<e.length;r+=1){if(null===n||void 0===n)return;n=n[e[r]]}return n}function za(t){return Ai(t)||br(t)||wr(t)||Di()}function Ba(t,e,n,r){if(!e.length)return n;var i,o=za(e),a=o[0],s=o.slice(1);return i=t||"number"!==typeof a?Array.isArray(t)?Sr(t):Or({},t):[],r&&void 0===n&&1===s.length?delete i[a][s[0]]:i[a]=Ba(i[a],s,n,r),i}function $a(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.length&&r&&void 0===n&&!Fa(t,e.slice(0,-1))?t:Ba(t,e,n,r)}"undefined"===typeof Reflect?Object.keys:Reflect.ownKeys;function ja(t){return Array.isArray(t)?function(t){return t.map((function(t){return ja(t)}))}(t):"object"===Cr(t)&&null!==t?function(t){if(Object.getPrototypeOf(t)===Object.prototype){var e={};for(var n in t)e[n]=ja(t[n]);return e}return t}(t):t}var Ua=ja;function Va(t){return la(t)}function Ha(t,e){var n={};return e.forEach((function(e){var r=Fa(t,e);n=$a(n,e,r)})),n}function Ga(t,e){return t&&t.some((function(t){return Ya(t,e)}))}function Wa(t){return"object"===Cr(t)&&null!==t&&Object.getPrototypeOf(t)===Object.prototype}function Xa(t,e){var n=Array.isArray(t)?Sr(t):Or({},t);return e?(Object.keys(e).forEach((function(t){var r=n[t],i=e[t],o=Wa(r)&&Wa(i);n[t]=o?Xa(r,i||{}):Ua(i)})),n):n}function qa(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce((function(t,e){return Xa(t,e)}),t)}function Ya(t,e){return!(!t||!e||t.length!==e.length)&&t.every((function(t,n){return e[n]===t}))}function Za(t){var e=arguments.length<=1?void 0:arguments[1];return e&&e.target&&"object"===Cr(e.target)&&t in e.target?e.target[t]:e}function Ka(t,e,n){var r=t.length;if(e<0||e>=r||n<0||n>=r)return t;var i=t[e],o=e-n;return o>0?[].concat(Sr(t.slice(0,n)),[i],Sr(t.slice(n,e)),Sr(t.slice(e+1,r))):o<0?[].concat(Sr(t.slice(0,e)),Sr(t.slice(e+1,n+1)),[i],Sr(t.slice(n+1,r))):t}var Ja=Ra;function Qa(t,e){return t.replace(/\$\{\w+\}/g,(function(t){var n=t.slice(2,-1);return e[n]}))}var ts="CODE_LOGIC_ERROR";function es(t,e,n,r,i){return ns.apply(this,arguments)}function ns(){return ns=Mr(Er().mark((function t(e,n,r,i,o){var a,s,l,c,u,h,p,d,f;return Er().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return delete(a=Or({},r)).ruleIndex,Ja.warning=function(){},a.validator&&(s=a.validator,a.validator=function(){try{return s.apply(void 0,arguments)}catch(t){return console.error(t),Promise.reject(ts)}}),l=null,a&&"array"===a.type&&a.defaultField&&(l=a.defaultField,delete a.defaultField),c=new Ja(Ir({},e,[a])),u=qa({},Na,i.validateMessages),c.messages(u),h=[],t.prev=10,t.next=13,Promise.resolve(c.validate(Ir({},e,n),Or({},i)));case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(10),t.t0.errors&&(h=t.t0.errors.map((function(t,e){var n=t.message,r=n===ts?u.default:n;return m.isValidElement(r)?m.cloneElement(r,{key:"error_".concat(e)}):r})));case 18:if(h.length||!l){t.next=23;break}return t.next=21,Promise.all(n.map((function(t,n){return es("".concat(e,".").concat(n),t,l,i,o)})));case 21:return p=t.sent,t.abrupt("return",p.reduce((function(t,e){return[].concat(Sr(t),Sr(e))}),[]));case 23:return d=Or(Or({},r),{},{name:e,enum:(r.enum||[]).join(", ")},o),f=h.map((function(t){return"string"===typeof t?Qa(t,d):t})),t.abrupt("return",f);case 26:case"end":return t.stop()}}),t,null,[[10,15]])}))),ns.apply(this,arguments)}function rs(t,e,n,r,i,o){var a,s=t.join("."),l=n.map((function(t,e){var n=t.validator,r=Or(Or({},t),{},{ruleIndex:e});return n&&(r.validator=function(t,e,r){var i=!1,o=n(t,e,(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Promise.resolve().then((function(){ni(!i,"Your validator function has already return a promise. `callback` will be ignored."),i||r.apply(void 0,e)}))}));i=o&&"function"===typeof o.then&&"function"===typeof o.catch,ni(i,"`callback` is deprecated. Please return a promise instead."),i&&o.then((function(){r()})).catch((function(t){r(t||" ")}))}),r})).sort((function(t,e){var n=t.warningOnly,r=t.ruleIndex,i=e.warningOnly,o=e.ruleIndex;return!!n===!!i?r-o:n?1:-1}));if(!0===i)a=new Promise(function(){var t=Mr(Er().mark((function t(n,i){var a,c,u;return Er().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=0;case 1:if(!(a<l.length)){t.next=12;break}return c=l[a],t.next=5,es(s,e,c,r,o);case 5:if(!(u=t.sent).length){t.next=9;break}return i([{errors:u,rule:c}]),t.abrupt("return");case 9:a+=1,t.next=1;break;case 12:n([]);case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());else{var c=l.map((function(t){return es(s,e,t,r,o).then((function(e){return{errors:e,rule:t}}))}));a=(i?function(t){return os.apply(this,arguments)}(c):function(t){return is.apply(this,arguments)}(c)).then((function(t){return Promise.reject(t)}))}return a.catch((function(t){return t})),a}function is(){return(is=Mr(Er().mark((function t(e){return Er().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.all(e).then((function(t){var e;return(e=[]).concat.apply(e,Sr(t))})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function os(){return os=Mr(Er().mark((function t(e){var n;return Er().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=0,t.abrupt("return",new Promise((function(t){e.forEach((function(r){r.then((function(r){r.errors.length&&t([r]),(n+=1)===e.length&&t([])}))}))})));case 2:case"end":return t.stop()}}),t)}))),os.apply(this,arguments)}var as=["name"],ss=[];function ls(t,e,n,r,i,o){return"function"===typeof t?t(e,n,"source"in o?{source:o.source}:{}):r!==i}var cs=function(t){Qo(n,t);var e=ea(n);function n(t){var r;(ii(this,n),(r=e.call(this,t)).state={resetCount:0},r.cancelRegisterFunc=null,r.mounted=!1,r.touched=!1,r.dirty=!1,r.validatePromise=void 0,r.prevValidating=void 0,r.errors=ss,r.warnings=ss,r.cancelRegister=function(){var t=r.props,e=t.preserve,n=t.isListField,i=t.name;r.cancelRegisterFunc&&r.cancelRegisterFunc(n,e,Va(i)),r.cancelRegisterFunc=null},r.getNamePath=function(){var t=r.props,e=t.name,n=t.fieldContext.prefixName;return void 0!==e?[].concat(Sr(void 0===n?[]:n),Sr(e)):[]},r.getRules=function(){var t=r.props,e=t.rules,n=void 0===e?[]:e,i=t.fieldContext;return n.map((function(t){return"function"===typeof t?t(i):t}))},r.refresh=function(){r.mounted&&r.setState((function(t){return{resetCount:t.resetCount+1}}))},r.triggerMetaEvent=function(t){var e=r.props.onMetaChange;null===e||void 0===e||e(Or(Or({},r.getMeta()),{},{destroy:t}))},r.onStoreChange=function(t,e,n){var i=r.props,o=i.shouldUpdate,a=i.dependencies,s=void 0===a?[]:a,l=i.onReset,c=n.store,u=r.getNamePath(),h=r.getValue(t),p=r.getValue(c),d=e&&Ga(e,u);switch("valueUpdate"===n.type&&"external"===n.source&&h!==p&&(r.touched=!0,r.dirty=!0,r.validatePromise=null,r.errors=ss,r.warnings=ss,r.triggerMetaEvent()),n.type){case"reset":if(!e||d)return r.touched=!1,r.dirty=!1,r.validatePromise=void 0,r.errors=ss,r.warnings=ss,r.triggerMetaEvent(),null===l||void 0===l||l(),void r.refresh();break;case"remove":if(o)return void r.reRender();break;case"setField":if(d){var f=n.data;return"touched"in f&&(r.touched=f.touched),"validating"in f&&!("originRCField"in f)&&(r.validatePromise=f.validating?Promise.resolve([]):null),"errors"in f&&(r.errors=f.errors||ss),"warnings"in f&&(r.warnings=f.warnings||ss),r.dirty=!0,r.triggerMetaEvent(),void r.reRender()}if(o&&!u.length&&ls(o,t,c,h,p,n))return void r.reRender();break;case"dependenciesUpdate":if(s.map(Va).some((function(t){return Ga(n.relatedFields,t)})))return void r.reRender();break;default:if(d||(!s.length||u.length||o)&&ls(o,t,c,h,p,n))return void r.reRender()}!0===o&&r.reRender()},r.validateRules=function(t){var e=r.getNamePath(),n=r.getValue(),i=t||{},o=i.triggerName,a=i.validateOnly,s=void 0!==a&&a,l=Promise.resolve().then((function(){if(!r.mounted)return[];var i=r.props,a=i.validateFirst,s=void 0!==a&&a,c=i.messageVariables,u=r.getRules();o&&(u=u.filter((function(t){return t})).filter((function(t){var e=t.validateTrigger;return!e||la(e).includes(o)})));var h=rs(e,n,u,t,s,c);return h.catch((function(t){return t})).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss;if(r.validatePromise===l){var e;r.validatePromise=null;var n=[],i=[];null===(e=t.forEach)||void 0===e||e.call(t,(function(t){var e=t.rule.warningOnly,r=t.errors,o=void 0===r?ss:r;e?i.push.apply(i,Sr(o)):n.push.apply(n,Sr(o))})),r.errors=n,r.warnings=i,r.triggerMetaEvent(),r.reRender()}})),h}));return s||(r.validatePromise=l,r.dirty=!0,r.errors=ss,r.warnings=ss,r.triggerMetaEvent(),r.reRender()),l},r.isFieldValidating=function(){return!!r.validatePromise},r.isFieldTouched=function(){return r.touched},r.isFieldDirty=function(){return!(!r.dirty&&void 0===r.props.initialValue)||void 0!==(0,r.props.fieldContext.getInternalHooks(ia).getInitialValue)(r.getNamePath())},r.getErrors=function(){return r.errors},r.getWarnings=function(){return r.warnings},r.isListField=function(){return r.props.isListField},r.isList=function(){return r.props.isList},r.isPreserve=function(){return r.props.preserve},r.getMeta=function(){return r.prevValidating=r.isFieldValidating(),{touched:r.isFieldTouched(),validating:r.prevValidating,errors:r.errors,warnings:r.warnings,name:r.getNamePath(),validated:null===r.validatePromise}},r.getOnlyChild=function(t){if("function"===typeof t){var e=r.getMeta();return Or(Or({},r.getOnlyChild(t(r.getControlled(),e,r.props.fieldContext))),{},{isFunction:!0})}var n=ra(t);return 1===n.length&&m.isValidElement(n[0])?{child:n[0],isFunction:!1}:{child:n,isFunction:!1}},r.getValue=function(t){var e=r.props.fieldContext.getFieldsValue,n=r.getNamePath();return Fa(t||e(!0),n)},r.getControlled=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=r.props,n=e.trigger,i=e.validateTrigger,o=e.getValueFromEvent,a=e.normalize,s=e.valuePropName,l=e.getValueProps,c=e.fieldContext,u=void 0!==i?i:c.validateTrigger,h=r.getNamePath(),p=c.getInternalHooks,d=c.getFieldsValue,f=p(ia).dispatch,g=r.getValue(),m=l||function(t){return Ir({},s,t)},y=t[n],v=Or(Or({},t),m(g));return v[n]=function(){var t;r.touched=!0,r.dirty=!0,r.triggerMetaEvent();for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t=o?o.apply(void 0,n):Za.apply(void 0,[s].concat(n)),a&&(t=a(t,g,d(!0))),f({type:"updateValue",namePath:h,value:t}),y&&y.apply(void 0,n)},la(u||[]).forEach((function(t){var e=v[t];v[t]=function(){e&&e.apply(void 0,arguments);var n=r.props.rules;n&&n.length&&f({type:"validateField",namePath:h,triggerName:t})}})),v},t.fieldContext)&&(0,(0,t.fieldContext.getInternalHooks)(ia).initEntityValue)(Ko(r));return r}return ai(n,[{key:"componentDidMount",value:function(){var t=this.props,e=t.shouldUpdate,n=t.fieldContext;if(this.mounted=!0,n){var r=(0,n.getInternalHooks)(ia).registerField;this.cancelRegisterFunc=r(this)}!0===e&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var t,e=this.state.resetCount,n=this.props.children,r=this.getOnlyChild(n),i=r.child;return r.isFunction?t=i:m.isValidElement(i)?t=m.cloneElement(i,this.getControlled(i.props)):(ni(!i,"`children` of Field is not validate ReactElement."),t=i),m.createElement(m.Fragment,{key:e},t)}}]),n}(m.Component);cs.contextType=aa,cs.defaultProps={trigger:"onChange",valuePropName:"value"};var us=function(t){var e=t.name,n=Zo(t,as),r=m.useContext(aa),i=m.useContext(sa),o=void 0!==e?Va(e):void 0,a="keep";return n.isListField||(a="_".concat((o||[]).join("_"))),m.createElement(cs,Ui({key:a,name:o,isListField:!!i},n,{fieldContext:r}))},hs=function(t){var e=t.name,n=t.initialValue,r=t.children,i=t.rules,o=t.validateTrigger,a=t.isListField,s=m.useContext(aa),l=m.useContext(sa),c=m.useRef({keys:[],id:0}).current,u=m.useMemo((function(){var t=Va(s.prefixName)||[];return[].concat(Sr(t),Sr(Va(e)))}),[s.prefixName,e]),h=m.useMemo((function(){return Or(Or({},s),{},{prefixName:u})}),[s,u]),p=m.useMemo((function(){return{getKey:function(t){var e=u.length,n=t[e];return[c.keys[n],t.slice(e+1)]}}}),[u]);if("function"!==typeof r)return ni(!1,"Form.List only accepts function as children."),null;return m.createElement(sa.Provider,{value:p},m.createElement(aa.Provider,{value:h},m.createElement(us,{name:[],shouldUpdate:function(t,e,n){return"internal"!==n.source&&t!==e},rules:i,validateTrigger:o,initialValue:n,isList:!0,isListField:null!==a&&void 0!==a?a:!!l},(function(t,e){var n=t.value,i=void 0===n?[]:n,o=t.onChange,a=s.getFieldValue,l=function(){return a(u||[])||[]},h={add:function(t,e){var n=l();e>=0&&e<=n.length?(c.keys=[].concat(Sr(c.keys.slice(0,e)),[c.id],Sr(c.keys.slice(e))),o([].concat(Sr(n.slice(0,e)),[t],Sr(n.slice(e))))):(c.keys=[].concat(Sr(c.keys),[c.id]),o([].concat(Sr(n),[t]))),c.id+=1},remove:function(t){var e=l(),n=new Set(Array.isArray(t)?t:[t]);n.size<=0||(c.keys=c.keys.filter((function(t,e){return!n.has(e)})),o(e.filter((function(t,e){return!n.has(e)}))))},move:function(t,e){if(t!==e){var n=l();t<0||t>=n.length||e<0||e>=n.length||(c.keys=Ka(c.keys,t,e),o(Ka(n,t,e)))}}},p=i||[];return Array.isArray(p)||(p=[]),r(p.map((function(t,e){var n=c.keys[e];return void 0===n&&(c.keys[e]=c.id,n=c.keys[e],c.id+=1),{name:e,key:n,isListField:!0}})),h,e)}))))};var ps="__@field_split__";function ds(t){return t.map((function(t){return"".concat(Cr(t),":").concat(t)})).join(ps)}var fs=function(){function t(){ii(this,t),this.kvs=new Map}return ai(t,[{key:"set",value:function(t,e){this.kvs.set(ds(t),e)}},{key:"get",value:function(t){return this.kvs.get(ds(t))}},{key:"update",value:function(t,e){var n=e(this.get(t));n?this.set(t,n):this.delete(t)}},{key:"delete",value:function(t){this.kvs.delete(ds(t))}},{key:"map",value:function(t){return Sr(this.kvs.entries()).map((function(e){var n=Ri(e,2),r=n[0],i=n[1],o=r.split(ps);return t({key:o.map((function(t){var e=Ri(t.match(/^([^:]*):(.*)$/),3),n=e[1],r=e[2];return"number"===n?Number(r):r})),value:i})}))}},{key:"toJSON",value:function(){var t={};return this.map((function(e){var n=e.key,r=e.value;return t[n.join(".")]=r,null})),t}}]),t}(),gs=fs,ms=["name"],ys=ai((function t(e){var n=this;ii(this,t),this.formHooked=!1,this.forceRootUpdate=void 0,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldWarning:n.getFieldWarning,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldValue:n.setFieldValue,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,_init:!0,getInternalHooks:n.getInternalHooks}},this.getInternalHooks=function(t){return t===ia?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,destroyForm:n.destroyForm,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve,getInitialValue:n.getInitialValue,registerWatch:n.registerWatch}):(ni(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(t){n.subscribable=t},this.prevWithoutPreserves=null,this.setInitialValues=function(t,e){if(n.initialValues=t||{},e){var r,i=qa({},t,n.store);null===(r=n.prevWithoutPreserves)||void 0===r||r.map((function(e){var n=e.key;i=$a(i,n,Fa(t,n))})),n.prevWithoutPreserves=null,n.updateStore(i)}},this.destroyForm=function(){var t=new gs;n.getFieldEntities(!0).forEach((function(e){n.isMergedPreserve(e.isPreserve())||t.set(e.getNamePath(),!0)})),n.prevWithoutPreserves=t},this.getInitialValue=function(t){var e=Fa(n.initialValues,t);return t.length?Ua(e):e},this.setCallbacks=function(t){n.callbacks=t},this.setValidateMessages=function(t){n.validateMessages=t},this.setPreserve=function(t){n.preserve=t},this.watchList=[],this.registerWatch=function(t){return n.watchList.push(t),function(){n.watchList=n.watchList.filter((function(e){return e!==t}))}},this.notifyWatch=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(n.watchList.length){var e=n.getFieldsValue(),r=n.getFieldsValue(!0);n.watchList.forEach((function(n){n(e,r,t)}))}},this.timeoutId=null,this.warningUnhooked=function(){0},this.updateStore=function(t){n.store=t},this.getFieldEntities=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?n.fieldEntities.filter((function(t){return t.getNamePath().length})):n.fieldEntities},this.getFieldsMap=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=new gs;return n.getFieldEntities(t).forEach((function(t){var n=t.getNamePath();e.set(n,t)})),e},this.getFieldEntitiesForNamePathList=function(t){if(!t)return n.getFieldEntities(!0);var e=n.getFieldsMap(!0);return t.map((function(t){var n=Va(t);return e.get(n)||{INVALIDATE_NAME_PATH:Va(t)}}))},this.getFieldsValue=function(t,e){if(n.warningUnhooked(),!0===t&&!e)return n.store;var r=n.getFieldEntitiesForNamePathList(Array.isArray(t)?t:null),i=[];return r.forEach((function(n){var r,o="INVALIDATE_NAME_PATH"in n?n.INVALIDATE_NAME_PATH:n.getNamePath();if(t||!(null===(r=n.isListField)||void 0===r?void 0:r.call(n)))if(e){var a="getMeta"in n?n.getMeta():null;e(a)&&i.push(o)}else i.push(o)})),Ha(n.store,i.map(Va))},this.getFieldValue=function(t){n.warningUnhooked();var e=Va(t);return Fa(n.store,e)},this.getFieldsError=function(t){return n.warningUnhooked(),n.getFieldEntitiesForNamePathList(t).map((function(e,n){return e&&!("INVALIDATE_NAME_PATH"in e)?{name:e.getNamePath(),errors:e.getErrors(),warnings:e.getWarnings()}:{name:Va(t[n]),errors:[],warnings:[]}}))},this.getFieldError=function(t){n.warningUnhooked();var e=Va(t);return n.getFieldsError([e])[0].errors},this.getFieldWarning=function(t){n.warningUnhooked();var e=Va(t);return n.getFieldsError([e])[0].warnings},this.isFieldsTouched=function(){n.warningUnhooked();for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i,o=e[0],a=e[1],s=!1;0===e.length?i=null:1===e.length?Array.isArray(o)?(i=o.map(Va),s=!1):(i=null,s=o):(i=o.map(Va),s=a);var l=n.getFieldEntities(!0),c=function(t){return t.isFieldTouched()};if(!i)return s?l.every(c):l.some(c);var u=new gs;i.forEach((function(t){u.set(t,[])})),l.forEach((function(t){var e=t.getNamePath();i.forEach((function(n){n.every((function(t,n){return e[n]===t}))&&u.update(n,(function(e){return[].concat(Sr(e),[t])}))}))}));var h=function(t){return t.some(c)},p=u.map((function(t){return t.value}));return s?p.every(h):p.some(h)},this.isFieldTouched=function(t){return n.warningUnhooked(),n.isFieldsTouched([t])},this.isFieldsValidating=function(t){n.warningUnhooked();var e=n.getFieldEntities();if(!t)return e.some((function(t){return t.isFieldValidating()}));var r=t.map(Va);return e.some((function(t){var e=t.getNamePath();return Ga(r,e)&&t.isFieldValidating()}))},this.isFieldValidating=function(t){return n.warningUnhooked(),n.isFieldsValidating([t])},this.resetWithFieldInitialValue=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new gs,r=n.getFieldEntities(!0);r.forEach((function(t){var n=t.props.initialValue,r=t.getNamePath();if(void 0!==n){var i=e.get(r)||new Set;i.add({entity:t,value:n}),e.set(r,i)}}));var i;t.entities?i=t.entities:t.namePathList?(i=[],t.namePathList.forEach((function(t){var n,r=e.get(t);r&&(n=i).push.apply(n,Sr(Sr(r).map((function(t){return t.entity}))))}))):i=r,i.forEach((function(r){if(void 0!==r.props.initialValue){var i=r.getNamePath();if(void 0!==n.getInitialValue(i))ni(!1,"Form already set 'initialValues' with path '".concat(i.join("."),"'. Field can not overwrite it."));else{var o=e.get(i);if(o&&o.size>1)ni(!1,"Multiple Field with path '".concat(i.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(o){var a=n.getFieldValue(i);t.skipExist&&void 0!==a||n.updateStore($a(n.store,i,Sr(o)[0].value))}}}}))},this.resetFields=function(t){n.warningUnhooked();var e=n.store;if(!t)return n.updateStore(qa({},n.initialValues)),n.resetWithFieldInitialValue(),n.notifyObservers(e,null,{type:"reset"}),void n.notifyWatch();var r=t.map(Va);r.forEach((function(t){var e=n.getInitialValue(t);n.updateStore($a(n.store,t,e))})),n.resetWithFieldInitialValue({namePathList:r}),n.notifyObservers(e,r,{type:"reset"}),n.notifyWatch(r)},this.setFields=function(t){n.warningUnhooked();var e=n.store,r=[];t.forEach((function(t){var i=t.name,o=Zo(t,ms),a=Va(i);r.push(a),"value"in o&&n.updateStore($a(n.store,a,o.value)),n.notifyObservers(e,[a],{type:"setField",data:t})})),n.notifyWatch(r)},this.getFields=function(){var t=n.getFieldEntities(!0).map((function(t){var e=t.getNamePath(),r=Or(Or({},t.getMeta()),{},{name:e,value:n.getFieldValue(e)});return Object.defineProperty(r,"originRCField",{value:!0}),r}));return t},this.initEntityValue=function(t){var e=t.props.initialValue;if(void 0!==e){var r=t.getNamePath();void 0===Fa(n.store,r)&&n.updateStore($a(n.store,r,e))}},this.isMergedPreserve=function(t){var e=void 0!==t?t:n.preserve;return null===e||void 0===e||e},this.registerField=function(t){n.fieldEntities.push(t);var e=t.getNamePath();if(n.notifyWatch([e]),void 0!==t.props.initialValue){var r=n.store;n.resetWithFieldInitialValue({entities:[t],skipExist:!0}),n.notifyObservers(r,[t.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(r,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(n.fieldEntities=n.fieldEntities.filter((function(e){return e!==t})),!n.isMergedPreserve(i)&&(!r||o.length>1)){var a=r?void 0:n.getInitialValue(e);if(e.length&&n.getFieldValue(e)!==a&&n.fieldEntities.every((function(t){return!Ya(t.getNamePath(),e)}))){var s=n.store;n.updateStore($a(s,e,a,!0)),n.notifyObservers(s,[e],{type:"remove"}),n.triggerDependenciesUpdate(s,e)}}n.notifyWatch([e])}},this.dispatch=function(t){switch(t.type){case"updateValue":var e=t.namePath,r=t.value;n.updateValue(e,r);break;case"validateField":var i=t.namePath,o=t.triggerName;n.validateFields([i],{triggerName:o})}},this.notifyObservers=function(t,e,r){if(n.subscribable){var i=Or(Or({},r),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach((function(n){(0,n.onStoreChange)(t,e,i)}))}else n.forceRootUpdate()},this.triggerDependenciesUpdate=function(t,e){var r=n.getDependencyChildrenFields(e);return r.length&&n.validateFields(r),n.notifyObservers(t,r,{type:"dependenciesUpdate",relatedFields:[e].concat(Sr(r))}),r},this.updateValue=function(t,e){var r=Va(t),i=n.store;n.updateStore($a(n.store,r,e)),n.notifyObservers(i,[r],{type:"valueUpdate",source:"internal"}),n.notifyWatch([r]);var o=n.triggerDependenciesUpdate(i,r),a=n.callbacks.onValuesChange;a&&a(Ha(n.store,[r]),n.getFieldsValue());n.triggerOnFieldsChange([r].concat(Sr(o)))},this.setFieldsValue=function(t){n.warningUnhooked();var e=n.store;if(t){var r=qa(n.store,t);n.updateStore(r)}n.notifyObservers(e,null,{type:"valueUpdate",source:"external"}),n.notifyWatch()},this.setFieldValue=function(t,e){n.setFields([{name:t,value:e}])},this.getDependencyChildrenFields=function(t){var e=new Set,r=[],i=new gs;n.getFieldEntities().forEach((function(t){(t.props.dependencies||[]).forEach((function(e){var n=Va(e);i.update(n,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return e.add(t),e}))}))}));return function t(n){(i.get(n)||new Set).forEach((function(n){if(!e.has(n)){e.add(n);var i=n.getNamePath();n.isFieldDirty()&&i.length&&(r.push(i),t(i))}}))}(t),r},this.triggerOnFieldsChange=function(t,e){var r=n.callbacks.onFieldsChange;if(r){var i=n.getFields();if(e){var o=new gs;e.forEach((function(t){var e=t.name,n=t.errors;o.set(e,n)})),i.forEach((function(t){t.errors=o.get(t.name)||t.errors}))}r(i.filter((function(e){var n=e.name;return Ga(t,n)})),i)}},this.validateFields=function(t,e){var r,i;n.warningUnhooked(),Array.isArray(t)||"string"===typeof t||"string"===typeof e?(r=t,i=e):i=t;var o=!!r,a=o?r.map(Va):[],s=[];n.getFieldEntities(!0).forEach((function(t){var e;if(o||a.push(t.getNamePath()),(null===(e=i)||void 0===e?void 0:e.recursive)&&o){var l=t.getNamePath();l.every((function(t,e){return r[e]===t||void 0===r[e]}))&&a.push(l)}if(t.props.rules&&t.props.rules.length){var c=t.getNamePath();if(!o||Ga(a,c)){var u=t.validateRules(Or({validateMessages:Or(Or({},Na),n.validateMessages)},i));s.push(u.then((function(){return{name:c,errors:[],warnings:[]}})).catch((function(t){var e,n=[],r=[];return null===(e=t.forEach)||void 0===e||e.call(t,(function(t){var e=t.rule.warningOnly,i=t.errors;e?r.push.apply(r,Sr(i)):n.push.apply(n,Sr(i))})),n.length?Promise.reject({name:c,errors:n,warnings:r}):{name:c,errors:n,warnings:r}})))}}}));var l=function(t){var e=!1,n=t.length,r=[];return t.length?new Promise((function(i,o){t.forEach((function(t,a){t.catch((function(t){return e=!0,t})).then((function(t){n-=1,r[a]=t,n>0||(e&&o(r),i(r))}))}))})):Promise.resolve([])}(s);n.lastValidatePromise=l,l.catch((function(t){return t})).then((function(t){var e=t.map((function(t){return t.name}));n.notifyObservers(n.store,e,{type:"validateFinish"}),n.triggerOnFieldsChange(e,t)}));var c=l.then((function(){return n.lastValidatePromise===l?Promise.resolve(n.getFieldsValue(a)):Promise.reject([])})).catch((function(t){var e=t.filter((function(t){return t&&t.errors.length}));return Promise.reject({values:n.getFieldsValue(a),errorFields:e,outOfDate:n.lastValidatePromise!==l})}));return c.catch((function(t){return t})),n.triggerOnFieldsChange(a),c},this.submit=function(){n.warningUnhooked(),n.validateFields().then((function(t){var e=n.callbacks.onFinish;if(e)try{e(t)}catch(r){console.error(r)}})).catch((function(t){var e=n.callbacks.onFinishFailed;e&&e(t)}))},this.forceRootUpdate=e}));var vs=function(t){var e=m.useRef(),n=Ri(m.useState({}),2)[1];if(!e.current)if(t)e.current=t;else{var r=new ys((function(){n({})}));e.current=r.getForm()}return[e.current]},xs=m.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),_s=function(t){var e=t.validateMessages,n=t.onFormChange,r=t.onFormFinish,i=t.children,o=m.useContext(xs),a=m.useRef({});return m.createElement(xs.Provider,{value:Or(Or({},o),{},{validateMessages:Or(Or({},o.validateMessages),e),triggerFormChange:function(t,e){n&&n(t,{changedFields:e,forms:a.current}),o.triggerFormChange(t,e)},triggerFormFinish:function(t,e){r&&r(t,{values:e,forms:a.current}),o.triggerFormFinish(t,e)},registerForm:function(t,e){t&&(a.current=Or(Or({},a.current),{},Ir({},t,e))),o.registerForm(t,e)},unregisterForm:function(t){var e=Or({},a.current);delete e[t],a.current=e,o.unregisterForm(t)}})},i)},bs=xs,ws=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],Ss=function(t,e){var n=t.name,r=t.initialValues,i=t.fields,o=t.form,a=t.preserve,s=t.children,l=t.component,c=void 0===l?"form":l,u=t.validateMessages,h=t.validateTrigger,p=void 0===h?"onChange":h,d=t.onValuesChange,f=t.onFieldsChange,g=t.onFinish,y=t.onFinishFailed,v=Zo(t,ws),x=m.useContext(bs),_=Ri(vs(o),1)[0],b=_.getInternalHooks(ia),w=b.useSubscribe,S=b.setInitialValues,C=b.setCallbacks,E=b.setValidateMessages,k=b.setPreserve,M=b.destroyForm;m.useImperativeHandle(e,(function(){return _})),m.useEffect((function(){return x.registerForm(n,_),function(){x.unregisterForm(n)}}),[x,_,n]),E(Or(Or({},x.validateMessages),u)),C({onValuesChange:d,onFieldsChange:function(t){if(x.triggerFormChange(n,t),f){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];f.apply(void 0,[t].concat(r))}},onFinish:function(t){x.triggerFormFinish(n,t),g&&g(t)},onFinishFailed:y}),k(a);var T,I=m.useRef(null);S(r,!I.current),I.current||(I.current=!0),m.useEffect((function(){return M}),[]);var P="function"===typeof s;P?T=s(_.getFieldsValue(!0),_):T=s;w(!P);var O=m.useRef();m.useEffect((function(){(function(t,e){if(t===e)return!0;if(!t&&e||t&&!e)return!1;if(!t||!e||"object"!==Cr(t)||"object"!==Cr(e))return!1;var n=Object.keys(t),r=Object.keys(e);return Sr(new Set([].concat(n,r))).every((function(n){var r=t[n],i=e[n];return"function"===typeof r&&"function"===typeof i||r===i}))})(O.current||[],i||[])||_.setFields(i||[]),O.current=i}),[i,_]);var A=m.useMemo((function(){return Or(Or({},_),{},{validateTrigger:p})}),[_,p]),D=m.createElement(aa.Provider,{value:A},T);return!1===c?D:m.createElement(c,Ui({},v,{onSubmit:function(t){t.preventDefault(),t.stopPropagation(),_.submit()},onReset:function(t){var e;t.preventDefault(),_.resetFields(),null===(e=v.onReset)||void 0===e||e.call(v,t)}}),D)};function Cs(t){try{return JSON.stringify(t)}catch(e){return Math.random()}}var Es=function(){};var ks=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],i=void 0===r?[]:r,o=e[1],a=void 0===o?{}:o,s=function(t){return t&&!!t._init}(a)?{form:a}:a,l=s.form,c=Ri((0,m.useState)(),2),u=c[0],h=c[1],p=(0,m.useMemo)((function(){return Cs(u)}),[u]),d=(0,m.useRef)(p);d.current=p;var f=(0,m.useContext)(aa),g=l||f,y=g&&g._init,v=Va(i),x=(0,m.useRef)(v);return x.current=v,Es(v),(0,m.useEffect)((function(){if(y){var t=g.getFieldsValue,e=(0,(0,g.getInternalHooks)(ia).registerWatch)((function(t,e){var n=Fa(s.preserve?e:t,x.current),r=Cs(n);d.current!==r&&(d.current=r,h(n))})),n=Fa(s.preserve?t(!0):t(),x.current);return h(n),e}}),[y]),u},Ms=m.forwardRef(Ss);Ms.FormProvider=_s,Ms.Field=us,Ms.List=hs,Ms.useForm=vs,Ms.useWatch=ks;var Ts=Ms,Is={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},Ps={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};var Os={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};var As={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},Ps),timePickerLocale:Object.assign({},Os)};const Ds="${label} is not a valid ${type}";var Rs={locale:"en",Pagination:Is,DatePicker:As,TimePicker:Os,Calendar:As,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:Ds,method:Ds,array:Ds,object:Ds,number:Ds,date:Ds,boolean:Ds,integer:Ds,float:Ds,regexp:Ds,email:Ds,url:Ds,hex:Ds},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh"},ColorPicker:{presetEmpty:"Empty"}};let Ls=Object.assign({},Rs.Modal);function Ns(t){Ls=t?Object.assign(Object.assign({},Ls),t):Object.assign({},Rs.Modal)}function Fs(){return Ls}var zs=(0,m.createContext)(void 0);var Bs=t=>{const{locale:e={},children:n,_ANT_MARK__:r}=t;m.useEffect((()=>(Ns(e&&e.Modal),()=>{Ns()})),[e]);const i=m.useMemo((()=>Object.assign(Object.assign({},e),{exist:!0})),[e]);return m.createElement(zs.Provider,{value:i},n)},$s="5.5.0";function js(t,e){(function(t){return"string"===typeof t&&-1!==t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var n=function(t){return"string"===typeof t&&-1!==t.indexOf("%")}(t);return t=360===e?t:Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:t=360===e?(t<0?t%e+e:t%e)/parseFloat(String(e)):t%e/parseFloat(String(e))}function Us(t){return Math.min(1,Math.max(0,t))}function Vs(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function Hs(t){return t<=1?"".concat(100*Number(t),"%"):t}function Gs(t){return 1===t.length?"0"+t:String(t)}function Ws(t,e,n){t=js(t,255),e=js(e,255),n=js(n,255);var r=Math.max(t,e,n),i=Math.min(t,e,n),o=0,a=0,s=(r+i)/2;if(r===i)a=0,o=0;else{var l=r-i;switch(a=s>.5?l/(2-r-i):l/(r+i),r){case t:o=(e-n)/l+(e<n?6:0);break;case e:o=(n-t)/l+2;break;case n:o=(t-e)/l+4}o/=6}return{h:o,s:a,l:s}}function Xs(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*n*(e-t):n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function qs(t,e,n){t=js(t,255),e=js(e,255),n=js(n,255);var r=Math.max(t,e,n),i=Math.min(t,e,n),o=0,a=r,s=r-i,l=0===r?0:s/r;if(r===i)o=0;else{switch(r){case t:o=(e-n)/s+(e<n?6:0);break;case e:o=(n-t)/s+2;break;case n:o=(t-e)/s+4}o/=6}return{h:o,s:l,v:a}}function Ys(t,e,n,r){var i=[Gs(Math.round(t).toString(16)),Gs(Math.round(e).toString(16)),Gs(Math.round(n).toString(16))];return r&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function Zs(t){return Math.round(255*parseFloat(t)).toString(16)}function Ks(t){return Js(t)/255}function Js(t){return parseInt(t,16)}var Qs={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function tl(t){var e={r:0,g:0,b:0},n=1,r=null,i=null,o=null,a=!1,s=!1;return"string"===typeof t&&(t=function(t){if(t=t.trim().toLowerCase(),0===t.length)return!1;var e=!1;if(Qs[t])t=Qs[t],e=!0;else if("transparent"===t)return{r:0,g:0,b:0,a:0,format:"name"};var n=il.rgb.exec(t);if(n)return{r:n[1],g:n[2],b:n[3]};if(n=il.rgba.exec(t),n)return{r:n[1],g:n[2],b:n[3],a:n[4]};if(n=il.hsl.exec(t),n)return{h:n[1],s:n[2],l:n[3]};if(n=il.hsla.exec(t),n)return{h:n[1],s:n[2],l:n[3],a:n[4]};if(n=il.hsv.exec(t),n)return{h:n[1],s:n[2],v:n[3]};if(n=il.hsva.exec(t),n)return{h:n[1],s:n[2],v:n[3],a:n[4]};if(n=il.hex8.exec(t),n)return{r:Js(n[1]),g:Js(n[2]),b:Js(n[3]),a:Ks(n[4]),format:e?"name":"hex8"};if(n=il.hex6.exec(t),n)return{r:Js(n[1]),g:Js(n[2]),b:Js(n[3]),format:e?"name":"hex"};if(n=il.hex4.exec(t),n)return{r:Js(n[1]+n[1]),g:Js(n[2]+n[2]),b:Js(n[3]+n[3]),a:Ks(n[4]+n[4]),format:e?"name":"hex8"};if(n=il.hex3.exec(t),n)return{r:Js(n[1]+n[1]),g:Js(n[2]+n[2]),b:Js(n[3]+n[3]),format:e?"name":"hex"};return!1}(t)),"object"===typeof t&&(ol(t.r)&&ol(t.g)&&ol(t.b)?(e=function(t,e,n){return{r:255*js(t,255),g:255*js(e,255),b:255*js(n,255)}}(t.r,t.g,t.b),a=!0,s="%"===String(t.r).substr(-1)?"prgb":"rgb"):ol(t.h)&&ol(t.s)&&ol(t.v)?(r=Hs(t.s),i=Hs(t.v),e=function(t,e,n){t=6*js(t,360),e=js(e,100),n=js(n,100);var r=Math.floor(t),i=t-r,o=n*(1-e),a=n*(1-i*e),s=n*(1-(1-i)*e),l=r%6;return{r:255*[n,a,o,o,s,n][l],g:255*[s,n,n,a,o,o][l],b:255*[o,o,s,n,n,a][l]}}(t.h,r,i),a=!0,s="hsv"):ol(t.h)&&ol(t.s)&&ol(t.l)&&(r=Hs(t.s),o=Hs(t.l),e=function(t,e,n){var r,i,o;if(t=js(t,360),e=js(e,100),n=js(n,100),0===e)i=n,o=n,r=n;else{var a=n<.5?n*(1+e):n+e-n*e,s=2*n-a;r=Xs(s,a,t+1/3),i=Xs(s,a,t),o=Xs(s,a,t-1/3)}return{r:255*r,g:255*i,b:255*o}}(t.h,r,o),a=!0,s="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(n=t.a)),n=Vs(n),{ok:a,format:t.format||s,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}var el="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),nl="[\\s|\\(]+(".concat(el,")[,|\\s]+(").concat(el,")[,|\\s]+(").concat(el,")\\s*\\)?"),rl="[\\s|\\(]+(".concat(el,")[,|\\s]+(").concat(el,")[,|\\s]+(").concat(el,")[,|\\s]+(").concat(el,")\\s*\\)?"),il={CSS_UNIT:new RegExp(el),rgb:new RegExp("rgb"+nl),rgba:new RegExp("rgba"+rl),hsl:new RegExp("hsl"+nl),hsla:new RegExp("hsla"+rl),hsv:new RegExp("hsv"+nl),hsva:new RegExp("hsva"+rl),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function ol(t){return Boolean(il.CSS_UNIT.exec(String(t)))}var al=2,sl=.16,ll=.05,cl=.05,ul=.15,hl=5,pl=4,dl=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function fl(t){var e=qs(t.r,t.g,t.b);return{h:360*e.h,s:e.s,v:e.v}}function gl(t){var e=t.r,n=t.g,r=t.b;return"#".concat(Ys(e,n,r,!1))}function ml(t,e,n){var r;return(r=Math.round(t.h)>=60&&Math.round(t.h)<=240?n?Math.round(t.h)-al*e:Math.round(t.h)+al*e:n?Math.round(t.h)+al*e:Math.round(t.h)-al*e)<0?r+=360:r>=360&&(r-=360),r}function yl(t,e,n){return 0===t.h&&0===t.s?t.s:((r=n?t.s-sl*e:e===pl?t.s+sl:t.s+ll*e)>1&&(r=1),n&&e===hl&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function vl(t,e,n){var r;return(r=n?t.v+cl*e:t.v-ul*e)>1&&(r=1),Number(r.toFixed(2))}function xl(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=tl(t),i=hl;i>0;i-=1){var o=fl(r),a=gl(tl({h:ml(o,i,!0),s:yl(o,i,!0),v:vl(o,i,!0)}));n.push(a)}n.push(gl(r));for(var s=1;s<=pl;s+=1){var l=fl(r),c=gl(tl({h:ml(l,s),s:yl(l,s),v:vl(l,s)}));n.push(c)}return"dark"===e.theme?dl.map((function(t){var r=t.index,i=t.opacity,o=gl(function(t,e,n){var r=n/100;return{r:(e.r-t.r)*r+t.r,g:(e.g-t.g)*r+t.g,b:(e.b-t.b)*r+t.b}}(tl(e.backgroundColor||"#141414"),tl(n[r]),100*i));return o})):n}var _l={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},bl={},wl={};Object.keys(_l).forEach((function(t){bl[t]=xl(_l[t]),bl[t].primary=bl[t][5],wl[t]=xl(_l[t],{theme:"dark",backgroundColor:"#141414"}),wl[t].primary=wl[t][5]}));bl.red,bl.volcano,bl.gold,bl.orange,bl.yellow,bl.lime,bl.green,bl.cyan;var Sl=bl.blue;bl.geekblue,bl.purple,bl.magenta,bl.grey,bl.grey;var Cl=t=>{const{controlHeight:e}=t;return{controlHeightSM:.75*e,controlHeightXS:.5*e,controlHeightLG:1.25*e}};const El={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"};var kl=Object.assign(Object.assign({},El),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorTextBase:"",colorBgBase:"",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,\n'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',\n'Noto Color Emoji'",fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}),Ml=function(){function t(e,n){var r;if(void 0===e&&(e=""),void 0===n&&(n={}),e instanceof t)return e;"number"===typeof e&&(e=function(t){return{r:t>>16,g:(65280&t)>>8,b:255&t}}(e)),this.originalInput=e;var i=tl(e);this.originalInput=e,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(r=n.format)&&void 0!==r?r:i.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},t.prototype.getLuminance=function(){var t=this.toRgb(),e=t.r/255,n=t.g/255,r=t.b/255;return.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(t){return this.a=Vs(t),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){return 0===this.toHsl().s},t.prototype.toHsv=function(){var t=qs(this.r,this.g,this.b);return{h:360*t.h,s:t.s,v:t.v,a:this.a}},t.prototype.toHsvString=function(){var t=qs(this.r,this.g,this.b),e=Math.round(360*t.h),n=Math.round(100*t.s),r=Math.round(100*t.v);return 1===this.a?"hsv(".concat(e,", ").concat(n,"%, ").concat(r,"%)"):"hsva(".concat(e,", ").concat(n,"%, ").concat(r,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var t=Ws(this.r,this.g,this.b);return{h:360*t.h,s:t.s,l:t.l,a:this.a}},t.prototype.toHslString=function(){var t=Ws(this.r,this.g,this.b),e=Math.round(360*t.h),n=Math.round(100*t.s),r=Math.round(100*t.l);return 1===this.a?"hsl(".concat(e,", ").concat(n,"%, ").concat(r,"%)"):"hsla(".concat(e,", ").concat(n,"%, ").concat(r,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(t){return void 0===t&&(t=!1),Ys(this.r,this.g,this.b,t)},t.prototype.toHexString=function(t){return void 0===t&&(t=!1),"#"+this.toHex(t)},t.prototype.toHex8=function(t){return void 0===t&&(t=!1),function(t,e,n,r,i){var o=[Gs(Math.round(t).toString(16)),Gs(Math.round(e).toString(16)),Gs(Math.round(n).toString(16)),Gs(Zs(r))];return i&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))&&o[3].startsWith(o[3].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this.r,this.g,this.b,this.a,t)},t.prototype.toHex8String=function(t){return void 0===t&&(t=!1),"#"+this.toHex8(t)},t.prototype.toHexShortString=function(t){return void 0===t&&(t=!1),1===this.a?this.toHexString(t):this.toHex8String(t)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var t=Math.round(this.r),e=Math.round(this.g),n=Math.round(this.b);return 1===this.a?"rgb(".concat(t,", ").concat(e,", ").concat(n,")"):"rgba(".concat(t,", ").concat(e,", ").concat(n,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var t=function(t){return"".concat(Math.round(100*js(t,255)),"%")};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var t=function(t){return Math.round(100*js(t,255))};return 1===this.a?"rgb(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%)"):"rgba(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var t="#"+Ys(this.r,this.g,this.b,!1),e=0,n=Object.entries(Qs);e<n.length;e++){var r=n[e],i=r[0];if(t===r[1])return i}return!1},t.prototype.toString=function(t){var e=Boolean(t);t=null!==t&&void 0!==t?t:this.format;var n=!1,r=this.a<1&&this.a>=0;return e||!r||!t.startsWith("hex")&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this.a?this.toName():this.toRgbString()},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(e){void 0===e&&(e=10);var n=this.toHsl();return n.l+=e/100,n.l=Us(n.l),new t(n)},t.prototype.brighten=function(e){void 0===e&&(e=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-e/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-e/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-e/100*255))),new t(n)},t.prototype.darken=function(e){void 0===e&&(e=10);var n=this.toHsl();return n.l-=e/100,n.l=Us(n.l),new t(n)},t.prototype.tint=function(t){return void 0===t&&(t=10),this.mix("white",t)},t.prototype.shade=function(t){return void 0===t&&(t=10),this.mix("black",t)},t.prototype.desaturate=function(e){void 0===e&&(e=10);var n=this.toHsl();return n.s-=e/100,n.s=Us(n.s),new t(n)},t.prototype.saturate=function(e){void 0===e&&(e=10);var n=this.toHsl();return n.s+=e/100,n.s=Us(n.s),new t(n)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(e){var n=this.toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,new t(n)},t.prototype.mix=function(e,n){void 0===n&&(n=50);var r=this.toRgb(),i=new t(e).toRgb(),o=n/100;return new t({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},t.prototype.analogous=function(e,n){void 0===e&&(e=6),void 0===n&&(n=30);var r=this.toHsl(),i=360/n,o=[this];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,o.push(new t(r));return o},t.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new t(e)},t.prototype.monochromatic=function(e){void 0===e&&(e=6);for(var n=this.toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/e;e--;)a.push(new t({h:r,s:i,v:o})),o=(o+s)%1;return a},t.prototype.splitcomplement=function(){var e=this.toHsl(),n=e.h;return[this,new t({h:(n+72)%360,s:e.s,l:e.l}),new t({h:(n+216)%360,s:e.s,l:e.l})]},t.prototype.onBackground=function(e){var n=this.toRgb(),r=new t(e).toRgb(),i=n.a+r.a*(1-n.a);return new t({r:(n.r*n.a+r.r*r.a*(1-n.a))/i,g:(n.g*n.a+r.g*r.a*(1-n.a))/i,b:(n.b*n.a+r.b*r.a*(1-n.a))/i,a:i})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(e){for(var n=this.toHsl(),r=n.h,i=[this],o=360/e,a=1;a<e;a++)i.push(new t({h:(r+a*o)%360,s:n.s,l:n.l}));return i},t.prototype.equals=function(e){return this.toRgbString()===new t(e).toRgbString()},t}();function Tl(t,e){let{generateColorPalettes:n,generateNeutralColorPalettes:r}=e;const{colorSuccess:i,colorWarning:o,colorError:a,colorInfo:s,colorPrimary:l,colorBgBase:c,colorTextBase:u}=t,h=n(l),p=n(i),d=n(o),f=n(a),g=n(s),m=r(c,u);return Object.assign(Object.assign({},m),{colorPrimaryBg:h[1],colorPrimaryBgHover:h[2],colorPrimaryBorder:h[3],colorPrimaryBorderHover:h[4],colorPrimaryHover:h[5],colorPrimary:h[6],colorPrimaryActive:h[7],colorPrimaryTextHover:h[8],colorPrimaryText:h[9],colorPrimaryTextActive:h[10],colorSuccessBg:p[1],colorSuccessBgHover:p[2],colorSuccessBorder:p[3],colorSuccessBorderHover:p[4],colorSuccessHover:p[4],colorSuccess:p[6],colorSuccessActive:p[7],colorSuccessTextHover:p[8],colorSuccessText:p[9],colorSuccessTextActive:p[10],colorErrorBg:f[1],colorErrorBgHover:f[2],colorErrorBorder:f[3],colorErrorBorderHover:f[4],colorErrorHover:f[5],colorError:f[6],colorErrorActive:f[7],colorErrorTextHover:f[8],colorErrorText:f[9],colorErrorTextActive:f[10],colorWarningBg:d[1],colorWarningBgHover:d[2],colorWarningBorder:d[3],colorWarningBorderHover:d[4],colorWarningHover:d[4],colorWarning:d[6],colorWarningActive:d[7],colorWarningTextHover:d[8],colorWarningText:d[9],colorWarningTextActive:d[10],colorInfoBg:g[1],colorInfoBgHover:g[2],colorInfoBorder:g[3],colorInfoBorderHover:g[4],colorInfoHover:g[4],colorInfo:g[6],colorInfoActive:g[7],colorInfoTextHover:g[8],colorInfoText:g[9],colorInfoTextActive:g[10],colorBgMask:new Ml("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}var Il=t=>{let e=t,n=t,r=t,i=t;return t<6&&t>=5?e=t+1:t<16&&t>=6?e=t+2:t>=16&&(e=16),t<7&&t>=5?n=4:t<8&&t>=7?n=5:t<14&&t>=8?n=6:t<16&&t>=14?n=7:t>=16&&(n=8),t<6&&t>=2?r=1:t>=6&&(r=2),t>4&&t<8?i=4:t>=8&&(i=6),{borderRadius:t>16?16:t,borderRadiusXS:r,borderRadiusSM:n,borderRadiusLG:e,borderRadiusOuter:i}};const Pl=(t,e)=>new Ml(t).setAlpha(e).toRgbString(),Ol=(t,e)=>new Ml(t).darken(e).toHexString(),Al=t=>{const e=xl(t);return{1:e[0],2:e[1],3:e[2],4:e[3],5:e[4],6:e[5],7:e[6],8:e[4],9:e[5],10:e[6]}},Dl=(t,e)=>{const n=t||"#fff",r=e||"#000";return{colorBgBase:n,colorTextBase:r,colorText:Pl(r,.88),colorTextSecondary:Pl(r,.65),colorTextTertiary:Pl(r,.45),colorTextQuaternary:Pl(r,.25),colorFill:Pl(r,.15),colorFillSecondary:Pl(r,.06),colorFillTertiary:Pl(r,.04),colorFillQuaternary:Pl(r,.02),colorBgLayout:Ol(n,4),colorBgContainer:Ol(n,0),colorBgElevated:Ol(n,0),colorBgSpotlight:Pl(r,.85),colorBorder:Ol(n,15),colorBorderSecondary:Ol(n,6)}};var Rl=t=>{const e=function(t){const e=new Array(10).fill(null).map(((e,n)=>{const r=n-1,i=t*Math.pow(2.71828,r/5),o=n>1?Math.floor(i):Math.ceil(i);return 2*Math.floor(o/2)}));return e[1]=t,e.map((t=>({size:t,lineHeight:(t+8)/t})))}(t),n=e.map((t=>t.size)),r=e.map((t=>t.lineHeight));return{fontSizeSM:n[0],fontSize:n[1],fontSizeLG:n[2],fontSizeXL:n[3],fontSizeHeading1:n[6],fontSizeHeading2:n[5],fontSizeHeading3:n[4],fontSizeHeading4:n[3],fontSizeHeading5:n[2],lineHeight:r[1],lineHeightLG:r[2],lineHeightSM:r[0],lineHeightHeading1:r[6],lineHeightHeading2:r[5],lineHeightHeading3:r[4],lineHeightHeading4:r[3],lineHeightHeading5:r[2]}};function Ll(t){const e=Object.keys(El).map((e=>{const n=xl(t[e]);return new Array(10).fill(1).reduce(((t,r,i)=>(t[`${e}-${i+1}`]=n[i],t[`${e}${i+1}`]=n[i],t)),{})})).reduce(((t,e)=>t=Object.assign(Object.assign({},t),e)),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t),e),Tl(t,{generateColorPalettes:Al,generateNeutralColorPalettes:Dl})),Rl(t.fontSize)),function(t){const{sizeUnit:e,sizeStep:n}=t;return{sizeXXL:e*(n+8),sizeXL:e*(n+4),sizeLG:e*(n+2),sizeMD:e*(n+1),sizeMS:e*n,size:e*n,sizeSM:e*(n-1),sizeXS:e*(n-2),sizeXXS:e*(n-3)}}(t)),Cl(t)),function(t){const{motionUnit:e,motionBase:n,borderRadius:r,lineWidth:i}=t;return Object.assign({motionDurationFast:`${(n+e).toFixed(1)}s`,motionDurationMid:`${(n+2*e).toFixed(1)}s`,motionDurationSlow:`${(n+3*e).toFixed(1)}s`,lineWidthBold:i+1},Il(r))}(t))}function Nl(t){return t>=0&&t<=255}var Fl=function(t,e){const{r:n,g:r,b:i,a:o}=new Ml(t).toRgb();if(o<1)return t;const{r:a,g:s,b:l}=new Ml(e).toRgb();for(let c=.01;c<=1;c+=.01){const t=Math.round((n-a*(1-c))/c),e=Math.round((r-s*(1-c))/c),o=Math.round((i-l*(1-c))/c);if(Nl(t)&&Nl(e)&&Nl(o))return new Ml({r:t,g:e,b:o,a:Math.round(100*c)/100}).toRgbString()}return new Ml({r:n,g:r,b:i,a:1}).toRgbString()},zl=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function Bl(t){const{override:e}=t,n=zl(t,["override"]),r=Object.assign({},e);Object.keys(kl).forEach((t=>{delete r[t]}));const i=Object.assign(Object.assign({},n),r),o=1200,a=1600;if(!1===i.motion){const t="0s";i.motionDurationFast=t,i.motionDurationMid=t,i.motionDurationSlow=t}return Object.assign(Object.assign(Object.assign({},i),{colorLink:i.colorInfoText,colorLinkHover:i.colorInfoHover,colorLinkActive:i.colorInfoActive,colorFillContent:i.colorFillSecondary,colorFillContentHover:i.colorFill,colorFillAlter:i.colorFillQuaternary,colorBgContainerDisabled:i.colorFillTertiary,colorBorderBg:i.colorBgContainer,colorSplit:Fl(i.colorBorderSecondary,i.colorBgContainer),colorTextPlaceholder:i.colorTextQuaternary,colorTextDisabled:i.colorTextQuaternary,colorTextHeading:i.colorText,colorTextLabel:i.colorTextSecondary,colorTextDescription:i.colorTextTertiary,colorTextLightSolid:i.colorWhite,colorHighlight:i.colorError,colorBgTextHover:i.colorFillSecondary,colorBgTextActive:i.colorFill,colorIcon:i.colorTextTertiary,colorIconHover:i.colorText,colorErrorOutline:Fl(i.colorErrorBg,i.colorBgContainer),colorWarningOutline:Fl(i.colorWarningBg,i.colorBgContainer),fontSizeIcon:i.fontSizeSM,lineWidthFocus:4*i.lineWidth,lineWidth:i.lineWidth,controlOutlineWidth:2*i.lineWidth,controlInteractiveSize:i.controlHeight/2,controlItemBgHover:i.colorFillTertiary,controlItemBgActive:i.colorPrimaryBg,controlItemBgActiveHover:i.colorPrimaryBgHover,controlItemBgActiveDisabled:i.colorFill,controlTmpOutline:i.colorFillQuaternary,controlOutline:Fl(i.colorPrimaryBg,i.colorBgContainer),lineType:i.lineType,borderRadius:i.borderRadius,borderRadiusXS:i.borderRadiusXS,borderRadiusSM:i.borderRadiusSM,borderRadiusLG:i.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:i.sizeXXS,paddingXS:i.sizeXS,paddingSM:i.sizeSM,padding:i.size,paddingMD:i.sizeMD,paddingLG:i.sizeLG,paddingXL:i.sizeXL,paddingContentHorizontalLG:i.sizeLG,paddingContentVerticalLG:i.sizeMS,paddingContentHorizontal:i.sizeMS,paddingContentVertical:i.sizeSM,paddingContentHorizontalSM:i.size,paddingContentVerticalSM:i.sizeXS,marginXXS:i.sizeXXS,marginXS:i.sizeXS,marginSM:i.sizeSM,margin:i.size,marginMD:i.sizeMD,marginLG:i.sizeLG,marginXL:i.sizeXL,marginXXL:i.sizeXXL,boxShadow:"\n      0 6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowSecondary:"\n      0 6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowTertiary:"\n      0 1px 2px 0 rgba(0, 0, 0, 0.03),\n      0 1px 6px -1px rgba(0, 0, 0, 0.02),\n      0 2px 4px 0 rgba(0, 0, 0, 0.02)\n    ",screenXS:480,screenXSMin:480,screenXSMax:575,screenSM:576,screenSMMin:576,screenSMMax:767,screenMD:768,screenMDMin:768,screenMDMax:991,screenLG:992,screenLGMin:992,screenLGMax:1199,screenXL:o,screenXLMin:o,screenXLMax:1599,screenXXL:a,screenXXLMin:a,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`\n      0 1px 2px -2px ${new Ml("rgba(0, 0, 0, 0.16)").toRgbString()},\n      0 3px 6px 0 ${new Ml("rgba(0, 0, 0, 0.12)").toRgbString()},\n      0 5px 12px 4px ${new Ml("rgba(0, 0, 0, 0.09)").toRgbString()}\n    `,boxShadowDrawerRight:"\n      -6px 0 16px 0 rgba(0, 0, 0, 0.08),\n      -3px 0 6px -4px rgba(0, 0, 0, 0.12),\n      -9px 0 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowDrawerLeft:"\n      6px 0 16px 0 rgba(0, 0, 0, 0.08),\n      3px 0 6px -4px rgba(0, 0, 0, 0.12),\n      9px 0 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowDrawerUp:"\n      0 6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowDrawerDown:"\n      0 -6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 -3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 -9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),r)}const $l=Xo(Ll),jl={token:kl,hashed:!0},Ul=m.createContext(jl);function Vl(){const{token:t,hashed:e,theme:n,components:r}=m.useContext(Ul),i=`${$s}-${e||""}`,o=n||$l,[a,s]=ji(o,[kl,t],{salt:i,override:Object.assign({override:t},r),formatToken:Bl});return[o,a,e?s:""]}const Hl="anticon",Gl=m.createContext({getPrefixCls:(t,e)=>e||(t?`ant-${t}`:"ant"),iconPrefixCls:Hl}),{Consumer:Wl}=Gl,Xl=`-ant-${Date.now()}-${Math.random()}`;function ql(t,e){const n=function(t,e){const n={},r=(t,e)=>{let n=t.clone();return n=(null===e||void 0===e?void 0:e(n))||n,n.toRgbString()},i=(t,e)=>{const i=new Ml(t),o=xl(i.toRgbString());n[`${e}-color`]=r(i),n[`${e}-color-disabled`]=o[1],n[`${e}-color-hover`]=o[4],n[`${e}-color-active`]=o[6],n[`${e}-color-outline`]=i.clone().setAlpha(.2).toRgbString(),n[`${e}-color-deprecated-bg`]=o[0],n[`${e}-color-deprecated-border`]=o[2]};if(e.primaryColor){i(e.primaryColor,"primary");const t=new Ml(e.primaryColor),o=xl(t.toRgbString());o.forEach(((t,e)=>{n[`primary-${e+1}`]=t})),n["primary-color-deprecated-l-35"]=r(t,(t=>t.lighten(35))),n["primary-color-deprecated-l-20"]=r(t,(t=>t.lighten(20))),n["primary-color-deprecated-t-20"]=r(t,(t=>t.tint(20))),n["primary-color-deprecated-t-50"]=r(t,(t=>t.tint(50))),n["primary-color-deprecated-f-12"]=r(t,(t=>t.setAlpha(.12*t.getAlpha())));const a=new Ml(o[0]);n["primary-color-active-deprecated-f-30"]=r(a,(t=>t.setAlpha(.3*t.getAlpha()))),n["primary-color-active-deprecated-d-02"]=r(a,(t=>t.darken(2)))}return e.successColor&&i(e.successColor,"success"),e.warningColor&&i(e.warningColor,"warning"),e.errorColor&&i(e.errorColor,"error"),e.infoColor&&i(e.infoColor,"info"),`\n  :root {\n    ${Object.keys(n).map((e=>`--${t}-${e}: ${n[e]};`)).join("\n")}\n  }\n  `.trim()}(t,e);gi()&&ki(n,`${Xl}-dynamic-theme`)}const Yl=m.createContext(!1),Zl=t=>{let{children:e,disabled:n}=t;const r=m.useContext(Yl);return m.createElement(Yl.Provider,{value:null!==n&&void 0!==n?n:r},e)};var Kl=Yl;var Jl=t=>{const e=m.useContext(ec);return m.useMemo((()=>t?"string"===typeof t?null!==t&&void 0!==t?t:e:t instanceof Function?t(e):e:e),[t,e])};const Ql=m.createContext(void 0),tc=t=>{let{children:e,size:n}=t;const r=Jl(n);return m.createElement(Ql.Provider,{value:r},e)};var ec=Ql;var nc=function(){return{componentDisabled:(0,m.useContext)(Kl),componentSize:(0,m.useContext)(ec)}};var rc=n(1694),ic=n.n(rc);function oc(t){return t instanceof HTMLElement||t instanceof SVGElement}function ac(t){return oc(t)?t:t instanceof m.Component?Dr.findDOMNode(t):null}function sc(t,e){"function"===typeof t?t(e):"object"===Cr(t)&&t&&"current"in t&&(t.current=e)}function lc(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.filter((function(t){return t}));return r.length<=1?r[0]:function(t){e.forEach((function(e){sc(e,t)}))}}function cc(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return qr((function(){return lc.apply(void 0,e)}),e,(function(t,e){return t.length===e.length&&t.every((function(t,n){return t===e[n]}))}))}function uc(t){var e,n,r=(0,na.isMemo)(t)?t.type.type:t.type;return!!("function"!==typeof r||null!==(e=r.prototype)&&void 0!==e&&e.render)&&!!("function"!==typeof t||null!==(n=t.prototype)&&void 0!==n&&n.render)}var hc=["children"],pc=m.createContext({});function dc(t){var e=t.children,n=Zo(t,hc);return m.createElement(pc.Provider,{value:n},e)}var fc=function(t){Qo(n,t);var e=ea(n);function n(){return ii(this,n),e.apply(this,arguments)}return ai(n,[{key:"render",value:function(){return this.props.children}}]),n}(m.Component),gc=fc;function mc(t){var e=m.useRef(!1),n=Ri(m.useState(t),2),r=n[0],i=n[1];return m.useEffect((function(){return e.current=!1,function(){e.current=!0}}),[]),[r,function(t,n){n&&e.current||i(t)}]}var yc="none",vc="appear",xc="enter",_c="leave",bc="none",wc="prepare",Sc="start",Cc="active",Ec="end",kc="prepared";function Mc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit".concat(t)]="webkit".concat(e),n["Moz".concat(t)]="moz".concat(e),n["ms".concat(t)]="MS".concat(e),n["O".concat(t)]="o".concat(e.toLowerCase()),n}var Tc=function(t,e){var n={animationend:Mc("Animation","AnimationEnd"),transitionend:Mc("Transition","TransitionEnd")};return t&&("AnimationEvent"in e||delete n.animationend.animation,"TransitionEvent"in e||delete n.transitionend.transition),n}(gi(),"undefined"!==typeof window?window:{}),Ic={};if(gi()){var Pc=document.createElement("div");Ic=Pc.style}var Oc={};function Ac(t){if(Oc[t])return Oc[t];var e=Tc[t];if(e)for(var n=Object.keys(e),r=n.length,i=0;i<r;i+=1){var o=n[i];if(Object.prototype.hasOwnProperty.call(e,o)&&o in Ic)return Oc[t]=e[o],Oc[t]}return""}var Dc=Ac("animationend"),Rc=Ac("transitionend"),Lc=!(!Dc||!Rc),Nc=Dc||"animationend",Fc=Rc||"transitionend";function zc(t,e){if(!t)return null;if("object"===Cr(t)){var n=e.replace(/-\w/g,(function(t){return t[1].toUpperCase()}));return t[n]}return"".concat(t,"-").concat(e)}var Bc=function(t){var e=(0,m.useRef)(),n=(0,m.useRef)(t);n.current=t;var r=m.useCallback((function(t){n.current(t)}),[]);function i(t){t&&(t.removeEventListener(Fc,r),t.removeEventListener(Nc,r))}return m.useEffect((function(){return function(){i(e.current)}}),[]),[function(t){e.current&&e.current!==t&&i(e.current),t&&t!==e.current&&(t.addEventListener(Fc,r),t.addEventListener(Nc,r),e.current=t)},i]},$c=gi()?m.useLayoutEffect:m.useEffect,jc=function(t){return+setTimeout(t,16)},Uc=function(t){return clearTimeout(t)};"undefined"!==typeof window&&"requestAnimationFrame"in window&&(jc=function(t){return window.requestAnimationFrame(t)},Uc=function(t){return window.cancelAnimationFrame(t)});var Vc=0,Hc=new Map;function Gc(t){Hc.delete(t)}var Wc=function(t){var e=Vc+=1;return function n(r){if(0===r)Gc(e),t();else{var i=jc((function(){n(r-1)}));Hc.set(e,i)}}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),e};Wc.cancel=function(t){var e=Hc.get(t);return Gc(e),Uc(e)};var Xc=Wc,qc=[wc,Sc,Cc,Ec],Yc=[wc,kc],Zc=!1,Kc=!0;function Jc(t){return t===Cc||t===Ec}var Qc=function(t,e,n){var r=Ri(mc(bc),2),i=r[0],o=r[1],a=function(){var t=m.useRef(null);function e(){Xc.cancel(t.current)}return m.useEffect((function(){return function(){e()}}),[]),[function n(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;e();var o=Xc((function(){i<=1?r({isCanceled:function(){return o!==t.current}}):n(r,i-1)}));t.current=o},e]}(),s=Ri(a,2),l=s[0],c=s[1];var u=e?Yc:qc;return $c((function(){if(i!==bc&&i!==Ec){var t=u.indexOf(i),e=u[t+1],r=n(i);r===Zc?o(e,!0):e&&l((function(t){function n(){t.isCanceled()||o(e,!0)}!0===r?n():Promise.resolve(r).then(n)}))}}),[t,i]),m.useEffect((function(){return function(){c()}}),[]),[function(){o(wc,!0)},i]};var tu=function(t){var e=t;"object"===Cr(t)&&(e=t.transitionSupport);var n=m.forwardRef((function(t,n){var r=t.visible,i=void 0===r||r,o=t.removeOnLeave,a=void 0===o||o,s=t.forceRender,l=t.children,c=t.motionName,u=t.leavedClassName,h=t.eventProps,p=function(t,n){return!(!t.motionName||!e||!1===n)}(t,m.useContext(pc).motion),d=(0,m.useRef)(),f=(0,m.useRef)();var g=function(t,e,n,r){var i=r.motionEnter,o=void 0===i||i,a=r.motionAppear,s=void 0===a||a,l=r.motionLeave,c=void 0===l||l,u=r.motionDeadline,h=r.motionLeaveImmediately,p=r.onAppearPrepare,d=r.onEnterPrepare,f=r.onLeavePrepare,g=r.onAppearStart,y=r.onEnterStart,v=r.onLeaveStart,x=r.onAppearActive,_=r.onEnterActive,b=r.onLeaveActive,w=r.onAppearEnd,S=r.onEnterEnd,C=r.onLeaveEnd,E=r.onVisibleChanged,k=Ri(mc(),2),M=k[0],T=k[1],I=Ri(mc(yc),2),P=I[0],O=I[1],A=Ri(mc(null),2),D=A[0],R=A[1],L=(0,m.useRef)(!1),N=(0,m.useRef)(null);function F(){return n()}var z=(0,m.useRef)(!1);function B(){O(yc,!0),R(null,!0)}function $(t){var e=F();if(!t||t.deadline||t.target===e){var n,r=z.current;P===vc&&r?n=null===w||void 0===w?void 0:w(e,t):P===xc&&r?n=null===S||void 0===S?void 0:S(e,t):P===_c&&r&&(n=null===C||void 0===C?void 0:C(e,t)),P!==yc&&r&&!1!==n&&B()}}var j=Ri(Bc($),1)[0],U=function(t){var e,n,r;switch(t){case vc:return Ir(e={},wc,p),Ir(e,Sc,g),Ir(e,Cc,x),e;case xc:return Ir(n={},wc,d),Ir(n,Sc,y),Ir(n,Cc,_),n;case _c:return Ir(r={},wc,f),Ir(r,Sc,v),Ir(r,Cc,b),r;default:return{}}},V=m.useMemo((function(){return U(P)}),[P]),H=Ri(Qc(P,!t,(function(t){if(t===wc){var e=V[wc];return e?e(F()):Zc}var n;return W in V&&R((null===(n=V[W])||void 0===n?void 0:n.call(V,F(),null))||null),W===Cc&&(j(F()),u>0&&(clearTimeout(N.current),N.current=setTimeout((function(){$({deadline:!0})}),u))),W===kc&&B(),Kc})),2),G=H[0],W=H[1],X=Jc(W);z.current=X,$c((function(){T(e);var n,r=L.current;L.current=!0,!r&&e&&s&&(n=vc),r&&e&&o&&(n=xc),(r&&!e&&c||!r&&h&&!e&&c)&&(n=_c);var i=U(n);n&&(t||i[wc])?(O(n),G()):O(yc)}),[e]),(0,m.useEffect)((function(){(P===vc&&!s||P===xc&&!o||P===_c&&!c)&&O(yc)}),[s,o,c]),(0,m.useEffect)((function(){return function(){L.current=!1,clearTimeout(N.current)}}),[]);var q=m.useRef(!1);(0,m.useEffect)((function(){M&&(q.current=!0),void 0!==M&&P===yc&&((q.current||M)&&(null===E||void 0===E||E(M)),q.current=!0)}),[M,P]);var Y=D;return V[wc]&&W===Sc&&(Y=Or({transition:"none"},Y)),[P,W,Y,null!==M&&void 0!==M?M:e]}(p,i,(function(){try{return d.current instanceof HTMLElement?d.current:ac(f.current)}catch(kg){return null}}),t),y=Ri(g,4),v=y[0],x=y[1],_=y[2],b=y[3],w=m.useRef(b);b&&(w.current=!0);var S,C=m.useCallback((function(t){d.current=t,sc(n,t)}),[n]),E=Or(Or({},h),{},{visible:i});if(l)if(v===yc)S=b?l(Or({},E),C):!a&&w.current&&u?l(Or(Or({},E),{},{className:u}),C):s||!a&&!u?l(Or(Or({},E),{},{style:{display:"none"}}),C):null;else{var k,M;x===wc?M="prepare":Jc(x)?M="active":x===Sc&&(M="start");var T=zc(c,"".concat(v,"-").concat(M));S=l(Or(Or({},E),{},{className:ic()(zc(c,v),(k={},Ir(k,T,T&&M),Ir(k,c,"string"===typeof c),k)),style:_}),C)}else S=null;m.isValidElement(S)&&uc(S)&&(S.ref||(S=m.cloneElement(S,{ref:C})));return m.createElement(gc,{ref:f},S)}));return n.displayName="CSSMotion",n}(Lc),eu="add",nu="keep",ru="remove",iu="removed";function ou(t){var e;return Or(Or({},e=t&&"object"===Cr(t)&&"key"in t?t:{key:t}),{},{key:String(e.key)})}function au(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(ou)}var su=["component","children","onVisibleChanged","onAllRemoved"],lu=["status"],cu=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];var uu=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tu,n=function(t){Qo(r,t);var n=ea(r);function r(){var t;ii(this,r);for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return Ir(Ko(t=n.call.apply(n,[this].concat(i))),"state",{keyEntities:[]}),Ir(Ko(t),"removeKey",(function(e){var n=t.state.keyEntities.map((function(t){return t.key!==e?t:Or(Or({},t),{},{status:iu})}));return t.setState({keyEntities:n}),n.filter((function(t){return t.status!==iu})).length})),t}return ai(r,[{key:"render",value:function(){var t=this,n=this.state.keyEntities,r=this.props,i=r.component,o=r.children,a=r.onVisibleChanged,s=r.onAllRemoved,l=Zo(r,su),c=i||m.Fragment,u={};return cu.forEach((function(t){u[t]=l[t],delete l[t]})),delete l.keys,m.createElement(c,l,n.map((function(n){var r=n.status,i=Zo(n,lu),l=r===eu||r===nu;return m.createElement(e,Ui({},u,{key:i.key,visible:l,eventProps:i,onVisibleChanged:function(e){(null===a||void 0===a||a(e,{key:i.key}),e)||0===t.removeKey(i.key)&&s&&s()}}),o)})))}}],[{key:"getDerivedStateFromProps",value:function(t,e){var n=t.keys,r=e.keyEntities,i=au(n),o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,i=e.length,o=au(t),a=au(e);o.forEach((function(t){for(var e=!1,o=r;o<i;o+=1){var s=a[o];if(s.key===t.key){r<o&&(n=n.concat(a.slice(r,o).map((function(t){return Or(Or({},t),{},{status:eu})}))),r=o),n.push(Or(Or({},s),{},{status:nu})),r+=1,e=!0;break}}e||n.push(Or(Or({},t),{},{status:ru}))})),r<i&&(n=n.concat(a.slice(r).map((function(t){return Or(Or({},t),{},{status:eu})}))));var s={};return n.forEach((function(t){var e=t.key;s[e]=(s[e]||0)+1})),Object.keys(s).filter((function(t){return s[t]>1})).forEach((function(t){(n=n.filter((function(e){var n=e.key,r=e.status;return n!==t||r!==ru}))).forEach((function(e){e.key===t&&(e.status=nu)}))})),n}(r,i);return{keyEntities:o.filter((function(t){var e=r.find((function(e){var n=e.key;return t.key===n}));return!e||e.status!==iu||t.status!==ru}))}}}]),r}(m.Component);return Ir(n,"defaultProps",{component:"div"}),n}(Lc),hu=tu;function pu(t){const{children:e}=t,[,n]=Vl(),{motion:r}=n,i=m.useRef(!1);return i.current=i.current||!1===r,i.current?m.createElement(dc,{motion:r},e):e}const du={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},fu=t=>({boxSizing:"border-box",margin:0,padding:0,color:t.colorText,fontSize:t.fontSize,lineHeight:t.lineHeight,listStyle:"none",fontFamily:t.fontFamily}),gu=t=>({a:{color:t.colorLink,textDecoration:t.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${t.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:t.colorLinkHover},"&:active":{color:t.colorLinkActive},"&:active,\n  &:hover":{textDecoration:t.linkHoverDecoration,outline:0},"&:focus":{textDecoration:t.linkFocusDecoration,outline:0},"&[disabled]":{color:t.colorTextDisabled,cursor:"not-allowed"}}}),mu=(t,e)=>{const{fontFamily:n,fontSize:r}=t,i=`[class^="${e}"], [class*=" ${e}"]`;return{[i]:{fontFamily:n,fontSize:r,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"},[i]:{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}}}},yu=t=>({outline:`${t.lineWidthFocus}px solid ${t.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),vu=t=>({"&:focus-visible":Object.assign({},yu(t))});var xu=(t,e)=>{const[n,r]=Vl();return $o({theme:n,token:r,hashId:"",path:["ant-design-icons",t],nonce:()=>null===e||void 0===e?void 0:e.nonce},(()=>[{[`.${t}`]:Object.assign(Object.assign({},{display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),{[`.${t} .${t}-icon`]:{display:"block"}})}]))},_u=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const bu=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","pagination","form","select"];let wu,Su;function Cu(){return wu||"ant"}function Eu(){return Su||Hl}const ku=()=>({getPrefixCls:(t,e)=>e||(t?`${Cu()}-${t}`:Cu()),getIconPrefixCls:Eu,getRootPrefixCls:()=>wu||Cu()}),Mu=t=>{const{children:e,csp:n,autoInsertSpaceInButton:r,form:i,locale:o,componentSize:a,direction:s,space:l,virtual:c,dropdownMatchSelectWidth:u,popupMatchSelectWidth:h,popupOverflow:p,legacyLocale:d,parentContext:f,iconPrefixCls:g,theme:y,componentDisabled:v}=t;const x=m.useCallback(((e,n)=>{const{prefixCls:r}=t;if(n)return n;const i=r||f.getPrefixCls("");return e?`${i}-${e}`:i}),[f.getPrefixCls,t.prefixCls]),_=g||f.iconPrefixCls||Hl,b=_!==f.iconPrefixCls,w=n||f.csp,S=xu(_,w),C=function(t,e){const n=t||{},r=!1!==n.inherit&&e?e:jl,i=qr((()=>{if(!t)return e;const i=Object.assign({},r.components);return Object.keys(t.components||{}).forEach((e=>{i[e]=Object.assign(Object.assign({},i[e]),t.components[e])})),Object.assign(Object.assign(Object.assign({},r),n),{token:Object.assign(Object.assign({},r.token),n.token),components:i})}),[n,r],((t,e)=>t.some(((t,n)=>{const r=e[n];return!ri(t,r,!0)}))));return i}(y,f.theme);const E={csp:w,autoInsertSpaceInButton:r,locale:o||d,direction:s,space:l,virtual:c,popupMatchSelectWidth:null!==h&&void 0!==h?h:u,popupOverflow:p,getPrefixCls:x,iconPrefixCls:_,theme:C},k=Object.assign({},f);Object.keys(E).forEach((t=>{void 0!==E[t]&&(k[t]=E[t])})),bu.forEach((e=>{const n=t[e];n&&(k[e]=n)}));const M=qr((()=>k),k,((t,e)=>{const n=Object.keys(t),r=Object.keys(e);return n.length!==r.length||n.some((n=>t[n]!==e[n]))})),T=m.useMemo((()=>({prefixCls:_,csp:w})),[_,w]);let I=b?S(e):e;const P=m.useMemo((()=>{var t,e,n;return qa({},(null===(t=Rs.Form)||void 0===t?void 0:t.defaultValidateMessages)||{},(null===(n=null===(e=M.locale)||void 0===e?void 0:e.Form)||void 0===n?void 0:n.defaultValidateMessages)||{},(null===i||void 0===i?void 0:i.validateMessages)||{})}),[M,null===i||void 0===i?void 0:i.validateMessages]);Object.keys(P).length>0&&(I=m.createElement(_s,{validateMessages:P},e)),o&&(I=m.createElement(Bs,{locale:o,_ANT_MARK__:"internalMark"},I)),(_||w)&&(I=m.createElement(Yo.Provider,{value:T},I)),a&&(I=m.createElement(tc,{size:a},I)),I=m.createElement(pu,null,I);const O=m.useMemo((()=>{const t=C||{},{algorithm:e,token:n}=t,r=_u(t,["algorithm","token"]),i=e&&(!Array.isArray(e)||e.length>0)?Xo(e):void 0;return Object.assign(Object.assign({},r),{theme:i,token:Object.assign(Object.assign({},kl),n)})}),[C]);return y&&(I=m.createElement(Ul.Provider,{value:O},I)),void 0!==v&&(I=m.createElement(Zl,{disabled:v},I)),m.createElement(Gl.Provider,{value:M},I)},Tu=t=>{const e=m.useContext(Gl),n=m.useContext(zs);return m.createElement(Mu,Object.assign({parentContext:e,legacyLocale:n},t))};Tu.ConfigContext=Gl,Tu.SizeContext=ec,Tu.config=t=>{let{prefixCls:e,iconPrefixCls:n,theme:r}=t;void 0!==e&&(wu=e),void 0!==n&&(Su=n),r&&ql(Cu(),r)},Tu.useConfig=nc,Object.defineProperty(Tu,"SizeContext",{get:()=>ec});var Iu=Tu,Pu={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};function Ou(t){var e;return null===t||void 0===t||null===(e=t.getRootNode)||void 0===e?void 0:e.call(t)}function Au(t){return function(t){return Ou(t)!==(null===t||void 0===t?void 0:t.ownerDocument)}(t)?Ou(t):null}function Du(t){return"object"===Cr(t)&&"string"===typeof t.name&&"string"===typeof t.theme&&("object"===Cr(t.icon)||"function"===typeof t.icon)}function Ru(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t).reduce((function(e,n){var r=t[n];if("class"===n)e.className=r,delete e.class;else e[n]=r;return e}),{})}function Lu(t,e,n){return n?m.createElement(t.tag,Or(Or({key:e},Ru(t.attrs)),n),(t.children||[]).map((function(n,r){return Lu(n,"".concat(e,"-").concat(t.tag,"-").concat(r))}))):m.createElement(t.tag,Or({key:e},Ru(t.attrs)),(t.children||[]).map((function(n,r){return Lu(n,"".concat(e,"-").concat(t.tag,"-").concat(r))})))}function Nu(t){return xl(t)[0]}function Fu(t){return t?Array.isArray(t)?t:[t]:[]}var zu=["icon","className","onClick","style","primaryColor","secondaryColor"],Bu={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};var $u=function(t){var e=t.icon,n=t.className,r=t.onClick,i=t.style,o=t.primaryColor,a=t.secondaryColor,s=Zo(t,zu),l=m.useRef(),c=Bu;if(o&&(c={primaryColor:o,secondaryColor:a||Nu(o)}),function(t){var e=(0,m.useContext)(Yo),n=e.csp,r=e.prefixCls,i="\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n";r&&(i=i.replace(/anticon/g,r)),(0,m.useEffect)((function(){var e=Au(t.current);ki(i,"@ant-design-icons",{prepend:!0,csp:n,attachTo:e})}),[])}(l),function(t,e){ni(t,"[@ant-design/icons] ".concat(e))}(Du(e),"icon should be icon definiton, but got ".concat(e)),!Du(e))return null;var u=e;return u&&"function"===typeof u.icon&&(u=Or(Or({},u),{},{icon:u.icon(c.primaryColor,c.secondaryColor)})),Lu(u.icon,"svg-".concat(u.name),Or(Or({className:n,onClick:r,style:i,"data-icon":u.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},s),{},{ref:l}))};$u.displayName="IconReact",$u.getTwoToneColors=function(){return Or({},Bu)},$u.setTwoToneColors=function(t){var e=t.primaryColor,n=t.secondaryColor;Bu.primaryColor=e,Bu.secondaryColor=n||Nu(e),Bu.calculated=!!n};var ju=$u;function Uu(t){var e=Ri(Fu(t),2),n=e[0],r=e[1];return ju.setTwoToneColors({primaryColor:n,secondaryColor:r})}var Vu=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];Uu(Sl.primary);var Hu=m.forwardRef((function(t,e){var n,r=t.className,i=t.icon,o=t.spin,a=t.rotate,s=t.tabIndex,l=t.onClick,c=t.twoToneColor,u=Zo(t,Vu),h=m.useContext(Yo),p=h.prefixCls,d=void 0===p?"anticon":p,f=h.rootClassName,g=ic()(f,d,(Ir(n={},"".concat(d,"-").concat(i.name),!!i.name),Ir(n,"".concat(d,"-spin"),!!o||"loading"===i.name),n),r),y=s;void 0===y&&l&&(y=-1);var v=a?{msTransform:"rotate(".concat(a,"deg)"),transform:"rotate(".concat(a,"deg)")}:void 0,x=Ri(Fu(c),2),_=x[0],b=x[1];return m.createElement("span",Ui({role:"img","aria-label":i.name},u,{ref:e,tabIndex:y,onClick:l,className:g}),m.createElement(ju,{icon:i,primaryColor:_,secondaryColor:b,style:v}))}));Hu.displayName="AntdIcon",Hu.getTwoToneColor=function(){var t=ju.getTwoToneColors();return t.calculated?[t.primaryColor,t.secondaryColor]:t.primaryColor},Hu.setTwoToneColor=Uu;var Gu=Hu,Wu=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:Pu}))};var Xu=m.forwardRef(Wu),qu={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},Yu=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:qu}))};var Zu=m.forwardRef(Yu),Ku={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"}}]},name:"close-circle",theme:"filled"},Ju=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:Ku}))};var Qu=m.forwardRef(Ju),th={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"},eh=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:th}))};var nh=m.forwardRef(eh),rh={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},ih=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:rh}))};var oh=m.forwardRef(ih),ah={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var e=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||e>=ah.F1&&e<=ah.F12)return!1;switch(e){case ah.ALT:case ah.CAPS_LOCK:case ah.CONTEXT_MENU:case ah.CTRL:case ah.DOWN:case ah.END:case ah.ESC:case ah.HOME:case ah.INSERT:case ah.LEFT:case ah.MAC_FF_META:case ah.META:case ah.NUMLOCK:case ah.NUM_CENTER:case ah.PAGE_DOWN:case ah.PAGE_UP:case ah.PAUSE:case ah.PRINT_SCREEN:case ah.RIGHT:case ah.SHIFT:case ah.UP:case ah.WIN_KEY:case ah.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(t){if(t>=ah.ZERO&&t<=ah.NINE)return!0;if(t>=ah.NUM_ZERO&&t<=ah.NUM_MULTIPLY)return!0;if(t>=ah.A&&t<=ah.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===t)return!0;switch(t){case ah.SPACE:case ah.QUESTION_MARK:case ah.NUM_PLUS:case ah.NUM_MINUS:case ah.NUM_PERIOD:case ah.NUM_DIVISION:case ah.SEMICOLON:case ah.DASH:case ah.EQUALS:case ah.COMMA:case ah.PERIOD:case ah.SLASH:case ah.APOSTROPHE:case ah.SINGLE_QUOTE:case ah.OPEN_SQUARE_BRACKET:case ah.BACKSLASH:case ah.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},sh=ah,lh=m.forwardRef((function(t,e){var n=t.prefixCls,r=t.style,i=t.className,o=t.duration,a=void 0===o?4.5:o,s=t.eventKey,l=t.content,c=t.closable,u=t.closeIcon,h=void 0===u?"x":u,p=t.props,d=t.onClick,f=t.onNoticeClose,g=t.times,y=Ri(m.useState(!1),2),v=y[0],x=y[1],_=function(){f(s)};m.useEffect((function(){if(!v&&a>0){var t=setTimeout((function(){_()}),1e3*a);return function(){clearTimeout(t)}}}),[a,v,g]);var b="".concat(n,"-notice");return m.createElement("div",Ui({},p,{ref:e,className:ic()(b,i,Ir({},"".concat(b,"-closable"),c)),style:r,onMouseEnter:function(){x(!0)},onMouseLeave:function(){x(!1)},onClick:d}),m.createElement("div",{className:"".concat(b,"-content")},l),c&&m.createElement("a",{tabIndex:0,className:"".concat(b,"-close"),onKeyDown:function(t){"Enter"!==t.key&&"Enter"!==t.code&&t.keyCode!==sh.ENTER||_()},onClick:function(t){t.preventDefault(),t.stopPropagation(),_()}},h))})),ch=lh,uh=m.forwardRef((function(t,e){var n=t.prefixCls,r=void 0===n?"rc-notification":n,i=t.container,o=t.motion,a=t.maxCount,s=t.className,l=t.style,c=t.onAllRemoved,u=Ri(m.useState([]),2),h=u[0],p=u[1],d=function(t){var e,n=h.find((function(e){return e.key===t}));null===n||void 0===n||null===(e=n.onClose)||void 0===e||e.call(n),p((function(e){return e.filter((function(e){return e.key!==t}))}))};m.useImperativeHandle(e,(function(){return{open:function(t){p((function(e){var n,r=Sr(e),i=r.findIndex((function(e){return e.key===t.key})),o=Or({},t);i>=0?(o.times=((null===(n=e[i])||void 0===n?void 0:n.times)||0)+1,r[i]=o):(o.times=0,r.push(o));return a>0&&r.length>a&&(r=r.slice(-a)),r}))},close:function(t){d(t)},destroy:function(){p([])}}}));var f=Ri(m.useState({}),2),g=f[0],y=f[1];m.useEffect((function(){var t={};h.forEach((function(e){var n=e.placement,r=void 0===n?"topRight":n;r&&(t[r]=t[r]||[],t[r].push(e))})),Object.keys(g).forEach((function(e){t[e]=t[e]||[]})),y(t)}),[h]);var v=m.useRef(!1);if(m.useEffect((function(){Object.keys(g).length>0?v.current=!0:v.current&&(null===c||void 0===c||c(),v.current=!1)}),[g]),!i)return null;var x=Object.keys(g);return(0,Dr.createPortal)(m.createElement(m.Fragment,null,x.map((function(t){var e=g[t].map((function(t){return{config:t,key:t.key}})),n="function"===typeof o?o(t):o;return m.createElement(uu,Ui({key:t,className:ic()(r,"".concat(r,"-").concat(t),null===s||void 0===s?void 0:s(t)),style:null===l||void 0===l?void 0:l(t),keys:e,motionAppear:!0},n,{onAllRemoved:function(){!function(t){y((function(e){var n=Or({},e);return(n[t]||[]).length||delete n[t],n}))}(t)}}),(function(t,e){var n=t.config,i=t.className,o=t.style,a=n.key,s=n.times,l=n.className,c=n.style;return m.createElement(ch,Ui({},n,{ref:e,prefixCls:r,className:ic()(i,l),style:Or(Or({},o),c),times:s,key:a,eventKey:a,onNoticeClose:d}))}))}))),i)}));var hh=uh,ph=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved"],dh=function(){return document.body},fh=0;function gh(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.getContainer,n=void 0===e?dh:e,r=t.motion,i=t.prefixCls,o=t.maxCount,a=t.className,s=t.style,l=t.onAllRemoved,c=Zo(t,ph),u=Ri(m.useState(),2),h=u[0],p=u[1],d=m.useRef(),f=m.createElement(hh,{container:h,ref:d,prefixCls:i,motion:r,maxCount:o,className:a,style:s,onAllRemoved:l}),g=Ri(m.useState([]),2),y=g[0],v=g[1],x=m.useMemo((function(){return{open:function(t){var e=function(){for(var t={},e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach((function(e){e&&Object.keys(e).forEach((function(n){var r=e[n];void 0!==r&&(t[n]=r)}))})),t}(c,t);null!==e.key&&void 0!==e.key||(e.key="rc-notification-".concat(fh),fh+=1),v((function(t){return[].concat(Sr(t),[{type:"open",config:e}])}))},close:function(t){v((function(e){return[].concat(Sr(e),[{type:"close",key:t}])}))},destroy:function(){v((function(t){return[].concat(Sr(t),[{type:"destroy"}])}))}}}),[]);return m.useEffect((function(){p(n())})),m.useEffect((function(){d.current&&y.length&&(y.forEach((function(t){switch(t.type){case"open":d.current.open(t.config);break;case"close":d.current.close(t.key);break;case"destroy":d.current.destroy()}})),v([]))}),[y]),[x,f]}const mh="undefined"!==typeof CSSINJS_STATISTIC;let yh=!0;function vh(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!mh)return Object.assign.apply(Object,[{}].concat(e));yh=!1;const r={};return e.forEach((t=>{Object.keys(t).forEach((e=>{Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get:()=>t[e]})}))})),yh=!0,r}const xh={};function _h(){}function bh(t,e,n,r){return i=>{const[o,a,s]=Vl(),{getPrefixCls:l,iconPrefixCls:c,csp:u}=(0,m.useContext)(Gl),h=l(),p={theme:o,token:a,hashId:s,nonce:()=>null===u||void 0===u?void 0:u.nonce};return $o(Object.assign(Object.assign({},p),{path:["Shared",h]}),(()=>[{"&":gu(a)}])),[$o(Object.assign(Object.assign({},p),{path:[t,i,c]}),(()=>{const{token:o,flush:l}=function(t){let e,n=t,r=_h;return mh&&(e=new Set,n=new Proxy(t,{get(t,n){return yh&&e.add(n),t[n]}}),r=(t,n)=>{xh[t]={global:Array.from(e),component:n}}),{token:n,keys:e,flush:r}}(a),u="function"===typeof n?n(o):n,p=Object.assign(Object.assign({},u),a[t]),d=vh(o,{componentCls:`.${i}`,prefixCls:i,iconCls:`.${c}`,antCls:`.${h}`},p),f=e(d,{hashId:s,prefixCls:i,rootPrefixCls:h,iconPrefixCls:c,overrideComponentToken:a[t]});return l(t,p),[!1===(null===r||void 0===r?void 0:r.resetStyle)?null:mu(a,i),f]})),s]}}const wh=t=>{const{componentCls:e,iconCls:n,boxShadow:r,colorText:i,colorSuccess:o,colorError:a,colorWarning:s,colorInfo:l,fontSizeLG:c,motionEaseInOutCirc:u,motionDurationSlow:h,marginXS:p,paddingXS:d,borderRadiusLG:f,zIndexPopup:g,contentPadding:m,contentBg:y}=t,v=`${e}-notice`,x=new Uo("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:d,transform:"translateY(0)",opacity:1}}),_=new Uo("MessageMoveOut",{"0%":{maxHeight:t.height,padding:d,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),b={padding:d,textAlign:"center",[`${e}-custom-content > ${n}`]:{verticalAlign:"text-bottom",marginInlineEnd:p,fontSize:c},[`${v}-content`]:{display:"inline-block",padding:m,background:y,borderRadius:f,boxShadow:r,pointerEvents:"all"},[`${e}-success > ${n}`]:{color:o},[`${e}-error > ${n}`]:{color:a},[`${e}-warning > ${n}`]:{color:s},[`${e}-info > ${n},\n      ${e}-loading > ${n}`]:{color:l}};return[{[e]:Object.assign(Object.assign({},fu(t)),{color:i,position:"fixed",top:p,width:"100%",pointerEvents:"none",zIndex:g,[`${e}-move-up`]:{animationFillMode:"forwards"},[`\n        ${e}-move-up-appear,\n        ${e}-move-up-enter\n      `]:{animationName:x,animationDuration:h,animationPlayState:"paused",animationTimingFunction:u},[`\n        ${e}-move-up-appear${e}-move-up-appear-active,\n        ${e}-move-up-enter${e}-move-up-enter-active\n      `]:{animationPlayState:"running"},[`${e}-move-up-leave`]:{animationName:_,animationDuration:h,animationPlayState:"paused",animationTimingFunction:u},[`${e}-move-up-leave${e}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[e]:{[v]:Object.assign({},b)}},{[`${e}-notice-pure-panel`]:Object.assign(Object.assign({},b),{padding:0,textAlign:"start"})}]};var Sh=bh("Message",(t=>{const e=vh(t,{height:150});return[wh(e)]}),(t=>({zIndexPopup:t.zIndexPopupBase+10,contentBg:t.colorBgElevated,contentPadding:`${(t.controlHeightLG-t.fontSize*t.lineHeight)/2}px ${t.paddingSM}px`}))),Ch=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const Eh={info:m.createElement(oh,null),success:m.createElement(nh,null),error:m.createElement(Qu,null),warning:m.createElement(Zu,null),loading:m.createElement(Xu,null)};function kh(t){let{prefixCls:e,type:n,icon:r,children:i}=t;return m.createElement("div",{className:ic()(`${e}-custom-content`,`${e}-${n}`)},r||Eh[n],m.createElement("span",null,i))}var Mh={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"},Th=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:Mh}))};var Ih=m.forwardRef(Th);function Ph(t){let e;const n=new Promise((n=>{e=t((()=>{n(!0)}))})),r=()=>{null===e||void 0===e||e()};return r.then=(t,e)=>n.then(t,e),r.promise=n,r}var Oh=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const Ah=3,Dh=m.forwardRef(((t,e)=>{const{top:n,prefixCls:r,getContainer:i,maxCount:o,duration:a=Ah,rtl:s,transitionName:l,onAllRemoved:c}=t,{getPrefixCls:u,getPopupContainer:h}=m.useContext(Gl),p=r||u("message"),[,d]=Sh(p),f=m.createElement("span",{className:`${p}-close-x`},m.createElement(Ih,{className:`${p}-close-icon`})),[g,y]=gh({prefixCls:p,style:()=>({left:"50%",transform:"translateX(-50%)",top:null!==n&&void 0!==n?n:8}),className:()=>ic()(d,s?`${p}-rtl`:""),motion:()=>function(t,e){return{motionName:null!==e&&void 0!==e?e:`${t}-move-up`}}(p,l),closable:!1,closeIcon:f,duration:a,getContainer:()=>(null===i||void 0===i?void 0:i())||(null===h||void 0===h?void 0:h())||document.body,maxCount:o,onAllRemoved:c});return m.useImperativeHandle(e,(()=>Object.assign(Object.assign({},g),{prefixCls:p,hashId:d}))),y}));let Rh=0;function Lh(t){const e=m.useRef(null),n=m.useMemo((()=>{const t=t=>{var n;null===(n=e.current)||void 0===n||n.close(t)},n=n=>{if(!e.current){const t=()=>{};return t.then=()=>{},t}const{open:r,prefixCls:i,hashId:o}=e.current,a=`${i}-notice`,{content:s,icon:l,type:c,key:u,className:h,onClose:p}=n,d=Oh(n,["content","icon","type","key","className","onClose"]);let f=u;return void 0!==f&&null!==f||(Rh+=1,f=`antd-message-${Rh}`),Ph((e=>(r(Object.assign(Object.assign({},d),{key:f,content:m.createElement(kh,{prefixCls:i,type:c,icon:l},s),placement:"top",className:ic()(c&&`${a}-${c}`,o,h),onClose:()=>{null===p||void 0===p||p(),e()}})),()=>{t(f)})))},r={open:n,destroy:n=>{var r;void 0!==n?t(n):null===(r=e.current)||void 0===r||r.destroy()}};return["info","success","warning","error","loading"].forEach((t=>{r[t]=(e,r,i)=>{let o,a,s;o=e&&"object"===typeof e&&"content"in e?e:{content:e},"function"===typeof r?s=r:(a=r,s=i);const l=Object.assign(Object.assign({onClose:s,duration:a},o),{type:t});return n(l)}})),r}),[]);return[n,m.createElement(Dh,Object.assign({key:"message-holder"},t,{ref:e}))]}let Nh=null,Fh=t=>t(),zh=[],Bh={};const $h=m.forwardRef(((t,e)=>{const n=()=>{const{prefixCls:t,container:e,maxCount:n,duration:r,rtl:i,top:o}=function(){const{prefixCls:t,getContainer:e,duration:n,rtl:r,maxCount:i,top:o}=Bh;return{prefixCls:null!==t&&void 0!==t?t:ku().getPrefixCls("message"),container:(null===e||void 0===e?void 0:e())||document.body,duration:n,rtl:r,maxCount:i,top:o}}();return{prefixCls:t,getContainer:()=>e,maxCount:n,duration:r,rtl:i,top:o}},[r,i]=m.useState(n),[o,a]=Lh(r),s=ku(),l=s.getRootPrefixCls(),c=s.getIconPrefixCls(),u=()=>{i(n)};return m.useEffect(u,[]),m.useImperativeHandle(e,(()=>{const t=Object.assign({},o);return Object.keys(t).forEach((e=>{t[e]=function(){return u(),o[e].apply(o,arguments)}})),{instance:t,sync:u}})),m.createElement(Iu,{prefixCls:l,iconPrefixCls:c},a)}));function jh(){if(!Nh){const t=document.createDocumentFragment(),e={fragment:t};return Nh=e,void Fh((()=>{jr(m.createElement($h,{ref:t=>{const{instance:n,sync:r}=t||{};Promise.resolve().then((()=>{!e.instance&&n&&(e.instance=n,e.sync=r,jh())}))}}),t)}))}Nh.instance&&(zh.forEach((t=>{const{type:e,skipped:n}=t;if(!n)switch(e){case"open":Fh((()=>{const e=Nh.instance.open(Object.assign(Object.assign({},Bh),t.config));null===e||void 0===e||e.then(t.resolve),t.setCloseFn(e)}));break;case"destroy":Fh((()=>{null===Nh||void 0===Nh||Nh.instance.destroy(t.key)}));break;default:Fh((()=>{var n;const r=(n=Nh.instance)[e].apply(n,Sr(t.args));null===r||void 0===r||r.then(t.resolve),t.setCloseFn(r)}))}})),zh=[])}const Uh={open:function(t){const e=Ph((e=>{let n;const r={type:"open",config:t,resolve:e,setCloseFn:t=>{n=t}};return zh.push(r),()=>{n?Fh((()=>{n()})):r.skipped=!0}}));return jh(),e},destroy:function(t){zh.push({type:"destroy",key:t}),jh()},config:function(t){Bh=Object.assign(Object.assign({},Bh),t),Fh((()=>{var t;null===(t=null===Nh||void 0===Nh?void 0:Nh.sync)||void 0===t||t.call(Nh)}))},useMessage:function(t){return Lh(t)},_InternalPanelDoNotUseOrYouWillBeFired:function(t){const{prefixCls:e,className:n,type:r,icon:i,content:o}=t,a=Ch(t,["prefixCls","className","type","icon","content"]),{getPrefixCls:s}=m.useContext(Gl),l=e||s("message"),[,c]=Sh(l);return m.createElement(ch,Object.assign({},a,{prefixCls:l,className:ic()(n,c,`${l}-notice-pure-panel`),eventKey:"pure",duration:null,content:m.createElement(kh,{prefixCls:l,type:r,icon:i},o)}))}},Vh=Uh;["success","info","warning","error","loading"].forEach((t=>{Vh[t]=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(t,e){const n=Ph((n=>{let r;const i={type:t,args:e,resolve:n,setCloseFn:t=>{r=t}};return zh.push(i),()=>{r?Fh((()=>{r()})):i.skipped=!0}}));return jh(),n}(t,n)}}));var Hh=Vh;function Gh(t,e){var n=Or({},t);return Array.isArray(e)&&e.forEach((function(t){delete n[t]})),n}var Wh=function(t){if(!t)return!1;if(t instanceof Element){if(t.offsetParent)return!0;if(t.getBBox){var e=t.getBBox(),n=e.width,r=e.height;if(n||r)return!0}if(t.getBoundingClientRect){var i=t.getBoundingClientRect(),o=i.width,a=i.height;if(o||a)return!0}}return!1};const{isValidElement:Xh}=y;function qh(t){return t&&Xh(t)&&t.type===m.Fragment}function Yh(t,e){return function(t,e,n){return Xh(t)?m.cloneElement(t,"function"===typeof n?n(t.props||{}):n):e}(t,t,e)}const Zh=t=>{const{componentCls:e,colorPrimary:n}=t;return{[e]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${n})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${t.motionEaseOutCirc}`,`opacity 2s ${t.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0}}}}};var Kh=bh("Wave",(t=>[Zh(t)]));function Jh(t){return t&&"#fff"!==t&&"#ffffff"!==t&&"rgb(255, 255, 255)"!==t&&"rgba(255, 255, 255, 1)"!==t&&function(t){const e=(t||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return!(e&&e[1]&&e[2]&&e[3])||!(e[1]===e[2]&&e[2]===e[3])}(t)&&!/rgba\((?:\d*, ){3}0\)/.test(t)&&"transparent"!==t}function Qh(t){return Number.isNaN(t)?0:t}const tp=t=>{const{className:e,target:n}=t,r=m.useRef(null),[i,o]=m.useState(null),[a,s]=m.useState([]),[l,c]=m.useState(0),[u,h]=m.useState(0),[p,d]=m.useState(0),[f,g]=m.useState(0),[y,v]=m.useState(!1),x={left:l,top:u,width:p,height:f,borderRadius:a.map((t=>`${t}px`)).join(" ")};function _(){const t=getComputedStyle(n);o(function(t){const{borderTopColor:e,borderColor:n,backgroundColor:r}=getComputedStyle(t);return Jh(e)?e:Jh(n)?n:Jh(r)?r:null}(n));const e="static"===t.position,{borderLeftWidth:r,borderTopWidth:i}=t;c(e?n.offsetLeft:Qh(-parseFloat(r))),h(e?n.offsetTop:Qh(-parseFloat(i))),d(n.offsetWidth),g(n.offsetHeight);const{borderTopLeftRadius:a,borderTopRightRadius:l,borderBottomLeftRadius:u,borderBottomRightRadius:p}=t;s([a,l,p,u].map((t=>Qh(parseFloat(t)))))}return i&&(x["--wave-color"]=i),m.useEffect((()=>{if(n){const t=Xc((()=>{_(),v(!0)}));let e;return"undefined"!==typeof ResizeObserver&&(e=new ResizeObserver(_),e.observe(n)),()=>{Xc.cancel(t),null===e||void 0===e||e.disconnect()}}}),[]),y?m.createElement(hu,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(t,e)=>{var n;if(e.deadline||"opacity"===e.propertyName){const t=null===(n=r.current)||void 0===n?void 0:n.parentElement;Gr(t).then((()=>{null===t||void 0===t||t.remove()}))}return!1}},(t=>{let{className:n}=t;return m.createElement("div",{ref:r,className:ic()(e,n),style:x})})):null};function ep(t,e){return function(){!function(t,e){const n=document.createElement("div");n.style.position="absolute",n.style.left="0px",n.style.top="0px",null===t||void 0===t||t.insertBefore(n,null===t||void 0===t?void 0:t.firstChild),jr(m.createElement(tp,{target:t,className:e}),n)}(t.current,e)}}var np=t=>{const{children:e,disabled:n}=t,{getPrefixCls:r}=(0,m.useContext)(Gl),i=(0,m.useRef)(null),o=r("wave"),[,a]=Kh(o),s=ep(i,ic()(o,a));if(m.useEffect((()=>{const t=i.current;if(!t||1!==t.nodeType||n)return;const e=e=>{"INPUT"===e.target.tagName||!Wh(e.target)||!t.getAttribute||t.getAttribute("disabled")||t.disabled||t.className.includes("disabled")||t.className.includes("-leave")||s()};return t.addEventListener("click",e,!0),()=>{t.removeEventListener("click",e,!0)}}),[n]),!m.isValidElement(e))return null!==e&&void 0!==e?e:null;return Yh(e,{ref:uc(e)?lc(e.ref,i):i})};var rp=t=>{const{componentCls:e}=t;return{[e]:{display:"inline-flex","&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}};const ip=t=>{const{componentCls:e}=t;return{[e]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${e}-item:empty`]:{display:"none"}}}};var op=bh("Space",(t=>[ip(t),rp(t)]),(()=>({})),{resetStyle:!1}),ap=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const sp=m.createContext(null),lp=(t,e)=>{const n=m.useContext(sp),r=m.useMemo((()=>{if(!n)return"";const{compactDirection:r,isFirstItem:i,isLastItem:o}=n,a="vertical"===r?"-vertical-":"-";return ic()({[`${t}-compact${a}item`]:!0,[`${t}-compact${a}first-item`]:i,[`${t}-compact${a}last-item`]:o,[`${t}-compact${a}item-rtl`]:"rtl"===e})}),[t,e,n]);return{compactSize:null===n||void 0===n?void 0:n.compactSize,compactDirection:null===n||void 0===n?void 0:n.compactDirection,compactItemClassnames:r}},cp=t=>{let{children:e}=t;return m.createElement(sp.Provider,{value:null},e)},up=t=>{var{children:e}=t,n=ap(t,["children"]);return m.createElement(sp.Provider,{value:n},e)};var hp=t=>{const{getPrefixCls:e,direction:n}=m.useContext(Gl),{size:r,direction:i,block:o,prefixCls:a,className:s,rootClassName:l,children:c}=t,u=ap(t,["size","direction","block","prefixCls","className","rootClassName","children"]),h=Jl((t=>{var e;return null!==(e=null!==r&&void 0!==r?r:t)&&void 0!==e?e:"middle"})),p=e("space-compact",a),[d,f]=op(p),g=ic()(p,f,{[`${p}-rtl`]:"rtl"===n,[`${p}-block`]:o,[`${p}-vertical`]:"vertical"===i},s,l),y=m.useContext(sp),v=ra(c),x=m.useMemo((()=>v.map(((t,e)=>{const n=t&&t.key||`${p}-item-${e}`;return m.createElement(up,{key:n,compactSize:h,compactDirection:i,isFirstItem:0===e&&(!y||(null===y||void 0===y?void 0:y.isFirstItem)),isLastItem:e===v.length-1&&(!y||(null===y||void 0===y?void 0:y.isLastItem))},t)}))),[r,v,y]);return 0===v.length?null:d(m.createElement("div",Object.assign({className:g},u),x))};const pp=(0,m.forwardRef)(((t,e)=>{const{className:n,style:r,children:i,prefixCls:o}=t,a=ic()(`${o}-icon`,n);return m.createElement("span",{ref:e,className:a,style:r},i)}));var dp=pp;const fp=(0,m.forwardRef)(((t,e)=>{let{prefixCls:n,className:r,style:i,iconClassName:o}=t;const a=ic()(`${n}-loading-icon`,r);return m.createElement(dp,{prefixCls:n,className:a,style:i,ref:e},m.createElement(Xu,{className:o}))})),gp=()=>({width:0,opacity:0,transform:"scale(0)"}),mp=t=>({width:t.scrollWidth,opacity:1,transform:"scale(1)"});var yp=t=>{let{prefixCls:e,loading:n,existIcon:r,className:i,style:o}=t;const a=!!n;return r?m.createElement(fp,{prefixCls:e,className:i,style:o}):m.createElement(hu,{visible:a,motionName:`${e}-loading-icon-motion`,removeOnLeave:!0,onAppearStart:gp,onAppearActive:mp,onEnterStart:gp,onEnterActive:mp,onLeaveStart:mp,onLeaveActive:gp},((t,n)=>{let{className:r,style:a}=t;return m.createElement(fp,{prefixCls:e,className:i,style:Object.assign(Object.assign({},o),a),ref:n,iconClassName:r})}))},vp=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const xp=m.createContext(void 0);var _p=t=>{const{getPrefixCls:e,direction:n}=m.useContext(Gl),{prefixCls:r,size:i,className:o}=t,a=vp(t,["prefixCls","size","className"]),s=e("btn-group",r),[,,l]=Vl();let c="";switch(i){case"large":c="lg";break;case"small":c="sm"}const u=ic()(s,{[`${s}-${c}`]:c,[`${s}-rtl`]:"rtl"===n},o,l);return m.createElement(xp.Provider,{value:i},m.createElement("div",Object.assign({},a,{className:u})))};const bp=/^[\u4e00-\u9fa5]{2}$/,wp=bp.test.bind(bp);function Sp(t){return"text"===t||"link"===t}function Cp(t,e){let n=!1;const r=[];return m.Children.forEach(t,(t=>{const e=typeof t,i="string"===e||"number"===e;if(n&&i){const e=r.length-1,n=r[e];r[e]=`${n}${t}`}else r.push(t);n=i})),m.Children.map(r,(t=>function(t,e){if(null===t||void 0===t)return;const n=e?" ":"";return"string"!==typeof t&&"number"!==typeof t&&function(t){return"string"===typeof t}(t.type)&&wp(t.props.children)?Yh(t,{children:t.props.children.split("").join(n)}):"string"===typeof t?wp(t)?m.createElement("span",null,t.split("").join(n)):m.createElement("span",null,t):qh(t)?m.createElement("span",null,t):t}(t,e)))}function Ep(t,e,n){const{focusElCls:r,focus:i,borderElCls:o}=n,a=o?"> *":"",s=["hover",i?"focus":null,"active"].filter(Boolean).map((t=>`&:${t} ${a}`)).join(",");return{[`&-item:not(${e}-last-item)`]:{marginInlineEnd:-t.lineWidth},"&-item":Object.assign(Object.assign({[s]:{zIndex:2}},r?{[`&${r}`]:{zIndex:2}}:{}),{[`&[disabled] ${a}`]:{zIndex:0}})}}function kp(t,e,n){const{borderElCls:r}=n,i=r?`> ${r}`:"";return{[`&-item:not(${e}-first-item):not(${e}-last-item) ${i}`]:{borderRadius:0},[`&-item:not(${e}-last-item)${e}-first-item`]:{[`& ${i}, &${t}-sm ${i}, &${t}-lg ${i}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${e}-first-item)${e}-last-item`]:{[`& ${i}, &${t}-sm ${i}, &${t}-lg ${i}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function Mp(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{focus:!0};const{componentCls:n}=t,r=`${n}-compact`;return{[r]:Object.assign(Object.assign({},Ep(t,r,e)),kp(n,r,e))}}function Tp(t,e){return{[`&-item:not(${e}-last-item)`]:{marginBottom:-t.lineWidth},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function Ip(t){const e=`${t.componentCls}-compact-vertical`;return{[e]:Object.assign(Object.assign({},Tp(t,e)),(n=t.componentCls,r=e,{[`&-item:not(${r}-first-item):not(${r}-last-item)`]:{borderRadius:0},[`&-item${r}-first-item:not(${r}-last-item)`]:{[`&, &${n}-sm, &${n}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${r}-last-item:not(${r}-first-item)`]:{[`&, &${n}-sm, &${n}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}))};var n,r}const Pp=(t,e)=>({[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{"&:not(:disabled)":{borderInlineEndColor:e}}},"&:not(:first-child)":{[`&, & > ${t}`]:{"&:not(:disabled)":{borderInlineStartColor:e}}}}});var Op=t=>{const{componentCls:e,fontSize:n,lineWidth:r,colorPrimaryHover:i,colorErrorHover:o}=t;return{[`${e}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:-r,[`&, & > ${e}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[e]:{position:"relative",zIndex:1,"&:hover,\n          &:focus,\n          &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${e}-icon-only`]:{fontSize:n}},Pp(`${e}-primary`,i),Pp(`${e}-danger`,o)]}};const Ap=t=>{const{componentCls:e,iconCls:n,buttonFontWeight:r}=t;return{[e]:{outline:"none",position:"relative",display:"inline-block",fontWeight:r,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",backgroundColor:"transparent",border:`${t.lineWidth}px ${t.lineType} transparent`,cursor:"pointer",transition:`all ${t.motionDurationMid} ${t.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",lineHeight:t.lineHeight,color:t.colorText,"> span":{display:"inline-block"},[`${e}-icon`]:{lineHeight:0},[`&:not(${e}-icon-only) > ${e}-icon`]:{[`&${e}-loading-icon, &:not(:last-child)`]:{marginInlineEnd:t.marginXS}},[`> span + ${n}`]:{marginInlineStart:t.marginXS},"> a":{color:"currentColor"},"&:not(:disabled)":Object.assign({},vu(t)),[`&-icon-only${e}-compact-item`]:{flex:"none"},[`&-compact-item${e}-primary`]:{[`&:not([disabled]) + ${e}-compact-item${e}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-t.lineWidth,insetInlineStart:-t.lineWidth,display:"inline-block",width:t.lineWidth,height:`calc(100% + ${2*t.lineWidth}px)`,backgroundColor:t.colorPrimaryHover,content:'""'}}},"&-compact-vertical-item":{[`&${e}-primary`]:{[`&:not([disabled]) + ${e}-compact-vertical-item${e}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-t.lineWidth,insetInlineStart:-t.lineWidth,display:"inline-block",width:`calc(100% + ${2*t.lineWidth}px)`,height:t.lineWidth,backgroundColor:t.colorPrimaryHover,content:'""'}}}}}}},Dp=(t,e)=>({"&:not(:disabled)":{"&:hover":t,"&:active":e}}),Rp=t=>({minWidth:t.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),Lp=t=>({borderRadius:t.controlHeight,paddingInlineStart:t.controlHeight/2,paddingInlineEnd:t.controlHeight/2}),Np=t=>({cursor:"not-allowed",borderColor:t.colorBorder,color:t.colorTextDisabled,backgroundColor:t.colorBgContainerDisabled,boxShadow:"none"}),Fp=(t,e,n,r,i,o,a)=>({[`&${t}-background-ghost`]:Object.assign(Object.assign({color:e||void 0,backgroundColor:"transparent",borderColor:n||void 0,boxShadow:"none"},Dp(Object.assign({backgroundColor:"transparent"},o),Object.assign({backgroundColor:"transparent"},a))),{"&:disabled":{cursor:"not-allowed",color:r||void 0,borderColor:i||void 0}})}),zp=t=>({"&:disabled":Object.assign({},Np(t))}),Bp=t=>Object.assign({},zp(t)),$p=t=>({"&:disabled":{cursor:"not-allowed",color:t.colorTextDisabled}}),jp=t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Bp(t)),{backgroundColor:t.colorBgContainer,borderColor:t.colorBorder,boxShadow:`0 ${t.controlOutlineWidth}px 0 ${t.controlTmpOutline}`}),Dp({color:t.colorPrimaryHover,borderColor:t.colorPrimaryHover},{color:t.colorPrimaryActive,borderColor:t.colorPrimaryActive})),Fp(t.componentCls,t.colorBgContainer,t.colorBgContainer,t.colorTextDisabled,t.colorBorder)),{[`&${t.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({color:t.colorError,borderColor:t.colorError},Dp({color:t.colorErrorHover,borderColor:t.colorErrorBorderHover},{color:t.colorErrorActive,borderColor:t.colorErrorActive})),Fp(t.componentCls,t.colorError,t.colorError,t.colorTextDisabled,t.colorBorder)),zp(t))}),Up=t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Bp(t)),{color:t.colorTextLightSolid,backgroundColor:t.colorPrimary,boxShadow:`0 ${t.controlOutlineWidth}px 0 ${t.controlOutline}`}),Dp({color:t.colorTextLightSolid,backgroundColor:t.colorPrimaryHover},{color:t.colorTextLightSolid,backgroundColor:t.colorPrimaryActive})),Fp(t.componentCls,t.colorPrimary,t.colorPrimary,t.colorTextDisabled,t.colorBorder,{color:t.colorPrimaryHover,borderColor:t.colorPrimaryHover},{color:t.colorPrimaryActive,borderColor:t.colorPrimaryActive})),{[`&${t.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({backgroundColor:t.colorError,boxShadow:`0 ${t.controlOutlineWidth}px 0 ${t.colorErrorOutline}`},Dp({backgroundColor:t.colorErrorHover},{backgroundColor:t.colorErrorActive})),Fp(t.componentCls,t.colorError,t.colorError,t.colorTextDisabled,t.colorBorder,{color:t.colorErrorHover,borderColor:t.colorErrorHover},{color:t.colorErrorActive,borderColor:t.colorErrorActive})),zp(t))}),Vp=t=>Object.assign(Object.assign({},jp(t)),{borderStyle:"dashed"}),Hp=t=>Object.assign(Object.assign(Object.assign({color:t.colorLink},Dp({color:t.colorLinkHover},{color:t.colorLinkActive})),$p(t)),{[`&${t.componentCls}-dangerous`]:Object.assign(Object.assign({color:t.colorError},Dp({color:t.colorErrorHover},{color:t.colorErrorActive})),$p(t))}),Gp=t=>Object.assign(Object.assign(Object.assign({},Dp({color:t.colorText,backgroundColor:t.colorBgTextHover},{color:t.colorText,backgroundColor:t.colorBgTextActive})),$p(t)),{[`&${t.componentCls}-dangerous`]:Object.assign(Object.assign({color:t.colorError},$p(t)),Dp({color:t.colorErrorHover,backgroundColor:t.colorErrorBg},{color:t.colorErrorHover,backgroundColor:t.colorErrorBg}))}),Wp=t=>Object.assign(Object.assign({},Np(t)),{[`&${t.componentCls}:hover`]:Object.assign({},Np(t))}),Xp=t=>{const{componentCls:e}=t;return{[`${e}-default`]:jp(t),[`${e}-primary`]:Up(t),[`${e}-dashed`]:Vp(t),[`${e}-link`]:Hp(t),[`${e}-text`]:Gp(t),[`${e}-disabled`]:Wp(t)}},qp=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const{componentCls:n,controlHeight:r,fontSize:i,lineHeight:o,lineWidth:a,borderRadius:s,buttonPaddingHorizontal:l,iconCls:c}=t;return[{[`${n}${e}`]:{fontSize:i,height:r,padding:`${Math.max(0,(r-i*o)/2-a)}px ${l-a}px`,borderRadius:s,[`&${`${n}-icon-only`}`]:{width:r,paddingInlineStart:0,paddingInlineEnd:0,[`&${n}-round`]:{width:"auto"},[c]:{fontSize:t.buttonIconOnlyFontSize}},[`&${n}-loading`]:{opacity:t.opacityLoading,cursor:"default"},[`${n}-loading-icon`]:{transition:`width ${t.motionDurationSlow} ${t.motionEaseInOut}, opacity ${t.motionDurationSlow} ${t.motionEaseInOut}`}}},{[`${n}${n}-circle${e}`]:Rp(t)},{[`${n}${n}-round${e}`]:Lp(t)}]},Yp=t=>qp(t),Zp=t=>{const e=vh(t,{controlHeight:t.controlHeightSM,padding:t.paddingXS,buttonPaddingHorizontal:8,borderRadius:t.borderRadiusSM,buttonIconOnlyFontSize:t.fontSizeLG-2});return qp(e,`${t.componentCls}-sm`)},Kp=t=>{const e=vh(t,{controlHeight:t.controlHeightLG,fontSize:t.fontSizeLG,borderRadius:t.borderRadiusLG,buttonIconOnlyFontSize:t.fontSizeLG+2});return qp(e,`${t.componentCls}-lg`)},Jp=t=>{const{componentCls:e}=t;return{[e]:{[`&${e}-block`]:{width:"100%"}}}};var Qp=bh("Button",(t=>{const{controlTmpOutline:e,paddingContentHorizontal:n}=t,r=vh(t,{colorOutlineDefault:e,buttonPaddingHorizontal:n,buttonIconOnlyFontSize:t.fontSizeLG,buttonFontWeight:400});return[Ap(r),Zp(r),Yp(r),Kp(r),Jp(r),Xp(r),Op(r),Mp(t),Ip(t)]})),td=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function ed(t){return"danger"===t?{danger:!0}:{type:t}}const nd=(t,e)=>{const{loading:n=!1,prefixCls:r,type:i="default",danger:o,shape:a="default",size:s,styles:l,disabled:c,className:u,rootClassName:h,children:p,icon:d,ghost:f=!1,block:g=!1,htmlType:y="button",classNames:v}=t,x=td(t,["loading","prefixCls","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","ghost","block","htmlType","classNames"]),{getPrefixCls:_,autoInsertSpaceInButton:b,direction:w}=(0,m.useContext)(Gl),S=_("btn",r),[C,E]=Qp(S),k=(0,m.useContext)(Kl),M=null!==c&&void 0!==c?c:k,T=(0,m.useContext)(xp),I=(0,m.useMemo)((()=>function(t){if("object"===typeof t&&t){const e=null===t||void 0===t?void 0:t.delay;return{loading:!1,delay:Number.isNaN(e)||"number"!==typeof e?0:e}}return{loading:!!t,delay:0}}(n)),[n]),[P,O]=(0,m.useState)(I.loading),[A,D]=(0,m.useState)(!1),R=lc(e,(0,m.createRef)()),L=1===m.Children.count(p)&&!d&&!Sp(i);(0,m.useEffect)((()=>{let t=null;return I.delay>0?t=setTimeout((()=>{t=null,O(!0)}),I.delay):O(I.loading),function(){t&&(clearTimeout(t),t=null)}}),[I]),(0,m.useEffect)((()=>{if(!R||!R.current||!1===b)return;const t=R.current.textContent;L&&wp(t)?A||D(!0):A&&D(!1)}),[R]);const N=e=>{const{onClick:n}=t;P||M?e.preventDefault():null===n||void 0===n||n(e)},F=!1!==b,{compactSize:z,compactItemClassnames:B}=lp(S,w),$={large:"lg",small:"sm",middle:void 0},j=Jl((t=>{var e,n;return null!==(n=null!==(e=null!==z&&void 0!==z?z:T)&&void 0!==e?e:s)&&void 0!==n?n:t})),U=j&&$[j]||"",V=P?"loading":d,H=Gh(x,["navigate"]),G=void 0!==H.href&&M,W=ic()(S,E,{[`${S}-${a}`]:"default"!==a&&a,[`${S}-${i}`]:i,[`${S}-${U}`]:U,[`${S}-icon-only`]:!p&&0!==p&&!!V,[`${S}-background-ghost`]:f&&!Sp(i),[`${S}-loading`]:P,[`${S}-two-chinese-chars`]:A&&F&&!P,[`${S}-block`]:g,[`${S}-dangerous`]:!!o,[`${S}-rtl`]:"rtl"===w,[`${S}-disabled`]:G},B,u,h),X=d&&!P?m.createElement(dp,{prefixCls:S,className:null===v||void 0===v?void 0:v.icon,style:null===l||void 0===l?void 0:l.icon},d):m.createElement(yp,{existIcon:!!d,prefixCls:S,loading:!!P}),q=p||0===p?Cp(p,L&&F):null;if(void 0!==H.href)return C(m.createElement("a",Object.assign({},H,{className:W,onClick:N,ref:R}),X,q));let Y=m.createElement("button",Object.assign({},x,{type:y,className:W,onClick:N,disabled:M,ref:R}),X,q);return Sp(i)||(Y=m.createElement(np,{disabled:!!P},Y)),C(Y)},rd=(0,m.forwardRef)(nd);rd.Group=_p,rd.__ANT_BUTTON=!0;var id=rd;var od=(t,e)=>{const n=m.useContext(zs),r=m.useMemo((()=>{var r;const i=e||Rs[t],o=null!==(r=null===n||void 0===n?void 0:n[t])&&void 0!==r?r:{};return Object.assign(Object.assign({},"function"===typeof i?i():i),o||{})}),[t,e,n]);return[r,m.useMemo((()=>{const t=null===n||void 0===n?void 0:n.locale;return(null===n||void 0===n?void 0:n.exist)&&!t?Rs.locale:t}),[n])]};function ad(t){return!(!t||!t.then)}var sd=t=>{const{type:e,children:n,prefixCls:r,buttonProps:i,close:o,autoFocus:a,emitEvent:s,quitOnNullishReturnValue:l,actionFn:c}=t,u=m.useRef(!1),h=m.useRef(null),[p,d]=mc(!1),f=function(){null===o||void 0===o||o.apply(void 0,arguments)};m.useEffect((()=>{let t=null;return a&&(t=setTimeout((()=>{var t;null===(t=h.current)||void 0===t||t.focus()}))),()=>{t&&clearTimeout(t)}}),[]);return m.createElement(id,Object.assign({},ed(e),{onClick:t=>{if(u.current)return;if(u.current=!0,!c)return void f();let e;if(s){if(e=c(t),l&&!ad(e))return u.current=!1,void f(t)}else if(c.length)e=c(o),u.current=!1;else if(e=c(),!e)return void f();(t=>{ad(t)&&(d(!0),t.then((function(){d(!1,!0),f.apply(void 0,arguments),u.current=!1}),(t=>(d(!1,!0),u.current=!1,Promise.reject(t)))))})(e)},loading:p,prefixCls:r},i,{ref:h}),n)};const ld=()=>({height:0,opacity:0}),cd=t=>{const{scrollHeight:e}=t;return{height:e,opacity:1}},ud=t=>({height:t?t.offsetHeight:0}),hd=(t,e)=>!0===(null===e||void 0===e?void 0:e.deadline)||"height"===e.propertyName,pd=t=>void 0===t||"topLeft"!==t&&"topRight"!==t?"slide-up":"slide-down",dd=(t,e,n)=>void 0!==n?n:`${t}-${e}`;var fd,gd=function(){return{motionName:`${arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ant"}-motion-collapse`,onAppearStart:ld,onEnterStart:ld,onAppearActive:cd,onEnterActive:cd,onLeaveStart:ud,onLeaveActive:ld,onAppearEnd:hd,onEnterEnd:hd,onLeaveEnd:hd,motionDeadline:500}},md=m.createContext(null),yd=gi()?m.useLayoutEffect:m.useEffect,vd=function(t,e){var n=m.useRef(!0);yd((function(){return t(n.current)}),e),yd((function(){return n.current=!1,function(){n.current=!0}}),[])},xd=function(t,e){vd((function(e){if(!e)return t()}),e)},_d=vd,bd=[];function wd(t){if("undefined"===typeof document)return 0;if(t||void 0===fd){var e=document.createElement("div");e.style.width="100%",e.style.height="200px";var n=document.createElement("div"),r=n.style;r.position="absolute",r.top="0",r.left="0",r.pointerEvents="none",r.visibility="hidden",r.width="200px",r.height="150px",r.overflow="hidden",n.appendChild(e),document.body.appendChild(n);var i=e.offsetWidth;n.style.overflow="scroll";var o=e.offsetWidth;i===o&&(o=n.clientWidth),document.body.removeChild(n),fd=i-o}return fd}function Sd(t){var e=t.match(/^(.*)px$/),n=Number(null===e||void 0===e?void 0:e[1]);return Number.isNaN(n)?wd():n}function Cd(t){if("undefined"===typeof document||!t||!(t instanceof Element))return{width:0,height:0};var e=getComputedStyle(t,"::-webkit-scrollbar"),n=e.width,r=e.height;return{width:Sd(n),height:Sd(r)}}var Ed="rc-util-locker-".concat(Date.now()),kd=0;function Md(t){var e=!!t,n=Ri(m.useState((function(){return kd+=1,"".concat(Ed,"_").concat(kd)})),1)[0];_d((function(){if(e){var t=wd(),r=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth;ki("\nhtml body {\n  overflow-y: hidden;\n  ".concat(r?"width: calc(100% - ".concat(t,"px);"):"","\n}"),n)}else Ei(n);return function(){Ei(n)}}),[e,n])}var Td=!1;var Id=function(t){return!1!==t&&(gi()&&t?"string"===typeof t?document.querySelector(t):"function"===typeof t?t():t:null)},Pd=m.forwardRef((function(t,e){var n=t.open,r=t.autoLock,i=t.getContainer,o=(t.debug,t.autoDestroy),a=void 0===o||o,s=t.children,l=Ri(m.useState(n),2),c=l[0],u=l[1],h=c||n;m.useEffect((function(){(a||n)&&u(n)}),[n,a]);var p=Ri(m.useState((function(){return Id(i)})),2),d=p[0],f=p[1];m.useEffect((function(){var t=Id(i);f(null!==t&&void 0!==t?t:null)}));var g=function(t,e){var n=Ri(m.useState((function(){return gi()?document.createElement("div"):null})),1)[0],r=m.useRef(!1),i=m.useContext(md),o=Ri(m.useState(bd),2),a=o[0],s=o[1],l=i||(r.current?void 0:function(t){s((function(e){return[t].concat(Sr(e))}))});function c(){n.parentElement||document.body.appendChild(n),r.current=!0}function u(){var t;null===(t=n.parentElement)||void 0===t||t.removeChild(n),r.current=!1}return _d((function(){return t?i?i(c):c():u(),u}),[t]),_d((function(){a.length&&(a.forEach((function(t){return t()})),s(bd))}),[a]),[n,l]}(h&&!d),y=Ri(g,2),v=y[0],x=y[1],_=null!==d&&void 0!==d?d:v;Md(r&&n&&gi()&&(_===v||_===document.body));var b=null;s&&uc(s)&&e&&(b=s.ref);var w=cc(b,e);if(!h||!gi()||void 0===d)return null;var S,C=!1===_||("boolean"===typeof S&&(Td=S),Td),E=s;return e&&(E=m.cloneElement(s,{ref:w})),m.createElement(md.Provider,{value:x},C?E:(0,Dr.createPortal)(E,_))}));var Od=Pd;var Ad=0;function Dd(t){var e=Ri(m.useState("ssr-id"),2),n=e[0],r=e[1],i=Or({},y).useId,o=null===i||void 0===i?void 0:i();return m.useEffect((function(){if(!i){var t=Ad;Ad+=1,r("rc_unique_".concat(t))}}),[]),t||(o||n)}var Rd="".concat("accept acceptCharset accessKey action allowFullScreen allowTransparency\n    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge\n    charSet checked classID className colSpan cols content contentEditable contextMenu\n    controls coords crossOrigin data dateTime default defer dir disabled download draggable\n    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder\n    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity\n    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media\n    mediaGroup method min minLength multiple muted name noValidate nonce open\n    optimum pattern placeholder poster preload radioGroup readOnly rel required\n    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected\n    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style\n    summary tabIndex target title type useMap value width wmode wrap"," ").concat("onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown\n    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick\n    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown\n    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel\n    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough\n    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata\n    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError").split(/[\s\n]+/),Ld="aria-",Nd="data-";function Fd(t,e){return 0===t.indexOf(e)}function zd(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=!1===n?{aria:!0,data:!0,attr:!0}:!0===n?{aria:!0}:Or({},n);var r={};return Object.keys(t).forEach((function(n){(e.aria&&("role"===n||Fd(n,Ld))||e.data&&Fd(n,Nd)||e.attr&&Rd.includes(n))&&(r[n]=t[n])})),r}function Bd(t,e,n){var r=e;return!r&&n&&(r="".concat(t,"-").concat(n)),r}function $d(t,e){var n=t["page".concat(e?"Y":"X","Offset")],r="scroll".concat(e?"Top":"Left");if("number"!==typeof n){var i=t.document;"number"!==typeof(n=i.documentElement[r])&&(n=i.body[r])}return n}var jd=m.memo((function(t){return t.children}),(function(t,e){return!e.shouldUpdate})),Ud={width:0,height:0,overflow:"hidden",outline:"none"},Vd=m.forwardRef((function(t,e){var n=t.prefixCls,r=t.className,i=t.style,o=t.title,a=t.ariaId,s=t.footer,l=t.closable,c=t.closeIcon,u=t.onClose,h=t.children,p=t.bodyStyle,d=t.bodyProps,f=t.modalRender,g=t.onMouseDown,y=t.onMouseUp,v=t.holderRef,x=t.visible,_=t.forceRender,b=t.width,w=t.height,S=(0,m.useRef)(),C=(0,m.useRef)();m.useImperativeHandle(e,(function(){return{focus:function(){var t;null===(t=S.current)||void 0===t||t.focus()},changeActive:function(t){var e=document.activeElement;t&&e===C.current?S.current.focus():t||e!==S.current||C.current.focus()}}}));var E,k,M,T={};void 0!==b&&(T.width=b),void 0!==w&&(T.height=w),s&&(E=m.createElement("div",{className:"".concat(n,"-footer")},s)),o&&(k=m.createElement("div",{className:"".concat(n,"-header")},m.createElement("div",{className:"".concat(n,"-title"),id:a},o))),l&&(M=m.createElement("button",{type:"button",onClick:u,"aria-label":"Close",className:"".concat(n,"-close")},c||m.createElement("span",{className:"".concat(n,"-close-x")})));var I=m.createElement("div",{className:"".concat(n,"-content")},M,k,m.createElement("div",Ui({className:"".concat(n,"-body"),style:p},d),h),E);return m.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":o?a:null,"aria-modal":"true",ref:v,style:Or(Or({},i),T),className:ic()(n,r),onMouseDown:g,onMouseUp:y},m.createElement("div",{tabIndex:0,ref:S,style:Ud,"aria-hidden":"true"}),m.createElement(jd,{shouldUpdate:x||_},f?f(I):I),m.createElement("div",{tabIndex:0,ref:C,style:Ud,"aria-hidden":"true"}))}));var Hd=Vd,Gd=m.forwardRef((function(t,e){var n=t.prefixCls,r=t.title,i=t.style,o=t.className,a=t.visible,s=t.forceRender,l=t.destroyOnClose,c=t.motionName,u=t.ariaId,h=t.onVisibleChanged,p=t.mousePosition,d=(0,m.useRef)(),f=Ri(m.useState(),2),g=f[0],y=f[1],v={};function x(){var t=function(t){var e=t.getBoundingClientRect(),n={left:e.left,top:e.top},r=t.ownerDocument,i=r.defaultView||r.parentWindow;return n.left+=$d(i),n.top+=$d(i,!0),n}(d.current);y(p?"".concat(p.x-t.left,"px ").concat(p.y-t.top,"px"):"")}return g&&(v.transformOrigin=g),m.createElement(hu,{visible:a,onVisibleChanged:h,onAppearPrepare:x,onEnterPrepare:x,forceRender:s,motionName:c,removeOnLeave:l,ref:d},(function(a,s){var l=a.className,c=a.style;return m.createElement(Hd,Ui({},t,{ref:e,title:r,ariaId:u,prefixCls:n,holderRef:s,style:Or(Or(Or({},c),i),v),className:ic()(o,l)}))}))}));Gd.displayName="Content";var Wd=Gd;function Xd(t){var e=t.prefixCls,n=t.style,r=t.visible,i=t.maskProps,o=t.motionName;return m.createElement(hu,{key:"mask",visible:r,motionName:o,leavedClassName:"".concat(e,"-mask-hidden")},(function(t,r){var o=t.className,a=t.style;return m.createElement("div",Ui({ref:r,style:Or(Or({},a),n),className:ic()("".concat(e,"-mask"),o)},i))}))}function qd(t){var e=t.prefixCls,n=void 0===e?"rc-dialog":e,r=t.zIndex,i=t.visible,o=void 0!==i&&i,a=t.keyboard,s=void 0===a||a,l=t.focusTriggerAfterClose,c=void 0===l||l,u=t.wrapStyle,h=t.wrapClassName,p=t.wrapProps,d=t.onClose,f=t.afterOpenChange,g=t.afterClose,y=t.transitionName,v=t.animation,x=t.closable,_=void 0===x||x,b=t.mask,w=void 0===b||b,S=t.maskTransitionName,C=t.maskAnimation,E=t.maskClosable,k=void 0===E||E,M=t.maskStyle,T=t.maskProps,I=t.rootClassName,P=(0,m.useRef)(),O=(0,m.useRef)(),A=(0,m.useRef)(),D=Ri(m.useState(o),2),R=D[0],L=D[1],N=Dd();function F(t){null===d||void 0===d||d(t)}var z=(0,m.useRef)(!1),B=(0,m.useRef)(),$=null;return k&&($=function(t){z.current?z.current=!1:O.current===t.target&&F(t)}),(0,m.useEffect)((function(){o&&(L(!0),mi(O.current,document.activeElement)||(P.current=document.activeElement))}),[o]),(0,m.useEffect)((function(){return function(){clearTimeout(B.current)}}),[]),m.createElement("div",Ui({className:ic()("".concat(n,"-root"),I)},zd(t,{data:!0})),m.createElement(Xd,{prefixCls:n,visible:w&&o,motionName:Bd(n,S,C),style:Or({zIndex:r},M),maskProps:T}),m.createElement("div",Ui({tabIndex:-1,onKeyDown:function(t){if(s&&t.keyCode===sh.ESC)return t.stopPropagation(),void F(t);o&&t.keyCode===sh.TAB&&A.current.changeActive(!t.shiftKey)},className:ic()("".concat(n,"-wrap"),h),ref:O,onClick:$,style:Or(Or({zIndex:r},u),{},{display:R?null:"none"})},p),m.createElement(Wd,Ui({},t,{onMouseDown:function(){clearTimeout(B.current),z.current=!0},onMouseUp:function(){B.current=setTimeout((function(){z.current=!1}))},ref:A,closable:_,ariaId:N,prefixCls:n,visible:o&&R,onClose:F,onVisibleChanged:function(t){if(t)!function(){var t;mi(O.current,document.activeElement)||null===(t=A.current)||void 0===t||t.focus()}();else{if(L(!1),w&&P.current&&c){try{P.current.focus({preventScroll:!0})}catch(kg){}P.current=null}R&&(null===g||void 0===g||g())}null===f||void 0===f||f(t)},motionName:Bd(n,y,v)}))))}var Yd=function(t){var e=t.visible,n=t.getContainer,r=t.forceRender,i=t.destroyOnClose,o=void 0!==i&&i,a=t.afterClose,s=Ri(m.useState(e),2),l=s[0],c=s[1];return m.useEffect((function(){e&&c(!0)}),[e]),r||!o||l?m.createElement(Od,{open:e||r||l,autoDestroy:!1,getContainer:n,autoLock:e||l},m.createElement(qd,Ui({},t,{destroyOnClose:o,afterClose:function(){null===a||void 0===a||a(),c(!1)}}))):null};Yd.displayName="Dialog";var Zd=Yd;const Kd=m.createContext({labelAlign:"right",vertical:!1,itemRef:()=>{}}),Jd=m.createContext(null),Qd=m.createContext({prefixCls:""}),tf=m.createContext({}),ef=t=>{let{children:e,status:n,override:r}=t;const i=(0,m.useContext)(tf),o=(0,m.useMemo)((()=>{const t=Object.assign({},i);return r&&delete t.isFormItemInput,n&&(delete t.status,delete t.hasFeedback,delete t.feedbackIcon),t}),[n,r,i]);return m.createElement(tf.Provider,{value:o},e)},nf=()=>gi()&&window.document.documentElement;let rf;const of=t=>({animationDuration:t,animationFillMode:"both"}),af=t=>({animationDuration:t,animationFillMode:"both"}),sf=function(t,e,n,r){const i=arguments.length>4&&void 0!==arguments[4]&&arguments[4]?"&":"";return{[`\n      ${i}${t}-enter,\n      ${i}${t}-appear\n    `]:Object.assign(Object.assign({},of(r)),{animationPlayState:"paused"}),[`${i}${t}-leave`]:Object.assign(Object.assign({},af(r)),{animationPlayState:"paused"}),[`\n      ${i}${t}-enter${t}-enter-active,\n      ${i}${t}-appear${t}-appear-active\n    `]:{animationName:e,animationPlayState:"running"},[`${i}${t}-leave${t}-leave-active`]:{animationName:n,animationPlayState:"running",pointerEvents:"none"}}},lf=new Uo("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),cf=new Uo("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),uf=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{antCls:n}=t,r=`${n}-fade`,i=e?"&":"";return[sf(r,lf,cf,t.motionDurationMid,e),{[`\n        ${i}${r}-enter,\n        ${i}${r}-appear\n      `]:{opacity:0,animationTimingFunction:"linear"},[`${i}${r}-leave`]:{animationTimingFunction:"linear"}}]},hf=new Uo("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),pf=new Uo("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),df=new Uo("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),ff=new Uo("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),gf=new Uo("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),mf=new Uo("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),yf=new Uo("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),vf=new Uo("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),xf=new Uo("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),_f=new Uo("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),bf=new Uo("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),wf=new Uo("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),Sf={zoom:{inKeyframes:hf,outKeyframes:pf},"zoom-big":{inKeyframes:df,outKeyframes:ff},"zoom-big-fast":{inKeyframes:df,outKeyframes:ff},"zoom-left":{inKeyframes:yf,outKeyframes:vf},"zoom-right":{inKeyframes:xf,outKeyframes:_f},"zoom-up":{inKeyframes:gf,outKeyframes:mf},"zoom-down":{inKeyframes:bf,outKeyframes:wf}},Cf=(t,e)=>{const{antCls:n}=t,r=`${n}-${e}`,{inKeyframes:i,outKeyframes:o}=Sf[e];return[sf(r,i,o,"zoom-big-fast"===e?t.motionDurationFast:t.motionDurationMid),{[`\n        ${r}-enter,\n        ${r}-appear\n      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:t.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${r}-leave`]:{animationTimingFunction:t.motionEaseInOutCirc}}]};function Ef(t){return{position:t,top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0}}const kf=t=>{const{componentCls:e,antCls:n}=t;return[{[`${e}-root`]:{[`${e}${n}-zoom-enter, ${e}${n}-zoom-appear`]:{transform:"none",opacity:0,animationDuration:t.motionDurationSlow,userSelect:"none"},[`${e}${n}-zoom-leave ${e}-content`]:{pointerEvents:"none"},[`${e}-mask`]:Object.assign(Object.assign({},Ef("fixed")),{zIndex:t.zIndexPopupBase,height:"100%",backgroundColor:t.colorBgMask,[`${e}-hidden`]:{display:"none"}}),[`${e}-wrap`]:Object.assign(Object.assign({},Ef("fixed")),{overflow:"auto",outline:0,WebkitOverflowScrolling:"touch"})}},{[`${e}-root`]:uf(t)}]},Mf=t=>{const{componentCls:e}=t;return[{[`${e}-root`]:{[`${e}-wrap`]:{zIndex:t.zIndexPopupBase,position:"fixed",inset:0,overflow:"auto",outline:0,WebkitOverflowScrolling:"touch"},[`${e}-wrap-rtl`]:{direction:"rtl"},[`${e}-centered`]:{textAlign:"center","&::before":{display:"inline-block",width:0,height:"100%",verticalAlign:"middle",content:'""'},[e]:{top:0,display:"inline-block",paddingBottom:0,textAlign:"start",verticalAlign:"middle"}},[`@media (max-width: ${t.screenSMMax})`]:{[e]:{maxWidth:"calc(100vw - 16px)",margin:`${t.marginXS} auto`},[`${e}-centered`]:{[e]:{flex:1}}}}},{[e]:Object.assign(Object.assign({},fu(t)),{pointerEvents:"none",position:"relative",top:100,width:"auto",maxWidth:`calc(100vw - ${2*t.margin}px)`,margin:"0 auto",paddingBottom:t.paddingLG,[`${e}-title`]:{margin:0,color:t.titleColor,fontWeight:t.fontWeightStrong,fontSize:t.titleFontSize,lineHeight:t.titleLineHeight,wordWrap:"break-word"},[`${e}-content`]:{position:"relative",backgroundColor:t.contentBg,backgroundClip:"padding-box",border:0,borderRadius:t.borderRadiusLG,boxShadow:t.boxShadow,pointerEvents:"auto",padding:`${t.paddingMD}px ${t.paddingContentHorizontalLG}px`},[`${e}-close`]:Object.assign({position:"absolute",top:(t.modalHeaderHeight-t.modalCloseBtnSize)/2,insetInlineEnd:(t.modalHeaderHeight-t.modalCloseBtnSize)/2,zIndex:t.zIndexPopupBase+10,padding:0,color:t.modalCloseIconColor,fontWeight:t.fontWeightStrong,lineHeight:1,textDecoration:"none",background:"transparent",borderRadius:t.borderRadiusSM,width:t.modalCloseBtnSize,height:t.modalCloseBtnSize,border:0,outline:0,cursor:"pointer",transition:`color ${t.motionDurationMid}, background-color ${t.motionDurationMid}`,"&-x":{display:"flex",fontSize:t.fontSizeLG,fontStyle:"normal",lineHeight:`${t.modalCloseBtnSize}px`,justifyContent:"center",textTransform:"none",textRendering:"auto"},"&:hover":{color:t.modalIconHoverColor,backgroundColor:t.wireframe?"transparent":t.colorFillContent,textDecoration:"none"},"&:active":{backgroundColor:t.wireframe?"transparent":t.colorFillContentHover}},vu(t)),[`${e}-header`]:{color:t.colorText,background:t.headerBg,borderRadius:`${t.borderRadiusLG}px ${t.borderRadiusLG}px 0 0`,marginBottom:t.marginXS},[`${e}-body`]:{fontSize:t.fontSize,lineHeight:t.lineHeight,wordWrap:"break-word"},[`${e}-footer`]:{textAlign:"end",background:t.footerBg,marginTop:t.marginSM,[`${t.antCls}-btn + ${t.antCls}-btn:not(${t.antCls}-dropdown-trigger)`]:{marginBottom:0,marginInlineStart:t.marginXS}},[`${e}-open`]:{overflow:"hidden"}})},{[`${e}-pure-panel`]:{top:"auto",padding:0,display:"flex",flexDirection:"column",[`${e}-content,\n          ${e}-body,\n          ${e}-confirm-body-wrapper`]:{display:"flex",flexDirection:"column",flex:"auto"},[`${e}-confirm-body`]:{marginBottom:"auto"}}}]},Tf=t=>{const{componentCls:e}=t,n=`${e}-confirm`;return{[n]:{"&-rtl":{direction:"rtl"},[`${t.antCls}-modal-header`]:{display:"none"},[`${n}-body-wrapper`]:Object.assign({},{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),[`${n}-body`]:{display:"flex",flexWrap:"wrap",alignItems:"center",[`${n}-title`]:{flex:"0 0 100%",display:"block",overflow:"hidden",color:t.colorTextHeading,fontWeight:t.fontWeightStrong,fontSize:t.titleFontSize,lineHeight:t.titleLineHeight,[`+ ${n}-content`]:{marginBlockStart:t.marginXS,flexBasis:"100%",maxWidth:`calc(100% - ${t.modalConfirmIconSize+t.marginSM}px)`}},[`${n}-content`]:{color:t.colorText,fontSize:t.fontSize},[`> ${t.iconCls}`]:{flex:"none",marginInlineEnd:t.marginSM,fontSize:t.modalConfirmIconSize,[`+ ${n}-title`]:{flex:1},[`+ ${n}-title + ${n}-content`]:{marginInlineStart:t.modalConfirmIconSize+t.marginSM}}},[`${n}-btns`]:{textAlign:"end",marginTop:t.marginSM,[`${t.antCls}-btn + ${t.antCls}-btn`]:{marginBottom:0,marginInlineStart:t.marginXS}}},[`${n}-error ${n}-body > ${t.iconCls}`]:{color:t.colorError},[`${n}-warning ${n}-body > ${t.iconCls},\n        ${n}-confirm ${n}-body > ${t.iconCls}`]:{color:t.colorWarning},[`${n}-info ${n}-body > ${t.iconCls}`]:{color:t.colorInfo},[`${n}-success ${n}-body > ${t.iconCls}`]:{color:t.colorSuccess}}},If=t=>{const{componentCls:e}=t;return{[`${e}-root`]:{[`${e}-wrap-rtl`]:{direction:"rtl",[`${e}-confirm-body`]:{direction:"rtl"}}}}},Pf=t=>{const{componentCls:e,antCls:n}=t,r=`${e}-confirm`;return{[e]:{[`${e}-content`]:{padding:0},[`${e}-header`]:{padding:t.modalHeaderPadding,borderBottom:`${t.modalHeaderBorderWidth}px ${t.modalHeaderBorderStyle} ${t.modalHeaderBorderColorSplit}`,marginBottom:0},[`${e}-body`]:{padding:t.modalBodyPadding},[`${e}-footer`]:{padding:`${t.modalFooterPaddingVertical}px ${t.modalFooterPaddingHorizontal}px`,borderTop:`${t.modalFooterBorderWidth}px ${t.modalFooterBorderStyle} ${t.modalFooterBorderColorSplit}`,borderRadius:`0 0 ${t.borderRadiusLG}px ${t.borderRadiusLG}px`,marginTop:0}},[r]:{[`${n}-modal-body`]:{padding:`${2*t.padding}px ${2*t.padding}px ${t.paddingLG}px`},[`${r}-body`]:{[`> ${t.iconCls}`]:{marginInlineEnd:t.margin,[`+ ${r}-title + ${r}-content`]:{marginInlineStart:t.modalConfirmIconSize+t.margin}}},[`${r}-btns`]:{marginTop:t.marginLG}}}};var Of=bh("Modal",(t=>{const e=t.padding,n=t.fontSizeHeading5,r=t.lineHeightHeading5,i=vh(t,{modalBodyPadding:t.paddingLG,modalHeaderPadding:`${e}px ${t.paddingLG}px`,modalHeaderBorderWidth:t.lineWidth,modalHeaderBorderStyle:t.lineType,modalHeaderBorderColorSplit:t.colorSplit,modalHeaderHeight:r*n+2*e,modalFooterBorderColorSplit:t.colorSplit,modalFooterBorderStyle:t.lineType,modalFooterPaddingVertical:t.paddingXS,modalFooterPaddingHorizontal:t.padding,modalFooterBorderWidth:t.lineWidth,modalIconHoverColor:t.colorIconHover,modalCloseIconColor:t.colorIcon,modalCloseBtnSize:t.fontSize*t.lineHeight,modalConfirmIconSize:t.fontSize*t.lineHeight});return[Mf(i),Tf(i),If(i),kf(i),t.wireframe&&Pf(i),Cf(i,"zoom")]}),(t=>({footerBg:"transparent",headerBg:t.colorBgElevated,titleLineHeight:t.lineHeightHeading5,titleFontSize:t.fontSizeHeading5,contentBg:t.colorBgElevated,titleColor:t.colorTextHeading}))),Af=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function Df(t,e){return m.createElement("span",{className:`${t}-close-x`},e||m.createElement(Ih,{className:`${t}-close-icon`}))}const Rf=t=>{const{okText:e,okType:n="primary",cancelText:r,confirmLoading:i,onOk:o,onCancel:a,okButtonProps:s,cancelButtonProps:l}=t,[c]=od("Modal",Fs());return m.createElement(m.Fragment,null,m.createElement(id,Object.assign({onClick:a},l),r||(null===c||void 0===c?void 0:c.cancelText)),m.createElement(id,Object.assign({},ed(n),{loading:i,onClick:o},s),e||(null===c||void 0===c?void 0:c.okText)))};var Lf=t=>{const{prefixCls:e,className:n,closeIcon:r,closable:i,type:o,title:a,children:s}=t,l=Af(t,["prefixCls","className","closeIcon","closable","type","title","children"]),{getPrefixCls:c}=m.useContext(Gl),u=c(),h=e||c("modal"),[,p]=Of(h),d=`${h}-confirm`;let f={};return f=o?{closable:null!==i&&void 0!==i&&i,title:"",footer:"",children:m.createElement($f,Object.assign({},t,{confirmPrefixCls:d,rootPrefixCls:u,content:s}))}:{closable:null===i||void 0===i||i,title:a,footer:void 0===t.footer?m.createElement(Rf,Object.assign({},t)):t.footer,children:s},m.createElement(Hd,Object.assign({prefixCls:h,className:ic()(p,`${h}-pure-panel`,o&&d,o&&`${d}-${o}`,n)},l,{closeIcon:Df(h,r),closable:i},f))},Nf=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};let Ff;const zf=t=>{Ff={x:t.pageX,y:t.pageY},setTimeout((()=>{Ff=null}),100)};nf()&&document.documentElement.addEventListener("click",zf,!0);var Bf=t=>{var e;const{getPopupContainer:n,getPrefixCls:r,direction:i}=m.useContext(Gl),o=e=>{const{onCancel:n}=t;null===n||void 0===n||n(e)},{prefixCls:a,className:s,rootClassName:l,open:c,wrapClassName:u,centered:h,getContainer:p,closeIcon:d,focusTriggerAfterClose:f=!0,visible:g,width:y=520,footer:v}=t,x=Nf(t,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose","visible","width","footer"]),_=r("modal",a),b=r(),[w,S]=Of(_),C=ic()(u,{[`${_}-centered`]:!!h,[`${_}-wrap-rtl`]:"rtl"===i});const E=void 0===v?m.createElement(Rf,Object.assign({},t,{onOk:e=>{const{onOk:n}=t;null===n||void 0===n||n(e)},onCancel:o})):v;return w(m.createElement(cp,null,m.createElement(ef,{status:!0,override:!0},m.createElement(Zd,Object.assign({width:y},x,{getContainer:void 0===p?n:p,prefixCls:_,rootClassName:ic()(S,l),wrapClassName:C,footer:E,visible:null!==c&&void 0!==c?c:g,mousePosition:null!==(e=x.mousePosition)&&void 0!==e?e:Ff,onClose:o,closeIcon:Df(_,d),focusTriggerAfterClose:f,transitionName:dd(b,"zoom",t.transitionName),maskTransitionName:dd(b,"fade",t.maskTransitionName),className:ic()(S,s)})))))};function $f(t){const{icon:e,onCancel:n,onOk:r,close:i,okText:o,okButtonProps:a,cancelText:s,cancelButtonProps:l,confirmPrefixCls:c,rootPrefixCls:u,type:h,okCancel:p,footer:d,locale:f}=t;let g=e;if(!e&&null!==e)switch(h){case"info":g=m.createElement(oh,null);break;case"success":g=m.createElement(nh,null);break;case"error":g=m.createElement(Qu,null);break;default:g=m.createElement(Zu,null)}const y=t.okType||"primary",v=null!==p&&void 0!==p?p:"confirm"===h,x=null!==t.autoFocusButton&&(t.autoFocusButton||"ok"),[_]=od("Modal"),b=f||_,w=v&&m.createElement(sd,{actionFn:n,close:i,autoFocus:"cancel"===x,buttonProps:l,prefixCls:`${u}-btn`},s||(null===b||void 0===b?void 0:b.cancelText));return m.createElement("div",{className:`${c}-body-wrapper`},m.createElement("div",{className:`${c}-body`},g,void 0===t.title?null:m.createElement("span",{className:`${c}-title`},t.title),m.createElement("div",{className:`${c}-content`},t.content)),void 0===d?m.createElement("div",{className:`${c}-btns`},w,m.createElement(sd,{type:y,actionFn:r,close:i,autoFocus:"ok"===x,buttonProps:a,prefixCls:`${u}-btn`},o||(v?null===b||void 0===b?void 0:b.okText:null===b||void 0===b?void 0:b.justOkText))):d)}var jf=t=>{const{close:e,zIndex:n,afterClose:r,visible:i,open:o,keyboard:a,centered:s,getContainer:l,maskStyle:c,direction:u,prefixCls:h,wrapClassName:p,rootPrefixCls:d,iconPrefixCls:f,bodyStyle:g,closable:y=!1,closeIcon:v,modalRender:x,focusTriggerAfterClose:_}=t;const b=`${h}-confirm`,w=t.width||416,S=t.style||{},C=void 0===t.mask||t.mask,E=void 0!==t.maskClosable&&t.maskClosable,k=ic()(b,`${b}-${t.type}`,{[`${b}-rtl`]:"rtl"===u},t.className);return m.createElement(Iu,{prefixCls:d,iconPrefixCls:f,direction:u},m.createElement(Bf,{prefixCls:h,className:k,wrapClassName:ic()({[`${b}-centered`]:!!t.centered},p),onCancel:()=>null===e||void 0===e?void 0:e({triggerCancel:!0}),open:o,title:"",footer:null,transitionName:dd(d,"zoom",t.transitionName),maskTransitionName:dd(d,"fade",t.maskTransitionName),mask:C,maskClosable:E,maskStyle:c,style:S,bodyStyle:g,width:w,zIndex:n,afterClose:r,keyboard:a,centered:s,getContainer:l,closable:y,closeIcon:v,modalRender:x,focusTriggerAfterClose:_},m.createElement($f,Object.assign({},t,{confirmPrefixCls:b}))))};var Uf=[],Vf=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};let Hf="";function Gf(t){const e=document.createDocumentFragment();let n,r=Object.assign(Object.assign({},t),{close:a,open:!0});function i(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const o=r.some((t=>t&&t.triggerCancel));t.onCancel&&o&&t.onCancel.apply(t,[()=>{}].concat(Sr(r.slice(1))));for(let t=0;t<Uf.length;t++){if(Uf[t]===a){Uf.splice(t,1);break}}Gr(e)}function o(t){var{okText:r,cancelText:i,prefixCls:o}=t,a=Vf(t,["okText","cancelText","prefixCls"]);clearTimeout(n),n=setTimeout((()=>{const t=Fs(),{getPrefixCls:n,getIconPrefixCls:s}=ku(),l=n(void 0,Hf),c=o||`${l}-modal`,u=s();jr(m.createElement(jf,Object.assign({},a,{prefixCls:c,rootPrefixCls:l,iconPrefixCls:u,okText:r,locale:t,cancelText:i||t.cancelText})),e)}))}function a(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];r=Object.assign(Object.assign({},r),{open:!1,afterClose:()=>{"function"===typeof t.afterClose&&t.afterClose(),i.apply(this,n)}}),r.visible&&delete r.visible,o(r)}return o(r),Uf.push(a),{destroy:a,update:function(t){r="function"===typeof t?t(r):Object.assign(Object.assign({},r),t),o(r)}}}function Wf(t){return Object.assign(Object.assign({},t),{type:"warning"})}function Xf(t){return Object.assign(Object.assign({},t),{type:"info"})}function qf(t){return Object.assign(Object.assign({},t),{type:"success"})}function Yf(t){return Object.assign(Object.assign({},t),{type:"error"})}function Zf(t){return Object.assign(Object.assign({},t),{type:"confirm"})}const Kf=(t,e)=>{let{afterClose:n,config:r}=t;var i;const[o,a]=m.useState(!0),[s,l]=m.useState(r),{direction:c,getPrefixCls:u}=m.useContext(Gl),h=u("modal"),p=u(),d=function(){a(!1);for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=e.some((t=>t&&t.triggerCancel));s.onCancel&&r&&s.onCancel.apply(s,[()=>{}].concat(Sr(e.slice(1))))};m.useImperativeHandle(e,(()=>({destroy:d,update:t=>{l((e=>Object.assign(Object.assign({},e),t)))}})));const f=null!==(i=s.okCancel)&&void 0!==i?i:"confirm"===s.type,[g]=od("Modal",Rs.Modal);return m.createElement(jf,Object.assign({prefixCls:h,rootPrefixCls:p},s,{close:d,open:o,afterClose:()=>{var t;n(),null===(t=s.afterClose)||void 0===t||t.call(s)},okText:s.okText||(f?null===g||void 0===g?void 0:g.okText:null===g||void 0===g?void 0:g.justOkText),direction:s.direction||c,cancelText:s.cancelText||(null===g||void 0===g?void 0:g.cancelText)}))};var Jf=m.forwardRef(Kf);let Qf=0;const tg=m.memo(m.forwardRef(((t,e)=>{const[n,r]=function(){const[t,e]=m.useState([]);return[t,m.useCallback((t=>(e((e=>[].concat(Sr(e),[t]))),()=>{e((e=>e.filter((e=>e!==t))))})),[])]}();return m.useImperativeHandle(e,(()=>({patchElement:r})),[]),m.createElement(m.Fragment,null,n)})));var eg=function(){const t=m.useRef(null),[e,n]=m.useState([]);m.useEffect((()=>{if(e.length){Sr(e).forEach((t=>{t()})),n([])}}),[e]);const r=m.useCallback((e=>function(r){var i;Qf+=1;const o=m.createRef();let a;const s=m.createElement(Jf,{key:`modal-${Qf}`,config:e(r),ref:o,afterClose:()=>{null===a||void 0===a||a()}});return a=null===(i=t.current)||void 0===i?void 0:i.patchElement(s),a&&Uf.push(a),{destroy:()=>{function t(){var t;null===(t=o.current)||void 0===t||t.destroy()}o.current?t():n((e=>[].concat(Sr(e),[t])))},update:t=>{function e(){var e;null===(e=o.current)||void 0===e||e.update(t)}o.current?e():n((t=>[].concat(Sr(t),[e])))}}}),[]);return[m.useMemo((()=>({info:r(Xf),success:r(qf),error:r(Yf),warning:r(Wf),confirm:r(Zf)})),[]),m.createElement(tg,{key:"modal-holder",ref:t})]};function ng(t){return Gf(Wf(t))}const rg=Bf;rg.useModal=eg,rg.info=function(t){return Gf(Xf(t))},rg.success=function(t){return Gf(qf(t))},rg.error=function(t){return Gf(Yf(t))},rg.warning=ng,rg.warn=ng,rg.confirm=function(t){return Gf(Zf(t))},rg.destroyAll=function(){for(;Uf.length;){const t=Uf.pop();t&&t()}},rg.config=function(t){let{rootPrefixCls:e}=t;Hf=e},rg._InternalPanelDoNotUseOrYouWillBeFired=Lf;var ig=rg,og={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},ag=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:og}))};var sg=m.forwardRef(ag);var lg=t=>{let{onData:e}=t;const[n,r]=(0,m.useState)(!1),[i,o]=(0,m.useState)(!1),[a,s]=(0,m.useState)(null),[l,c]=(0,m.useState)(null),u=()=>{r(!0),setTimeout((()=>{r(!1),o(!1),e(a)}),3e3)},h=()=>{o(!1),s(null),c(null)};return(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsx)(id,{type:"primary",className:"Upload_Button",onClick:()=>{o(!0)},children:"+"}),(0,lr.jsxs)(ig,{open:i,title:"Upload CSV",onOk:u,onCancel:h,footer:[(0,lr.jsx)(id,{onClick:h,children:"Cancel"},"back"),(0,lr.jsx)(id,{type:"primary",loading:n,onClick:u,children:"Submit"},"submit")],children:[(0,lr.jsx)("input",{type:"file",onChange:t=>{const e=t.target.files[0];"text/csv"===e.type||e.name.endsWith(".csv")?e.size>52428800?Hh.error("File size exceeds the limit (50MB)."):(Hh.success(`${e.name} file uploaded successfully.`),c(e.name),s(e)):Hh.error("You can only upload CSV files!")},accept:".csv"}),a&&(0,lr.jsxs)("div",{children:[(0,lr.jsx)("h3",{children:"Uploaded CSV file:"}),(0,lr.jsxs)("div",{children:[l," ",(0,lr.jsx)(sg,{onClick:()=>{s(null),c(null)},style:{cursor:"pointer",color:"red"}})]})]})]})]})};function cg(t){const[e,n]=m.useState(t);return m.useEffect((()=>{const e=setTimeout((()=>{n(t)}),t.length?0:10);return()=>{clearTimeout(e)}}),[t]),e}var ug=t=>({[t.componentCls]:{[`${t.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${t.motionDurationMid} ${t.motionEaseInOut},\n        opacity ${t.motionDurationMid} ${t.motionEaseInOut} !important`}},[`${t.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${t.motionDurationMid} ${t.motionEaseInOut},\n        opacity ${t.motionDurationMid} ${t.motionEaseInOut} !important`}}});var hg=t=>{const{componentCls:e}=t,n=`${e}-show-help-item`;return{[`${e}-show-help`]:{transition:`opacity ${t.motionDurationSlow} ${t.motionEaseInOut}`,"&-appear, &-enter":{opacity:0,"&-active":{opacity:1}},"&-leave":{opacity:1,"&-active":{opacity:0}},[n]:{overflow:"hidden",transition:`height ${t.motionDurationSlow} ${t.motionEaseInOut},\n                     opacity ${t.motionDurationSlow} ${t.motionEaseInOut},\n                     transform ${t.motionDurationSlow} ${t.motionEaseInOut} !important`,[`&${n}-appear, &${n}-enter`]:{transform:"translateY(-5px)",opacity:0,"&-active":{transform:"translateY(0)",opacity:1}},[`&${n}-leave-active`]:{transform:"translateY(-5px)"}}}}};const pg=t=>({legend:{display:"block",width:"100%",marginBottom:t.marginLG,padding:0,color:t.colorTextDescription,fontSize:t.fontSizeLG,lineHeight:"inherit",border:0,borderBottom:`${t.lineWidth}px ${t.lineType} ${t.colorBorder}`},label:{fontSize:t.fontSize},'input[type="search"]':{boxSizing:"border-box"},'input[type="radio"], input[type="checkbox"]':{lineHeight:"normal"},'input[type="file"]':{display:"block"},'input[type="range"]':{display:"block",width:"100%"},"select[multiple], select[size]":{height:"auto"},"input[type='file']:focus,\n  input[type='radio']:focus,\n  input[type='checkbox']:focus":{outline:0,boxShadow:`0 0 0 ${t.controlOutlineWidth}px ${t.controlOutline}`},output:{display:"block",paddingTop:15,color:t.colorText,fontSize:t.fontSize,lineHeight:t.lineHeight}}),dg=(t,e)=>{const{formItemCls:n}=t;return{[n]:{[`${n}-label > label`]:{height:e},[`${n}-control-input`]:{minHeight:e}}}},fg=t=>{const{componentCls:e}=t;return{[t.componentCls]:Object.assign(Object.assign(Object.assign({},fu(t)),pg(t)),{[`${e}-text`]:{display:"inline-block",paddingInlineEnd:t.paddingSM},"&-small":Object.assign({},dg(t,t.controlHeightSM)),"&-large":Object.assign({},dg(t,t.controlHeightLG))})}},gg=t=>{const{formItemCls:e,iconCls:n,componentCls:r,rootPrefixCls:i}=t;return{[e]:Object.assign(Object.assign({},fu(t)),{marginBottom:t.marginLG,verticalAlign:"top","&-with-help":{transition:"none"},[`&-hidden,\n        &-hidden.${i}-row`]:{display:"none"},"&-has-warning":{[`${e}-split`]:{color:t.colorError}},"&-has-error":{[`${e}-split`]:{color:t.colorWarning}},[`${e}-label`]:{display:"inline-block",flexGrow:0,overflow:"hidden",whiteSpace:"nowrap",textAlign:"end",verticalAlign:"middle","&-left":{textAlign:"start"},"&-wrap":{overflow:"unset",lineHeight:`${t.lineHeight} - 0.25em`,whiteSpace:"unset"},"> label":{position:"relative",display:"inline-flex",alignItems:"center",maxWidth:"100%",height:t.controlHeight,color:t.colorTextHeading,fontSize:t.fontSize,[`> ${n}`]:{fontSize:t.fontSize,verticalAlign:"top"},[`&${e}-required:not(${e}-required-mark-optional)::before`]:{display:"inline-block",marginInlineEnd:t.marginXXS,color:t.colorError,fontSize:t.fontSize,fontFamily:"SimSun, sans-serif",lineHeight:1,content:'"*"',[`${r}-hide-required-mark &`]:{display:"none"}},[`${e}-optional`]:{display:"inline-block",marginInlineStart:t.marginXXS,color:t.colorTextDescription,[`${r}-hide-required-mark &`]:{display:"none"}},[`${e}-tooltip`]:{color:t.colorTextDescription,cursor:"help",writingMode:"horizontal-tb",marginInlineStart:t.marginXXS},"&::after":{content:'":"',position:"relative",marginBlock:0,marginInlineStart:t.marginXXS/2,marginInlineEnd:t.marginXS},[`&${e}-no-colon::after`]:{content:'" "'}}},[`${e}-control`]:{display:"flex",flexDirection:"column",flexGrow:1,[`&:first-child:not([class^="'${i}-col-'"]):not([class*="' ${i}-col-'"])`]:{width:"100%"},"&-input":{position:"relative",display:"flex",alignItems:"center",minHeight:t.controlHeight,"&-content":{flex:"auto",maxWidth:"100%"}}},[e]:{"&-explain, &-extra":{clear:"both",color:t.colorTextDescription,fontSize:t.fontSize,lineHeight:t.lineHeight},"&-explain-connected":{width:"100%"},"&-extra":{minHeight:t.controlHeightSM,transition:`color ${t.motionDurationMid} ${t.motionEaseOut}`},"&-explain":{"&-error":{color:t.colorError},"&-warning":{color:t.colorWarning}}},[`&-with-help ${e}-explain`]:{height:"auto",opacity:1},[`${e}-feedback-icon`]:{fontSize:t.fontSize,textAlign:"center",visibility:"visible",animationName:hf,animationDuration:t.motionDurationMid,animationTimingFunction:t.motionEaseOutBack,pointerEvents:"none","&-success":{color:t.colorSuccess},"&-error":{color:t.colorError},"&-warning":{color:t.colorWarning},"&-validating":{color:t.colorPrimary}}})}},mg=t=>{const{componentCls:e,formItemCls:n,rootPrefixCls:r}=t;return{[`${e}-horizontal`]:{[`${n}-label`]:{flexGrow:0},[`${n}-control`]:{flex:"1 1 0",minWidth:0},[`${n}-label.${r}-col-24 + ${n}-control`]:{minWidth:"unset"}}}},yg=t=>{const{componentCls:e,formItemCls:n}=t;return{[`${e}-inline`]:{display:"flex",flexWrap:"wrap",[n]:{flex:"none",marginInlineEnd:t.margin,marginBottom:0,"&-row":{flexWrap:"nowrap"},"&-with-help":{marginBottom:t.marginLG},[`> ${n}-label,\n        > ${n}-control`]:{display:"inline-block",verticalAlign:"top"},[`> ${n}-label`]:{flex:"none"},[`${e}-text`]:{display:"inline-block"},[`${n}-has-feedback`]:{display:"inline-block"}}}}},vg=t=>({margin:0,padding:`0 0 ${t.paddingXS}px`,whiteSpace:"initial",textAlign:"start","> label":{margin:0,"&::after":{display:"none"}}}),xg=t=>{const{componentCls:e,formItemCls:n}=t;return{[`${n} ${n}-label`]:vg(t),[e]:{[n]:{flexWrap:"wrap",[`${n}-label,\n          ${n}-control`]:{flex:"0 0 100%",maxWidth:"100%"}}}}},_g=t=>{const{componentCls:e,formItemCls:n,rootPrefixCls:r}=t;return{[`${e}-vertical`]:{[n]:{"&-row":{flexDirection:"column"},"&-label > label":{height:"auto"},[`${e}-item-control`]:{width:"100%"}}},[`${e}-vertical ${n}-label,\n      .${r}-col-24${n}-label,\n      .${r}-col-xl-24${n}-label`]:vg(t),[`@media (max-width: ${t.screenXSMax}px)`]:[xg(t),{[e]:{[`.${r}-col-xs-24${n}-label`]:vg(t)}}],[`@media (max-width: ${t.screenSMMax}px)`]:{[e]:{[`.${r}-col-sm-24${n}-label`]:vg(t)}},[`@media (max-width: ${t.screenMDMax}px)`]:{[e]:{[`.${r}-col-md-24${n}-label`]:vg(t)}},[`@media (max-width: ${t.screenLGMax}px)`]:{[e]:{[`.${r}-col-lg-24${n}-label`]:vg(t)}}}};var bg=bh("Form",((t,e)=>{let{rootPrefixCls:n}=e;const r=vh(t,{formItemCls:`${t.componentCls}-item`,rootPrefixCls:n});return[fg(r),gg(r),hg(r),mg(r),yg(r),_g(r),ug(r),hf]}));const wg=[];function Sg(t,e,n){return{key:"string"===typeof t?t:`${e}-${arguments.length>3&&void 0!==arguments[3]?arguments[3]:0}`,error:t,errorStatus:n}}function Cg(t){let{help:e,helpStatus:n,errors:r=wg,warnings:i=wg,className:o,fieldId:a,onVisibleChanged:s}=t;const{prefixCls:l}=m.useContext(Qd),c=`${l}-item-explain`,[,u]=bg(l),h=(0,m.useMemo)((()=>gd(l)),[l]),p=cg(r),d=cg(i),f=m.useMemo((()=>void 0!==e&&null!==e?[Sg(e,"help",n)]:[].concat(Sr(p.map(((t,e)=>Sg(t,"error","error",e)))),Sr(d.map(((t,e)=>Sg(t,"warning","warning",e)))))),[e,n,p,d]),g={};return a&&(g.id=`${a}_help`),m.createElement(hu,{motionDeadline:h.motionDeadline,motionName:`${l}-show-help`,visible:!!f.length,onVisibleChanged:s},(t=>{const{className:e,style:n}=t;return m.createElement("div",Object.assign({},g,{className:ic()(c,e,o,u),style:n,role:"alert"}),m.createElement(uu,Object.assign({keys:f},gd(l),{motionName:`${l}-show-help-item`,component:!1}),(t=>{const{key:e,error:n,errorStatus:r,className:i,style:o}=t;return m.createElement("div",{key:e,className:ic()(i,{[`${c}-${r}`]:r}),style:o},n)})))}))}const Eg=t=>"object"==typeof t&&null!=t&&1===t.nodeType,kg=(t,e)=>(!e||"hidden"!==t)&&"visible"!==t&&"clip"!==t,Mg=(t,e)=>{if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){const n=getComputedStyle(t,null);return kg(n.overflowY,e)||kg(n.overflowX,e)||(t=>{const e=(t=>{if(!t.ownerDocument||!t.ownerDocument.defaultView)return null;try{return t.ownerDocument.defaultView.frameElement}catch(t){return null}})(t);return!!e&&(e.clientHeight<t.scrollHeight||e.clientWidth<t.scrollWidth)})(t)}return!1},Tg=(t,e,n,r,i,o,a,s)=>o<t&&a>e||o>t&&a<e?0:o<=t&&s<=n||a>=e&&s>=n?o-t-r:a>e&&s<n||o<t&&s>n?a-e+i:0,Ig=t=>{const e=t.parentElement;return null==e?t.getRootNode().host||null:e},Pg=(t,e)=>{var n,r,i,o;if("undefined"==typeof document)return[];const{scrollMode:a,block:s,inline:l,boundary:c,skipOverflowHiddenElements:u}=e,h="function"==typeof c?c:t=>t!==c;if(!Eg(t))throw new TypeError("Invalid target");const p=document.scrollingElement||document.documentElement,d=[];let f=t;for(;Eg(f)&&h(f);){if(f=Ig(f),f===p){d.push(f);break}null!=f&&f===document.body&&Mg(f)&&!Mg(document.documentElement)||null!=f&&Mg(f,u)&&d.push(f)}const g=null!=(r=null==(n=window.visualViewport)?void 0:n.width)?r:innerWidth,m=null!=(o=null==(i=window.visualViewport)?void 0:i.height)?o:innerHeight,{scrollX:y,scrollY:v}=window,{height:x,width:_,top:b,right:w,bottom:S,left:C}=t.getBoundingClientRect();let E="start"===s||"nearest"===s?b:"end"===s?S:b+x/2,k="center"===l?C+_/2:"end"===l?w:C;const M=[];for(let T=0;T<d.length;T++){const t=d[T],{height:e,width:n,top:r,right:i,bottom:o,left:c}=t.getBoundingClientRect();if("if-needed"===a&&b>=0&&C>=0&&S<=m&&w<=g&&b>=r&&S<=o&&C>=c&&w<=i)return M;const u=getComputedStyle(t),h=parseInt(u.borderLeftWidth,10),f=parseInt(u.borderTopWidth,10),I=parseInt(u.borderRightWidth,10),P=parseInt(u.borderBottomWidth,10);let O=0,A=0;const D="offsetWidth"in t?t.offsetWidth-t.clientWidth-h-I:0,R="offsetHeight"in t?t.offsetHeight-t.clientHeight-f-P:0,L="offsetWidth"in t?0===t.offsetWidth?0:n/t.offsetWidth:0,N="offsetHeight"in t?0===t.offsetHeight?0:e/t.offsetHeight:0;if(p===t)O="start"===s?E:"end"===s?E-m:"nearest"===s?Tg(v,v+m,m,f,P,v+E,v+E+x,x):E-m/2,A="start"===l?k:"center"===l?k-g/2:"end"===l?k-g:Tg(y,y+g,g,h,I,y+k,y+k+_,_),O=Math.max(0,O+v),A=Math.max(0,A+y);else{O="start"===s?E-r-f:"end"===s?E-o+P+R:"nearest"===s?Tg(r,o,e,f,P+R,E,E+x,x):E-(r+e/2)+R/2,A="start"===l?k-c-h:"center"===l?k-(c+n/2)+D/2:"end"===l?k-i+I+D:Tg(c,i,n,h,I+D,k,k+_,_);const{scrollLeft:a,scrollTop:u}=t;O=Math.max(0,Math.min(u+O/N,t.scrollHeight-e/N+R)),A=Math.max(0,Math.min(a+A/L,t.scrollWidth-n/L+D)),E+=u-O,k+=a-A}M.push({el:t,top:O,left:A})}return M},Og=t=>!1===t?{block:"end",inline:"nearest"}:(t=>t===Object(t)&&0!==Object.keys(t).length)(t)?t:{block:"start",inline:"nearest"};const Ag=["parentNode"],Dg="form_item";function Rg(t){return void 0===t||!1===t?[]:Array.isArray(t)?t:[t]}function Lg(t,e){if(!t.length)return;const n=t.join("_");if(e)return`${e}_${n}`;return Ag.includes(n)?`${Dg}_${n}`:n}function Ng(t){return Rg(t).join("_")}function Fg(t){const[e]=vs(),n=m.useRef({}),r=m.useMemo((()=>null!==t&&void 0!==t?t:Object.assign(Object.assign({},e),{__INTERNAL__:{itemRef:t=>e=>{const r=Ng(t);e?n.current[r]=e:delete n.current[r]}},scrollToField:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Lg(Rg(t),r.__INTERNAL__.name),i=n?document.getElementById(n):null;i&&function(t,e){if(!t.isConnected||!(t=>{let e=t;for(;e&&e.parentNode;){if(e.parentNode===document)return!0;e=e.parentNode instanceof ShadowRoot?e.parentNode.host:e.parentNode}return!1})(t))return;if((t=>"object"==typeof t&&"function"==typeof t.behavior)(e))return e.behavior(Pg(t,e));const n="boolean"==typeof e||null==e?void 0:e.behavior;for(const{el:r,top:i,left:o}of Pg(t,Og(e)))r.scroll({top:i,left:o,behavior:n})}(i,Object.assign({scrollMode:"if-needed",block:"nearest"},e))},getFieldInstance:t=>{const e=Ng(t);return n.current[e]}})),[t,e]);return[r]}var zg=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const Bg=(t,e)=>{const n=m.useContext(Kl),{getPrefixCls:r,direction:i,form:o}=m.useContext(Gl),{prefixCls:a,className:s,rootClassName:l,size:c,disabled:u=n,form:h,colon:p,labelAlign:d,labelWrap:f,labelCol:g,wrapperCol:y,hideRequiredMark:v,layout:x="horizontal",scrollToFirstError:_,requiredMark:b,onFinishFailed:w,name:S}=t,C=zg(t,["prefixCls","className","rootClassName","size","disabled","form","colon","labelAlign","labelWrap","labelCol","wrapperCol","hideRequiredMark","layout","scrollToFirstError","requiredMark","onFinishFailed","name"]),E=Jl(c);const k=(0,m.useMemo)((()=>void 0!==b?b:o&&void 0!==o.requiredMark?o.requiredMark:!v),[v,b,o]),M=null!==p&&void 0!==p?p:null===o||void 0===o?void 0:o.colon,T=r("form",a),[I,P]=bg(T),O=ic()(T,{[`${T}-${x}`]:!0,[`${T}-hide-required-mark`]:!1===k,[`${T}-rtl`]:"rtl"===i,[`${T}-${E}`]:E},P,s,l),[A]=Fg(h),{__INTERNAL__:D}=A;D.name=S;const R=(0,m.useMemo)((()=>({name:S,labelAlign:d,labelCol:g,labelWrap:f,wrapperCol:y,vertical:"vertical"===x,colon:M,requiredMark:k,itemRef:D.itemRef,form:A})),[S,d,g,y,x,M,k,A]);m.useImperativeHandle(e,(()=>A));const L=(t,e)=>{if(t){let n={block:"nearest"};"object"===typeof t&&(n=t),A.scrollToField(e,n)}};return I(m.createElement(Zl,{disabled:u},m.createElement(tc,{size:E},m.createElement(Kd.Provider,{value:R},m.createElement(Ts,Object.assign({id:S},C,{name:S,onFinishFailed:t=>{if(null===w||void 0===w||w(t),t.errorFields.length){const e=t.errorFields[0].name;if(void 0!==_)return void L(_,e);o&&void 0!==o.scrollToFirstError&&L(o.scrollToFirstError,e)}},form:A,className:O}))))))};var $g=m.forwardRef(Bg);const jg=()=>{const{status:t,errors:e=[],warnings:n=[]}=(0,m.useContext)(tf);return{status:t,errors:e,warnings:n}};jg.Context=tf;var Ug=jg;var Vg=()=>{const[t,e]=m.useState(!1);return m.useEffect((()=>{e((()=>{if(!nf())return!1;if(void 0!==rf)return rf;const t=document.createElement("div");return t.style.display="flex",t.style.flexDirection="column",t.style.rowGap="1px",t.appendChild(document.createElement("div")),t.appendChild(document.createElement("div")),document.body.appendChild(t),rf=1===t.scrollHeight,document.body.removeChild(t),rf})())}),[]),t};const Hg=["xxl","xl","lg","md","sm","xs"],Gg=t=>({xs:`(max-width: ${t.screenXSMax}px)`,sm:`(min-width: ${t.screenSM}px)`,md:`(min-width: ${t.screenMD}px)`,lg:`(min-width: ${t.screenLG}px)`,xl:`(min-width: ${t.screenXL}px)`,xxl:`(min-width: ${t.screenXXL}px)`}),Wg=t=>{const e=t,n=[].concat(Hg).reverse();return n.forEach(((t,r)=>{const i=t.toUpperCase(),o=`screen${i}Min`,a=`screen${i}`;if(!(e[o]<=e[a]))throw new Error(`${o}<=${a} fails : !(${e[o]}<=${e[a]})`);if(r<n.length-1){const t=`screen${i}Max`;if(!(e[a]<=e[t]))throw new Error(`${a}<=${t} fails : !(${e[a]}<=${e[t]})`);const o=`screen${n[r+1].toUpperCase()}Min`;if(!(e[t]<=e[o]))throw new Error(`${t}<=${o} fails : !(${e[t]}<=${e[o]})`)}})),t};function Xg(){const[,t]=Vl(),e=Gg(Wg(t));return m.useMemo((()=>{const t=new Map;let n=-1,r={};return{matchHandlers:{},dispatch(e){return r=e,t.forEach((t=>t(r))),t.size>=1},subscribe(e){return t.size||this.register(),n+=1,t.set(n,e),e(r),n},unsubscribe(e){t.delete(e),t.size||this.unregister()},unregister(){Object.keys(e).forEach((t=>{const n=e[t],r=this.matchHandlers[n];null===r||void 0===r||r.mql.removeListener(null===r||void 0===r?void 0:r.listener)})),t.clear()},register(){Object.keys(e).forEach((t=>{const n=e[t],i=e=>{let{matches:n}=e;this.dispatch(Object.assign(Object.assign({},r),{[t]:n}))},o=window.matchMedia(n);o.addListener(i),this.matchHandlers[n]={mql:o,listener:i},i(o)}))},responsiveMap:e}}),[t])}var qg=(0,m.createContext)({});const Yg=t=>{const{componentCls:e}=t;return{[e]:{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around":{justifyContent:"space-around"},"&-space-evenly":{justifyContent:"space-evenly"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}}}},Zg=t=>{const{componentCls:e}=t;return{[e]:{position:"relative",maxWidth:"100%",minHeight:1}}},Kg=(t,e)=>((t,e)=>{const{componentCls:n,gridColumns:r}=t,i={};for(let o=r;o>=0;o--)0===o?(i[`${n}${e}-${o}`]={display:"none"},i[`${n}-push-${o}`]={insetInlineStart:"auto"},i[`${n}-pull-${o}`]={insetInlineEnd:"auto"},i[`${n}${e}-push-${o}`]={insetInlineStart:"auto"},i[`${n}${e}-pull-${o}`]={insetInlineEnd:"auto"},i[`${n}${e}-offset-${o}`]={marginInlineStart:0},i[`${n}${e}-order-${o}`]={order:0}):(i[`${n}${e}-${o}`]={display:"block",flex:`0 0 ${o/r*100}%`,maxWidth:o/r*100+"%"},i[`${n}${e}-push-${o}`]={insetInlineStart:o/r*100+"%"},i[`${n}${e}-pull-${o}`]={insetInlineEnd:o/r*100+"%"},i[`${n}${e}-offset-${o}`]={marginInlineStart:o/r*100+"%"},i[`${n}${e}-order-${o}`]={order:o});return i})(t,e),Jg=bh("Grid",(t=>[Yg(t)])),Qg=bh("Grid",(t=>{const e=vh(t,{gridColumns:24}),n={"-sm":e.screenSMMin,"-md":e.screenMDMin,"-lg":e.screenLGMin,"-xl":e.screenXLMin,"-xxl":e.screenXXLMin};return[Zg(e),Kg(e,""),Kg(e,"-xs"),Object.keys(n).map((t=>((t,e,n)=>({[`@media (min-width: ${e}px)`]:Object.assign({},Kg(t,n))}))(e,n[t],t))).reduce(((t,e)=>Object.assign(Object.assign({},t),e)),{})]}));var tm=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function em(t,e){const[n,r]=m.useState("string"===typeof t?t:"");return m.useEffect((()=>{(()=>{if("string"===typeof t&&r(t),"object"===typeof t)for(let n=0;n<Hg.length;n++){const i=Hg[n];if(!e[i])continue;const o=t[i];if(void 0!==o)return void r(o)}})()}),[JSON.stringify(t),e]),n}const nm=m.forwardRef(((t,e)=>{const{prefixCls:n,justify:r,align:i,className:o,style:a,children:s,gutter:l=0,wrap:c}=t,u=tm(t,["prefixCls","justify","align","className","style","children","gutter","wrap"]),{getPrefixCls:h,direction:p}=m.useContext(Gl),[d,f]=m.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),[g,y]=m.useState({xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1}),v=em(i,g),x=em(r,g),_=Vg(),b=m.useRef(l),w=Xg();m.useEffect((()=>{const t=w.subscribe((t=>{y(t);const e=b.current||0;(!Array.isArray(e)&&"object"===typeof e||Array.isArray(e)&&("object"===typeof e[0]||"object"===typeof e[1]))&&f(t)}));return()=>w.unsubscribe(t)}),[]);const S=h("row",n),[C,E]=Jg(S),k=(()=>{const t=[void 0,void 0];return(Array.isArray(l)?l:[l,void 0]).forEach(((e,n)=>{if("object"===typeof e)for(let r=0;r<Hg.length;r++){const i=Hg[r];if(d[i]&&void 0!==e[i]){t[n]=e[i];break}}else t[n]=e})),t})(),M=ic()(S,{[`${S}-no-wrap`]:!1===c,[`${S}-${x}`]:x,[`${S}-${v}`]:v,[`${S}-rtl`]:"rtl"===p},o,E),T={},I=null!=k[0]&&k[0]>0?k[0]/-2:void 0,P=null!=k[1]&&k[1]>0?k[1]/-2:void 0;I&&(T.marginLeft=I,T.marginRight=I),_?[,T.rowGap]=k:P&&(T.marginTop=P,T.marginBottom=P);const[O,A]=k,D=m.useMemo((()=>({gutter:[O,A],wrap:c,supportFlexGap:_})),[O,A,c,_]);return C(m.createElement(qg.Provider,{value:D},m.createElement("div",Object.assign({},u,{className:M,style:Object.assign(Object.assign({},T),a),ref:e}),s)))}));var rm=nm,im=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const om=["xs","sm","md","lg","xl","xxl"],am=m.forwardRef(((t,e)=>{const{getPrefixCls:n,direction:r}=m.useContext(Gl),{gutter:i,wrap:o,supportFlexGap:a}=m.useContext(qg),{prefixCls:s,span:l,order:c,offset:u,push:h,pull:p,className:d,children:f,flex:g,style:y}=t,v=im(t,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),x=n("col",s),[_,b]=Qg(x);let w={};om.forEach((e=>{let n={};const i=t[e];"number"===typeof i?n.span=i:"object"===typeof i&&(n=i||{}),delete v[e],w=Object.assign(Object.assign({},w),{[`${x}-${e}-${n.span}`]:void 0!==n.span,[`${x}-${e}-order-${n.order}`]:n.order||0===n.order,[`${x}-${e}-offset-${n.offset}`]:n.offset||0===n.offset,[`${x}-${e}-push-${n.push}`]:n.push||0===n.push,[`${x}-${e}-pull-${n.pull}`]:n.pull||0===n.pull,[`${x}-${e}-flex-${n.flex}`]:n.flex||"auto"===n.flex,[`${x}-rtl`]:"rtl"===r})}));const S=ic()(x,{[`${x}-${l}`]:void 0!==l,[`${x}-order-${c}`]:c,[`${x}-offset-${u}`]:u,[`${x}-push-${h}`]:h,[`${x}-pull-${p}`]:p},d,w,b),C={};if(i&&i[0]>0){const t=i[0]/2;C.paddingLeft=t,C.paddingRight=t}if(i&&i[1]>0&&!a){const t=i[1]/2;C.paddingTop=t,C.paddingBottom=t}return g&&(C.flex=function(t){return"number"===typeof t?`${t} ${t} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(t)?`0 0 ${t}`:t}(g),!1!==o||C.minWidth||(C.minWidth=0)),_(m.createElement("div",Object.assign({},v,{style:Object.assign(Object.assign({},C),y),className:S,ref:e}),f))}));var sm=am;var lm=t=>{const{prefixCls:e,status:n,wrapperCol:r,children:i,errors:o,warnings:a,_internalItemRender:s,extra:l,help:c,fieldId:u,marginBottom:h,onErrorVisibleChanged:p}=t,d=`${e}-item`,f=m.useContext(Kd),g=r||f.wrapperCol||{},y=ic()(`${d}-control`,g.className),v=m.useMemo((()=>Object.assign({},f)),[f]);delete v.labelCol,delete v.wrapperCol;const x=m.createElement("div",{className:`${d}-control-input`},m.createElement("div",{className:`${d}-control-input-content`},i)),_=m.useMemo((()=>({prefixCls:e,status:n})),[e,n]),b=null!==h||o.length||a.length?m.createElement("div",{style:{display:"flex",flexWrap:"nowrap"}},m.createElement(Qd.Provider,{value:_},m.createElement(Cg,{fieldId:u,errors:o,warnings:a,help:c,helpStatus:n,className:`${d}-explain-connected`,onVisibleChanged:p})),!!h&&m.createElement("div",{style:{width:0,height:h}})):null,w={};u&&(w.id=`${u}_extra`);const S=l?m.createElement("div",Object.assign({},w,{className:`${d}-extra`}),l):null,C=s&&"pro_table_render"===s.mark&&s.render?s.render(t,{input:x,errorList:b,extra:S}):m.createElement(m.Fragment,null,x,b,S);return m.createElement(Kd.Provider,{value:v},m.createElement(sm,Object.assign({},g,{className:y}),C))},cm={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"},um=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:cm}))};var hm=m.forwardRef(um),pm=function(){if("undefined"!==typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,r){return t[0]===e&&(n=r,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(e,n){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,r=t(n,e);~r&&n.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];t.call(e,i[1],i[0])}},e}()}(),dm="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,fm="undefined"!==typeof n.g&&n.g.Math===Math?n.g:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),gm="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(fm):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var mm=["top","right","bottom","left","width","height","size","weight"],ym="undefined"!==typeof MutationObserver,vm=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,r=!1,i=0;function o(){n&&(n=!1,t()),r&&s()}function a(){gm(o)}function s(){var t=Date.now();if(n){if(t-i<2)return;r=!0}else n=!0,r=!1,setTimeout(a,e);i=t}return s}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){dm&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),ym?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){dm&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;mm.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),xm=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},_m=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||fm},bm=Mm(0,0,0,0);function wm(t){return parseFloat(t)||0}function Sm(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+wm(t["border-"+n+"-width"])}),0)}function Cm(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return bm;var r=_m(t).getComputedStyle(t),i=function(t){for(var e={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=t["padding-"+i];e[i]=wm(o)}return e}(r),o=i.left+i.right,a=i.top+i.bottom,s=wm(r.width),l=wm(r.height);if("border-box"===r.boxSizing&&(Math.round(s+o)!==e&&(s-=Sm(r,"left","right")+o),Math.round(l+a)!==n&&(l-=Sm(r,"top","bottom")+a)),!function(t){return t===_m(t).document.documentElement}(t)){var c=Math.round(s+o)-e,u=Math.round(l+a)-n;1!==Math.abs(c)&&(s-=c),1!==Math.abs(u)&&(l-=u)}return Mm(i.left,i.top,s,l)}var Em="undefined"!==typeof SVGGraphicsElement?function(t){return t instanceof _m(t).SVGGraphicsElement}:function(t){return t instanceof _m(t).SVGElement&&"function"===typeof t.getBBox};function km(t){return dm?Em(t)?function(t){var e=t.getBBox();return Mm(0,0,e.width,e.height)}(t):Cm(t):bm}function Mm(t,e,n,r){return{x:t,y:e,width:n,height:r}}var Tm=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Mm(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=km(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),Im=function(t,e){var n=function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(o.prototype);return xm(a,{x:e,y:n,width:r,height:i,top:n,right:e+r,bottom:i+n,left:e}),a}(e);xm(this,{target:t,contentRect:n})},Pm=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new pm,"function"!==typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(t instanceof _m(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new Tm(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(t instanceof _m(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new Im(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),Om="undefined"!==typeof WeakMap?new WeakMap:new pm,Am=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=vm.getInstance(),r=new Pm(e,n,this);Om.set(this,r)};["observe","unobserve","disconnect"].forEach((function(t){Am.prototype[t]=function(){var e;return(e=Om.get(this))[t].apply(e,arguments)}}));var Dm="undefined"!==typeof fm.ResizeObserver?fm.ResizeObserver:Am,Rm=new Map;var Lm=new Dm((function(t){t.forEach((function(t){var e,n=t.target;null===(e=Rm.get(n))||void 0===e||e.forEach((function(t){return t(n)}))}))}));var Nm=function(t){Qo(n,t);var e=ea(n);function n(){return ii(this,n),e.apply(this,arguments)}return ai(n,[{key:"render",value:function(){return this.props.children}}]),n}(m.Component),Fm=m.createContext(null);function zm(t,e){var n=t.children,r=t.disabled,i=m.useRef(null),o=m.useRef(null),a=m.useContext(Fm),s="function"===typeof n,l=s?n(i):n,c=m.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),u=!s&&m.isValidElement(l)&&uc(l),h=u?l.ref:null,p=m.useMemo((function(){return lc(h,i)}),[h,i]),d=function(){return ac(i.current)||ac(o.current)};m.useImperativeHandle(e,(function(){return d()}));var f=m.useRef(t);f.current=t;var g=m.useCallback((function(t){var e=f.current,n=e.onResize,r=e.data,i=t.getBoundingClientRect(),o=i.width,s=i.height,l=t.offsetWidth,u=t.offsetHeight,h=Math.floor(o),p=Math.floor(s);if(c.current.width!==h||c.current.height!==p||c.current.offsetWidth!==l||c.current.offsetHeight!==u){var d={width:h,height:p,offsetWidth:l,offsetHeight:u};c.current=d;var g=l===Math.round(o)?o:l,m=u===Math.round(s)?s:u,y=Or(Or({},d),{},{offsetWidth:g,offsetHeight:m});null===a||void 0===a||a(y,t,r),n&&Promise.resolve().then((function(){n(y,t)}))}}),[]);return m.useEffect((function(){var t,e,n=d();return n&&!r&&(t=n,e=g,Rm.has(t)||(Rm.set(t,new Set),Lm.observe(t)),Rm.get(t).add(e)),function(){return function(t,e){Rm.has(t)&&(Rm.get(t).delete(e),Rm.get(t).size||(Lm.unobserve(t),Rm.delete(t)))}(n,g)}}),[i.current,r]),m.createElement(Nm,{ref:o},u?m.cloneElement(l,{ref:p}):l)}var Bm=m.forwardRef(zm);function $m(t,e){var n=t.children;return("function"===typeof n?[n]:ra(n)).map((function(n,r){var i=(null===n||void 0===n?void 0:n.key)||"".concat("rc-observer-key","-").concat(r);return m.createElement(Bm,Ui({},t,{key:i,ref:0===r?e:void 0}),n)}))}var jm=m.forwardRef($m);jm.Collection=function(t){var e=t.children,n=t.onBatchResize,r=m.useRef(0),i=m.useRef([]),o=m.useContext(Fm),a=m.useCallback((function(t,e,a){r.current+=1;var s=r.current;i.current.push({size:t,element:e,data:a}),Promise.resolve().then((function(){s===r.current&&(null===n||void 0===n||n(i.current),i.current=[])})),null===o||void 0===o||o(t,e,a)}),[n,o]);return m.createElement(Fm.Provider,{value:a},e)};var Um=jm;function Vm(t){var e=m.useRef();e.current=t;var n=m.useCallback((function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return null===(t=e.current)||void 0===t?void 0:t.call.apply(t,[e].concat(r))}),[]);return n}var Hm=function(){if("undefined"===typeof navigator||"undefined"===typeof window)return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null===t||void 0===t?void 0:t.substr(0,4))},Gm=m.createContext(null);function Wm(t){return t?Array.isArray(t)?t:[t]:[]}function Xm(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(arguments.length>2?arguments[2]:void 0)?t[0]===e[0]:t[0]===e[0]&&t[1]===e[1]}function qm(t,e,n,r){return e||(n?{motionName:"".concat(t,"-").concat(n)}:r?{motionName:r}:null)}function Ym(t){return t.ownerDocument.defaultView}function Zm(t){for(var e=[],n=null===t||void 0===t?void 0:t.parentElement,r=["hidden","scroll","clip","auto"];n;){var i=Ym(n).getComputedStyle(n);[i.overflowX,i.overflowY,i.overflow].some((function(t){return r.includes(t)}))&&e.push(n),n=n.parentElement}return e}function Km(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Number.isNaN(t)?e:t}function Jm(t){return Km(parseFloat(t),0)}function Qm(t){var e="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),n=e.match(/^(.*)\%$/);return n?t*(parseFloat(n[1])/100):parseFloat(e)}function ty(t,e){var n=Ri(e||[],2),r=n[0],i=n[1];return[Qm(t.width,r),Qm(t.height,i)]}function ey(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return[t[0],t[1]]}function ny(t,e){var n,r=e[0],i=e[1];return n="t"===r?t.y:"b"===r?t.y+t.height:t.y+t.height/2,{x:"l"===i?t.x:"r"===i?t.x+t.width:t.x+t.width/2,y:n}}function ry(t,e){var n={t:"b",b:"t",l:"r",r:"l"};return t.map((function(t,r){return r===e?n[t]||"c":t})).join("")}function iy(t,e,n,r,i,o,a){var s=Ri(m.useState({ready:!1,offsetX:0,offsetY:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:i[r]||{}}),2),l=s[0],c=s[1],u=m.useRef(0),h=m.useMemo((function(){return e?Zm(e):[]}),[e]),p=m.useRef({});t||(p.current={});var d=Vm((function(){if(e&&n&&t){var s,l=e,u=l.style.left,d=l.style.top,f=l.ownerDocument,g=Ym(l),m=Or(Or({},i[r]),o);if(l.style.left="0",l.style.top="0",Array.isArray(n))s={x:n[0],y:n[1],width:0,height:0};else{var y=n.getBoundingClientRect();s={x:y.x,y:y.y,width:y.width,height:y.height}}var v=l.getBoundingClientRect(),x=g.getComputedStyle(l),_=x.width,b=x.height,w=f.documentElement,S=w.clientWidth,C=w.clientHeight,E=w.scrollWidth,k=w.scrollHeight,M=w.scrollTop,T=w.scrollLeft,I=v.height,P=v.width,O=s.height,A=s.width,D="scroll"===m.htmlRegion?{left:-T,top:-M,right:E-T,bottom:k-M}:{left:0,top:0,right:S,bottom:C};D=function(t,e){var n=Or({},t);return(e||[]).forEach((function(t){if(!(t instanceof HTMLBodyElement)){var e=Ym(t).getComputedStyle(t),r=e.overflow,i=e.overflowClipMargin,o=e.borderTopWidth,a=e.borderBottomWidth,s=e.borderLeftWidth,l=e.borderRightWidth,c=t.getBoundingClientRect(),u=t.offsetHeight,h=t.clientHeight,p=t.offsetWidth,d=t.clientWidth,f=Jm(o),g=Jm(a),m=Jm(s),y=Jm(l),v=Km(Math.round(c.width/p*1e3)/1e3),x=Km(Math.round(c.height/u*1e3)/1e3),_=(p-d-m-y)*v,b=(u-h-f-g)*x,w=f*x,S=g*x,C=m*v,E=y*v,k=0,M=0;if("clip"===r){var T=Jm(i);k=T*v,M=T*x}var I=c.x+C-k,P=c.y+w-M,O=I+c.width+2*k-C-E-_,A=P+c.height+2*M-w-S-b;n.left=Math.max(n.left,I),n.top=Math.max(n.top,P),n.right=Math.min(n.right,O),n.bottom=Math.min(n.bottom,A)}})),n}(D,h),l.style.left=u,l.style.top=d;var R=Km(Math.round(P/parseFloat(_)*1e3)/1e3),L=Km(Math.round(I/parseFloat(b)*1e3)/1e3);if(0===R||0===L||oc(n)&&!Wh(n))return;var N=m.offset,F=m.targetOffset,z=Ri(ty(v,N),2),B=z[0],$=z[1],j=Ri(ty(s,F),2),U=j[0],V=j[1];s.x-=U,s.y-=V;var H=Ri(m.points||[],2),G=H[0],W=ey(H[1]),X=ey(G),q=ny(s,W),Y=ny(v,X),Z=Or({},m),K=q.x-Y.x+B,J=q.y-Y.y+$;function Rt(t,e){var n=v.x+t,r=v.y+e,i=n+P,o=r+I,a=Math.max(n,D.left),s=Math.max(r,D.top),l=Math.min(i,D.right),c=Math.min(o,D.bottom);return Math.max(0,(l-a)*(c-s))}var Q,tt,et,nt,rt=Rt(K,J),it=ny(s,["t","l"]),ot=ny(v,["t","l"]),at=ny(s,["b","r"]),st=ny(v,["b","r"]),lt=m.overflow||{},ct=lt.adjustX,ut=lt.adjustY,ht=lt.shiftX,pt=lt.shiftY,dt=function(t){return"boolean"===typeof t?t:t>=0};function Lt(){Q=v.y+J,tt=Q+I,et=v.x+K,nt=et+P}Lt();var ft=dt(ut),gt=X[0]===W[0];if(ft&&"t"===X[0]&&(tt>D.bottom||p.current.bt)){var mt=J;gt?mt-=I-O:mt=it.y-st.y-$,Rt(K,mt)>=rt?(p.current.bt=!0,J=mt,Z.points=[ry(X,0),ry(W,0)]):p.current.bt=!1}if(ft&&"b"===X[0]&&(Q<D.top||p.current.tb)){var yt=J;gt?yt+=I-O:yt=at.y-ot.y-$,Rt(K,yt)>=rt?(p.current.tb=!0,J=yt,Z.points=[ry(X,0),ry(W,0)]):p.current.tb=!1}var vt=dt(ct),xt=X[1]===W[1];if(vt&&"l"===X[1]&&(nt>D.right||p.current.rl)){var _t=K;xt?_t-=P-A:_t=it.x-st.x-B,Rt(_t,J)>=rt?(p.current.rl=!0,K=_t,Z.points=[ry(X,1),ry(W,1)]):p.current.rl=!1}if(vt&&"r"===X[1]&&(et<D.left||p.current.lr)){var bt=K;xt?bt+=P-A:bt=at.x-ot.x-B,Rt(bt,J)>=rt?(p.current.lr=!0,K=bt,Z.points=[ry(X,1),ry(W,1)]):p.current.lr=!1}Lt();var wt=!0===ht?0:ht;"number"===typeof wt&&(et<D.left&&(K-=et-D.left,s.x+A<D.left+wt&&(K+=s.x-D.left+A-wt)),nt>D.right&&(K-=nt-D.right,s.x>D.right-wt&&(K+=s.x-D.right+wt)));var St=!0===pt?0:pt;"number"===typeof St&&(Q<D.top&&(J-=Q-D.top,s.y+O<D.top+St&&(J+=s.y-D.top+O-St)),tt>D.bottom&&(J-=tt-D.bottom,s.y>D.bottom-St&&(J+=s.y-D.bottom+St)));var Ct=v.x+K,Et=Ct+P,kt=v.y+J,Mt=kt+I,Tt=s.x,It=Tt+A,Pt=s.y,Ot=Pt+O,At=(Math.max(Ct,Tt)+Math.min(Et,It))/2-Ct,Dt=(Math.max(kt,Pt)+Math.min(Mt,Ot))/2-kt;null===a||void 0===a||a(e,Z),c({ready:!0,offsetX:K/R,offsetY:J/L,arrowX:At/R,arrowY:Dt/L,scaleX:R,scaleY:L,align:Z})}})),f=function(){c((function(t){return Or(Or({},t),{},{ready:!1})}))};return _d(f,[r]),_d((function(){t||f()}),[t]),[l.ready,l.offsetX,l.offsetY,l.arrowX,l.arrowY,l.scaleX,l.scaleY,l.align,function(){u.current+=1;var t=u.current;Promise.resolve().then((function(){u.current===t&&d()}))}]}function oy(t){var e=t.prefixCls,n=t.align,r=t.arrow,i=t.arrowPos,o=r||{},a=o.className,s=o.content,l=i.x,c=void 0===l?0:l,u=i.y,h=void 0===u?0:u,p=m.useRef();if(!n||!n.points)return null;var d={position:"absolute"};if(!1!==n.autoArrow){var f=n.points[0],g=n.points[1],y=f[0],v=f[1],x=g[0],_=g[1];y!==x&&["t","b"].includes(y)?"t"===y?d.top=0:d.bottom=0:d.top=h,v!==_&&["l","r"].includes(v)?"l"===v?d.left=0:d.right=0:d.left=c}return m.createElement("div",{ref:p,className:ic()("".concat(e,"-arrow"),a),style:d},s)}function ay(t){var e=t.prefixCls,n=t.open,r=t.zIndex,i=t.mask,o=t.motion;return i?m.createElement(hu,Ui({},o,{motionAppear:!0,visible:n,removeOnLeave:!0}),(function(t){var n=t.className;return m.createElement("div",{style:{zIndex:r},className:ic()("".concat(e,"-mask"),n)})})):null}var sy=m.memo((function(t){return t.children}),(function(t,e){return e.cache}));var ly=sy,cy=m.forwardRef((function(t,e){var n=t.popup,r=t.className,i=t.prefixCls,o=t.style,a=t.target,s=t.onVisibleChanged,l=t.open,c=t.keepDom,u=t.onClick,h=t.mask,p=t.arrow,d=t.arrowPos,f=t.align,g=t.motion,y=t.maskMotion,v=t.forceRender,x=t.getPopupContainer,_=t.autoDestroy,b=t.portal,w=t.zIndex,S=t.onMouseEnter,C=t.onMouseLeave,E=t.ready,k=t.offsetX,M=t.offsetY,T=t.onAlign,I=t.onPrepare,P=t.stretch,O=t.targetWidth,A=t.targetHeight,D="function"===typeof n?n():n,R=l||c,L=(null===x||void 0===x?void 0:x.length)>0,N=Ri(m.useState(!x||!L),2),F=N[0],z=N[1];if(_d((function(){!F&&L&&a&&z(!0)}),[F,L,a]),!F)return null;var B=E||!l?{left:k,top:M}:{left:"-1000vw",top:"-1000vh"},$={};return P&&(P.includes("height")&&A?$.height=A:P.includes("minHeight")&&A&&($.minHeight=A),P.includes("width")&&O?$.width=O:P.includes("minWidth")&&O&&($.minWidth=O)),l||($.pointerEvents="none"),m.createElement(b,{open:v||R,getContainer:x&&function(){return x(a)},autoDestroy:_},m.createElement(ay,{prefixCls:i,open:l,zIndex:w,mask:h,motion:y}),m.createElement(Um,{onResize:T,disabled:!l},(function(t){return m.createElement(hu,Ui({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:v,leavedClassName:"".concat(i,"-hidden")},g,{onAppearPrepare:I,onEnterPrepare:I,visible:l,onVisibleChanged:function(t){var e;null===g||void 0===g||null===(e=g.onVisibleChanged)||void 0===e||e.call(g,t),s(t)}}),(function(n,a){var s=n.className,c=n.style,h=ic()(i,s,r);return m.createElement("div",{ref:lc(t,e,a),className:h,style:Or(Or(Or(Or({"--arrow-x":"".concat(d.x||0,"px"),"--arrow-y":"".concat(d.y||0,"px")},B),$),c),{},{boxSizing:"border-box",zIndex:w},o),onMouseEnter:S,onMouseLeave:C,onClick:u},p&&m.createElement(oy,{prefixCls:i,arrow:p,arrowPos:d,align:f}),m.createElement(ly,{cache:!l},D))}))})))}));var uy=cy,hy=m.forwardRef((function(t,e){var n=t.children,r=t.getTriggerDOMNode,i=uc(n),o=m.useCallback((function(t){sc(e,r?r(t):t)}),[r]),a=cc(o,n.ref);return i?m.cloneElement(n,{ref:a}):n}));var py=hy,dy=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];var fy=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Od,e=m.forwardRef((function(e,n){var r=e.prefixCls,i=void 0===r?"rc-trigger-popup":r,o=e.children,a=e.action,s=void 0===a?"hover":a,l=e.showAction,c=e.hideAction,u=e.popupVisible,h=e.defaultPopupVisible,p=e.onPopupVisibleChange,d=e.afterPopupVisibleChange,f=e.mouseEnterDelay,g=e.mouseLeaveDelay,y=void 0===g?.1:g,v=e.focusDelay,x=e.blurDelay,_=e.mask,b=e.maskClosable,w=void 0===b||b,S=e.getPopupContainer,C=e.forceRender,E=e.autoDestroy,k=e.destroyPopupOnHide,M=e.popup,T=e.popupClassName,I=e.popupStyle,P=e.popupPlacement,O=e.builtinPlacements,A=void 0===O?{}:O,D=e.popupAlign,R=e.zIndex,L=e.stretch,N=e.getPopupClassNameFromAlign,F=e.alignPoint,z=e.onPopupClick,B=e.onPopupAlign,$=e.arrow,j=e.popupMotion,U=e.maskMotion,V=e.popupTransitionName,H=e.popupAnimation,G=e.maskTransitionName,W=e.maskAnimation,X=e.className,q=e.getTriggerDOMNode,Y=Zo(e,dy),Z=E||k||!1,K=Ri(m.useState(!1),2),J=K[0],Q=K[1];_d((function(){Q(Hm())}),[]);var tt=m.useRef({}),et=m.useContext(Gm),nt=m.useMemo((function(){return{registerSubPopup:function(t,e){tt.current[t]=e,null===et||void 0===et||et.registerSubPopup(t,e)}}}),[et]),rt=Dd(),it=Ri(m.useState(null),2),ot=it[0],at=it[1],st=Vm((function(t){oc(t)&&ot!==t&&at(t),null===et||void 0===et||et.registerSubPopup(rt,t)})),lt=Ri(m.useState(null),2),ct=lt[0],ut=lt[1],ht=Vm((function(t){oc(t)&&ct!==t&&ut(t)})),pt=m.Children.only(o),dt=(null===pt||void 0===pt?void 0:pt.props)||{},ft={},gt=Vm((function(t){var e,n,r=ct;return(null===r||void 0===r?void 0:r.contains(t))||(null===r||void 0===r||null===(e=r.getRootNode())||void 0===e?void 0:e.host)===t||t===r||(null===ot||void 0===ot?void 0:ot.contains(t))||(null===ot||void 0===ot||null===(n=ot.getRootNode())||void 0===n?void 0:n.host)===t||t===ot||Object.values(tt.current).some((function(e){return(null===e||void 0===e?void 0:e.contains(t))||t===e}))})),mt=qm(i,j,H,V),yt=qm(i,U,W,G),vt=Ri(m.useState(h||!1),2),xt=vt[0],_t=vt[1],bt=null!==u&&void 0!==u?u:xt,wt=Vm((function(t){void 0===u&&_t(t)}));_d((function(){_t(u||!1)}),[u]);var St=m.useRef(bt);St.current=bt;var Ct=Vm((function(t){bt!==t&&(wt(t),null===p||void 0===p||p(t))})),Et=m.useRef(),kt=function(){clearTimeout(Et.current)},Mt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;kt(),0===e?Ct(t):Et.current=setTimeout((function(){Ct(t)}),1e3*e)};m.useEffect((function(){return kt}),[]);var Tt=Ri(m.useState(!1),2),It=Tt[0],Pt=Tt[1],Ot=m.useRef(!0);_d((function(){Ot.current&&!bt||Pt(!0),Ot.current=!0}),[bt]);var At=Ri(m.useState(null),2),Dt=At[0],Rt=At[1],Lt=Ri(m.useState([0,0]),2),Nt=Lt[0],Ft=Lt[1],zt=function(t){Ft([t.clientX,t.clientY])},Bt=Ri(iy(bt,ot,F?Nt:ct,P,A,D,B),9),$t=Bt[0],jt=Bt[1],Ut=Bt[2],Vt=Bt[3],Ht=Bt[4],Gt=Bt[5],Wt=Bt[6],Xt=Bt[7],qt=Bt[8],Yt=Vm((function(){It||qt()}));!function(t,e,n,r){_d((function(){if(t&&e&&n){var i=n,o=Zm(e),a=Zm(i),s=Ym(i),l=new Set([s].concat(Sr(o),Sr(a)));function c(){r()}return l.forEach((function(t){t.addEventListener("scroll",c,{passive:!0})})),s.addEventListener("resize",c,{passive:!0}),r(),function(){l.forEach((function(t){t.removeEventListener("scroll",c),s.removeEventListener("resize",c)}))}}}),[t,e,n])}(bt,ct,ot,Yt),_d((function(){Yt()}),[Nt]),_d((function(){!bt||null!==A&&void 0!==A&&A[P]||Yt()}),[JSON.stringify(D)]);var Zt=m.useMemo((function(){var t=function(t,e,n,r){for(var i=n.points,o=Object.keys(t),a=0;a<o.length;a+=1){var s,l=o[a];if(Xm(null===(s=t[l])||void 0===s?void 0:s.points,i,r))return"".concat(e,"-placement-").concat(l)}return""}(A,i,Xt,F);return ic()(t,null===N||void 0===N?void 0:N(Xt))}),[Xt,N,A,i,F]);m.useImperativeHandle(n,(function(){return{forceAlign:Yt}}));_d((function(){Dt&&(qt(),Dt(),Rt(null))}),[Dt]);var Kt=Ri(m.useState(0),2),Jt=Kt[0],Qt=Kt[1],te=Ri(m.useState(0),2),ee=te[0],ne=te[1],re=function(t,e,n,r){return m.useMemo((function(){var i=Wm(null!==n&&void 0!==n?n:e),o=Wm(null!==r&&void 0!==r?r:e),a=new Set(i),s=new Set(o);return t&&(a.has("hover")&&(a.delete("hover"),a.add("click")),s.has("hover")&&(s.delete("hover"),s.add("click"))),[a,s]}),[t,e,n,r])}(J,s,l,c),ie=Ri(re,2),oe=ie[0],ae=ie[1],se=function(t,e,n,r){ft[t]=function(i){var o;null===r||void 0===r||r(i),Mt(e,n);for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];null===(o=dt[t])||void 0===o||o.call.apply(o,[dt,i].concat(s))}},le=oe.has("click"),ce=ae.has("click")||ae.has("contextMenu");(le||ce)&&(ft.onClick=function(t){var e;St.current&&ce?Mt(!1):!St.current&&le&&(zt(t),Mt(!0));for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];null===(e=dt.onClick)||void 0===e||e.call.apply(e,[dt,t].concat(r))}),m.useEffect((function(){if(ce&&ot&&(!_||w)){var t=!1,e=function(e){var n=e.target;t=gt(n)},n=function(e){var n=e.target;!St.current||t||gt(n)||Mt(!1)},r=Ym(ot),i=null===ct||void 0===ct?void 0:ct.getRootNode();r.addEventListener("mousedown",e),r.addEventListener("click",n);var o=i&&i!==ct.ownerDocument;return o&&(i.addEventListener("mousedown",e),i.addEventListener("click",n)),function(){r.removeEventListener("mousedown",e),r.removeEventListener("click",n),o&&(i.removeEventListener("mousedown",e),i.removeEventListener("click",n))}}}),[ce,ct,ot,_,w]);var ue,he,pe=oe.has("hover"),de=ae.has("hover");pe&&(se("onMouseEnter",!0,f,(function(t){zt(t)})),ue=function(){Mt(!0,f)},F&&(ft.onMouseMove=function(t){var e;null===(e=dt.onMouseMove)||void 0===e||e.call(dt,t)})),de&&(se("onMouseLeave",!1,y),he=function(){Mt(!1,y)}),oe.has("focus")&&se("onFocus",!0,v),ae.has("focus")&&se("onBlur",!1,x),oe.has("contextMenu")&&(ft.onContextMenu=function(t){var e;zt(t),Mt(!0),t.preventDefault();for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];null===(e=dt.onContextMenu)||void 0===e||e.call.apply(e,[dt,t].concat(r))}),X&&(ft.className=ic()(dt.className,X));var fe=Or(Or({},dt),ft),ge={};["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"].forEach((function(t){Y[t]&&(ge[t]=function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];null===(e=fe[t])||void 0===e||e.call.apply(e,[fe].concat(r)),Y[t].apply(Y,r)})}));var me=m.cloneElement(pt,Or(Or({},fe),ge)),ye={x:Vt,y:Ht},ve=$?Or({},!0!==$?$:{}):null;return m.createElement(m.Fragment,null,m.createElement(Um,{disabled:!bt,ref:ht,onResize:function(t,e){if(Yt(),L){var n=e.getBoundingClientRect();Qt(n.width),ne(n.height)}}},m.createElement(py,{getTriggerDOMNode:q},me)),m.createElement(Gm.Provider,{value:nt},m.createElement(uy,{portal:t,ref:st,prefixCls:i,popup:M,className:ic()(T,Zt),style:I,target:ct,onMouseEnter:ue,onMouseLeave:he,zIndex:R,open:bt,keepDom:It,onClick:z,mask:_,motion:mt,maskMotion:yt,onVisibleChanged:function(t){Pt(!1),qt(),null===d||void 0===d||d(t)},onPrepare:function(){return new Promise((function(t){Rt((function(){return t}))}))},forceRender:C,autoDestroy:Z,getPopupContainer:S,align:Xt,arrow:ve,arrowPos:ye,ready:$t,offsetX:jt,offsetY:Ut,onAlign:Yt,stretch:L,targetWidth:Jt/Gt,targetHeight:ee/Wt})))}));return e}(Od),gy={shiftX:64,adjustY:1},my={adjustX:1,shiftY:!0},yy=[0,0],vy={left:{points:["cr","cl"],overflow:my,offset:[-4,0],targetOffset:yy},right:{points:["cl","cr"],overflow:my,offset:[4,0],targetOffset:yy},top:{points:["bc","tc"],overflow:gy,offset:[0,-4],targetOffset:yy},bottom:{points:["tc","bc"],overflow:gy,offset:[0,4],targetOffset:yy},topLeft:{points:["bl","tl"],overflow:gy,offset:[0,-4],targetOffset:yy},leftTop:{points:["tr","tl"],overflow:my,offset:[-4,0],targetOffset:yy},topRight:{points:["br","tr"],overflow:gy,offset:[0,-4],targetOffset:yy},rightTop:{points:["tl","tr"],overflow:my,offset:[4,0],targetOffset:yy},bottomRight:{points:["tr","br"],overflow:gy,offset:[0,4],targetOffset:yy},rightBottom:{points:["bl","br"],overflow:my,offset:[4,0],targetOffset:yy},bottomLeft:{points:["tl","bl"],overflow:gy,offset:[0,4],targetOffset:yy},leftBottom:{points:["br","bl"],overflow:my,offset:[-4,0],targetOffset:yy}};function xy(t){var e=t.children,n=t.prefixCls,r=t.id,i=t.overlayInnerStyle,o=t.className,a=t.style;return m.createElement("div",{className:ic()("".concat(n,"-content"),o),style:a},m.createElement("div",{className:"".concat(n,"-inner"),id:r,role:"tooltip",style:i},"function"===typeof e?e():e))}var _y=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],by=function(t,e){var n=t.overlayClassName,r=t.trigger,i=void 0===r?["hover"]:r,o=t.mouseEnterDelay,a=void 0===o?0:o,s=t.mouseLeaveDelay,l=void 0===s?.1:s,c=t.overlayStyle,u=t.prefixCls,h=void 0===u?"rc-tooltip":u,p=t.children,d=t.onVisibleChange,f=t.afterVisibleChange,g=t.transitionName,y=t.animation,v=t.motion,x=t.placement,_=void 0===x?"right":x,b=t.align,w=void 0===b?{}:b,S=t.destroyTooltipOnHide,C=void 0!==S&&S,E=t.defaultVisible,k=t.getTooltipContainer,M=t.overlayInnerStyle,T=(t.arrowContent,t.overlay),I=t.id,P=t.showArrow,O=void 0===P||P,A=Zo(t,_y),D=(0,m.useRef)(null);(0,m.useImperativeHandle)(e,(function(){return D.current}));var R=Or({},A);"visible"in t&&(R.popupVisible=t.visible);return m.createElement(fy,Ui({popupClassName:n,prefixCls:h,popup:function(){return m.createElement(xy,{key:"content",prefixCls:h,id:I,overlayInnerStyle:M},T)},action:i,builtinPlacements:vy,popupPlacement:_,ref:D,popupAlign:w,getPopupContainer:k,onPopupVisibleChange:d,afterPopupVisibleChange:f,popupTransitionName:g,popupAnimation:y,popupMotion:v,defaultPopupVisible:E,autoDestroy:C,mouseLeaveDelay:l,popupStyle:c,mouseEnterDelay:a,arrow:O},R),p)},wy=(0,m.forwardRef)(by);function Sy(t){return void 0!==t}function Cy(t,e){var n=e||{},r=n.defaultValue,i=n.value,o=n.onChange,a=n.postState,s=Ri(mc((function(){return Sy(i)?i:Sy(r)?"function"===typeof r?r():r:"function"===typeof t?t():t})),2),l=s[0],c=s[1],u=void 0!==i?i:l,h=a?a(u):u,p=Vm(o),d=Ri(mc([u]),2),f=d[0],g=d[1];return xd((function(){var t=f[0];l!==t&&p(l,t)}),[f]),xd((function(){Sy(i)||c(i)}),[i]),[h,Vm((function(t,e){c(t,e),g([u],e)}))]}const Ey=(t,e,n,r,i)=>{const o=t/2,a=o,s=1*n/Math.sqrt(2),l=o-n*(1-1/Math.sqrt(2)),c=o-e*(1/Math.sqrt(2)),u=n*(Math.sqrt(2)-1)+e*(1/Math.sqrt(2)),h=2*o-c,p=u,d=2*o-s,f=l,g=2*o-0,m=a,y=o*Math.sqrt(2)+n*(Math.sqrt(2)-2),v=n*(Math.sqrt(2)-1);return{pointerEvents:"none",width:t,height:t,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:t,height:t/2,background:r,clipPath:{_multi_value_:!0,value:[`polygon(${v}px 100%, 50% ${v}px, ${2*o-v}px 100%, ${v}px 100%)`,`path('M 0 ${a} A ${n} ${n} 0 0 0 ${s} ${l} L ${c} ${u} A ${e} ${e} 0 0 1 ${h} ${p} L ${d} ${f} A ${n} ${n} 0 0 0 ${g} ${m} Z')`]},content:'""'},"&::after":{content:'""',position:"absolute",width:y,height:y,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${e}px 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:i,zIndex:0,background:"transparent"}}},ky=8;function My(t){const e=ky,{contentRadius:n,limitVerticalRadius:r}=t,i=n>12?n+2:12;return{dropdownArrowOffset:i,dropdownArrowOffsetVertical:r?e:i}}function Ty(t,e){return t?e:{}}function Iy(t,e){const{componentCls:n,sizePopupArrow:r,borderRadiusXS:i,borderRadiusOuter:o,boxShadowPopoverArrow:a}=t,{colorBg:s,contentRadius:l=t.borderRadiusLG,limitVerticalRadius:c,arrowDistance:u=0,arrowPlacement:h={left:!0,right:!0,top:!0,bottom:!0}}=e,{dropdownArrowOffsetVertical:p,dropdownArrowOffset:d}=My({contentRadius:l,limitVerticalRadius:c});return{[n]:Object.assign(Object.assign(Object.assign(Object.assign({[`${n}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},Ey(r,i,o,s,a)),{"&:before":{background:s}})]},Ty(!!h.top,{[[`&-placement-top ${n}-arrow`,`&-placement-topLeft ${n}-arrow`,`&-placement-topRight ${n}-arrow`].join(",")]:{bottom:u,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top ${n}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft ${n}-arrow`]:{left:{_skip_check_:!0,value:d}},[`&-placement-topRight ${n}-arrow`]:{right:{_skip_check_:!0,value:d}}})),Ty(!!h.bottom,{[[`&-placement-bottom ${n}-arrow`,`&-placement-bottomLeft ${n}-arrow`,`&-placement-bottomRight ${n}-arrow`].join(",")]:{top:u,transform:"translateY(-100%)"},[`&-placement-bottom ${n}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft ${n}-arrow`]:{left:{_skip_check_:!0,value:d}},[`&-placement-bottomRight ${n}-arrow`]:{right:{_skip_check_:!0,value:d}}})),Ty(!!h.left,{[[`&-placement-left ${n}-arrow`,`&-placement-leftTop ${n}-arrow`,`&-placement-leftBottom ${n}-arrow`].join(",")]:{right:{_skip_check_:!0,value:u},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left ${n}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop ${n}-arrow`]:{top:p},[`&-placement-leftBottom ${n}-arrow`]:{bottom:p}})),Ty(!!h.right,{[[`&-placement-right ${n}-arrow`,`&-placement-rightTop ${n}-arrow`,`&-placement-rightBottom ${n}-arrow`].join(",")]:{left:{_skip_check_:!0,value:u},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right ${n}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop ${n}-arrow`]:{top:p},[`&-placement-rightBottom ${n}-arrow`]:{bottom:p}}))}}const Py={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},Oy={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},Ay=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function Dy(t){const{arrowWidth:e,autoAdjustOverflow:n,arrowPointAtCenter:r,offset:i,borderRadius:o}=t,a=e/2,s={};return Object.keys(Py).forEach((t=>{const l=r&&Oy[t]||Py[t],c=Object.assign(Object.assign({},l),{offset:[0,0]});switch(s[t]=c,Ay.has(t)&&(c.autoArrow=!1),t){case"top":case"topLeft":case"topRight":c.offset[1]=-a-i;break;case"bottom":case"bottomLeft":case"bottomRight":c.offset[1]=a+i;break;case"left":case"leftTop":case"leftBottom":c.offset[0]=-a-i;break;case"right":case"rightTop":case"rightBottom":c.offset[0]=a+i}const u=My({contentRadius:o,limitVerticalRadius:!0});if(r)switch(t){case"topLeft":case"bottomLeft":c.offset[0]=-u.dropdownArrowOffset-a;break;case"topRight":case"bottomRight":c.offset[0]=u.dropdownArrowOffset+a;break;case"leftTop":case"rightTop":c.offset[1]=-u.dropdownArrowOffset-a;break;case"leftBottom":case"rightBottom":c.offset[1]=u.dropdownArrowOffset+a}c.overflow=function(t,e,n,r){if(!1===r)return{adjustX:!1,adjustY:!1};const i=r&&"object"===typeof r?r:{},o={};switch(t){case"top":case"bottom":o.shiftX=2*e.dropdownArrowOffset+n;break;case"left":case"right":o.shiftY=2*e.dropdownArrowOffsetVertical+n}const a=Object.assign(Object.assign({},o),i);return a.shiftX||(a.adjustX=!0),a.shiftY||(a.adjustY=!0),a}(t,u,e,n)})),s}const Ry=(t,e)=>new Ml(t).setAlpha(e).toRgbString(),Ly=(t,e)=>new Ml(t).lighten(e).toHexString(),Ny=t=>{const e=xl(t,{theme:"dark"});return{1:e[0],2:e[1],3:e[2],4:e[3],5:e[6],6:e[5],7:e[4],8:e[6],9:e[5],10:e[4]}},Fy=(t,e)=>{const n=t||"#000",r=e||"#fff";return{colorBgBase:n,colorTextBase:r,colorText:Ry(r,.85),colorTextSecondary:Ry(r,.65),colorTextTertiary:Ry(r,.45),colorTextQuaternary:Ry(r,.25),colorFill:Ry(r,.18),colorFillSecondary:Ry(r,.12),colorFillTertiary:Ry(r,.08),colorFillQuaternary:Ry(r,.04),colorBgElevated:Ly(n,12),colorBgContainer:Ly(n,8),colorBgLayout:Ly(n,0),colorBgSpotlight:Ly(n,26),colorBorder:Ly(n,26),colorBorderSecondary:Ly(n,19)}};var zy=(t,e)=>{const n=Object.keys(El).map((e=>{const n=xl(t[e],{theme:"dark"});return new Array(10).fill(1).reduce(((t,r,i)=>(t[`${e}-${i+1}`]=n[i],t[`${e}${i+1}`]=n[i],t)),{})})).reduce(((t,e)=>t=Object.assign(Object.assign({},t),e)),{}),r=null!==e&&void 0!==e?e:Ll(t);return Object.assign(Object.assign(Object.assign({},r),n),Tl(t,{generateColorPalettes:Ny,generateNeutralColorPalettes:Fy}))};var By=(t,e)=>{const n=null!==e&&void 0!==e?e:Ll(t),r=n.fontSizeSM,i=n.controlHeight-4;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n),function(t){const{sizeUnit:e,sizeStep:n}=t,r=n-2;return{sizeXXL:e*(r+10),sizeXL:e*(r+6),sizeLG:e*(r+2),sizeMD:e*(r+2),sizeMS:e*(r+1),size:e*r,sizeSM:e*r,sizeXS:e*(r-1),sizeXXS:e*(r-1)}}(null!==e&&void 0!==e?e:t)),Rl(r)),{controlHeight:i}),Cl(Object.assign(Object.assign({},n),{controlHeight:i})))};var $y={defaultConfig:jl,defaultSeed:jl.token,useToken:function(){const[t,e,n]=Vl();return{theme:t,token:e,hashId:n}},defaultAlgorithm:Ll,darkAlgorithm:zy,compactAlgorithm:By};const jy=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"];function Uy(t,e){return jy.reduce(((n,r)=>{const i=t[`${r}1`],o=t[`${r}3`],a=t[`${r}6`],s=t[`${r}7`];return Object.assign(Object.assign({},n),e(r,{lightColor:i,lightBorderColor:o,darkColor:a,textColor:s}))}),{})}const Vy=t=>{const{componentCls:e,tooltipMaxWidth:n,tooltipColor:r,tooltipBg:i,tooltipBorderRadius:o,zIndexPopup:a,controlHeight:s,boxShadowSecondary:l,paddingSM:c,paddingXS:u,tooltipRadiusOuter:h}=t;return[{[e]:Object.assign(Object.assign(Object.assign(Object.assign({},fu(t)),{position:"absolute",zIndex:a,display:"block",width:"max-content",maxWidth:n,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":i,[`${e}-inner`]:{minWidth:s,minHeight:s,padding:`${c/2}px ${u}px`,color:r,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:i,borderRadius:o,boxShadow:l},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${e}-inner`]:{borderRadius:Math.min(o,ky)}},[`${e}-content`]:{position:"relative"}}),Uy(t,((t,n)=>{let{darkColor:r}=n;return{[`&${e}-${t}`]:{[`${e}-inner`]:{backgroundColor:r},[`${e}-arrow`]:{"--antd-arrow-background-color":r}}}}))),{"&-rtl":{direction:"rtl"}})},Iy(vh(t,{borderRadiusOuter:h}),{colorBg:"var(--antd-arrow-background-color)",contentRadius:o,limitVerticalRadius:!0}),{[`${e}-pure`]:{position:"relative",maxWidth:"none",margin:t.sizePopupArrow}}]};var Hy=(t,e)=>{const n=bh("Tooltip",(t=>{if(!1===e)return[];const{borderRadius:n,colorTextLightSolid:r,colorBgDefault:i,borderRadiusOuter:o}=t,a=vh(t,{tooltipMaxWidth:250,tooltipColor:r,tooltipBorderRadius:n,tooltipBg:i,tooltipRadiusOuter:o>4?4:o});return[Vy(a),Cf(t,"zoom-big-fast")]}),(t=>{let{zIndexPopupBase:e,colorBgSpotlight:n}=t;return{zIndexPopup:e+70,colorBgDefault:n}}));return n(t)};const Gy=jy.map((t=>`${t}-inverse`));function Wy(t,e){const n=function(t){return arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?jy.includes(t):[].concat(Sr(Gy),Sr(jy)).includes(t)}(e),r=ic()({[`${t}-${e}`]:e&&n}),i={},o={};return e&&!n&&(i.background=e,o["--antd-arrow-background-color"]=e),{className:r,overlayStyle:i,arrowStyle:o}}var Xy=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const{useToken:qy}=$y;function Yy(t,e){const n=t.type;if((!0===n.__ANT_BUTTON||"button"===t.type)&&t.props.disabled||!0===n.__ANT_SWITCH&&(t.props.disabled||t.props.loading)||!0===n.__ANT_RADIO&&t.props.disabled){const{picked:n,omitted:r}=((t,e)=>{const n={},r=Object.assign({},t);return e.forEach((e=>{t&&e in t&&(n[e]=t[e],delete r[e])})),{picked:n,omitted:r}})(t.props.style,["position","left","right","top","bottom","float","display","zIndex"]),i=Object.assign(Object.assign({display:"inline-block"},n),{cursor:"not-allowed",width:t.props.block?"100%":void 0}),o=Yh(t,{style:Object.assign(Object.assign({},r),{pointerEvents:"none"}),className:null});return m.createElement("span",{style:i,className:ic()(t.props.className,`${e}-disabled-compatible-wrapper`)},o)}return t}const Zy=m.forwardRef(((t,e)=>{var n,r;const{prefixCls:i,openClassName:o,getTooltipContainer:a,overlayClassName:s,color:l,overlayInnerStyle:c,children:u,afterOpenChange:h,afterVisibleChange:p,destroyTooltipOnHide:d,arrow:f=!0,title:g,overlay:y,builtinPlacements:v,arrowPointAtCenter:x=!1,autoAdjustOverflow:_=!0}=t,b=!!f,{token:w}=qy(),{getPopupContainer:S,getPrefixCls:C,direction:E}=m.useContext(Gl),k=m.useRef(null),M=()=>{var t;null===(t=k.current)||void 0===t||t.forceAlign()};m.useImperativeHandle(e,(()=>({forceAlign:M,forcePopupAlign:()=>{M()}})));const[T,I]=Cy(!1,{value:null!==(n=t.open)&&void 0!==n?n:t.visible,defaultValue:null!==(r=t.defaultOpen)&&void 0!==r?r:t.defaultVisible}),P=!g&&!y&&0!==g,O=m.useMemo((()=>{var t,e;let n=x;return"object"===typeof f&&(n=null!==(e=null!==(t=f.pointAtCenter)&&void 0!==t?t:f.arrowPointAtCenter)&&void 0!==e?e:x),v||Dy({arrowPointAtCenter:n,autoAdjustOverflow:_,arrowWidth:b?w.sizePopupArrow:0,borderRadius:w.borderRadius,offset:w.marginXXS})}),[x,f,v,w]),A=m.useMemo((()=>0===g?g:y||g||""),[y,g]),D=m.createElement(cp,null,"function"===typeof A?A():A),{getPopupContainer:R,placement:L="top",mouseEnterDelay:N=.1,mouseLeaveDelay:F=.1,overlayStyle:z,rootClassName:B}=t,$=Xy(t,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),j=C("tooltip",i),U=C(),V=t["data-popover-inject"];let H=T;"open"in t||"visible"in t||!P||(H=!1);const G=Yy(Xh(u)&&!qh(u)?u:m.createElement("span",null,u),j),W=G.props,X=W.className&&"string"!==typeof W.className?W.className:ic()(W.className,{[o||`${j}-open`]:!0}),[q,Y]=Hy(j,!V),Z=Wy(j,l),K=Object.assign(Object.assign({},c),Z.overlayStyle),J=Z.arrowStyle,Q=ic()(s,{[`${j}-rtl`]:"rtl"===E},Z.className,B,Y);return q(m.createElement(wy,Object.assign({},$,{showArrow:b,placement:L,mouseEnterDelay:N,mouseLeaveDelay:F,prefixCls:j,overlayClassName:Q,overlayStyle:Object.assign(Object.assign({},J),z),getTooltipContainer:R||a||S,ref:k,builtinPlacements:O,overlay:D,visible:H,onVisibleChange:e=>{var n,r;I(!P&&e),P||(null===(n=t.onOpenChange)||void 0===n||n.call(t,e),null===(r=t.onVisibleChange)||void 0===r||r.call(t,e))},afterVisibleChange:null!==h&&void 0!==h?h:p,overlayInnerStyle:K,arrowContent:m.createElement("span",{className:`${j}-arrow-content`}),motion:{motionName:dd(U,"zoom-big-fast",t.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!d}),H?Yh(G,{className:X}):G))}));Zy._InternalPanelDoNotUseOrYouWillBeFired=function(t){const{prefixCls:e,className:n,placement:r="top",title:i,color:o,overlayInnerStyle:a}=t,{getPrefixCls:s}=m.useContext(Gl),l=s("tooltip",e),[c,u]=Hy(l,!0),h=Wy(l,o),p=Object.assign(Object.assign({},a),h.overlayStyle),d=h.arrowStyle;return c(m.createElement("div",{className:ic()(u,l,`${l}-pure`,`${l}-placement-${r}`,n,h.className),style:d},m.createElement("div",{className:`${l}-arrow`}),m.createElement(xy,Object.assign({},t,{className:u,prefixCls:l,overlayInnerStyle:p}),i)))};var Ky=Zy,Jy=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};var Qy=t=>{let{prefixCls:e,label:n,htmlFor:r,labelCol:i,labelAlign:o,colon:a,required:s,requiredMark:l,tooltip:c}=t;var u;const[h]=od("Form"),{vertical:p,labelAlign:d,labelCol:f,labelWrap:g,colon:y}=m.useContext(Kd);if(!n)return null;const v=i||f||{},x=o||d,_=`${e}-item-label`,b=ic()(_,"left"===x&&`${_}-left`,v.className,{[`${_}-wrap`]:!!g});let w=n;const S=!0===a||!1!==y&&!1!==a;S&&!p&&"string"===typeof n&&""!==n.trim()&&(w=n.replace(/[:|\uff1a]\s*$/,""));const C=function(t){return t?"object"!==typeof t||m.isValidElement(t)?{title:t}:t:null}(c);if(C){const{icon:t=m.createElement(hm,null)}=C,n=Jy(C,["icon"]),r=m.createElement(Ky,Object.assign({},n),m.cloneElement(t,{className:`${e}-item-tooltip`,title:""}));w=m.createElement(m.Fragment,null,w,r)}"optional"!==l||s||(w=m.createElement(m.Fragment,null,w,m.createElement("span",{className:`${e}-item-optional`,title:""},(null===h||void 0===h?void 0:h.optional)||(null===(u=Rs.Form)||void 0===u?void 0:u.optional))));const E=ic()({[`${e}-item-required`]:s,[`${e}-item-required-mark-optional`]:"optional"===l,[`${e}-item-no-colon`]:!S});return m.createElement(sm,Object.assign({},v,{className:b}),m.createElement("label",{htmlFor:r,className:E,title:"string"===typeof n?n:""},w))},tv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const ev={success:nh,warning:Zu,error:Qu,validating:Xu};function nv(t){const{prefixCls:e,className:n,rootClassName:r,style:i,help:o,errors:a,warnings:s,validateStatus:l,meta:c,hasFeedback:u,hidden:h,children:p,fieldId:d,required:f,isRequired:g,onSubItemMetaChange:y}=t,v=tv(t,["prefixCls","className","rootClassName","style","help","errors","warnings","validateStatus","meta","hasFeedback","hidden","children","fieldId","required","isRequired","onSubItemMetaChange"]),x=`${e}-item`,{requiredMark:_}=m.useContext(Kd),b=m.useRef(null),w=cg(a),S=cg(s),C=void 0!==o&&null!==o,E=!!(C||a.length||s.length),k=!!b.current&&Wh(b.current),[M,T]=m.useState(null);_d((()=>{if(E&&b.current){const t=getComputedStyle(b.current);T(parseInt(t.marginBottom,10))}}),[E,k]);const I=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e="";const n=t?w:c.errors,r=t?S:c.warnings;return void 0!==l?e=l:c.validating?e="validating":n.length?e="error":r.length?e="warning":(c.touched||u&&c.validated)&&(e="success"),e}(),P=m.useMemo((()=>{let t;if(u){const e=I&&ev[I];t=e?m.createElement("span",{className:ic()(`${x}-feedback-icon`,`${x}-feedback-icon-${I}`)},m.createElement(e,null)):null}return{status:I,errors:a,warnings:s,hasFeedback:u,feedbackIcon:t,isFormItemInput:!0}}),[I,u]),O=ic()(x,n,r,{[`${x}-with-help`]:C||w.length||S.length,[`${x}-has-feedback`]:I&&u,[`${x}-has-success`]:"success"===I,[`${x}-has-warning`]:"warning"===I,[`${x}-has-error`]:"error"===I,[`${x}-is-validating`]:"validating"===I,[`${x}-hidden`]:h});return m.createElement("div",{className:O,style:i,ref:b},m.createElement(rm,Object.assign({className:`${x}-row`},Gh(v,["_internalItemRender","colon","dependencies","extra","fieldKey","getValueFromEvent","getValueProps","htmlFor","id","initialValue","isListField","label","labelAlign","labelCol","labelWrap","messageVariables","name","normalize","noStyle","preserve","requiredMark","rules","shouldUpdate","trigger","tooltip","validateFirst","validateTrigger","valuePropName","wrapperCol"])),m.createElement(Qy,Object.assign({htmlFor:d},t,{requiredMark:_,required:null!==f&&void 0!==f?f:g,prefixCls:e})),m.createElement(lm,Object.assign({},t,c,{errors:w,warnings:S,prefixCls:e,status:I,help:o,marginBottom:M,onErrorVisibleChanged:t=>{t||T(null)}}),m.createElement(Jd.Provider,{value:y},m.createElement(tf.Provider,{value:P},p)))),!!M&&m.createElement("div",{className:`${x}-margin-offset`,style:{marginBottom:-M}}))}const rv=m.memo((t=>{let{children:e}=t;return e}),((t,e)=>t.value===e.value&&t.update===e.update&&t.childProps.length===e.childProps.length&&t.childProps.every(((t,n)=>t===e.childProps[n]))));const iv=function(t){const{name:e,noStyle:n,className:r,dependencies:i,prefixCls:o,shouldUpdate:a,rules:s,children:l,required:c,label:u,messageVariables:h,trigger:p="onChange",validateTrigger:d,hidden:f,help:g}=t,{getPrefixCls:y}=m.useContext(Gl),{name:v}=m.useContext(Kd),x=function(t){if("function"===typeof t)return t;const e=ra(t);return e.length<=1?e[0]:e}(l),_="function"===typeof x,b=m.useContext(Jd),{validateTrigger:w}=m.useContext(aa),S=void 0!==d?d:w,C=function(t){return!(void 0===t||null===t)}(e),E=y("form",o),[k,M]=bg(E),T=m.useContext(sa),I=m.useRef(),[P,O]=function(t){const[e,n]=m.useState(t),r=(0,m.useRef)(null),i=(0,m.useRef)([]),o=(0,m.useRef)(!1);return m.useEffect((()=>(o.current=!1,()=>{o.current=!0,Xc.cancel(r.current),r.current=null})),[]),[e,function(t){o.current||(null===r.current&&(i.current=[],r.current=Xc((()=>{r.current=null,n((t=>{let e=t;return i.current.forEach((t=>{e=t(e)})),e}))}))),i.current.push(t))}]}({}),[A,D]=mc((()=>({errors:[],warnings:[],touched:!1,validating:!1,name:[],validated:!1}))),R=(t,e)=>{O((n=>{const r=Object.assign({},n),i=[].concat(Sr(t.name.slice(0,-1)),Sr(e)).join("__SPLIT__");return t.destroy?delete r[i]:r[i]=t,r}))},[L,N]=m.useMemo((()=>{const t=Sr(A.errors),e=Sr(A.warnings);return Object.values(P).forEach((n=>{t.push.apply(t,Sr(n.errors||[])),e.push.apply(e,Sr(n.warnings||[]))})),[t,e]}),[P,A.errors,A.warnings]),F=function(){const{itemRef:t}=m.useContext(Kd),e=m.useRef({});return function(n,r){const i=r&&"object"===typeof r&&r.ref,o=n.join("_");return e.current.name===o&&e.current.originRef===i||(e.current.name=o,e.current.originRef=i,e.current.ref=lc(t(n),i)),e.current.ref}}();function z(e,i,o){return n&&!f?e:m.createElement(nv,Object.assign({key:"row"},t,{className:ic()(r,M),prefixCls:E,fieldId:i,isRequired:o,errors:L,warnings:N,meta:A,onSubItemMetaChange:R}),e)}if(!C&&!_&&!i)return k(z(x));let B={};return"string"===typeof u?B.label=u:e&&(B.label=String(e)),h&&(B=Object.assign(Object.assign({},B),h)),k(m.createElement(us,Object.assign({},t,{messageVariables:B,trigger:p,validateTrigger:S,onMetaChange:t=>{const e=null===T||void 0===T?void 0:T.getKey(t.name);if(D(t.destroy?{errors:[],warnings:[],touched:!1,validating:!1,name:[],validated:!1}:t,!0),n&&!1!==g&&b){let n=t.name;if(t.destroy)n=I.current||n;else if(void 0!==e){const[t,r]=e;n=[t].concat(Sr(r)),I.current=n}b(t,n)}}}),((n,r,o)=>{const l=Rg(e).length&&r?r.name:[],u=Lg(l,v),h=void 0!==c?c:!(!s||!s.some((t=>{if(t&&"object"===typeof t&&t.required&&!t.warningOnly)return!0;if("function"===typeof t){const e=t(o);return e&&e.required&&!e.warningOnly}return!1}))),d=Object.assign({},n);let f=null;if(Array.isArray(x)&&C)f=x;else if(_&&(!a&&!i||C));else if(!i||_||C)if(Xh(x)){const e=Object.assign(Object.assign({},x.props),d);if(e.id||(e.id=u),g||L.length>0||N.length>0||t.extra){const n=[];(g||L.length>0)&&n.push(`${u}_help`),t.extra&&n.push(`${u}_extra`),e["aria-describedby"]=n.join(" ")}L.length>0&&(e["aria-invalid"]="true"),h&&(e["aria-required"]="true"),uc(x)&&(e.ref=F(l,x));new Set([].concat(Sr(Rg(p)),Sr(Rg(S)))).forEach((t=>{e[t]=function(){for(var e,n,r,i,o,a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];null===(r=d[t])||void 0===r||(e=r).call.apply(e,[d].concat(s)),null===(o=(i=x.props)[t])||void 0===o||(n=o).call.apply(n,[i].concat(s))}}));const n=[e["aria-required"],e["aria-invalid"],e["aria-describedby"]];f=m.createElement(rv,{value:d[t.valuePropName||"value"],update:x,childProps:n},Yh(x,e))}else f=_&&(a||i)&&!C?x(o):x;else;return z(f,u,h)})))};iv.useStatus=Ug;var ov=iv,av=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};var sv=t=>{var{prefixCls:e,children:n}=t,r=av(t,["prefixCls","children"]);const{getPrefixCls:i}=m.useContext(Gl),o=i("form",e),a=m.useMemo((()=>({prefixCls:o,status:"error"})),[o]);return m.createElement(hs,Object.assign({},r),((t,e,r)=>m.createElement(Qd.Provider,{value:a},n(t.map((t=>Object.assign(Object.assign({},t),{fieldKey:t.key}))),e,{errors:r.errors,warnings:r.warnings}))))};const lv=$g;lv.Item=ov,lv.List=sv,lv.ErrorList=Cg,lv.useForm=Fg,lv.useFormInstance=function(){const{form:t}=(0,m.useContext)(Kd);return t},lv.useWatch=ks,lv.Provider=t=>{const e=Gh(t,["prefixCls"]);return m.createElement(_s,Object.assign({},e))},lv.create=()=>{};var cv=lv;function uv(t){var e=t.responseText||t.response;if(!e)return e;try{return JSON.parse(e)}catch(kg){return e}}function hv(t){var e=new XMLHttpRequest;t.onProgress&&e.upload&&(e.upload.onprogress=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),t.onProgress(e)});var n=new FormData;t.data&&Object.keys(t.data).forEach((function(e){var r=t.data[e];Array.isArray(r)?r.forEach((function(t){n.append("".concat(e,"[]"),t)})):n.append(e,r)})),t.file instanceof Blob?n.append(t.filename,t.file,t.file.name):n.append(t.filename,t.file),e.onerror=function(e){t.onError(e)},e.onload=function(){return e.status<200||e.status>=300?t.onError(function(t,e){var n="cannot ".concat(t.method," ").concat(t.action," ").concat(e.status,"'"),r=new Error(n);return r.status=e.status,r.method=t.method,r.url=t.action,r}(t,e),uv(e)):t.onSuccess(uv(e),e)},e.open(t.method,t.action,!0),t.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);var r=t.headers||{};return null!==r["X-Requested-With"]&&e.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(r).forEach((function(t){null!==r[t]&&e.setRequestHeader(t,r[t])})),e.send(n),{abort:function(){e.abort()}}}var pv=+new Date,dv=0;function fv(){return"rc-upload-".concat(pv,"-").concat(++dv)}var gv=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(","),r=t.name||"",i=t.type||"",o=i.replace(/\/.*$/,"");return n.some((function(t){var e=t.trim();if(/^\*(\/\*)?$/.test(t))return!0;if("."===e.charAt(0)){var n=r.toLowerCase(),a=e.toLowerCase(),s=[a];return".jpg"!==a&&".jpeg"!==a||(s=[".jpg",".jpeg"]),s.some((function(t){return n.endsWith(t)}))}return/\/\*$/.test(e)?o===e.replace(/\/.*$/,""):i===e||!!/^\w+$/.test(e)&&(ni(!1,"Upload takes an invalidate 'accept' type '".concat(e,"'.Skip for check.")),!0)}))}return!0};var mv=function(t,e,n){var r=function t(r,i){r.path=i||"",r.isFile?r.file((function(t){n(t)&&(r.fullPath&&!t.webkitRelativePath&&(Object.defineProperties(t,{webkitRelativePath:{writable:!0}}),t.webkitRelativePath=r.fullPath.replace(/^\//,""),Object.defineProperties(t,{webkitRelativePath:{writable:!1}})),e([t]))})):r.isDirectory&&function(t,e){var n=t.createReader(),r=[];!function t(){n.readEntries((function(n){var i=Array.prototype.slice.apply(n);r=r.concat(i),i.length?t():e(r)}))}()}(r,(function(e){e.forEach((function(e){t(e,"".concat(i).concat(r.name,"/"))}))}))};t.forEach((function(t){r(t.webkitGetAsEntry())}))},yv=["component","prefixCls","className","disabled","id","style","multiple","accept","capture","children","directory","openFileDialogOnClick","onMouseEnter","onMouseLeave"],vv=function(t){Qo(n,t);var e=ea(n);function n(){var t;ii(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).state={uid:fv()},t.reqs={},t.fileInput=void 0,t._isMounted=void 0,t.onChange=function(e){var n=t.props,r=n.accept,i=n.directory,o=Sr(e.target.files).filter((function(t){return!i||gv(t,r)}));t.uploadFiles(o),t.reset()},t.onClick=function(e){var n=t.fileInput;if(n){var r=t.props,i=r.children,o=r.onClick;if(i&&"button"===i.type){var a=n.parentNode;a.focus(),a.querySelector("button").blur()}n.click(),o&&o(e)}},t.onKeyDown=function(e){"Enter"===e.key&&t.onClick(e)},t.onFileDrop=function(e){var n=t.props.multiple;if(e.preventDefault(),"dragover"!==e.type)if(t.props.directory)mv(Array.prototype.slice.call(e.dataTransfer.items),t.uploadFiles,(function(e){return gv(e,t.props.accept)}));else{var r=Sr(e.dataTransfer.files).filter((function(e){return gv(e,t.props.accept)}));!1===n&&(r=r.slice(0,1)),t.uploadFiles(r)}},t.uploadFiles=function(e){var n=Sr(e),r=n.map((function(e){return e.uid=fv(),t.processFile(e,n)}));Promise.all(r).then((function(e){var n=t.props.onBatchStart;null===n||void 0===n||n(e.map((function(t){return{file:t.origin,parsedFile:t.parsedFile}}))),e.filter((function(t){return null!==t.parsedFile})).forEach((function(e){t.post(e)}))}))},t.processFile=function(){var e=Mr(Er().mark((function e(n,r){var i,o,a,s,l,c,u,h,p;return Er().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.props.beforeUpload,o=n,!i){e.next=14;break}return e.prev=3,e.next=6,i(n,r);case 6:o=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),o=!1;case 12:if(!1!==o){e.next=14;break}return e.abrupt("return",{origin:n,parsedFile:null,action:null,data:null});case 14:if("function"!==typeof(a=t.props.action)){e.next=21;break}return e.next=18,a(n);case 18:s=e.sent,e.next=22;break;case 21:s=a;case 22:if("function"!==typeof(l=t.props.data)){e.next=29;break}return e.next=26,l(n);case 26:c=e.sent,e.next=30;break;case 29:c=l;case 30:return u="object"!==Cr(o)&&"string"!==typeof o||!o?n:o,h=u instanceof File?u:new File([u],n.name,{type:n.type}),(p=h).uid=n.uid,e.abrupt("return",{origin:n,data:c,parsedFile:p,action:s});case 35:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t,n){return e.apply(this,arguments)}}(),t.saveFileInput=function(e){t.fileInput=e},t}return ai(n,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.abort()}},{key:"post",value:function(t){var e=this,n=t.data,r=t.origin,i=t.action,o=t.parsedFile;if(this._isMounted){var a=this.props,s=a.onStart,l=a.customRequest,c=a.name,u=a.headers,h=a.withCredentials,p=a.method,d=r.uid,f=l||hv,g={action:i,filename:c,data:n,file:o,headers:u,withCredentials:h,method:p||"post",onProgress:function(t){var n=e.props.onProgress;null===n||void 0===n||n(t,o)},onSuccess:function(t,n){var r=e.props.onSuccess;null===r||void 0===r||r(t,o,n),delete e.reqs[d]},onError:function(t,n){var r=e.props.onError;null===r||void 0===r||r(t,n,o),delete e.reqs[d]}};s(r),this.reqs[d]=f(g)}}},{key:"reset",value:function(){this.setState({uid:fv()})}},{key:"abort",value:function(t){var e=this.reqs;if(t){var n=t.uid?t.uid:t;e[n]&&e[n].abort&&e[n].abort(),delete e[n]}else Object.keys(e).forEach((function(t){e[t]&&e[t].abort&&e[t].abort(),delete e[t]}))}},{key:"render",value:function(){var t,e=this.props,n=e.component,r=e.prefixCls,i=e.className,o=e.disabled,a=e.id,s=e.style,l=e.multiple,c=e.accept,u=e.capture,h=e.children,p=e.directory,d=e.openFileDialogOnClick,f=e.onMouseEnter,g=e.onMouseLeave,y=Zo(e,yv),v=ic()((Ir(t={},r,!0),Ir(t,"".concat(r,"-disabled"),o),Ir(t,i,i),t)),x=p?{directory:"directory",webkitdirectory:"webkitdirectory"}:{},_=o?{}:{onClick:d?this.onClick:function(){},onKeyDown:d?this.onKeyDown:function(){},onMouseEnter:f,onMouseLeave:g,onDrop:this.onFileDrop,onDragOver:this.onFileDrop,tabIndex:"0"};return m.createElement(n,Ui({},_,{className:v,role:"button",style:s}),m.createElement("input",Ui({},zd(y,{aria:!0,data:!0}),{id:a,type:"file",ref:this.saveFileInput,onClick:function(t){return t.stopPropagation()},key:this.state.uid,style:{display:"none"},accept:c},x,{multiple:l,onChange:this.onChange},null!=u?{capture:u}:{})),h)}}]),n}(m.Component),xv=vv;function _v(){}var bv=function(t){Qo(n,t);var e=ea(n);function n(){var t;ii(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).uploader=void 0,t.saveUploader=function(e){t.uploader=e},t}return ai(n,[{key:"abort",value:function(t){this.uploader.abort(t)}},{key:"render",value:function(){return m.createElement(xv,Ui({},this.props,{ref:this.saveUploader}))}}]),n}(m.Component);bv.defaultProps={component:"span",prefixCls:"rc-upload",data:{},headers:{},name:"file",multipart:!1,onStart:_v,onError:_v,onSuccess:_v,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1,openFileDialogOnClick:!0};var wv=bv,Sv={icon:function(t,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z",fill:e}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:t}}]}},name:"file",theme:"twotone"},Cv=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:Sv}))};var Ev=m.forwardRef(Cv),kv={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"},Mv=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:kv}))};var Tv=m.forwardRef(Mv),Iv={icon:function(t,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z",fill:t}},{tag:"path",attrs:{d:"M424.6 765.8l-150.1-178L136 752.1V792h752v-30.4L658.1 489z",fill:e}},{tag:"path",attrs:{d:"M136 652.7l132.4-157c3.2-3.8 9-3.8 12.2 0l144 170.7L652 396.8c3.2-3.8 9-3.8 12.2 0L888 662.2V232H136v420.7zM304 280a88 88 0 110 176 88 88 0 010-176z",fill:e}},{tag:"path",attrs:{d:"M276 368a28 28 0 1056 0 28 28 0 10-56 0z",fill:e}},{tag:"path",attrs:{d:"M304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z",fill:t}}]}},name:"picture",theme:"twotone"},Pv=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:Iv}))};var Ov=m.forwardRef(Pv);function Av(){const[,t]=m.useReducer((t=>t+1),0);return t}function Dv(t){return Object.assign(Object.assign({},t),{lastModified:t.lastModified,lastModifiedDate:t.lastModifiedDate,name:t.name,size:t.size,type:t.type,uid:t.uid,percent:0,originFileObj:t})}function Rv(t,e){const n=Sr(e),r=n.findIndex((e=>{let{uid:n}=e;return n===t.uid}));return-1===r?n.push(t):n[r]=t,n}function Lv(t,e){const n=void 0!==t.uid?"uid":"name";return e.filter((e=>e[n]===t[n]))[0]}const Nv=t=>0===t.indexOf("image/"),Fv=t=>{if(t.type&&!t.thumbUrl)return Nv(t.type);const e=t.thumbUrl||t.url||"",n=function(){const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("/"),e=t[t.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(e)||[""])[0]}(e);return!(!/^data:image\//.test(e)&&!/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico|heic|heif)$/i.test(n))||!/^data:/.test(e)&&!n},zv=200;function Bv(t){return new Promise((e=>{if(!t.type||!Nv(t.type))return void e("");const n=document.createElement("canvas");n.width=zv,n.height=zv,n.style.cssText="position: fixed; left: 0; top: 0; width: 200px; height: 200px; z-index: 9999; display: none;",document.body.appendChild(n);const r=n.getContext("2d"),i=new Image;if(i.onload=()=>{const{width:t,height:o}=i;let a=zv,s=zv,l=0,c=0;t>o?(s=o*(zv/t),c=-(s-a)/2):(a=t*(zv/o),l=-(a-s)/2),r.drawImage(i,l,c,a,s);const u=n.toDataURL();document.body.removeChild(n),e(u)},i.crossOrigin="anonymous",t.type.startsWith("image/svg+xml")){const e=new FileReader;e.addEventListener("load",(()=>{e.result&&(i.src=e.result)})),e.readAsDataURL(t)}else i.src=window.URL.createObjectURL(t)}))}var $v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},jv=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:$v}))};var Uv=m.forwardRef(jv),Vv={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},Hv=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:Vv}))};var Gv=m.forwardRef(Hv),Wv={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},Xv=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:Wv}))};var qv=m.forwardRef(Xv),Yv={className:"",percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,style:{},trailColor:"#D9D9D9",trailWidth:1,gapPosition:"bottom"},Zv=function(){var t=(0,m.useRef)([]),e=(0,m.useRef)(null);return(0,m.useEffect)((function(){var n=Date.now(),r=!1;t.current.forEach((function(t){if(t){r=!0;var i=t.style;i.transitionDuration=".3s, .3s, .3s, .06s",e.current&&n-e.current<100&&(i.transitionDuration="0s, 0s")}})),r&&(e.current=Date.now())})),t.current},Kv=["className","percent","prefixCls","strokeColor","strokeLinecap","strokeWidth","style","trailColor","trailWidth","transition"],Jv=function(t){var e=t.className,n=t.percent,r=t.prefixCls,i=t.strokeColor,o=t.strokeLinecap,a=t.strokeWidth,s=t.style,l=t.trailColor,c=t.trailWidth,u=t.transition,h=Zo(t,Kv);delete h.gapPosition;var p=Array.isArray(n)?n:[n],d=Array.isArray(i)?i:[i],f=Zv(),g=a/2,y=100-a/2,v="M ".concat("round"===o?g:0,",").concat(g,"\n         L ").concat("round"===o?y:100,",").concat(g),x="0 0 100 ".concat(a),_=0;return m.createElement("svg",Ui({className:ic()("".concat(r,"-line"),e),viewBox:x,preserveAspectRatio:"none",style:s},h),m.createElement("path",{className:"".concat(r,"-line-trail"),d:v,strokeLinecap:o,stroke:l,strokeWidth:c||a,fillOpacity:"0"}),p.map((function(t,e){var n=1;switch(o){case"round":n=1-a/100;break;case"square":n=1-a/2/100;break;default:n=1}var i={strokeDasharray:"".concat(t*n,"px, 100px"),strokeDashoffset:"-".concat(_,"px"),transition:u||"stroke-dashoffset 0.3s ease 0s, stroke-dasharray .3s ease 0s, stroke 0.3s linear"},s=d[e]||d[d.length-1];return _+=t,m.createElement("path",{key:e,className:"".concat(r,"-line-path"),d:v,strokeLinecap:o,stroke:s,strokeWidth:a,fillOpacity:"0",ref:function(t){f[e]=t},style:i})})))};Jv.defaultProps=Yv,Jv.displayName="Line";var Qv=0,tx=gi();var ex=function(t){var e=Ri(m.useState(),2),n=e[0],r=e[1];return m.useEffect((function(){r("rc_progress_".concat(function(){var t;return tx?(t=Qv,Qv+=1):t="TEST_OR_SSR",t}()))}),[]),t||n},nx=["id","prefixCls","steps","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","style","className","strokeColor","percent"];function rx(t){return+t.replace("%","")}function ix(t){var e=null!==t&&void 0!==t?t:[];return Array.isArray(e)?e:[e]}var ox=100,ax=function(t,e,n,r,i,o,a,s,l,c){var u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,h=n/100*360*((360-o)/360),p=0===o?0:{bottom:0,top:180,left:90,right:-90}[a],d=(100-r)/100*e;return"round"===l&&100!==r&&(d+=c/2)>=e&&(d=e-.01),{stroke:"string"===typeof s?s:void 0,strokeDasharray:"".concat(e,"px ").concat(t),strokeDashoffset:d+u,transform:"rotate(".concat(i+h+p,"deg)"),transformOrigin:"0 0",transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s",fillOpacity:0}},sx=function(t){var e=t.id,n=t.prefixCls,r=t.steps,i=t.strokeWidth,o=t.trailWidth,a=t.gapDegree,s=void 0===a?0:a,l=t.gapPosition,c=t.trailColor,u=t.strokeLinecap,h=t.style,p=t.className,d=t.strokeColor,f=t.percent,g=Zo(t,nx),y=ex(e),v="".concat(y,"-gradient"),x=50-i/2,_=2*Math.PI*x,b=s>0?90+s/2:-90,w=_*((360-s)/360),S="object"===Cr(r)?r:{count:r,space:2},C=S.count,E=S.space,k=ax(_,w,0,100,b,s,l,c,u,i),M=ix(f),T=ix(d),I=T.find((function(t){return t&&"object"===Cr(t)})),P=Zv();return m.createElement("svg",Ui({className:ic()("".concat(n,"-circle"),p),viewBox:"".concat(-50," ").concat(-50," ").concat(ox," ").concat(ox),style:h,id:e,role:"presentation"},g),I&&m.createElement("defs",null,m.createElement("linearGradient",{id:v,x1:"100%",y1:"0%",x2:"0%",y2:"0%"},Object.keys(I).sort((function(t,e){return rx(t)-rx(e)})).map((function(t,e){return m.createElement("stop",{key:e,offset:t,stopColor:I[t]})})))),!C&&m.createElement("circle",{className:"".concat(n,"-circle-trail"),r:x,cx:0,cy:0,stroke:c,strokeLinecap:u,strokeWidth:o||i,style:k}),C?function(){var t=Math.round(C*(M[0]/100)),e=100/C,r=0;return new Array(C).fill(null).map((function(o,a){var u=a<=t-1?T[0]:c,h=u&&"object"===Cr(u)?"url(#".concat(v,")"):void 0,p=ax(_,w,r,e,b,s,l,u,"butt",i,E);return r+=100*(w-p.strokeDashoffset+E)/w,m.createElement("circle",{key:a,className:"".concat(n,"-circle-path"),r:x,cx:0,cy:0,stroke:h,strokeWidth:i,opacity:1,style:p,ref:function(t){P[a]=t}})}))}():function(){var t=0;return M.map((function(e,r){var o=T[r]||T[T.length-1],a=o&&"object"===Cr(o)?"url(#".concat(v,")"):void 0,c=ax(_,w,t,e,b,s,l,o,u,i);return t+=e,m.createElement("circle",{key:r,className:"".concat(n,"-circle-path"),r:x,cx:0,cy:0,stroke:a,strokeLinecap:u,strokeWidth:i,opacity:0===e?0:1,style:c,ref:function(t){P[r]=t}})})).reverse()}())};sx.defaultProps=Yv,sx.displayName="Circle";var lx=sx;function cx(t){return!t||t<0?0:t>100?100:t}function ux(t){let{success:e,successPercent:n}=t,r=n;return e&&"progress"in e&&(r=e.progress),e&&"percent"in e&&(r=e.percent),r}const hx=t=>{let{percent:e,success:n,successPercent:r}=t;const i=cx(ux({success:n,successPercent:r}));return[i,cx(cx(e)-i)]},px=(t,e,n)=>{var r,i,o,a;let s=-1,l=-1;if("step"===e){const e=n.steps,r=n.strokeWidth;"string"===typeof t||"undefined"===typeof t?(s="small"===t?2:14,l=null!==r&&void 0!==r?r:8):"number"===typeof t?[s,l]=[t,t]:[s=14,l=8]=t,s*=e}else if("line"===e){const e=null===n||void 0===n?void 0:n.strokeWidth;"string"===typeof t||"undefined"===typeof t?l=e||("small"===t?6:8):"number"===typeof t?[s,l]=[t,t]:[s=-1,l=8]=t}else"circle"!==e&&"dashboard"!==e||("string"===typeof t||"undefined"===typeof t?[s,l]="small"===t?[60,60]:[120,120]:"number"===typeof t?[s,l]=[t,t]:(s=null!==(i=null!==(r=t[0])&&void 0!==r?r:t[1])&&void 0!==i?i:120,l=null!==(a=null!==(o=t[0])&&void 0!==o?o:t[1])&&void 0!==a?a:120));return[s,l]};var dx=t=>{const{prefixCls:e,trailColor:n=null,strokeLinecap:r="round",gapPosition:i,gapDegree:o,width:a=120,type:s,children:l,success:c,size:u=a}=t,[h,p]=px(u,"circle");let{strokeWidth:d}=t;void 0===d&&(d=Math.max((t=>3/t*100)(h),6));const f={width:h,height:p,fontSize:.15*h+6},g=m.useMemo((()=>o||0===o?o:"dashboard"===s?75:void 0),[o,s]),y=i||"dashboard"===s&&"bottom"||void 0,v="[object Object]"===Object.prototype.toString.call(t.strokeColor),x=(t=>{let{success:e={},strokeColor:n}=t;const{strokeColor:r}=e;return[r||_l.green,n||null]})({success:c,strokeColor:t.strokeColor}),_=ic()(`${e}-inner`,{[`${e}-circle-gradient`]:v}),b=m.createElement(lx,{percent:hx(t),strokeWidth:d,trailWidth:d,strokeColor:x,strokeLinecap:r,trailColor:n,prefixCls:e,gapDegree:g,gapPosition:y});return m.createElement("div",{className:_,style:f},h<=20?m.createElement(Ky,{title:l},m.createElement("span",null,b)):m.createElement(m.Fragment,null,b,l))},fx=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const gx=(t,e)=>{const{from:n=_l.blue,to:r=_l.blue,direction:i=("rtl"===e?"to left":"to right")}=t,o=fx(t,["from","to","direction"]);if(0!==Object.keys(o).length){const t=(t=>{let e=[];return Object.keys(t).forEach((n=>{const r=parseFloat(n.replace(/%/g,""));isNaN(r)||e.push({key:r,value:t[n]})})),e=e.sort(((t,e)=>t.key-e.key)),e.map((t=>{let{key:e,value:n}=t;return`${n} ${e}%`})).join(", ")})(o);return{backgroundImage:`linear-gradient(${i}, ${t})`}}return{backgroundImage:`linear-gradient(${i}, ${n}, ${r})`}};var mx=t=>{const{prefixCls:e,direction:n,percent:r,size:i,strokeWidth:o,strokeColor:a,strokeLinecap:s="round",children:l,trailColor:c=null,success:u}=t,h=a&&"string"!==typeof a?gx(a,n):{backgroundColor:a},p="square"===s||"butt"===s?0:void 0,d={backgroundColor:c||void 0,borderRadius:p},f=null!==i&&void 0!==i?i:[-1,o||("small"===i?6:8)],[g,y]=px(f,"line",{strokeWidth:o});const v=Object.assign({width:`${cx(r)}%`,height:y,borderRadius:p},h),x=ux(t),_={width:`${cx(x)}%`,height:y,borderRadius:p,backgroundColor:null===u||void 0===u?void 0:u.strokeColor},b={width:g<0?"100%":g,height:y};return m.createElement(m.Fragment,null,m.createElement("div",{className:`${e}-outer`,style:b},m.createElement("div",{className:`${e}-inner`,style:d},m.createElement("div",{className:`${e}-bg`,style:v}),void 0!==x?m.createElement("div",{className:`${e}-success-bg`,style:_}):null)),l)};var yx=t=>{const{size:e,steps:n,percent:r=0,strokeWidth:i=8,strokeColor:o,trailColor:a=null,prefixCls:s,children:l}=t,c=Math.round(n*(r/100)),u=null!==e&&void 0!==e?e:["small"===e?2:14,i],[h,p]=px(u,"step",{steps:n,strokeWidth:i}),d=h/n,f=new Array(n);for(let g=0;g<n;g++){const t=Array.isArray(o)?o[g]:o;f[g]=m.createElement("div",{key:g,className:ic()(`${s}-steps-item`,{[`${s}-steps-item-active`]:g<=c-1}),style:{backgroundColor:g<=c-1?t:a,width:d,height:p}})}return m.createElement("div",{className:`${s}-steps-outer`},f,l)};const vx=new Uo("antProgressActive",{"0%":{transform:"translateX(-100%) scaleX(0)",opacity:.1},"20%":{transform:"translateX(-100%) scaleX(0)",opacity:.5},to:{transform:"translateX(0) scaleX(1)",opacity:0}}),xx=t=>{const{componentCls:e,iconCls:n}=t;return{[e]:Object.assign(Object.assign({},fu(t)),{display:"inline-block","&-rtl":{direction:"rtl"},"&-line":{position:"relative",width:"100%",fontSize:t.fontSize,marginInlineEnd:t.marginXS,marginBottom:t.marginXS},[`${e}-outer`]:{display:"inline-block",width:"100%"},[`&${e}-show-info`]:{[`${e}-outer`]:{marginInlineEnd:`calc(-2em - ${t.marginXS}px)`,paddingInlineEnd:`calc(2em + ${t.paddingXS}px)`}},[`${e}-inner`]:{position:"relative",display:"inline-block",width:"100%",overflow:"hidden",verticalAlign:"middle",backgroundColor:t.progressRemainingColor,borderRadius:t.progressLineRadius},[`${e}-inner:not(${e}-circle-gradient)`]:{[`${e}-circle-path`]:{stroke:t.colorInfo}},[`${e}-success-bg, ${e}-bg`]:{position:"relative",backgroundColor:t.colorInfo,borderRadius:t.progressLineRadius,transition:`all ${t.motionDurationSlow} ${t.motionEaseInOutCirc}`},[`${e}-success-bg`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,backgroundColor:t.colorSuccess},[`${e}-text`]:{display:"inline-block",width:"2em",marginInlineStart:t.marginXS,color:t.progressInfoTextColor,lineHeight:1,whiteSpace:"nowrap",textAlign:"start",verticalAlign:"middle",wordBreak:"normal",[n]:{fontSize:t.fontSize}},[`&${e}-status-active`]:{[`${e}-bg::before`]:{position:"absolute",inset:0,backgroundColor:t.colorBgContainer,borderRadius:t.progressLineRadius,opacity:0,animationName:vx,animationDuration:t.progressActiveMotionDuration,animationTimingFunction:t.motionEaseOutQuint,animationIterationCount:"infinite",content:'""'}},[`&${e}-status-exception`]:{[`${e}-bg`]:{backgroundColor:t.colorError},[`${e}-text`]:{color:t.colorError}},[`&${e}-status-exception ${e}-inner:not(${e}-circle-gradient)`]:{[`${e}-circle-path`]:{stroke:t.colorError}},[`&${e}-status-success`]:{[`${e}-bg`]:{backgroundColor:t.colorSuccess},[`${e}-text`]:{color:t.colorSuccess}},[`&${e}-status-success ${e}-inner:not(${e}-circle-gradient)`]:{[`${e}-circle-path`]:{stroke:t.colorSuccess}}})}},_x=t=>{const{componentCls:e,iconCls:n}=t;return{[e]:{[`${e}-circle-trail`]:{stroke:t.progressRemainingColor},[`&${e}-circle ${e}-inner`]:{position:"relative",lineHeight:1,backgroundColor:"transparent"},[`&${e}-circle ${e}-text`]:{position:"absolute",insetBlockStart:"50%",insetInlineStart:0,width:"100%",margin:0,padding:0,color:t.colorText,lineHeight:1,whiteSpace:"normal",textAlign:"center",transform:"translateY(-50%)",[n]:{fontSize:t.fontSize/t.fontSizeSM+"em"}},[`${e}-circle&-status-exception`]:{[`${e}-text`]:{color:t.colorError}},[`${e}-circle&-status-success`]:{[`${e}-text`]:{color:t.colorSuccess}}},[`${e}-inline-circle`]:{lineHeight:1,[`${e}-inner`]:{verticalAlign:"bottom"}}}},bx=t=>{const{componentCls:e}=t;return{[e]:{[`${e}-steps`]:{display:"inline-block","&-outer":{display:"flex",flexDirection:"row",alignItems:"center"},"&-item":{flexShrink:0,minWidth:t.progressStepMinWidth,marginInlineEnd:t.progressStepMarginInlineEnd,backgroundColor:t.progressRemainingColor,transition:`all ${t.motionDurationSlow}`,"&-active":{backgroundColor:t.colorInfo}}}}}},wx=t=>{const{componentCls:e,iconCls:n}=t;return{[e]:{[`${e}-small&-line, ${e}-small&-line ${e}-text ${n}`]:{fontSize:t.fontSizeSM}}}};var Sx=bh("Progress",(t=>{const e=t.marginXXS/2,n=vh(t,{progressLineRadius:100,progressInfoTextColor:t.colorText,progressDefaultColor:t.colorInfo,progressRemainingColor:t.colorFillSecondary,progressStepMarginInlineEnd:e,progressStepMinWidth:e,progressActiveMotionDuration:"2.4s"});return[xx(n),_x(n),bx(n),wx(n)]})),Cx=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const Ex=["normal","exception","active","success"],kx=m.forwardRef(((t,e)=>{const{prefixCls:n,className:r,rootClassName:i,steps:o,strokeColor:a,percent:s=0,size:l="default",showInfo:c=!0,type:u="line",status:h,format:p}=t,d=Cx(t,["prefixCls","className","rootClassName","steps","strokeColor","percent","size","showInfo","type","status","format"]),f=m.useMemo((()=>{var e,n;const r=ux(t);return parseInt(void 0!==r?null===(e=null!==r&&void 0!==r?r:0)||void 0===e?void 0:e.toString():null===(n=null!==s&&void 0!==s?s:0)||void 0===n?void 0:n.toString(),10)}),[s,t.success,t.successPercent]),g=m.useMemo((()=>!Ex.includes(h)&&f>=100?"success":h||"normal"),[h,f]),{getPrefixCls:y,direction:v}=m.useContext(Gl),x=y("progress",n),[_,b]=Sx(x),w=m.useMemo((()=>{if(!c)return null;const e=ux(t);let n;const r="line"===u;return p||"exception"!==g&&"success"!==g?n=(p||(t=>`${t}%`))(cx(s),cx(e)):"exception"===g?n=r?m.createElement(Qu,null):m.createElement(Ih,null):"success"===g&&(n=r?m.createElement(nh,null):m.createElement(qv,null)),m.createElement("span",{className:`${x}-text`,title:"string"===typeof n?n:void 0},n)}),[c,s,f,g,u,x,p]);const S=Array.isArray(a)?a[0]:a,C="string"===typeof a||Array.isArray(a)?a:void 0;let E;"line"===u?E=o?m.createElement(yx,Object.assign({},t,{strokeColor:C,prefixCls:x,steps:o}),w):m.createElement(mx,Object.assign({},t,{strokeColor:S,prefixCls:x,direction:v}),w):"circle"!==u&&"dashboard"!==u||(E=m.createElement(dx,Object.assign({},t,{strokeColor:S,prefixCls:x,progressStatus:g}),w));const k=ic()(x,{[`${x}-inline-circle`]:"circle"===u&&px(l,"circle")[0]<=20,[`${x}-${("dashboard"===u?"circle":o&&"steps")||u}`]:!0,[`${x}-status-${g}`]:!0,[`${x}-show-info`]:c,[`${x}-${l}`]:"string"===typeof l,[`${x}-rtl`]:"rtl"===v},r,i,b);return _(m.createElement("div",Object.assign({ref:e,className:k,role:"progressbar"},Gh(d,["trailColor","strokeWidth","width","gapDegree","gapPosition","strokeLinecap","success","successPercent"])),E))}));var Mx=kx;const Tx=m.forwardRef(((t,e)=>{let{prefixCls:n,className:r,style:i,locale:o,listType:a,file:s,items:l,progress:c,iconRender:u,actionIconRender:h,itemRender:p,isImgUrl:d,showPreviewIcon:f,showRemoveIcon:g,showDownloadIcon:y,previewIcon:v,removeIcon:x,downloadIcon:_,onPreview:b,onDownload:w,onClose:S}=t;var C,E;const{status:k}=s,[M,T]=m.useState(k);m.useEffect((()=>{"removed"!==k&&T(k)}),[k]);const[I,P]=m.useState(!1),O=m.useRef(null);m.useEffect((()=>(O.current=setTimeout((()=>{P(!0)}),300),()=>{O.current&&clearTimeout(O.current)})),[]);const A=u(s);let D=m.createElement("div",{className:`${n}-icon`},A);if("picture"===a||"picture-card"===a||"picture-circle"===a)if("uploading"===M||!s.thumbUrl&&!s.url){const t=ic()({[`${n}-list-item-thumbnail`]:!0,[`${n}-list-item-file`]:"uploading"!==M});D=m.createElement("div",{className:t},A)}else{const t=(null===d||void 0===d?void 0:d(s))?m.createElement("img",{src:s.thumbUrl||s.url,alt:s.name,className:`${n}-list-item-image`,crossOrigin:s.crossOrigin}):A,e=ic()({[`${n}-list-item-thumbnail`]:!0,[`${n}-list-item-file`]:d&&!d(s)});D=m.createElement("a",{className:e,onClick:t=>b(s,t),href:s.url||s.thumbUrl,target:"_blank",rel:"noopener noreferrer"},t)}const R=ic()(`${n}-list-item`,`${n}-list-item-${M}`),L="string"===typeof s.linkProps?JSON.parse(s.linkProps):s.linkProps,N=g?h(("function"===typeof x?x(s):x)||m.createElement(sg,null),(()=>S(s)),n,o.removeFile):null,F=y&&"done"===M?h(("function"===typeof _?_(s):_)||m.createElement(Uv,null),(()=>w(s)),n,o.downloadFile):null,z="picture-card"!==a&&"picture-circle"!==a&&m.createElement("span",{key:"download-delete",className:ic()(`${n}-list-item-actions`,{picture:"picture"===a})},F,N),B=ic()(`${n}-list-item-name`),$=s.url?[m.createElement("a",Object.assign({key:"view",target:"_blank",rel:"noopener noreferrer",className:B,title:s.name},L,{href:s.url,onClick:t=>b(s,t)}),s.name),z]:[m.createElement("span",{key:"view",className:B,onClick:t=>b(s,t),title:s.name},s.name),z],j=f?m.createElement("a",{href:s.url||s.thumbUrl,target:"_blank",rel:"noopener noreferrer",style:s.url||s.thumbUrl?void 0:{pointerEvents:"none",opacity:.5},onClick:t=>b(s,t),title:o.previewFile},"function"===typeof v?v(s):v||m.createElement(Gv,null)):null,U=("picture-card"===a||"picture-circle"===a)&&"uploading"!==M&&m.createElement("span",{className:`${n}-list-item-actions`},j,"done"===M&&F,N),{getPrefixCls:V}=m.useContext(Gl),H=V(),G=m.createElement("div",{className:R},D,$,U,I&&m.createElement(hu,{motionName:`${H}-fade`,visible:"uploading"===M,motionDeadline:2e3},(t=>{let{className:e}=t;const r="percent"in s?m.createElement(Mx,Object.assign({},c,{type:"line",percent:s.percent})):null;return m.createElement("div",{className:ic()(`${n}-list-item-progress`,e)},r)}))),W=s.response&&"string"===typeof s.response?s.response:(null===(C=s.error)||void 0===C?void 0:C.statusText)||(null===(E=s.error)||void 0===E?void 0:E.message)||o.uploadError,X="error"===M?m.createElement(Ky,{title:W,getPopupContainer:t=>t.parentNode},G):G;return m.createElement("div",{className:ic()(`${n}-list-item-container`,r),style:i,ref:e},p?p(X,s,l,{download:w.bind(null,s),preview:b.bind(null,s),remove:S.bind(null,s)}):X)}));var Ix=Tx;const Px=(t,e)=>{const{listType:n="text",previewFile:r=Bv,onPreview:i,onDownload:o,onRemove:a,locale:s,iconRender:l,isImageUrl:c=Fv,prefixCls:u,items:h=[],showPreviewIcon:p=!0,showRemoveIcon:d=!0,showDownloadIcon:f=!1,removeIcon:g,previewIcon:y,downloadIcon:v,progress:x={size:[-1,2],showInfo:!1},appendAction:_,appendActionVisible:b=!0,itemRender:w,disabled:S}=t,C=Av(),[E,k]=m.useState(!1);m.useEffect((()=>{"picture"!==n&&"picture-card"!==n&&"picture-circle"!==n||(h||[]).forEach((t=>{"undefined"!==typeof document&&"undefined"!==typeof window&&window.FileReader&&window.File&&(t.originFileObj instanceof File||t.originFileObj instanceof Blob)&&void 0===t.thumbUrl&&(t.thumbUrl="",r&&r(t.originFileObj).then((e=>{t.thumbUrl=e||"",C()})))}))}),[n,h,r]),m.useEffect((()=>{k(!0)}),[]);const M=(t,e)=>{if(i)return null===e||void 0===e||e.preventDefault(),i(t)},T=t=>{"function"===typeof o?o(t):t.url&&window.open(t.url)},I=t=>{null===a||void 0===a||a(t)},P=t=>{if(l)return l(t,n);const e="uploading"===t.status,r=c&&c(t)?m.createElement(Ov,null):m.createElement(Ev,null);let i=e?m.createElement(Xu,null):m.createElement(Tv,null);return"picture"===n?i=e?m.createElement(Xu,null):r:"picture-card"!==n&&"picture-circle"!==n||(i=e?s.uploading:r),i},O=(t,e,n,r)=>{const i={type:"text",size:"small",title:r,onClick:n=>{e(),Xh(t)&&t.props.onClick&&t.props.onClick(n)},className:`${n}-list-item-action`,disabled:S};if(Xh(t)){const e=Yh(t,Object.assign(Object.assign({},t.props),{onClick:()=>{}}));return m.createElement(id,Object.assign({},i,{icon:e}))}return m.createElement(id,Object.assign({},i),m.createElement("span",null,t))};m.useImperativeHandle(e,(()=>({handlePreview:M,handleDownload:T})));const{getPrefixCls:A}=m.useContext(Gl),D=A("upload",u),R=A(),L=ic()({[`${D}-list`]:!0,[`${D}-list-${n}`]:!0}),N=Sr(h.map((t=>({key:t.uid,file:t}))));let F={motionDeadline:2e3,motionName:`${D}-${"picture-card"===n||"picture-circle"===n?"animate-inline":"animate"}`,keys:N,motionAppear:E};const z=m.useMemo((()=>{const t=Object.assign({},gd(R));return delete t.onAppearEnd,delete t.onEnterEnd,delete t.onLeaveEnd,t}),[R]);return"picture-card"!==n&&"picture-circle"!==n&&(F=Object.assign(Object.assign({},z),F)),m.createElement("div",{className:L},m.createElement(uu,Object.assign({},F,{component:!1}),(t=>{let{key:e,file:r,className:i,style:o}=t;return m.createElement(Ix,{key:e,locale:s,prefixCls:D,className:i,style:o,file:r,items:h,progress:x,listType:n,isImgUrl:c,showPreviewIcon:p,showRemoveIcon:d,showDownloadIcon:f,removeIcon:g,previewIcon:y,downloadIcon:v,iconRender:P,actionIconRender:O,itemRender:w,onPreview:M,onDownload:T,onClose:I})})),_&&m.createElement(hu,Object.assign({},F,{visible:b,forceRender:!0}),(t=>{let{className:e,style:n}=t;return Yh(_,(t=>({className:ic()(t.className,e),style:Object.assign(Object.assign(Object.assign({},n),{pointerEvents:e?"none":void 0}),t.style)})))})))};var Ox=m.forwardRef(Px);var Ax=t=>{const{componentCls:e,iconCls:n}=t;return{[`${e}-wrapper`]:{[`${e}-drag`]:{position:"relative",width:"100%",height:"100%",textAlign:"center",background:t.colorFillAlter,border:`${t.lineWidth}px dashed ${t.colorBorder}`,borderRadius:t.borderRadiusLG,cursor:"pointer",transition:`border-color ${t.motionDurationSlow}`,[e]:{padding:`${t.padding}px 0`},[`${e}-btn`]:{display:"table",width:"100%",height:"100%",outline:"none"},[`${e}-drag-container`]:{display:"table-cell",verticalAlign:"middle"},[`&:not(${e}-disabled):hover`]:{borderColor:t.colorPrimaryHover},[`p${e}-drag-icon`]:{marginBottom:t.margin,[n]:{color:t.colorPrimary,fontSize:t.uploadThumbnailSize}},[`p${e}-text`]:{margin:`0 0 ${t.marginXXS}px`,color:t.colorTextHeading,fontSize:t.fontSizeLG},[`p${e}-hint`]:{color:t.colorTextDescription,fontSize:t.fontSize},[`&${e}-disabled`]:{cursor:"not-allowed",[`p${e}-drag-icon ${n},\n            p${e}-text,\n            p${e}-hint\n          `]:{color:t.colorTextDisabled}}}}}};var Dx=t=>{const{componentCls:e,antCls:n,iconCls:r,fontSize:i,lineHeight:o}=t,a=`${e}-list-item`,s=`${a}-actions`,l=`${a}-action`,c=Math.round(i*o);return{[`${e}-wrapper`]:{[`${e}-list`]:Object.assign(Object.assign({},{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),{lineHeight:t.lineHeight,[a]:{position:"relative",height:t.lineHeight*i,marginTop:t.marginXS,fontSize:i,display:"flex",alignItems:"center",transition:`background-color ${t.motionDurationSlow}`,"&:hover":{backgroundColor:t.controlItemBgHover},[`${a}-name`]:Object.assign(Object.assign({},du),{padding:`0 ${t.paddingXS}px`,lineHeight:o,flex:"auto",transition:`all ${t.motionDurationSlow}`}),[s]:{[l]:{opacity:0},[`${l}${n}-btn-sm`]:{height:c,border:0,lineHeight:1,"> span":{transform:"scale(1)"}},[`\n              ${l}:focus,\n              &.picture ${l}\n            `]:{opacity:1},[r]:{color:t.colorTextDescription,transition:`all ${t.motionDurationSlow}`},[`&:hover ${r}`]:{color:t.colorText}},[`${e}-icon ${r}`]:{color:t.colorTextDescription,fontSize:i},[`${a}-progress`]:{position:"absolute",bottom:-t.uploadProgressOffset,width:"100%",paddingInlineStart:i+t.paddingXS,fontSize:i,lineHeight:0,pointerEvents:"none","> div":{margin:0}}},[`${a}:hover ${l}`]:{opacity:1,color:t.colorText},[`${a}-error`]:{color:t.colorError,[`${a}-name, ${e}-icon ${r}`]:{color:t.colorError},[s]:{[`${r}, ${r}:hover`]:{color:t.colorError},[l]:{opacity:1}}},[`${e}-list-item-container`]:{transition:`opacity ${t.motionDurationSlow}, height ${t.motionDurationSlow}`,"&::before":{display:"table",width:0,height:0,content:'""'}}})}}};const Rx=new Uo("uploadAnimateInlineIn",{from:{width:0,height:0,margin:0,padding:0,opacity:0}}),Lx=new Uo("uploadAnimateInlineOut",{to:{width:0,height:0,margin:0,padding:0,opacity:0}});var Nx=t=>{const{componentCls:e}=t,n=`${e}-animate-inline`;return[{[`${e}-wrapper`]:{[`${n}-appear, ${n}-enter, ${n}-leave`]:{animationDuration:t.motionDurationSlow,animationTimingFunction:t.motionEaseInOutCirc,animationFillMode:"forwards"},[`${n}-appear, ${n}-enter`]:{animationName:Rx},[`${n}-leave`]:{animationName:Lx}}},Rx,Lx]};const Fx=t=>{const{componentCls:e,iconCls:n,uploadThumbnailSize:r,uploadProgressOffset:i}=t,o=`${e}-list`,a=`${o}-item`;return{[`${e}-wrapper`]:{[`\n        ${o}${o}-picture,\n        ${o}${o}-picture-card,\n        ${o}${o}-picture-circle\n      `]:{[a]:{position:"relative",height:r+2*t.lineWidth+2*t.paddingXS,padding:t.paddingXS,border:`${t.lineWidth}px ${t.lineType} ${t.colorBorder}`,borderRadius:t.borderRadiusLG,"&:hover":{background:"transparent"},[`${a}-thumbnail`]:Object.assign(Object.assign({},du),{width:r,height:r,lineHeight:`${r+t.paddingSM}px`,textAlign:"center",flex:"none",[n]:{fontSize:t.fontSizeHeading2,color:t.colorPrimary},img:{display:"block",width:"100%",height:"100%",overflow:"hidden"}}),[`${a}-progress`]:{bottom:i,width:`calc(100% - ${2*t.paddingSM}px)`,marginTop:0,paddingInlineStart:r+t.paddingXS}},[`${a}-error`]:{borderColor:t.colorError,[`${a}-thumbnail ${n}`]:{"svg path[fill='#e6f7ff']":{fill:t.colorErrorBg},"svg path[fill='#1890ff']":{fill:t.colorError}}},[`${a}-uploading`]:{borderStyle:"dashed",[`${a}-name`]:{marginBottom:i}}},[`${o}${o}-picture-circle ${a}`]:{[`&, &::before, ${a}-thumbnail`]:{borderRadius:"50%"}}}}},zx=t=>{const{componentCls:e,iconCls:n,fontSizeLG:r,colorTextLightSolid:i}=t,o=`${e}-list`,a=`${o}-item`,s=t.uploadPicCardSize;return{[`\n      ${e}-wrapper${e}-picture-card-wrapper,\n      ${e}-wrapper${e}-picture-circle-wrapper\n    `]:Object.assign(Object.assign({},{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),{display:"inline-block",width:"100%",[`${e}${e}-select`]:{width:s,height:s,marginInlineEnd:t.marginXS,marginBottom:t.marginXS,textAlign:"center",verticalAlign:"top",backgroundColor:t.colorFillAlter,border:`${t.lineWidth}px dashed ${t.colorBorder}`,borderRadius:t.borderRadiusLG,cursor:"pointer",transition:`border-color ${t.motionDurationSlow}`,[`> ${e}`]:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",textAlign:"center"},[`&:not(${e}-disabled):hover`]:{borderColor:t.colorPrimary}},[`${o}${o}-picture-card, ${o}${o}-picture-circle`]:{[`${o}-item-container`]:{display:"inline-block",width:s,height:s,marginBlock:`0 ${t.marginXS}px`,marginInline:`0 ${t.marginXS}px`,verticalAlign:"top"},"&::after":{display:"none"},[a]:{height:"100%",margin:0,"&::before":{position:"absolute",zIndex:1,width:`calc(100% - ${2*t.paddingXS}px)`,height:`calc(100% - ${2*t.paddingXS}px)`,backgroundColor:t.colorBgMask,opacity:0,transition:`all ${t.motionDurationSlow}`,content:'" "'}},[`${a}:hover`]:{[`&::before, ${a}-actions`]:{opacity:1}},[`${a}-actions`]:{position:"absolute",insetInlineStart:0,zIndex:10,width:"100%",whiteSpace:"nowrap",textAlign:"center",opacity:0,transition:`all ${t.motionDurationSlow}`,[`${n}-eye, ${n}-download, ${n}-delete`]:{zIndex:10,width:r,margin:`0 ${t.marginXXS}px`,fontSize:r,cursor:"pointer",transition:`all ${t.motionDurationSlow}`,svg:{verticalAlign:"baseline"}}},[`${a}-actions, ${a}-actions:hover`]:{[`${n}-eye, ${n}-download, ${n}-delete`]:{color:new Ml(i).setAlpha(.65).toRgbString(),"&:hover":{color:i}}},[`${a}-thumbnail, ${a}-thumbnail img`]:{position:"static",display:"block",width:"100%",height:"100%",objectFit:"contain"},[`${a}-name`]:{display:"none",textAlign:"center"},[`${a}-file + ${a}-name`]:{position:"absolute",bottom:t.margin,display:"block",width:`calc(100% - ${2*t.paddingXS}px)`},[`${a}-uploading`]:{[`&${a}`]:{backgroundColor:t.colorFillAlter},[`&::before, ${n}-eye, ${n}-download, ${n}-delete`]:{display:"none"}},[`${a}-progress`]:{bottom:t.marginXL,width:`calc(100% - ${2*t.paddingXS}px)`,paddingInlineStart:0}}}),[`${e}-wrapper${e}-picture-circle-wrapper`]:{[`${e}${e}-select`]:{borderRadius:"50%"}}}};var Bx=t=>{const{componentCls:e}=t;return{[`${e}-rtl`]:{direction:"rtl"}}};const $x=t=>{const{componentCls:e,colorTextDisabled:n}=t;return{[`${e}-wrapper`]:Object.assign(Object.assign({},fu(t)),{[e]:{outline:0,"input[type='file']":{cursor:"pointer"}},[`${e}-select`]:{display:"inline-block"},[`${e}-disabled`]:{color:n,cursor:"not-allowed"}})}};var jx=bh("Upload",(t=>{const{fontSizeHeading3:e,fontSize:n,lineHeight:r,lineWidth:i,controlHeightLG:o}=t,a=vh(t,{uploadThumbnailSize:2*e,uploadProgressOffset:Math.round(n*r)/2+i,uploadPicCardSize:2.55*o});return[$x(a),Ax(a),Fx(a),zx(a),Dx(a),Nx(a),Bx(a),ug(a)]})),Ux=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(kg){o(kg)}}function s(t){try{l(r.throw(t))}catch(kg){o(kg)}}function l(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(a,s)}l((r=r.apply(t,e||[])).next())}))};const Vx=`__LIST_IGNORE_${Date.now()}__`,Hx=(t,e)=>{const{fileList:n,defaultFileList:r,onRemove:i,showUploadList:o=!0,listType:a="text",onPreview:s,onDownload:l,onChange:c,onDrop:u,previewFile:h,disabled:p,locale:d,iconRender:f,isImageUrl:g,progress:y,prefixCls:v,className:x,type:_="select",children:b,style:w,itemRender:S,maxCount:C,data:E={},multiple:k=!1,action:M="",accept:T="",supportServerRender:I=!0}=t,P=m.useContext(Kl),O=null!==p&&void 0!==p?p:P,[A,D]=Cy(r||[],{value:n,postState:t=>null!==t&&void 0!==t?t:[]}),[R,L]=m.useState("drop"),N=m.useRef(null);m.useMemo((()=>{const t=Date.now();(n||[]).forEach(((e,n)=>{e.uid||Object.isFrozen(e)||(e.uid=`__AUTO__${t}_${n}__`)}))}),[n]);const F=(t,e,n)=>{let r=Sr(e);1===C?r=r.slice(-1):C&&(r=r.slice(0,C)),(0,Dr.flushSync)((()=>{D(r)}));const i={file:t,fileList:r};n&&(i.event=n),(0,Dr.flushSync)((()=>{null===c||void 0===c||c(i)}))},z=t=>{const e=t.filter((t=>!t.file[Vx]));if(!e.length)return;const n=e.map((t=>Dv(t.file)));let r=Sr(A);n.forEach((t=>{r=Rv(t,r)})),n.forEach(((t,n)=>{let i=t;if(e[n].parsedFile)t.status="uploading";else{const{originFileObj:e}=t;let n;try{n=new File([e],e.name,{type:e.type})}catch(kg){n=new Blob([e],{type:e.type}),n.name=e.name,n.lastModifiedDate=new Date,n.lastModified=(new Date).getTime()}n.uid=t.uid,i=n}F(i,r)}))},B=(t,e,n)=>{try{"string"===typeof t&&(t=JSON.parse(t))}catch(kg){}if(!Lv(e,A))return;const r=Dv(e);r.status="done",r.percent=100,r.response=t,r.xhr=n;const i=Rv(r,A);F(r,i)},$=(t,e)=>{if(!Lv(e,A))return;const n=Dv(e);n.status="uploading",n.percent=t.percent;const r=Rv(n,A);F(n,r,t)},j=(t,e,n)=>{if(!Lv(n,A))return;const r=Dv(n);r.error=t,r.response=e,r.status="error";const i=Rv(r,A);F(r,i)},U=t=>{let e;Promise.resolve("function"===typeof i?i(t):i).then((n=>{var r;if(!1===n)return;const i=function(t,e){const n=void 0!==t.uid?"uid":"name",r=e.filter((e=>e[n]!==t[n]));return r.length===e.length?null:r}(t,A);i&&(e=Object.assign(Object.assign({},t),{status:"removed"}),null===A||void 0===A||A.forEach((t=>{const n=void 0!==e.uid?"uid":"name";t[n]!==e[n]||Object.isFrozen(t)||(t.status="removed")})),null===(r=N.current)||void 0===r||r.abort(e),F(e,i))}))},V=t=>{L(t.type),"drop"===t.type&&(null===u||void 0===u||u(t))};m.useImperativeHandle(e,(()=>({onBatchStart:z,onSuccess:B,onProgress:$,onError:j,fileList:A,upload:N.current})));const{getPrefixCls:H,direction:G}=m.useContext(Gl),W=H("upload",v),X=Object.assign(Object.assign({onBatchStart:z,onError:j,onProgress:$,onSuccess:B},t),{data:E,multiple:k,action:M,accept:T,supportServerRender:I,prefixCls:W,disabled:O,beforeUpload:(e,n)=>Ux(void 0,void 0,void 0,(function*(){const{beforeUpload:r,transformFile:i}=t;let o=e;if(r){const t=yield r(e,n);if(!1===t)return!1;if(delete e[Vx],t===Vx)return Object.defineProperty(e,Vx,{value:!0,configurable:!0}),!1;"object"===typeof t&&t&&(o=t)}return i&&(o=yield i(o)),o})),onChange:void 0});delete X.className,delete X.style,b&&!O||delete X.id;const[q,Y]=jx(W),[Z]=od("Upload",Rs.Upload),{showRemoveIcon:K,showPreviewIcon:J,showDownloadIcon:Q,removeIcon:tt,previewIcon:et,downloadIcon:nt}="boolean"===typeof o?{}:o,rt=(t,e)=>o?m.createElement(Ox,{prefixCls:W,listType:a,items:A,previewFile:h,onPreview:s,onDownload:l,onRemove:U,showRemoveIcon:!O&&K,showPreviewIcon:J,showDownloadIcon:Q,removeIcon:tt,previewIcon:et,downloadIcon:nt,iconRender:f,locale:Object.assign(Object.assign({},Z),d),isImageUrl:g,progress:y,appendAction:t,appendActionVisible:e,itemRender:S,disabled:O}):t,it={[`${W}-rtl`]:"rtl"===G};if("drag"===_){const t=ic()(W,{[`${W}-drag`]:!0,[`${W}-drag-uploading`]:A.some((t=>"uploading"===t.status)),[`${W}-drag-hover`]:"dragover"===R,[`${W}-disabled`]:O,[`${W}-rtl`]:"rtl"===G},Y);return q(m.createElement("span",{className:ic()(`${W}-wrapper`,it,x,Y)},m.createElement("div",{className:t,onDrop:V,onDragOver:V,onDragLeave:V,style:w},m.createElement(wv,Object.assign({},X,{ref:N,className:`${W}-btn`}),m.createElement("div",{className:`${W}-drag-container`},b))),rt()))}const ot=ic()(W,`${W}-select`,{[`${W}-disabled`]:O}),at=(st=b?void 0:{display:"none"},m.createElement("div",{className:ot,style:st},m.createElement(wv,Object.assign({},X,{ref:N}))));var st;return q("picture-card"===a||"picture-circle"===a?m.createElement("span",{className:ic()(`${W}-wrapper`,{[`${W}-picture-card-wrapper`]:"picture-card"===a,[`${W}-picture-circle-wrapper`]:"picture-circle"===a},it,x,Y)},rt(at,!!b)):m.createElement("span",{className:ic()(`${W}-wrapper`,it,x,Y)},at,rt()))};var Gx=m.forwardRef(Hx),Wx=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const Xx=m.forwardRef(((t,e)=>{var{style:n,height:r}=t,i=Wx(t,["style","height"]);return m.createElement(Gx,Object.assign({ref:e},i,{type:"drag",style:Object.assign(Object.assign({},n),{height:r})}))}));var qx=Xx;const Yx=Gx;Yx.Dragger=qx,Yx.LIST_IGNORE=Vx;var Zx=Yx;const Kx=t=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:t,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),Jx=t=>({borderColor:t.inputBorderHoverColor,borderInlineEndWidth:t.lineWidth}),Qx=t=>({borderColor:t.inputBorderHoverColor,boxShadow:`0 0 0 ${t.controlOutlineWidth}px ${t.controlOutline}`,borderInlineEndWidth:t.lineWidth,outline:0}),t_=t=>({color:t.colorTextDisabled,backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"&:hover":Object.assign({},Jx(vh(t,{inputBorderHoverColor:t.colorBorder})))}),e_=t=>{const{inputPaddingVerticalLG:e,fontSizeLG:n,lineHeightLG:r,borderRadiusLG:i,inputPaddingHorizontalLG:o}=t;return{padding:`${e}px ${o}px`,fontSize:n,lineHeight:r,borderRadius:i}},n_=t=>({padding:`${t.inputPaddingVerticalSM}px ${t.controlPaddingHorizontalSM-1}px`,borderRadius:t.borderRadiusSM}),r_=(t,e)=>{const{componentCls:n,colorError:r,colorWarning:i,colorErrorOutline:o,colorWarningOutline:a,colorErrorBorderHover:s,colorWarningBorderHover:l}=t;return{[`&-status-error:not(${e}-disabled):not(${e}-borderless)${e}`]:{borderColor:r,"&:hover":{borderColor:s},"&:focus, &-focused":Object.assign({},Qx(vh(t,{inputBorderActiveColor:r,inputBorderHoverColor:r,controlOutline:o}))),[`${n}-prefix, ${n}-suffix`]:{color:r}},[`&-status-warning:not(${e}-disabled):not(${e}-borderless)${e}`]:{borderColor:i,"&:hover":{borderColor:l},"&:focus, &-focused":Object.assign({},Qx(vh(t,{inputBorderActiveColor:i,inputBorderHoverColor:i,controlOutline:a}))),[`${n}-prefix, ${n}-suffix`]:{color:i}}}},i_=t=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${t.inputPaddingVertical}px ${t.inputPaddingHorizontal}px`,color:t.colorText,fontSize:t.fontSize,lineHeight:t.lineHeight,backgroundColor:t.colorBgContainer,backgroundImage:"none",borderWidth:t.lineWidth,borderStyle:t.lineType,borderColor:t.colorBorder,borderRadius:t.borderRadius,transition:`all ${t.motionDurationMid}`},Kx(t.colorTextPlaceholder)),{"&:hover":Object.assign({},Jx(t)),"&:focus, &-focused":Object.assign({},Qx(t)),"&-disabled, &[disabled]":Object.assign({},t_(t)),"&-borderless":{"&, &:hover, &:focus, &-focused, &-disabled, &[disabled]":{backgroundColor:"transparent",border:"none",boxShadow:"none"}},"textarea&":{maxWidth:"100%",height:"auto",minHeight:t.controlHeight,lineHeight:t.lineHeight,verticalAlign:"bottom",transition:`all ${t.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},e_(t)),"&-sm":Object.assign({},n_(t)),"&-rtl":{direction:"rtl"},"&-textarea-rtl":{direction:"rtl"}}),o_=t=>{const{componentCls:e,antCls:n}=t;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:t.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${e}, &-lg > ${e}-group-addon`]:Object.assign({},e_(t)),[`&-sm ${e}, &-sm > ${e}-group-addon`]:Object.assign({},n_(t)),[`&-lg ${n}-select-single ${n}-select-selector`]:{height:t.controlHeightLG},[`&-sm ${n}-select-single ${n}-select-selector`]:{height:t.controlHeightSM},[`> ${e}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${e}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${t.inputPaddingHorizontal}px`,color:t.colorText,fontWeight:"normal",fontSize:t.fontSize,textAlign:"center",backgroundColor:t.colorFillAlter,border:`${t.lineWidth}px ${t.lineType} ${t.colorBorder}`,borderRadius:t.borderRadius,transition:`all ${t.motionDurationSlow}`,lineHeight:1,[`${n}-select`]:{margin:`-${t.inputPaddingVertical+1}px -${t.inputPaddingHorizontal}px`,[`&${n}-select-single:not(${n}-select-customize-input)`]:{[`${n}-select-selector`]:{backgroundColor:"inherit",border:`${t.lineWidth}px ${t.lineType} transparent`,boxShadow:"none"}},"&-open, &-focused":{[`${n}-select-selector`]:{color:t.colorPrimary}}},[`${n}-cascader-picker`]:{margin:`-9px -${t.inputPaddingHorizontal}px`,backgroundColor:"transparent",[`${n}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}},[`${e}`]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${e}-search-with-button &`]:{zIndex:0}}},[`> ${e}:first-child, ${e}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${n}-select ${n}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${e}-affix-wrapper`]:{[`&:not(:first-child) ${e}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${e}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${e}:last-child, ${e}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${n}-select ${n}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${e}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${e}-search &`]:{borderStartStartRadius:t.borderRadius,borderEndStartRadius:t.borderRadius}},[`&:not(:first-child), ${e}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${e}-group-compact`]:Object.assign(Object.assign({display:"block"},{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),{[`${e}-group-addon, ${e}-group-wrap, > ${e}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:t.lineWidth,"&:hover":{zIndex:1},"&:focus":{zIndex:1}}},"& > *":{display:"inline-block",float:"none",verticalAlign:"top",borderRadius:0},[`& > ${e}-affix-wrapper`]:{display:"inline-flex"},[`& > ${n}-picker-range`]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:-t.lineWidth,borderInlineEndWidth:t.lineWidth},[`${e}`]:{float:"none"},[`& > ${n}-select > ${n}-select-selector,\n      & > ${n}-select-auto-complete ${e},\n      & > ${n}-cascader-picker ${e},\n      & > ${e}-group-wrapper ${e}`]:{borderInlineEndWidth:t.lineWidth,borderRadius:0,"&:hover":{zIndex:1},"&:focus":{zIndex:1}},[`& > ${n}-select-focused`]:{zIndex:1},[`& > ${n}-select > ${n}-select-arrow`]:{zIndex:1},[`& > *:first-child,\n      & > ${n}-select:first-child > ${n}-select-selector,\n      & > ${n}-select-auto-complete:first-child ${e},\n      & > ${n}-cascader-picker:first-child ${e}`]:{borderStartStartRadius:t.borderRadius,borderEndStartRadius:t.borderRadius},[`& > *:last-child,\n      & > ${n}-select:last-child > ${n}-select-selector,\n      & > ${n}-cascader-picker:last-child ${e},\n      & > ${n}-cascader-picker-focused:last-child ${e}`]:{borderInlineEndWidth:t.lineWidth,borderStartEndRadius:t.borderRadius,borderEndEndRadius:t.borderRadius},[`& > ${n}-select-auto-complete ${e}`]:{verticalAlign:"top"},[`${e}-group-wrapper + ${e}-group-wrapper`]:{marginInlineStart:-t.lineWidth,[`${e}-affix-wrapper`]:{borderRadius:0}},[`${e}-group-wrapper:not(:last-child)`]:{[`&${e}-search > ${e}-group`]:{[`& > ${e}-group-addon > ${e}-search-button`]:{borderRadius:0},[`& > ${e}`]:{borderStartStartRadius:t.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:t.borderRadius}}}})}},a_=t=>{const{componentCls:e,controlHeightSM:n,lineWidth:r}=t,i=(n-2*r-16)/2;return{[e]:Object.assign(Object.assign(Object.assign(Object.assign({},fu(t)),i_(t)),r_(t,e)),{'&[type="color"]':{height:t.controlHeight,[`&${e}-lg`]:{height:t.controlHeightLG},[`&${e}-sm`]:{height:n,paddingTop:i,paddingBottom:i}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},s_=t=>{const{componentCls:e}=t;return{[`${e}-clear-icon`]:{margin:0,color:t.colorTextQuaternary,fontSize:t.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${t.motionDurationSlow}`,"&:hover":{color:t.colorTextTertiary},"&:active":{color:t.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${t.inputAffixPadding}px`}}}},l_=t=>{const{componentCls:e,inputAffixPadding:n,colorTextDescription:r,motionDurationSlow:i,colorIcon:o,colorIconHover:a,iconCls:s}=t;return{[`${e}-affix-wrapper`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},i_(t)),{display:"inline-flex",[`&:not(${e}-affix-wrapper-disabled):hover`]:Object.assign(Object.assign({},Jx(t)),{zIndex:1,[`${e}-search-with-button &`]:{zIndex:0}}),"&-focused, &:focus":{zIndex:1},"&-disabled":{[`${e}[disabled]`]:{background:"transparent"}},[`> input${e}`]:{padding:0,fontSize:"inherit",border:"none",borderRadius:0,outline:"none","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{width:0,visibility:"hidden",content:'"\\a0"'},[`${e}`]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:t.paddingXS}},"&-show-count-suffix":{color:r},"&-show-count-has-suffix":{marginInlineEnd:t.paddingXXS},"&-prefix":{marginInlineEnd:n},"&-suffix":{marginInlineStart:n}}}),s_(t)),{[`${s}${e}-password-icon`]:{color:o,cursor:"pointer",transition:`all ${i}`,"&:hover":{color:a}}}),r_(t,`${e}-affix-wrapper`))}},c_=t=>{const{componentCls:e,colorError:n,colorWarning:r,borderRadiusLG:i,borderRadiusSM:o}=t;return{[`${e}-group`]:Object.assign(Object.assign(Object.assign({},fu(t)),o_(t)),{"&-rtl":{direction:"rtl"},"&-wrapper":{display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${e}-group-addon`]:{borderRadius:i}},"&-sm":{[`${e}-group-addon`]:{borderRadius:o}},"&-status-error":{[`${e}-group-addon`]:{color:n,borderColor:n}},"&-status-warning":{[`${e}-group-addon`]:{color:r,borderColor:r}},"&-disabled":{[`${e}-group-addon`]:Object.assign({},t_(t))},[`&:not(${e}-compact-first-item):not(${e}-compact-last-item)${e}-compact-item`]:{[`${e}, ${e}-group-addon`]:{borderRadius:0}},[`&:not(${e}-compact-last-item)${e}-compact-first-item`]:{[`${e}, ${e}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${e}-compact-first-item)${e}-compact-last-item`]:{[`${e}, ${e}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}})}},u_=t=>{const{componentCls:e,antCls:n}=t,r=`${e}-search`;return{[r]:{[`${e}`]:{"&:hover, &:focus":{borderColor:t.colorPrimaryHover,[`+ ${e}-group-addon ${r}-button:not(${n}-btn-primary)`]:{borderInlineStartColor:t.colorPrimaryHover}}},[`${e}-affix-wrapper`]:{borderRadius:0},[`${e}-lg`]:{lineHeight:t.lineHeightLG-2e-4},[`> ${e}-group`]:{[`> ${e}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${r}-button`]:{paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:t.borderRadius,borderEndEndRadius:t.borderRadius,borderEndStartRadius:0},[`${r}-button:not(${n}-btn-primary)`]:{color:t.colorTextDescription,"&:hover":{color:t.colorPrimaryHover},"&:active":{color:t.colorPrimaryActive},[`&${n}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${r}-button`]:{height:t.controlHeight,"&:hover, &:focus":{zIndex:1}},[`&-large ${r}-button`]:{height:t.controlHeightLG},[`&-small ${r}-button`]:{height:t.controlHeightSM},"&-rtl":{direction:"rtl"},[`&${e}-compact-item`]:{[`&:not(${e}-compact-last-item)`]:{[`${e}-group-addon`]:{[`${e}-search-button`]:{marginInlineEnd:-t.lineWidth,borderRadius:0}}},[`&:not(${e}-compact-first-item)`]:{[`${e},${e}-affix-wrapper`]:{borderRadius:0}},[`> ${e}-group-addon ${e}-search-button,\n        > ${e},\n        ${e}-affix-wrapper`]:{"&:hover,&:focus,&:active":{zIndex:2}},[`> ${e}-affix-wrapper-focused`]:{zIndex:2}}}}};function h_(t){return vh(t,{inputAffixPadding:t.paddingXXS,inputPaddingVertical:Math.max(Math.round((t.controlHeight-t.fontSize*t.lineHeight)/2*10)/10-t.lineWidth,3),inputPaddingVerticalLG:Math.ceil((t.controlHeightLG-t.fontSizeLG*t.lineHeightLG)/2*10)/10-t.lineWidth,inputPaddingVerticalSM:Math.max(Math.round((t.controlHeightSM-t.fontSize*t.lineHeight)/2*10)/10-t.lineWidth,0),inputPaddingHorizontal:t.paddingSM-t.lineWidth,inputPaddingHorizontalSM:t.paddingXS-t.lineWidth,inputPaddingHorizontalLG:t.controlPaddingHorizontal-t.lineWidth,inputBorderHoverColor:t.colorPrimaryHover,inputBorderActiveColor:t.colorPrimaryHover})}const p_=t=>{const{componentCls:e,paddingLG:n}=t,r=`${e}-textarea`;return{[r]:{position:"relative","&-show-count":{[`> ${e}`]:{height:"100%"},[`${e}-data-count`]:{position:"absolute",bottom:-t.fontSize*t.lineHeight,insetInlineEnd:0,color:t.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},"&-allow-clear":{[`> ${e}`]:{paddingInlineEnd:n}},[`&-affix-wrapper${r}-has-feedback`]:{[`${e}`]:{paddingInlineEnd:n}},[`&-affix-wrapper${e}-affix-wrapper`]:{padding:0,[`> textarea${e}`]:{fontSize:"inherit",border:"none",outline:"none","&:focus":{boxShadow:"none !important"}},[`${e}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${e}-clear-icon`]:{position:"absolute",insetInlineEnd:t.paddingXS,insetBlockStart:t.paddingXS},[`${r}-suffix`]:{position:"absolute",top:0,insetInlineEnd:t.inputPaddingHorizontal,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}}}}};var d_=bh("Input",(t=>{const e=h_(t);return[a_(e),p_(e),l_(e),c_(e),u_(e),Mp(e)]}));var f_=t=>{const{getPrefixCls:e,direction:n}=(0,m.useContext)(Gl),{prefixCls:r,className:i=""}=t,o=e("input-group",r),a=e("input"),[s,l]=d_(a),c=ic()(o,{[`${o}-lg`]:"large"===t.size,[`${o}-sm`]:"small"===t.size,[`${o}-compact`]:t.compact,[`${o}-rtl`]:"rtl"===n},l,i),u=(0,m.useContext)(tf),h=(0,m.useMemo)((()=>Object.assign(Object.assign({},u),{isFormItemInput:!1})),[u]);return s(m.createElement("span",{className:c,style:t.style,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,onFocus:t.onFocus,onBlur:t.onBlur},m.createElement(tf.Provider,{value:h},t.children)))};function g_(t){return!(!t.addonBefore&&!t.addonAfter)}function m_(t){return!!(t.prefix||t.suffix||t.allowClear)}function y_(t,e,n,r){if(n){var i=e;if("click"===e.type){var o=t.cloneNode(!0);return i=Object.create(e,{target:{value:o},currentTarget:{value:o}}),o.value="",void n(i)}if(void 0!==r)return i=Object.create(e,{target:{value:t},currentTarget:{value:t}}),t.value=r,void n(i);n(i)}}function v_(t){return"undefined"===typeof t||null===t?"":String(t)}var x_=function(t){var e,n,r=t.inputElement,i=t.prefixCls,o=t.prefix,a=t.suffix,s=t.addonBefore,l=t.addonAfter,c=t.className,u=t.style,h=t.disabled,p=t.readOnly,d=t.focused,f=t.triggerFocus,g=t.allowClear,y=t.value,v=t.handleReset,x=t.hidden,_=t.classes,b=t.classNames,w=t.dataAttrs,S=t.styles,C=(0,m.useRef)(null),E=(0,m.cloneElement)(r,{value:y,hidden:x,className:ic()(null===(e=r.props)||void 0===e?void 0:e.className,!m_(t)&&!g_(t)&&c)||null,style:Or(Or({},null===(n=r.props)||void 0===n?void 0:n.style),m_(t)||g_(t)?{}:u)});if(m_(t)){var k,M="".concat(i,"-affix-wrapper"),T=ic()(M,(Ir(k={},"".concat(M,"-disabled"),h),Ir(k,"".concat(M,"-focused"),d),Ir(k,"".concat(M,"-readonly"),p),Ir(k,"".concat(M,"-input-with-clear-btn"),a&&g&&y),k),!g_(t)&&c,null===_||void 0===_?void 0:_.affixWrapper),I=(a||g)&&m.createElement("span",{className:ic()("".concat(i,"-suffix"),null===b||void 0===b?void 0:b.suffix),style:null===S||void 0===S?void 0:S.suffix},function(){var t;if(!g)return null;var e=!h&&!p&&y,n="".concat(i,"-clear-icon"),r="object"===Cr(g)&&null!==g&&void 0!==g&&g.clearIcon?g.clearIcon:"\u2716";return m.createElement("span",{onClick:v,onMouseDown:function(t){return t.preventDefault()},className:ic()(n,(t={},Ir(t,"".concat(n,"-hidden"),!e),Ir(t,"".concat(n,"-has-suffix"),!!a),t)),role:"button",tabIndex:-1},r)}(),a);E=m.createElement("span",Ui({className:T,style:g_(t)?void 0:u,hidden:!g_(t)&&x,onClick:function(t){var e;null!==(e=C.current)&&void 0!==e&&e.contains(t.target)&&(null===f||void 0===f||f())}},null===w||void 0===w?void 0:w.affixWrapper,{ref:C}),o&&m.createElement("span",{className:ic()("".concat(i,"-prefix"),null===b||void 0===b?void 0:b.prefix),style:null===S||void 0===S?void 0:S.prefix},o),(0,m.cloneElement)(r,{value:y,hidden:null}),I)}if(g_(t)){var P="".concat(i,"-group"),O="".concat(P,"-addon"),A=ic()("".concat(i,"-wrapper"),P,null===_||void 0===_?void 0:_.wrapper),D=ic()("".concat(i,"-group-wrapper"),c,null===_||void 0===_?void 0:_.group);return m.createElement("span",{className:D,style:u,hidden:x},m.createElement("span",{className:A},s&&m.createElement("span",{className:O},s),(0,m.cloneElement)(E,{hidden:null}),l&&m.createElement("span",{className:O},l)))}return E},__=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","type","classes","classNames","styles"],b_=(0,m.forwardRef)((function(t,e){var n=t.autoComplete,r=t.onChange,i=t.onFocus,o=t.onBlur,a=t.onPressEnter,s=t.onKeyDown,l=t.prefixCls,c=void 0===l?"rc-input":l,u=t.disabled,h=t.htmlSize,p=t.className,d=t.maxLength,f=t.suffix,g=t.showCount,y=t.type,v=void 0===y?"text":y,x=t.classes,_=t.classNames,b=t.styles,w=Zo(t,__),S=Ri(Cy(t.defaultValue,{value:t.value}),2),C=S[0],E=S[1],k=Ri((0,m.useState)(!1),2),M=k[0],T=k[1],I=(0,m.useRef)(null),P=function(t){I.current&&function(t,e){if(t){t.focus(e);var n=(e||{}).cursor;if(n){var r=t.value.length;switch(n){case"start":t.setSelectionRange(0,0);break;case"end":t.setSelectionRange(r,r);break;default:t.setSelectionRange(0,r)}}}}(I.current,t)};(0,m.useImperativeHandle)(e,(function(){return{focus:P,blur:function(){var t;null===(t=I.current)||void 0===t||t.blur()},setSelectionRange:function(t,e,n){var r;null===(r=I.current)||void 0===r||r.setSelectionRange(t,e,n)},select:function(){var t;null===(t=I.current)||void 0===t||t.select()},input:I.current}})),(0,m.useEffect)((function(){T((function(t){return(!t||!u)&&t}))}),[u]);var O=function(e){void 0===t.value&&E(e.target.value),I.current&&y_(I.current,e,r)},A=function(t){a&&"Enter"===t.key&&a(t),null===s||void 0===s||s(t)},D=function(t){T(!0),null===i||void 0===i||i(t)},R=function(t){T(!1),null===o||void 0===o||o(t)};return m.createElement(x_,Ui({},w,{prefixCls:c,className:p,inputElement:function(){var e=Gh(t,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","classes","htmlSize","styles","classNames"]);return m.createElement("input",Ui({autoComplete:n},e,{onChange:O,onFocus:D,onBlur:R,onKeyDown:A,className:ic()(c,Ir({},"".concat(c,"-disabled"),u),null===_||void 0===_?void 0:_.input),style:null===b||void 0===b?void 0:b.input,ref:I,size:h,type:v}))}(),handleReset:function(t){E(""),P(),I.current&&y_(I.current,t,r)},value:v_(C),focused:M,triggerFocus:P,suffix:function(){var t=Number(d)>0;if(f||g){var e=v_(C),n=Sr(e).length,r="object"===Cr(g)?g.formatter({value:e,count:n,maxLength:d}):"".concat(n).concat(t?" / ".concat(d):"");return m.createElement(m.Fragment,null,!!g&&m.createElement("span",{className:ic()("".concat(c,"-show-count-suffix"),Ir({},"".concat(c,"-show-count-has-suffix"),!!f),null===_||void 0===_?void 0:_.count),style:Or({},null===b||void 0===b?void 0:b.count)},r),f)}return null}(),disabled:u,classes:x,classNames:_,styles:b}))})),w_=b_;function S_(t,e,n){return ic()({[`${t}-status-success`]:"success"===e,[`${t}-status-warning`]:"warning"===e,[`${t}-status-error`]:"error"===e,[`${t}-status-validating`]:"validating"===e,[`${t}-has-feedback`]:n})}const C_=(t,e)=>e||t;function E_(t,e){const n=(0,m.useRef)([]),r=()=>{n.current.push(setTimeout((()=>{var e,n,r,i;(null===(e=t.current)||void 0===e?void 0:e.input)&&"password"===(null===(n=t.current)||void 0===n?void 0:n.input.getAttribute("type"))&&(null===(r=t.current)||void 0===r?void 0:r.input.hasAttribute("value"))&&(null===(i=t.current)||void 0===i||i.input.removeAttribute("value"))})))};return(0,m.useEffect)((()=>(e&&r(),()=>n.current.forEach((t=>{t&&clearTimeout(t)})))),[]),r}var k_=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const M_=(0,m.forwardRef)(((t,e)=>{const{prefixCls:n,bordered:r=!0,status:i,size:o,disabled:a,onBlur:s,onFocus:l,suffix:c,allowClear:u,addonAfter:h,addonBefore:p,className:d,rootClassName:f,onChange:g,classNames:y}=t,v=k_(t,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","rootClassName","onChange","classNames"]),{getPrefixCls:x,direction:_,input:b}=m.useContext(Gl),w=x("input",n),S=(0,m.useRef)(null),[C,E]=d_(w),{compactSize:k,compactItemClassnames:M}=lp(w,_),T=Jl((t=>{var e;return null!==(e=null!==k&&void 0!==k?k:o)&&void 0!==e?e:t})),I=m.useContext(Kl),P=null!==a&&void 0!==a?a:I,{status:O,hasFeedback:A,feedbackIcon:D}=(0,m.useContext)(tf),R=C_(O,i),L=function(t){return!!(t.prefix||t.suffix||t.allowClear)}(t)||!!A,N=(0,m.useRef)(L);(0,m.useEffect)((()=>{L&&N.current,N.current=L}),[L]);const F=E_(S,!0),z=(A||c)&&m.createElement(m.Fragment,null,c,A&&D);let B;return"object"===typeof u&&(null===u||void 0===u?void 0:u.clearIcon)?B=u:u&&(B={clearIcon:m.createElement(Qu,null)}),C(m.createElement(w_,Object.assign({ref:lc(e,S),prefixCls:w,autoComplete:null===b||void 0===b?void 0:b.autoComplete},v,{disabled:P,onBlur:t=>{F(),null===s||void 0===s||s(t)},onFocus:t=>{F(),null===l||void 0===l||l(t)},suffix:z,allowClear:B,className:ic()(d,f,M),onChange:t=>{F(),null===g||void 0===g||g(t)},addonAfter:h&&m.createElement(cp,null,m.createElement(ef,{override:!0,status:!0},h)),addonBefore:p&&m.createElement(cp,null,m.createElement(ef,{override:!0,status:!0},p)),classNames:Object.assign(Object.assign({},y),{input:ic()({[`${w}-sm`]:"small"===T,[`${w}-lg`]:"large"===T,[`${w}-rtl`]:"rtl"===_,[`${w}-borderless`]:!r},!L&&S_(w,R),null===y||void 0===y?void 0:y.input,E)}),classes:{affixWrapper:ic()({[`${w}-affix-wrapper-sm`]:"small"===T,[`${w}-affix-wrapper-lg`]:"large"===T,[`${w}-affix-wrapper-rtl`]:"rtl"===_,[`${w}-affix-wrapper-borderless`]:!r},S_(`${w}-affix-wrapper`,R,A),E),wrapper:ic()({[`${w}-group-rtl`]:"rtl"===_},E),group:ic()({[`${w}-group-wrapper-sm`]:"small"===T,[`${w}-group-wrapper-lg`]:"large"===T,[`${w}-group-wrapper-rtl`]:"rtl"===_,[`${w}-group-wrapper-disabled`]:P},S_(`${w}-group-wrapper`,R,A),E)}})))}));var T_=M_,I_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},P_=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:I_}))};var O_=m.forwardRef(P_),A_=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const D_=t=>t?m.createElement(Gv,null):m.createElement(O_,null),R_={click:"onClick",hover:"onMouseOver"},L_=m.forwardRef(((t,e)=>{const{visibilityToggle:n=!0}=t,r="object"===typeof n&&void 0!==n.visible,[i,o]=(0,m.useState)((()=>!!r&&n.visible)),a=(0,m.useRef)(null);m.useEffect((()=>{r&&o(n.visible)}),[r,n]);const s=E_(a),l=()=>{const{disabled:e}=t;e||(i&&s(),o((t=>{var e;const r=!t;return"object"===typeof n&&(null===(e=n.onVisibleChange)||void 0===e||e.call(n,r)),r})))},{className:c,prefixCls:u,inputPrefixCls:h,size:p}=t,d=A_(t,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:f}=m.useContext(Gl),g=f("input",h),y=f("input-password",u),v=n&&(e=>{const{action:n="click",iconRender:r=D_}=t,o=R_[n]||"",a=r(i),s={[o]:l,className:`${e}-icon`,key:"passwordIcon",onMouseDown:t=>{t.preventDefault()},onMouseUp:t=>{t.preventDefault()}};return m.cloneElement(m.isValidElement(a)?a:m.createElement("span",null,a),s)})(y),x=ic()(y,c,{[`${y}-${p}`]:!!p}),_=Object.assign(Object.assign({},Gh(d,["suffix","iconRender","visibilityToggle"])),{type:i?"text":"password",className:x,prefixCls:g,suffix:v});return p&&(_.size=p),m.createElement(T_,Object.assign({ref:lc(e,a)},_))}));var N_=L_,F_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},z_=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:F_}))};var B_=m.forwardRef(z_),$_=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const j_=m.forwardRef(((t,e)=>{const{prefixCls:n,inputPrefixCls:r,className:i,size:o,suffix:a,enterButton:s=!1,addonAfter:l,loading:c,disabled:u,onSearch:h,onChange:p,onCompositionStart:d,onCompositionEnd:f}=t,g=$_(t,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:y,direction:v}=m.useContext(Gl),x=m.useRef(!1),_=y("input-search",n),b=y("input",r),{compactSize:w}=lp(_,v),S=Jl((t=>{var e;return null!==(e=null!==w&&void 0!==w?w:o)&&void 0!==e?e:t})),C=m.useRef(null),E=t=>{var e;document.activeElement===(null===(e=C.current)||void 0===e?void 0:e.input)&&t.preventDefault()},k=t=>{var e,n;h&&h(null===(n=null===(e=C.current)||void 0===e?void 0:e.input)||void 0===n?void 0:n.value,t)},M="boolean"===typeof s?m.createElement(B_,null):null,T=`${_}-button`;let I;const P=s||{},O=P.type&&!0===P.type.__ANT_BUTTON;I=O||"button"===P.type?Yh(P,Object.assign({onMouseDown:E,onClick:t=>{var e,n;null===(n=null===(e=null===P||void 0===P?void 0:P.props)||void 0===e?void 0:e.onClick)||void 0===n||n.call(e,t),k(t)},key:"enterButton"},O?{className:T,size:S}:{})):m.createElement(id,{className:T,type:s?"primary":void 0,size:S,disabled:u,key:"enterButton",onMouseDown:E,onClick:k,loading:c,icon:M},s),l&&(I=[I,Yh(l,{key:"addonAfter"})]);const A=ic()(_,{[`${_}-rtl`]:"rtl"===v,[`${_}-${S}`]:!!S,[`${_}-with-button`]:!!s},i);return m.createElement(T_,Object.assign({ref:lc(C,e),onPressEnter:t=>{x.current||c||k(t)}},g,{size:S,onCompositionStart:t=>{x.current=!0,null===d||void 0===d||d(t)},onCompositionEnd:t=>{x.current=!1,null===f||void 0===f||f(t)},prefixCls:b,addonAfter:I,suffix:a,onChange:t=>{t&&t.target&&"click"===t.type&&h&&h(t.target.value,t),p&&p(t)},className:A,disabled:u}))}));var U_,V_=j_,H_=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],G_={};function W_(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;U_||((U_=document.createElement("textarea")).setAttribute("tab-index","-1"),U_.setAttribute("aria-hidden","true"),document.body.appendChild(U_)),t.getAttribute("wrap")?U_.setAttribute("wrap",t.getAttribute("wrap")):U_.removeAttribute("wrap");var i=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.getAttribute("id")||t.getAttribute("data-reactid")||t.getAttribute("name");if(e&&G_[n])return G_[n];var r=window.getComputedStyle(t),i=r.getPropertyValue("box-sizing")||r.getPropertyValue("-moz-box-sizing")||r.getPropertyValue("-webkit-box-sizing"),o=parseFloat(r.getPropertyValue("padding-bottom"))+parseFloat(r.getPropertyValue("padding-top")),a=parseFloat(r.getPropertyValue("border-bottom-width"))+parseFloat(r.getPropertyValue("border-top-width")),s={sizingStyle:H_.map((function(t){return"".concat(t,":").concat(r.getPropertyValue(t))})).join(";"),paddingSize:o,borderSize:a,boxSizing:i};return e&&n&&(G_[n]=s),s}(t,e),o=i.paddingSize,a=i.borderSize,s=i.boxSizing,l=i.sizingStyle;U_.setAttribute("style","".concat(l,";").concat("\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n  pointer-events: none !important;\n")),U_.value=t.value||t.placeholder||"";var c,u=void 0,h=void 0,p=U_.scrollHeight;if("border-box"===s?p+=a:"content-box"===s&&(p-=o),null!==n||null!==r){U_.value=" ";var d=U_.scrollHeight-o;null!==n&&(u=d*n,"border-box"===s&&(u=u+o+a),p=Math.max(u,p)),null!==r&&(h=d*r,"border-box"===s&&(h=h+o+a),c=p>h?"":"hidden",p=Math.min(h,p))}var f={height:p,overflowY:c,resize:"none"};return u&&(f.minHeight=u),h&&(f.maxHeight=h),f}var X_=["prefixCls","onPressEnter","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],q_=m.forwardRef((function(t,e){var n=t,r=n.prefixCls,i=(n.onPressEnter,n.defaultValue),o=n.value,a=n.autoSize,s=n.onResize,l=n.className,c=n.style,u=n.disabled,h=n.onChange,p=(n.onInternalAutoSize,Zo(n,X_)),d=Ri(Cy(i,{value:o,postState:function(t){return null!==t&&void 0!==t?t:""}}),2),f=d[0],g=d[1],y=m.useRef();m.useImperativeHandle(e,(function(){return{textArea:y.current}}));var v=Ri(m.useMemo((function(){return a&&"object"===Cr(a)?[a.minRows,a.maxRows]:[]}),[a]),2),x=v[0],_=v[1],b=!!a,w=Ri(m.useState(2),2),S=w[0],C=w[1],E=Ri(m.useState(),2),k=E[0],M=E[1],T=function(){C(0)};_d((function(){b&&T()}),[o,x,_,b]),_d((function(){if(0===S)C(1);else if(1===S){var t=W_(y.current,!1,x,_);C(2),M(t)}else!function(){try{if(document.activeElement===y.current){var t=y.current,e=t.selectionStart,n=t.selectionEnd,r=t.scrollTop;y.current.setSelectionRange(e,n),y.current.scrollTop=r}}catch(kg){}}()}),[S]);var I=m.useRef(),P=function(){Xc.cancel(I.current)};m.useEffect((function(){return P}),[]);var O=b?k:null,A=Or(Or({},c),O);return 0!==S&&1!==S||(A.overflowY="hidden",A.overflowX="hidden"),m.createElement(Um,{onResize:function(t){2===S&&(null===s||void 0===s||s(t),a&&(P(),I.current=Xc((function(){T()}))))},disabled:!(a||s)},m.createElement("textarea",Ui({},p,{ref:y,style:A,className:ic()(r,l,Ir({},"".concat(r,"-disabled"),u)),disabled:u,value:f,onChange:function(t){g(t.target.value),null===h||void 0===h||h(t)}})))})),Y_=q_,Z_=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","classes","showCount","className","style","disabled","hidden","classNames","styles","onResize"];function K_(t,e){return Sr(t||"").slice(0,e).join("")}function J_(t,e,n,r){var i=n;return t?i=K_(n,r):Sr(e||"").length<n.length&&Sr(n||"").length>r&&(i=e),i}var Q_=m.forwardRef((function(t,e){var n,r=t.defaultValue,i=t.value,o=t.onFocus,a=t.onBlur,s=t.onChange,l=t.allowClear,c=t.maxLength,u=t.onCompositionStart,h=t.onCompositionEnd,p=t.suffix,d=t.prefixCls,f=void 0===d?"rc-textarea":d,g=t.classes,y=t.showCount,v=t.className,x=t.style,_=t.disabled,b=t.hidden,w=t.classNames,S=t.styles,C=t.onResize,E=Zo(t,Z_),k=Ri(Cy(r,{value:i,defaultValue:r}),2),M=k[0],T=k[1],I=(0,m.useRef)(null),P=Ri(m.useState(!1),2),O=P[0],A=P[1],D=Ri(m.useState(!1),2),R=D[0],L=D[1],N=m.useRef(),F=m.useRef(0),z=Ri(m.useState(null),2),B=z[0],$=z[1],j=function(){I.current.textArea.focus()};(0,m.useImperativeHandle)(e,(function(){return{resizableTextArea:I.current,focus:j,blur:function(){I.current.textArea.blur()}}})),(0,m.useEffect)((function(){A((function(t){return!_&&t}))}),[_]);var U=Number(c)>0,V=v_(M);R||!U||null!==i&&void 0!==i||(V=K_(V,c));var H,G=p;if(y){var W=Sr(V).length;H="object"===Cr(y)?y.formatter({value:V,count:W,maxLength:c}):"".concat(W).concat(U?" / ".concat(c):""),G=m.createElement(m.Fragment,null,G,m.createElement("span",{className:ic()("".concat(f,"-data-count"),null===w||void 0===w?void 0:w.count),style:null===S||void 0===S?void 0:S.count},H))}var X=m.createElement(x_,{value:V,allowClear:l,handleReset:function(t){T(""),j(),y_(I.current.textArea,t,s)},suffix:G,prefixCls:f,classes:{affixWrapper:ic()(null===g||void 0===g?void 0:g.affixWrapper,(n={},Ir(n,"".concat(f,"-show-count"),y),Ir(n,"".concat(f,"-textarea-allow-clear"),l),n))},disabled:_,focused:O,className:v,style:Or(Or({},x),"resized"===B?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":"string"===typeof H?H:void 0}},hidden:b,inputElement:m.createElement(Y_,Ui({},E,{onKeyDown:function(t){var e=E.onPressEnter,n=E.onKeyDown;"Enter"===t.key&&e&&e(t),null===n||void 0===n||n(t)},onChange:function(t){var e=t.target.value;!R&&U&&(e=J_(t.target.selectionStart>=c+1||t.target.selectionStart===e.length||!t.target.selectionStart,M,e,c));T(e),y_(t.currentTarget,t,s,e)},onFocus:function(t){A(!0),null===o||void 0===o||o(t)},onBlur:function(t){A(!1),null===a||void 0===a||a(t)},onCompositionStart:function(t){L(!0),N.current=M,F.current=t.currentTarget.selectionStart,null===u||void 0===u||u(t)},onCompositionEnd:function(t){L(!1);var e,n=t.currentTarget.value;U&&(n=J_(F.current>=c+1||F.current===(null===(e=N.current)||void 0===e?void 0:e.length),N.current,n,c));n!==M&&(T(n),y_(t.currentTarget,t,s,n)),null===h||void 0===h||h(t)},className:null===w||void 0===w?void 0:w.textarea,style:Or(Or({},null===S||void 0===S?void 0:S.textarea),{},{resize:null===x||void 0===x?void 0:x.resize}),disabled:_,prefixCls:f,onResize:function(t){null===C||void 0===C||C(t),null===B?$("mounted"):"mounted"===B&&$("resized")},ref:I}))});return X})),tb=Q_,eb=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const nb=(0,m.forwardRef)(((t,e)=>{var{prefixCls:n,bordered:r=!0,size:i,disabled:o,status:a,allowClear:s,showCount:l,classNames:c}=t,u=eb(t,["prefixCls","bordered","size","disabled","status","allowClear","showCount","classNames"]);const{getPrefixCls:h,direction:p}=m.useContext(Gl),d=Jl(i),f=m.useContext(Kl),g=null!==o&&void 0!==o?o:f,{status:y,hasFeedback:v,feedbackIcon:x}=m.useContext(tf),_=C_(y,a),b=m.useRef(null);m.useImperativeHandle(e,(()=>{var t;return{resizableTextArea:null===(t=b.current)||void 0===t?void 0:t.resizableTextArea,focus:t=>{var e,n;!function(t,e){if(!t)return;t.focus(e);const{cursor:n}=e||{};if(n){const e=t.value.length;switch(n){case"start":t.setSelectionRange(0,0);break;case"end":t.setSelectionRange(e,e);break;default:t.setSelectionRange(0,e)}}}(null===(n=null===(e=b.current)||void 0===e?void 0:e.resizableTextArea)||void 0===n?void 0:n.textArea,t)},blur:()=>{var t;return null===(t=b.current)||void 0===t?void 0:t.blur()}}}));const w=h("input",n);let S;"object"===typeof s&&(null===s||void 0===s?void 0:s.clearIcon)?S=s:s&&(S={clearIcon:m.createElement(Qu,null)});const[C,E]=d_(w);return C(m.createElement(tb,Object.assign({},u,{disabled:g,allowClear:S,classes:{affixWrapper:ic()(`${w}-textarea-affix-wrapper`,{[`${w}-affix-wrapper-rtl`]:"rtl"===p,[`${w}-affix-wrapper-borderless`]:!r,[`${w}-affix-wrapper-sm`]:"small"===d,[`${w}-affix-wrapper-lg`]:"large"===d,[`${w}-textarea-show-count`]:l},S_(`${w}-affix-wrapper`,_),E)},classNames:Object.assign(Object.assign({},c),{textarea:ic()({[`${w}-borderless`]:!r,[`${w}-sm`]:"small"===d,[`${w}-lg`]:"large"===d},S_(w,_),E,null===c||void 0===c?void 0:c.textarea)}),prefixCls:w,suffix:v&&m.createElement("span",{className:`${w}-textarea-suffix`},x),showCount:l,ref:b})))}));var rb=nb;const ib=T_;ib.Group=f_,ib.Search=V_,ib.TextArea=rb,ib.Password=N_;var ob=ib,ab={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},sb=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:ab}))};var lb=m.forwardRef(sb),cb={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},ub=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:cb}))};var hb=m.forwardRef(ub);function pb(){return"function"===typeof BigInt}function db(t){var e=t.trim(),n=e.startsWith("-");n&&(e=e.slice(1)),(e=e.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,"")).startsWith(".")&&(e="0".concat(e));var r=e||"0",i=r.split("."),o=i[0]||"0",a=i[1]||"0";"0"===o&&"0"===a&&(n=!1);var s=n?"-":"";return{negative:n,negativeStr:s,trimStr:r,integerStr:o,decimalStr:a,fullStr:"".concat(s).concat(r)}}function fb(t){var e=String(t);return!Number.isNaN(Number(e))&&e.includes("e")}function gb(t){var e=String(t);if(fb(t)){var n=Number(e.slice(e.indexOf("e-")+2)),r=e.match(/\.(\d+)/);return null!==r&&void 0!==r&&r[1]&&(n+=r[1].length),n}return e.includes(".")&&yb(e)?e.length-e.indexOf(".")-1:0}function mb(t){var e=String(t);if(fb(t)){if(t>Number.MAX_SAFE_INTEGER)return String(pb()?BigInt(t).toString():Number.MAX_SAFE_INTEGER);if(t<Number.MIN_SAFE_INTEGER)return String(pb()?BigInt(t).toString():Number.MIN_SAFE_INTEGER);e=t.toFixed(gb(e))}return db(e).fullStr}function yb(t){return"number"===typeof t?!Number.isNaN(t):!!t&&(/^\s*-?\d+(\.\d+)?\s*$/.test(t)||/^\s*-?\d+\.\s*$/.test(t)||/^\s*-?\.\d+\s*$/.test(t))}function vb(t){return!t&&0!==t&&!Number.isNaN(t)||!String(t).trim()}var xb=function(){function t(e){ii(this,t),Ir(this,"origin",""),Ir(this,"number",void 0),Ir(this,"empty",void 0),vb(e)?this.empty=!0:(this.origin=String(e),this.number=Number(e))}return ai(t,[{key:"negate",value:function(){return new t(-this.toNumber())}},{key:"add",value:function(e){if(this.isInvalidate())return new t(e);var n=Number(e);if(Number.isNaN(n))return this;var r=this.number+n;if(r>Number.MAX_SAFE_INTEGER)return new t(Number.MAX_SAFE_INTEGER);if(r<Number.MIN_SAFE_INTEGER)return new t(Number.MIN_SAFE_INTEGER);var i=Math.max(gb(this.number),gb(n));return new t(r.toFixed(i))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(t){return this.toNumber()===(null===t||void 0===t?void 0:t.toNumber())}},{key:"lessEquals",value:function(t){return this.add(t.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.isInvalidate()?"":mb(this.number):this.origin}}]),t}(),_b=function(){function t(e){if(ii(this,t),Ir(this,"origin",""),Ir(this,"negative",void 0),Ir(this,"integer",void 0),Ir(this,"decimal",void 0),Ir(this,"decimalLen",void 0),Ir(this,"empty",void 0),Ir(this,"nan",void 0),vb(e))this.empty=!0;else if(this.origin=String(e),"-"===e||Number.isNaN(e))this.nan=!0;else{var n=e;if(fb(n)&&(n=Number(n)),yb(n="string"===typeof n?n:mb(n))){var r=db(n);this.negative=r.negative;var i=r.trimStr.split(".");this.integer=BigInt(i[0]);var o=i[1]||"0";this.decimal=BigInt(o),this.decimalLen=o.length}else this.nan=!0}}return ai(t,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(t){var e="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(t,"0"));return BigInt(e)}},{key:"negate",value:function(){var e=new t(this.toString());return e.negative=!e.negative,e}},{key:"add",value:function(e){if(this.isInvalidate())return new t(e);var n=new t(e);if(n.isInvalidate())return this;var r=Math.max(this.getDecimalStr().length,n.getDecimalStr().length),i=db((this.alignDecimal(r)+n.alignDecimal(r)).toString()),o=i.negativeStr,a=i.trimStr,s="".concat(o).concat(a.padStart(r+1,"0"));return new t("".concat(s.slice(0,-r),".").concat(s.slice(-r)))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(t){return this.toString()===(null===t||void 0===t?void 0:t.toString())}},{key:"lessEquals",value:function(t){return this.add(t.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.isInvalidate()?"":db("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),t}();function bb(t){return pb()?new _b(t):new xb(t)}function wb(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(""===t)return"";var i=db(t),o=i.negativeStr,a=i.integerStr,s=i.decimalStr,l="".concat(e).concat(s),c="".concat(o).concat(a);if(n>=0){var u=Number(s[n]);return u>=5&&!r?wb(bb(t).add("".concat(o,"0.").concat("0".repeat(n)).concat(10-u)).toString(),e,n,r):0===n?c:"".concat(c).concat(e).concat(s.padEnd(n,"0").slice(0,n))}return".0"===l?c:"".concat(c).concat(l)}var Sb=bb,Cb=function(){var t=Ri((0,m.useState)(!1),2),e=t[0],n=t[1];return _d((function(){n(Hm())}),[]),e};function Eb(t){var e=t.prefixCls,n=t.upNode,r=t.downNode,i=t.upDisabled,o=t.downDisabled,a=t.onStep,s=m.useRef(),l=m.useRef();l.current=a;var c=function(t,e){t.preventDefault(),l.current(e),s.current=setTimeout((function t(){l.current(e),s.current=setTimeout(t,200)}),600)},u=function(){clearTimeout(s.current)};if(m.useEffect((function(){return u}),[]),Cb())return null;var h="".concat(e,"-handler"),p=ic()(h,"".concat(h,"-up"),Ir({},"".concat(h,"-up-disabled"),i)),d=ic()(h,"".concat(h,"-down"),Ir({},"".concat(h,"-down-disabled"),o)),f={unselectable:"on",role:"button",onMouseUp:u,onMouseLeave:u};return m.createElement("div",{className:"".concat(h,"-wrap")},m.createElement("span",Ui({},f,{onMouseDown:function(t){c(t,!0)},"aria-label":"Increase Value","aria-disabled":i,className:p}),n||m.createElement("span",{unselectable:"on",className:"".concat(e,"-handler-up-inner")})),m.createElement("span",Ui({},f,{onMouseDown:function(t){c(t,!1)},"aria-label":"Decrease Value","aria-disabled":o,className:d}),r||m.createElement("span",{unselectable:"on",className:"".concat(e,"-handler-down-inner")})))}function kb(t){var e="number"===typeof t?mb(t):db(t).fullStr;return e.includes(".")?db(e.replace(/(\d)\.(\d)/g,"$1$2.")).fullStr:t+"0"}var Mb=["prefixCls","className","style","min","max","step","defaultValue","value","disabled","readOnly","upHandler","downHandler","keyboard","controls","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep"],Tb=function(t,e){return t||e.isEmpty()?e.toString():e.toNumber()},Ib=function(t){var e=Sb(t);return e.isInvalidate()?null:e},Pb=m.forwardRef((function(t,e){var n,r=t.prefixCls,i=void 0===r?"rc-input-number":r,o=t.className,a=t.style,s=t.min,l=t.max,c=t.step,u=void 0===c?1:c,h=t.defaultValue,p=t.value,d=t.disabled,f=t.readOnly,g=t.upHandler,y=t.downHandler,v=t.keyboard,x=t.controls,_=void 0===x||x,b=t.stringMode,w=t.parser,S=t.formatter,C=t.precision,E=t.decimalSeparator,k=t.onChange,M=t.onInput,T=t.onPressEnter,I=t.onStep,P=Zo(t,Mb),O="".concat(i,"-input"),A=m.useRef(null),D=Ri(m.useState(!1),2),R=D[0],L=D[1],N=m.useRef(!1),F=m.useRef(!1),z=m.useRef(!1),B=Ri(m.useState((function(){return Sb(null!==p&&void 0!==p?p:h)})),2),$=B[0],j=B[1];var U=m.useCallback((function(t,e){if(!e)return C>=0?C:Math.max(gb(t),gb(u))}),[C,u]),V=m.useCallback((function(t){var e=String(t);if(w)return w(e);var n=e;return E&&(n=n.replace(E,".")),n.replace(/[^\w.-]+/g,"")}),[w,E]),H=m.useRef(""),G=m.useCallback((function(t,e){if(S)return S(t,{userTyping:e,input:String(H.current)});var n="number"===typeof t?mb(t):t;if(!e){var r=U(n,e);if(yb(n)&&(E||r>=0))n=wb(n,E||".",r)}return n}),[S,U,E]),W=Ri(m.useState((function(){var t=null!==h&&void 0!==h?h:p;return $.isInvalidate()&&["string","number"].includes(Cr(t))?Number.isNaN(t)?"":t:G($.toString(),!1)})),2),X=W[0],q=W[1];function Y(t,e){q(G(t.isInvalidate()?t.toString(!1):t.toString(!e),e))}H.current=X;var Z=m.useMemo((function(){return Ib(l)}),[l,C]),K=m.useMemo((function(){return Ib(s)}),[s,C]),J=m.useMemo((function(){return!(!Z||!$||$.isInvalidate())&&Z.lessEquals($)}),[Z,$]),Q=m.useMemo((function(){return!(!K||!$||$.isInvalidate())&&$.lessEquals(K)}),[K,$]),tt=function(t,e){var n=(0,m.useRef)(null);return[function(){try{var e=t.selectionStart,r=t.selectionEnd,i=t.value,o=i.substring(0,e),a=i.substring(r);n.current={start:e,end:r,value:i,beforeTxt:o,afterTxt:a}}catch(kg){}},function(){if(t&&n.current&&e)try{var r=t.value,i=n.current,o=i.beforeTxt,a=i.afterTxt,s=i.start,l=r.length;if(r.endsWith(a))l=r.length-n.current.afterTxt.length;else if(r.startsWith(o))l=o.length;else{var c=o[s-1],u=r.indexOf(c,s-1);-1!==u&&(l=u+1)}t.setSelectionRange(l,l)}catch(kg){ni(!1,"Something warning of cursor restore. Please fire issue about this: ".concat(kg.message))}}]}(A.current,R),et=Ri(tt,2),nt=et[0],rt=et[1],it=function(t){return Z&&!t.lessEquals(Z)?Z:K&&!K.lessEquals(t)?K:null},ot=function(t){return!it(t)},at=function(t,e){var n,r=t,i=ot(r)||r.isEmpty();if(r.isEmpty()||e||(r=it(r)||r,i=!0),!f&&!d&&i){var o=r.toString(),a=U(o,e);return a>=0&&(r=Sb(wb(o,".",a)),ot(r)||(r=Sb(wb(o,".",a,!0)))),r.equals($)||(n=r,void 0===p&&j(n),null===k||void 0===k||k(r.isEmpty()?null:Tb(b,r)),void 0===p&&Y(r,e)),r}return $},st=function(){var t=(0,m.useRef)(0),e=function(){Xc.cancel(t.current)};return(0,m.useEffect)((function(){return e}),[]),function(n){e(),t.current=Xc((function(){n()}))}}(),lt=function t(e){if(nt(),q(e),!F.current){var n=V(e),r=Sb(n);r.isNaN()||at(r,!0)}null===M||void 0===M||M(e),st((function(){var n=e;w||(n=e.replace(/\u3002/g,".")),n!==e&&t(n)}))},ct=function(t){var e;if(!(t&&J||!t&&Q)){N.current=!1;var n=Sb(z.current?kb(u):u);t||(n=n.negate());var r=($||Sb(0)).add(n.toString()),i=at(r,!1);null===I||void 0===I||I(Tb(b,i),{offset:z.current?kb(u):u,type:t?"up":"down"}),null===(e=A.current)||void 0===e||e.focus()}},ut=function(t){var e=Sb(V(X)),n=e;n=e.isNaN()?$:at(e,t),void 0!==p?Y($,!1):n.isNaN()||Y(n,!1)};return xd((function(){$.isInvalidate()||Y($,!1)}),[C]),xd((function(){var t=Sb(p);j(t);var e=Sb(V(X));t.equals(e)&&N.current&&!S||Y(t,N.current)}),[p]),xd((function(){S&&rt()}),[X]),m.createElement("div",{className:ic()(i,o,(n={},Ir(n,"".concat(i,"-focused"),R),Ir(n,"".concat(i,"-disabled"),d),Ir(n,"".concat(i,"-readonly"),f),Ir(n,"".concat(i,"-not-a-number"),$.isNaN()),Ir(n,"".concat(i,"-out-of-range"),!$.isInvalidate()&&!ot($)),n)),style:a,onFocus:function(){L(!0)},onBlur:function(){ut(!1),L(!1),N.current=!1},onKeyDown:function(t){var e=t.which,n=t.shiftKey;N.current=!0,z.current=!!n,e===sh.ENTER&&(F.current||(N.current=!1),ut(!1),null===T||void 0===T||T(t)),!1!==v&&!F.current&&[sh.UP,sh.DOWN].includes(e)&&(ct(sh.UP===e),t.preventDefault())},onKeyUp:function(){N.current=!1,z.current=!1},onCompositionStart:function(){F.current=!0},onCompositionEnd:function(){F.current=!1,lt(A.current.value)},onBeforeInput:function(){N.current=!0}},_&&m.createElement(Eb,{prefixCls:i,upNode:g,downNode:y,upDisabled:J,downDisabled:Q,onStep:ct}),m.createElement("div",{className:"".concat(O,"-wrap")},m.createElement("input",Ui({autoComplete:"off",role:"spinbutton","aria-valuemin":s,"aria-valuemax":l,"aria-valuenow":$.isInvalidate()?null:$.toString(),step:u},P,{ref:lc(A,e),className:O,value:X,onChange:function(t){lt(t.target.value)},disabled:d,readOnly:f}))))}));Pb.displayName="InputNumber";var Ob=Pb;const Ab=t=>{const{componentCls:e,lineWidth:n,lineType:r,colorBorder:i,borderRadius:o,fontSizeLG:a,controlHeightLG:s,controlHeightSM:l,colorError:c,inputPaddingHorizontalSM:u,colorTextDescription:h,motionDurationMid:p,colorPrimary:d,controlHeight:f,inputPaddingHorizontal:g,colorBgContainer:m,colorTextDisabled:y,borderRadiusSM:v,borderRadiusLG:x,controlWidth:_,handleVisible:b}=t;return[{[e]:Object.assign(Object.assign(Object.assign(Object.assign({},fu(t)),i_(t)),r_(t,e)),{display:"inline-block",width:_,margin:0,padding:0,border:`${n}px ${r} ${i}`,borderRadius:o,"&-rtl":{direction:"rtl",[`${e}-input`]:{direction:"rtl"}},"&-lg":{padding:0,fontSize:a,borderRadius:x,[`input${e}-input`]:{height:s-2*n}},"&-sm":{padding:0,borderRadius:v,[`input${e}-input`]:{height:l-2*n,padding:`0 ${u}px`}},"&:hover":Object.assign({},Jx(t)),"&-focused":Object.assign({},Qx(t)),"&-disabled":Object.assign(Object.assign({},t_(t)),{[`${e}-input`]:{cursor:"not-allowed"}}),"&-out-of-range":{[`${e}-input-wrap`]:{input:{color:c}}},"&-group":Object.assign(Object.assign(Object.assign({},fu(t)),o_(t)),{"&-wrapper":{display:"inline-block",textAlign:"start",verticalAlign:"top",[`${e}-affix-wrapper`]:{width:"100%"},"&-lg":{[`${e}-group-addon`]:{borderRadius:x}},"&-sm":{[`${e}-group-addon`]:{borderRadius:v}}}}),[e]:{"&-input":Object.assign(Object.assign(Object.assign(Object.assign({},fu(t)),{width:"100%",height:f-2*n,padding:`0 ${g}px`,textAlign:"start",backgroundColor:"transparent",border:0,borderRadius:o,outline:0,transition:`all ${p} linear`,appearance:"textfield",fontSize:"inherit",verticalAlign:"top"}),Kx(t.colorTextPlaceholder)),{'&[type="number"]::-webkit-inner-spin-button, &[type="number"]::-webkit-outer-spin-button':{margin:0,webkitAppearance:"none",appearance:"none"}})}})},{[e]:{[`&:hover ${e}-handler-wrap, &-focused ${e}-handler-wrap`]:{opacity:1},[`${e}-handler-wrap`]:{position:"absolute",insetBlockStart:0,insetInlineEnd:0,width:t.handleWidth,height:"100%",background:m,borderStartStartRadius:0,borderStartEndRadius:o,borderEndEndRadius:o,borderEndStartRadius:0,opacity:!0===b?1:0,display:"flex",flexDirection:"column",alignItems:"stretch",transition:`opacity ${p} linear ${p}`,[`${e}-handler`]:{display:"flex",alignItems:"center",justifyContent:"center",flex:"auto",height:"40%",[`\n              ${e}-handler-up-inner,\n              ${e}-handler-down-inner\n            `]:{marginInlineEnd:0,fontSize:t.handleFontSize}}},[`${e}-handler`]:{height:"50%",overflow:"hidden",color:h,fontWeight:"bold",lineHeight:0,textAlign:"center",cursor:"pointer",borderInlineStart:`${n}px ${r} ${i}`,transition:`all ${p} linear`,"&:active":{background:t.colorFillAlter},"&:hover":{height:"60%",[`\n              ${e}-handler-up-inner,\n              ${e}-handler-down-inner\n            `]:{color:d}},"&-up-inner, &-down-inner":Object.assign(Object.assign({},{display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),{color:h,transition:`all ${p} linear`,userSelect:"none"})},[`${e}-handler-up`]:{borderStartEndRadius:o},[`${e}-handler-down`]:{borderBlockStart:`${n}px ${r} ${i}`,borderEndEndRadius:o},"&-disabled, &-readonly":{[`${e}-handler-wrap`]:{display:"none"},[`${e}-input`]:{color:"inherit"}},[`\n          ${e}-handler-up-disabled,\n          ${e}-handler-down-disabled\n        `]:{cursor:"not-allowed"},[`\n          ${e}-handler-up-disabled:hover &-handler-up-inner,\n          ${e}-handler-down-disabled:hover &-handler-down-inner\n        `]:{color:y}}},{[`${e}-borderless`]:{borderColor:"transparent",boxShadow:"none",[`${e}-handler-down`]:{borderBlockStartWidth:0}}}]},Db=t=>{const{componentCls:e,inputPaddingHorizontal:n,inputAffixPadding:r,controlWidth:i,borderRadiusLG:o,borderRadiusSM:a}=t;return{[`${e}-affix-wrapper`]:Object.assign(Object.assign(Object.assign({},i_(t)),r_(t,`${e}-affix-wrapper`)),{position:"relative",display:"inline-flex",width:i,padding:0,paddingInlineStart:n,"&-lg":{borderRadius:o},"&-sm":{borderRadius:a},[`&:not(${e}-affix-wrapper-disabled):hover`]:Object.assign(Object.assign({},Jx(t)),{zIndex:1}),"&-focused, &:focus":{zIndex:1},"&-disabled":{[`${e}[disabled]`]:{background:"transparent"}},[`> div${e}`]:{width:"100%",border:"none",outline:"none",[`&${e}-focused`]:{boxShadow:"none !important"}},[`input${e}-input`]:{padding:0},"&::before":{width:0,visibility:"hidden",content:'"\\a0"'},[`${e}-handler-wrap`]:{zIndex:2},[e]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center",pointerEvents:"none"},"&-prefix":{marginInlineEnd:r},"&-suffix":{position:"absolute",insetBlockStart:0,insetInlineEnd:0,zIndex:1,height:"100%",marginInlineEnd:n,marginInlineStart:r}}})}};var Rb=bh("InputNumber",(t=>{const e=h_(t);return[Ab(e),Db(e),Mp(e)]}),(t=>({controlWidth:90,handleWidth:t.controlHeightSM-2*t.lineWidth,handleFontSize:t.fontSize/2,handleVisible:"auto"}))),Lb=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const Nb=m.forwardRef(((t,e)=>{const{getPrefixCls:n,direction:r}=m.useContext(Gl),[i,o]=m.useState(!1),a=m.useRef(null);m.useImperativeHandle(e,(()=>a.current));const{className:s,rootClassName:l,size:c,disabled:u,prefixCls:h,addonBefore:p,addonAfter:d,prefix:f,bordered:g=!0,readOnly:y,status:v,controls:x}=t,_=Lb(t,["className","rootClassName","size","disabled","prefixCls","addonBefore","addonAfter","prefix","bordered","readOnly","status","controls"]),b=n("input-number",h),[w,S]=Rb(b),{compactSize:C,compactItemClassnames:E}=lp(b,r);let k=m.createElement(hb,{className:`${b}-handler-up-inner`}),M=m.createElement(lb,{className:`${b}-handler-down-inner`});const T="boolean"===typeof x?x:void 0;"object"===typeof x&&(k="undefined"===typeof x.upIcon?k:m.createElement("span",{className:`${b}-handler-up-inner`},x.upIcon),M="undefined"===typeof x.downIcon?M:m.createElement("span",{className:`${b}-handler-down-inner`},x.downIcon));const{hasFeedback:I,status:P,isFormItemInput:O,feedbackIcon:A}=m.useContext(tf),D=C_(P,v),R=Jl((t=>{var e;return null!==(e=null!==C&&void 0!==C?C:c)&&void 0!==e?e:t})),L=null!=f||I,N=!(!p&&!d),F=m.useContext(Kl),z=null!==u&&void 0!==u?u:F,B=ic()({[`${b}-lg`]:"large"===R,[`${b}-sm`]:"small"===R,[`${b}-rtl`]:"rtl"===r,[`${b}-borderless`]:!g,[`${b}-in-form-item`]:O},S_(b,D),E,S,s,!L&&!N&&l);let $=m.createElement(Ob,Object.assign({ref:a,disabled:z,className:B,upHandler:k,downHandler:M,prefixCls:b,readOnly:y,controls:T},_));if(L){const e=ic()(`${b}-affix-wrapper`,S_(`${b}-affix-wrapper`,D,I),{[`${b}-affix-wrapper-focused`]:i,[`${b}-affix-wrapper-disabled`]:t.disabled,[`${b}-affix-wrapper-sm`]:"small"===R,[`${b}-affix-wrapper-lg`]:"large"===R,[`${b}-affix-wrapper-rtl`]:"rtl"===r,[`${b}-affix-wrapper-readonly`]:y,[`${b}-affix-wrapper-borderless`]:!g},!N&&s,!N&&l,S);$=m.createElement("div",{className:e,style:t.style,onMouseUp:()=>a.current.focus()},f&&m.createElement("span",{className:`${b}-prefix`},f),Yh($,{style:null,value:t.value,onFocus:e=>{var n;o(!0),null===(n=t.onFocus)||void 0===n||n.call(t,e)},onBlur:e=>{var n;o(!1),null===(n=t.onBlur)||void 0===n||n.call(t,e)}}),I&&m.createElement("span",{className:`${b}-suffix`},A))}if(N){const e=`${b}-group`,n=`${e}-addon`,i=p?m.createElement("div",{className:n},p):null,o=d?m.createElement("div",{className:n},d):null,a=ic()(`${b}-wrapper`,e,S,{[`${e}-rtl`]:"rtl"===r}),c=ic()(`${b}-group-wrapper`,{[`${b}-group-wrapper-sm`]:"small"===R,[`${b}-group-wrapper-lg`]:"large"===R,[`${b}-group-wrapper-rtl`]:"rtl"===r},S_(`${b}-group-wrapper`,D,I),S,s,l);$=m.createElement("div",{className:c,style:t.style},m.createElement("div",{className:a},i&&m.createElement(cp,null,m.createElement(ef,{status:!0,override:!0},i)),Yh($,{style:null,disabled:z}),o&&m.createElement(cp,null,m.createElement(ef,{status:!0,override:!0},o))))}return w($)})),Fb=Nb;Fb._InternalPanelDoNotUseOrYouWillBeFired=t=>m.createElement(Iu,{theme:{components:{InputNumber:{handleVisible:!0}}}},m.createElement(Nb,Object.assign({},t)));var zb=Fb,Bb={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},$b=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:Bb}))};var jb=m.forwardRef($b);const Ub=t=>new Promise(((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(r.result),r.onerror=t=>n(t)}));var Vb=t=>{let{onData:e}=t;const[n,r]=(0,m.useState)(!1),i=(0,m.useRef)(null),[o,a]=(0,m.useState)(!1),[s,l]=(0,m.useState)(""),[c,u]=(0,m.useState)(""),[h,p]=(0,m.useState)([]),[d,f]=(0,m.useState)(null),g=()=>{r(!1),u("")},y=(0,lr.jsxs)("div",{children:[(0,lr.jsx)(jb,{}),(0,lr.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsx)(id,{className:"prof_Button",type:"primary",onClick:()=>{r(!0)},children:"Create Profile"}),(0,lr.jsx)(ig,{open:o,title:c,footer:null,onCancel:()=>{a(!1),l("")},children:(0,lr.jsx)("img",{alt:"example",style:{width:"100%"},src:s})}),(0,lr.jsx)(ig,{title:(0,lr.jsx)("h3",{children:"Rider Profile"}),open:n,onCancel:g,footer:[(0,lr.jsx)(id,{onClick:g,children:"Cancel"},"back"),(0,lr.jsx)(id,{type:"primary",onClick:async()=>{i.current.validateFields().then((async t=>{r(!1),i.current.resetFields();const n=Object.fromEntries(Object.entries(t).map((t=>{let[e,n]=t;return[e,""===n?null:n]})));e({...n,profile_picture:d})})).catch((t=>{console.log("Validate Failed:",t)}))},children:"Submit"},"submit")],children:(0,lr.jsxs)(cv,{labelCol:{span:5},wrapperCol:{span:14,offset:3},name:"nest-messages",style:{maxWidth:600},validateMessages:{required:"${label} is required!",types:{number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},ref:i,children:[(0,lr.jsx)(cv.Item,{label:"Profile Picture",children:(0,lr.jsx)(Zx,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture-circle",fileList:h,onPreview:async t=>{t.url||t.preview||(t.preview=await Ub(t.originFileObj)),l(t.url||t.preview),a(!0),u(t.name||t.url.substring(t.url.lastIndexOf("/")+1))},onChange:t=>{let{fileList:e}=t;if(p(e),e.length>0){const t=e[0].originFileObj;Ub(t).then((t=>{f(t)}))}else f(null)},beforeUpload:t=>{const e=0===t.type.indexOf("image/");return e||Hh.error("You can only upload image files!"),e},children:h.length>=1?null:y})}),(0,lr.jsx)(cv.Item,{name:"first_name",label:"First Name",rules:[{required:!0}],children:(0,lr.jsx)(ob,{})}),(0,lr.jsx)(cv.Item,{name:"last_name",label:"Last Name",rules:[{required:!0}],children:(0,lr.jsx)(ob,{})}),(0,lr.jsx)(cv.Item,{name:"address",label:"Address",children:(0,lr.jsx)(ob,{})}),(0,lr.jsx)(cv.Item,{name:"city",label:"City",children:(0,lr.jsx)(ob,{})}),(0,lr.jsx)(cv.Item,{name:"state_province",label:"State Province",children:(0,lr.jsx)(ob,{})}),(0,lr.jsx)(cv.Item,{name:"zip_postal_code",label:"Zip Code",rules:[{type:"number",min:0,max:99999}],children:(0,lr.jsx)(zb,{})})]})})]})};const Hb=t=>new Promise(((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(r.result),r.onerror=t=>n(t)}));var Gb=t=>{let{onData:e}=t;const[n,r]=(0,m.useState)(!1),i=(0,m.useRef)(null),[o,a]=(0,m.useState)(!1),[s,l]=(0,m.useState)(""),[c,u]=(0,m.useState)(""),[h,p]=(0,m.useState)([]),[d,f]=(0,m.useState)(null),g=()=>{r(!1),u("")},y=(0,lr.jsxs)("div",{children:[(0,lr.jsx)(jb,{}),(0,lr.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsx)(id,{className:"prof_Button",type:"primary",onClick:()=>{r(!0)},children:"Create Profile"}),(0,lr.jsx)(ig,{open:o,title:c,footer:null,onCancel:()=>{a(!1),l("")},children:(0,lr.jsx)("img",{alt:"example",style:{width:"100%"},src:s})}),(0,lr.jsx)(ig,{title:(0,lr.jsx)("h3",{children:"Driver Profile"}),open:n,onCancel:g,footer:[(0,lr.jsx)(id,{onClick:g,children:"Cancel"},"back"),(0,lr.jsx)(id,{type:"primary",onClick:async()=>{i.current.validateFields().then((async t=>{r(!1),i.current.resetFields();const n=Object.fromEntries(Object.entries(t).map((t=>{let[e,n]=t;return[e,""===n?null:n]})));e({...n,profile_picture:d})})).catch((t=>{console.log("Validate Failed:",t)}))},children:"Submit"},"submit")],children:(0,lr.jsxs)(cv,{labelCol:{span:5},wrapperCol:{span:14,offset:3},name:"nest-messages",style:{maxWidth:600},validateMessages:{required:"${label} is required!",types:{number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},ref:i,children:[(0,lr.jsx)(cv.Item,{label:"Profile Picture",children:(0,lr.jsx)(Zx,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture-circle",fileList:h,onPreview:async t=>{t.url||t.preview||(t.preview=await Hb(t.originFileObj)),l(t.url||t.preview),a(!0),u(t.name||t.url.substring(t.url.lastIndexOf("/")+1))},onChange:t=>{let{fileList:e}=t;if(p(e),e.length>0){const t=e[0].originFileObj;Hb(t).then((t=>{f(t)}))}else f(null)},beforeUpload:t=>{const e=0===t.type.indexOf("image/");return e||Hh.error("You can only upload image files!"),e},children:h.length>=1?null:y})}),(0,lr.jsx)(cv.Item,{name:"first_name",label:"First Name",rules:[{required:!0}],children:(0,lr.jsx)(ob,{})}),(0,lr.jsx)(cv.Item,{name:"last_name",label:"Last Name",rules:[{required:!0}],children:(0,lr.jsx)(ob,{})}),(0,lr.jsx)(cv.Item,{name:"address",label:"Address",children:(0,lr.jsx)(ob,{})}),(0,lr.jsx)(cv.Item,{name:"city",label:"City",children:(0,lr.jsx)(ob,{})}),(0,lr.jsx)(cv.Item,{name:"state_province",label:"State",children:(0,lr.jsx)(ob,{})}),(0,lr.jsx)(cv.Item,{name:"zip_postal_code",label:"Zip Code",rules:[{type:"number",min:0,max:99999}],children:(0,lr.jsx)(zb,{})}),(0,lr.jsx)(cv.Item,{name:"capacity",label:"Capacity",rules:[{type:"number",min:0,max:99999}],children:(0,lr.jsx)(zb,{})}),(0,lr.jsx)(cv.Item,{name:"description",label:"Description",children:(0,lr.jsx)(ob,{})})]})})]})};const Wb=t=>t?"function"===typeof t?t():t:null,Xb=t=>{const{componentCls:e,popoverBg:n,popoverColor:r,width:i,fontWeightStrong:o,popoverPadding:a,boxShadowSecondary:s,colorTextHeading:l,borderRadiusLG:c,zIndexPopup:u,marginXS:h,colorBgElevated:p}=t;return[{[e]:Object.assign(Object.assign({},fu(t)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:u,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","--antd-arrow-background-color":p,"&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${e}-content`]:{position:"relative"},[`${e}-inner`]:{backgroundColor:n,backgroundClip:"padding-box",borderRadius:c,boxShadow:s,padding:a},[`${e}-title`]:{minWidth:i,marginBottom:h,color:l,fontWeight:o},[`${e}-inner-content`]:{color:r}})},Iy(t,{colorBg:"var(--antd-arrow-background-color)"}),{[`${e}-pure`]:{position:"relative",maxWidth:"none",margin:t.sizePopupArrow,display:"inline-block",[`${e}-content`]:{display:"inline-block"}}}]},qb=t=>{const{componentCls:e}=t;return{[e]:jy.map((n=>{const r=t[`${n}6`];return{[`&${e}-${n}`]:{"--antd-arrow-background-color":r,[`${e}-inner`]:{backgroundColor:r},[`${e}-arrow`]:{background:"transparent"}}}}))}},Yb=t=>{const{componentCls:e,lineWidth:n,lineType:r,colorSplit:i,paddingSM:o,controlHeight:a,fontSize:s,lineHeight:l,padding:c}=t,u=a-Math.round(s*l);return{[e]:{[`${e}-inner`]:{padding:0},[`${e}-title`]:{margin:0,padding:`${u/2}px ${c}px ${u/2-n}px`,borderBottom:`${n}px ${r} ${i}`},[`${e}-inner-content`]:{padding:`${o}px ${c}px`}}}};var Zb=bh("Popover",(t=>{const{colorBgElevated:e,colorText:n,wireframe:r}=t,i=vh(t,{popoverBg:e,popoverColor:n,popoverPadding:12});return[Xb(i),qb(i),r&&Yb(i),Cf(i,"zoom-big")]}),(t=>{let{zIndexPopupBase:e}=t;return{zIndexPopup:e+30,width:177}})),Kb=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const Jb=(t,e,n)=>{if(e||n)return m.createElement(m.Fragment,null,e&&m.createElement("div",{className:`${t}-title`},Wb(e)),m.createElement("div",{className:`${t}-inner-content`},Wb(n)))};function Qb(t){const{hashId:e,prefixCls:n,className:r,style:i,placement:o="top",title:a,content:s,children:l}=t;return m.createElement("div",{className:ic()(e,n,`${n}-pure`,`${n}-placement-${o}`,r),style:i},m.createElement("div",{className:`${n}-arrow`}),m.createElement(xy,Object.assign({},t,{className:e,prefixCls:n}),l||Jb(n,a,s)))}function tw(t){const{prefixCls:e}=t,n=Kb(t,["prefixCls"]),{getPrefixCls:r}=m.useContext(Gl),i=r("popover",e),[o,a]=Zb(i);return o(m.createElement(Qb,Object.assign({},n,{prefixCls:i,hashId:a})))}var ew=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const nw=t=>{let{title:e,content:n,prefixCls:r}=t;return m.createElement(m.Fragment,null,e&&m.createElement("div",{className:`${r}-title`},Wb(e)),m.createElement("div",{className:`${r}-inner-content`},Wb(n)))},rw=m.forwardRef(((t,e)=>{const{prefixCls:n,title:r,content:i,overlayClassName:o,placement:a="top",trigger:s="hover",mouseEnterDelay:l=.1,mouseLeaveDelay:c=.1,overlayStyle:u={}}=t,h=ew(t,["prefixCls","title","content","overlayClassName","placement","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle"]),{getPrefixCls:p}=m.useContext(Gl),d=p("popover",n),[f,g]=Zb(d),y=p(),v=ic()(o,g);return f(m.createElement(Ky,Object.assign({placement:a,trigger:s,mouseEnterDelay:l,mouseLeaveDelay:c,overlayStyle:u},h,{prefixCls:d,overlayClassName:v,ref:e,overlay:r||i?m.createElement(nw,{prefixCls:d,title:r,content:i}):null,transitionName:dd(y,"zoom-big",h.transitionName),"data-popover-inject":!0})))}));rw._InternalPanelDoNotUseOrYouWillBeFired=tw;var iw=rw;var ow=bh("Popconfirm",(t=>(t=>{const{componentCls:e,iconCls:n,zIndexPopup:r,colorText:i,colorWarning:o,marginXS:a,fontSize:s,fontWeightStrong:l,lineHeight:c}=t;return{[e]:{zIndex:r,[`${e}-inner-content`]:{color:i},[`${e}-message`]:{position:"relative",marginBottom:a,color:i,fontSize:s,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${e}-message-icon ${n}`]:{color:o,fontSize:s,flex:"none",lineHeight:1,paddingTop:(Math.round(s*c)-s)/2},"&-title":{flex:"auto",marginInlineStart:a},"&-title-only":{fontWeight:l}},[`${e}-description`]:{position:"relative",marginInlineStart:s+a,marginBottom:a,color:i,fontSize:s},[`${e}-buttons`]:{textAlign:"end",button:{marginInlineStart:a}}}}})(t)),(t=>{const{zIndexPopupBase:e}=t;return{zIndexPopup:e+60}})),aw=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const sw=t=>{const{prefixCls:e,okButtonProps:n,cancelButtonProps:r,title:i,description:o,cancelText:a,okText:s,okType:l="primary",icon:c=m.createElement(Zu,null),showCancel:u=!0,close:h,onConfirm:p,onCancel:d,onPopupClick:f}=t,{getPrefixCls:g}=m.useContext(Gl),[y]=od("Popconfirm",Rs.Popconfirm);return m.createElement("div",{className:`${e}-inner-content`,onClick:f},m.createElement("div",{className:`${e}-message`},c&&m.createElement("span",{className:`${e}-message-icon`},c),m.createElement("div",{className:ic()(`${e}-message-title`,{[`${e}-message-title-only`]:!!o})},Wb(i))),o&&m.createElement("div",{className:`${e}-description`},Wb(o)),m.createElement("div",{className:`${e}-buttons`},u&&m.createElement(id,Object.assign({onClick:d,size:"small"},r),null!==a&&void 0!==a?a:null===y||void 0===y?void 0:y.cancelText),m.createElement(sd,{buttonProps:Object.assign(Object.assign({size:"small"},ed(l)),n),actionFn:p,close:h,prefixCls:g("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},null!==s&&void 0!==s?s:null===y||void 0===y?void 0:y.okText)))};var lw=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const cw=m.forwardRef(((t,e)=>{const{getPrefixCls:n}=m.useContext(Gl),[r,i]=Cy(!1,{value:t.open,defaultValue:t.defaultOpen}),o=(e,n)=>{var r;i(e,!0),null===(r=t.onOpenChange)||void 0===r||r.call(t,e,n)},{prefixCls:a,placement:s="top",trigger:l="click",okType:c="primary",icon:u=m.createElement(Zu,null),children:h,overlayClassName:p}=t,d=lw(t,["prefixCls","placement","trigger","okType","icon","children","overlayClassName"]),f=n("popconfirm",a),g=ic()(f,p),[y]=ow(f);return y(m.createElement(iw,Object.assign({},Gh(d,["title"]),{trigger:l,placement:s,onOpenChange:e=>{const{disabled:n=!1}=t;n||o(e)},open:r,ref:e,overlayClassName:g,content:m.createElement(sw,Object.assign({okType:c,icon:u},t,{prefixCls:f,close:t=>{o(!1,t)},onConfirm:e=>{var n;return null===(n=t.onConfirm)||void 0===n?void 0:n.call(void 0,e)},onCancel:e=>{var n;o(!1,e),null===(n=t.onCancel)||void 0===n||n.call(void 0,e)}})),"data-popover-inject":!0}),Yh(h,{onKeyDown:t=>{var e,n;m.isValidElement(h)&&(null===(n=null===h||void 0===h?void 0:(e=h.props).onKeyDown)||void 0===n||n.call(e,t)),(t=>{t.keyCode===sh.ESC&&r&&o(!1,t)})(t)}})))}));cw._InternalPanelDoNotUseOrYouWillBeFired=function(t){const{prefixCls:e,placement:n,className:r,style:i}=t,o=aw(t,["prefixCls","placement","className","style"]),{getPrefixCls:a}=m.useContext(Gl),s=a("popconfirm",e),[l]=ow(s);return l(m.createElement(tw,{placement:n,className:ic()(s,r),style:i,content:m.createElement(sw,Object.assign({prefixCls:s},o))}))};var uw=cw;const hw=t=>new Promise(((e,n)=>{if("string"===typeof t)e(t);else{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(r.result),r.onerror=t=>n(t)}}));var pw=t=>{let{item:e,onData:n,onDelete:r}=t;const[i,o]=(0,m.useState)(!1),a=(0,m.useRef)(null),[s,l]=(0,m.useState)({}),[c,u]=(0,m.useState)(""),[h,p]=(0,m.useState)(!1),[d,f]=(0,m.useState)(""),[g,y]=(0,m.useState)(""),[v,x]=(0,m.useState)([]);(0,m.useEffect)((()=>{var t,n,r,i,o;l({first_name:(null===(t=e.first_name)||void 0===t?void 0:t.trim())||null,last_name:(null===(n=e.last_name)||void 0===n?void 0:n.trim())||null,address:(null===(r=e.address)||void 0===r?void 0:r.trim())||null,city:(null===(i=e.city)||void 0===i?void 0:i.trim())||null,state_province:(null===(o=e.state_province)||void 0===o?void 0:o.trim())||null,zip_postal_code:e.zip_postal_code?parseInt(e.zip_postal_code,10):null}),u(e.rider_id||null),e.profile_picture?e.profile_picture.startsWith("data:")?x([{uid:"-1",name:"image.png",status:"done",url:e.profile_picture,originFileObj:e.profile_picture}]):_(e.profile_picture).then((t=>{hw(t).then((n=>{x([{uid:"-1",name:"image.png",status:"done",url:e.profile_picture,originFileObj:t}])}))})):x([])}),[e]);const _=t=>new Promise(((e,n)=>{var r=new XMLHttpRequest;r.onerror=n,r.onreadystatechange=()=>{4==r.readyState&&e(r.response)},r.open("GET",t),r.responseType="blob",r.send()})),b=()=>{o(!1),y("")},w=(0,lr.jsxs)("div",{children:[(0,lr.jsx)(jb,{}),(0,lr.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsx)(id,{className:"Edit_Button",type:"primary",onClick:()=>{o(!0)},children:"Edit Profile"}),(0,lr.jsx)(ig,{open:h,title:g,footer:null,onCancel:()=>{p(!1),f("")},children:(0,lr.jsx)("img",{alt:"example",style:{width:"100%"},src:d})}),(0,lr.jsx)(ig,{title:(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsx)("h3",{children:"Rider Profile"}),c&&(0,lr.jsxs)("p",{children:["Rider: ",c]})]}),open:i,onCancel:b,footer:[(0,lr.jsx)(uw,{title:"Delete",description:"Are you sure you want to delete this item?",onConfirm:async()=>{r()},onCancel:()=>{Hh.error("Deletion Failed")},okText:"Yes",cancelText:"No",children:(0,lr.jsx)(id,{type:"primary",danger:!0,children:"Delete"},"delete")}),(0,lr.jsx)(id,{onClick:b,children:"Cancel"},"back"),(0,lr.jsx)(id,{type:"primary",onClick:async()=>{a.current.validateFields().then((async t=>{var e;o(!1),a.current.resetFields();const r=Object.fromEntries(Object.entries(t).map((t=>{let[e,n]=t;return[e,""===n?null:n]}))),i=null===(e=v[0])||void 0===e?void 0:e.originFileObj;if(i){const t=await hw(i);n({...r,profile_picture:t})}else n({...r,profile_picture:null})})).catch((t=>{console.log("Validate Failed:",t)}))},children:"Submit"},"submit")],children:(0,lr.jsxs)(cv,{labelCol:{span:8},wrapperCol:{span:16},name:"nest-messages",style:{maxWidth:600},validateMessages:{required:"${label} is required!",types:{number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},ref:a,initialValues:s,children:[(0,lr.jsx)(cv.Item,{label:"Profile Picture",children:(0,lr.jsx)(Zx,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture-circle",fileList:v,onPreview:async t=>{t.url||t.preview||(t.preview=await hw(t.originFileObj)),f(t.url||t.preview),p(!0),y(t.name||t.url.substring(t.url.lastIndexOf("/")+1))},onChange:t=>{let{fileList:e}=t;x(e)},children:v.length>=1?null:w})}),(0,lr.jsx)(cv.Item,{name:"first_name",label:"First Name",rules:[{required:!0}],children:(0,lr.jsx)(ob,{})}),(0,lr.jsx)(cv.Item,{name:"last_name",label:"Last Name",rules:[{required:!0}],children:(0,lr.jsx)(ob,{})}),(0,lr.jsx)(cv.Item,{name:"address",label:"Address",children:(0,lr.jsx)(ob,{})}),(0,lr.jsx)(cv.Item,{name:"city",label:"City",children:(0,lr.jsx)(ob,{})}),(0,lr.jsx)(cv.Item,{name:"state_province",label:"State Province",children:(0,lr.jsx)(ob,{})}),(0,lr.jsx)(cv.Item,{name:"zip_postal_code",label:"Zip Code",rules:[{type:"number",min:0,max:99999}],children:(0,lr.jsx)(zb,{})})]})})]})};const dw=t=>new Promise(((e,n)=>{if("string"===typeof t)e(t);else{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(r.result),r.onerror=t=>n(t)}}));var fw=t=>{let{item:e,onData:n,onDelete:r}=t;const[i,o]=(0,m.useState)(!1),a=(0,m.useRef)(null),[s,l]=(0,m.useState)({}),[c,u]=(0,m.useState)(""),[h,p]=(0,m.useState)(!1),[d,f]=(0,m.useState)(""),[g,y]=(0,m.useState)(""),[v,x]=(0,m.useState)([]);(0,m.useEffect)((()=>{var t,n,r,i,o,a;l({first_name:(null===(t=e.first_name)||void 0===t?void 0:t.trim())||null,last_name:(null===(n=e.last_name)||void 0===n?void 0:n.trim())||null,address:(null===(r=e.address)||void 0===r?void 0:r.trim())||null,city:(null===(i=e.city)||void 0===i?void 0:i.trim())||null,state_province:(null===(o=e.state_province)||void 0===o?void 0:o.trim())||null,zip_postal_code:e.zip_postal_code?parseInt(e.zip_postal_code,10):null,capacity:e.capacity?parseInt(e.capacity,10):null,description:(null===(a=e.description)||void 0===a?void 0:a.trim())||null}),u(e.driver_id||null),e.profile_picture?e.profile_picture.startsWith("data:")?x([{uid:"-1",name:"image.png",status:"done",url:e.profile_picture,originFileObj:e.profile_picture}]):_(e.profile_picture).then((t=>{dw(t).then((n=>{x([{uid:"-1",name:"image.png",status:"done",url:e.profile_picture,originFileObj:t}])}))})):x([])}),[e]);const _=t=>new Promise(((e,n)=>{var r=new XMLHttpRequest;r.onerror=n,r.onreadystatechange=()=>{4==r.readyState&&e(r.response)},r.open("GET",t),r.responseType="blob",r.send()})),b=()=>{o(!1),y("")},w=(0,lr.jsxs)("div",{children:[(0,lr.jsx)(jb,{}),(0,lr.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsx)(id,{className:"Edit_Button",type:"primary",onClick:()=>{o(!0)},children:"Edit Profile"}),(0,lr.jsx)(ig,{open:h,title:g,footer:null,onCancel:()=>{p(!1),f("")},children:(0,lr.jsx)("img",{alt:"example",style:{width:"100%"},src:d})}),(0,lr.jsx)(ig,{title:(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsx)("h3",{children:"Driver Profile"}),c&&(0,lr.jsxs)("p",{children:["Diver: ",c]})]}),open:i,onCancel:b,footer:[(0,lr.jsx)(uw,{title:"Delete",description:"Are you sure you want to delete this item?",onConfirm:async()=>{r()},onCancel:()=>{Hh.error("Deletion Failed")},okText:"Yes",cancelText:"No",children:(0,lr.jsx)(id,{type:"primary",danger:!0,children:"Delete"},"delete")}),(0,lr.jsx)(id,{onClick:b,children:"Cancel"},"back"),(0,lr.jsx)(id,{type:"primary",onClick:async()=>{a.current.validateFields().then((async t=>{var e;o(!1),a.current.resetFields();const r=Object.fromEntries(Object.entries(t).map((t=>{let[e,n]=t;return[e,""===n?null:n]}))),i=null===(e=v[0])||void 0===e?void 0:e.originFileObj;if(i){const t=await dw(i);n({...r,profile_picture:t})}else n({...r,profile_picture:null})})).catch((t=>{console.log("Validate Failed:",t)}))},children:"Submit"},"submit")],children:(0,lr.jsxs)(cv,{labelCol:{span:8},wrapperCol:{span:16},name:"nest-messages",style:{maxWidth:600},validateMessages:{required:"${label} is required!",types:{number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},ref:a,initialValues:s,children:[(0,lr.jsx)(cv.Item,{label:"Profile Picture",children:(0,lr.jsx)(Zx,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture-circle",fileList:v,onPreview:async t=>{t.url||t.preview||(t.preview=await dw(t.originFileObj)),f(t.url||t.preview),p(!0),y(t.name||t.url.substring(t.url.lastIndexOf("/")+1))},onChange:t=>{let{fileList:e}=t;x(e)},children:v.length>=1?null:w})}),(0,lr.jsx)(cv.Item,{name:"first_name",label:"First Name",rules:[{required:!0}],children:(0,lr.jsx)(ob,{})}),(0,lr.jsx)(cv.Item,{name:"last_name",label:"Last Name",rules:[{required:!0}],children:(0,lr.jsx)(ob,{})}),(0,lr.jsx)(cv.Item,{name:"address",label:"Address",children:(0,lr.jsx)(ob,{})}),(0,lr.jsx)(cv.Item,{name:"city",label:"City",children:(0,lr.jsx)(ob,{})}),(0,lr.jsx)(cv.Item,{name:"state_province",label:"State Province",children:(0,lr.jsx)(ob,{})}),(0,lr.jsx)(cv.Item,{name:"zip_postal_code",label:"Zip Code",rules:[{type:"number",min:0,max:99999}],children:(0,lr.jsx)(zb,{})}),(0,lr.jsx)(cv.Item,{name:"capacity",label:"Capacity",rules:[{type:"number",min:0,max:100}],children:(0,lr.jsx)(zb,{})}),(0,lr.jsx)(cv.Item,{name:"description",label:"Description",children:(0,lr.jsx)(ob,{})})]})})]})},gw={},mw="rc-table-internal-hook";function yw(t,e){var n=Vm("function"===typeof e?e:function(t){if(void 0===e)return t;if(!Array.isArray(e))return t[e];var n={};return e.forEach((function(e){n[e]=t[e]})),n}),r=m.useContext(null===t||void 0===t?void 0:t.Context),i=r||{},o=i.listeners,a=i.getValue,s=m.useRef();s.current=n(r?a():null===t||void 0===t?void 0:t.defaultValue);var l=Ri(m.useState({}),2)[1];return _d((function(){if(r)return o.add(t),function(){o.delete(t)};function t(t){var e=n(t);ri(s.current,e,!0)||l({})}}),[r]),s.current}var vw=m.createContext(0);function xw(){return m.useContext(vw)}function _w(t,e){var n=uc(t),r=function(e,r){var i=n?{ref:r}:{};return xw(),m.createElement(t,Ui({},e,i))};return n?m.memo(m.forwardRef(r),e):m.memo(r,e)}var bw=function(t){var e=m.createContext(void 0);return{Context:e,Provider:function(t){var n=t.value,r=t.children,i=m.useRef(n);i.current=n;var o=Ri(m.useState((function(){return{getValue:function(){return i.current},listeners:new Set}})),1)[0];return _d((function(){(0,Dr.unstable_batchedUpdates)((function(){o.listeners.forEach((function(t){t(n)}))}))}),[n]),m.createElement(e.Provider,{value:o},r)},defaultValue:t}}(),ww=bw;var Sw=m.memo((function(){var t=function(t,e){var n=m.useRef(0);n.current+=1;var r=m.useRef(t),i=[];Object.keys(t||{}).map((function(e){var n;(null===t||void 0===t?void 0:t[e])!==(null===(n=r.current)||void 0===n?void 0:n[e])&&i.push(e)})),r.current=t;var o=m.useRef([]);return i.length&&(o.current=i),m.useDebugValue(n.current),m.useDebugValue(o.current.join(", ")),e&&console.log("".concat(e,":"),n.current,o.current),n.current}();return m.createElement("h1",null,"Render Times: ",t)}));Sw.displayName="RenderBlock";var Cw=m.createContext({renderWithProps:!1}),Ew="RC_TABLE_KEY";function kw(t){var e=[],n={};return t.forEach((function(t){for(var r,i=t||{},o=i.key,a=i.dataIndex,s=o||(r=a,void 0===r||null===r?[]:Array.isArray(r)?r:[r]).join("-")||Ew;n[s];)s="".concat(s,"_next");n[s]=!0,e.push(s)})),e}function Mw(t){return null!==t&&void 0!==t}function Tw(t,e,n,r,i,o){var a=m.useContext(Cw),s=qr((function(){if(Mw(r))return[r];var o=null===e||void 0===e||""===e?[]:Array.isArray(e)?e:[e],s=Fa(t,o),l=s,c=void 0;if(i){var u=i(s,t,n);!function(t){return t&&"object"===Cr(t)&&!Array.isArray(t)&&!m.isValidElement(t)}(u)?l=u:(l=u.children,c=u.props,a.renderWithProps=!0)}return[l,c]}),[xw(),t,r,e,i,n],(function(t,e){if(o){var n=Ri(t,2)[1],r=Ri(e,2)[1];return o(r,n)}return!!a.renderWithProps||!ri(t,e,!0)}));return s}function Iw(t){var e,n,r,i,o,a,s,l;var c=t.component,u=t.children,h=t.ellipsis,p=t.scope,d=t.prefixCls,f=t.className,g=t.align,y=t.record,v=t.render,x=t.dataIndex,_=t.renderIndex,b=t.shouldCellUpdate,w=t.index,S=t.rowType,C=t.colSpan,E=t.rowSpan,k=t.fixLeft,M=t.fixRight,T=t.firstFixLeft,I=t.lastFixLeft,P=t.firstFixRight,O=t.lastFixRight,A=t.appendNode,D=t.additionalProps,R=void 0===D?{}:D,L=t.isSticky,N="".concat(d,"-cell"),F=yw(ww,["supportSticky","allColumnsFixedLeft"]),z=F.supportSticky,B=F.allColumnsFixedLeft,$=Ri(Tw(y,x,_,u,v,b),2),j=$[0],U=$[1],V={},H="number"===typeof k&&z,G="number"===typeof M&&z;H&&(V.position="sticky",V.left=k),G&&(V.position="sticky",V.right=M);var W=null!==(e=null!==(n=null!==(r=null===U||void 0===U?void 0:U.colSpan)&&void 0!==r?r:R.colSpan)&&void 0!==n?n:C)&&void 0!==e?e:1,X=null!==(i=null!==(o=null!==(a=null===U||void 0===U?void 0:U.rowSpan)&&void 0!==a?a:R.rowSpan)&&void 0!==o?o:E)&&void 0!==i?i:1,q=function(t,e){return yw(ww,(function(n){var r,i,o,a;return[(r=t,i=e||1,o=n.hoverStartRow,a=n.hoverEndRow,r<=a&&r+i-1>=o),n.onHover]}))}(w,X),Y=Ri(q,2),Z=Y[0],K=Y[1];if(0===W||0===X)return null;var J=null!==(s=R.title)&&void 0!==s?s:function(t){var e,n=t.ellipsis,r=t.rowType,i=t.children,o=!0===n?{showTitle:!0}:n;return o&&(o.showTitle||"header"===r)&&("string"===typeof i||"number"===typeof i?e=i.toString():m.isValidElement(i)&&"string"===typeof i.props.children&&(e=i.props.children)),e}({rowType:S,ellipsis:h,children:j}),Q=ic()(N,f,(Ir(l={},"".concat(N,"-fix-left"),H&&z),Ir(l,"".concat(N,"-fix-left-first"),T&&z),Ir(l,"".concat(N,"-fix-left-last"),I&&z),Ir(l,"".concat(N,"-fix-left-all"),I&&B&&z),Ir(l,"".concat(N,"-fix-right"),G&&z),Ir(l,"".concat(N,"-fix-right-first"),P&&z),Ir(l,"".concat(N,"-fix-right-last"),O&&z),Ir(l,"".concat(N,"-ellipsis"),h),Ir(l,"".concat(N,"-with-append"),A),Ir(l,"".concat(N,"-fix-sticky"),(H||G)&&L&&z),Ir(l,"".concat(N,"-row-hover"),!U&&Z),l),R.className,null===U||void 0===U?void 0:U.className),tt={};g&&(tt.textAlign=g);var et=Or(Or(Or(Or({},R.style),tt),V),null===U||void 0===U?void 0:U.style),nt=j;return"object"!==Cr(nt)||Array.isArray(nt)||m.isValidElement(nt)||(nt=null),h&&(I||P)&&(nt=m.createElement("span",{className:"".concat(N,"-content")},nt)),m.createElement(c,Ui({},U,R,{className:Q,style:et,title:J,scope:p,onMouseEnter:function(t){var e;y&&K(w,w+X-1),null===R||void 0===R||null===(e=R.onMouseEnter)||void 0===e||e.call(R,t)},onMouseLeave:function(t){var e;y&&K(-1,-1),null===R||void 0===R||null===(e=R.onMouseLeave)||void 0===e||e.call(R,t)},colSpan:1!==W?W:null,rowSpan:1!==X?X:null}),A,nt)}var Pw=m.memo(Iw);function Ow(t,e,n,r,i,o){var a,s,l=n[t]||{},c=n[e]||{};"left"===l.fixed?a=r.left["rtl"===i?e:t]:"right"===c.fixed&&(s=r.right["rtl"===i?t:e]);var u=!1,h=!1,p=!1,d=!1,f=n[e+1],g=n[t-1],m=!(null!==o&&void 0!==o&&o.children);if("rtl"===i){if(void 0!==a)d=!(g&&"left"===g.fixed)&&m;else if(void 0!==s){p=!(f&&"right"===f.fixed)&&m}}else if(void 0!==a){u=!(f&&"left"===f.fixed)&&m}else if(void 0!==s){h=!(g&&"right"===g.fixed)&&m}return{fixLeft:a,fixRight:s,lastFixLeft:u,firstFixRight:h,lastFixRight:p,firstFixLeft:d,isSticky:r.isSticky}}var Aw=m.createContext({});var Dw=["children"];function Rw(t){return t.children}Rw.Row=function(t){var e=t.children,n=Zo(t,Dw);return m.createElement("tr",n,e)},Rw.Cell=function(t){var e=t.className,n=t.index,r=t.children,i=t.colSpan,o=void 0===i?1:i,a=t.rowSpan,s=t.align,l=yw(ww,["prefixCls","direction"]),c=l.prefixCls,u=l.direction,h=m.useContext(Aw),p=h.scrollColumnIndex,d=h.stickyOffsets,f=h.flattenColumns,g=h.columns,y=n+o-1+1===p?o+1:o,v=Ow(n,n+y-1,f,d,u,null===g||void 0===g?void 0:g[n]);return m.createElement(Pw,Ui({className:e,index:n,component:"td",prefixCls:c,record:null,dataIndex:null,align:s,colSpan:y,rowSpan:a,render:function(){return r}},v))};var Lw=Rw;var Nw=_w((function(t){var e=t.children,n=t.stickyOffsets,r=t.flattenColumns,i=t.columns,o=yw(ww,"prefixCls"),a=r.length-1,s=r[a],l=m.useMemo((function(){return{stickyOffsets:n,flattenColumns:r,scrollColumnIndex:null!==s&&void 0!==s&&s.scrollbar?a:null,columns:i}}),[s,r,a,n,i]);return m.createElement(Aw.Provider,{value:l},m.createElement("tfoot",{className:"".concat(o,"-summary")},e))})),Fw=Lw,zw=function(t){if(gi()&&window.document.documentElement){var e=Array.isArray(t)?t:[t],n=window.document.documentElement;return e.some((function(t){return t in n.style}))}return!1},Bw=function(t,e){if(!zw(t))return!1;var n=document.createElement("div"),r=n.style[t];return n.style[t]=e,n.style[t]!==r};function $w(t,e,n,r,i,o){var a=[];a.push({record:t,indent:e,index:o});var s=i(t),l=null===r||void 0===r?void 0:r.has(s);if(t&&Array.isArray(t[n])&&l)for(var c=0;c<t[n].length;c+=1){var u=$w(t[n][c],e+1,n,r,i,c);a.push.apply(a,Sr(u))}return a}var jw=function(t){var e=t.prefixCls,n=t.children,r=t.component,i=t.cellComponent,o=t.className,a=t.expanded,s=t.colSpan,l=t.isEmpty,c=yw(ww,["scrollbarSize","fixHeader","fixColumn","componentWidth","horizonScroll"]),u=c.scrollbarSize,h=c.fixHeader,p=c.fixColumn,d=c.componentWidth,f=c.horizonScroll,g=n;return(l?f:p)&&(g=m.createElement("div",{style:{width:d-(h?u:0),position:"sticky",left:0,overflow:"hidden"},className:"".concat(e,"-expanded-row-fixed")},0!==d&&g)),m.createElement(r,{className:o,style:{display:a?null:"none"}},m.createElement(Pw,{component:i,prefixCls:e,colSpan:s},g))};function Uw(t){var e=t.className,n=t.style,r=t.record,i=t.index,o=t.renderIndex,a=t.rowKey,s=t.rowExpandable,l=t.expandedKeys,c=t.onRow,u=t.indent,h=void 0===u?0:u,p=t.rowComponent,d=t.cellComponent,f=t.scopeCellComponent,g=t.childrenColumnName,y=yw(ww,["prefixCls","fixedInfoList","flattenColumns","expandableType","expandRowByClick","onTriggerExpand","rowClassName","expandedRowClassName","indentSize","expandIcon","expandedRowRender","expandIconColumnIndex"]),v=y.prefixCls,x=y.fixedInfoList,_=y.flattenColumns,b=y.expandableType,w=y.expandRowByClick,S=y.onTriggerExpand,C=y.rowClassName,E=y.expandedRowClassName,k=y.indentSize,M=y.expandIcon,T=y.expandedRowRender,I=y.expandIconColumnIndex,P=Ri(m.useState(!1),2),O=P[0],A=P[1];var D=l&&l.has(a);m.useEffect((function(){D&&A(!0)}),[D]);var R="row"===b&&(!s||s(r)),L="nest"===b,N=g&&r&&r[g],F=R||L,z=m.useRef(S);z.current=S;var B,$=function(){z.current.apply(z,arguments)},j=null===c||void 0===c?void 0:c(r,i);"string"===typeof C?B=C:"function"===typeof C&&(B=C(r,i,h));var U,V=kw(_),H=m.createElement(p,Ui({},j,{"data-row-key":a,className:ic()(e,"".concat(v,"-row"),"".concat(v,"-row-level-").concat(h),B,j&&j.className),style:Or(Or({},n),j?j.style:null),onClick:function(t){var e;w&&F&&$(r,t);for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];null===j||void 0===j||null===(e=j.onClick)||void 0===e||e.call.apply(e,[j,t].concat(i))}}),_.map((function(t,e){var n,a,s=t.render,l=t.dataIndex,c=t.className,u=V[e],p=x[e];return e===(I||0)&&L&&(n=m.createElement(m.Fragment,null,m.createElement("span",{style:{paddingLeft:"".concat(k*h,"px")},className:"".concat(v,"-row-indent indent-level-").concat(h)}),M({prefixCls:v,expanded:D,expandable:N,record:r,onExpand:$}))),t.onCell&&(a=t.onCell(r,i)),m.createElement(Pw,Ui({className:c,ellipsis:t.ellipsis,align:t.align,scope:t.rowScope,component:t.rowScope?f:d,prefixCls:v,key:u,record:r,index:i,renderIndex:o,dataIndex:l,render:s,shouldCellUpdate:t.shouldCellUpdate,expanded:n&&D},p,{appendNode:n,additionalProps:a}))})));if(R&&(O||D)){var G=T(r,i,h+1,D),W=E&&E(r,i,h);U=m.createElement(jw,{expanded:D,className:ic()("".concat(v,"-expanded-row"),"".concat(v,"-expanded-row-level-").concat(h+1),W),prefixCls:v,component:p,cellComponent:d,colSpan:_.length,isEmpty:!1},G)}return m.createElement(m.Fragment,null,H,U)}Uw.displayName="BodyRow";var Vw=_w(Uw);function Hw(t){var e=t.columnKey,n=t.onColumnResize,r=m.useRef();return m.useEffect((function(){r.current&&n(e,r.current.offsetWidth)}),[]),m.createElement(Um,{data:e},m.createElement("td",{ref:r,style:{padding:0,border:0,height:0}},m.createElement("div",{style:{height:0,overflow:"hidden"}},"\xa0")))}function Gw(t){var e=t.prefixCls,n=t.columnsKey,r=t.onColumnResize;return m.createElement("tr",{"aria-hidden":"true",className:"".concat(e,"-measure-row"),style:{height:0,fontSize:0}},m.createElement(Um.Collection,{onBatchResize:function(t){t.forEach((function(t){var e=t.data,n=t.size;r(e,n.offsetWidth)}))}},n.map((function(t){return m.createElement(Hw,{key:t,columnKey:t,onColumnResize:r})}))))}function Ww(t){var e,n=t.data,r=t.getRowKey,i=t.measureColumnWidth,o=t.expandedKeys,a=t.onRow,s=t.rowExpandable,l=t.emptyNode,c=t.childrenColumnName,u=yw(ww,["prefixCls","getComponent","onColumnResize","flattenColumns"]),h=u.prefixCls,p=u.getComponent,d=u.onColumnResize,f=u.flattenColumns,g=function(t,e,n,r){var i=m.useMemo((function(){if(null!==n&&void 0!==n&&n.size){for(var i=[],o=0;o<(null===t||void 0===t?void 0:t.length);o+=1){var a=t[o];i.push.apply(i,Sr($w(a,0,e,n,r,o)))}return i}return null===t||void 0===t?void 0:t.map((function(t,e){return{record:t,indent:0,index:e}}))}),[t,e,n,r]);return i}(n,c,o,r),y=m.useRef({renderWithProps:!1}),v=p(["body","wrapper"],"tbody"),x=p(["body","row"],"tr"),_=p(["body","cell"],"td"),b=p(["body","cell"],"th");e=n.length?g.map((function(t,e){var n=t.record,i=t.indent,l=t.index,u=r(n,e);return m.createElement(Vw,{key:u,rowKey:u,record:n,index:e,renderIndex:l,rowComponent:x,cellComponent:_,scopeCellComponent:b,expandedKeys:o,onRow:a,getRowKey:r,rowExpandable:s,childrenColumnName:c,indent:i})})):m.createElement(jw,{expanded:!0,className:"".concat(h,"-placeholder"),prefixCls:h,component:x,cellComponent:_,colSpan:f.length,isEmpty:!0},l);var w=kw(f);return m.createElement(Cw.Provider,{value:y.current},m.createElement(v,{className:"".concat(h,"-tbody")},i&&m.createElement(Gw,{prefixCls:h,columnsKey:w,onColumnResize:d}),e))}Ww.displayName="Body";var Xw=_w(Ww),qw=["expandable"],Yw="RC_TABLE_INTERNAL_COL_DEFINE";var Zw=["columnType"];var Kw=function(t){for(var e=t.colWidths,n=t.columns,r=[],i=!1,o=(t.columCount||n.length)-1;o>=0;o-=1){var a=e[o],s=n&&n[o],l=s&&s[Yw];if(a||l||i){var c=l||{},u=(c.columnType,Zo(c,Zw));r.unshift(m.createElement("col",Ui({key:o,style:{width:a}},u))),i=!0}}return m.createElement("colgroup",null,r)},Jw=["className","noData","columns","flattenColumns","colWidths","columCount","stickyOffsets","direction","fixHeader","stickyTopOffset","stickyBottomOffset","stickyClassName","onScroll","maxContentScroll","children"];var Qw=m.forwardRef((function(t,e){var n=t.className,r=t.noData,i=t.columns,o=t.flattenColumns,a=t.colWidths,s=t.columCount,l=t.stickyOffsets,c=t.direction,u=t.fixHeader,h=t.stickyTopOffset,p=t.stickyBottomOffset,d=t.stickyClassName,f=t.onScroll,g=t.maxContentScroll,y=t.children,v=Zo(t,Jw),x=yw(ww,["prefixCls","scrollbarSize","isSticky"]),_=x.prefixCls,b=x.scrollbarSize,w=x.isSticky,S=w&&!u?0:b,C=m.useRef(null),E=m.useCallback((function(t){sc(e,t),sc(C,t)}),[]);m.useEffect((function(){var t;function e(t){var e=t,n=e.currentTarget,r=e.deltaX;r&&(f({currentTarget:n,scrollLeft:n.scrollLeft+r}),t.preventDefault())}return null===(t=C.current)||void 0===t||t.addEventListener("wheel",e),function(){var t;null===(t=C.current)||void 0===t||t.removeEventListener("wheel",e)}}),[]);var k=m.useMemo((function(){return o.every((function(t){return t.width>=0}))}),[o]),M=o[o.length-1],T={fixed:M?M.fixed:null,scrollbar:!0,onHeaderCell:function(){return{className:"".concat(_,"-cell-scrollbar")}}},I=(0,m.useMemo)((function(){return S?[].concat(Sr(i),[T]):i}),[S,i]),P=(0,m.useMemo)((function(){return S?[].concat(Sr(o),[T]):o}),[S,o]),O=(0,m.useMemo)((function(){var t=l.right,e=l.left;return Or(Or({},l),{},{left:"rtl"===c?[].concat(Sr(e.map((function(t){return t+S}))),[0]):e,right:"rtl"===c?t:[].concat(Sr(t.map((function(t){return t+S}))),[0]),isSticky:w})}),[S,l,w]),A=function(t,e){return(0,m.useMemo)((function(){for(var n=[],r=0;r<e;r+=1){var i=t[r];if(void 0===i)return null;n[r]=i}return n}),[t.join("_"),e])}(a,s);return m.createElement("div",{style:Or({overflow:"hidden"},w?{top:h,bottom:p}:{}),ref:E,className:ic()(n,Ir({},d,!!d))},m.createElement("table",{style:{tableLayout:"fixed",visibility:r||A?null:"hidden"}},(!r||!g||k)&&m.createElement(Kw,{colWidths:A?[].concat(Sr(A),[S]):[],columCount:s+1,columns:P}),y(Or(Or({},v),{},{stickyOffsets:O,columns:I,flattenColumns:P}))))}));Qw.displayName="FixedHolder";var tS=m.memo(Qw);function eS(t){var e,n=t.cells,r=t.stickyOffsets,i=t.flattenColumns,o=t.rowComponent,a=t.cellComponent,s=t.tdCellComponent,l=t.onHeaderRow,c=t.index,u=yw(ww,["prefixCls","direction"]),h=u.prefixCls,p=u.direction;l&&(e=l(n.map((function(t){return t.column})),c));var d=kw(n.map((function(t){return t.column})));return m.createElement(o,e,n.map((function(t,e){var n,o=t.column,l=Ow(t.colStart,t.colEnd,i,r,p,o);return o&&o.onHeaderCell&&(n=t.column.onHeaderCell(o)),m.createElement(Pw,Ui({},t,{scope:o.title?t.colSpan>1?"colgroup":"col":null,ellipsis:o.ellipsis,align:o.align,component:o.title?a:s,prefixCls:h,key:d[e]},l,{additionalProps:n,rowType:"header"}))})))}eS.displayName="HeaderRow";var nS=eS;var rS=_w((function(t){var e=t.stickyOffsets,n=t.columns,r=t.flattenColumns,i=t.onHeaderRow,o=yw(ww,["prefixCls","getComponent"]),a=o.prefixCls,s=o.getComponent,l=m.useMemo((function(){return function(t){var e=[];!function t(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e[i]=e[i]||[];var o=r,a=n.filter(Boolean).map((function(n){var r={key:n.key,className:n.className||"",children:n.title,column:n,colStart:o},a=1,s=n.children;return s&&s.length>0&&(a=t(s,o,i+1).reduce((function(t,e){return t+e}),0),r.hasSubColumns=!0),"colSpan"in n&&(a=n.colSpan),"rowSpan"in n&&(r.rowSpan=n.rowSpan),r.colSpan=a,r.colEnd=r.colStart+a-1,e[i].push(r),o+=a,a}));return a}(t,0);for(var n=e.length,r=function(t){e[t].forEach((function(e){"rowSpan"in e||e.hasSubColumns||(e.rowSpan=n-t)}))},i=0;i<n;i+=1)r(i);return e}(n)}),[n]),c=s(["header","wrapper"],"thead"),u=s(["header","row"],"tr"),h=s(["header","cell"],"th"),p=s(["header","cell"],"td");return m.createElement(c,{className:"".concat(a,"-thead")},l.map((function(t,n){return m.createElement(nS,{key:n,flattenColumns:r,cells:t,stickyOffsets:e,rowComponent:u,cellComponent:h,tdCellComponent:p,onHeaderRow:i,index:n})})))})),iS=["children"],oS=["fixed"];function aS(t){return ra(t).filter((function(t){return m.isValidElement(t)})).map((function(t){var e=t.key,n=t.props,r=n.children,i=Or({key:e},Zo(n,iS));return r&&(i.children=aS(r)),i}))}function sS(t){return t.filter((function(t){return t&&"object"===Cr(t)})).reduce((function(t,e){var n=e.fixed,r=!0===n?"left":n,i=e.children;return i&&i.length>0?[].concat(Sr(t),Sr(sS(i).map((function(t){return Or({fixed:r},t)})))):[].concat(Sr(t),[Or(Or({},e),{},{fixed:r})])}),[])}var lS=function(t,e){var n=t.prefixCls,r=t.columns,i=t.children,o=t.expandable,a=t.expandedKeys,s=t.columnTitle,l=t.getRowKey,c=t.onTriggerExpand,u=t.expandIcon,h=t.rowExpandable,p=t.expandIconColumnIndex,d=t.direction,f=t.expandRowByClick,g=t.columnWidth,y=t.fixed,v=m.useMemo((function(){return r||aS(i)}),[r,i]),x=m.useMemo((function(){if(o){var t,e=v.slice();if(!e.includes(gw)){var r=p||0;r>=0&&e.splice(r,0,gw)}0;var i=e.indexOf(gw);e=e.filter((function(t,e){return t!==gw||e===i}));var d,x=v[i];d="left"!==y&&!y||p?"right"!==y&&!y||p!==v.length?x?x.fixed:null:"right":"left";var _=(Ir(t={},Yw,{className:"".concat(n,"-expand-icon-col"),columnType:"EXPAND_COLUMN"}),Ir(t,"title",s),Ir(t,"fixed",d),Ir(t,"className","".concat(n,"-row-expand-icon-cell")),Ir(t,"width",g),Ir(t,"render",(function(t,e,r){var i=l(e,r),o=a.has(i),s=!h||h(e),p=u({prefixCls:n,expanded:o,expandable:s,record:e,onExpand:c});return f?m.createElement("span",{onClick:function(t){return t.stopPropagation()}},p):p})),t);return e.map((function(t){return t===gw?_:t}))}return v.filter((function(t){return t!==gw}))}),[o,v,l,a,u,d]),_=m.useMemo((function(){var t=x;return e&&(t=e(t)),t.length||(t=[{render:function(){return null}}]),t}),[e,x,d]),b=m.useMemo((function(){return"rtl"===d?function(t){return t.map((function(t){var e=t.fixed,n=e;return"left"===e?n="right":"right"===e&&(n="left"),Or({fixed:n},Zo(t,oS))}))}(sS(_)):sS(_)}),[_,d]);return[_,b]};function cS(t){var e,n=t.prefixCls,r=t.record,i=t.onExpand,o=t.expanded,a=t.expandable,s="".concat(n,"-row-expand-icon");if(!a)return m.createElement("span",{className:ic()(s,"".concat(n,"-row-spaced"))});return m.createElement("span",{className:ic()(s,(e={},Ir(e,"".concat(n,"-row-expanded"),o),Ir(e,"".concat(n,"-row-collapsed"),!o),e)),onClick:function(t){i(r,t),t.stopPropagation()}})}function uS(t,e,n){var r=function(t){var e,n=t.expandable,r=Zo(t,qw);return!1===(e="expandable"in t?Or(Or({},r),n):r).showExpandColumn&&(e.expandIconColumnIndex=-1),e}(t),i=r.expandIcon,o=r.expandedRowKeys,a=r.defaultExpandedRowKeys,s=r.defaultExpandAllRows,l=r.expandedRowRender,c=r.onExpand,u=r.onExpandedRowsChange,h=i||cS,p=r.childrenColumnName||"children",d=m.useMemo((function(){return l?"row":!!(t.expandable&&t.internalHooks===mw&&t.expandable.__PARENT_RENDER_ICON__||e.some((function(t){return t&&"object"===Cr(t)&&t[p]})))&&"nest"}),[!!l,e]),f=m.useState((function(){return a||(s?function(t,e,n){var r=[];return function t(i){(i||[]).forEach((function(i,o){r.push(e(i,o)),t(i[n])}))}(t),r}(e,n,p):[])})),g=Ri(f,2),y=g[0],v=g[1],x=m.useMemo((function(){return new Set(o||y||[])}),[o,y]),_=m.useCallback((function(t){var r,i=n(t,e.indexOf(t)),o=x.has(i);o?(x.delete(i),r=Sr(x)):r=[].concat(Sr(x),[i]),v(r),c&&c(!o,t),u&&u(r)}),[n,x,e,c,u]);return[r,d,x,h,p,_]}function hS(t){var e=(0,m.useRef)(t),n=Ri((0,m.useState)({}),2)[1],r=(0,m.useRef)(null),i=(0,m.useRef)([]);return(0,m.useEffect)((function(){return function(){r.current=null}}),[]),[e.current,function(t){i.current.push(t);var o=Promise.resolve();r.current=o,o.then((function(){if(r.current===o){var t=i.current,a=e.current;i.current=[],t.forEach((function(t){e.current=t(e.current)})),r.current=null,a!==e.current&&n({})}}))}]}var pS=gi()?window:null;var dS=function(t,e,n){var r=(0,m.useMemo)((function(){for(var r=[],i=[],o=0,a=0,s=0;s<e;s+=1)if("rtl"===n){i[s]=a,a+=t[s]||0;var l=e-s-1;r[l]=o,o+=t[l]||0}else{r[s]=o,o+=t[s]||0;var c=e-s-1;i[c]=a,a+=t[c]||0}return{left:r,right:i}}),[t,e,n]);return r};var fS=function(t){var e=t.className,n=t.children;return m.createElement("div",{className:e},n)};function gS(t,e,n,r){var i=Dr.unstable_batchedUpdates?function(t){Dr.unstable_batchedUpdates(n,t)}:n;return null!==t&&void 0!==t&&t.addEventListener&&t.addEventListener(e,i,r),{remove:function(){null!==t&&void 0!==t&&t.removeEventListener&&t.removeEventListener(e,i,r)}}}function mS(t){var e=t.getBoundingClientRect(),n=document.documentElement;return{left:e.left+(window.pageXOffset||n.scrollLeft)-(n.clientLeft||document.body.clientLeft||0),top:e.top+(window.pageYOffset||n.scrollTop)-(n.clientTop||document.body.clientTop||0)}}var yS=function(t,e){var n,r,i=t.scrollBodyRef,o=t.onScroll,a=t.offsetScroll,s=t.container,l=yw(ww,"prefixCls"),c=(null===(n=i.current)||void 0===n?void 0:n.scrollWidth)||0,u=(null===(r=i.current)||void 0===r?void 0:r.clientWidth)||0,h=c&&u*(u/c),p=m.useRef(),d=Ri(hS({scrollLeft:0,isHiddenScrollBar:!1}),2),f=d[0],g=d[1],y=m.useRef({delta:0,x:0}),v=Ri(m.useState(!1),2),x=v[0],_=v[1],b=function(){_(!1)},w=function(t){var e,n=(t||(null===(e=window)||void 0===e?void 0:e.event)).buttons;if(x&&0!==n){var r=y.current.x+t.pageX-y.current.x-y.current.delta;r<=0&&(r=0),r+h>=u&&(r=u-h),o({scrollLeft:r/u*(c+2)}),y.current.x=t.pageX}else x&&_(!1)},S=function(){if(i.current){var t=mS(i.current).top,e=t+i.current.offsetHeight,n=s===window?document.documentElement.scrollTop+window.innerHeight:mS(s).top+s.clientHeight;e-wd()<=n||t>=n-a?g((function(t){return Or(Or({},t),{},{isHiddenScrollBar:!0})})):g((function(t){return Or(Or({},t),{},{isHiddenScrollBar:!1})}))}},C=function(t){g((function(e){return Or(Or({},e),{},{scrollLeft:t/c*u||0})}))};return m.useImperativeHandle(e,(function(){return{setScrollLeft:C}})),m.useEffect((function(){var t=gS(document.body,"mouseup",b,!1),e=gS(document.body,"mousemove",w,!1);return S(),function(){t.remove(),e.remove()}}),[h,x]),m.useEffect((function(){var t=gS(s,"scroll",S,!1),e=gS(window,"resize",S,!1);return function(){t.remove(),e.remove()}}),[s]),m.useEffect((function(){f.isHiddenScrollBar||g((function(t){var e=i.current;return e?Or(Or({},t),{},{scrollLeft:e.scrollLeft/e.scrollWidth*e.clientWidth}):t}))}),[f.isHiddenScrollBar]),c<=u||!h||f.isHiddenScrollBar?null:m.createElement("div",{style:{height:wd(),width:u,bottom:a},className:"".concat(l,"-sticky-scroll")},m.createElement("div",{onMouseDown:function(t){t.persist(),y.current.delta=t.pageX-f.scrollLeft,y.current.x=0,_(!0),t.preventDefault()},ref:p,className:ic()("".concat(l,"-sticky-scroll-bar"),Ir({},"".concat(l,"-sticky-scroll-bar-active"),x)),style:{width:"".concat(h,"px"),transform:"translate3d(".concat(f.scrollLeft,"px, 0, 0)")}}))},vS=m.forwardRef(yS);var xS=function(t){return null};var _S=function(t){return null},bS=[],wS={};function SS(){return"No Data"}function CS(t){var e,n=Or({rowKey:"key",prefixCls:"rc-table",emptyText:SS},t),r=n.prefixCls,i=n.className,o=n.rowClassName,a=n.style,s=n.data,l=n.rowKey,c=n.scroll,u=n.tableLayout,h=n.direction,p=n.title,d=n.footer,f=n.summary,g=n.caption,y=n.id,v=n.showHeader,x=n.components,_=n.emptyText,b=n.onRow,w=n.onHeaderRow,S=n.internalHooks,C=n.transformColumns,E=n.internalRefs,k=n.sticky,M=s||bS,T=!!M.length;var I,P,O,A=m.useCallback((function(t,e){return Fa(x,t)||e}),[x]),D=m.useMemo((function(){return"function"===typeof l?l:function(t){return t&&t[l]}}),[l]),R=function(){var t=Ri(m.useState(-1),2),e=t[0],n=t[1],r=Ri(m.useState(-1),2),i=r[0],o=r[1];return[e,i,m.useCallback((function(t,e){n(t),o(e)}),[])]}(),L=Ri(R,3),N=L[0],F=L[1],z=L[2],B=Ri(uS(n,M,D),6),$=B[0],j=B[1],U=B[2],V=B[3],H=B[4],G=B[5],W=Ri(m.useState(0),2),X=W[0],q=W[1],Y=Ri(lS(Or(Or(Or({},n),$),{},{expandable:!!$.expandedRowRender,columnTitle:$.columnTitle,expandedKeys:U,getRowKey:D,onTriggerExpand:G,expandIcon:V,expandIconColumnIndex:$.expandIconColumnIndex,direction:h}),S===mw?C:null),2),Z=Y[0],K=Y[1],J=m.useMemo((function(){return{columns:Z,flattenColumns:K}}),[Z,K]),Q=m.useRef(),tt=m.useRef(),et=m.useRef(),nt=m.useRef(),rt=m.useRef(),it=Ri(m.useState(!1),2),ot=it[0],at=it[1],st=Ri(m.useState(!1),2),lt=st[0],ct=st[1],ut=Ri(hS(new Map),2),ht=ut[0],pt=ut[1],dt=kw(K).map((function(t){return ht.get(t)})),ft=m.useMemo((function(){return dt}),[dt.join("_")]),gt=dS(ft,K.length,h),mt=c&&Mw(c.y),yt=c&&Mw(c.x)||Boolean($.fixed),vt=yt&&K.some((function(t){return t.fixed})),xt=m.useRef(),_t=function(t,e){var n="object"===Cr(t)?t:{},r=n.offsetHeader,i=void 0===r?0:r,o=n.offsetSummary,a=void 0===o?0:o,s=n.offsetScroll,l=void 0===s?0:s,c=n.getContainer,u=(void 0===c?function(){return pS}:c)()||pS;return m.useMemo((function(){var n=!!t;return{isSticky:n,stickyClassName:n?"".concat(e,"-sticky-holder"):"",offsetHeader:i,offsetSummary:a,offsetScroll:l,container:u}}),[l,i,a,e,u])}(k,r),bt=_t.isSticky,wt=_t.offsetHeader,St=_t.offsetSummary,Ct=_t.offsetScroll,Et=_t.stickyClassName,kt=_t.container,Mt=m.useMemo((function(){return null===f||void 0===f?void 0:f(M)}),[f,M]),Tt=(mt||bt)&&m.isValidElement(Mt)&&Mt.type===Lw&&Mt.props.fixed;mt&&(P={overflowY:"scroll",maxHeight:c.y}),yt&&(I={overflowX:"auto"},mt||(P={overflowY:"hidden"}),O={width:!0===(null===c||void 0===c?void 0:c.x)?"auto":null===c||void 0===c?void 0:c.x,minWidth:"100%"});var It=m.useCallback((function(t,e){Wh(Q.current)&&pt((function(n){if(n.get(t)!==e){var r=new Map(n);return r.set(t,e),r}return n}))}),[]),Pt=Ri(function(t){var e=(0,m.useRef)(t||null),n=(0,m.useRef)();function r(){window.clearTimeout(n.current)}return(0,m.useEffect)((function(){return r}),[]),[function(t){e.current=t,r(),n.current=window.setTimeout((function(){e.current=null,n.current=void 0}),100)},function(){return e.current}]}(null),2),Ot=Pt[0],At=Pt[1];function Dt(t,e){e&&("function"===typeof e?e(t):e.scrollLeft!==t&&(e.scrollLeft=t,e.scrollLeft!==t&&setTimeout((function(){e.scrollLeft=t}),0)))}var Rt=Vm((function(t){var e,n=t.currentTarget,r=t.scrollLeft,i="rtl"===h,o="number"===typeof r?r:n.scrollLeft,a=n||wS;At()&&At()!==a||(Ot(a),Dt(o,tt.current),Dt(o,et.current),Dt(o,rt.current),Dt(o,null===(e=xt.current)||void 0===e?void 0:e.setScrollLeft));if(n){var s=n.scrollWidth,l=n.clientWidth;if(s===l)return at(!1),void ct(!1);i?(at(-o<s-l),ct(-o>0)):(at(o>0),ct(o<s-l))}})),Lt=function(){yt&&et.current?Rt({currentTarget:et.current}):(at(!1),ct(!1))},Nt=m.useRef(!1);m.useEffect((function(){Nt.current&&Lt()}),[yt,s,Z.length]),m.useEffect((function(){Nt.current=!0}),[]);var Ft=Ri(m.useState(0),2),zt=Ft[0],Bt=Ft[1],$t=Ri(m.useState(!0),2),jt=$t[0],Ut=$t[1];m.useEffect((function(){var t,e;et.current instanceof Element?Bt(Cd(et.current).width):Bt(Cd(nt.current).width),Ut((t="position",e="sticky",Array.isArray(t)||void 0===e?zw(t):Bw(t,e)))}),[]),m.useEffect((function(){S===mw&&E&&(E.body.current=et.current)}));var Vt,Ht=m.useCallback((function(t){return m.createElement(m.Fragment,null,m.createElement(rS,t),"top"===Tt&&m.createElement(Nw,t,Mt))}),[Tt,Mt]),Gt=m.useCallback((function(t){return m.createElement(Nw,t,Mt)}),[Mt]),Wt=A(["table"],"table"),Xt=m.useMemo((function(){return u||(vt?"max-content"===(null===c||void 0===c?void 0:c.x)?"auto":"fixed":mt||bt||K.some((function(t){return t.ellipsis}))?"fixed":"auto")}),[mt,vt,K,u,bt]),qt={colWidths:ft,columCount:K.length,stickyOffsets:gt,onHeaderRow:w,fixHeader:mt,scroll:c},Yt=m.useMemo((function(){return T?null:"function"===typeof _?_():_}),[T,_]),Zt=m.createElement(Xw,{data:M,measureColumnWidth:mt||yt||bt,expandedKeys:U,rowExpandable:$.rowExpandable,getRowKey:D,onRow:b,emptyNode:Yt,childrenColumnName:H}),Kt=m.createElement(Kw,{colWidths:K.map((function(t){return t.width})),columns:K}),Jt=null!==g&&void 0!==g?m.createElement("caption",{className:"".concat(r,"-caption")},g):void 0,Qt=A(["body"]);var te=zd(n,{data:!0}),ee=zd(n,{aria:!0});if(mt||bt){var ne;"function"===typeof Qt?(ne=Qt(M,{scrollbarSize:zt,ref:et,onScroll:Rt}),qt.colWidths=K.map((function(t,e){var n=t.width,r=e===Z.length-1?n-zt:n;return"number"!==typeof r||Number.isNaN(r)?0:r}))):ne=m.createElement("div",{style:Or(Or({},I),P),onScroll:Rt,ref:et,className:ic()("".concat(r,"-body"))},m.createElement(Wt,Ui({style:Or(Or({},O),{},{tableLayout:Xt})},ee),Jt,Kt,Zt,!Tt&&Mt&&m.createElement(Nw,{stickyOffsets:gt,flattenColumns:K,columns:Z},Mt)));var re=Or(Or(Or({noData:!M.length,maxContentScroll:yt&&"max-content"===c.x},qt),J),{},{direction:h,stickyClassName:Et,onScroll:Rt});Vt=m.createElement(m.Fragment,null,!1!==v&&m.createElement(tS,Ui({},re,{stickyTopOffset:wt,className:"".concat(r,"-header"),ref:tt}),Ht),ne,Tt&&"top"!==Tt&&m.createElement(tS,Ui({},re,{stickyBottomOffset:St,className:"".concat(r,"-summary"),ref:rt}),Gt),bt&&m.createElement(vS,{ref:xt,offsetScroll:Ct,scrollBodyRef:et,onScroll:Rt,container:kt}))}else Vt=m.createElement("div",{style:Or(Or({},I),P),className:ic()("".concat(r,"-content")),onScroll:Rt,ref:et},m.createElement(Wt,Ui({style:Or(Or({},O),{},{tableLayout:Xt})},ee),Jt,Kt,!1!==v&&m.createElement(rS,Ui({},qt,J)),Zt,Mt&&m.createElement(Nw,{stickyOffsets:gt,flattenColumns:K,columns:Z},Mt)));var ie=m.createElement("div",Ui({className:ic()(r,i,(e={},Ir(e,"".concat(r,"-rtl"),"rtl"===h),Ir(e,"".concat(r,"-ping-left"),ot),Ir(e,"".concat(r,"-ping-right"),lt),Ir(e,"".concat(r,"-layout-fixed"),"fixed"===u),Ir(e,"".concat(r,"-fixed-header"),mt),Ir(e,"".concat(r,"-fixed-column"),vt),Ir(e,"".concat(r,"-scroll-horizontal"),yt),Ir(e,"".concat(r,"-has-fix-left"),K[0]&&K[0].fixed),Ir(e,"".concat(r,"-has-fix-right"),K[K.length-1]&&"right"===K[K.length-1].fixed),e)),style:a,id:y,ref:Q},te),p&&m.createElement(fS,{className:"".concat(r,"-title")},p(M)),m.createElement("div",{ref:nt,className:"".concat(r,"-container")},Vt),d&&m.createElement(fS,{className:"".concat(r,"-footer")},d(M)));yt&&(ie=m.createElement(Um,{onResize:function(t){var e=t.width;e!==X&&(Lt(),q(Q.current?Q.current.offsetWidth:e))}},ie));var oe=function(t,e,n,r){var i=t.map((function(i,o){return Ow(o,o,t,e,n,null===r||void 0===r?void 0:r[o])}));return qr((function(){return i}),[i],(function(t,e){return!ri(t,e)}))}(K,gt,h,Z),ae=m.useMemo((function(){return{prefixCls:r,getComponent:A,scrollbarSize:zt,direction:h,fixedInfoList:oe,isSticky:bt,supportSticky:jt,componentWidth:X,fixHeader:mt,fixColumn:vt,horizonScroll:yt,tableLayout:Xt,rowClassName:o,expandedRowClassName:$.expandedRowClassName,expandIcon:V,expandableType:j,expandRowByClick:$.expandRowByClick,expandedRowRender:$.expandedRowRender,onTriggerExpand:G,expandIconColumnIndex:$.expandIconColumnIndex,indentSize:$.indentSize,allColumnsFixedLeft:K.every((function(t){return"left"===t.fixed})),columns:Z,flattenColumns:K,onColumnResize:It,hoverStartRow:N,hoverEndRow:F,onHover:z}}),[r,A,zt,h,oe,bt,jt,X,mt,vt,yt,Xt,o,$.expandedRowClassName,V,j,$.expandRowByClick,$.expandedRowRender,G,$.expandIconColumnIndex,$.indentSize,Z,K,It,N,F,z]);return m.createElement(ww.Provider,{value:ae},ie)}function ES(t){return function(t,e){var n=uc(t),r=function(r,i){var o=n?{ref:i}:{},a=m.useRef(0),s=m.useRef(r);return e&&!e(s.current,r)||(a.current+=1),s.current=r,m.createElement(vw.Provider,{value:a.current},m.createElement(t,Ui({},r,o)))};return n?m.forwardRef(r):r}(CS,t)}var kS=ES();kS.EXPAND_COLUMN=gw,kS.Column=xS,kS.ColumnGroup=_S,kS.Summary=Fw;var MS=function(t){return null};var TS=function(t){return null};function IS(t){return null!==t&&void 0!==t&&t===t.window}function PS(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{getContainer:n=(()=>window),callback:r,duration:i=450}=e,o=n(),a=function(t,e){var n,r;if("undefined"===typeof window)return 0;const i=e?"scrollTop":"scrollLeft";let o=0;return IS(t)?o=t[e?"pageYOffset":"pageXOffset"]:t instanceof Document?o=t.documentElement[i]:(t instanceof HTMLElement||t)&&(o=t[i]),t&&!IS(t)&&"number"!==typeof o&&(o=null===(r=(null!==(n=t.ownerDocument)&&void 0!==n?n:t).documentElement)||void 0===r?void 0:r[i]),o}(o,!0),s=Date.now(),l=()=>{const e=Date.now()-s,n=function(t,e,n,r){const i=n-e;return(t/=r/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e}(e>i?i:e,a,t,i);IS(o)?o.scrollTo(window.pageXOffset,n):o instanceof Document||"HTMLDocument"===o.constructor.name?o.documentElement.scrollTop=n:o.scrollTop=n,e<i?Xc(l):"function"===typeof r&&r()};Xc(l)}var OS=()=>{const[,t]=Vl();let e={};return new Ml(t.colorBgBase).toHsl().l<.5&&(e={opacity:.65}),m.createElement("svg",{style:e,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},m.createElement("g",{fill:"none",fillRule:"evenodd"},m.createElement("g",{transform:"translate(24 31.67)"},m.createElement("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),m.createElement("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),m.createElement("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),m.createElement("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),m.createElement("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})),m.createElement("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),m.createElement("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},m.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),m.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))};var AS=()=>{const[,t]=Vl(),{colorFill:e,colorFillTertiary:n,colorFillQuaternary:r,colorBgContainer:i}=t,{borderColor:o,shadowColor:a,contentColor:s}=(0,m.useMemo)((()=>({borderColor:new Ml(e).onBackground(i).toHexShortString(),shadowColor:new Ml(n).onBackground(i).toHexShortString(),contentColor:new Ml(r).onBackground(i).toHexShortString()})),[e,n,r,i]);return m.createElement("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},m.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},m.createElement("ellipse",{fill:a,cx:"32",cy:"33",rx:"32",ry:"7"}),m.createElement("g",{fillRule:"nonzero",stroke:o},m.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),m.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:s}))))};const DS=t=>{const{componentCls:e,margin:n,marginXS:r,marginXL:i,fontSize:o,lineHeight:a}=t;return{[e]:{marginInline:r,fontSize:o,lineHeight:a,textAlign:"center",[`${e}-image`]:{height:t.emptyImgHeight,marginBottom:r,opacity:t.opacityImage,img:{height:"100%"},svg:{maxWidth:"100%",height:"100%",margin:"auto"}},[`${e}-description`]:{color:t.colorText},[`${e}-footer`]:{marginTop:n},"&-normal":{marginBlock:i,color:t.colorTextDisabled,[`${e}-description`]:{color:t.colorTextDisabled},[`${e}-image`]:{height:t.emptyImgHeightMD}},"&-small":{marginBlock:r,color:t.colorTextDisabled,[`${e}-image`]:{height:t.emptyImgHeightSM}}}}};var RS=bh("Empty",(t=>{const{componentCls:e,controlHeightLG:n}=t,r=vh(t,{emptyImgCls:`${e}-img`,emptyImgHeight:2.5*n,emptyImgHeightMD:n,emptyImgHeightSM:.875*n});return[DS(r)]})),LS=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const NS=m.createElement(OS,null),FS=m.createElement(AS,null),zS=t=>{var{className:e,rootClassName:n,prefixCls:r,image:i=NS,description:o,children:a,imageStyle:s}=t,l=LS(t,["className","rootClassName","prefixCls","image","description","children","imageStyle"]);const{getPrefixCls:c,direction:u}=m.useContext(Gl),h=c("empty",r),[p,d]=RS(h),[f]=od("Empty"),g="undefined"!==typeof o?o:null===f||void 0===f?void 0:f.description,y="string"===typeof g?g:"empty";let v=null;return v="string"===typeof i?m.createElement("img",{alt:y,src:i}):i,p(m.createElement("div",Object.assign({className:ic()(d,h,{[`${h}-normal`]:i===FS,[`${h}-rtl`]:"rtl"===u},e,n)},l),m.createElement("div",{className:`${h}-image`,style:s},v),g&&m.createElement("div",{className:`${h}-description`},g),a&&m.createElement("div",{className:`${h}-footer`},a)))};zS.PRESENTED_IMAGE_DEFAULT=NS,zS.PRESENTED_IMAGE_SIMPLE=FS;var BS=zS;var $S=t=>{const{componentName:e}=t,{getPrefixCls:n}=(0,m.useContext)(Gl),r=n("empty");switch(e){case"Table":case"List":return m.createElement(BS,{image:BS.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return m.createElement(BS,{image:BS.PRESENTED_IMAGE_SIMPLE,className:`${r}-small`});default:return m.createElement(BS,null)}};var jS=function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=(0,m.useRef)({}),n=Av(),r=Xg();return(0,m.useEffect)((()=>{const i=r.subscribe((r=>{e.current=r,t&&n()}));return()=>r.unsubscribe(i)}),[]),e.current},US={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}}]},name:"double-left",theme:"outlined"},VS=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:US}))};var HS=m.forwardRef(VS),GS={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"},WS=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:GS}))};var XS=m.forwardRef(WS),qS={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},YS=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:qS}))};var ZS=m.forwardRef(YS),KS={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},JS=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:KS}))};var QS=m.forwardRef(JS),tC={ZERO:48,NINE:57,NUMPAD_ZERO:96,NUMPAD_NINE:105,BACKSPACE:8,DELETE:46,ENTER:13,ARROW_UP:38,ARROW_DOWN:40},eC=function(t){Qo(n,t);var e=ea(n);function n(){var t;ii(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).state={goInputText:""},t.getValidValue=function(){var e=t.state.goInputText;return!e||Number.isNaN(e)?void 0:Number(e)},t.buildOptionText=function(e){return"".concat(e," ").concat(t.props.locale.items_per_page)},t.changeSize=function(e){t.props.changeSize(Number(e))},t.handleChange=function(e){t.setState({goInputText:e.target.value})},t.handleBlur=function(e){var n=t.props,r=n.goButton,i=n.quickGo,o=n.rootPrefixCls,a=t.state.goInputText;r||""===a||(t.setState({goInputText:""}),e.relatedTarget&&(e.relatedTarget.className.indexOf("".concat(o,"-item-link"))>=0||e.relatedTarget.className.indexOf("".concat(o,"-item"))>=0)||i(t.getValidValue()))},t.go=function(e){""!==t.state.goInputText&&(e.keyCode!==tC.ENTER&&"click"!==e.type||(t.setState({goInputText:""}),t.props.quickGo(t.getValidValue())))},t}return ai(n,[{key:"getPageSizeOptions",value:function(){var t=this.props,e=t.pageSize,n=t.pageSizeOptions;return n.some((function(t){return t.toString()===e.toString()}))?n:n.concat([e.toString()]).sort((function(t,e){return(Number.isNaN(Number(t))?0:Number(t))-(Number.isNaN(Number(e))?0:Number(e))}))}},{key:"render",value:function(){var t=this,e=this.props,n=e.pageSize,r=e.locale,i=e.rootPrefixCls,o=e.changeSize,a=e.quickGo,s=e.goButton,l=e.selectComponentClass,c=e.buildOptionText,u=e.selectPrefixCls,h=e.disabled,p=this.state.goInputText,d="".concat(i,"-options"),f=l,g=null,y=null,v=null;if(!o&&!a)return null;var x=this.getPageSizeOptions();if(o&&f){var _=x.map((function(e,n){return m.createElement(f.Option,{key:n,value:e.toString()},(c||t.buildOptionText)(e))}));g=m.createElement(f,{disabled:h,prefixCls:u,showSearch:!1,className:"".concat(d,"-size-changer"),optionLabelProp:"children",dropdownMatchSelectWidth:!1,value:(n||x[0]).toString(),onChange:this.changeSize,getPopupContainer:function(t){return t.parentNode},"aria-label":r.page_size,defaultOpen:!1},_)}return a&&(s&&(v="boolean"===typeof s?m.createElement("button",{type:"button",onClick:this.go,onKeyUp:this.go,disabled:h,className:"".concat(d,"-quick-jumper-button")},r.jump_to_confirm):m.createElement("span",{onClick:this.go,onKeyUp:this.go},s)),y=m.createElement("div",{className:"".concat(d,"-quick-jumper")},r.jump_to,m.createElement("input",{disabled:h,type:"text",value:p,onChange:this.handleChange,onKeyUp:this.go,onBlur:this.handleBlur,"aria-label":r.page}),r.page,v)),m.createElement("li",{className:"".concat(d)},g,y)}}]),n}(m.Component);eC.defaultProps={pageSizeOptions:["10","20","50","100"]};var nC=eC,rC=function(t){var e,n=t.rootPrefixCls,r=t.page,i=t.active,o=t.className,a=t.showTitle,s=t.onClick,l=t.onKeyPress,c=t.itemRender,u="".concat(n,"-item"),h=ic()(u,"".concat(u,"-").concat(r),(Ir(e={},"".concat(u,"-active"),i),Ir(e,"".concat(u,"-disabled"),!r),Ir(e,t.className,o),e));return m.createElement("li",{title:a?r.toString():null,className:h,onClick:function(){s(r)},onKeyPress:function(t){l(t,s,r)},tabIndex:0},c(r,"page",m.createElement("a",{rel:"nofollow"},r)))};function iC(){}function oC(t){var e=Number(t);return"number"===typeof e&&!Number.isNaN(e)&&isFinite(e)&&Math.floor(e)===e}function aC(t,e,n){var r="undefined"===typeof t?e.pageSize:t;return Math.floor((n.total-1)/r)+1}var sC=function(t){Qo(n,t);var e=ea(n);function n(t){var r;ii(this,n),(r=e.call(this,t)).paginationNode=m.createRef(),r.getJumpPrevPage=function(){return Math.max(1,r.state.current-(r.props.showLessItems?3:5))},r.getJumpNextPage=function(){return Math.min(aC(void 0,r.state,r.props),r.state.current+(r.props.showLessItems?3:5))},r.getItemIcon=function(t,e){var n=r.props.prefixCls,i=t||m.createElement("button",{type:"button","aria-label":e,className:"".concat(n,"-item-link")});return"function"===typeof t&&(i=m.createElement(t,Or({},r.props))),i},r.isValid=function(t){var e=r.props.total;return oC(t)&&t!==r.state.current&&oC(e)&&e>0},r.shouldDisplayQuickJumper=function(){var t=r.props,e=t.showQuickJumper;return!(t.total<=r.state.pageSize)&&e},r.handleKeyDown=function(t){t.keyCode!==tC.ARROW_UP&&t.keyCode!==tC.ARROW_DOWN||t.preventDefault()},r.handleKeyUp=function(t){var e=r.getValidValue(t);e!==r.state.currentInputValue&&r.setState({currentInputValue:e}),t.keyCode===tC.ENTER?r.handleChange(e):t.keyCode===tC.ARROW_UP?r.handleChange(e-1):t.keyCode===tC.ARROW_DOWN&&r.handleChange(e+1)},r.handleBlur=function(t){var e=r.getValidValue(t);r.handleChange(e)},r.changePageSize=function(t){var e=r.state.current,n=aC(t,r.state,r.props);e=e>n?n:e,0===n&&(e=r.state.current),"number"===typeof t&&("pageSize"in r.props||r.setState({pageSize:t}),"current"in r.props||r.setState({current:e,currentInputValue:e})),r.props.onShowSizeChange(e,t),"onChange"in r.props&&r.props.onChange&&r.props.onChange(e,t)},r.handleChange=function(t){var e=r.props,n=e.disabled,i=e.onChange,o=r.state,a=o.pageSize,s=o.current,l=o.currentInputValue;if(r.isValid(t)&&!n){var c=aC(void 0,r.state,r.props),u=t;return t>c?u=c:t<1&&(u=1),"current"in r.props||r.setState({current:u}),u!==l&&r.setState({currentInputValue:u}),i(u,a),u}return s},r.prev=function(){r.hasPrev()&&r.handleChange(r.state.current-1)},r.next=function(){r.hasNext()&&r.handleChange(r.state.current+1)},r.jumpPrev=function(){r.handleChange(r.getJumpPrevPage())},r.jumpNext=function(){r.handleChange(r.getJumpNextPage())},r.hasPrev=function(){return r.state.current>1},r.hasNext=function(){return r.state.current<aC(void 0,r.state,r.props)},r.runIfEnter=function(t,e){if("Enter"===t.key||13===t.charCode){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];e.apply(void 0,r)}},r.runIfEnterPrev=function(t){r.runIfEnter(t,r.prev)},r.runIfEnterNext=function(t){r.runIfEnter(t,r.next)},r.runIfEnterJumpPrev=function(t){r.runIfEnter(t,r.jumpPrev)},r.runIfEnterJumpNext=function(t){r.runIfEnter(t,r.jumpNext)},r.handleGoTO=function(t){t.keyCode!==tC.ENTER&&"click"!==t.type||r.handleChange(r.state.currentInputValue)},r.renderPrev=function(t){var e=r.props,n=e.prevIcon,i=(0,e.itemRender)(t,"prev",r.getItemIcon(n,"prev page")),o=!r.hasPrev();return(0,m.isValidElement)(i)?(0,m.cloneElement)(i,{disabled:o}):i},r.renderNext=function(t){var e=r.props,n=e.nextIcon,i=(0,e.itemRender)(t,"next",r.getItemIcon(n,"next page")),o=!r.hasNext();return(0,m.isValidElement)(i)?(0,m.cloneElement)(i,{disabled:o}):i};var i=t.onChange!==iC;"current"in t&&!i&&console.warn("Warning: You provided a `current` prop to a Pagination component without an `onChange` handler. This will render a read-only component.");var o=t.defaultCurrent;"current"in t&&(o=t.current);var a=t.defaultPageSize;return"pageSize"in t&&(a=t.pageSize),o=Math.min(o,aC(a,void 0,t)),r.state={current:o,currentInputValue:o,pageSize:a},r}return ai(n,[{key:"componentDidUpdate",value:function(t,e){var n=this.props.prefixCls;if(e.current!==this.state.current&&this.paginationNode.current){var r,i=this.paginationNode.current.querySelector(".".concat(n,"-item-").concat(e.current));if(i&&document.activeElement===i)null===i||void 0===i||null===(r=i.blur)||void 0===r||r.call(i)}}},{key:"getValidValue",value:function(t){var e=t.target.value,n=aC(void 0,this.state,this.props),r=this.state.currentInputValue;return""===e?e:Number.isNaN(Number(e))?r:e>=n?n:Number(e)}},{key:"getShowSizeChanger",value:function(){var t=this.props,e=t.showSizeChanger,n=t.total,r=t.totalBoundaryShowSizeChanger;return"undefined"!==typeof e?e:n>r}},{key:"render",value:function(){var t=this,e=this.props,n=e.prefixCls,r=e.className,i=e.style,o=e.disabled,a=e.hideOnSinglePage,s=e.total,l=e.locale,c=e.showQuickJumper,u=e.showLessItems,h=e.showTitle,p=e.showTotal,d=e.simple,f=e.itemRender,g=e.showPrevNextJumpers,y=e.jumpPrevIcon,v=e.jumpNextIcon,x=e.selectComponentClass,_=e.selectPrefixCls,b=e.pageSizeOptions,w=this.state,S=w.current,C=w.pageSize,E=w.currentInputValue;if(!0===a&&s<=C)return null;var k=aC(void 0,this.state,this.props),M=[],T=null,I=null,P=null,O=null,A=null,D=c&&c.goButton,R=u?1:2,L=S-1>0?S-1:0,N=S+1<k?S+1:k,F=Object.keys(this.props).reduce((function(e,n){return"data-"!==n.substr(0,5)&&"aria-"!==n.substr(0,5)&&"role"!==n||(e[n]=t.props[n]),e}),{}),z=p&&m.createElement("li",{className:"".concat(n,"-total-text")},p(s,[0===s?0:(S-1)*C+1,S*C>s?s:S*C]));if(d)return D&&(A="boolean"===typeof D?m.createElement("button",{type:"button",onClick:this.handleGoTO,onKeyUp:this.handleGoTO},l.jump_to_confirm):m.createElement("span",{onClick:this.handleGoTO,onKeyUp:this.handleGoTO},D),A=m.createElement("li",{title:h?"".concat(l.jump_to).concat(S,"/").concat(k):null,className:"".concat(n,"-simple-pager")},A)),m.createElement("ul",Ui({className:ic()(n,"".concat(n,"-simple"),Ir({},"".concat(n,"-disabled"),o),r),style:i,ref:this.paginationNode},F),z,m.createElement("li",{title:h?l.prev_page:null,onClick:this.prev,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterPrev,className:ic()("".concat(n,"-prev"),Ir({},"".concat(n,"-disabled"),!this.hasPrev())),"aria-disabled":!this.hasPrev()},this.renderPrev(L)),m.createElement("li",{title:h?"".concat(S,"/").concat(k):null,className:"".concat(n,"-simple-pager")},m.createElement("input",{type:"text",value:E,disabled:o,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onChange:this.handleKeyUp,onBlur:this.handleBlur,size:3}),m.createElement("span",{className:"".concat(n,"-slash")},"/"),k),m.createElement("li",{title:h?l.next_page:null,onClick:this.next,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterNext,className:ic()("".concat(n,"-next"),Ir({},"".concat(n,"-disabled"),!this.hasNext())),"aria-disabled":!this.hasNext()},this.renderNext(N)),A);if(k<=3+2*R){var B={locale:l,rootPrefixCls:n,onClick:this.handleChange,onKeyPress:this.runIfEnter,showTitle:h,itemRender:f};k||M.push(m.createElement(rC,Ui({},B,{key:"noPager",page:1,className:"".concat(n,"-item-disabled")})));for(var $=1;$<=k;$+=1){var j=S===$;M.push(m.createElement(rC,Ui({},B,{key:$,page:$,active:j})))}}else{var U=u?l.prev_3:l.prev_5,V=u?l.next_3:l.next_5;g&&(T=m.createElement("li",{title:h?U:null,key:"prev",onClick:this.jumpPrev,tabIndex:0,onKeyPress:this.runIfEnterJumpPrev,className:ic()("".concat(n,"-jump-prev"),Ir({},"".concat(n,"-jump-prev-custom-icon"),!!y))},f(this.getJumpPrevPage(),"jump-prev",this.getItemIcon(y,"prev page"))),I=m.createElement("li",{title:h?V:null,key:"next",tabIndex:0,onClick:this.jumpNext,onKeyPress:this.runIfEnterJumpNext,className:ic()("".concat(n,"-jump-next"),Ir({},"".concat(n,"-jump-next-custom-icon"),!!v))},f(this.getJumpNextPage(),"jump-next",this.getItemIcon(v,"next page")))),O=m.createElement(rC,{locale:l,last:!0,rootPrefixCls:n,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:k,page:k,active:!1,showTitle:h,itemRender:f}),P=m.createElement(rC,{locale:l,rootPrefixCls:n,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:1,page:1,active:!1,showTitle:h,itemRender:f});var H=Math.max(1,S-R),G=Math.min(S+R,k);S-1<=R&&(G=1+2*R),k-S<=R&&(H=k-2*R);for(var W=H;W<=G;W+=1){var X=S===W;M.push(m.createElement(rC,{locale:l,rootPrefixCls:n,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:W,page:W,active:X,showTitle:h,itemRender:f}))}S-1>=2*R&&3!==S&&(M[0]=(0,m.cloneElement)(M[0],{className:"".concat(n,"-item-after-jump-prev")}),M.unshift(T)),k-S>=2*R&&S!==k-2&&(M[M.length-1]=(0,m.cloneElement)(M[M.length-1],{className:"".concat(n,"-item-before-jump-next")}),M.push(I)),1!==H&&M.unshift(P),G!==k&&M.push(O)}var q=!this.hasPrev()||!k,Y=!this.hasNext()||!k;return m.createElement("ul",Ui({className:ic()(n,r,Ir({},"".concat(n,"-disabled"),o)),style:i,ref:this.paginationNode},F),z,m.createElement("li",{title:h?l.prev_page:null,onClick:this.prev,tabIndex:q?null:0,onKeyPress:this.runIfEnterPrev,className:ic()("".concat(n,"-prev"),Ir({},"".concat(n,"-disabled"),q)),"aria-disabled":q},this.renderPrev(L)),M,m.createElement("li",{title:h?l.next_page:null,onClick:this.next,tabIndex:Y?null:0,onKeyPress:this.runIfEnterNext,className:ic()("".concat(n,"-next"),Ir({},"".concat(n,"-disabled"),Y)),"aria-disabled":Y},this.renderNext(N)),m.createElement(nC,{disabled:o,locale:l,rootPrefixCls:n,selectComponentClass:x,selectPrefixCls:_,changeSize:this.getShowSizeChanger()?this.changePageSize:null,current:S,pageSize:C,pageSizeOptions:b,quickGo:this.shouldDisplayQuickJumper()?this.handleChange:null,goButton:D}))}}],[{key:"getDerivedStateFromProps",value:function(t,e){var n={};if("current"in t&&(n.current=t.current,t.current!==e.current&&(n.currentInputValue=n.current)),"pageSize"in t&&t.pageSize!==e.pageSize){var r=e.current,i=aC(t.pageSize,e,t);r=r>i?i:r,"current"in t||(n.current=r,n.currentInputValue=r),n.pageSize=t.pageSize}return n}}]),n}(m.Component);sC.defaultProps={defaultCurrent:1,total:0,defaultPageSize:10,onChange:iC,className:"",selectPrefixCls:"rc-select",prefixCls:"rc-pagination",selectComponentClass:null,hideOnSinglePage:!1,showPrevNextJumpers:!0,showQuickJumper:!1,showLessItems:!1,showTitle:!0,onShowSizeChange:iC,locale:{items_per_page:"\u6761/\u9875",jump_to:"\u8df3\u81f3",jump_to_confirm:"\u786e\u5b9a",page:"\u9875",prev_page:"\u4e0a\u4e00\u9875",next_page:"\u4e0b\u4e00\u9875",prev_5:"\u5411\u524d 5 \u9875",next_5:"\u5411\u540e 5 \u9875",prev_3:"\u5411\u524d 3 \u9875",next_3:"\u5411\u540e 3 \u9875",page_size:"\u9875\u7801"},style:{},itemRender:function(t,e,n){return n},totalBoundaryShowSizeChanger:50};var lC=sC,cC=m.createContext(null);function uC(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,e=m.useRef(null),n=m.useRef(null);return m.useEffect((function(){return function(){window.clearTimeout(n.current)}}),[]),[function(){return e.current},function(r){(r||null===e.current)&&(e.current=r),window.clearTimeout(n.current),n.current=window.setTimeout((function(){e.current=null}),t)}]}var hC=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],pC=void 0;function dC(t,e){var n=t.prefixCls,r=t.invalidate,i=t.item,o=t.renderItem,a=t.responsive,s=t.responsiveDisabled,l=t.registerSize,c=t.itemKey,u=t.className,h=t.style,p=t.children,d=t.display,f=t.order,g=t.component,y=void 0===g?"div":g,v=Zo(t,hC),x=a&&!d;function _(t){l(c,t)}m.useEffect((function(){return function(){_(null)}}),[]);var b,w=o&&i!==pC?o(i):p;r||(b={opacity:x?0:1,height:x?0:pC,overflowY:x?"hidden":pC,order:a?f:pC,pointerEvents:x?"none":pC,position:x?"absolute":pC});var S={};x&&(S["aria-hidden"]=!0);var C=m.createElement(y,Ui({className:ic()(!r&&n,u),style:Or(Or({},b),h)},S,v,{ref:e}),w);return a&&(C=m.createElement(Um,{onResize:function(t){_(t.offsetWidth)},disabled:s},C)),C}var fC=m.forwardRef(dC);fC.displayName="Item";var gC=fC;function mC(){var t=m.useRef(null);return function(e){t.current||(t.current=[],function(t){if("undefined"===typeof MessageChannel)Xc(t);else{var e=new MessageChannel;e.port1.onmessage=function(){return t()},e.port2.postMessage(void 0)}}((function(){(0,Dr.unstable_batchedUpdates)((function(){t.current.forEach((function(t){t()})),t.current=null}))}))),t.current.push(e)}}function yC(t,e){var n=Ri(m.useState(e),2),r=n[0],i=n[1];return[r,Vm((function(e){t((function(){i(e)}))}))]}var vC=["component"],xC=["className"],_C=["className"],bC=function(t,e){var n=m.useContext(EC);if(!n){var r=t.component,i=void 0===r?"div":r,o=Zo(t,vC);return m.createElement(i,Ui({},o,{ref:e}))}var a=n.className,s=Zo(n,xC),l=t.className,c=Zo(t,_C);return m.createElement(EC.Provider,{value:null},m.createElement(gC,Ui({ref:e,className:ic()(a,l)},s,c)))},wC=m.forwardRef(bC);wC.displayName="RawItem";var SC=wC,CC=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],EC=m.createContext(null),kC="responsive",MC="invalidate";function TC(t){return"+ ".concat(t.length," ...")}function IC(t,e){var n=t.prefixCls,r=void 0===n?"rc-overflow":n,i=t.data,o=void 0===i?[]:i,a=t.renderItem,s=t.renderRawItem,l=t.itemKey,c=t.itemWidth,u=void 0===c?10:c,h=t.ssr,p=t.style,d=t.className,f=t.maxCount,g=t.renderRest,y=t.renderRawRest,v=t.suffix,x=t.component,_=void 0===x?"div":x,b=t.itemComponent,w=t.onVisibleChange,S=Zo(t,CC),C="full"===h,E=mC(),k=Ri(yC(E,null),2),M=k[0],T=k[1],I=M||0,P=Ri(yC(E,new Map),2),O=P[0],A=P[1],D=Ri(yC(E,0),2),R=D[0],L=D[1],N=Ri(yC(E,0),2),F=N[0],z=N[1],B=Ri(yC(E,0),2),$=B[0],j=B[1],U=Ri((0,m.useState)(null),2),V=U[0],H=U[1],G=Ri((0,m.useState)(null),2),W=G[0],X=G[1],q=m.useMemo((function(){return null===W&&C?Number.MAX_SAFE_INTEGER:W||0}),[W,M]),Y=Ri((0,m.useState)(!1),2),Z=Y[0],K=Y[1],J="".concat(r,"-item"),Q=Math.max(R,F),tt=f===kC,et=o.length&&tt,nt=f===MC,rt=et||"number"===typeof f&&o.length>f,it=(0,m.useMemo)((function(){var t=o;return et?t=null===M&&C?o:o.slice(0,Math.min(o.length,I/u)):"number"===typeof f&&(t=o.slice(0,f)),t}),[o,u,M,f,et]),ot=(0,m.useMemo)((function(){return et?o.slice(q+1):o.slice(it.length)}),[o,it,et,q]),at=(0,m.useCallback)((function(t,e){var n;return"function"===typeof l?l(t):null!==(n=l&&(null===t||void 0===t?void 0:t[l]))&&void 0!==n?n:e}),[l]),st=(0,m.useCallback)(a||function(t){return t},[a]);function lt(t,e,n){(W!==t||void 0!==e&&e!==V)&&(X(t),n||(K(t<o.length-1),null===w||void 0===w||w(t)),void 0!==e&&H(e))}function ct(t,e){A((function(n){var r=new Map(n);return null===e?r.delete(t):r.set(t,e),r}))}function ut(t){return O.get(at(it[t],t))}_d((function(){if(I&&"number"===typeof Q&&it){var t=$,e=it.length,n=e-1;if(!e)return void lt(0,null);for(var r=0;r<e;r+=1){var i=ut(r);if(C&&(i=i||0),void 0===i){lt(r-1,void 0,!0);break}if(t+=i,0===n&&t<=I||r===n-1&&t+ut(n)<=I){lt(n,null);break}if(t+Q>I){lt(r-1,t-i-$+F);break}}v&&ut(0)+$>I&&H(null)}}),[I,O,F,$,at,it]);var ht=Z&&!!ot.length,pt={};null!==V&&et&&(pt={position:"absolute",left:V,top:0});var dt,ft={prefixCls:J,responsive:et,component:b,invalidate:nt},gt=s?function(t,e){var n=at(t,e);return m.createElement(EC.Provider,{key:n,value:Or(Or({},ft),{},{order:e,item:t,itemKey:n,registerSize:ct,display:e<=q})},s(t,e))}:function(t,e){var n=at(t,e);return m.createElement(gC,Ui({},ft,{order:e,key:n,item:t,renderItem:st,itemKey:n,registerSize:ct,display:e<=q}))},mt={order:ht?q:Number.MAX_SAFE_INTEGER,className:"".concat(J,"-rest"),registerSize:function(t,e){z(e),L(F)},display:ht};if(y)y&&(dt=m.createElement(EC.Provider,{value:Or(Or({},ft),mt)},y(ot)));else{var yt=g||TC;dt=m.createElement(gC,Ui({},ft,mt),"function"===typeof yt?yt(ot):yt)}var vt=m.createElement(_,Ui({className:ic()(!nt&&r,d),style:p,ref:e},S),it.map(gt),rt?dt:null,v&&m.createElement(gC,Ui({},ft,{responsive:tt,responsiveDisabled:!et,order:q,className:"".concat(J,"-suffix"),registerSize:function(t,e){j(e)},display:!0,style:pt}),v));return tt&&(vt=m.createElement(Um,{onResize:function(t,e){T(e.clientWidth)},disabled:!et},vt)),vt}var PC=m.forwardRef(IC);PC.displayName="Overflow",PC.Item=SC,PC.RESPONSIVE=kC,PC.INVALIDATE=MC;var OC=PC,AC=function(t){var e,n=t.className,r=t.customizeIcon,i=t.customizeIconProps,o=t.onMouseDown,a=t.onClick,s=t.children;return e="function"===typeof r?r(i):r,m.createElement("span",{className:n,onMouseDown:function(t){t.preventDefault(),o&&o(t)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:a,"aria-hidden":!0},void 0!==e?e:m.createElement("span",{className:ic()(n.split(/\s+/).map((function(t){return"".concat(t,"-icon")})))},s))},DC=function(t,e){var n,r,i=t.prefixCls,o=t.id,a=t.inputElement,s=t.disabled,l=t.tabIndex,c=t.autoFocus,u=t.autoComplete,h=t.editable,p=t.activeDescendantId,d=t.value,f=t.maxLength,g=t.onKeyDown,y=t.onMouseDown,v=t.onChange,x=t.onPaste,_=t.onCompositionStart,b=t.onCompositionEnd,w=t.open,S=t.attrs,C=a||m.createElement("input",null),E=C,k=E.ref,M=E.props,T=M.onKeyDown,I=M.onChange,P=M.onMouseDown,O=M.onCompositionStart,A=M.onCompositionEnd,D=M.style;return C.props,C=m.cloneElement(C,Or(Or(Or({type:"search"},M),{},{id:o,ref:lc(e,k),disabled:s,tabIndex:l,autoComplete:u||"off",autoFocus:c,className:ic()("".concat(i,"-selection-search-input"),null===(n=C)||void 0===n||null===(r=n.props)||void 0===r?void 0:r.className),role:"combobox","aria-expanded":w,"aria-haspopup":"listbox","aria-owns":"".concat(o,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(o,"_list"),"aria-activedescendant":p},S),{},{value:h?d:"",maxLength:f,readOnly:!h,unselectable:h?null:"on",style:Or(Or({},D),{},{opacity:h?null:0}),onKeyDown:function(t){g(t),T&&T(t)},onMouseDown:function(t){y(t),P&&P(t)},onChange:function(t){v(t),I&&I(t)},onCompositionStart:function(t){_(t),O&&O(t)},onCompositionEnd:function(t){b(t),A&&A(t)},onPaste:x}))},RC=m.forwardRef(DC);RC.displayName="Input";var LC=RC;function NC(t){return Array.isArray(t)?t:void 0!==t?[t]:[]}var FC="undefined"!==typeof window&&window.document&&window.document.documentElement;function zC(t){return["string","number"].includes(Cr(t))}function BC(t){var e=void 0;return t&&(zC(t.title)?e=t.title.toString():zC(t.label)&&(e=t.label.toString())),e}function $C(t){var e;return null!==(e=t.key)&&void 0!==e?e:t.value}var jC=function(t){t.preventDefault(),t.stopPropagation()},UC=function(t){var e,n,r=t.id,i=t.prefixCls,o=t.values,a=t.open,s=t.searchValue,l=t.autoClearSearchValue,c=t.inputRef,u=t.placeholder,h=t.disabled,p=t.mode,d=t.showSearch,f=t.autoFocus,g=t.autoComplete,y=t.activeDescendantId,v=t.tabIndex,x=t.removeIcon,_=t.maxTagCount,b=t.maxTagTextLength,w=t.maxTagPlaceholder,S=void 0===w?function(t){return"+ ".concat(t.length," ...")}:w,C=t.tagRender,E=t.onToggleOpen,k=t.onRemove,M=t.onInputChange,T=t.onInputPaste,I=t.onInputKeyDown,P=t.onInputMouseDown,O=t.onInputCompositionStart,A=t.onInputCompositionEnd,D=m.useRef(null),R=Ri((0,m.useState)(0),2),L=R[0],N=R[1],F=Ri((0,m.useState)(!1),2),z=F[0],B=F[1],$="".concat(i,"-selection"),j=a||"multiple"===p&&!1===l||"tags"===p?s:"",U="tags"===p||"multiple"===p&&!1===l||d&&(a||z);function V(t,e,n,r,i){return m.createElement("span",{className:ic()("".concat($,"-item"),Ir({},"".concat($,"-item-disabled"),n)),title:BC(t)},m.createElement("span",{className:"".concat($,"-item-content")},e),r&&m.createElement(AC,{className:"".concat($,"-item-remove"),onMouseDown:jC,onClick:i,customizeIcon:x},"\xd7"))}e=function(){N(D.current.scrollWidth)},n=[j],FC?m.useLayoutEffect(e,n):m.useEffect(e,n);var H=m.createElement("div",{className:"".concat($,"-search"),style:{width:L},onFocus:function(){B(!0)},onBlur:function(){B(!1)}},m.createElement(LC,{ref:c,open:a,prefixCls:i,id:r,inputElement:null,disabled:h,autoFocus:f,autoComplete:g,editable:U,activeDescendantId:y,value:j,onKeyDown:I,onMouseDown:P,onChange:M,onPaste:T,onCompositionStart:O,onCompositionEnd:A,tabIndex:v,attrs:zd(t,!0)}),m.createElement("span",{ref:D,className:"".concat($,"-search-mirror"),"aria-hidden":!0},j,"\xa0")),G=m.createElement(OC,{prefixCls:"".concat($,"-overflow"),data:o,renderItem:function(t){var e=t.disabled,n=t.label,r=t.value,i=!h&&!e,o=n;if("number"===typeof b&&("string"===typeof n||"number"===typeof n)){var s=String(o);s.length>b&&(o="".concat(s.slice(0,b),"..."))}var l=function(e){e&&e.stopPropagation(),k(t)};return"function"===typeof C?function(t,e,n,r,i){return m.createElement("span",{onMouseDown:function(t){jC(t),E(!a)}},C({label:e,value:t,disabled:n,closable:r,onClose:i}))}(r,o,e,i,l):V(t,o,e,i,l)},renderRest:function(t){var e="function"===typeof S?S(t):S;return V({title:e},e,!1)},suffix:H,itemKey:$C,maxCount:_});return m.createElement(m.Fragment,null,G,!o.length&&!j&&m.createElement("span",{className:"".concat($,"-placeholder")},u))},VC=function(t){var e=t.inputElement,n=t.prefixCls,r=t.id,i=t.inputRef,o=t.disabled,a=t.autoFocus,s=t.autoComplete,l=t.activeDescendantId,c=t.mode,u=t.open,h=t.values,p=t.placeholder,d=t.tabIndex,f=t.showSearch,g=t.searchValue,y=t.activeValue,v=t.maxLength,x=t.onInputKeyDown,_=t.onInputMouseDown,b=t.onInputChange,w=t.onInputPaste,S=t.onInputCompositionStart,C=t.onInputCompositionEnd,E=t.title,k=Ri(m.useState(!1),2),M=k[0],T=k[1],I="combobox"===c,P=I||f,O=h[0],A=g||"";I&&y&&!M&&(A=y),m.useEffect((function(){I&&T(!1)}),[I,y]);var D=!("combobox"!==c&&!u&&!f)&&!!A,R=void 0===E?BC(O):E;return m.createElement(m.Fragment,null,m.createElement("span",{className:"".concat(n,"-selection-search")},m.createElement(LC,{ref:i,prefixCls:n,id:r,open:u,inputElement:e,disabled:o,autoFocus:a,autoComplete:s,editable:P,activeDescendantId:l,value:A,onKeyDown:x,onMouseDown:_,onChange:function(t){T(!0),b(t)},onPaste:w,onCompositionStart:S,onCompositionEnd:C,tabIndex:d,attrs:zd(t,!0),maxLength:I?v:void 0})),!I&&O?m.createElement("span",{className:"".concat(n,"-selection-item"),title:R,style:D?{visibility:"hidden"}:void 0},O.label):null,function(){if(O)return null;var t=D?{visibility:"hidden"}:void 0;return m.createElement("span",{className:"".concat(n,"-selection-placeholder"),style:t},p)}())};var HC=function(t,e){var n=(0,m.useRef)(null),r=(0,m.useRef)(!1),i=t.prefixCls,o=t.open,a=t.mode,s=t.showSearch,l=t.tokenWithEnter,c=t.autoClearSearchValue,u=t.onSearch,h=t.onSearchSubmit,p=t.onToggleOpen,d=t.onInputKeyDown,f=t.domRef;m.useImperativeHandle(e,(function(){return{focus:function(){n.current.focus()},blur:function(){n.current.blur()}}}));var g=Ri(uC(0),2),y=g[0],v=g[1],x=(0,m.useRef)(null),_=function(t){!1!==u(t,!0,r.current)&&p(!0)},b={inputRef:n,onInputKeyDown:function(t){var e,n=t.which;n!==sh.UP&&n!==sh.DOWN||t.preventDefault(),d&&d(t),n!==sh.ENTER||"tags"!==a||r.current||o||null===h||void 0===h||h(t.target.value),e=n,[sh.ESC,sh.SHIFT,sh.BACKSPACE,sh.TAB,sh.WIN_KEY,sh.ALT,sh.META,sh.WIN_KEY_RIGHT,sh.CTRL,sh.SEMICOLON,sh.EQUALS,sh.CAPS_LOCK,sh.CONTEXT_MENU,sh.F1,sh.F2,sh.F3,sh.F4,sh.F5,sh.F6,sh.F7,sh.F8,sh.F9,sh.F10,sh.F11,sh.F12].includes(e)||p(!0)},onInputMouseDown:function(){v(!0)},onInputChange:function(t){var e=t.target.value;if(l&&x.current&&/[\r\n]/.test(x.current)){var n=x.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");e=e.replace(n,x.current)}x.current=null,_(e)},onInputPaste:function(t){var e=t.clipboardData.getData("text");x.current=e},onInputCompositionStart:function(){r.current=!0},onInputCompositionEnd:function(t){r.current=!1,"combobox"!==a&&_(t.target.value)}},w="multiple"===a||"tags"===a?m.createElement(UC,Ui({},t,b)):m.createElement(VC,Ui({},t,b));return m.createElement("div",{ref:f,className:"".concat(i,"-selector"),onClick:function(t){t.target!==n.current&&(void 0!==document.body.style.msTouchAction?setTimeout((function(){n.current.focus()})):n.current.focus())},onMouseDown:function(t){var e=y();t.target===n.current||e||"combobox"===a||t.preventDefault(),("combobox"===a||s&&e)&&o||(o&&!1!==c&&u("",!0,!1),p())}},w)},GC=m.forwardRef(HC);GC.displayName="Selector";var WC=GC,XC=["prefixCls","disabled","visible","children","popupElement","containerWidth","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],qC=function(t,e){var n=t.prefixCls,r=(t.disabled,t.visible),i=t.children,o=t.popupElement,a=t.containerWidth,s=t.animation,l=t.transitionName,c=t.dropdownStyle,u=t.dropdownClassName,h=t.direction,p=void 0===h?"ltr":h,d=t.placement,f=t.builtinPlacements,g=t.dropdownMatchSelectWidth,y=t.dropdownRender,v=t.dropdownAlign,x=t.getPopupContainer,_=t.empty,b=t.getTriggerDOMNode,w=t.onPopupVisibleChange,S=t.onPopupMouseEnter,C=Zo(t,XC),E="".concat(n,"-dropdown"),k=o;y&&(k=y(o));var M=m.useMemo((function(){return f||function(t){var e=!0===t?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:e,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:e,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:e,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:e,adjustY:1},htmlRegion:"scroll"}}}(g)}),[f,g]),T=s?"".concat(E,"-").concat(s):l,I=m.useRef(null);m.useImperativeHandle(e,(function(){return{getPopupElement:function(){return I.current}}}));var P=Or({minWidth:a},c);return"number"===typeof g?P.width=g:g&&(P.width=a),m.createElement(fy,Ui({},C,{showAction:w?["click"]:[],hideAction:w?["click"]:[],popupPlacement:d||("rtl"===p?"bottomRight":"bottomLeft"),builtinPlacements:M,prefixCls:E,popupTransitionName:T,popup:m.createElement("div",{ref:I,onMouseEnter:S},k),popupAlign:v,popupVisible:r,getPopupContainer:x,popupClassName:ic()(u,Ir({},"".concat(E,"-empty"),_)),popupStyle:P,getTriggerDOMNode:b,onPopupVisibleChange:w}),i)},YC=m.forwardRef(qC);YC.displayName="SelectTrigger";var ZC=YC;function KC(t,e){var n,r=t.key;return"value"in t&&(n=t.value),null!==r&&void 0!==r?r:void 0!==n?n:"rc-index-key-".concat(e)}function JC(t,e){var n=t||{};return{label:n.label||(e?"children":"label"),value:n.value||"value",options:n.options||"options"}}function QC(t){var e=Or({},t);return"props"in e||Object.defineProperty(e,"props",{get:function(){return ni(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),e}}),e}var tE=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","showArrow","inputIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],eE=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"];function nE(t){return"tags"===t||"multiple"===t}var rE=m.forwardRef((function(t,e){var n,r,i=t.id,o=t.prefixCls,a=t.className,s=t.showSearch,l=t.tagRender,c=t.direction,u=t.omitDomProps,h=t.displayValues,p=t.onDisplayValuesChange,d=t.emptyOptions,f=t.notFoundContent,g=void 0===f?"Not Found":f,y=t.onClear,v=t.mode,x=t.disabled,_=t.loading,b=t.getInputElement,w=t.getRawInputElement,S=t.open,C=t.defaultOpen,E=t.onDropdownVisibleChange,k=t.activeValue,M=t.onActiveValueChange,T=t.activeDescendantId,I=t.searchValue,P=t.autoClearSearchValue,O=t.onSearch,A=t.onSearchSplit,D=t.tokenSeparators,R=t.allowClear,L=t.showArrow,N=t.inputIcon,F=t.clearIcon,z=t.OptionList,B=t.animation,$=t.transitionName,j=t.dropdownStyle,U=t.dropdownClassName,V=t.dropdownMatchSelectWidth,H=t.dropdownRender,G=t.dropdownAlign,W=t.placement,X=t.builtinPlacements,q=t.getPopupContainer,Y=t.showAction,Z=void 0===Y?[]:Y,K=t.onFocus,J=t.onBlur,Q=t.onKeyUp,tt=t.onKeyDown,et=t.onMouseDown,nt=Zo(t,tE),rt=nE(v),it=(void 0!==s?s:rt)||"combobox"===v,ot=Or({},nt);eE.forEach((function(t){delete ot[t]})),null===u||void 0===u||u.forEach((function(t){delete ot[t]}));var at=Ri(m.useState(!1),2),st=at[0],lt=at[1];m.useEffect((function(){lt(Hm())}),[]);var ct=m.useRef(null),ut=m.useRef(null),ht=m.useRef(null),pt=m.useRef(null),dt=m.useRef(null),ft=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=Ri(m.useState(!1),2),n=e[0],r=e[1],i=m.useRef(null),o=function(){window.clearTimeout(i.current)};return m.useEffect((function(){return o}),[]),[n,function(e,n){o(),i.current=window.setTimeout((function(){r(e),n&&n()}),t)},o]}(),gt=Ri(ft,3),mt=gt[0],yt=gt[1],vt=gt[2];m.useImperativeHandle(e,(function(){var t,e;return{focus:null===(t=pt.current)||void 0===t?void 0:t.focus,blur:null===(e=pt.current)||void 0===e?void 0:e.blur,scrollTo:function(t){var e;return null===(e=dt.current)||void 0===e?void 0:e.scrollTo(t)}}}));var xt=m.useMemo((function(){var t;if("combobox"!==v)return I;var e=null===(t=h[0])||void 0===t?void 0:t.value;return"string"===typeof e||"number"===typeof e?String(e):""}),[I,v,h]),_t="combobox"===v&&"function"===typeof b&&b()||null,bt="function"===typeof w&&w(),wt=cc(ut,null===bt||void 0===bt||null===(n=bt.props)||void 0===n?void 0:n.ref),St=Ri(m.useState(!1),2),Ct=St[0],Et=St[1];_d((function(){Et(!0)}),[]);var kt=Ri(Cy(!1,{defaultValue:C,value:S}),2),Mt=kt[0],Tt=kt[1],It=!!Ct&&Mt,Pt=!g&&d;(x||Pt&&It&&"combobox"===v)&&(It=!1);var Ot=!Pt&&It,At=m.useCallback((function(t){var e=void 0!==t?t:!It;x||(Tt(e),It!==e&&(null===E||void 0===E||E(e)))}),[x,It,Tt,E]),Dt=m.useMemo((function(){return(D||[]).some((function(t){return["\n","\r\n"].includes(t)}))}),[D]),Rt=function(t,e,n){var r=!0,i=t;null===M||void 0===M||M(null);var o=n?null:function(t,e){if(!e||!e.length)return null;var n=!1,r=function t(e,r){var i=za(r),o=i[0],a=i.slice(1);if(!o)return[e];var s=e.split(o);return n=n||s.length>1,s.reduce((function(e,n){return[].concat(Sr(e),Sr(t(n,a)))}),[]).filter((function(t){return t}))}(t,e);return n?r:null}(t,D);return"combobox"!==v&&o&&(i="",null===A||void 0===A||A(o),At(!1),r=!1),O&&xt!==i&&O(i,{source:e?"typing":"effect"}),r};m.useEffect((function(){It||rt||"combobox"===v||Rt("",!1,!1)}),[It]),m.useEffect((function(){Mt&&x&&Tt(!1),x&&yt(!1)}),[x]);var Lt=Ri(uC(),2),Nt=Lt[0],Ft=Lt[1],zt=m.useRef(!1),Bt=[];m.useEffect((function(){return function(){Bt.forEach((function(t){return clearTimeout(t)})),Bt.splice(0,Bt.length)}}),[]);var $t,jt=Ri(m.useState(null),2),Ut=jt[0],Vt=jt[1],Ht=Ri(m.useState({}),2)[1];_d((function(){if(Ot){var t,e=Math.ceil(null===(t=ct.current)||void 0===t?void 0:t.offsetWidth);Ut===e||Number.isNaN(e)||Vt(e)}}),[Ot]),bt&&($t=function(t){At(t)}),function(t,e,n,r){var i=m.useRef(null);i.current={open:e,triggerOpen:n,customizedTrigger:r},m.useEffect((function(){function e(e){var n;if(null===(n=i.current)||void 0===n||!n.customizedTrigger){var r=e.target;r.shadowRoot&&e.composed&&(r=e.composedPath()[0]||r),i.current.open&&t().filter((function(t){return t})).every((function(t){return!t.contains(r)&&t!==r}))&&i.current.triggerOpen(!1)}}return window.addEventListener("mousedown",e),function(){return window.removeEventListener("mousedown",e)}}),[])}((function(){var t;return[ct.current,null===(t=ht.current)||void 0===t?void 0:t.getPopupElement()]}),Ot,At,!!bt);var Gt,Wt,Xt=m.useMemo((function(){return Or(Or({},t),{},{notFoundContent:g,open:It,triggerOpen:Ot,id:i,showSearch:it,multiple:rt,toggleOpen:At})}),[t,g,Ot,It,i,it,rt,At]),qt=void 0!==L?L:_||!rt&&"combobox"!==v;qt&&(Gt=m.createElement(AC,{className:ic()("".concat(o,"-arrow"),Ir({},"".concat(o,"-arrow-loading"),_)),customizeIcon:N,customizeIconProps:{loading:_,searchValue:xt,open:It,focused:mt,showSearch:it}}));x||!R||!h.length&&!xt||"combobox"===v&&""===xt||(Wt=m.createElement(AC,{className:"".concat(o,"-clear"),onMouseDown:function(){var t;null===y||void 0===y||y(),null===(t=pt.current)||void 0===t||t.focus(),p([],{type:"clear",values:h}),Rt("",!1,!1)},customizeIcon:F},"\xd7"));var Yt,Zt=m.createElement(z,{ref:dt}),Kt=ic()(o,a,(Ir(r={},"".concat(o,"-focused"),mt),Ir(r,"".concat(o,"-multiple"),rt),Ir(r,"".concat(o,"-single"),!rt),Ir(r,"".concat(o,"-allow-clear"),R),Ir(r,"".concat(o,"-show-arrow"),qt),Ir(r,"".concat(o,"-disabled"),x),Ir(r,"".concat(o,"-loading"),_),Ir(r,"".concat(o,"-open"),It),Ir(r,"".concat(o,"-customize-input"),_t),Ir(r,"".concat(o,"-show-search"),it),r)),Jt=m.createElement(ZC,{ref:ht,disabled:x,prefixCls:o,visible:Ot,popupElement:Zt,containerWidth:Ut,animation:B,transitionName:$,dropdownStyle:j,dropdownClassName:U,direction:c,dropdownMatchSelectWidth:V,dropdownRender:H,dropdownAlign:G,placement:W,builtinPlacements:X,getPopupContainer:q,empty:d,getTriggerDOMNode:function(){return ut.current},onPopupVisibleChange:$t,onPopupMouseEnter:function(){Ht({})}},bt?m.cloneElement(bt,{ref:wt}):m.createElement(WC,Ui({},t,{domRef:ut,prefixCls:o,inputElement:_t,ref:pt,id:i,showSearch:it,autoClearSearchValue:P,mode:v,activeDescendantId:T,tagRender:l,values:h,open:It,onToggleOpen:At,activeValue:k,searchValue:xt,onSearch:Rt,onSearchSubmit:function(t){t&&t.trim()&&O(t,{source:"submit"})},onRemove:function(t){var e=h.filter((function(e){return e!==t}));p(e,{type:"remove",values:[t]})},tokenWithEnter:Dt})));return Yt=bt?Jt:m.createElement("div",Ui({className:Kt},ot,{ref:ct,onMouseDown:function(t){var e,n=t.target,r=null===(e=ht.current)||void 0===e?void 0:e.getPopupElement();if(r&&r.contains(n)){var i=setTimeout((function(){var t,e=Bt.indexOf(i);-1!==e&&Bt.splice(e,1),vt(),st||r.contains(document.activeElement)||null===(t=pt.current)||void 0===t||t.focus()}));Bt.push(i)}for(var o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];null===et||void 0===et||et.apply(void 0,[t].concat(a))},onKeyDown:function(t){var e,n=Nt(),r=t.which;if(r===sh.ENTER&&("combobox"!==v&&t.preventDefault(),It||At(!0)),Ft(!!xt),r===sh.BACKSPACE&&!n&&rt&&!xt&&h.length){for(var i=Sr(h),o=null,a=i.length-1;a>=0;a-=1){var s=i[a];if(!s.disabled){i.splice(a,1),o=s;break}}o&&p(i,{type:"remove",values:[o]})}for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];It&&dt.current&&(e=dt.current).onKeyDown.apply(e,[t].concat(c)),null===tt||void 0===tt||tt.apply(void 0,[t].concat(c))},onKeyUp:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i;It&&dt.current&&(i=dt.current).onKeyUp.apply(i,[t].concat(n)),null===Q||void 0===Q||Q.apply(void 0,[t].concat(n))},onFocus:function(){yt(!0),x||(K&&!zt.current&&K.apply(void 0,arguments),Z.includes("focus")&&At(!0)),zt.current=!0},onBlur:function(){yt(!1,(function(){zt.current=!1,At(!1)})),x||(xt&&("tags"===v?O(xt,{source:"submit"}):"multiple"===v&&O("",{source:"blur"})),J&&J.apply(void 0,arguments))}}),mt&&!It&&m.createElement("span",{style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0},"aria-live":"polite"},"".concat(h.map((function(t){var e=t.label,n=t.value;return["number","string"].includes(Cr(e))?e:n})).join(", "))),Jt,Gt,Wt),m.createElement(cC.Provider,{value:Xt},Yt)}));var iE=rE;function oE(t,e){return NC(t).join("").toUpperCase().includes(e)}var aE=0,sE=gi();function lE(t){var e=Ri(m.useState(),2),n=e[0],r=e[1];return m.useEffect((function(){r("rc_select_".concat(function(){var t;return sE?(t=aE,aE+=1):t="TEST_OR_SSR",t}()))}),[]),t||n}var cE=["children","value"],uE=["children"];function hE(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return ra(t).map((function(t,n){if(!m.isValidElement(t)||!t.type)return null;var r=t,i=r.type.isSelectOptGroup,o=r.key,a=r.props,s=a.children,l=Zo(a,uE);return e||!i?function(t){var e=t,n=e.key,r=e.props,i=r.children,o=r.value;return Or({key:n,value:void 0!==o?o:n,children:i},Zo(r,cE))}(t):Or(Or({key:"__RC_SELECT_GRP__".concat(null===o?n:o,"__"),label:o},l),{},{options:hE(s)})})).filter((function(t){return t}))}function pE(t){var e=m.useRef();e.current=t;var n=m.useCallback((function(){return e.current.apply(e,arguments)}),[]);return n}var dE=function(){return null};dE.isSelectOptGroup=!0;var fE=dE,gE=function(){return null};gE.isSelectOption=!0;var mE=gE,yE=m.forwardRef((function(t,e){var n=t.height,r=t.offset,i=t.children,o=t.prefixCls,a=t.onInnerResize,s=t.innerProps,l={},c={display:"flex",flexDirection:"column"};return void 0!==r&&(l={height:n,position:"relative",overflow:"hidden"},c=Or(Or({},c),{},{transform:"translateY(".concat(r,"px)"),position:"absolute",left:0,right:0,top:0})),m.createElement("div",{style:l},m.createElement(Um,{onResize:function(t){t.offsetHeight&&a&&a()}},m.createElement("div",Ui({style:c,className:ic()(Ir({},"".concat(o,"-holder-inner"),o)),ref:e},s),i)))}));yE.displayName="Filler";var vE=yE;function xE(t){return"touches"in t?t.touches[0].pageY:t.pageY}var _E=function(t){Qo(n,t);var e=ea(n);function n(){var t;ii(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).moveRaf=null,t.scrollbarRef=m.createRef(),t.thumbRef=m.createRef(),t.visibleTimeout=null,t.state={dragging:!1,pageY:null,startTop:null,visible:!1},t.delayHidden=function(){clearTimeout(t.visibleTimeout),t.setState({visible:!0}),t.visibleTimeout=setTimeout((function(){t.setState({visible:!1})}),2e3)},t.onScrollbarTouchStart=function(t){t.preventDefault()},t.onContainerMouseDown=function(t){t.stopPropagation(),t.preventDefault()},t.patchEvents=function(){window.addEventListener("mousemove",t.onMouseMove),window.addEventListener("mouseup",t.onMouseUp),t.thumbRef.current.addEventListener("touchmove",t.onMouseMove),t.thumbRef.current.addEventListener("touchend",t.onMouseUp)},t.removeEvents=function(){var e;window.removeEventListener("mousemove",t.onMouseMove),window.removeEventListener("mouseup",t.onMouseUp),null===(e=t.scrollbarRef.current)||void 0===e||e.removeEventListener("touchstart",t.onScrollbarTouchStart),t.thumbRef.current&&(t.thumbRef.current.removeEventListener("touchstart",t.onMouseDown),t.thumbRef.current.removeEventListener("touchmove",t.onMouseMove),t.thumbRef.current.removeEventListener("touchend",t.onMouseUp)),Xc.cancel(t.moveRaf)},t.onMouseDown=function(e){var n=t.props.onStartMove;t.setState({dragging:!0,pageY:xE(e),startTop:t.getTop()}),n(),t.patchEvents(),e.stopPropagation(),e.preventDefault()},t.onMouseMove=function(e){var n=t.state,r=n.dragging,i=n.pageY,o=n.startTop,a=t.props.onScroll;if(Xc.cancel(t.moveRaf),r){var s=o+(xE(e)-i),l=t.getEnableScrollRange(),c=t.getEnableHeightRange(),u=c?s/c:0,h=Math.ceil(u*l);t.moveRaf=Xc((function(){a(h)}))}},t.onMouseUp=function(){var e=t.props.onStopMove;t.setState({dragging:!1}),e(),t.removeEvents()},t.getSpinHeight=function(){var e=t.props,n=e.height,r=n/e.count*10;return r=Math.max(r,20),r=Math.min(r,n/2),Math.floor(r)},t.getEnableScrollRange=function(){var e=t.props;return e.scrollHeight-e.height||0},t.getEnableHeightRange=function(){return t.props.height-t.getSpinHeight()||0},t.getTop=function(){var e=t.props.scrollTop,n=t.getEnableScrollRange(),r=t.getEnableHeightRange();return 0===e||0===n?0:e/n*r},t.showScroll=function(){var e=t.props,n=e.height;return e.scrollHeight>n},t}return ai(n,[{key:"componentDidMount",value:function(){this.scrollbarRef.current.addEventListener("touchstart",this.onScrollbarTouchStart),this.thumbRef.current.addEventListener("touchstart",this.onMouseDown)}},{key:"componentDidUpdate",value:function(t){t.scrollTop!==this.props.scrollTop&&this.delayHidden()}},{key:"componentWillUnmount",value:function(){this.removeEvents(),clearTimeout(this.visibleTimeout)}},{key:"render",value:function(){var t=this.state,e=t.dragging,n=t.visible,r=this.props.prefixCls,i=this.getSpinHeight(),o=this.getTop(),a=this.showScroll(),s=a&&n;return m.createElement("div",{ref:this.scrollbarRef,className:ic()("".concat(r,"-scrollbar"),Ir({},"".concat(r,"-scrollbar-show"),a)),style:{width:8,top:0,bottom:0,right:0,position:"absolute",display:s?null:"none"},onMouseDown:this.onContainerMouseDown,onMouseMove:this.delayHidden},m.createElement("div",{ref:this.thumbRef,className:ic()("".concat(r,"-scrollbar-thumb"),Ir({},"".concat(r,"-scrollbar-thumb-moving"),e)),style:{width:"100%",height:i,top:o,left:0,position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"},onMouseDown:this.onMouseDown}))}}]),n}(m.Component);function bE(t){var e=t.children,n=t.setRef,r=m.useCallback((function(t){n(t)}),[]);return m.cloneElement(e,{ref:r})}var wE=function(){function t(){ii(this,t),this.maps=void 0,this.maps=Object.create(null)}return ai(t,[{key:"set",value:function(t,e){this.maps[t]=e}},{key:"get",value:function(t){return this.maps[t]}}]),t}(),SE=wE;function CE(t,e,n){var r=Ri(m.useState(t),2),i=r[0],o=r[1],a=Ri(m.useState(null),2),s=a[0],l=a[1];return m.useEffect((function(){var r=function(t,e,n){var r,i,o=t.length,a=e.length;if(0===o&&0===a)return null;o<a?(r=t,i=e):(r=e,i=t);var s={__EMPTY_ITEM__:!0};function l(t){return void 0!==t?n(t):s}for(var c=null,u=1!==Math.abs(o-a),h=0;h<i.length;h+=1){var p=l(r[h]);if(p!==l(i[h])){c=h,u=u||p!==l(i[h+1]);break}}return null===c?null:{index:c,multiple:u}}(i||[],t||[],e);void 0!==(null===r||void 0===r?void 0:r.index)&&(null===n||void 0===n||n(r.index),l(t[r.index])),o(t)}),[t]),[s]}var EE="object"===("undefined"===typeof navigator?"undefined":Cr(navigator))&&/Firefox/i.test(navigator.userAgent),kE=function(t,e){var n=(0,m.useRef)(!1),r=(0,m.useRef)(null);var i=(0,m.useRef)({top:t,bottom:e});return i.current.top=t,i.current.bottom=e,function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=t<0&&i.current.top||t>0&&i.current.bottom;return e&&o?(clearTimeout(r.current),n.current=!1):o&&!n.current||(clearTimeout(r.current),n.current=!0,r.current=setTimeout((function(){n.current=!1}),50)),!n.current&&o}};var ME=14/15;var TE=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","component","onScroll","onVisibleChange","innerProps"],IE=[],PE={overflowY:"auto",overflowAnchor:"none"};function OE(t,e){var n=t.prefixCls,r=void 0===n?"rc-virtual-list":n,i=t.className,o=t.height,a=t.itemHeight,s=t.fullHeight,l=void 0===s||s,c=t.style,u=t.data,h=t.children,p=t.itemKey,d=t.virtual,f=t.component,g=void 0===f?"div":f,y=t.onScroll,v=t.onVisibleChange,x=t.innerProps,_=Zo(t,TE),b=!(!1===d||!o||!a),w=b&&u&&a*u.length>o,S=Ri((0,m.useState)(0),2),C=S[0],E=S[1],k=Ri((0,m.useState)(!1),2),M=k[0],T=k[1],I=ic()(r,i),P=u||IE,O=(0,m.useRef)(),A=(0,m.useRef)(),D=(0,m.useRef)(),R=m.useCallback((function(t){return"function"===typeof p?p(t):null===t||void 0===t?void 0:t[p]}),[p]),L={getKey:R};function N(t){E((function(e){var n=function(t){var e=t;Number.isNaN(J.current)||(e=Math.min(e,J.current));return e=Math.max(e,0),e}("function"===typeof t?t(e):t);return O.current.scrollTop=n,n}))}var F=(0,m.useRef)({start:0,end:P.length}),z=(0,m.useRef)(),B=Ri(CE(P,R),1)[0];z.current=B;var $=function(t,e,n){var r=Ri(m.useState(0),2),i=r[0],o=r[1],a=(0,m.useRef)(new Map),s=(0,m.useRef)(new SE),l=(0,m.useRef)();function c(){Xc.cancel(l.current)}function u(){c(),l.current=Xc((function(){a.current.forEach((function(t,e){if(t&&t.offsetParent){var n=ac(t),r=n.offsetHeight;s.current.get(e)!==r&&s.current.set(e,n.offsetHeight)}})),o((function(t){return t+1}))}))}return(0,m.useEffect)((function(){return c}),[]),[function(r,i){var o=t(r),s=a.current.get(o);i?(a.current.set(o,i),u()):a.current.delete(o),!s!==!i&&(i?null===e||void 0===e||e(r):null===n||void 0===n||n(r))},u,s.current,i]}(R,null,null),j=Ri($,4),U=j[0],V=j[1],H=j[2],G=j[3],W=m.useMemo((function(){if(!b)return{scrollHeight:void 0,start:0,end:P.length-1,offset:void 0};var t;if(!w)return{scrollHeight:(null===(t=A.current)||void 0===t?void 0:t.offsetHeight)||0,start:0,end:P.length-1,offset:void 0};for(var e,n,r,i=0,s=P.length,l=0;l<s;l+=1){var c=P[l],u=R(c),h=H.get(u),p=i+(void 0===h?a:h);p>=C&&void 0===e&&(e=l,n=i),p>C+o&&void 0===r&&(r=l),i=p}return void 0===e&&(e=0,n=0,r=Math.ceil(o/a)),void 0===r&&(r=P.length-1),{scrollHeight:i,start:e,end:r=Math.min(r+1,P.length),offset:n}}),[w,b,C,P,G,o]),X=W.scrollHeight,q=W.start,Y=W.end,Z=W.offset;F.current.start=q,F.current.end=Y;var K=X-o,J=(0,m.useRef)(K);J.current=K;var Q=C<=0,tt=C>=K,et=kE(Q,tt);var nt=function(t,e,n,r){var i=(0,m.useRef)(0),o=(0,m.useRef)(null),a=(0,m.useRef)(null),s=(0,m.useRef)(!1),l=kE(e,n);return[function(e){if(t){Xc.cancel(o.current);var n=e.deltaY;i.current+=n,a.current=n,l(n)||(EE||e.preventDefault(),o.current=Xc((function(){var t=s.current?10:1;r(i.current*t),i.current=0})))}},function(e){t&&(s.current=e.detail===a.current)}]}(b,Q,tt,(function(t){N((function(e){return e+t}))})),rt=Ri(nt,2),it=rt[0],ot=rt[1];!function(t,e,n){var r,i=(0,m.useRef)(!1),o=(0,m.useRef)(0),a=(0,m.useRef)(null),s=(0,m.useRef)(null),l=function(t){if(i.current){var e=Math.ceil(t.touches[0].pageY),r=o.current-e;o.current=e,n(r)&&t.preventDefault(),clearInterval(s.current),s.current=setInterval((function(){(!n(r*=ME,!0)||Math.abs(r)<=.1)&&clearInterval(s.current)}),16)}},c=function(){i.current=!1,r()},u=function(t){r(),1!==t.touches.length||i.current||(i.current=!0,o.current=Math.ceil(t.touches[0].pageY),a.current=t.target,a.current.addEventListener("touchmove",l),a.current.addEventListener("touchend",c))};r=function(){a.current&&(a.current.removeEventListener("touchmove",l),a.current.removeEventListener("touchend",c))},_d((function(){return t&&e.current.addEventListener("touchstart",u),function(){var t;null===(t=e.current)||void 0===t||t.removeEventListener("touchstart",u),r(),clearInterval(s.current)}}),[t])}(b,O,(function(t,e){return!et(t,e)&&(it({preventDefault:function(){},deltaY:t}),!0)})),_d((function(){function t(t){b&&t.preventDefault()}return O.current.addEventListener("wheel",it),O.current.addEventListener("DOMMouseScroll",ot),O.current.addEventListener("MozMousePixelScroll",t),function(){O.current&&(O.current.removeEventListener("wheel",it),O.current.removeEventListener("DOMMouseScroll",ot),O.current.removeEventListener("MozMousePixelScroll",t))}}),[b]);var at=function(t,e,n,r,i,o,a,s){var l=m.useRef();return function(c){if(null!==c&&void 0!==c){if(Xc.cancel(l.current),"number"===typeof c)a(c);else if(c&&"object"===Cr(c)){var u,h=c.align;u="index"in c?c.index:e.findIndex((function(t){return i(t)===c.key}));var p=c.offset,d=void 0===p?0:p;!function s(c,p){if(!(c<0)&&t.current){var f=t.current.clientHeight,g=!1,m=p;if(f){for(var y=p||h,v=0,x=0,_=0,b=Math.min(e.length,u),w=0;w<=b;w+=1){var S=i(e[w]);x=v;var C=n.get(S);v=_=x+(void 0===C?r:C),w===u&&void 0===C&&(g=!0)}var E=null;switch(y){case"top":E=x-d;break;case"bottom":E=_-f+d;break;default:var k=t.current.scrollTop;x<k?m="top":_>k+f&&(m="bottom")}null!==E&&E!==t.current.scrollTop&&a(E)}l.current=Xc((function(){g&&o(),s(c-1,m)}),2)}}(3)}}else s()}}(O,P,H,a,R,V,N,(function(){var t;null===(t=D.current)||void 0===t||t.delayHidden()}));m.useImperativeHandle(e,(function(){return{scrollTo:at}})),_d((function(){if(v){var t=P.slice(q,Y+1);v(t,P)}}),[q,Y,P]);var st=function(t,e,n,r,i,o){var a=o.getKey;return t.slice(e,n+1).map((function(t,n){var o=i(t,e+n,{}),s=a(t);return m.createElement(bE,{key:s,setRef:function(e){return r(t,e)}},o)}))}(P,q,Y,U,h,L),lt=null;return o&&(lt=Or(Ir({},l?"height":"maxHeight",o),PE),b&&(lt.overflowY="hidden",M&&(lt.pointerEvents="none"))),m.createElement("div",Ui({style:Or(Or({},c),{},{position:"relative"}),className:I},_),m.createElement(g,{className:"".concat(r,"-holder"),style:lt,ref:O,onScroll:function(t){var e=t.currentTarget.scrollTop;e!==C&&N(e),null===y||void 0===y||y(t)}},m.createElement(vE,{prefixCls:r,height:X,offset:Z,onInnerResize:V,ref:A,innerProps:x},st)),b&&m.createElement(_E,{ref:D,prefixCls:r,scrollTop:C,height:o,scrollHeight:X,count:P.length,onScroll:function(t){N(t)},onStartMove:function(){T(!0)},onStopMove:function(){T(!1)}}))}var AE=m.forwardRef(OE);AE.displayName="List";var DE=AE,RE=m.createContext(null);var LE=["disabled","title","children","style","className"];function NE(t){return"string"===typeof t||"number"===typeof t}var FE=function(t,e){var n=m.useContext(cC),r=n.prefixCls,i=n.id,o=n.open,a=n.multiple,s=n.mode,l=n.searchValue,c=n.toggleOpen,u=n.notFoundContent,h=n.onPopupScroll,p=m.useContext(RE),d=p.flattenOptions,f=p.onActiveValue,g=p.defaultActiveFirstOption,y=p.onSelect,v=p.menuItemSelectedIcon,x=p.rawValues,_=p.fieldNames,b=p.virtual,w=p.listHeight,S=p.listItemHeight,C="".concat(r,"-item"),E=qr((function(){return d}),[o,d],(function(t,e){return e[0]&&t[1]!==e[1]})),k=m.useRef(null),M=function(t){t.preventDefault()},T=function(t){k.current&&k.current.scrollTo("number"===typeof t?{index:t}:t)},I=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=E.length,r=0;r<n;r+=1){var i=(t+r*e+n)%n,o=E[i],a=o.group,s=o.data;if(!a&&!s.disabled)return i}return-1},P=Ri(m.useState((function(){return I(0)})),2),O=P[0],A=P[1],D=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];A(t);var n={source:e?"keyboard":"mouse"},r=E[t];r?f(r.value,t,n):f(null,-1,n)};(0,m.useEffect)((function(){D(!1!==g?I(0):-1)}),[E.length,l]);var R=m.useCallback((function(t){return x.has(t)&&"combobox"!==s}),[s,Sr(x).toString(),x.size]);(0,m.useEffect)((function(){var t,e=setTimeout((function(){if(!a&&o&&1===x.size){var t=Array.from(x)[0],e=E.findIndex((function(e){return e.data.value===t}));-1!==e&&(D(e),T(e))}}));o&&(null===(t=k.current)||void 0===t||t.scrollTo(void 0));return function(){return clearTimeout(e)}}),[o,l,d.length]);var L=function(t){void 0!==t&&y(t,{selected:!x.has(t)}),a||c(!1)};if(m.useImperativeHandle(e,(function(){return{onKeyDown:function(t){var e=t.which,n=t.ctrlKey;switch(e){case sh.N:case sh.P:case sh.UP:case sh.DOWN:var r=0;if(e===sh.UP?r=-1:e===sh.DOWN?r=1:/(mac\sos|macintosh)/i.test(navigator.appVersion)&&n&&(e===sh.N?r=1:e===sh.P&&(r=-1)),0!==r){var i=I(O+r,r);T(i),D(i,!0)}break;case sh.ENTER:var a=E[O];a&&!a.data.disabled?L(a.value):L(void 0),o&&t.preventDefault();break;case sh.ESC:c(!1),o&&t.stopPropagation()}},onKeyUp:function(){},scrollTo:function(t){T(t)}}})),0===E.length)return m.createElement("div",{role:"listbox",id:"".concat(i,"_list"),className:"".concat(C,"-empty"),onMouseDown:M},u);var N=Object.keys(_).map((function(t){return _[t]})),F=function(t){return t.label};function z(t,e){return{role:t.group?"presentation":"option",id:"".concat(i,"_list_").concat(e)}}var B=function(t){var e=E[t];if(!e)return null;var n=e.data||{},r=n.value,i=e.group,o=zd(n,!0),a=F(e);return e?m.createElement("div",Ui({"aria-label":"string"!==typeof a||i?null:a},o,{key:t},z(e,t),{"aria-selected":R(r)}),r):null},$={role:"listbox",id:"".concat(i,"_list")};return m.createElement(m.Fragment,null,b&&m.createElement("div",Ui({},$,{style:{height:0,width:0,overflow:"hidden"}}),B(O-1),B(O),B(O+1)),m.createElement(DE,{itemKey:"key",ref:k,data:E,height:w,itemHeight:S,fullHeight:!1,onMouseDown:M,onScroll:h,virtual:b,innerProps:b?null:$},(function(t,e){var n,r=t.group,i=t.groupOption,o=t.data,a=t.label,s=t.value,l=o.key;if(r){var c,u=null!==(c=o.title)&&void 0!==c?c:NE(a)?a.toString():void 0;return m.createElement("div",{className:ic()(C,"".concat(C,"-group")),title:u},void 0!==a?a:l)}var h=o.disabled,p=o.title,d=(o.children,o.style),f=o.className,g=Gh(Zo(o,LE),N),y=R(s),x="".concat(C,"-option"),_=ic()(C,x,f,(Ir(n={},"".concat(x,"-grouped"),i),Ir(n,"".concat(x,"-active"),O===e&&!h),Ir(n,"".concat(x,"-disabled"),h),Ir(n,"".concat(x,"-selected"),y),n)),w=F(t),S=!v||"function"===typeof v||y,E="number"===typeof w?w:w||s,k=NE(E)?E.toString():void 0;return void 0!==p&&(k=p),m.createElement("div",Ui({},zd(g),b?{}:z(t,e),{"aria-selected":y,className:_,title:k,onMouseMove:function(){O===e||h||D(e)},onClick:function(){h||L(s)},style:d}),m.createElement("div",{className:"".concat(x,"-content")},E),m.isValidElement(v)||y,S&&m.createElement(AC,{className:"".concat(C,"-option-state"),customizeIcon:v,customizeIconProps:{isSelected:y}},y?"\u2713":null))})))},zE=m.forwardRef(FE);zE.displayName="OptionList";var BE=zE;var $E=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","listHeight","listItemHeight","value","defaultValue","labelInValue","onChange"],jE=["inputValue"];var UE=m.forwardRef((function(t,e){var n=t.id,r=t.mode,i=t.prefixCls,o=void 0===i?"rc-select":i,a=t.backfill,s=t.fieldNames,l=t.inputValue,c=t.searchValue,u=t.onSearch,h=t.autoClearSearchValue,p=void 0===h||h,d=t.onSelect,f=t.onDeselect,g=t.dropdownMatchSelectWidth,y=void 0===g||g,v=t.filterOption,x=t.filterSort,_=t.optionFilterProp,b=t.optionLabelProp,w=t.options,S=t.children,C=t.defaultActiveFirstOption,E=t.menuItemSelectedIcon,k=t.virtual,M=t.listHeight,T=void 0===M?200:M,I=t.listItemHeight,P=void 0===I?20:I,O=t.value,A=t.defaultValue,D=t.labelInValue,R=t.onChange,L=Zo(t,$E),N=lE(n),F=nE(r),z=!(w||!S),B=m.useMemo((function(){return(void 0!==v||"combobox"!==r)&&v}),[v,r]),$=m.useMemo((function(){return JC(s,z)}),[JSON.stringify(s),z]),j=Ri(Cy("",{value:void 0!==c?c:l,postState:function(t){return t||""}}),2),U=j[0],V=j[1],H=function(t,e,n,r,i){return m.useMemo((function(){var o=t;!t&&(o=hE(e));var a=new Map,s=new Map,l=function(t,e,n){n&&"string"===typeof n&&t.set(e[n],e)};return function t(e){for(var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=0;c<e.length;c+=1){var u=e[c];!u[n.options]||o?(a.set(u[n.value],u),l(s,u,n.label),l(s,u,r),l(s,u,i)):t(u[n.options],!0)}}(o),{options:o,valueOptions:a,labelOptions:s}}),[t,e,n,r,i])}(w,S,$,_,b),G=H.valueOptions,W=H.labelOptions,X=H.options,q=m.useCallback((function(t){return NC(t).map((function(t){var e,n,r,i,o,a;(function(t){return!t||"object"!==Cr(t)})(t)?e=t:(r=t.key,n=t.label,e=null!==(a=t.value)&&void 0!==a?a:r);var s,l=G.get(e);l&&(void 0===n&&(n=null===l||void 0===l?void 0:l[b||$.label]),void 0===r&&(r=null!==(s=null===l||void 0===l?void 0:l.key)&&void 0!==s?s:e),i=null===l||void 0===l?void 0:l.disabled,o=null===l||void 0===l?void 0:l.title);return{label:n,value:e,key:r,disabled:i,title:o}}))}),[$,b,G]),Y=Ri(Cy(A,{value:O}),2),Z=Y[0],K=Y[1],J=function(t,e){var n=m.useRef({values:new Map,options:new Map});return[m.useMemo((function(){var r=n.current,i=r.values,o=r.options,a=t.map((function(t){var e;return void 0===t.label?Or(Or({},t),{},{label:null===(e=i.get(t.value))||void 0===e?void 0:e.label}):t})),s=new Map,l=new Map;return a.forEach((function(t){s.set(t.value,t),l.set(t.value,e.get(t.value)||o.get(t.value))})),n.current.values=s,n.current.options=l,a}),[t,e]),m.useCallback((function(t){return e.get(t)||n.current.options.get(t)}),[e])]}(m.useMemo((function(){var t,e=q(Z);return"combobox"!==r||null!==(t=e[0])&&void 0!==t&&t.value?e:[]}),[Z,q,r]),G),Q=Ri(J,2),tt=Q[0],et=Q[1],nt=m.useMemo((function(){if(!r&&1===tt.length){var t=tt[0];if(null===t.value&&(null===t.label||void 0===t.label))return[]}return tt.map((function(t){var e;return Or(Or({},t),{},{label:null!==(e=t.label)&&void 0!==e?e:t.value})}))}),[r,tt]),rt=m.useMemo((function(){return new Set(tt.map((function(t){return t.value})))}),[tt]);m.useEffect((function(){if("combobox"===r){var t,e=null===(t=tt[0])||void 0===t?void 0:t.value;V(function(t){return void 0!==t&&null!==t}(e)?String(e):"")}}),[tt]);var it=pE((function(t,e){var n,r=null!==e&&void 0!==e?e:t;return Ir(n={},$.value,t),Ir(n,$.label,r),n})),ot=m.useMemo((function(){if("tags"!==r)return X;var t=Sr(X);return Sr(tt).sort((function(t,e){return t.value<e.value?-1:1})).forEach((function(e){var n=e.value;(function(t){return G.has(t)})(n)||t.push(it(n,e.label))})),t}),[it,X,G,tt,r]),at=function(t,e,n,r,i){return m.useMemo((function(){if(!n||!1===r)return t;var o=e.options,a=e.label,s=e.value,l=[],c="function"===typeof r,u=n.toUpperCase(),h=c?r:function(t,e){return i?oE(e[i],u):e[o]?oE(e["children"!==a?a:"label"],u):oE(e[s],u)},p=c?function(t){return QC(t)}:function(t){return t};return t.forEach((function(t){if(t[o])if(h(n,p(t)))l.push(t);else{var e=t[o].filter((function(t){return h(n,p(t))}));e.length&&l.push(Or(Or({},t),{},Ir({},o,e)))}else h(n,p(t))&&l.push(t)})),l}),[t,r,i,n,e])}(ot,$,U,B,_),st=m.useMemo((function(){return"tags"!==r||!U||at.some((function(t){return t[_||"value"]===U}))?at:[it(U)].concat(Sr(at))}),[it,_,r,at,U]),lt=m.useMemo((function(){return x?Sr(st).sort((function(t,e){return x(t,e)})):st}),[st,x]),ct=m.useMemo((function(){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.fieldNames,r=e.childrenAsData,i=[],o=JC(n,!1),a=o.label,s=o.value,l=o.options;return function t(e,n){e.forEach((function(e){var o=e[a];if(n||!(l in e)){var c=e[s];i.push({key:KC(e,i.length),groupOption:n,data:e,label:o,value:c})}else{var u=o;void 0===u&&r&&(u=e.label),i.push({key:KC(e,i.length),group:!0,data:e,label:u}),t(e[l],!0)}}))}(t,!1),i}(lt,{fieldNames:$,childrenAsData:z})}),[lt,$,z]),ut=function(t){var e=q(t);if(K(e),R&&(e.length!==tt.length||e.some((function(t,e){var n;return(null===(n=tt[e])||void 0===n?void 0:n.value)!==(null===t||void 0===t?void 0:t.value)})))){var n=D?e:e.map((function(t){return t.value})),r=e.map((function(t){return QC(et(t.value))}));R(F?n:n[0],F?r:r[0])}},ht=Ri(m.useState(null),2),pt=ht[0],dt=ht[1],ft=Ri(m.useState(0),2),gt=ft[0],mt=ft[1],yt=void 0!==C?C:"combobox"!==r,vt=m.useCallback((function(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).source,i=void 0===n?"keyboard":n;mt(e),a&&"combobox"===r&&null!==t&&"keyboard"===i&&dt(String(t))}),[a,r]),xt=function(t,e,n){var r=function(){var e,n=et(t);return[D?{label:null===n||void 0===n?void 0:n[$.label],value:t,key:null!==(e=null===n||void 0===n?void 0:n.key)&&void 0!==e?e:t}:t,QC(n)]};if(e&&d){var i=Ri(r(),2),o=i[0],a=i[1];d(o,a)}else if(!e&&f&&"clear"!==n){var s=Ri(r(),2),l=s[0],c=s[1];f(l,c)}},_t=pE((function(t,e){var n,i=!F||e.selected;n=i?F?[].concat(Sr(tt),[t]):[t]:tt.filter((function(e){return e.value!==t})),ut(n),xt(t,i),"combobox"===r?dt(""):nE&&!p||(V(""),dt(""))})),bt=m.useMemo((function(){var t=!1!==k&&!1!==y;return Or(Or({},H),{},{flattenOptions:ct,onActiveValue:vt,defaultActiveFirstOption:yt,onSelect:_t,menuItemSelectedIcon:E,rawValues:rt,fieldNames:$,virtual:t,listHeight:T,listItemHeight:P,childrenAsData:z})}),[H,ct,vt,yt,_t,E,rt,$,k,y,T,P,z]);return m.createElement(RE.Provider,{value:bt},m.createElement(iE,Ui({},L,{id:N,prefixCls:o,ref:e,omitDomProps:jE,mode:r,displayValues:nt,onDisplayValuesChange:function(t,e){ut(t);var n=e.type,r=e.values;"remove"!==n&&"clear"!==n||r.forEach((function(t){xt(t.value,!1,n)}))},searchValue:U,onSearch:function(t,e){if(V(t),dt(null),"submit"!==e.source)"blur"!==e.source&&("combobox"===r&&ut(t),null===u||void 0===u||u(t));else{var n=(t||"").trim();if(n){var i=Array.from(new Set([].concat(Sr(rt),[n])));ut(i),xt(n,!0),V("")}}},autoClearSearchValue:p,onSearchSplit:function(t){var e=t;"tags"!==r&&(e=t.map((function(t){var e=W.get(t);return null===e||void 0===e?void 0:e.value})).filter((function(t){return void 0!==t})));var n=Array.from(new Set([].concat(Sr(rt),Sr(e))));ut(n),n.forEach((function(t){xt(t,!0)}))},dropdownMatchSelectWidth:y,OptionList:BE,emptyOptions:!ct.length,activeValue:pt,activeDescendantId:"".concat(N,"_list_").concat(gt)})))}));var VE=UE;VE.Option=mE,VE.OptGroup=fE;var HE=VE;function GE(t,e,n,r){return function(i){const{prefixCls:o,style:a}=i,s=m.useRef(null),[l,c]=m.useState(0),[u,h]=m.useState(0),[p,d]=Cy(!1,{value:i.open}),{getPrefixCls:f}=m.useContext(Gl),g=f(e||"select",o);m.useEffect((()=>{if(d(!0),"undefined"!==typeof ResizeObserver){const t=new ResizeObserver((t=>{const e=t[0].target;c(e.offsetHeight+8),h(e.offsetWidth)})),e=setInterval((()=>{var r;const i=n?`.${n(g)}`:`.${g}-dropdown`,o=null===(r=s.current)||void 0===r?void 0:r.querySelector(i);o&&(clearInterval(e),t.observe(o))}),10);return()=>{clearInterval(e),t.disconnect()}}}),[]);let y=Object.assign(Object.assign({},i),{style:Object.assign(Object.assign({},a),{margin:0}),open:p,visible:p,getPopupContainer:()=>s.current});return r&&(y=r(y)),m.createElement(Iu,{theme:{token:{motion:!1}}},m.createElement("div",{ref:s,style:{paddingBottom:l,position:"relative",minWidth:u}},m.createElement(t,Object.assign({},y))))}}const WE=new Uo("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),XE=new Uo("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),qE=new Uo("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),YE=new Uo("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),ZE=new Uo("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),KE=new Uo("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),JE=new Uo("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),QE=new Uo("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),tk={"slide-up":{inKeyframes:WE,outKeyframes:XE},"slide-down":{inKeyframes:qE,outKeyframes:YE},"slide-left":{inKeyframes:ZE,outKeyframes:KE},"slide-right":{inKeyframes:JE,outKeyframes:QE}},ek=(t,e)=>{const{antCls:n}=t,r=`${n}-${e}`,{inKeyframes:i,outKeyframes:o}=tk[e];return[sf(r,i,o,t.motionDurationMid),{[`\n      ${r}-enter,\n      ${r}-appear\n    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:t.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${r}-leave`]:{animationTimingFunction:t.motionEaseInQuint}}]},nk=new Uo("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),rk=new Uo("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),ik=new Uo("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),ok=new Uo("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),ak=new Uo("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),sk=new Uo("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),lk={"move-up":{inKeyframes:new Uo("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),outKeyframes:new Uo("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}})},"move-down":{inKeyframes:nk,outKeyframes:rk},"move-left":{inKeyframes:ik,outKeyframes:ok},"move-right":{inKeyframes:ak,outKeyframes:sk}},ck=(t,e)=>{const{antCls:n}=t,r=`${n}-${e}`,{inKeyframes:i,outKeyframes:o}=lk[e];return[sf(r,i,o,t.motionDurationMid),{[`\n        ${r}-enter,\n        ${r}-appear\n      `]:{opacity:0,animationTimingFunction:t.motionEaseOutCirc},[`${r}-leave`]:{animationTimingFunction:t.motionEaseInOutCirc}}]},uk=t=>{const{controlPaddingHorizontal:e}=t;return{position:"relative",display:"block",minHeight:t.controlHeight,padding:`${(t.controlHeight-t.fontSize*t.lineHeight)/2}px ${e}px`,color:t.colorText,fontWeight:"normal",fontSize:t.fontSize,lineHeight:t.lineHeight,boxSizing:"border-box"}};var hk=t=>{const{antCls:e,componentCls:n}=t,r=`${n}-item`;return[{[`${n}-dropdown`]:Object.assign(Object.assign({},fu(t)),{position:"absolute",top:-9999,zIndex:t.zIndexPopup,boxSizing:"border-box",padding:t.paddingXXS,overflow:"hidden",fontSize:t.fontSize,fontVariant:"initial",backgroundColor:t.colorBgElevated,borderRadius:t.borderRadiusLG,outline:"none",boxShadow:t.boxShadowSecondary,[`\n            &${e}-slide-up-enter${e}-slide-up-enter-active${n}-dropdown-placement-bottomLeft,\n            &${e}-slide-up-appear${e}-slide-up-appear-active${n}-dropdown-placement-bottomLeft\n          `]:{animationName:WE},[`\n            &${e}-slide-up-enter${e}-slide-up-enter-active${n}-dropdown-placement-topLeft,\n            &${e}-slide-up-appear${e}-slide-up-appear-active${n}-dropdown-placement-topLeft\n          `]:{animationName:qE},[`&${e}-slide-up-leave${e}-slide-up-leave-active${n}-dropdown-placement-bottomLeft`]:{animationName:XE},[`&${e}-slide-up-leave${e}-slide-up-leave-active${n}-dropdown-placement-topLeft`]:{animationName:YE},"&-hidden":{display:"none"},[`${r}`]:Object.assign(Object.assign({},uk(t)),{cursor:"pointer",transition:`background ${t.motionDurationSlow} ease`,borderRadius:t.borderRadiusSM,"&-group":{color:t.colorTextDescription,fontSize:t.fontSizeSM,cursor:"default"},"&-option":{display:"flex","&-content":Object.assign(Object.assign({flex:"auto"},du),{"> *":Object.assign({},du)}),"&-state":{flex:"none"},[`&-active:not(${r}-option-disabled)`]:{backgroundColor:t.controlItemBgHover},[`&-selected:not(${r}-option-disabled)`]:{color:t.colorText,fontWeight:t.fontWeightStrong,backgroundColor:t.controlItemBgActive,[`${r}-option-state`]:{color:t.colorPrimary}},"&-disabled":{[`&${r}-option-selected`]:{backgroundColor:t.colorBgContainerDisabled},color:t.colorTextDisabled,cursor:"not-allowed"},"&-grouped":{paddingInlineStart:2*t.controlPaddingHorizontal}}}),"&-rtl":{direction:"rtl"}})},ek(t,"slide-up"),ek(t,"slide-down"),ck(t,"move-up"),ck(t,"move-down")]};const pk=t=>{let{controlHeightSM:e,controlHeight:n,lineWidth:r}=t;const i=(n-e)/2-r;return[i,Math.ceil(i/2)]};function dk(t,e){const{componentCls:n,iconCls:r}=t,i=`${n}-selection-overflow`,o=t.controlHeightSM,[a]=pk(t);return{[`${n}-multiple${e?`${n}-${e}`:""}`]:{fontSize:t.fontSize,[i]:{position:"relative",display:"flex",flex:"auto",flexWrap:"wrap",maxWidth:"100%","&-item":{flex:"none",alignSelf:"center",maxWidth:"100%",display:"inline-flex"}},[`${n}-selector`]:{display:"flex",flexWrap:"wrap",alignItems:"center",padding:a-2+"px 4px",borderRadius:t.borderRadius,[`${n}-show-search&`]:{cursor:"text"},[`${n}-disabled&`]:{background:t.colorBgContainerDisabled,cursor:"not-allowed"},"&:after":{display:"inline-block",width:0,margin:"2px 0",lineHeight:`${o}px`,content:'"\\a0"'}},[`\n        &${n}-show-arrow ${n}-selector,\n        &${n}-allow-clear ${n}-selector\n      `]:{paddingInlineEnd:t.fontSizeIcon+t.controlPaddingHorizontal},[`${n}-selection-item`]:{position:"relative",display:"flex",flex:"none",boxSizing:"border-box",maxWidth:"100%",height:o,marginTop:2,marginBottom:2,lineHeight:o-2*t.lineWidth+"px",background:t.colorFillSecondary,borderRadius:t.borderRadiusSM,cursor:"default",transition:`font-size ${t.motionDurationSlow}, line-height ${t.motionDurationSlow}, height ${t.motionDurationSlow}`,userSelect:"none",marginInlineEnd:4,paddingInlineStart:t.paddingXS,paddingInlineEnd:t.paddingXS/2,[`${n}-disabled&`]:{color:t.colorTextDisabled,cursor:"not-allowed"},"&-content":{display:"inline-block",marginInlineEnd:t.paddingXS/2,overflow:"hidden",whiteSpace:"pre",textOverflow:"ellipsis"},"&-remove":Object.assign(Object.assign({},{display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),{display:"inline-block",color:t.colorIcon,fontWeight:"bold",fontSize:10,lineHeight:"inherit",cursor:"pointer",[`> ${r}`]:{verticalAlign:"-0.2em"},"&:hover":{color:t.colorIconHover}})},[`${i}-item + ${i}-item`]:{[`${n}-selection-search`]:{marginInlineStart:0}},[`${n}-selection-search`]:{display:"inline-flex",position:"relative",maxWidth:"100%",marginInlineStart:t.inputPaddingHorizontalBase-a,"\n          &-input,\n          &-mirror\n        ":{height:o,fontFamily:t.fontFamily,lineHeight:`${o}px`,transition:`all ${t.motionDurationSlow}`},"&-input":{width:"100%",minWidth:4.1},"&-mirror":{position:"absolute",top:0,insetInlineStart:0,insetInlineEnd:"auto",zIndex:999,whiteSpace:"pre",visibility:"hidden"}},[`${n}-selection-placeholder `]:{position:"absolute",top:"50%",insetInlineStart:t.inputPaddingHorizontalBase,insetInlineEnd:t.inputPaddingHorizontalBase,transform:"translateY(-50%)",transition:`all ${t.motionDurationSlow}`}}}}var fk=t=>{const{componentCls:e}=t,n=vh(t,{controlHeight:t.controlHeightSM,controlHeightSM:t.controlHeightXS,borderRadius:t.borderRadiusSM,borderRadiusSM:t.borderRadiusXS}),r=vh(t,{fontSize:t.fontSizeLG,controlHeight:t.controlHeightLG,controlHeightSM:t.controlHeight,borderRadius:t.borderRadiusLG,borderRadiusSM:t.borderRadius}),[,i]=pk(t);return[dk(t),dk(n,"sm"),{[`${e}-multiple${e}-sm`]:{[`${e}-selection-placeholder`]:{insetInline:t.controlPaddingHorizontalSM-t.lineWidth},[`${e}-selection-search`]:{marginInlineStart:i}}},dk(r,"lg")]};function gk(t,e){const{componentCls:n,inputPaddingHorizontalBase:r,borderRadius:i}=t,o=t.controlHeight-2*t.lineWidth,a=Math.ceil(1.25*t.fontSize);return{[`${n}-single${e?`${n}-${e}`:""}`]:{fontSize:t.fontSize,[`${n}-selector`]:Object.assign(Object.assign({},fu(t)),{display:"flex",borderRadius:i,[`${n}-selection-search`]:{position:"absolute",top:0,insetInlineStart:r,insetInlineEnd:r,bottom:0,"&-input":{width:"100%"}},[`\n          ${n}-selection-item,\n          ${n}-selection-placeholder\n        `]:{padding:0,lineHeight:`${o}px`,transition:`all ${t.motionDurationSlow}, visibility 0s`,"@supports (-moz-appearance: meterbar)":{lineHeight:`${o}px`}},[`${n}-selection-item`]:{position:"relative",userSelect:"none"},[`${n}-selection-placeholder`]:{transition:"none",pointerEvents:"none"},[["&:after",`${n}-selection-item:after`,`${n}-selection-placeholder:after`].join(",")]:{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'}}),[`\n        &${n}-show-arrow ${n}-selection-item,\n        &${n}-show-arrow ${n}-selection-placeholder\n      `]:{paddingInlineEnd:a},[`&${n}-open ${n}-selection-item`]:{color:t.colorTextPlaceholder},[`&:not(${n}-customize-input)`]:{[`${n}-selector`]:{width:"100%",height:t.controlHeight,padding:`0 ${r}px`,[`${n}-selection-search-input`]:{height:o},"&:after":{lineHeight:`${o}px`}}},[`&${n}-customize-input`]:{[`${n}-selector`]:{"&:after":{display:"none"},[`${n}-selection-search`]:{position:"static",width:"100%"},[`${n}-selection-placeholder`]:{position:"absolute",insetInlineStart:0,insetInlineEnd:0,padding:`0 ${r}px`,"&:after":{display:"none"}}}}}}}function mk(t){const{componentCls:e}=t,n=t.controlPaddingHorizontalSM-t.lineWidth;return[gk(t),gk(vh(t,{controlHeight:t.controlHeightSM,borderRadius:t.borderRadiusSM}),"sm"),{[`${e}-single${e}-sm`]:{[`&:not(${e}-customize-input)`]:{[`${e}-selection-search`]:{insetInlineStart:n,insetInlineEnd:n},[`${e}-selector`]:{padding:`0 ${n}px`},[`&${e}-show-arrow ${e}-selection-search`]:{insetInlineEnd:n+1.5*t.fontSize},[`\n            &${e}-show-arrow ${e}-selection-item,\n            &${e}-show-arrow ${e}-selection-placeholder\n          `]:{paddingInlineEnd:1.5*t.fontSize}}}},gk(vh(t,{controlHeight:t.controlHeightLG,fontSize:t.fontSizeLG,borderRadius:t.borderRadiusLG}),"lg")]}const yk=t=>{const{componentCls:e}=t;return{position:"relative",backgroundColor:t.colorBgContainer,border:`${t.lineWidth}px ${t.lineType} ${t.colorBorder}`,transition:`all ${t.motionDurationMid} ${t.motionEaseInOut}`,input:{cursor:"pointer"},[`${e}-show-search&`]:{cursor:"text",input:{cursor:"auto",color:"inherit"}},[`${e}-disabled&`]:{color:t.colorTextDisabled,background:t.colorBgContainerDisabled,cursor:"not-allowed",[`${e}-multiple&`]:{background:t.colorBgContainerDisabled},input:{cursor:"not-allowed"}}}},vk=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{componentCls:r,borderHoverColor:i,outlineColor:o,antCls:a}=e,s=n?{[`${r}-selector`]:{borderColor:i}}:{};return{[t]:{[`&:not(${r}-disabled):not(${r}-customize-input):not(${a}-pagination-size-changer)`]:Object.assign(Object.assign({},s),{[`${r}-focused& ${r}-selector`]:{borderColor:i,boxShadow:`0 0 0 ${e.controlOutlineWidth}px ${o}`,outline:0},[`&:hover ${r}-selector`]:{borderColor:i}})}}},xk=t=>{const{componentCls:e}=t;return{[`${e}-selection-search-input`]:{margin:0,padding:0,background:"transparent",border:"none",outline:"none",appearance:"none","&::-webkit-search-cancel-button":{display:"none","-webkit-appearance":"none"}}}},_k=t=>{const{componentCls:e,inputPaddingHorizontalBase:n,iconCls:r}=t;return{[e]:Object.assign(Object.assign({},fu(t)),{position:"relative",display:"inline-block",cursor:"pointer",[`&:not(${e}-customize-input) ${e}-selector`]:Object.assign(Object.assign({},yk(t)),xk(t)),[`${e}-selection-item`]:Object.assign(Object.assign({flex:1,fontWeight:"normal"},du),{"> *":Object.assign({lineHeight:"inherit"},du)}),[`${e}-selection-placeholder`]:Object.assign(Object.assign({},du),{flex:1,color:t.colorTextPlaceholder,pointerEvents:"none"}),[`${e}-arrow`]:Object.assign(Object.assign({},{display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:n,height:t.fontSizeIcon,marginTop:-t.fontSizeIcon/2,color:t.colorTextQuaternary,fontSize:t.fontSizeIcon,lineHeight:1,textAlign:"center",pointerEvents:"none",display:"flex",alignItems:"center",[r]:{verticalAlign:"top",transition:`transform ${t.motionDurationSlow}`,"> svg":{verticalAlign:"top"},[`&:not(${e}-suffix)`]:{pointerEvents:"auto"}},[`${e}-disabled &`]:{cursor:"not-allowed"},"> *:not(:last-child)":{marginInlineEnd:8}}),[`${e}-clear`]:{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:n,zIndex:1,display:"inline-block",width:t.fontSizeIcon,height:t.fontSizeIcon,marginTop:-t.fontSizeIcon/2,color:t.colorTextQuaternary,fontSize:t.fontSizeIcon,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",background:t.colorBgContainer,cursor:"pointer",opacity:0,transition:`color ${t.motionDurationMid} ease, opacity ${t.motionDurationSlow} ease`,textRendering:"auto","&:before":{display:"block"},"&:hover":{color:t.colorTextTertiary}},"&:hover":{[`${e}-clear`]:{opacity:1}}}),[`${e}-has-feedback`]:{[`${e}-clear`]:{insetInlineEnd:n+t.fontSize+t.paddingXXS}}}},bk=t=>{const{componentCls:e}=t;return[{[e]:{[`&-borderless ${e}-selector`]:{backgroundColor:"transparent !important",borderColor:"transparent !important",boxShadow:"none !important"},[`&${e}-in-form-item`]:{width:"100%"}}},_k(t),mk(t),fk(t),hk(t),{[`${e}-rtl`]:{direction:"rtl"}},vk(e,vh(t,{borderHoverColor:t.colorPrimaryHover,outlineColor:t.controlOutline})),vk(`${e}-status-error`,vh(t,{borderHoverColor:t.colorErrorHover,outlineColor:t.colorErrorOutline}),!0),vk(`${e}-status-warning`,vh(t,{borderHoverColor:t.colorWarningHover,outlineColor:t.colorWarningOutline}),!0),Mp(t,{borderElCls:`${e}-selector`,focusElCls:`${e}-focused`})]};var wk=bh("Select",((t,e)=>{let{rootPrefixCls:n}=e;const r=vh(t,{rootPrefixCls:n,inputPaddingHorizontalBase:t.paddingSM-1});return[bk(r)]}),(t=>({zIndexPopup:t.zIndexPopupBase+50})));function Sk(t,e){return t||(t=>{const e={overflow:{adjustX:!0,adjustY:!0,shiftY:!0},htmlRegion:"scroll"===t?"scroll":"visible"};return{bottomLeft:Object.assign(Object.assign({},e),{points:["tl","bl"],offset:[0,4]}),bottomRight:Object.assign(Object.assign({},e),{points:["tr","br"],offset:[0,4]}),topLeft:Object.assign(Object.assign({},e),{points:["bl","tl"],offset:[0,-4]}),topRight:Object.assign(Object.assign({},e),{points:["br","tr"],offset:[0,-4]})}})(e)}var Ck=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const Ek="SECRET_COMBOBOX_MODE_DO_NOT_USE",kk=(t,e)=>{var n,{prefixCls:r,bordered:i=!0,className:o,rootClassName:a,getPopupContainer:s,popupClassName:l,dropdownClassName:c,listHeight:u=256,placement:h,listItemHeight:p=24,size:d,disabled:f,notFoundContent:g,status:y,showArrow:v,builtinPlacements:x,dropdownMatchSelectWidth:_,popupMatchSelectWidth:b}=t,w=Ck(t,["prefixCls","bordered","className","rootClassName","getPopupContainer","popupClassName","dropdownClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","showArrow","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth"]);const{getPopupContainer:S,getPrefixCls:C,renderEmpty:E,direction:k,virtual:M,popupMatchSelectWidth:T,popupOverflow:I,select:P}=m.useContext(Gl),O=C("select",r),A=C(),{compactSize:D,compactItemClassnames:R}=lp(O,k),[L,N]=wk(O),F=m.useMemo((()=>{const{mode:t}=w;if("combobox"!==t)return t===Ek?"combobox":t}),[w.mode]),z="multiple"===F||"tags"===F,B=function(t){return null===t||void 0===t||t}(v),$=null!==(n=null!==b&&void 0!==b?b:_)&&void 0!==n?n:T,{status:j,hasFeedback:U,isFormItemInput:V,feedbackIcon:H}=m.useContext(tf),G=C_(j,y);let W;W=void 0!==g?g:"combobox"===F?null:(null===E||void 0===E?void 0:E("Select"))||m.createElement($S,{componentName:"Select"});const{suffixIcon:X,itemIcon:q,removeIcon:Y,clearIcon:Z}=function(t){let{suffixIcon:e,clearIcon:n,menuItemSelectedIcon:r,removeIcon:i,loading:o,multiple:a,hasFeedback:s,prefixCls:l,showArrow:c,feedbackIcon:u}=t;const h=null!==n&&void 0!==n?n:m.createElement(Qu,null),p=t=>m.createElement(m.Fragment,null,!1!==c&&t,s&&u);let d=null;if(void 0!==e)d=p(e);else if(o)d=p(m.createElement(Xu,{spin:!0}));else{const t=`${l}-suffix`;d=e=>{let{open:n,showSearch:r}=e;return p(n&&r?m.createElement(B_,{className:t}):m.createElement(lb,{className:t}))}}let f=null;f=void 0!==r?r:a?m.createElement(qv,null):null;let g=null;return g=void 0!==i?i:m.createElement(Ih,null),{clearIcon:h,suffixIcon:d,itemIcon:f,removeIcon:g}}(Object.assign(Object.assign({},w),{multiple:z,hasFeedback:U,feedbackIcon:H,showArrow:B,prefixCls:O})),K=Gh(w,["suffixIcon","itemIcon"]),J=ic()(l||c,{[`${O}-dropdown-${k}`]:"rtl"===k},a,N),Q=Jl((t=>{var e;return null!==(e=null!==D&&void 0!==D?D:d)&&void 0!==e?e:t})),tt=m.useContext(Kl),et=null!==f&&void 0!==f?f:tt,nt=ic()({[`${O}-lg`]:"large"===Q,[`${O}-sm`]:"small"===Q,[`${O}-rtl`]:"rtl"===k,[`${O}-borderless`]:!i,[`${O}-in-form-item`]:V},S_(O,G,U),R,o,a,N),rt=m.useMemo((()=>void 0!==h?h:"rtl"===k?"bottomRight":"bottomLeft"),[h,k]),it=Sk(x,I);return L(m.createElement(HE,Object.assign({ref:e,virtual:M,showSearch:null===P||void 0===P?void 0:P.showSearch},K,{dropdownMatchSelectWidth:$,builtinPlacements:it,transitionName:dd(A,pd(h),w.transitionName),listHeight:u,listItemHeight:p,mode:F,prefixCls:O,placement:rt,direction:k,inputIcon:X,menuItemSelectedIcon:q,removeIcon:Y,clearIcon:Z,notFoundContent:W,className:nt,getPopupContainer:s||S,dropdownClassName:J,showArrow:U||B,disabled:et})))};const Mk=m.forwardRef(kk),Tk=GE(Mk);Mk.SECRET_COMBOBOX_MODE_DO_NOT_USE=Ek,Mk.Option=mE,Mk.OptGroup=fE,Mk._InternalPanelDoNotUseOrYouWillBeFired=Tk;var Ik=Mk;const Pk=t=>m.createElement(Ik,Object.assign({},t,{size:"small"})),Ok=t=>m.createElement(Ik,Object.assign({},t,{size:"middle"}));Pk.Option=Ik.Option,Ok.Option=Ik.Option;const Ak=t=>{const{componentCls:e}=t;return{[`${e}-disabled`]:{"&, &:hover":{cursor:"not-allowed",[`${e}-item-link`]:{color:t.colorTextDisabled,cursor:"not-allowed"}},"&:focus-visible":{cursor:"not-allowed",[`${e}-item-link`]:{color:t.colorTextDisabled,cursor:"not-allowed"}}},[`&${e}-disabled`]:{cursor:"not-allowed",[`&${e}-mini`]:{[`\n          &:hover ${e}-item:not(${e}-item-active),\n          &:active ${e}-item:not(${e}-item-active),\n          &:hover ${e}-item-link,\n          &:active ${e}-item-link\n        `]:{backgroundColor:"transparent"}},[`${e}-item`]:{cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},a:{color:t.colorTextDisabled,backgroundColor:"transparent",border:"none",cursor:"not-allowed"},"&-active":{borderColor:t.colorBorder,backgroundColor:t.paginationItemDisabledBgActive,"&:hover, &:active":{backgroundColor:t.paginationItemDisabledBgActive},a:{color:t.paginationItemDisabledColorActive}}},[`${e}-item-link`]:{color:t.colorTextDisabled,cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},[`${e}-simple&`]:{backgroundColor:"transparent","&:hover, &:active":{backgroundColor:"transparent"}}},[`${e}-item-link-icon`]:{opacity:0},[`${e}-item-ellipsis`]:{opacity:1},[`${e}-simple-pager`]:{color:t.colorTextDisabled}},[`&${e}-simple`]:{[`${e}-prev, ${e}-next`]:{[`&${e}-disabled ${e}-item-link`]:{"&:hover, &:active":{backgroundColor:"transparent"}}}}}},Dk=t=>{const{componentCls:e}=t;return{[`&${e}-mini ${e}-total-text, &${e}-mini ${e}-simple-pager`]:{height:t.paginationItemSizeSM,lineHeight:`${t.paginationItemSizeSM}px`},[`&${e}-mini ${e}-item`]:{minWidth:t.paginationItemSizeSM,height:t.paginationItemSizeSM,margin:0,lineHeight:t.paginationItemSizeSM-2+"px"},[`&${e}-mini ${e}-item:not(${e}-item-active)`]:{backgroundColor:"transparent",borderColor:"transparent","&:hover":{backgroundColor:t.colorBgTextHover},"&:active":{backgroundColor:t.colorBgTextActive}},[`&${e}-mini ${e}-prev, &${e}-mini ${e}-next`]:{minWidth:t.paginationItemSizeSM,height:t.paginationItemSizeSM,margin:0,lineHeight:`${t.paginationItemSizeSM}px`,[`&:hover ${e}-item-link`]:{backgroundColor:t.colorBgTextHover},[`&:active ${e}-item-link`]:{backgroundColor:t.colorBgTextActive},[`&${e}-disabled:hover ${e}-item-link`]:{backgroundColor:"transparent"}},[`\n    &${e}-mini ${e}-prev ${e}-item-link,\n    &${e}-mini ${e}-next ${e}-item-link\n    `]:{backgroundColor:"transparent",borderColor:"transparent","&::after":{height:t.paginationItemSizeSM,lineHeight:`${t.paginationItemSizeSM}px`}},[`&${e}-mini ${e}-jump-prev, &${e}-mini ${e}-jump-next`]:{height:t.paginationItemSizeSM,marginInlineEnd:0,lineHeight:`${t.paginationItemSizeSM}px`},[`&${e}-mini ${e}-options`]:{marginInlineStart:t.paginationMiniOptionsMarginInlineStart,"&-size-changer":{top:t.paginationMiniOptionsSizeChangerTop},"&-quick-jumper":{height:t.paginationItemSizeSM,lineHeight:`${t.paginationItemSizeSM}px`,input:Object.assign(Object.assign({},n_(t)),{width:t.paginationMiniQuickJumperInputWidth,height:t.controlHeightSM})}}}},Rk=t=>{const{componentCls:e}=t;return{[`\n    &${e}-simple ${e}-prev,\n    &${e}-simple ${e}-next\n    `]:{height:t.paginationItemSizeSM,lineHeight:`${t.paginationItemSizeSM}px`,verticalAlign:"top",[`${e}-item-link`]:{height:t.paginationItemSizeSM,backgroundColor:"transparent",border:0,"&:hover":{backgroundColor:t.colorBgTextHover},"&:active":{backgroundColor:t.colorBgTextActive},"&::after":{height:t.paginationItemSizeSM,lineHeight:`${t.paginationItemSizeSM}px`}}},[`&${e}-simple ${e}-simple-pager`]:{display:"inline-block",height:t.paginationItemSizeSM,marginInlineEnd:t.marginXS,input:{boxSizing:"border-box",height:"100%",marginInlineEnd:t.marginXS,padding:`0 ${t.paginationItemPaddingInline}px`,textAlign:"center",backgroundColor:t.paginationItemInputBg,border:`${t.lineWidth}px ${t.lineType} ${t.colorBorder}`,borderRadius:t.borderRadius,outline:"none",transition:`border-color ${t.motionDurationMid}`,color:"inherit","&:hover":{borderColor:t.colorPrimary},"&:focus":{borderColor:t.colorPrimaryHover,boxShadow:`${t.inputOutlineOffset}px 0 ${t.controlOutlineWidth}px ${t.controlOutline}`},"&[disabled]":{color:t.colorTextDisabled,backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,cursor:"not-allowed"}}}}},Lk=t=>{const{componentCls:e}=t;return{[`${e}-jump-prev, ${e}-jump-next`]:{outline:0,[`${e}-item-container`]:{position:"relative",[`${e}-item-link-icon`]:{color:t.colorPrimary,fontSize:t.fontSizeSM,opacity:0,transition:`all ${t.motionDurationMid}`,"&-svg":{top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,margin:"auto"}},[`${e}-item-ellipsis`]:{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,display:"block",margin:"auto",color:t.colorTextDisabled,fontFamily:"Arial, Helvetica, sans-serif",letterSpacing:t.paginationEllipsisLetterSpacing,textAlign:"center",textIndent:t.paginationEllipsisTextIndent,opacity:1,transition:`all ${t.motionDurationMid}`}},"&:hover":{[`${e}-item-link-icon`]:{opacity:1},[`${e}-item-ellipsis`]:{opacity:0}},"&:focus-visible":Object.assign({[`${e}-item-link-icon`]:{opacity:1},[`${e}-item-ellipsis`]:{opacity:0}},yu(t))},[`\n    ${e}-prev,\n    ${e}-jump-prev,\n    ${e}-jump-next\n    `]:{marginInlineEnd:t.marginXS},[`\n    ${e}-prev,\n    ${e}-next,\n    ${e}-jump-prev,\n    ${e}-jump-next\n    `]:{display:"inline-block",minWidth:t.paginationItemSize,height:t.paginationItemSize,color:t.colorText,fontFamily:t.paginationFontFamily,lineHeight:`${t.paginationItemSize}px`,textAlign:"center",verticalAlign:"middle",listStyle:"none",borderRadius:t.borderRadius,cursor:"pointer",transition:`all ${t.motionDurationMid}`},[`${e}-prev, ${e}-next`]:{fontFamily:"Arial, Helvetica, sans-serif",outline:0,button:{color:t.colorText,cursor:"pointer",userSelect:"none"},[`${e}-item-link`]:{display:"block",width:"100%",height:"100%",padding:0,fontSize:t.fontSizeSM,textAlign:"center",backgroundColor:"transparent",border:`${t.lineWidth}px ${t.lineType} transparent`,borderRadius:t.borderRadius,outline:"none",transition:`border ${t.motionDurationMid}`},[`&:focus-visible ${e}-item-link`]:Object.assign({},yu(t)),[`&:hover ${e}-item-link`]:{backgroundColor:t.colorBgTextHover},[`&:active ${e}-item-link`]:{backgroundColor:t.colorBgTextActive},[`&${e}-disabled:hover`]:{[`${e}-item-link`]:{backgroundColor:"transparent"}}},[`${e}-slash`]:{marginInlineEnd:t.paginationSlashMarginInlineEnd,marginInlineStart:t.paginationSlashMarginInlineStart},[`${e}-options`]:{display:"inline-block",marginInlineStart:t.margin,verticalAlign:"middle","&-size-changer.-select":{display:"inline-block",width:"auto"},"&-quick-jumper":{display:"inline-block",height:t.controlHeight,marginInlineStart:t.marginXS,lineHeight:`${t.controlHeight}px`,verticalAlign:"top",input:Object.assign(Object.assign({},i_(t)),{width:1.25*t.controlHeightLG,height:t.controlHeight,boxSizing:"border-box",margin:0,marginInlineStart:t.marginXS,marginInlineEnd:t.marginXS})}}}},Nk=t=>{const{componentCls:e}=t;return{[`${e}-item`]:Object.assign(Object.assign({display:"inline-block",minWidth:t.paginationItemSize,height:t.paginationItemSize,marginInlineEnd:t.marginXS,fontFamily:t.paginationFontFamily,lineHeight:t.paginationItemSize-2+"px",textAlign:"center",verticalAlign:"middle",listStyle:"none",backgroundColor:"transparent",border:`${t.lineWidth}px ${t.lineType} transparent`,borderRadius:t.borderRadius,outline:0,cursor:"pointer",userSelect:"none",a:{display:"block",padding:`0 ${t.paginationItemPaddingInline}px`,color:t.colorText,transition:"none","&:hover":{textDecoration:"none"}},[`&:not(${e}-item-active)`]:{"&:hover":{transition:`all ${t.motionDurationMid}`,backgroundColor:t.colorBgTextHover},"&:active":{backgroundColor:t.colorBgTextActive}}},vu(t)),{"&-active":{fontWeight:t.paginationFontWeightActive,backgroundColor:t.paginationItemBgActive,borderColor:t.colorPrimary,a:{color:t.colorPrimary},"&:hover":{borderColor:t.colorPrimaryHover},"&:hover a":{color:t.colorPrimaryHover}}})}},Fk=t=>{const{componentCls:e}=t;return{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},fu(t)),{"ul, ol":{margin:0,padding:0,listStyle:"none"},"&::after":{display:"block",clear:"both",height:0,overflow:"hidden",visibility:"hidden",content:'""'},[`${e}-total-text`]:{display:"inline-block",height:t.paginationItemSize,marginInlineEnd:t.marginXS,lineHeight:t.paginationItemSize-2+"px",verticalAlign:"middle"}}),Nk(t)),Lk(t)),Rk(t)),Dk(t)),Ak(t)),{[`@media only screen and (max-width: ${t.screenLG}px)`]:{[`${e}-item`]:{"&-after-jump-prev, &-before-jump-next":{display:"none"}}},[`@media only screen and (max-width: ${t.screenSM}px)`]:{[`${e}-options`]:{display:"none"}}}),[`&${t.componentCls}-rtl`]:{direction:"rtl"}}},zk=t=>{const{componentCls:e}=t;return{[`${e}${e}-disabled`]:{"&, &:hover":{[`${e}-item-link`]:{borderColor:t.colorBorder}},"&:focus-visible":{[`${e}-item-link`]:{borderColor:t.colorBorder}},[`${e}-item, ${e}-item-link`]:{backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,[`&:hover:not(${e}-item-active)`]:{backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,a:{color:t.colorTextDisabled}},[`&${e}-item-active`]:{backgroundColor:t.paginationItemDisabledBgActive}},[`${e}-prev, ${e}-next`]:{"&:hover button":{backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,color:t.colorTextDisabled},[`${e}-item-link`]:{backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder}}},[e]:{[`${e}-prev, ${e}-next`]:{"&:hover button":{borderColor:t.colorPrimaryHover,backgroundColor:t.paginationItemBg},[`${e}-item-link`]:{backgroundColor:t.paginationItemLinkBg,borderColor:t.colorBorder},[`&:hover ${e}-item-link`]:{borderColor:t.colorPrimary,backgroundColor:t.paginationItemBg,color:t.colorPrimary},[`&${e}-disabled`]:{[`${e}-item-link`]:{borderColor:t.colorBorder,color:t.colorTextDisabled}}},[`${e}-item`]:{backgroundColor:t.paginationItemBg,border:`${t.lineWidth}px ${t.lineType} ${t.colorBorder}`,[`&:hover:not(${e}-item-active)`]:{borderColor:t.colorPrimary,backgroundColor:t.paginationItemBg,a:{color:t.colorPrimary}},"&-active":{borderColor:t.colorPrimary}}}}};var Bk=bh("Pagination",(t=>{const e=vh(t,{paginationItemSize:t.controlHeight,paginationFontFamily:t.fontFamily,paginationItemBg:t.colorBgContainer,paginationItemBgActive:t.colorBgContainer,paginationFontWeightActive:t.fontWeightStrong,paginationItemSizeSM:t.controlHeightSM,paginationItemInputBg:t.colorBgContainer,paginationMiniOptionsSizeChangerTop:0,paginationItemDisabledBgActive:t.controlItemBgActiveDisabled,paginationItemDisabledColorActive:t.colorTextDisabled,paginationItemLinkBg:t.colorBgContainer,inputOutlineOffset:"0 0",paginationMiniOptionsMarginInlineStart:t.marginXXS/2,paginationMiniQuickJumperInputWidth:1.1*t.controlHeightLG,paginationItemPaddingInline:1.5*t.marginXXS,paginationEllipsisLetterSpacing:t.marginXXS/2,paginationSlashMarginInlineStart:t.marginXXS,paginationSlashMarginInlineEnd:t.marginSM,paginationEllipsisTextIndent:"0.13em"},h_(t));return[Fk(e),t.wireframe&&zk(e)]})),$k=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};var jk=t=>{var{prefixCls:e,selectPrefixCls:n,className:r,rootClassName:i,size:o,locale:a,selectComponentClass:s,responsive:l,showSizeChanger:c}=t,u=$k(t,["prefixCls","selectPrefixCls","className","rootClassName","size","locale","selectComponentClass","responsive","showSizeChanger"]);const{xs:h}=jS(l),{getPrefixCls:p,direction:d,pagination:f={}}=m.useContext(Gl),g=p("pagination",e),[y,v]=Bk(g),x=null!==c&&void 0!==c?c:f.showSizeChanger,_=m.useMemo((()=>{const t=m.createElement("span",{className:`${g}-item-ellipsis`},"\u2022\u2022\u2022");return{prevIcon:m.createElement("button",{className:`${g}-item-link`,type:"button",tabIndex:-1},"rtl"===d?m.createElement(QS,null):m.createElement(ZS,null)),nextIcon:m.createElement("button",{className:`${g}-item-link`,type:"button",tabIndex:-1},"rtl"===d?m.createElement(ZS,null):m.createElement(QS,null)),jumpPrevIcon:m.createElement("a",{className:`${g}-item-link`},m.createElement("div",{className:`${g}-item-container`},"rtl"===d?m.createElement(XS,{className:`${g}-item-link-icon`}):m.createElement(HS,{className:`${g}-item-link-icon`}),t)),jumpNextIcon:m.createElement("a",{className:`${g}-item-link`},m.createElement("div",{className:`${g}-item-container`},"rtl"===d?m.createElement(HS,{className:`${g}-item-link-icon`}):m.createElement(XS,{className:`${g}-item-link-icon`}),t))}}),[d,g]),[b]=od("Pagination",Is),w=Object.assign(Object.assign({},b),a),S=Jl(o),C="small"===S||!(!h||S||!l),E=p("select",n),k=ic()({[`${g}-mini`]:C,[`${g}-rtl`]:"rtl"===d},r,i,v);return y(m.createElement(lC,Object.assign({},_,u,{prefixCls:g,selectPrefixCls:E,className:k,selectComponentClass:s||(C?Pk:Ok),locale:w,showSizeChanger:x})))},Uk=jk;function Vk(t,e,n){var r=(n||{}).atBegin;return function(t,e,n){var r,i=n||{},o=i.noTrailing,a=void 0!==o&&o,s=i.noLeading,l=void 0!==s&&s,c=i.debounceMode,u=void 0===c?void 0:c,h=!1,p=0;function d(){r&&clearTimeout(r)}function f(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var s=this,c=Date.now()-p;function f(){p=Date.now(),e.apply(s,i)}function g(){r=void 0}h||(l||!u||r||f(),d(),void 0===u&&c>t?l?(p=Date.now(),a||(r=setTimeout(u?g:f,t))):f():!0!==a&&(r=setTimeout(u?g:f,void 0===u?t-c:t)))}return f.cancel=function(t){var e=(t||{}).upcomingOnly,n=void 0!==e&&e;d(),h=!n},f}(t,e,{debounceMode:!1!==(void 0!==r&&r)})}const Hk=new Uo("antSpinMove",{to:{opacity:1}}),Gk=new Uo("antRotate",{to:{transform:"rotate(405deg)"}}),Wk=t=>({[`${t.componentCls}`]:Object.assign(Object.assign({},fu(t)),{position:"absolute",display:"none",color:t.colorPrimary,fontSize:0,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${t.motionDurationSlow} ${t.motionEaseInOutCirc}`,"&-spinning":{position:"static",display:"inline-block",opacity:1},"&-nested-loading":{position:"relative",[`> div > ${t.componentCls}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:t.contentHeight,[`${t.componentCls}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:-t.spinDotSize/2},[`${t.componentCls}-text`]:{position:"absolute",top:"50%",width:"100%",paddingTop:(t.spinDotSize-t.fontSize)/2+2,textShadow:`0 1px 2px ${t.colorBgContainer}`,fontSize:t.fontSize},[`&${t.componentCls}-show-text ${t.componentCls}-dot`]:{marginTop:-t.spinDotSize/2-10},"&-sm":{[`${t.componentCls}-dot`]:{margin:-t.spinDotSizeSM/2},[`${t.componentCls}-text`]:{paddingTop:(t.spinDotSizeSM-t.fontSize)/2+2},[`&${t.componentCls}-show-text ${t.componentCls}-dot`]:{marginTop:-t.spinDotSizeSM/2-10}},"&-lg":{[`${t.componentCls}-dot`]:{margin:-t.spinDotSizeLG/2},[`${t.componentCls}-text`]:{paddingTop:(t.spinDotSizeLG-t.fontSize)/2+2},[`&${t.componentCls}-show-text ${t.componentCls}-dot`]:{marginTop:-t.spinDotSizeLG/2-10}}},[`${t.componentCls}-container`]:{position:"relative",transition:`opacity ${t.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:t.colorBgContainer,opacity:0,transition:`all ${t.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${t.componentCls}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none","&::after":{opacity:.4,pointerEvents:"auto"}}},"&-tip":{color:t.spinDotDefault},[`${t.componentCls}-dot`]:{position:"relative",display:"inline-block",fontSize:t.spinDotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:(t.spinDotSize-t.marginXXS/2)/2,height:(t.spinDotSize-t.marginXXS/2)/2,backgroundColor:t.colorPrimary,borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:Hk,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:Gk,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"}},[`&-sm ${t.componentCls}-dot`]:{fontSize:t.spinDotSizeSM,i:{width:(t.spinDotSizeSM-t.marginXXS/2)/2,height:(t.spinDotSizeSM-t.marginXXS/2)/2}},[`&-lg ${t.componentCls}-dot`]:{fontSize:t.spinDotSizeLG,i:{width:(t.spinDotSizeLG-t.marginXXS)/2,height:(t.spinDotSizeLG-t.marginXXS)/2}},[`&${t.componentCls}-show-text ${t.componentCls}-text`]:{display:"block"}})});var Xk=bh("Spin",(t=>{const e=vh(t,{spinDotDefault:t.colorTextDescription,spinDotSize:t.controlHeightLG/2,spinDotSizeSM:.35*t.controlHeightLG,spinDotSizeLG:t.controlHeight});return[Wk(e)]}),{contentHeight:400}),qk=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};let Yk=null;const Zk=t=>{const{spinPrefixCls:e,spinning:n=!0,delay:r=0,className:i,rootClassName:o,size:a="default",tip:s,wrapperClassName:l,style:c,children:u,hashId:h}=t,p=qk(t,["spinPrefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","hashId"]),[d,f]=m.useState((()=>n&&!function(t,e){return!!t&&!!e&&!isNaN(Number(e))}(n,r)));m.useEffect((()=>{if(n){const t=Vk(r,(()=>{f(!0)}));return t(),()=>{var e;null===(e=null===t||void 0===t?void 0:t.cancel)||void 0===e||e.call(t)}}f(!1)}),[r,n]);const g=m.useMemo((()=>"undefined"!==typeof u),[u]);const{direction:y}=m.useContext(Gl),v=ic()(e,{[`${e}-sm`]:"small"===a,[`${e}-lg`]:"large"===a,[`${e}-spinning`]:d,[`${e}-show-text`]:!!s,[`${e}-rtl`]:"rtl"===y},i,o,h),x=ic()(`${e}-container`,{[`${e}-blur`]:d}),_=Gh(p,["indicator","prefixCls"]),b=m.createElement("div",Object.assign({},_,{style:c,className:v,"aria-live":"polite","aria-busy":d}),function(t,e){const{indicator:n}=e,r=`${t}-dot`;return null===n?null:Xh(n)?Yh(n,{className:ic()(n.props.className,r)}):Xh(Yk)?Yh(Yk,{className:ic()(Yk.props.className,r)}):m.createElement("span",{className:ic()(r,`${t}-dot-spin`)},m.createElement("i",{className:`${t}-dot-item`}),m.createElement("i",{className:`${t}-dot-item`}),m.createElement("i",{className:`${t}-dot-item`}),m.createElement("i",{className:`${t}-dot-item`}))}(e,t),s&&g?m.createElement("div",{className:`${e}-text`},s):null);return g?m.createElement("div",Object.assign({},_,{className:ic()(`${e}-nested-loading`,l,h)}),d&&m.createElement("div",{key:"loading"},b),m.createElement("div",{className:x,key:"container"},u)):b},Kk=t=>{const{prefixCls:e}=t,{getPrefixCls:n}=m.useContext(Gl),r=n("spin",e),[i,o]=Xk(r),a=Object.assign(Object.assign({},t),{spinPrefixCls:r,hashId:o});return i(m.createElement(Zk,Object.assign({},a)))};Kk.setDefaultIndicator=t=>{Yk=t};var Jk=Kk;var Qk=function(t){return function(e){let{prefixCls:n,onExpand:r,record:i,expanded:o,expandable:a}=e;const s=`${n}-row-expand-icon`;return m.createElement("button",{type:"button",onClick:t=>{r(i,t),t.stopPropagation()},className:ic()(s,{[`${s}-spaced`]:!a,[`${s}-expanded`]:a&&o,[`${s}-collapsed`]:a&&!o}),"aria-label":o?t.collapse:t.expand,"aria-expanded":o})}},tM=ES(((t,e)=>{const{_renderTimes:n}=t,{_renderTimes:r}=e;return n!==r}));function eM(t,e){return"key"in t&&void 0!==t.key&&null!==t.key?t.key:t.dataIndex?Array.isArray(t.dataIndex)?t.dataIndex.join("."):t.dataIndex:e}function nM(t,e){return e?`${e}-${t}`:`${t}`}function rM(t,e){return"function"===typeof t?t(e):t}var iM={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M349 838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V642H349v196zm531.1-684H143.9c-24.5 0-39.8 26.7-27.5 48l221.3 376h348.8l221.3-376c12.1-21.3-3.2-48-27.7-48z"}}]},name:"filter",theme:"filled"},oM=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:iM}))};var aM=m.forwardRef(oM),sM=["prefixCls","className","style","checked","disabled","defaultChecked","type","onChange"],lM=(0,m.forwardRef)((function(t,e){var n,r=t.prefixCls,i=void 0===r?"rc-checkbox":r,o=t.className,a=t.style,s=t.checked,l=t.disabled,c=t.defaultChecked,u=void 0!==c&&c,h=t.type,p=void 0===h?"checkbox":h,d=t.onChange,f=Zo(t,sM),g=(0,m.useRef)(null),y=Ri(Cy(u,{value:s}),2),v=y[0],x=y[1];(0,m.useImperativeHandle)(e,(function(){return{focus:function(){var t;null===(t=g.current)||void 0===t||t.focus()},blur:function(){var t;null===(t=g.current)||void 0===t||t.blur()},input:g.current}}));var _=ic()(i,o,(Ir(n={},"".concat(i,"-checked"),v),Ir(n,"".concat(i,"-disabled"),l),n));return m.createElement("span",{className:_,style:a},m.createElement("input",Ui({},f,{className:"".concat(i,"-input"),ref:g,onChange:function(e){l||("checked"in t||x(e.target.checked),null===d||void 0===d||d({target:Or(Or({},t),{},{type:p,checked:e.target.checked}),stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},nativeEvent:e.nativeEvent}))},disabled:l,checked:!!v,type:p})),m.createElement("span",{className:"".concat(i,"-inner")}))})),cM=lM;const uM=new Uo("antCheckboxEffect",{"0%":{transform:"scale(1)",opacity:.5},"100%":{transform:"scale(1.6)",opacity:0}}),hM=t=>{const{checkboxCls:e}=t,n=`${e}-wrapper`;return[{[`${e}-group`]:Object.assign(Object.assign({},fu(t)),{display:"inline-flex",flexWrap:"wrap",columnGap:t.marginXS,[`> ${t.antCls}-row`]:{flex:1}}),[n]:Object.assign(Object.assign({},fu(t)),{display:"inline-flex",alignItems:"baseline",cursor:"pointer","&:after":{display:"inline-block",width:0,overflow:"hidden",content:"'\\a0'"},[`& + ${n}`]:{marginInlineStart:0},[`&${n}-in-form-item`]:{'input[type="checkbox"]':{width:14,height:14}}}),[e]:Object.assign(Object.assign({},fu(t)),{position:"relative",whiteSpace:"nowrap",lineHeight:1,cursor:"pointer",alignSelf:"start",transform:`translate(0, ${t.lineHeight*t.fontSize/2-t.checkboxSize/2}px)`,[`${e}-input`]:{position:"absolute",inset:0,zIndex:1,cursor:"pointer",opacity:0,margin:0,[`&:focus-visible + ${e}-inner`]:Object.assign({},yu(t))},[`${e}-inner`]:{boxSizing:"border-box",position:"relative",top:0,insetInlineStart:0,display:"block",width:t.checkboxSize,height:t.checkboxSize,direction:"ltr",backgroundColor:t.colorBgContainer,border:`${t.lineWidth}px ${t.lineType} ${t.colorBorder}`,borderRadius:t.borderRadiusSM,borderCollapse:"separate",transition:`all ${t.motionDurationSlow}`,"&:after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"21.5%",display:"table",width:t.checkboxSize/14*5,height:t.checkboxSize/14*8,border:`${t.lineWidthBold}px solid ${t.colorWhite}`,borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:`all ${t.motionDurationFast} ${t.motionEaseInBack}, opacity ${t.motionDurationFast}`}},"& + span":{paddingInlineStart:t.paddingXS,paddingInlineEnd:t.paddingXS}})},{[e]:{"&-indeterminate":{[`${e}-inner`]:{"&:after":{top:"50%",insetInlineStart:"50%",width:t.fontSizeLG/2,height:t.fontSizeLG/2,backgroundColor:t.colorPrimary,border:0,transform:"translate(-50%, -50%) scale(1)",opacity:1,content:'""'}}}}},{[`${n}:hover ${e}:after`]:{visibility:"visible"},[`\n        ${n}:not(${n}-disabled),\n        ${e}:not(${e}-disabled)\n      `]:{[`&:hover ${e}-inner`]:{borderColor:t.colorPrimary}},[`${n}:not(${n}-disabled)`]:{[`&:hover ${e}-checked:not(${e}-disabled) ${e}-inner`]:{backgroundColor:t.colorPrimaryHover,borderColor:"transparent"},[`&:hover ${e}-checked:not(${e}-disabled):after`]:{borderColor:t.colorPrimaryHover}}},{[`${e}-checked`]:{[`${e}-inner`]:{backgroundColor:t.colorPrimary,borderColor:t.colorPrimary,"&:after":{opacity:1,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:`all ${t.motionDurationMid} ${t.motionEaseOutBack} ${t.motionDurationFast}`}},"&:after":{position:"absolute",top:0,insetInlineStart:0,width:"100%",height:"100%",borderRadius:t.borderRadiusSM,visibility:"hidden",border:`${t.lineWidthBold}px solid ${t.colorPrimary}`,animationName:uM,animationDuration:t.motionDurationSlow,animationTimingFunction:"ease-in-out",animationFillMode:"backwards",content:'""',transition:`all ${t.motionDurationSlow}`}},[`\n        ${n}-checked:not(${n}-disabled),\n        ${e}-checked:not(${e}-disabled)\n      `]:{[`&:hover ${e}-inner`]:{backgroundColor:t.colorPrimaryHover,borderColor:"transparent"},[`&:hover ${e}:after`]:{borderColor:t.colorPrimaryHover}}},{[`${n}-disabled`]:{cursor:"not-allowed"},[`${e}-disabled`]:{[`&, ${e}-input`]:{cursor:"not-allowed",pointerEvents:"none"},[`${e}-inner`]:{background:t.colorBgContainerDisabled,borderColor:t.colorBorder,"&:after":{borderColor:t.colorTextDisabled}},"&:after":{display:"none"},"& + span":{color:t.colorTextDisabled},[`&${e}-indeterminate ${e}-inner::after`]:{background:t.colorTextDisabled}}}]};function pM(t,e){const n=vh(e,{checkboxCls:`.${t}`,checkboxSize:e.controlInteractiveSize});return[hM(n)]}var dM=bh("Checkbox",((t,e)=>{let{prefixCls:n}=e;return[pM(n,t)]})),fM=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const gM=m.createContext(null),mM=(t,e)=>{var{defaultValue:n,children:r,options:i=[],prefixCls:o,className:a,rootClassName:s,style:l,onChange:c}=t,u=fM(t,["defaultValue","children","options","prefixCls","className","rootClassName","style","onChange"]);const{getPrefixCls:h,direction:p}=m.useContext(Gl),[d,f]=m.useState(u.value||n||[]),[g,y]=m.useState([]);m.useEffect((()=>{"value"in u&&f(u.value||[])}),[u.value]);const v=()=>i.map((t=>"string"===typeof t||"number"===typeof t?{label:t,value:t}:t)),x=h("checkbox",o),_=`${x}-group`,[b,w]=dM(x),S=Gh(u,["value","disabled"]);i&&i.length>0&&(r=v().map((t=>m.createElement(bM,{prefixCls:x,key:t.value.toString(),disabled:"disabled"in t?t.disabled:u.disabled,value:t.value,checked:d.includes(t.value),onChange:t.onChange,className:`${_}-item`,style:t.style},t.label))));const C={toggleOption:t=>{const e=d.indexOf(t.value),n=Sr(d);-1===e?n.push(t.value):n.splice(e,1),"value"in u||f(n);const r=v();null===c||void 0===c||c(n.filter((t=>g.includes(t))).sort(((t,e)=>r.findIndex((e=>e.value===t))-r.findIndex((t=>t.value===e)))))},value:d,disabled:u.disabled,name:u.name,registerValue:t=>{y((e=>[].concat(Sr(e),[t])))},cancelValue:t=>{y((e=>e.filter((e=>e!==t))))}},E=ic()(_,{[`${_}-rtl`]:"rtl"===p},a,s,w);return b(m.createElement("div",Object.assign({className:E,style:l},S,{ref:e}),m.createElement(gM.Provider,{value:C},r)))},yM=m.forwardRef(mM);var vM=m.memo(yM),xM=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const _M=(t,e)=>{var n,{prefixCls:r,className:i,rootClassName:o,children:a,indeterminate:s=!1,style:l,onMouseEnter:c,onMouseLeave:u,skipGroup:h=!1,disabled:p}=t,d=xM(t,["prefixCls","className","rootClassName","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup","disabled"]);const{getPrefixCls:f,direction:g}=m.useContext(Gl),y=m.useContext(gM),{isFormItemInput:v}=m.useContext(tf),x=m.useContext(Kl),_=null!==(n=(null===y||void 0===y?void 0:y.disabled)||p)&&void 0!==n?n:x,b=m.useRef(d.value);m.useEffect((()=>{null===y||void 0===y||y.registerValue(d.value)}),[]),m.useEffect((()=>{if(!h)return d.value!==b.current&&(null===y||void 0===y||y.cancelValue(b.current),null===y||void 0===y||y.registerValue(d.value),b.current=d.value),()=>null===y||void 0===y?void 0:y.cancelValue(d.value)}),[d.value]);const w=f("checkbox",r),[S,C]=dM(w),E=Object.assign({},d);y&&!h&&(E.onChange=function(){d.onChange&&d.onChange.apply(d,arguments),y.toggleOption&&y.toggleOption({label:a,value:d.value})},E.name=y.name,E.checked=y.value.includes(d.value));const k=ic()({[`${w}-wrapper`]:!0,[`${w}-rtl`]:"rtl"===g,[`${w}-wrapper-checked`]:E.checked,[`${w}-wrapper-disabled`]:_,[`${w}-wrapper-in-form-item`]:v},i,o,C),M=ic()({[`${w}-indeterminate`]:s},C),T=s?"mixed":void 0;return S(m.createElement("label",{className:k,style:l,onMouseEnter:c,onMouseLeave:u},m.createElement(cM,Object.assign({"aria-checked":T},E,{prefixCls:w,className:M,disabled:_,ref:e})),void 0!==a&&m.createElement("span",null,a)))};var bM=m.forwardRef(_M);const wM=bM;wM.Group=vM,wM.__ANT_CHECKBOX=!0;var SM=wM,CM=sh.ESC,EM=sh.TAB;var kM=(0,m.forwardRef)((function(t,e){var n=t.overlay,r=t.arrow,i=t.prefixCls,o=(0,m.useMemo)((function(){return"function"===typeof n?n():n}),[n]),a=lc(e,null===o||void 0===o?void 0:o.ref);return m.createElement(m.Fragment,null,r&&m.createElement("div",{className:"".concat(i,"-arrow")}),m.cloneElement(o,{ref:uc(o)?a:void 0}))})),MM={adjustX:1,adjustY:1},TM=[0,0],IM={topLeft:{points:["bl","tl"],overflow:MM,offset:[0,-4],targetOffset:TM},top:{points:["bc","tc"],overflow:MM,offset:[0,-4],targetOffset:TM},topRight:{points:["br","tr"],overflow:MM,offset:[0,-4],targetOffset:TM},bottomLeft:{points:["tl","bl"],overflow:MM,offset:[0,4],targetOffset:TM},bottom:{points:["tc","bc"],overflow:MM,offset:[0,4],targetOffset:TM},bottomRight:{points:["tr","br"],overflow:MM,offset:[0,4],targetOffset:TM}},PM=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function OM(t,e){var n,r=t.arrow,i=void 0!==r&&r,o=t.prefixCls,a=void 0===o?"rc-dropdown":o,s=t.transitionName,l=t.animation,c=t.align,u=t.placement,h=void 0===u?"bottomLeft":u,p=t.placements,d=void 0===p?IM:p,f=t.getPopupContainer,g=t.showAction,y=t.hideAction,v=t.overlayClassName,x=t.overlayStyle,_=t.visible,b=t.trigger,w=void 0===b?["hover"]:b,S=t.autoFocus,C=t.overlay,E=t.children,k=t.onVisibleChange,M=Zo(t,PM),T=Ri(m.useState(),2),I=T[0],P=T[1],O="visible"in t?_:I,A=m.useRef(null),D=m.useRef(null),R=m.useRef(null);m.useImperativeHandle(e,(function(){return A.current}));var L=function(t){P(t),null===k||void 0===k||k(t)};!function(t){var e=t.visible,n=t.triggerRef,r=t.onVisibleChange,i=t.autoFocus,o=t.overlayRef,a=m.useRef(!1),s=function(){var t,i;e&&(null===(t=n.current)||void 0===t||null===(i=t.focus)||void 0===i||i.call(t),null===r||void 0===r||r(!1))},l=function(){var t;return!(null===(t=o.current)||void 0===t||!t.focus)&&(o.current.focus(),a.current=!0,!0)},c=function(t){switch(t.keyCode){case CM:s();break;case EM:var e=!1;a.current||(e=l()),e?t.preventDefault():s()}};m.useEffect((function(){return e?(window.addEventListener("keydown",c),i&&Xc(l,3),function(){window.removeEventListener("keydown",c),a.current=!1}):function(){a.current=!1}}),[e])}({visible:O,triggerRef:R,onVisibleChange:L,autoFocus:S,overlayRef:D});var N=function(){return m.createElement(kM,{ref:D,overlay:C,prefixCls:a,arrow:i})},F=m.cloneElement(E,{className:ic()(null===(n=E.props)||void 0===n?void 0:n.className,O&&function(){var e=t.openClassName;return void 0!==e?e:"".concat(a,"-open")}()),ref:uc(E)?lc(R,E.ref):void 0}),z=y;return z||-1===w.indexOf("contextMenu")||(z=["click"]),m.createElement(fy,Ui({builtinPlacements:d},M,{prefixCls:a,ref:A,popupClassName:ic()(v,Ir({},"".concat(a,"-show-arrow"),i)),popupStyle:x,action:w,showAction:g,hideAction:z,popupPlacement:h,popupAlign:c,popupTransitionName:s,popupAnimation:l,popupVisible:O,stretch:function(){var e=t.minOverlayWidthMatchTrigger,n=t.alignPoint;return"minOverlayWidthMatchTrigger"in t?e:!n}()?"minWidth":"",popup:"function"===typeof C?N:N(),onPopupVisibleChange:L,onPopupClick:function(e){var n=t.onOverlayClick;P(!1),n&&n(e)},getPopupContainer:f}),F)}var AM=m.forwardRef(OM),DM=m.createContext(null);function RM(t,e){return void 0===t?null:"".concat(t,"-").concat(e)}function LM(t){return RM(m.useContext(DM),t)}var NM=["children","locked"],FM=m.createContext(null);function zM(t){var e=t.children,n=t.locked,r=Zo(t,NM),i=m.useContext(FM),o=qr((function(){return function(t,e){var n=Or({},t);return Object.keys(e).forEach((function(t){var r=e[t];void 0!==r&&(n[t]=r)})),n}(i,r)}),[i,r],(function(t,e){return!n&&(t[0]!==e[0]||!ri(t[1],e[1],!0))}));return m.createElement(FM.Provider,{value:o},e)}var BM=[],$M=m.createContext(null);function jM(){return m.useContext($M)}var UM=m.createContext(BM);function VM(t){var e=m.useContext(UM);return m.useMemo((function(){return void 0!==t?[].concat(Sr(e),[t]):e}),[e,t])}var HM=m.createContext(null),GM=m.createContext({});function WM(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Wh(t)){var n=t.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||t.isContentEditable||"a"===n&&!!t.getAttribute("href"),i=t.getAttribute("tabindex"),o=Number(i),a=null;return i&&!Number.isNaN(o)?a=o:r&&null===a&&(a=0),r&&t.disabled&&(a=null),null!==a&&(a>=0||e&&a<0)}return!1}function XM(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Sr(t.querySelectorAll("*")).filter((function(t){return WM(t,e)}));return WM(t,e)&&n.unshift(t),n}var qM=sh.LEFT,YM=sh.RIGHT,ZM=sh.UP,KM=sh.DOWN,JM=sh.ENTER,QM=sh.ESC,tT=sh.HOME,eT=sh.END,nT=[ZM,KM,qM,YM];function rT(t,e){return XM(t,!0).filter((function(t){return e.has(t)}))}function iT(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!t)return null;var i=rT(t,e),o=i.length,a=i.findIndex((function(t){return n===t}));return r<0?-1===a?a=o-1:a-=1:r>0&&(a+=1),i[a=(a+o)%o]}function oT(t,e,n,r,i,o,a,s,l,c){var u=m.useRef(),h=m.useRef();h.current=e;var p=function(){Xc.cancel(u.current)};return m.useEffect((function(){return function(){p()}}),[]),function(d){var f=d.which;if([].concat(nT,[JM,QM,tT,eT]).includes(f)){var g,m,y,v=function(){return g=new Set,m=new Map,y=new Map,o().forEach((function(t){var e=document.querySelector("[data-menu-id='".concat(RM(r,t),"']"));e&&(g.add(e),y.set(e,t),m.set(t,e))})),g};v();var x=function(t,e){for(var n=t||document.activeElement;n;){if(e.has(n))return n;n=n.parentElement}return null}(m.get(e),g),_=y.get(x),b=function(t,e,n,r){var i,o,a,s,l="prev",c="next",u="children",h="parent";if("inline"===t&&r===JM)return{inlineTrigger:!0};var p=(Ir(i={},ZM,l),Ir(i,KM,c),i),d=(Ir(o={},qM,n?c:l),Ir(o,YM,n?l:c),Ir(o,KM,u),Ir(o,JM,u),o),f=(Ir(a={},ZM,l),Ir(a,KM,c),Ir(a,JM,u),Ir(a,QM,h),Ir(a,qM,n?u:h),Ir(a,YM,n?h:u),a);switch(null===(s={inline:p,horizontal:d,vertical:f,inlineSub:p,horizontalSub:f,verticalSub:f}["".concat(t).concat(e?"":"Sub")])||void 0===s?void 0:s[r]){case l:return{offset:-1,sibling:!0};case c:return{offset:1,sibling:!0};case h:return{offset:-1,sibling:!1};case u:return{offset:1,sibling:!1};default:return null}}(t,1===a(_,!0).length,n,f);if(!b&&f!==tT&&f!==eT)return;(nT.includes(f)||[tT,eT].includes(f))&&d.preventDefault();var w=function(t){if(t){var e=t,n=t.querySelector("a");null!==n&&void 0!==n&&n.getAttribute("href")&&(e=n);var r=y.get(t);s(r),p(),u.current=Xc((function(){h.current===r&&e.focus()}))}};if([tT,eT].includes(f)||b.sibling||!x){var S,C,E=rT(S=x&&"inline"!==t?function(t){for(var e=t;e;){if(e.getAttribute("data-menu-list"))return e;e=e.parentElement}return null}(x):i.current,g);C=f===tT?E[0]:f===eT?E[E.length-1]:iT(S,g,x,b.offset),w(C)}else if(b.inlineTrigger)l(_);else if(b.offset>0)l(_,!0),p(),u.current=Xc((function(){v();var t=x.getAttribute("aria-controls"),e=iT(document.getElementById(t),g);w(e)}),5);else if(b.offset<0){var k=a(_,!0),M=k[k.length-2],T=m.get(M);l(M,!1),w(T)}}null===c||void 0===c||c(d)}}var aT="__RC_UTIL_PATH_SPLIT__",sT=function(t){return t.join(aT)},lT="rc-menu-more";function cT(){var t=Ri(m.useState({}),2)[1],e=(0,m.useRef)(new Map),n=(0,m.useRef)(new Map),r=Ri(m.useState([]),2),i=r[0],o=r[1],a=(0,m.useRef)(0),s=(0,m.useRef)(!1),l=(0,m.useCallback)((function(r,i){var o=sT(i);n.current.set(o,r),e.current.set(r,o),a.current+=1;var l,c=a.current;l=function(){c===a.current&&(s.current||t({}))},Promise.resolve().then(l)}),[]),c=(0,m.useCallback)((function(t,r){var i=sT(r);n.current.delete(i),e.current.delete(t)}),[]),u=(0,m.useCallback)((function(t){o(t)}),[]),h=(0,m.useCallback)((function(t,n){var r=e.current.get(t)||"",o=r.split(aT);return n&&i.includes(o[0])&&o.unshift(lT),o}),[i]),p=(0,m.useCallback)((function(t,e){return t.some((function(t){return h(t,!0).includes(e)}))}),[h]),d=(0,m.useCallback)((function(t){var r="".concat(e.current.get(t)).concat(aT),i=new Set;return Sr(n.current.keys()).forEach((function(t){t.startsWith(r)&&i.add(n.current.get(t))})),i}),[]);return m.useEffect((function(){return function(){s.current=!0}}),[]),{registerPath:l,unregisterPath:c,refreshOverflowKeys:u,isSubPathKey:p,getKeyPath:h,getKeys:function(){var t=Sr(e.current.keys());return i.length&&t.push(lT),t},getSubPathKeys:d}}function uT(t){var e=m.useRef(t);e.current=t;var n=m.useCallback((function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return null===(t=e.current)||void 0===t?void 0:t.call.apply(t,[e].concat(r))}),[]);return t?n:void 0}var hT=Math.random().toFixed(5).toString().slice(2),pT=0;function dT(t,e,n,r){var i=m.useContext(FM),o=i.activeKey,a=i.onActive,s=i.onInactive,l={active:o===t};return e||(l.onMouseEnter=function(e){null===n||void 0===n||n({key:t,domEvent:e}),a(t)},l.onMouseLeave=function(e){null===r||void 0===r||r({key:t,domEvent:e}),s(t)}),l}function fT(t){var e=m.useContext(FM),n=e.mode,r=e.rtl,i=e.inlineIndent;if("inline"!==n)return null;return r?{paddingRight:t*i}:{paddingLeft:t*i}}function gT(t){var e=t.icon,n=t.props,r=t.children;return("function"===typeof e?m.createElement(e,Or({},n)):e)||r||null}var mT=["item"];function yT(t){var e=t.item,n=Zo(t,mT);return Object.defineProperty(n,"item",{get:function(){return ni(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),e}}),n}var vT=["title","attribute","elementRef"],xT=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],_T=["active"],bT=function(t){Qo(n,t);var e=ea(n);function n(){return ii(this,n),e.apply(this,arguments)}return ai(n,[{key:"render",value:function(){var t=this.props,e=t.title,n=t.attribute,r=t.elementRef,i=Gh(Zo(t,vT),["eventKey","popupClassName","popupOffset","onTitleClick"]);return ni(!n,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),m.createElement(OC.Item,Ui({},n,{title:"string"===typeof e?e:void 0},i,{ref:r}))}}]),n}(m.Component),wT=m.forwardRef((function(t,e){var n,r=t.style,i=t.className,o=t.eventKey,a=(t.warnKey,t.disabled),s=t.itemIcon,l=t.children,c=t.role,u=t.onMouseEnter,h=t.onMouseLeave,p=t.onClick,d=t.onKeyDown,f=t.onFocus,g=Zo(t,xT),y=LM(o),v=m.useContext(FM),x=v.prefixCls,_=v.onItemClick,b=v.disabled,w=v.overflowDisabled,S=v.itemIcon,C=v.selectedKeys,E=v.onActive,k=m.useContext(GM)._internalRenderMenuItem,M="".concat(x,"-item"),T=m.useRef(),I=m.useRef(),P=b||a,O=cc(e,I),A=VM(o);var D=function(t){return{key:o,keyPath:Sr(A).reverse(),item:T.current,domEvent:t}},R=s||S,L=dT(o,P,u,h),N=L.active,F=Zo(L,_T),z=C.includes(o),B=fT(A.length),$={};"option"===t.role&&($["aria-selected"]=z);var j=m.createElement(bT,Ui({ref:T,elementRef:O,role:null===c?"none":c||"menuitem",tabIndex:a?null:-1,"data-menu-id":w&&y?null:y},g,F,$,{component:"li","aria-disabled":a,style:Or(Or({},B),r),className:ic()(M,(n={},Ir(n,"".concat(M,"-active"),N),Ir(n,"".concat(M,"-selected"),z),Ir(n,"".concat(M,"-disabled"),P),n),i),onClick:function(t){if(!P){var e=D(t);null===p||void 0===p||p(yT(e)),_(e)}},onKeyDown:function(t){if(null===d||void 0===d||d(t),t.which===sh.ENTER){var e=D(t);null===p||void 0===p||p(yT(e)),_(e)}},onFocus:function(t){E(o),null===f||void 0===f||f(t)}}),l,m.createElement(gT,{props:Or(Or({},t),{},{isSelected:z}),icon:R}));return k&&(j=k(j,t,{selected:z})),j}));function ST(t,e){var n=t.eventKey,r=jM(),i=VM(n);return m.useEffect((function(){if(r)return r.registerPath(n,i),function(){r.unregisterPath(n,i)}}),[i]),r?null:m.createElement(wT,Ui({},t,{ref:e}))}var CT=m.forwardRef(ST),ET=["className","children"],kT=function(t,e){var n=t.className,r=t.children,i=Zo(t,ET),o=m.useContext(FM),a=o.prefixCls,s=o.mode,l=o.rtl;return m.createElement("ul",Ui({className:ic()(a,l&&"".concat(a,"-rtl"),"".concat(a,"-sub"),"".concat(a,"-").concat("inline"===s?"inline":"vertical"),n),role:"menu"},i,{"data-menu-list":!0,ref:e}),r)},MT=m.forwardRef(kT);MT.displayName="SubMenuList";var TT=MT,IT=["label","children","key","type"];function PT(t,e){return ra(t).map((function(t,n){if(m.isValidElement(t)){var r,i,o=t.key,a=null!==(r=null===(i=t.props)||void 0===i?void 0:i.eventKey)&&void 0!==r?r:o;(null===a||void 0===a)&&(a="tmp_key-".concat([].concat(Sr(e),[n]).join("-")));var s={key:a,eventKey:a};return m.cloneElement(t,s)}return t}))}function OT(t){return(t||[]).map((function(t,e){if(t&&"object"===Cr(t)){var n=t,r=n.label,i=n.children,o=n.key,a=n.type,s=Zo(n,IT),l=null!==o&&void 0!==o?o:"tmp-".concat(e);return i||"group"===a?"group"===a?m.createElement(kP,Ui({key:l},s,{title:r}),OT(i)):m.createElement(xP,Ui({key:l},s,{title:r}),OT(i)):"divider"===a?m.createElement(MP,Ui({key:l},s)):m.createElement(CT,Ui({key:l},s),r)}return null})).filter((function(t){return t}))}function AT(t,e,n){var r=t;return e&&(r=OT(e)),PT(r,n)}var DT,RT=(0,m.forwardRef)((function(t,e){var n=t.didUpdate,r=t.getContainer,i=t.children,o=(0,m.useRef)(),a=(0,m.useRef)();(0,m.useImperativeHandle)(e,(function(){return{}}));var s=(0,m.useRef)(!1);return!s.current&&gi()&&(a.current=r(),o.current=a.current.parentNode,s.current=!0),(0,m.useEffect)((function(){null===n||void 0===n||n(t)})),(0,m.useEffect)((function(){return null===a.current.parentNode&&null!==o.current&&o.current.appendChild(a.current),function(){var t,e;null===(t=a.current)||void 0===t||null===(e=t.parentNode)||void 0===e||e.removeChild(a.current)}}),[]),a.current?Dr.createPortal(i,a.current):null})),LT=RT;function NT(t,e,n){return n?t[0]===e[0]:t[0]===e[0]&&t[1]===e[1]}function FT(t){var e=t.prefixCls,n=t.motion,r=t.animation,i=t.transitionName;return n||(r?{motionName:"".concat(e,"-").concat(r)}:i?{motionName:i}:null)}function zT(t){var e=t.prefixCls,n=t.visible,r=t.zIndex,i=t.mask,o=t.maskMotion,a=t.maskAnimation,s=t.maskTransitionName;if(!i)return null;var l={};return(o||s||a)&&(l=Or({motionAppear:!0},FT({motion:o,prefixCls:e,transitionName:s,animation:a}))),m.createElement(hu,Ui({},l,{visible:n,removeOnLeave:!0}),(function(t){var n=t.className;return m.createElement("div",{style:{zIndex:r},className:ic()("".concat(e,"-mask"),n)})}))}function BT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?BT(Object(n),!0).forEach((function(e){UT(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BT(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function jT(t){return jT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jT(t)}function UT(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var VT={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function HT(){if(void 0!==DT)return DT;DT="";var t=document.createElement("p").style;for(var e in VT)e+"Transform"in t&&(DT=e);return DT}function GT(){return HT()?"".concat(HT(),"TransitionProperty"):"transitionProperty"}function WT(){return HT()?"".concat(HT(),"Transform"):"transform"}function XT(t,e){var n=GT();n&&(t.style[n]=e,"transitionProperty"!==n&&(t.style.transitionProperty=e))}function qT(t,e){var n=WT();n&&(t.style[n]=e,"transform"!==n&&(t.style.transform=e))}var YT,ZT=/matrix\((.*)\)/,KT=/matrix3d\((.*)\)/;function JT(t){var e=t.style.display;t.style.display="none",t.offsetHeight,t.style.display=e}function QT(t,e,n){var r=n;if("object"!==jT(e))return"undefined"!==typeof r?("number"===typeof r&&(r="".concat(r,"px")),void(t.style[e]=r)):YT(t,e);for(var i in e)e.hasOwnProperty(i)&&QT(t,i,e[i])}function tI(t,e){var n=t["page".concat(e?"Y":"X","Offset")],r="scroll".concat(e?"Top":"Left");if("number"!==typeof n){var i=t.document;"number"!==typeof(n=i.documentElement[r])&&(n=i.body[r])}return n}function eI(t){return tI(t)}function nI(t){return tI(t,!0)}function rI(t){var e=function(t){var e,n,r,i=t.ownerDocument,o=i.body,a=i&&i.documentElement;return e=t.getBoundingClientRect(),n=Math.floor(e.left),r=Math.floor(e.top),{left:n-=a.clientLeft||o.clientLeft||0,top:r-=a.clientTop||o.clientTop||0}}(t),n=t.ownerDocument,r=n.defaultView||n.parentWindow;return e.left+=eI(r),e.top+=nI(r),e}function iI(t){return null!==t&&void 0!==t&&t==t.window}function oI(t){return iI(t)?t.document:9===t.nodeType?t:t.ownerDocument}var aI=new RegExp("^(".concat(/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,")(?!px)[a-z%]+$"),"i"),sI=/^(top|right|bottom|left)$/,lI="currentStyle",cI="runtimeStyle",uI="left";function hI(t,e){return"left"===t?e.useCssRight?"right":t:e.useCssBottom?"bottom":t}function pI(t){return"left"===t?"right":"right"===t?"left":"top"===t?"bottom":"bottom"===t?"top":void 0}function dI(t,e,n){"static"===QT(t,"position")&&(t.style.position="relative");var r=-999,i=-999,o=hI("left",n),a=hI("top",n),s=pI(o),l=pI(a);"left"!==o&&(r=999),"top"!==a&&(i=999);var c="",u=rI(t);("left"in e||"top"in e)&&(c=function(t){return t.style.transitionProperty||t.style[GT()]}(t)||"",XT(t,"none")),"left"in e&&(t.style[s]="",t.style[o]="".concat(r,"px")),"top"in e&&(t.style[l]="",t.style[a]="".concat(i,"px")),JT(t);var h=rI(t),p={};for(var d in e)if(e.hasOwnProperty(d)){var f=hI(d,n),g="left"===d?r:i,m=u[d]-h[d];p[f]=f===d?g+m:g-m}QT(t,p),JT(t),("left"in e||"top"in e)&&XT(t,c);var y={};for(var v in e)if(e.hasOwnProperty(v)){var x=hI(v,n),_=e[v]-u[v];y[x]=v===x?p[x]+_:p[x]-_}QT(t,y)}function fI(t,e){var n=rI(t),r=function(t){var e=window.getComputedStyle(t,null),n=e.getPropertyValue("transform")||e.getPropertyValue(WT());if(n&&"none"!==n){var r=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(r[12]||r[4],0),y:parseFloat(r[13]||r[5],0)}}return{x:0,y:0}}(t),i={x:r.x,y:r.y};"left"in e&&(i.x=r.x+e.left-n.left),"top"in e&&(i.y=r.y+e.top-n.top),function(t,e){var n=window.getComputedStyle(t,null),r=n.getPropertyValue("transform")||n.getPropertyValue(WT());if(r&&"none"!==r){var i,o=r.match(ZT);o?((i=(o=o[1]).split(",").map((function(t){return parseFloat(t,10)})))[4]=e.x,i[5]=e.y,qT(t,"matrix(".concat(i.join(","),")"))):((i=r.match(KT)[1].split(",").map((function(t){return parseFloat(t,10)})))[12]=e.x,i[13]=e.y,qT(t,"matrix3d(".concat(i.join(","),")")))}else qT(t,"translateX(".concat(e.x,"px) translateY(").concat(e.y,"px) translateZ(0)"))}(t,i)}function gI(t,e){for(var n=0;n<t.length;n++)e(t[n])}function mI(t){return"border-box"===YT(t,"boxSizing")}"undefined"!==typeof window&&(YT=window.getComputedStyle?function(t,e,n){var r=n,i="",o=oI(t);return(r=r||o.defaultView.getComputedStyle(t,null))&&(i=r.getPropertyValue(e)||r[e]),i}:function(t,e){var n=t[lI]&&t[lI][e];if(aI.test(n)&&!sI.test(e)){var r=t.style,i=r[uI],o=t[cI][uI];t[cI][uI]=t[lI][uI],r[uI]="fontSize"===e?"1em":n||0,n=r.pixelLeft+"px",r[uI]=i,t[cI][uI]=o}return""===n?"auto":n});var yI=["margin","border","padding"],vI=-1,xI=2,_I=1;function bI(t,e,n){var r,i,o,a=0;for(i=0;i<e.length;i++)if(r=e[i])for(o=0;o<n.length;o++){var s=void 0;s="border"===r?"".concat(r).concat(n[o],"Width"):r+n[o],a+=parseFloat(YT(t,s))||0}return a}var wI={getParent:function(t){var e=t;do{e=11===e.nodeType&&e.host?e.host:e.parentNode}while(e&&1!==e.nodeType&&9!==e.nodeType);return e}};function SI(t,e,n){var r=n;if(iI(t))return"width"===e?wI.viewportWidth(t):wI.viewportHeight(t);if(9===t.nodeType)return"width"===e?wI.docWidth(t):wI.docHeight(t);var i="width"===e?["Left","Right"]:["Top","Bottom"],o="width"===e?Math.floor(t.getBoundingClientRect().width):Math.floor(t.getBoundingClientRect().height),a=mI(t),s=0;(null===o||void 0===o||o<=0)&&(o=void 0,(null===(s=YT(t,e))||void 0===s||Number(s)<0)&&(s=t.style[e]||0),s=Math.floor(parseFloat(s))||0),void 0===r&&(r=a?_I:vI);var l=void 0!==o||a,c=o||s;return r===vI?l?c-bI(t,["border","padding"],i):s:l?r===_I?c:c+(r===xI?-bI(t,["border"],i):bI(t,["margin"],i)):s+bI(t,yI.slice(r),i)}gI(["Width","Height"],(function(t){wI["doc".concat(t)]=function(e){var n=e.document;return Math.max(n.documentElement["scroll".concat(t)],n.body["scroll".concat(t)],wI["viewport".concat(t)](n))},wI["viewport".concat(t)]=function(e){var n="client".concat(t),r=e.document,i=r.body,o=r.documentElement[n];return"CSS1Compat"===r.compatMode&&o||i&&i[n]||o}}));var CI={position:"absolute",visibility:"hidden",display:"block"};function EI(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i=e[0];return 0!==i.offsetWidth?r=SI.apply(void 0,e):function(t,e,n){var r,i={},o=t.style;for(r in e)e.hasOwnProperty(r)&&(i[r]=o[r],o[r]=e[r]);for(r in n.call(t),e)e.hasOwnProperty(r)&&(o[r]=i[r])}(i,CI,(function(){r=SI.apply(void 0,e)})),r}function kI(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}gI(["width","height"],(function(t){var e=t.charAt(0).toUpperCase()+t.slice(1);wI["outer".concat(e)]=function(e,n){return e&&EI(e,t,n?0:_I)};var n="width"===t?["Left","Right"]:["Top","Bottom"];wI[t]=function(e,r){var i=r;return void 0!==i?e?(mI(e)&&(i+=bI(e,["padding","border"],n)),QT(e,t,i)):void 0:e&&EI(e,t,vI)}}));var MI={getWindow:function(t){if(t&&t.document&&t.setTimeout)return t;var e=t.ownerDocument||t;return e.defaultView||e.parentWindow},getDocument:oI,offset:function(t,e,n){if("undefined"===typeof e)return rI(t);!function(t,e,n){if(n.ignoreShake){var r=rI(t),i=r.left.toFixed(0),o=r.top.toFixed(0),a=e.left.toFixed(0),s=e.top.toFixed(0);if(i===a&&o===s)return}n.useCssRight||n.useCssBottom?dI(t,e,n):n.useCssTransform&&WT()in document.body.style?fI(t,e):dI(t,e,n)}(t,e,n||{})},isWindow:iI,each:gI,css:QT,clone:function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);if(t.overflow)for(e in t)t.hasOwnProperty(e)&&(n.overflow[e]=t.overflow[e]);return n},mix:kI,getWindowScrollLeft:function(t){return eI(t)},getWindowScrollTop:function(t){return nI(t)},merge:function(){for(var t={},e=0;e<arguments.length;e++)MI.mix(t,e<0||arguments.length<=e?void 0:arguments[e]);return t},viewportWidth:0,viewportHeight:0};kI(MI,wI);var TI=MI.getParent;function II(t){if(MI.isWindow(t)||9===t.nodeType)return null;var e,n=MI.getDocument(t).body,r=MI.css(t,"position");if(!("fixed"===r||"absolute"===r))return"html"===t.nodeName.toLowerCase()?null:TI(t);for(e=TI(t);e&&e!==n&&9!==e.nodeType;e=TI(e))if("static"!==(r=MI.css(e,"position")))return e;return null}var PI=MI.getParent;function OI(t,e){for(var n={left:0,right:1/0,top:0,bottom:1/0},r=II(t),i=MI.getDocument(t),o=i.defaultView||i.parentWindow,a=i.body,s=i.documentElement;r;){if(-1!==navigator.userAgent.indexOf("MSIE")&&0===r.clientWidth||r===a||r===s||"visible"===MI.css(r,"overflow")){if(r===a||r===s)break}else{var l=MI.offset(r);l.left+=r.clientLeft,l.top+=r.clientTop,n.top=Math.max(n.top,l.top),n.right=Math.min(n.right,l.left+r.clientWidth),n.bottom=Math.min(n.bottom,l.top+r.clientHeight),n.left=Math.max(n.left,l.left)}r=II(r)}var c=null;MI.isWindow(t)||9===t.nodeType||(c=t.style.position,"absolute"===MI.css(t,"position")&&(t.style.position="fixed"));var u=MI.getWindowScrollLeft(o),h=MI.getWindowScrollTop(o),p=MI.viewportWidth(o),d=MI.viewportHeight(o),f=s.scrollWidth,g=s.scrollHeight,m=window.getComputedStyle(a);if("hidden"===m.overflowX&&(f=o.innerWidth),"hidden"===m.overflowY&&(g=o.innerHeight),t.style&&(t.style.position=c),e||function(t){if(MI.isWindow(t)||9===t.nodeType)return!1;var e=MI.getDocument(t),n=e.body,r=null;for(r=PI(t);r&&r!==n&&r!==e;r=PI(r))if("fixed"===MI.css(r,"position"))return!0;return!1}(t))n.left=Math.max(n.left,u),n.top=Math.max(n.top,h),n.right=Math.min(n.right,u+p),n.bottom=Math.min(n.bottom,h+d);else{var y=Math.max(f,u+p);n.right=Math.min(n.right,y);var v=Math.max(g,h+d);n.bottom=Math.min(n.bottom,v)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function AI(t){var e,n,r;if(MI.isWindow(t)||9===t.nodeType){var i=MI.getWindow(t);e={left:MI.getWindowScrollLeft(i),top:MI.getWindowScrollTop(i)},n=MI.viewportWidth(i),r=MI.viewportHeight(i)}else e=MI.offset(t),n=MI.outerWidth(t),r=MI.outerHeight(t);return e.width=n,e.height=r,e}function DI(t,e){var n=e.charAt(0),r=e.charAt(1),i=t.width,o=t.height,a=t.left,s=t.top;return"c"===n?s+=o/2:"b"===n&&(s+=o),"c"===r?a+=i/2:"r"===r&&(a+=i),{left:a,top:s}}function RI(t,e,n,r,i){var o=DI(e,n[1]),a=DI(t,n[0]),s=[a.left-o.left,a.top-o.top];return{left:Math.round(t.left-s[0]+r[0]-i[0]),top:Math.round(t.top-s[1]+r[1]-i[1])}}function LI(t,e,n){return t.left<n.left||t.left+e.width>n.right}function NI(t,e,n){return t.top<n.top||t.top+e.height>n.bottom}function FI(t,e,n){var r=[];return MI.each(t,(function(t){r.push(t.replace(e,(function(t){return n[t]})))})),r}function zI(t,e){return t[e]=-t[e],t}function BI(t,e){return(/%$/.test(t)?parseInt(t.substring(0,t.length-1),10)/100*e:parseInt(t,10))||0}function $I(t,e){t[0]=BI(t[0],e.width),t[1]=BI(t[1],e.height)}function jI(t,e,n,r){var i=n.points,o=n.offset||[0,0],a=n.targetOffset||[0,0],s=n.overflow,l=n.source||t;o=[].concat(o),a=[].concat(a);var c={},u=0,h=OI(l,!(!(s=s||{})||!s.alwaysByViewport)),p=AI(l);$I(o,p),$I(a,e);var d=RI(p,e,i,o,a),f=MI.merge(p,d);if(h&&(s.adjustX||s.adjustY)&&r){if(s.adjustX&&LI(d,p,h)){var g=FI(i,/[lr]/gi,{l:"r",r:"l"}),m=zI(o,0),y=zI(a,0);(function(t,e,n){return t.left>n.right||t.left+e.width<n.left})(RI(p,e,g,m,y),p,h)||(u=1,i=g,o=m,a=y)}if(s.adjustY&&NI(d,p,h)){var v=FI(i,/[tb]/gi,{t:"b",b:"t"}),x=zI(o,1),_=zI(a,1);(function(t,e,n){return t.top>n.bottom||t.top+e.height<n.top})(RI(p,e,v,x,_),p,h)||(u=1,i=v,o=x,a=_)}u&&(d=RI(p,e,i,o,a),MI.mix(f,d));var b=LI(d,p,h),w=NI(d,p,h);if(b||w){var S=i;b&&(S=FI(i,/[lr]/gi,{l:"r",r:"l"})),w&&(S=FI(i,/[tb]/gi,{t:"b",b:"t"})),i=S,o=n.offset||[0,0],a=n.targetOffset||[0,0]}c.adjustX=s.adjustX&&b,c.adjustY=s.adjustY&&w,(c.adjustX||c.adjustY)&&(f=function(t,e,n,r){var i=MI.clone(t),o={width:e.width,height:e.height};return r.adjustX&&i.left<n.left&&(i.left=n.left),r.resizeWidth&&i.left>=n.left&&i.left+o.width>n.right&&(o.width-=i.left+o.width-n.right),r.adjustX&&i.left+o.width>n.right&&(i.left=Math.max(n.right-o.width,n.left)),r.adjustY&&i.top<n.top&&(i.top=n.top),r.resizeHeight&&i.top>=n.top&&i.top+o.height>n.bottom&&(o.height-=i.top+o.height-n.bottom),r.adjustY&&i.top+o.height>n.bottom&&(i.top=Math.max(n.bottom-o.height,n.top)),MI.mix(i,o)}(d,p,h,c))}return f.width!==p.width&&MI.css(l,"width",MI.width(l)+f.width-p.width),f.height!==p.height&&MI.css(l,"height",MI.height(l)+f.height-p.height),MI.offset(l,{left:f.left,top:f.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:i,offset:o,targetOffset:a,overflow:c}}function UI(t,e,n){var r=n.target||e,i=AI(r),o=!function(t,e){var n=OI(t,e),r=AI(t);return!n||r.left+r.width<=n.left||r.top+r.height<=n.top||r.left>=n.right||r.top>=n.bottom}(r,n.overflow&&n.overflow.alwaysByViewport);return jI(t,i,n,o)}UI.__getOffsetParent=II,UI.__getVisibleRectForElement=OI;function VI(t,e){var n=null,r=null;var i=new Dm((function(t){var i=Ri(t,1)[0].target;if(document.documentElement.contains(i)){var o=i.getBoundingClientRect(),a=o.width,s=o.height,l=Math.floor(a),c=Math.floor(s);n===l&&r===c||Promise.resolve().then((function(){e({width:l,height:c})})),n=l,r=c}}));return t&&i.observe(t),function(){i.disconnect()}}function HI(t){return"function"!==typeof t?null:t()}function GI(t){return"object"===Cr(t)&&t?t:null}var WI=function(t,e){var n=t.children,r=t.disabled,i=t.target,o=t.align,a=t.onAlign,s=t.monitorWindowResize,l=t.monitorBufferTime,c=void 0===l?0:l,u=m.useRef({}),h=m.useRef(),p=m.Children.only(n),d=m.useRef({});d.current.disabled=r,d.current.target=i,d.current.align=o,d.current.onAlign=a;var f=function(t,e){var n=m.useRef(!1),r=m.useRef(null);function i(){window.clearTimeout(r.current)}return[function o(a){if(i(),n.current&&!0!==a)r.current=window.setTimeout((function(){n.current=!1,o()}),e);else{if(!1===t(a))return;n.current=!0,r.current=window.setTimeout((function(){n.current=!1}),e)}},function(){n.current=!1,i()}]}((function(){var t=d.current,e=t.disabled,n=t.target,r=t.align,i=t.onAlign,o=h.current;if(!e&&n&&o){var a,s=HI(n),l=GI(n);u.current.element=s,u.current.point=l,u.current.align=r;var c=document.activeElement;return s&&Wh(s)?a=UI(o,s,r):l&&(a=function(t,e,n){var r,i,o=MI.getDocument(t),a=o.defaultView||o.parentWindow,s=MI.getWindowScrollLeft(a),l=MI.getWindowScrollTop(a),c=MI.viewportWidth(a),u=MI.viewportHeight(a),h={left:r="pageX"in e?e.pageX:s+e.clientX,top:i="pageY"in e?e.pageY:l+e.clientY,width:0,height:0},p=r>=0&&r<=s+c&&i>=0&&i<=l+u,d=[n.points[0],"cc"];return jI(t,h,$T($T({},n),{},{points:d}),p)}(o,l,r)),function(t,e){t!==document.activeElement&&mi(e,t)&&"function"===typeof t.focus&&t.focus()}(c,o),i&&a&&i(o,a),!0}return!1}),c),g=Ri(f,2),y=g[0],v=g[1],x=Ri(m.useState(),2),_=x[0],b=x[1],w=Ri(m.useState(),2),S=w[0],C=w[1];return _d((function(){b(HI(i)),C(GI(i))})),m.useEffect((function(){u.current.element===_&&function(t,e){return t===e||!(!t||!e)&&("pageX"in e&&"pageY"in e?t.pageX===e.pageX&&t.pageY===e.pageY:"clientX"in e&&"clientY"in e&&t.clientX===e.clientX&&t.clientY===e.clientY)}(u.current.point,S)&&ri(u.current.align,o)||y()})),m.useEffect((function(){return VI(h.current,y)}),[h.current]),m.useEffect((function(){return VI(_,y)}),[_]),m.useEffect((function(){r?v():y()}),[r]),m.useEffect((function(){if(s)return gS(window,"resize",y).remove}),[s]),m.useEffect((function(){return function(){v()}}),[]),m.useImperativeHandle(e,(function(){return{forceAlign:function(){return y(!0)}}})),m.isValidElement(p)&&(p=m.cloneElement(p,{ref:lc(p.ref,h)})),p},XI=m.forwardRef(WI);XI.displayName="Align";var qI=XI,YI=["measure","alignPre","align",null,"motion"],ZI=m.forwardRef((function(t,e){var n=t.visible,r=t.prefixCls,i=t.className,o=t.style,a=t.children,s=t.zIndex,l=t.stretch,c=t.destroyPopupOnHide,u=t.forceRender,h=t.align,p=t.point,d=t.getRootDomNode,f=t.getClassNameFromAlign,g=t.onAlign,y=t.onMouseEnter,v=t.onMouseLeave,x=t.onMouseDown,_=t.onTouchStart,b=t.onClick,w=(0,m.useRef)(),S=(0,m.useRef)(),C=Ri((0,m.useState)(),2),E=C[0],k=C[1],M=function(t){var e=Ri(m.useState({width:0,height:0}),2),n=e[0],r=e[1];return[m.useMemo((function(){var e={};if(t){var r=n.width,i=n.height;-1!==t.indexOf("height")&&i?e.height=i:-1!==t.indexOf("minHeight")&&i&&(e.minHeight=i),-1!==t.indexOf("width")&&r?e.width=r:-1!==t.indexOf("minWidth")&&r&&(e.minWidth=r)}return e}),[t,n]),function(t){var e=t.offsetWidth,n=t.offsetHeight,i=t.getBoundingClientRect(),o=i.width,a=i.height;Math.abs(e-o)<1&&Math.abs(n-a)<1&&(e=o,n=a),r({width:e,height:n})}]}(l),T=Ri(M,2),I=T[0],P=T[1];var O=function(t,e){var n=Ri(mc(null),2),r=n[0],i=n[1],o=(0,m.useRef)();function a(t){i(t,!0)}function s(){Xc.cancel(o.current)}return(0,m.useEffect)((function(){a("measure")}),[t]),(0,m.useEffect)((function(){"measure"===r&&e(),r&&(o.current=Xc(Mr(Er().mark((function t(){var e,n;return Er().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=YI.indexOf(r),(n=YI[e+1])&&-1!==e&&a(n);case 3:case"end":return t.stop()}}),t)})))))}),[r]),(0,m.useEffect)((function(){return function(){s()}}),[]),[r,function(t){s(),o.current=Xc((function(){a((function(t){switch(r){case"align":return"motion";case"motion":return"stable"}return t})),null===t||void 0===t||t()}))}]}(n,(function(){l&&P(d())})),A=Ri(O,2),D=A[0],R=A[1],L=Ri((0,m.useState)(0),2),N=L[0],F=L[1],z=(0,m.useRef)();function B(){var t;null===(t=w.current)||void 0===t||t.forceAlign()}function $(t,e){var n=f(e);E!==n&&k(n),F((function(t){return t+1})),"align"===D&&(null===g||void 0===g||g(t,e))}_d((function(){"alignPre"===D&&F(0)}),[D]),_d((function(){"align"===D&&(N<3?B():R((function(){var t;null===(t=z.current)||void 0===t||t.call(z)})))}),[N]);var j=Or({},FT(t));function U(){return new Promise((function(t){z.current=t}))}["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach((function(t){var e=j[t];j[t]=function(t,n){return R(),null===e||void 0===e?void 0:e(t,n)}})),m.useEffect((function(){j.motionName||"motion"!==D||R()}),[j.motionName,D]),m.useImperativeHandle(e,(function(){return{forceAlign:B,getElement:function(){return S.current}}}));var V=Or(Or({},I),{},{zIndex:s,opacity:"motion"!==D&&"stable"!==D&&n?0:void 0,pointerEvents:n||"stable"===D?void 0:"none"},o),H=!0;null===h||void 0===h||!h.points||"align"!==D&&"stable"!==D||(H=!1);var G=a;return m.Children.count(a)>1&&(G=m.createElement("div",{className:"".concat(r,"-content")},a)),m.createElement(hu,Ui({visible:n,ref:S,leavedClassName:"".concat(r,"-hidden")},j,{onAppearPrepare:U,onEnterPrepare:U,removeOnLeave:c,forceRender:u}),(function(t,e){var n=t.className,o=t.style,a=ic()(r,i,E,n);return m.createElement(qI,{target:p||d,key:"popup",ref:w,monitorWindowResize:!0,disabled:H,align:h,onAlign:$},m.createElement("div",{ref:e,className:a,onMouseEnter:y,onMouseLeave:v,onMouseDownCapture:x,onTouchStartCapture:_,onClick:b,style:Or(Or({},o),V)},G))}))}));ZI.displayName="PopupInner";var KI=ZI,JI=m.forwardRef((function(t,e){var n=t.prefixCls,r=t.visible,i=t.zIndex,o=t.children,a=t.mobile,s=(a=void 0===a?{}:a).popupClassName,l=a.popupStyle,c=a.popupMotion,u=void 0===c?{}:c,h=a.popupRender,p=t.onClick,d=m.useRef();m.useImperativeHandle(e,(function(){return{forceAlign:function(){},getElement:function(){return d.current}}}));var f=Or({zIndex:i},l),g=o;return m.Children.count(o)>1&&(g=m.createElement("div",{className:"".concat(n,"-content")},o)),h&&(g=h(g)),m.createElement(hu,Ui({visible:r,ref:d,removeOnLeave:!0},u),(function(t,e){var r=t.className,i=t.style,o=ic()(n,s,r);return m.createElement("div",{ref:e,className:o,onClick:p,style:Or(Or({},i),f)},g)}))}));JI.displayName="MobilePopupInner";var QI=JI,tP=["visible","mobile"],eP=m.forwardRef((function(t,e){var n=t.visible,r=t.mobile,i=Zo(t,tP),o=Ri((0,m.useState)(n),2),a=o[0],s=o[1],l=Ri((0,m.useState)(!1),2),c=l[0],u=l[1],h=Or(Or({},i),{},{visible:a});(0,m.useEffect)((function(){s(n),n&&r&&u(Hm())}),[n,r]);var p=c?m.createElement(QI,Ui({},h,{mobile:r,ref:e})):m.createElement(KI,Ui({},h,{ref:e}));return m.createElement("div",null,m.createElement(zT,h),p)}));eP.displayName="Popup";var nP=eP,rP=m.createContext(null);function iP(){}function oP(){return""}function aP(t){return t?t.ownerDocument:window.document}var sP=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];var lP=function(t){var e=function(e){Qo(r,e);var n=ea(r);function r(t){var e,i;return ii(this,r),Ir(Ko(e=n.call(this,t)),"popupRef",m.createRef()),Ir(Ko(e),"triggerRef",m.createRef()),Ir(Ko(e),"portalContainer",void 0),Ir(Ko(e),"attachId",void 0),Ir(Ko(e),"clickOutsideHandler",void 0),Ir(Ko(e),"touchOutsideHandler",void 0),Ir(Ko(e),"contextMenuOutsideHandler1",void 0),Ir(Ko(e),"contextMenuOutsideHandler2",void 0),Ir(Ko(e),"mouseDownTimeout",void 0),Ir(Ko(e),"focusTime",void 0),Ir(Ko(e),"preClickTime",void 0),Ir(Ko(e),"preTouchTime",void 0),Ir(Ko(e),"delayTimer",void 0),Ir(Ko(e),"hasPopupMouseDown",void 0),Ir(Ko(e),"onMouseEnter",(function(t){var n=e.props.mouseEnterDelay;e.fireEvents("onMouseEnter",t),e.delaySetPopupVisible(!0,n,n?null:t)})),Ir(Ko(e),"onMouseMove",(function(t){e.fireEvents("onMouseMove",t),e.setPoint(t)})),Ir(Ko(e),"onMouseLeave",(function(t){e.fireEvents("onMouseLeave",t),e.delaySetPopupVisible(!1,e.props.mouseLeaveDelay)})),Ir(Ko(e),"onPopupMouseEnter",(function(){e.clearDelayTimer()})),Ir(Ko(e),"onPopupMouseLeave",(function(t){var n;t.relatedTarget&&!t.relatedTarget.setTimeout&&mi(null===(n=e.popupRef.current)||void 0===n?void 0:n.getElement(),t.relatedTarget)||e.delaySetPopupVisible(!1,e.props.mouseLeaveDelay)})),Ir(Ko(e),"onFocus",(function(t){e.fireEvents("onFocus",t),e.clearDelayTimer(),e.isFocusToShow()&&(e.focusTime=Date.now(),e.delaySetPopupVisible(!0,e.props.focusDelay))})),Ir(Ko(e),"onMouseDown",(function(t){e.fireEvents("onMouseDown",t),e.preClickTime=Date.now()})),Ir(Ko(e),"onTouchStart",(function(t){e.fireEvents("onTouchStart",t),e.preTouchTime=Date.now()})),Ir(Ko(e),"onBlur",(function(t){e.fireEvents("onBlur",t),e.clearDelayTimer(),e.isBlurToHide()&&e.delaySetPopupVisible(!1,e.props.blurDelay)})),Ir(Ko(e),"onContextMenu",(function(t){t.preventDefault(),e.fireEvents("onContextMenu",t),e.setPopupVisible(!0,t)})),Ir(Ko(e),"onContextMenuClose",(function(){e.isContextMenuToShow()&&e.close()})),Ir(Ko(e),"onClick",(function(t){if(e.fireEvents("onClick",t),e.focusTime){var n;if(e.preClickTime&&e.preTouchTime?n=Math.min(e.preClickTime,e.preTouchTime):e.preClickTime?n=e.preClickTime:e.preTouchTime&&(n=e.preTouchTime),Math.abs(n-e.focusTime)<20)return;e.focusTime=0}e.preClickTime=0,e.preTouchTime=0,e.isClickToShow()&&(e.isClickToHide()||e.isBlurToHide())&&t&&t.preventDefault&&t.preventDefault();var r=!e.state.popupVisible;(e.isClickToHide()&&!r||r&&e.isClickToShow())&&e.setPopupVisible(!e.state.popupVisible,t)})),Ir(Ko(e),"onPopupMouseDown",(function(){var t;(e.hasPopupMouseDown=!0,clearTimeout(e.mouseDownTimeout),e.mouseDownTimeout=window.setTimeout((function(){e.hasPopupMouseDown=!1}),0),e.context)&&(t=e.context).onPopupMouseDown.apply(t,arguments)})),Ir(Ko(e),"onDocumentClick",(function(t){if(!e.props.mask||e.props.maskClosable){var n=t.target,r=e.getRootDomNode(),i=e.getPopupDomNode();mi(r,n)&&!e.isContextMenuOnly()||mi(i,n)||e.hasPopupMouseDown||e.close()}})),Ir(Ko(e),"getRootDomNode",(function(){var t=e.props.getTriggerDOMNode;if(t)return t(e.triggerRef.current);try{var n=ac(e.triggerRef.current);if(n)return n}catch(r){}return Dr.findDOMNode(Ko(e))})),Ir(Ko(e),"getPopupClassNameFromAlign",(function(t){var n=[],r=e.props,i=r.popupPlacement,o=r.builtinPlacements,a=r.prefixCls,s=r.alignPoint,l=r.getPopupClassNameFromAlign;return i&&o&&n.push(function(t,e,n,r){for(var i=n.points,o=Object.keys(t),a=0;a<o.length;a+=1){var s=o[a];if(NT(t[s].points,i,r))return"".concat(e,"-placement-").concat(s)}return""}(o,a,t,s)),l&&n.push(l(t)),n.join(" ")})),Ir(Ko(e),"getComponent",(function(){var t=e.props,n=t.prefixCls,r=t.destroyPopupOnHide,i=t.popupClassName,o=t.onPopupAlign,a=t.popupMotion,s=t.popupAnimation,l=t.popupTransitionName,c=t.popupStyle,u=t.mask,h=t.maskAnimation,p=t.maskTransitionName,d=t.maskMotion,f=t.zIndex,g=t.popup,y=t.stretch,v=t.alignPoint,x=t.mobile,_=t.forceRender,b=t.onPopupClick,w=e.state,S=w.popupVisible,C=w.point,E=e.getPopupAlign(),k={};return e.isMouseEnterToShow()&&(k.onMouseEnter=e.onPopupMouseEnter),e.isMouseLeaveToHide()&&(k.onMouseLeave=e.onPopupMouseLeave),k.onMouseDown=e.onPopupMouseDown,k.onTouchStart=e.onPopupMouseDown,m.createElement(nP,Ui({prefixCls:n,destroyPopupOnHide:r,visible:S,point:v&&C,className:i,align:E,onAlign:o,animation:s,getClassNameFromAlign:e.getPopupClassNameFromAlign},k,{stretch:y,getRootDomNode:e.getRootDomNode,style:c,mask:u,zIndex:f,transitionName:l,maskAnimation:h,maskTransitionName:p,maskMotion:d,ref:e.popupRef,motion:a,mobile:x,forceRender:_,onClick:b}),"function"===typeof g?g():g)})),Ir(Ko(e),"attachParent",(function(t){Xc.cancel(e.attachId);var n,r=e.props,i=r.getPopupContainer,o=r.getDocument,a=e.getRootDomNode();i?(a||0===i.length)&&(n=i(a)):n=o(e.getRootDomNode()).body,n?n.appendChild(t):e.attachId=Xc((function(){e.attachParent(t)}))})),Ir(Ko(e),"getContainer",(function(){if(!e.portalContainer){var t=(0,e.props.getDocument)(e.getRootDomNode()).createElement("div");t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",e.portalContainer=t}return e.attachParent(e.portalContainer),e.portalContainer})),Ir(Ko(e),"setPoint",(function(t){e.props.alignPoint&&t&&e.setState({point:{pageX:t.pageX,pageY:t.pageY}})})),Ir(Ko(e),"handlePortalUpdate",(function(){e.state.prevPopupVisible!==e.state.popupVisible&&e.props.afterPopupVisibleChange(e.state.popupVisible)})),Ir(Ko(e),"triggerContextValue",{onPopupMouseDown:e.onPopupMouseDown}),i="popupVisible"in t?!!t.popupVisible:!!t.defaultPopupVisible,e.state={prevPopupVisible:i,popupVisible:i},sP.forEach((function(t){e["fire".concat(t)]=function(n){e.fireEvents(t,n)}})),e}return ai(r,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var t,e=this.props;if(this.state.popupVisible)return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(t=e.getDocument(this.getRootDomNode()),this.clickOutsideHandler=gS(t,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(t=t||e.getDocument(this.getRootDomNode()),this.touchOutsideHandler=gS(t,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(t=t||e.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=gS(t,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=gS(window,"blur",this.onContextMenuClose)));this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),Xc.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var t;return(null===(t=this.popupRef.current)||void 0===t?void 0:t.getElement())||null}},{key:"getPopupAlign",value:function(){var t=this.props,e=t.popupPlacement,n=t.popupAlign,r=t.builtinPlacements;return e&&r?function(t,e,n){return Or(Or({},t[e]||{}),n)}(r,e,n):n}},{key:"setPopupVisible",value:function(t,e){var n=this.props.alignPoint,r=this.state.popupVisible;this.clearDelayTimer(),r!==t&&("popupVisible"in this.props||this.setState({popupVisible:t,prevPopupVisible:r}),this.props.onPopupVisibleChange(t)),n&&e&&t&&this.setPoint(e)}},{key:"delaySetPopupVisible",value:function(t,e,n){var r=this,i=1e3*e;if(this.clearDelayTimer(),i){var o=n?{pageX:n.pageX,pageY:n.pageY}:null;this.delayTimer=window.setTimeout((function(){r.setPopupVisible(t,o),r.clearDelayTimer()}),i)}else this.setPopupVisible(t,n)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(t){var e=this.props.children.props,n=this.props;return e[t]&&n[t]?this["fire".concat(t)]:e[t]||n[t]}},{key:"isClickToShow",value:function(){var t=this.props,e=t.action,n=t.showAction;return-1!==e.indexOf("click")||-1!==n.indexOf("click")}},{key:"isContextMenuOnly",value:function(){var t=this.props.action;return"contextMenu"===t||1===t.length&&"contextMenu"===t[0]}},{key:"isContextMenuToShow",value:function(){var t=this.props,e=t.action,n=t.showAction;return-1!==e.indexOf("contextMenu")||-1!==n.indexOf("contextMenu")}},{key:"isClickToHide",value:function(){var t=this.props,e=t.action,n=t.hideAction;return-1!==e.indexOf("click")||-1!==n.indexOf("click")}},{key:"isMouseEnterToShow",value:function(){var t=this.props,e=t.action,n=t.showAction;return-1!==e.indexOf("hover")||-1!==n.indexOf("mouseEnter")}},{key:"isMouseLeaveToHide",value:function(){var t=this.props,e=t.action,n=t.hideAction;return-1!==e.indexOf("hover")||-1!==n.indexOf("mouseLeave")}},{key:"isFocusToShow",value:function(){var t=this.props,e=t.action,n=t.showAction;return-1!==e.indexOf("focus")||-1!==n.indexOf("focus")}},{key:"isBlurToHide",value:function(){var t=this.props,e=t.action,n=t.hideAction;return-1!==e.indexOf("focus")||-1!==n.indexOf("blur")}},{key:"forcePopupAlign",value:function(){var t;this.state.popupVisible&&(null===(t=this.popupRef.current)||void 0===t||t.forceAlign())}},{key:"fireEvents",value:function(t,e){var n=this.props.children.props[t];n&&n(e);var r=this.props[t];r&&r(e)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var e=this.state.popupVisible,n=this.props,r=n.children,i=n.forceRender,o=n.alignPoint,a=n.className,s=n.autoDestroy,l=m.Children.only(r),c={key:"trigger"};this.isContextMenuToShow()?c.onContextMenu=this.onContextMenu:c.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(c.onClick=this.onClick,c.onMouseDown=this.onMouseDown,c.onTouchStart=this.onTouchStart):(c.onClick=this.createTwoChains("onClick"),c.onMouseDown=this.createTwoChains("onMouseDown"),c.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(c.onMouseEnter=this.onMouseEnter,o&&(c.onMouseMove=this.onMouseMove)):c.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?c.onMouseLeave=this.onMouseLeave:c.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(c.onFocus=this.onFocus,c.onBlur=this.onBlur):(c.onFocus=this.createTwoChains("onFocus"),c.onBlur=this.createTwoChains("onBlur"));var u=ic()(l&&l.props&&l.props.className,a);u&&(c.className=u);var h=Or({},c);uc(l)&&(h.ref=lc(this.triggerRef,l.ref));var p,d=m.cloneElement(l,h);return(e||this.popupRef.current||i)&&(p=m.createElement(t,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!e&&s&&(p=null),m.createElement(rP.Provider,{value:this.triggerContextValue},d,p)}}],[{key:"getDerivedStateFromProps",value:function(t,e){var n=t.popupVisible,r={};return void 0!==n&&e.popupVisible!==n&&(r.popupVisible=n,r.prevPopupVisible=e.popupVisible),r}}]),r}(m.Component);return Ir(e,"contextType",rP),Ir(e,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:oP,getDocument:aP,onPopupVisibleChange:iP,afterPopupVisibleChange:iP,onPopupAlign:iP,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),e}(LT),cP={adjustX:1,adjustY:1},uP={topLeft:{points:["bl","tl"],overflow:cP,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:cP,offset:[0,7]},leftTop:{points:["tr","tl"],overflow:cP,offset:[-4,0]},rightTop:{points:["tl","tr"],overflow:cP,offset:[4,0]}},hP={topLeft:{points:["bl","tl"],overflow:cP,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:cP,offset:[0,7]},rightTop:{points:["tr","tl"],overflow:cP,offset:[-4,0]},leftTop:{points:["tl","tr"],overflow:cP,offset:[4,0]}};function pP(t,e,n){return e||(n?n[t]||n.other:void 0)}var dP={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function fP(t){var e=t.prefixCls,n=t.visible,r=t.children,i=t.popup,o=t.popupClassName,a=t.popupOffset,s=t.disabled,l=t.mode,c=t.onVisibleChange,u=m.useContext(FM),h=u.getPopupContainer,p=u.rtl,d=u.subMenuOpenDelay,f=u.subMenuCloseDelay,g=u.builtinPlacements,y=u.triggerSubMenuAction,v=u.forceSubMenuRender,x=u.rootClassName,_=u.motion,b=u.defaultMotions,w=Ri(m.useState(!1),2),S=w[0],C=w[1],E=Or(Or({},p?hP:uP),g),k=dP[l],M=pP(l,_,b),T=m.useRef(M);"inline"!==l&&(T.current=M);var I=Or(Or({},T.current),{},{leavedClassName:"".concat(e,"-hidden"),removeOnLeave:!1,motionAppear:!0}),P=m.useRef();return m.useEffect((function(){return P.current=Xc((function(){C(n)})),function(){Xc.cancel(P.current)}}),[n]),m.createElement(lP,{prefixCls:e,popupClassName:ic()("".concat(e,"-popup"),Ir({},"".concat(e,"-rtl"),p),o,x),stretch:"horizontal"===l?"minWidth":null,getPopupContainer:h,builtinPlacements:E,popupPlacement:k,popupVisible:S,popup:i,popupAlign:a&&{offset:a},action:s?[]:[y],mouseEnterDelay:d,mouseLeaveDelay:f,onPopupVisibleChange:c,forceRender:v,popupMotion:I},r)}function gP(t){var e=t.id,n=t.open,r=t.keyPath,i=t.children,o="inline",a=m.useContext(FM),s=a.prefixCls,l=a.forceSubMenuRender,c=a.motion,u=a.defaultMotions,h=a.mode,p=m.useRef(!1);p.current=h===o;var d=Ri(m.useState(!p.current),2),f=d[0],g=d[1],y=!!p.current&&n;m.useEffect((function(){p.current&&g(!1)}),[h]);var v=Or({},pP(o,c,u));r.length>1&&(v.motionAppear=!1);var x=v.onVisibleChanged;return v.onVisibleChanged=function(t){return p.current||t||g(!0),null===x||void 0===x?void 0:x(t)},f?null:m.createElement(zM,{mode:o,locked:!p.current},m.createElement(hu,Ui({visible:y},v,{forceRender:l,removeOnLeave:!1,leavedClassName:"".concat(s,"-hidden")}),(function(t){var n=t.className,r=t.style;return m.createElement(TT,{id:e,className:n,style:r},i)})))}var mP=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],yP=["active"],vP=function(t){var e,n=t.style,r=t.className,i=t.title,o=t.eventKey,a=(t.warnKey,t.disabled),s=t.internalPopupClose,l=t.children,c=t.itemIcon,u=t.expandIcon,h=t.popupClassName,p=t.popupOffset,d=t.onClick,f=t.onMouseEnter,g=t.onMouseLeave,y=t.onTitleClick,v=t.onTitleMouseEnter,x=t.onTitleMouseLeave,_=Zo(t,mP),b=LM(o),w=m.useContext(FM),S=w.prefixCls,C=w.mode,E=w.openKeys,k=w.disabled,M=w.overflowDisabled,T=w.activeKey,I=w.selectedKeys,P=w.itemIcon,O=w.expandIcon,A=w.onItemClick,D=w.onOpenChange,R=w.onActive,L=m.useContext(GM)._internalRenderSubMenuItem,N=m.useContext(HM).isSubPathKey,F=VM(),z="".concat(S,"-submenu"),B=k||a,$=m.useRef(),j=m.useRef();var U=c||P,V=u||O,H=E.includes(o),G=!M&&H,W=N(I,o),X=dT(o,B,v,x),q=X.active,Y=Zo(X,yP),Z=Ri(m.useState(!1),2),K=Z[0],J=Z[1],Q=function(t){B||J(t)},tt=m.useMemo((function(){return q||"inline"!==C&&(K||N([T],o))}),[C,q,T,K,o,N]),et=fT(F.length),nt=uT((function(t){null===d||void 0===d||d(yT(t)),A(t)})),rt=b&&"".concat(b,"-popup"),it=m.createElement("div",Ui({role:"menuitem",style:et,className:"".concat(z,"-title"),tabIndex:B?null:-1,ref:$,title:"string"===typeof i?i:null,"data-menu-id":M&&b?null:b,"aria-expanded":G,"aria-haspopup":!0,"aria-controls":rt,"aria-disabled":B,onClick:function(t){B||(null===y||void 0===y||y({key:o,domEvent:t}),"inline"===C&&D(o,!H))},onFocus:function(){R(o)}},Y),i,m.createElement(gT,{icon:"horizontal"!==C?V:null,props:Or(Or({},t),{},{isOpen:G,isSubMenu:!0})},m.createElement("i",{className:"".concat(z,"-arrow")}))),ot=m.useRef(C);if("inline"!==C&&F.length>1?ot.current="vertical":ot.current=C,!M){var at=ot.current;it=m.createElement(fP,{mode:at,prefixCls:z,visible:!s&&G&&"inline"!==C,popupClassName:h,popupOffset:p,popup:m.createElement(zM,{mode:"horizontal"===at?"vertical":at},m.createElement(TT,{id:rt,ref:j},l)),disabled:B,onVisibleChange:function(t){"inline"!==C&&D(o,t)}},it)}var st=m.createElement(OC.Item,Ui({role:"none"},_,{component:"li",style:n,className:ic()(z,"".concat(z,"-").concat(C),r,(e={},Ir(e,"".concat(z,"-open"),G),Ir(e,"".concat(z,"-active"),tt),Ir(e,"".concat(z,"-selected"),W),Ir(e,"".concat(z,"-disabled"),B),e)),onMouseEnter:function(t){Q(!0),null===f||void 0===f||f({key:o,domEvent:t})},onMouseLeave:function(t){Q(!1),null===g||void 0===g||g({key:o,domEvent:t})}}),it,!M&&m.createElement(gP,{id:rt,open:G,keyPath:F},l));return L&&(st=L(st,t,{selected:W,active:tt,open:G,disabled:B})),m.createElement(zM,{onItemClick:nt,mode:"horizontal"===C?"vertical":C,itemIcon:U,expandIcon:V},st)};function xP(t){var e,n=t.eventKey,r=t.children,i=VM(n),o=PT(r,i),a=jM();return m.useEffect((function(){if(a)return a.registerPath(n,i),function(){a.unregisterPath(n,i)}}),[i]),e=a?o:m.createElement(vP,t,o),m.createElement(UM.Provider,{value:i},e)}var _P=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],bP=[],wP=m.forwardRef((function(t,e){var n,r,i=t,o=i.prefixCls,a=void 0===o?"rc-menu":o,s=i.rootClassName,l=i.style,c=i.className,u=i.tabIndex,h=void 0===u?0:u,p=i.items,d=i.children,f=i.direction,g=i.id,y=i.mode,v=void 0===y?"vertical":y,x=i.inlineCollapsed,_=i.disabled,b=i.disabledOverflow,w=i.subMenuOpenDelay,S=void 0===w?.1:w,C=i.subMenuCloseDelay,E=void 0===C?.1:C,k=i.forceSubMenuRender,M=i.defaultOpenKeys,T=i.openKeys,I=i.activeKey,P=i.defaultActiveFirst,O=i.selectable,A=void 0===O||O,D=i.multiple,R=void 0!==D&&D,L=i.defaultSelectedKeys,N=i.selectedKeys,F=i.onSelect,z=i.onDeselect,B=i.inlineIndent,$=void 0===B?24:B,j=i.motion,U=i.defaultMotions,V=i.triggerSubMenuAction,H=void 0===V?"hover":V,G=i.builtinPlacements,W=i.itemIcon,X=i.expandIcon,q=i.overflowedIndicator,Y=void 0===q?"...":q,Z=i.overflowedIndicatorPopupClassName,K=i.getPopupContainer,J=i.onClick,Q=i.onOpenChange,tt=i.onKeyDown,et=(i.openAnimation,i.openTransitionName,i._internalRenderMenuItem),nt=i._internalRenderSubMenuItem,rt=Zo(i,_P),it=m.useMemo((function(){return AT(d,p,bP)}),[d,p]),ot=Ri(m.useState(!1),2),at=ot[0],st=ot[1],lt=m.useRef(),ct=function(t){var e=Ri(Cy(t,{value:t}),2),n=e[0],r=e[1];return m.useEffect((function(){pT+=1;var t="".concat(hT,"-").concat(pT);r("rc-menu-uuid-".concat(t))}),[]),n}(g),ut="rtl"===f;var ht=Cy(M,{value:T,postState:function(t){return t||bP}}),pt=Ri(ht,2),dt=pt[0],ft=pt[1],gt=function(t){function e(){ft(t),null===Q||void 0===Q||Q(t)}arguments.length>1&&void 0!==arguments[1]&&arguments[1]?(0,Dr.flushSync)(e):e()},mt=Ri(m.useState(dt),2),yt=mt[0],vt=mt[1],xt=m.useRef(!1),_t=Ri(m.useMemo((function(){return"inline"!==v&&"vertical"!==v||!x?[v,!1]:["vertical",x]}),[v,x]),2),bt=_t[0],wt=_t[1],St="inline"===bt,Ct=Ri(m.useState(bt),2),Et=Ct[0],kt=Ct[1],Mt=Ri(m.useState(wt),2),Tt=Mt[0],It=Mt[1];m.useEffect((function(){kt(bt),It(wt),xt.current&&(St?ft(yt):gt(bP))}),[bt,wt]);var Pt=Ri(m.useState(0),2),Ot=Pt[0],At=Pt[1],Dt=Ot>=it.length-1||"horizontal"!==Et||b;m.useEffect((function(){St&&vt(dt)}),[dt]),m.useEffect((function(){return xt.current=!0,function(){xt.current=!1}}),[]);var Rt=cT(),Lt=Rt.registerPath,Nt=Rt.unregisterPath,Ft=Rt.refreshOverflowKeys,zt=Rt.isSubPathKey,Bt=Rt.getKeyPath,$t=Rt.getKeys,jt=Rt.getSubPathKeys,Ut=m.useMemo((function(){return{registerPath:Lt,unregisterPath:Nt}}),[Lt,Nt]),Vt=m.useMemo((function(){return{isSubPathKey:zt}}),[zt]);m.useEffect((function(){Ft(Dt?bP:it.slice(Ot+1).map((function(t){return t.key})))}),[Ot,Dt]);var Ht=Ri(Cy(I||P&&(null===(n=it[0])||void 0===n?void 0:n.key),{value:I}),2),Gt=Ht[0],Wt=Ht[1],Xt=uT((function(t){Wt(t)})),qt=uT((function(){Wt(void 0)}));(0,m.useImperativeHandle)(e,(function(){return{list:lt.current,focus:function(t){var e,n,r,i,o=null!==Gt&&void 0!==Gt?Gt:null===(e=it.find((function(t){return!t.props.disabled})))||void 0===e?void 0:e.key;o&&(null===(n=lt.current)||void 0===n||null===(r=n.querySelector("li[data-menu-id='".concat(RM(ct,o),"']")))||void 0===r||null===(i=r.focus)||void 0===i||i.call(r,t))}}}));var Yt=Cy(L||[],{value:N,postState:function(t){return Array.isArray(t)?t:null===t||void 0===t?bP:[t]}}),Zt=Ri(Yt,2),Kt=Zt[0],Jt=Zt[1],Qt=uT((function(t){null===J||void 0===J||J(yT(t)),function(t){if(A){var e,n=t.key,r=Kt.includes(n);e=R?r?Kt.filter((function(t){return t!==n})):[].concat(Sr(Kt),[n]):[n],Jt(e);var i=Or(Or({},t),{},{selectedKeys:e});r?null===z||void 0===z||z(i):null===F||void 0===F||F(i)}!R&&dt.length&&"inline"!==Et&&gt(bP)}(t)})),te=uT((function(t,e){var n=dt.filter((function(e){return e!==t}));if(e)n.push(t);else if("inline"!==Et){var r=jt(t);n=n.filter((function(t){return!r.has(t)}))}ri(dt,n,!0)||gt(n,!0)})),ee=uT(K),ne=oT(Et,Gt,ut,ct,lt,$t,Bt,Wt,(function(t,e){var n=null!==e&&void 0!==e?e:!dt.includes(t);te(t,n)}),tt);m.useEffect((function(){st(!0)}),[]);var re=m.useMemo((function(){return{_internalRenderMenuItem:et,_internalRenderSubMenuItem:nt}}),[et,nt]),ie="horizontal"!==Et||b?it:it.map((function(t,e){return m.createElement(zM,{key:t.key,overflowDisabled:e>Ot},t)})),oe=m.createElement(OC,Ui({id:g,ref:lt,prefixCls:"".concat(a,"-overflow"),component:"ul",itemComponent:CT,className:ic()(a,"".concat(a,"-root"),"".concat(a,"-").concat(Et),c,(r={},Ir(r,"".concat(a,"-inline-collapsed"),Tt),Ir(r,"".concat(a,"-rtl"),ut),r),s),dir:f,style:l,role:"menu",tabIndex:h,data:ie,renderRawItem:function(t){return t},renderRawRest:function(t){var e=t.length,n=e?it.slice(-e):null;return m.createElement(xP,{eventKey:lT,title:Y,disabled:Dt,internalPopupClose:0===e,popupClassName:Z},n)},maxCount:"horizontal"!==Et||b?OC.INVALIDATE:OC.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(t){At(t)},onKeyDown:ne},rt));return m.createElement(GM.Provider,{value:re},m.createElement(DM.Provider,{value:ct},m.createElement(zM,{prefixCls:a,rootClassName:s,mode:Et,openKeys:dt,rtl:ut,disabled:_,motion:at?j:null,defaultMotions:at?U:null,activeKey:Gt,onActive:Xt,onInactive:qt,selectedKeys:Kt,inlineIndent:$,subMenuOpenDelay:S,subMenuCloseDelay:E,forceSubMenuRender:k,builtinPlacements:G,triggerSubMenuAction:H,getPopupContainer:ee,itemIcon:W,expandIcon:X,onItemClick:Qt,onOpenChange:te},m.createElement(HM.Provider,{value:Vt},oe),m.createElement("div",{style:{display:"none"},"aria-hidden":!0},m.createElement($M.Provider,{value:Ut},it)))))})),SP=["className","title","eventKey","children"],CP=["children"],EP=function(t){var e=t.className,n=t.title,r=(t.eventKey,t.children),i=Zo(t,SP),o=m.useContext(FM).prefixCls,a="".concat(o,"-item-group");return m.createElement("li",Ui({role:"presentation"},i,{onClick:function(t){return t.stopPropagation()},className:ic()(a,e)}),m.createElement("div",{role:"presentation",className:"".concat(a,"-title"),title:"string"===typeof n?n:void 0},n),m.createElement("ul",{role:"group",className:"".concat(a,"-list")},r))};function kP(t){var e=t.children,n=Zo(t,CP),r=PT(e,VM(n.eventKey));return jM()?r:m.createElement(EP,Gh(n,["warnKey"]),r)}function MP(t){var e=t.className,n=t.style,r=m.useContext(FM).prefixCls;return jM()?null:m.createElement("li",{className:ic()("".concat(r,"-item-divider"),e),style:n})}var TP=wP;TP.Item=CT,TP.SubMenu=xP,TP.ItemGroup=kP,TP.Divider=MP;var IP=TP,PP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},OP=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:PP}))};var AP=m.forwardRef(OP);var DP=t=>{const{componentCls:e,motionDurationSlow:n,menuHorizontalHeight:r,colorSplit:i,lineWidth:o,lineType:a,menuItemPaddingInline:s}=t;return{[`${e}-horizontal`]:{lineHeight:`${r}px`,border:0,borderBottom:`${o}px ${a} ${i}`,boxShadow:"none","&::after":{display:"block",clear:"both",height:0,content:'"\\20"'},[`${e}-item, ${e}-submenu`]:{position:"relative",display:"inline-block",verticalAlign:"bottom",paddingInline:s},[`> ${e}-item:hover,\n        > ${e}-item-active,\n        > ${e}-submenu ${e}-submenu-title:hover`]:{backgroundColor:"transparent"},[`${e}-item, ${e}-submenu-title`]:{transition:[`border-color ${n}`,`background ${n}`].join(",")},[`${e}-submenu-arrow`]:{display:"none"}}}};var RP=t=>{let{componentCls:e,menuArrowOffset:n}=t;return{[`${e}-rtl`]:{direction:"rtl"},[`${e}-submenu-rtl`]:{transformOrigin:"100% 0"},[`${e}-rtl${e}-vertical,\n    ${e}-submenu-rtl ${e}-vertical`]:{[`${e}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateY(-${n})`},"&::after":{transform:`rotate(45deg) translateY(${n})`}}}}};const LP=t=>Object.assign({},yu(t));var NP=(t,e)=>{const{componentCls:n,colorItemText:r,colorItemTextSelected:i,colorGroupTitle:o,colorItemBg:a,colorSubItemBg:s,colorItemBgSelected:l,colorActiveBarHeight:c,colorActiveBarWidth:u,colorActiveBarBorderSize:h,motionDurationSlow:p,motionEaseInOut:d,motionEaseOut:f,menuItemPaddingInline:g,motionDurationMid:m,colorItemTextHover:y,lineType:v,colorSplit:x,colorItemTextDisabled:_,colorDangerItemText:b,colorDangerItemTextHover:w,colorDangerItemTextSelected:S,colorDangerItemBgActive:C,colorDangerItemBgSelected:E,colorItemBgHover:k,menuSubMenuBg:M,colorItemTextSelectedHorizontal:T,colorItemBgSelectedHorizontal:I}=t;return{[`${n}-${e}, ${n}-${e} > ${n}`]:{color:r,background:a,[`&${n}-root:focus-visible`]:Object.assign({},LP(t)),[`${n}-item-group-title`]:{color:o},[`${n}-submenu-selected`]:{[`> ${n}-submenu-title`]:{color:i}},[`${n}-item-disabled, ${n}-submenu-disabled`]:{color:`${_} !important`},[`${n}-item:hover, ${n}-submenu-title:hover`]:{[`&:not(${n}-item-selected):not(${n}-submenu-selected)`]:{color:y}},[`&:not(${n}-horizontal)`]:{[`${n}-item:not(${n}-item-selected)`]:{"&:hover":{backgroundColor:k},"&:active":{backgroundColor:l}},[`${n}-submenu-title`]:{"&:hover":{backgroundColor:k},"&:active":{backgroundColor:l}}},[`${n}-item-danger`]:{color:b,[`&${n}-item:hover`]:{[`&:not(${n}-item-selected):not(${n}-submenu-selected)`]:{color:w}},[`&${n}-item:active`]:{background:C}},[`${n}-item a`]:{"&, &:hover":{color:"inherit"}},[`${n}-item-selected`]:{color:i,[`&${n}-item-danger`]:{color:S},"a, a:hover":{color:"inherit"}},[`& ${n}-item-selected`]:{backgroundColor:l,[`&${n}-item-danger`]:{backgroundColor:E}},[`${n}-item, ${n}-submenu-title`]:{[`&:not(${n}-item-disabled):focus-visible`]:Object.assign({},LP(t))},[`&${n}-submenu > ${n}`]:{backgroundColor:M},[`&${n}-popup > ${n}`]:{backgroundColor:a},[`&${n}-horizontal`]:Object.assign(Object.assign({},"dark"===e?{borderBottom:0}:{}),{[`> ${n}-item, > ${n}-submenu`]:{top:h,marginTop:-h,marginBottom:0,borderRadius:0,"&::after":{position:"absolute",insetInline:g,bottom:0,borderBottom:`${c}px solid transparent`,transition:`border-color ${p} ${d}`,content:'""'},"&:hover, &-active, &-open":{"&::after":{borderBottomWidth:c,borderBottomColor:T}},"&-selected":{color:T,backgroundColor:I,"&::after":{borderBottomWidth:c,borderBottomColor:T}}}}),[`&${n}-root`]:{[`&${n}-inline, &${n}-vertical`]:{borderInlineEnd:`${h}px ${v} ${x}`}},[`&${n}-inline`]:{[`${n}-sub${n}-inline`]:{background:s},[`${n}-item, ${n}-submenu-title`]:h&&u?{width:`calc(100% + ${h}px)`}:{},[`${n}-item`]:{position:"relative","&::after":{position:"absolute",insetBlock:0,insetInlineEnd:0,borderInlineEnd:`${u}px solid ${i}`,transform:"scaleY(0.0001)",opacity:0,transition:[`transform ${m} ${f}`,`opacity ${m} ${f}`].join(","),content:'""'},[`&${n}-item-danger`]:{"&::after":{borderInlineEndColor:S}}},[`${n}-selected, ${n}-item-selected`]:{"&::after":{transform:"scaleY(1)",opacity:1,transition:[`transform ${m} ${d}`,`opacity ${m} ${d}`].join(",")}}}}}};const FP=t=>{const{componentCls:e,menuItemHeight:n,itemMarginInline:r,padding:i,menuArrowSize:o,marginXS:a,marginXXS:s}=t;return{[`${e}-item`]:{position:"relative","&:not(:last-child)":{marginBottom:a}},[`${e}-item, ${e}-submenu-title`]:{height:n,lineHeight:`${n}px`,paddingInline:i,overflow:"hidden",textOverflow:"ellipsis",marginInline:r,marginBlock:s,width:`calc(100% - ${2*r}px)`},[`${e}-submenu`]:{paddingBottom:.02},[`> ${e}-item,\n            > ${e}-submenu > ${e}-submenu-title`]:{height:n,lineHeight:`${n}px`},[`${e}-item-group-list ${e}-submenu-title,\n            ${e}-submenu-title`]:{paddingInlineEnd:i+o+a}}};var zP=t=>{const{componentCls:e,iconCls:n,menuItemHeight:r,colorTextLightSolid:i,dropdownWidth:o,controlHeightLG:a,motionDurationMid:s,motionEaseOut:l,paddingXL:c,fontSizeSM:u,fontSizeLG:h,motionDurationSlow:p,paddingXS:d,boxShadowSecondary:f}=t,g={height:r,lineHeight:`${r}px`,listStylePosition:"inside",listStyleType:"disc"};return[{[e]:{"&-inline, &-vertical":Object.assign({[`&${e}-root`]:{boxShadow:"none"}},FP(t))},[`${e}-submenu-popup`]:{[`${e}-vertical`]:Object.assign(Object.assign({},FP(t)),{boxShadow:f})}},{[`${e}-submenu-popup ${e}-vertical${e}-sub`]:{minWidth:o,maxHeight:`calc(100vh - ${2.5*a}px)`,padding:"0",overflow:"hidden",borderInlineEnd:0,"&:not([class*='-active'])":{overflowX:"hidden",overflowY:"auto"}}},{[`${e}-inline`]:{width:"100%",[`&${e}-root`]:{[`${e}-item, ${e}-submenu-title`]:{display:"flex",alignItems:"center",transition:[`border-color ${p}`,`background ${p}`,`padding ${s} ${l}`].join(","),[`> ${e}-title-content`]:{flex:"auto",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},"> *":{flex:"none"}}},[`${e}-sub${e}-inline`]:{padding:0,border:0,borderRadius:0,boxShadow:"none",[`& > ${e}-submenu > ${e}-submenu-title`]:g,[`& ${e}-item-group-title`]:{paddingInlineStart:c}},[`${e}-item`]:g}},{[`${e}-inline-collapsed`]:{width:2*r,[`&${e}-root`]:{[`${e}-item, ${e}-submenu ${e}-submenu-title`]:{[`> ${e}-inline-collapsed-noicon`]:{fontSize:h,textAlign:"center"}}},[`> ${e}-item,\n          > ${e}-item-group > ${e}-item-group-list > ${e}-item,\n          > ${e}-item-group > ${e}-item-group-list > ${e}-submenu > ${e}-submenu-title,\n          > ${e}-submenu > ${e}-submenu-title`]:{insetInlineStart:0,paddingInline:`calc(50% - ${u}px)`,textOverflow:"clip",[`\n            ${e}-submenu-arrow,\n            ${e}-submenu-expand-icon\n          `]:{opacity:0},[`${e}-item-icon, ${n}`]:{margin:0,fontSize:h,lineHeight:`${r}px`,"+ span":{display:"inline-block",opacity:0}}},[`${e}-item-icon, ${n}`]:{display:"inline-block"},"&-tooltip":{pointerEvents:"none",[`${e}-item-icon, ${n}`]:{display:"none"},"a, a:hover":{color:i}},[`${e}-item-group-title`]:Object.assign(Object.assign({},du),{paddingInline:d})}}]};const BP=t=>{const{componentCls:e,fontSize:n,motionDurationSlow:r,motionDurationMid:i,motionEaseInOut:o,motionEaseOut:a,iconCls:s,controlHeightSM:l}=t;return{[`${e}-item, ${e}-submenu-title`]:{position:"relative",display:"block",margin:0,whiteSpace:"nowrap",cursor:"pointer",transition:[`border-color ${r}`,`background ${r}`,`padding ${r} ${o}`].join(","),[`${e}-item-icon, ${s}`]:{minWidth:n,fontSize:n,transition:[`font-size ${i} ${a}`,`margin ${r} ${o}`,`color ${r}`].join(","),"+ span":{marginInlineStart:l-n,opacity:1,transition:[`opacity ${r} ${o}`,`margin ${r}`,`color ${r}`].join(",")}},[`${e}-item-icon`]:Object.assign({},{display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),[`&${e}-item-only-child`]:{[`> ${s}, > ${e}-item-icon`]:{marginInlineEnd:0}}},[`${e}-item-disabled, ${e}-submenu-disabled`]:{background:"none !important",cursor:"not-allowed","&::after":{borderColor:"transparent !important"},a:{color:"inherit !important"},[`> ${e}-submenu-title`]:{color:"inherit !important",cursor:"not-allowed"}}}},$P=t=>{const{componentCls:e,motionDurationSlow:n,motionEaseInOut:r,borderRadius:i,menuArrowSize:o,menuArrowOffset:a}=t;return{[`${e}-submenu`]:{"&-expand-icon, &-arrow":{position:"absolute",top:"50%",insetInlineEnd:t.margin,width:o,color:"currentcolor",transform:"translateY(-50%)",transition:`transform ${n} ${r}, opacity ${n}`},"&-arrow":{"&::before, &::after":{position:"absolute",width:.6*o,height:.15*o,backgroundColor:"currentcolor",borderRadius:i,transition:[`background ${n} ${r}`,`transform ${n} ${r}`,`top ${n} ${r}`,`color ${n} ${r}`].join(","),content:'""'},"&::before":{transform:`rotate(45deg) translateY(-${a})`},"&::after":{transform:`rotate(-45deg) translateY(${a})`}}}}},jP=t=>{const{antCls:e,componentCls:n,fontSize:r,motionDurationSlow:i,motionDurationMid:o,motionEaseInOut:a,lineHeight:s,paddingXS:l,padding:c,colorSplit:u,lineWidth:h,zIndexPopup:p,borderRadiusLG:d,radiusSubMenuItem:f,menuArrowSize:g,menuArrowOffset:m,lineType:y,menuPanelMaskInset:v}=t;return[{"":{[`${n}`]:Object.assign(Object.assign({},{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),{"&-hidden":{display:"none"}})},[`${n}-submenu-hidden`]:{display:"none"}},{[n]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},fu(t)),{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),{marginBottom:0,paddingInlineStart:0,fontSize:r,lineHeight:0,listStyle:"none",outline:"none",transition:`width ${i} cubic-bezier(0.2, 0, 0, 1) 0s`,"ul, ol":{margin:0,padding:0,listStyle:"none"},"&-overflow":{display:"flex",[`${n}-item`]:{flex:"none"}},[`${n}-item, ${n}-submenu, ${n}-submenu-title`]:{borderRadius:t.radiusItem},[`${n}-item-group-title`]:{padding:`${l}px ${c}px`,fontSize:r,lineHeight:s,transition:`all ${i}`},[`&-horizontal ${n}-submenu`]:{transition:[`border-color ${i} ${a}`,`background ${i} ${a}`].join(",")},[`${n}-submenu, ${n}-submenu-inline`]:{transition:[`border-color ${i} ${a}`,`background ${i} ${a}`,`padding ${o} ${a}`].join(",")},[`${n}-submenu ${n}-sub`]:{cursor:"initial",transition:[`background ${i} ${a}`,`padding ${i} ${a}`].join(",")},[`${n}-title-content`]:{transition:`color ${i}`},[`${n}-item a`]:{"&::before":{position:"absolute",inset:0,backgroundColor:"transparent",content:'""'}},[`${n}-item-divider`]:{overflow:"hidden",lineHeight:0,borderColor:u,borderStyle:y,borderWidth:0,borderTopWidth:h,marginBlock:h,padding:0,"&-dashed":{borderStyle:"dashed"}}}),BP(t)),{[`${n}-item-group`]:{[`${n}-item-group-list`]:{margin:0,padding:0,[`${n}-item, ${n}-submenu-title`]:{paddingInline:`${2*r}px ${c}px`}}},"&-submenu":{"&-popup":{position:"absolute",zIndex:p,background:"transparent",borderRadius:d,boxShadow:"none",transformOrigin:"0 0","&::before":{position:"absolute",inset:`${v}px 0 0`,zIndex:-1,width:"100%",height:"100%",opacity:0,content:'""'}},"&-placement-rightTop::before":{top:0,insetInlineStart:v},[`> ${n}`]:Object.assign(Object.assign(Object.assign({borderRadius:d},BP(t)),$P(t)),{[`${n}-item, ${n}-submenu > ${n}-submenu-title`]:{borderRadius:f},[`${n}-submenu-title::after`]:{transition:`transform ${i} ${a}`}})}}),$P(t)),{[`&-inline-collapsed ${n}-submenu-arrow,\n        &-inline ${n}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateX(${m})`},"&::after":{transform:`rotate(45deg) translateX(-${m})`}},[`${n}-submenu-open${n}-submenu-inline > ${n}-submenu-title > ${n}-submenu-arrow`]:{transform:`translateY(-${.2*g}px)`,"&::after":{transform:`rotate(-45deg) translateX(-${m})`},"&::before":{transform:`rotate(45deg) translateX(${m})`}}})},{[`${e}-layout-header`]:{[n]:{lineHeight:"inherit"}}}]};var UP=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const VP=m.createContext(null),HP=t=>{const{children:e}=t,n=UP(t,["children"]),r=m.useContext(VP),i=m.useMemo((()=>Object.assign(Object.assign({},r),n)),[r,n.prefixCls,n.mode,n.selectable]);return m.createElement(VP.Provider,{value:i},e)};var GP=VP,WP=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};var XP=t=>{const{prefixCls:e,className:n,dashed:r}=t,i=WP(t,["prefixCls","className","dashed"]),{getPrefixCls:o}=m.useContext(Gl),a=o("menu",e),s=ic()({[`${a}-item-divider-dashed`]:!!r},n);return m.createElement(MP,Object.assign({className:s},i))};const qP=m.createContext({});(()=>{let t=0})();var YP=(0,m.createContext)({prefixCls:"",firstLevel:!0,inlineCollapsed:!1});var ZP=t=>{var e;const{className:n,children:r,icon:i,title:o,danger:a}=t,{prefixCls:s,firstLevel:l,direction:c,disableMenuItemTitleTooltip:u,inlineCollapsed:h}=m.useContext(YP),{siderCollapsed:p}=m.useContext(qP);let d=o;"undefined"===typeof o?d=l?r:"":!1===o&&(d="");const f={title:d};p||h||(f.title=null,f.open=!1);const g=ra(r).length;let y=m.createElement(CT,Object.assign({},Gh(t,["title","icon","danger"]),{className:ic()({[`${s}-item-danger`]:a,[`${s}-item-only-child`]:1===(i?g+1:g)},n),title:"string"===typeof o?o:void 0}),Yh(i,{className:ic()(Xh(i)?null===(e=i.props)||void 0===e?void 0:e.className:"",`${s}-item-icon`)}),(t=>{const e=m.createElement("span",{className:`${s}-title-content`},r);return(!i||Xh(r)&&"span"===r.type)&&r&&t&&l&&"string"===typeof r?m.createElement("div",{className:`${s}-inline-collapsed-noicon`},r.charAt(0)):e})(h));return u||(y=m.createElement(Ky,Object.assign({},f,{placement:"rtl"===c?"left":"right",overlayClassName:`${s}-inline-collapsed-tooltip`}),y)),y};var KP=t=>{var e;const{popupClassName:n,icon:r,title:i,theme:o}=t,a=m.useContext(YP),{prefixCls:s,inlineCollapsed:l,theme:c,mode:u}=a,h=VM();let p;if(r){const t=Xh(i)&&"span"===i.type;p=m.createElement(m.Fragment,null,Yh(r,{className:ic()(Xh(r)?null===(e=r.props)||void 0===e?void 0:e.className:"",`${s}-item-icon`)}),t?i:m.createElement("span",{className:`${s}-title-content`},i))}else p=l&&!h.length&&i&&"string"===typeof i?m.createElement("div",{className:`${s}-inline-collapsed-noicon`},i.charAt(0)):m.createElement("span",{className:`${s}-title-content`},i);const d=m.useMemo((()=>Object.assign(Object.assign({},a),{firstLevel:!1})),[a]),f="horizontal"===u?[0,8]:[10,0];return m.createElement(YP.Provider,{value:d},m.createElement(xP,Object.assign({popupOffset:f},Gh(t,["icon"]),{title:p,popupClassName:ic()(s,n,`${s}-${o||c}`)})))},JP=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function QP(t){return(t||[]).map(((t,e)=>{if(t&&"object"===typeof t){const n=t,{label:r,children:i,key:o,type:a}=n,s=JP(n,["label","children","key","type"]),l=null!==o&&void 0!==o?o:`tmp-${e}`;return i||"group"===a?"group"===a?m.createElement(kP,Object.assign({key:l},s,{title:r}),QP(i)):m.createElement(KP,Object.assign({key:l},s,{title:r}),QP(i)):"divider"===a?m.createElement(XP,Object.assign({key:l},s)):m.createElement(ZP,Object.assign({key:l},s),r)}return null})).filter((t=>t))}function tO(t){return m.useMemo((()=>t?QP(t):t),[t])}var eO=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const nO=(0,m.forwardRef)(((t,e)=>{var n,r;const i=m.useContext(GP),o=i||{},{getPrefixCls:a,getPopupContainer:s,direction:l}=m.useContext(Gl),c=a(),{prefixCls:u,className:h,theme:p="light",expandIcon:d,_internalDisableMenuItemTitleTooltip:f,inlineCollapsed:g,siderCollapsed:y,items:v,children:x,rootClassName:_,mode:b,selectable:w,onClick:S}=t,C=Gh(eO(t,["prefixCls","className","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","items","children","rootClassName","mode","selectable","onClick"]),["collapsedWidth"]),E=tO(v)||x;null===(n=o.validator)||void 0===n||n.call(o,{mode:b});const k=Vm((function(){var t;null===S||void 0===S||S.apply(void 0,arguments),null===(t=o.onClick)||void 0===t||t.call(o)})),M=o.mode||b,T=null!==w&&void 0!==w?w:o.selectable,I=m.useMemo((()=>void 0!==y?y:g),[g,y]),P={horizontal:{motionName:`${c}-slide-up`},inline:gd(c),other:{motionName:`${c}-zoom-big`}},O=a("menu",u||o.prefixCls),[A,D]=((t,e)=>{const n=bh("Menu",((t,n)=>{let{overrideComponentToken:r}=n;if(!1===e)return[];const{colorBgElevated:i,colorPrimary:o,colorError:a,colorErrorHover:s,colorTextLightSolid:l,controlHeightLG:c,fontSize:u}=t,h=u/7*5,p=vh(t,{menuItemHeight:c,menuItemPaddingInline:t.margin,menuArrowSize:h,menuHorizontalHeight:1.15*c,menuArrowOffset:.25*h+"px",menuPanelMaskInset:-7,menuSubMenuBg:i}),d=new Ml(l).setAlpha(.65).toRgbString(),f=vh(p,{colorItemText:d,colorItemTextHover:l,colorGroupTitle:d,colorItemTextSelected:l,colorItemBg:"#001529",colorSubItemBg:"#000c17",colorItemBgActive:"transparent",colorItemBgSelected:o,colorActiveBarWidth:0,colorActiveBarHeight:0,colorActiveBarBorderSize:0,colorItemTextDisabled:new Ml(l).setAlpha(.25).toRgbString(),colorDangerItemText:a,colorDangerItemTextHover:s,colorDangerItemTextSelected:l,colorDangerItemBgActive:a,colorDangerItemBgSelected:a,menuSubMenuBg:"#001529",colorItemTextSelectedHorizontal:l,colorItemBgSelectedHorizontal:o},Object.assign({},r));return[jP(p),DP(p),zP(p),NP(p,"light"),NP(f,"dark"),RP(p),ug(p),ek(p,"slide-up"),ek(p,"slide-down"),Cf(p,"zoom-big")]}),(t=>{const{colorPrimary:e,colorError:n,colorTextDisabled:r,colorErrorBg:i,colorText:o,colorTextDescription:a,colorBgContainer:s,colorFillAlter:l,colorFillContent:c,lineWidth:u,lineWidthBold:h,controlItemBgActive:p,colorBgTextHover:d}=t;return{dropdownWidth:160,zIndexPopup:t.zIndexPopupBase+50,radiusItem:t.borderRadiusLG,radiusSubMenuItem:t.borderRadiusSM,colorItemText:o,colorItemTextHover:o,colorItemTextHoverHorizontal:e,colorGroupTitle:a,colorItemTextSelected:e,colorItemTextSelectedHorizontal:e,colorItemBg:s,colorItemBgHover:d,colorItemBgActive:c,colorSubItemBg:l,colorItemBgSelected:p,colorItemBgSelectedHorizontal:"transparent",colorActiveBarWidth:0,colorActiveBarHeight:h,colorActiveBarBorderSize:u,colorItemTextDisabled:r,colorDangerItemText:n,colorDangerItemTextHover:n,colorDangerItemTextSelected:n,colorDangerItemBgActive:i,colorDangerItemBgSelected:i,itemMarginInline:t.marginXXS}}));return n(t)})(O,!i),R=ic()(`${O}-${p}`,h);let L;if("function"===typeof d)L=d;else{const t=d||o.expandIcon;L=Yh(t,{className:ic()(`${O}-submenu-expand-icon`,null===(r=null===t||void 0===t?void 0:t.props)||void 0===r?void 0:r.className)})}const N=m.useMemo((()=>({prefixCls:O,inlineCollapsed:I||!1,direction:l,firstLevel:!0,theme:p,mode:M,disableMenuItemTitleTooltip:f})),[O,I,l,f,p]);return A(m.createElement(GP.Provider,{value:null},m.createElement(YP.Provider,{value:N},m.createElement(IP,Object.assign({getPopupContainer:s,overflowedIndicator:m.createElement(AP,null),overflowedIndicatorPopupClassName:ic()(O,`${O}-${p}`),mode:M,selectable:T,onClick:k},C,{inlineCollapsed:I,className:R,prefixCls:O,direction:l,defaultMotions:P,expandIcon:L,ref:e,rootClassName:ic()(_,D)}),E))))}));var rO=nO;const iO=(0,m.forwardRef)(((t,e)=>{const n=(0,m.useRef)(null),r=m.useContext(qP);return(0,m.useImperativeHandle)(e,(()=>({menu:n.current,focus:t=>{var e;null===(e=n.current)||void 0===e||e.focus(t)}}))),m.createElement(rO,Object.assign({ref:n},t,r))}));iO.Item=ZP,iO.SubMenu=KP,iO.Divider=XP,iO.ItemGroup=kP;var oO=iO;function aO(t){let{className:e,direction:n,index:r,marginDirection:i,children:o,split:a,wrap:s}=t;const{horizontalSize:l,verticalSize:c,latestIndex:u,supportFlexGap:h}=m.useContext(lO);let p={};return h||("vertical"===n?r<u&&(p={marginBottom:l/(a?2:1)}):p=Object.assign(Object.assign({},r<u&&{[i]:l/(a?2:1)}),s&&{paddingBottom:c})),null===o||void 0===o?null:m.createElement(m.Fragment,null,m.createElement("div",{className:e,style:p},o),r<u&&a&&m.createElement("span",{className:`${e}-split`,style:p},a))}var sO=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const lO=m.createContext({latestIndex:0,horizontalSize:0,verticalSize:0,supportFlexGap:!1}),cO={small:8,middle:16,large:24};const uO=m.forwardRef(((t,e)=>{const{getPrefixCls:n,space:r,direction:i}=m.useContext(Gl),{size:o=(null===r||void 0===r?void 0:r.size)||"small",align:a,className:s,rootClassName:l,children:c,direction:u="horizontal",prefixCls:h,split:p,style:d,wrap:f=!1}=t,g=sO(t,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap"]),y=Vg(),[v,x]=m.useMemo((()=>(Array.isArray(o)?o:[o,o]).map((t=>function(t){return"string"===typeof t?cO[t]:t||0}(t)))),[o]),_=ra(c,{keepEmpty:!0}),b=void 0===a&&"horizontal"===u?"center":a,w=n("space",h),[S,C]=op(w),E=ic()(w,C,`${w}-${u}`,{[`${w}-rtl`]:"rtl"===i,[`${w}-align-${b}`]:b},s,l),k=`${w}-item`,M="rtl"===i?"marginLeft":"marginRight";let T=0;const I=_.map(((t,e)=>{null!==t&&void 0!==t&&(T=e);const n=t&&t.key||`${k}-${e}`;return m.createElement(aO,{className:k,key:n,direction:u,index:e,marginDirection:M,split:p,wrap:f},t)})),P=m.useMemo((()=>({horizontalSize:v,verticalSize:x,latestIndex:T,supportFlexGap:y})),[v,x,T,y]);if(0===_.length)return null;const O={};return f&&(O.flexWrap="wrap",y||(O.marginBottom=-x)),y&&(O.columnGap=v,O.rowGap=x),S(m.createElement("div",Object.assign({ref:e,className:E,style:Object.assign(Object.assign({},O),d)},g),m.createElement(lO.Provider,{value:P},I)))}));const hO=uO;hO.Compact=hp;var pO=hO;var dO=t=>{const{componentCls:e,menuCls:n,colorError:r,colorTextLightSolid:i}=t,o=`${n}-item`;return{[`${e}, ${e}-menu-submenu`]:{[`${n} ${o}`]:{[`&${o}-danger:not(${o}-disabled)`]:{color:r,"&:hover":{color:i,backgroundColor:r}}}}}};const fO=t=>{const{componentCls:e,menuCls:n,zIndexPopup:r,dropdownArrowDistance:i,sizePopupArrow:o,antCls:a,iconCls:s,motionDurationMid:l,dropdownPaddingVertical:c,fontSize:u,dropdownEdgeChildPadding:h,colorTextDisabled:p,fontSizeIcon:d,controlPaddingHorizontal:f,colorBgElevated:g}=t;return[{[e]:Object.assign(Object.assign({},fu(t)),{position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:r,display:"block","&::before":{position:"absolute",insetBlock:o/2-i,zIndex:-9999,opacity:1e-4,content:'""'},[`&-trigger${a}-btn > ${s}-down`]:{fontSize:d,transform:"none"},[`${e}-wrap`]:{position:"relative",[`${a}-btn > ${s}-down`]:{fontSize:d},[`${s}-down::before`]:{transition:`transform ${l}`}},[`${e}-wrap-open`]:{[`${s}-down::before`]:{transform:"rotate(180deg)"}},"\n        &-hidden,\n        &-menu-hidden,\n        &-menu-submenu-hidden\n      ":{display:"none"},[`&${a}-slide-down-enter${a}-slide-down-enter-active${e}-placement-bottomLeft,\n          &${a}-slide-down-appear${a}-slide-down-appear-active${e}-placement-bottomLeft,\n          &${a}-slide-down-enter${a}-slide-down-enter-active${e}-placement-bottom,\n          &${a}-slide-down-appear${a}-slide-down-appear-active${e}-placement-bottom,\n          &${a}-slide-down-enter${a}-slide-down-enter-active${e}-placement-bottomRight,\n          &${a}-slide-down-appear${a}-slide-down-appear-active${e}-placement-bottomRight`]:{animationName:WE},[`&${a}-slide-up-enter${a}-slide-up-enter-active${e}-placement-topLeft,\n          &${a}-slide-up-appear${a}-slide-up-appear-active${e}-placement-topLeft,\n          &${a}-slide-up-enter${a}-slide-up-enter-active${e}-placement-top,\n          &${a}-slide-up-appear${a}-slide-up-appear-active${e}-placement-top,\n          &${a}-slide-up-enter${a}-slide-up-enter-active${e}-placement-topRight,\n          &${a}-slide-up-appear${a}-slide-up-appear-active${e}-placement-topRight`]:{animationName:qE},[`&${a}-slide-down-leave${a}-slide-down-leave-active${e}-placement-bottomLeft,\n          &${a}-slide-down-leave${a}-slide-down-leave-active${e}-placement-bottom,\n          &${a}-slide-down-leave${a}-slide-down-leave-active${e}-placement-bottomRight`]:{animationName:XE},[`&${a}-slide-up-leave${a}-slide-up-leave-active${e}-placement-topLeft,\n          &${a}-slide-up-leave${a}-slide-up-leave-active${e}-placement-top,\n          &${a}-slide-up-leave${a}-slide-up-leave-active${e}-placement-topRight`]:{animationName:YE}})},Iy(t,{colorBg:g,limitVerticalRadius:!0,arrowPlacement:{top:!0,bottom:!0}}),{[`${e} ${n}`]:{position:"relative",margin:0},[`${n}-submenu-popup`]:{position:"absolute",zIndex:r,background:"transparent",boxShadow:"none",transformOrigin:"0 0","ul, li":{listStyle:"none",margin:0}},[`${e}, ${e}-menu-submenu`]:{[n]:Object.assign(Object.assign({padding:h,listStyleType:"none",backgroundColor:g,backgroundClip:"padding-box",borderRadius:t.borderRadiusLG,outline:"none",boxShadow:t.boxShadowSecondary},vu(t)),{[`${n}-item-group-title`]:{padding:`${c}px ${f}px`,color:t.colorTextDescription,transition:`all ${l}`},[`${n}-item`]:{position:"relative",display:"flex",alignItems:"center"},[`${n}-item-icon`]:{minWidth:u,marginInlineEnd:t.marginXS,fontSize:t.fontSizeSM},[`${n}-title-content`]:{flex:"auto","> a":{color:"inherit",transition:`all ${l}`,"&:hover":{color:"inherit"},"&::after":{position:"absolute",inset:0,content:'""'}}},[`${n}-item, ${n}-submenu-title`]:Object.assign(Object.assign({clear:"both",margin:0,padding:`${c}px ${f}px`,color:t.colorText,fontWeight:"normal",fontSize:u,lineHeight:t.lineHeight,cursor:"pointer",transition:`all ${l}`,borderRadius:t.borderRadiusSM,"&:hover, &-active":{backgroundColor:t.controlItemBgHover}},vu(t)),{"&-selected":{color:t.colorPrimary,backgroundColor:t.controlItemBgActive,"&:hover, &-active":{backgroundColor:t.controlItemBgActiveHover}},"&-disabled":{color:p,cursor:"not-allowed","&:hover":{color:p,backgroundColor:g,cursor:"not-allowed"},a:{pointerEvents:"none"}},"&-divider":{height:1,margin:`${t.marginXXS}px 0`,overflow:"hidden",lineHeight:0,backgroundColor:t.colorSplit},[`${e}-menu-submenu-expand-icon`]:{position:"absolute",insetInlineEnd:t.paddingXS,[`${e}-menu-submenu-arrow-icon`]:{marginInlineEnd:"0 !important",color:t.colorTextDescription,fontSize:d,fontStyle:"normal"}}}),[`${n}-item-group-list`]:{margin:`0 ${t.marginXS}px`,padding:0,listStyle:"none"},[`${n}-submenu-title`]:{paddingInlineEnd:f+t.fontSizeSM},[`${n}-submenu-vertical`]:{position:"relative"},[`${n}-submenu${n}-submenu-disabled ${e}-menu-submenu-title`]:{[`&, ${e}-menu-submenu-arrow-icon`]:{color:p,backgroundColor:g,cursor:"not-allowed"}},[`${n}-submenu-selected ${e}-menu-submenu-title`]:{color:t.colorPrimary}})}},[ek(t,"slide-up"),ek(t,"slide-down"),ck(t,"move-up"),ck(t,"move-down"),Cf(t,"zoom-big")]]};var gO=bh("Dropdown",((t,e)=>{let{rootPrefixCls:n}=e;const{marginXXS:r,sizePopupArrow:i,controlHeight:o,fontSize:a,lineHeight:s,paddingXXS:l,componentCls:c,borderRadiusLG:u}=t,h=(o-a*s)/2,{dropdownArrowOffset:p}=My({contentRadius:u}),d=vh(t,{menuCls:`${c}-menu`,rootPrefixCls:n,dropdownArrowDistance:i/2+r,dropdownArrowOffset:p,dropdownPaddingVertical:h,dropdownEdgeChildPadding:l});return[fO(d),dO(d)]}),(t=>({zIndexPopup:t.zIndexPopupBase+50}))),mO=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const yO=t=>{const{getPopupContainer:e,getPrefixCls:n,direction:r}=m.useContext(Gl),{prefixCls:i,type:o="default",danger:a,disabled:s,loading:l,onClick:c,htmlType:u,children:h,className:p,menu:d,arrow:f,autoFocus:g,overlay:y,trigger:v,align:x,open:_,onOpenChange:b,placement:w,getPopupContainer:S,href:C,icon:E=m.createElement(AP,null),title:k,buttonsRender:M=(t=>t),mouseEnterDelay:T,mouseLeaveDelay:I,overlayClassName:P,overlayStyle:O,destroyPopupOnHide:A,dropdownRender:D}=t,R=mO(t,["prefixCls","type","danger","disabled","loading","onClick","htmlType","children","className","menu","arrow","autoFocus","overlay","trigger","align","open","onOpenChange","placement","getPopupContainer","href","icon","title","buttonsRender","mouseEnterDelay","mouseLeaveDelay","overlayClassName","overlayStyle","destroyPopupOnHide","dropdownRender"]),L=n("dropdown",i),N=`${L}-button`,[F,z]=gO(L),B={menu:d,arrow:f,autoFocus:g,align:x,disabled:s,trigger:s?[]:v,onOpenChange:b,getPopupContainer:S||e,mouseEnterDelay:T,mouseLeaveDelay:I,overlayClassName:P,overlayStyle:O,destroyPopupOnHide:A,dropdownRender:D},{compactSize:$,compactItemClassnames:j}=lp(L,r),U=ic()(N,j,p,z);"overlay"in t&&(B.overlay=y),"open"in t&&(B.open=_),B.placement="placement"in t?w:"rtl"===r?"bottomLeft":"bottomRight";const V=m.createElement(id,{type:o,danger:a,disabled:s,loading:l,onClick:c,htmlType:u,href:C,title:k},h),H=m.createElement(id,{type:o,danger:a,icon:E}),[G,W]=M([V,H]);return F(m.createElement(pO.Compact,Object.assign({className:U,size:$,block:!0},R),G,m.createElement(_O,Object.assign({},B),W)))};yO.__ANT_BUTTON=!0;const vO=t=>{const{menu:e,arrow:n,prefixCls:r,children:i,trigger:o,disabled:a,dropdownRender:s,getPopupContainer:l,overlayClassName:c,rootClassName:u,open:h,onOpenChange:p,visible:d,onVisibleChange:f,mouseEnterDelay:g=.15,mouseLeaveDelay:y=.1,autoAdjustOverflow:v=!0,placement:x="",overlay:_,transitionName:b}=t,{getPopupContainer:w,getPrefixCls:S,direction:C}=m.useContext(Gl);const E=m.useMemo((()=>{const t=S();return void 0!==b?b:x.includes("top")?`${t}-slide-down`:`${t}-slide-up`}),[S,x,b]),k=m.useMemo((()=>{if(!x)return"rtl"===C?"bottomRight":"bottomLeft";if(x.includes("Center")){return x.slice(0,x.indexOf("Center"))}return x}),[x,C]);const M=S("dropdown",r),[T,I]=gO(M),{token:P}=$y.useToken(),O=m.Children.only(i),A=Yh(O,{className:ic()(`${M}-trigger`,{[`${M}-rtl`]:"rtl"===C},O.props.className),disabled:a}),D=a?[]:o;let R;D&&D.includes("contextMenu")&&(R=!0);const[L,N]=Cy(!1,{value:null!==h&&void 0!==h?h:d}),F=Vm((t=>{null===p||void 0===p||p(t),null===f||void 0===f||f(t),N(t)})),z=ic()(c,u,I,{[`${M}-rtl`]:"rtl"===C}),B=Dy({arrowPointAtCenter:"object"===typeof n&&n.pointAtCenter,autoAdjustOverflow:v,offset:P.marginXXS,arrowWidth:n?P.sizePopupArrow:0,borderRadius:P.borderRadius}),$=m.useCallback((()=>{N(!1)}),[]);return T(m.createElement(AM,Object.assign({alignPoint:R},Gh(t,["rootClassName"]),{mouseEnterDelay:g,mouseLeaveDelay:y,visible:L,builtinPlacements:B,arrow:!!n,overlayClassName:z,prefixCls:M,getPopupContainer:l||w,transitionName:E,trigger:D,overlay:()=>{let t;return t=(null===e||void 0===e?void 0:e.items)?m.createElement(oO,Object.assign({},e)):"function"===typeof _?_():_,s&&(t=s(t)),t=m.Children.only("string"===typeof t?m.createElement("span",null,t):t),m.createElement(HP,{prefixCls:`${M}-menu`,expandIcon:m.createElement("span",{className:`${M}-menu-submenu-arrow`},m.createElement(QS,{className:`${M}-menu-submenu-arrow-icon`})),mode:"vertical",selectable:!1,onClick:$,validator:t=>{let{mode:e}=t}},m.createElement(cp,null,t))},placement:k,onVisibleChange:F}),A))};vO.Button=yO;const xO=GE(vO,"dropdown",(t=>t),(function(t){return Object.assign(Object.assign({},t),{align:{overflow:{adjustX:!1,adjustY:!1}}})}));vO._InternalPanelDoNotUseOrYouWillBeFired=t=>m.createElement(xO,Object.assign({},t),m.createElement("span",null));var _O=vO,bO=_O;const wO=m.createContext(null),SO=wO.Provider;var CO=wO;const EO=m.createContext(null),kO=EO.Provider,MO=new Uo("antRadioEffect",{"0%":{transform:"scale(1)",opacity:.5},"100%":{transform:"scale(1.6)",opacity:0}}),TO=t=>{const{componentCls:e,antCls:n}=t,r=`${e}-group`;return{[r]:Object.assign(Object.assign({},fu(t)),{display:"inline-block",fontSize:0,[`&${r}-rtl`]:{direction:"rtl"},[`${n}-badge ${n}-badge-count`]:{zIndex:1},[`> ${n}-badge:not(:first-child) > ${n}-button-wrapper`]:{borderInlineStart:"none"}})}},IO=t=>{const{componentCls:e,radioWrapperMarginRight:n,radioCheckedColor:r,radioSize:i,motionDurationSlow:o,motionDurationMid:a,motionEaseInOut:s,motionEaseInOutCirc:l,radioButtonBg:c,colorBorder:u,lineWidth:h,radioDotSize:p,colorBgContainerDisabled:d,colorTextDisabled:f,paddingXS:g,radioDotDisabledColor:m,lineType:y,radioDotDisabledSize:v,wireframe:x,colorWhite:_}=t,b=`${e}-inner`;return{[`${e}-wrapper`]:Object.assign(Object.assign({},fu(t)),{position:"relative",display:"inline-flex",alignItems:"baseline",marginInlineStart:0,marginInlineEnd:n,cursor:"pointer",[`&${e}-wrapper-rtl`]:{direction:"rtl"},"&-disabled":{cursor:"not-allowed",color:t.colorTextDisabled},"&::after":{display:"inline-block",width:0,overflow:"hidden",content:'"\\a0"'},[`${e}-checked::after`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:"100%",height:"100%",border:`${h}px ${y} ${r}`,borderRadius:"50%",visibility:"hidden",animationName:MO,animationDuration:o,animationTimingFunction:s,animationFillMode:"both",content:'""'},[e]:Object.assign(Object.assign({},fu(t)),{position:"relative",display:"inline-block",outline:"none",cursor:"pointer",alignSelf:"center"}),[`${e}-wrapper:hover &,\n        &:hover ${b}`]:{borderColor:r},[`${e}-input:focus-visible + ${b}`]:Object.assign({},yu(t)),[`${e}:hover::after, ${e}-wrapper:hover &::after`]:{visibility:"visible"},[`${e}-inner`]:{"&::after":{boxSizing:"border-box",position:"absolute",insetBlockStart:"50%",insetInlineStart:"50%",display:"block",width:i,height:i,marginBlockStart:i/-2,marginInlineStart:i/-2,backgroundColor:x?r:_,borderBlockStart:0,borderInlineStart:0,borderRadius:i,transform:"scale(0)",opacity:0,transition:`all ${o} ${l}`,content:'""'},boxSizing:"border-box",position:"relative",insetBlockStart:0,insetInlineStart:0,display:"block",width:i,height:i,backgroundColor:c,borderColor:u,borderStyle:"solid",borderWidth:h,borderRadius:"50%",transition:`all ${a}`},[`${e}-input`]:{position:"absolute",insetBlockStart:0,insetInlineEnd:0,insetBlockEnd:0,insetInlineStart:0,zIndex:1,cursor:"pointer",opacity:0},[`${e}-checked`]:{[b]:{borderColor:r,backgroundColor:x?c:r,"&::after":{transform:`scale(${p/i})`,opacity:1,transition:`all ${o} ${l}`}}},[`${e}-disabled`]:{cursor:"not-allowed",[b]:{backgroundColor:d,borderColor:u,cursor:"not-allowed","&::after":{backgroundColor:m}},[`${e}-input`]:{cursor:"not-allowed"},[`${e}-disabled + span`]:{color:f,cursor:"not-allowed"},[`&${e}-checked`]:{[b]:{"&::after":{transform:`scale(${v/i})`}}}},[`span${e} + *`]:{paddingInlineStart:g,paddingInlineEnd:g}})}},PO=t=>{const{radioButtonColor:e,controlHeight:n,componentCls:r,lineWidth:i,lineType:o,colorBorder:a,motionDurationSlow:s,motionDurationMid:l,radioButtonPaddingHorizontal:c,fontSize:u,radioButtonBg:h,fontSizeLG:p,controlHeightLG:d,controlHeightSM:f,paddingXS:g,borderRadius:m,borderRadiusSM:y,borderRadiusLG:v,radioCheckedColor:x,radioButtonCheckedBg:_,radioButtonHoverColor:b,radioButtonActiveColor:w,radioSolidCheckedColor:S,colorTextDisabled:C,colorBgContainerDisabled:E,radioDisabledButtonCheckedColor:k,radioDisabledButtonCheckedBg:M}=t;return{[`${r}-button-wrapper`]:{position:"relative",display:"inline-block",height:n,margin:0,paddingInline:c,paddingBlock:0,color:e,fontSize:u,lineHeight:n-2*i+"px",background:h,border:`${i}px ${o} ${a}`,borderBlockStartWidth:i+.02,borderInlineStartWidth:0,borderInlineEndWidth:i,cursor:"pointer",transition:[`color ${l}`,`background ${l}`,`border-color ${l}`,`box-shadow ${l}`].join(","),a:{color:e},[`> ${r}-button`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,zIndex:-1,width:"100%",height:"100%"},"&:not(:first-child)":{"&::before":{position:"absolute",insetBlockStart:-i,insetInlineStart:-i,display:"block",boxSizing:"content-box",width:1,height:"100%",paddingBlock:i,paddingInline:0,backgroundColor:a,transition:`background-color ${s}`,content:'""'}},"&:first-child":{borderInlineStart:`${i}px ${o} ${a}`,borderStartStartRadius:m,borderEndStartRadius:m},"&:last-child":{borderStartEndRadius:m,borderEndEndRadius:m},"&:first-child:last-child":{borderRadius:m},[`${r}-group-large &`]:{height:d,fontSize:p,lineHeight:d-2*i+"px","&:first-child":{borderStartStartRadius:v,borderEndStartRadius:v},"&:last-child":{borderStartEndRadius:v,borderEndEndRadius:v}},[`${r}-group-small &`]:{height:f,paddingInline:g-i,paddingBlock:0,lineHeight:f-2*i+"px","&:first-child":{borderStartStartRadius:y,borderEndStartRadius:y},"&:last-child":{borderStartEndRadius:y,borderEndEndRadius:y}},"&:hover":{position:"relative",color:x},"&:has(:focus-visible)":Object.assign({},yu(t)),[`${r}-inner, input[type='checkbox'], input[type='radio']`]:{width:0,height:0,opacity:0,pointerEvents:"none"},[`&-checked:not(${r}-button-wrapper-disabled)`]:{zIndex:1,color:x,background:_,borderColor:x,"&::before":{backgroundColor:x},"&:first-child":{borderColor:x},"&:hover":{color:b,borderColor:b,"&::before":{backgroundColor:b}},"&:active":{color:w,borderColor:w,"&::before":{backgroundColor:w}}},[`${r}-group-solid &-checked:not(${r}-button-wrapper-disabled)`]:{color:S,background:x,borderColor:x,"&:hover":{color:S,background:b,borderColor:b},"&:active":{color:S,background:w,borderColor:w}},"&-disabled":{color:C,backgroundColor:E,borderColor:a,cursor:"not-allowed","&:first-child, &:hover":{color:C,backgroundColor:E,borderColor:a}},[`&-disabled${r}-button-wrapper-checked`]:{color:k,backgroundColor:M,borderColor:a,boxShadow:"none"}}}};var OO=bh("Radio",(t=>{const{padding:e,lineWidth:n,controlItemBgActiveDisabled:r,colorTextDisabled:i,colorBgContainer:o,fontSizeLG:a,controlOutline:s,colorPrimaryHover:l,colorPrimaryActive:c,colorText:u,colorPrimary:h,marginXS:p,controlOutlineWidth:d,colorTextLightSolid:f,wireframe:g}=t,m=`0 0 0 ${d}px ${s}`,y=a-8,v=vh(t,{radioFocusShadow:m,radioButtonFocusShadow:m,radioSize:a,radioDotSize:g?y:a-2*(4+n),radioDotDisabledSize:y,radioCheckedColor:h,radioDotDisabledColor:i,radioSolidCheckedColor:f,radioButtonBg:o,radioButtonCheckedBg:o,radioButtonColor:u,radioButtonHoverColor:l,radioButtonActiveColor:c,radioButtonPaddingHorizontal:e-n,radioDisabledButtonCheckedBg:r,radioDisabledButtonCheckedColor:i,radioWrapperMarginRight:p});return[TO(v),IO(v),PO(v)]})),AO=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const DO=(t,e)=>{var n,r;const i=m.useContext(CO),o=m.useContext(EO),{getPrefixCls:a,direction:s}=m.useContext(Gl),l=lc(e,m.useRef(null)),{isFormItemInput:c}=m.useContext(tf),u=e=>{var n,r;null===(n=t.onChange)||void 0===n||n.call(t,e),null===(r=null===i||void 0===i?void 0:i.onChange)||void 0===r||r.call(i,e)},{prefixCls:h,className:p,rootClassName:d,children:f,style:g}=t,y=AO(t,["prefixCls","className","rootClassName","children","style"]),v=a("radio",h),x="button"===((null===i||void 0===i?void 0:i.optionType)||o)?`${v}-button`:v,[_,b]=OO(v),w=Object.assign({},y),S=m.useContext(Kl);i&&(w.name=i.name,w.onChange=u,w.checked=t.value===i.value,w.disabled=null!==(n=w.disabled)&&void 0!==n?n:i.disabled),w.disabled=null!==(r=w.disabled)&&void 0!==r?r:S;const C=ic()(`${x}-wrapper`,{[`${x}-wrapper-checked`]:w.checked,[`${x}-wrapper-disabled`]:w.disabled,[`${x}-wrapper-rtl`]:"rtl"===s,[`${x}-wrapper-in-form-item`]:c},p,d,b);return _(m.createElement("label",{className:C,style:g,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave},m.createElement(cM,Object.assign({},w,{type:"radio",prefixCls:x,ref:l})),void 0!==f?m.createElement("span",null,f):null))};var RO=m.forwardRef(DO);const LO=m.forwardRef(((t,e)=>{const{getPrefixCls:n,direction:r}=m.useContext(Gl),[i,o]=Cy(t.defaultValue,{value:t.value}),{prefixCls:a,className:s,rootClassName:l,options:c,buttonStyle:u="outline",disabled:h,children:p,size:d,style:f,id:g,onMouseEnter:y,onMouseLeave:v,onFocus:x,onBlur:_}=t,b=n("radio",a),w=`${b}-group`,[S,C]=OO(b);let E=p;c&&c.length>0&&(E=c.map((t=>"string"===typeof t||"number"===typeof t?m.createElement(RO,{key:t.toString(),prefixCls:b,disabled:h,value:t,checked:i===t},t):m.createElement(RO,{key:`radio-group-value-options-${t.value}`,prefixCls:b,disabled:t.disabled||h,value:t.value,checked:i===t.value,style:t.style},t.label))));const k=Jl(d),M=ic()(w,`${w}-${u}`,{[`${w}-${k}`]:k,[`${w}-rtl`]:"rtl"===r},s,l,C);return S(m.createElement("div",Object.assign({},function(t){return Object.keys(t).reduce(((e,n)=>(!n.startsWith("data-")&&!n.startsWith("aria-")&&"role"!==n||n.startsWith("data-__")||(e[n]=t[n]),e)),{})}(t),{className:M,style:f,onMouseEnter:y,onMouseLeave:v,onFocus:x,onBlur:_,id:g,ref:e}),m.createElement(SO,{value:{onChange:e=>{const n=i,r=e.target.value;"value"in t||o(r);const{onChange:a}=t;a&&r!==n&&a(e)},value:i,disabled:t.disabled,name:t.name,optionType:t.optionType}},E)))}));var NO=m.memo(LO),FO=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const zO=(t,e)=>{const{getPrefixCls:n}=m.useContext(Gl),{prefixCls:r}=t,i=FO(t,["prefixCls"]),o=n("radio",r);return m.createElement(kO,{value:"button"},m.createElement(RO,Object.assign({prefixCls:o},i,{type:"radio",ref:e})))};var BO=m.forwardRef(zO);const $O=RO;$O.Button=BO,$O.Group=NO,$O.__ANT_RADIO=!0;var jO=$O,UO=m.createContext(null),VO=function(t){for(var e=t.prefixCls,n=t.level,r=t.isStart,i=t.isEnd,o="".concat(e,"-indent-unit"),a=[],s=0;s<n;s+=1){var l;a.push(m.createElement("span",{key:s,className:ic()(o,(l={},Ir(l,"".concat(o,"-start"),r[s]),Ir(l,"".concat(o,"-end"),i[s]),l))}))}return m.createElement("span",{"aria-hidden":"true",className:"".concat(e,"-indent")},a)},HO=m.memo(VO),GO=["children"];function WO(t,e){return null!==t&&void 0!==t?t:e}function XO(t){var e=t||{},n=e.title||"title";return{title:n,_title:e._title||[n],key:e.key||"key",children:e.children||"children"}}function qO(t){return function t(e){return ra(e).map((function(e){if(!function(t){return t&&t.type&&t.type.isTreeNode}(e))return ni(!e,"Tree/TreeNode can only accept TreeNode as children."),null;var n=e.key,r=e.props,i=r.children,o=Or({key:n},Zo(r,GO)),a=t(i);return a.length&&(o.children=a),o})).filter((function(t){return t}))}(t)}function YO(t,e,n){var r=XO(n),i=r._title,o=r.key,a=r.children,s=new Set(!0===e?[]:e),l=[];return function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n.map((function(c,u){for(var h,p=lA(r?r.pos:"0",u),d=WO(c[o],p),f=0;f<i.length;f+=1){var g=i[f];if(void 0!==c[g]){h=c[g];break}}var m=Or(Or({},Gh(c,[].concat(Sr(i),[o,a]))),{},{title:h,key:d,parent:r,pos:p,children:null,data:c,isStart:[].concat(Sr(r?r.isStart:[]),[0===u]),isEnd:[].concat(Sr(r?r.isEnd:[]),[u===n.length-1])});return l.push(m),!0===e||s.has(d)?m.children=t(c[a]||[],m):m.children=[],m}))}(t),l}function ZO(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.initWrapper,r=e.processEntity,i=e.onProcessFinished,o=e.externalGetKey,a=e.childrenPropName,s=e.fieldNames,l=o||(arguments.length>2?arguments[2]:void 0),c={},u={},h={posEntities:c,keyEntities:u};return n&&(h=n(h)||h),function(t,e,n){var r,i=("object"===Cr(n)?n:{externalGetKey:n})||{},o=i.childrenPropName,a=i.externalGetKey,s=XO(i.fieldNames),l=s.key,c=s.children,u=o||c;a?"string"===typeof a?r=function(t){return t[a]}:"function"===typeof a&&(r=function(t){return a(t)}):r=function(t,e){return WO(t[l],e)},function n(i,o,a,s){var l=i?i[u]:t,c=i?lA(a.pos,o):"0",h=i?[].concat(Sr(s),[i]):[];if(i){var p=r(i,c),d={node:i,index:o,pos:c,key:p,parentPos:a.node?a.pos:null,level:a.level+1,nodes:h};e(d)}l&&l.forEach((function(t,e){n(t,e,{node:i,pos:c,level:a?a.level+1:-1},h)}))}(null)}(t,(function(t){var e=t.node,n=t.index,i=t.pos,o=t.key,a=t.parentPos,s=t.level,l={node:e,nodes:t.nodes,index:n,key:o,pos:i,level:s},p=WO(o,i);c[i]=l,u[p]=l,l.parent=c[a],l.parent&&(l.parent.children=l.parent.children||[],l.parent.children.push(l)),r&&r(l,h)}),{externalGetKey:l,childrenPropName:a,fieldNames:s}),i&&i(h),h}function KO(t,e){var n=e.expandedKeys,r=e.selectedKeys,i=e.loadedKeys,o=e.loadingKeys,a=e.checkedKeys,s=e.halfCheckedKeys,l=e.dragOverNodeKey,c=e.dropPosition,u=e.keyEntities[t];return{eventKey:t,expanded:-1!==n.indexOf(t),selected:-1!==r.indexOf(t),loaded:-1!==i.indexOf(t),loading:-1!==o.indexOf(t),checked:-1!==a.indexOf(t),halfChecked:-1!==s.indexOf(t),pos:String(u?u.pos:""),dragOver:l===t&&0===c,dragOverGapTop:l===t&&-1===c,dragOverGapBottom:l===t&&1===c}}function JO(t){var e=t.data,n=t.expanded,r=t.selected,i=t.checked,o=t.loaded,a=t.loading,s=t.halfChecked,l=t.dragOver,c=t.dragOverGapTop,u=t.dragOverGapBottom,h=t.pos,p=t.active,d=t.eventKey,f=Or(Or({},e),{},{expanded:n,selected:r,checked:i,loaded:o,loading:a,halfChecked:s,dragOver:l,dragOverGapTop:c,dragOverGapBottom:u,pos:h,active:p,key:d});return"props"in f||Object.defineProperty(f,"props",{get:function(){return ni(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),t}}),f}var QO=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove","selectable"],tA="open",eA="close",nA=function(t){Qo(n,t);var e=ea(n);function n(){var t;ii(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).state={dragNodeHighlight:!1},t.selectHandle=void 0,t.onSelectorClick=function(e){(0,t.props.context.onNodeClick)(e,JO(t.props)),t.isSelectable()?t.onSelect(e):t.onCheck(e)},t.onSelectorDoubleClick=function(e){(0,t.props.context.onNodeDoubleClick)(e,JO(t.props))},t.onSelect=function(e){if(!t.isDisabled()){var n=t.props.context.onNodeSelect;e.preventDefault(),n(e,JO(t.props))}},t.onCheck=function(e){if(!t.isDisabled()){var n=t.props,r=n.disableCheckbox,i=n.checked,o=t.props.context.onNodeCheck;if(t.isCheckable()&&!r){e.preventDefault();var a=!i;o(e,JO(t.props),a)}}},t.onMouseEnter=function(e){(0,t.props.context.onNodeMouseEnter)(e,JO(t.props))},t.onMouseLeave=function(e){(0,t.props.context.onNodeMouseLeave)(e,JO(t.props))},t.onContextMenu=function(e){(0,t.props.context.onNodeContextMenu)(e,JO(t.props))},t.onDragStart=function(e){var n=t.props.context.onNodeDragStart;e.stopPropagation(),t.setState({dragNodeHighlight:!0}),n(e,Ko(t));try{e.dataTransfer.setData("text/plain","")}catch(r){}},t.onDragEnter=function(e){var n=t.props.context.onNodeDragEnter;e.preventDefault(),e.stopPropagation(),n(e,Ko(t))},t.onDragOver=function(e){var n=t.props.context.onNodeDragOver;e.preventDefault(),e.stopPropagation(),n(e,Ko(t))},t.onDragLeave=function(e){var n=t.props.context.onNodeDragLeave;e.stopPropagation(),n(e,Ko(t))},t.onDragEnd=function(e){var n=t.props.context.onNodeDragEnd;e.stopPropagation(),t.setState({dragNodeHighlight:!1}),n(e,Ko(t))},t.onDrop=function(e){var n=t.props.context.onNodeDrop;e.preventDefault(),e.stopPropagation(),t.setState({dragNodeHighlight:!1}),n(e,Ko(t))},t.onExpand=function(e){var n=t.props,r=n.loading,i=n.context.onNodeExpand;r||i(e,JO(t.props))},t.setSelectHandle=function(e){t.selectHandle=e},t.getNodeState=function(){var e=t.props.expanded;return t.isLeaf()?null:e?tA:eA},t.hasChildren=function(){var e=t.props.eventKey;return!!((t.props.context.keyEntities[e]||{}).children||[]).length},t.isLeaf=function(){var e=t.props,n=e.isLeaf,r=e.loaded,i=t.props.context.loadData,o=t.hasChildren();return!1!==n&&(n||!i&&!o||i&&r&&!o)},t.isDisabled=function(){var e=t.props.disabled;return!(!t.props.context.disabled&&!e)},t.isCheckable=function(){var e=t.props.checkable,n=t.props.context.checkable;return!(!n||!1===e)&&n},t.syncLoadData=function(e){var n=e.expanded,r=e.loading,i=e.loaded,o=t.props.context,a=o.loadData,s=o.onNodeLoad;r||a&&n&&!t.isLeaf()&&(t.hasChildren()||i||s(JO(t.props)))},t.isDraggable=function(){var e=t.props,n=e.data,r=e.context.draggable;return!(!r||r.nodeDraggable&&!r.nodeDraggable(n))},t.renderDragHandler=function(){var e=t.props.context,n=e.draggable,r=e.prefixCls;return(null===n||void 0===n?void 0:n.icon)?m.createElement("span",{className:"".concat(r,"-draggable-icon")},n.icon):null},t.renderSwitcherIconDom=function(e){var n=t.props.switcherIcon,r=t.props.context.switcherIcon,i=n||r;return"function"===typeof i?i(Or(Or({},t.props),{},{isLeaf:e})):i},t.renderSwitcher=function(){var e=t.props.expanded,n=t.props.context.prefixCls;if(t.isLeaf()){var r=t.renderSwitcherIconDom(!0);return!1!==r?m.createElement("span",{className:ic()("".concat(n,"-switcher"),"".concat(n,"-switcher-noop"))},r):null}var i=ic()("".concat(n,"-switcher"),"".concat(n,"-switcher_").concat(e?tA:eA)),o=t.renderSwitcherIconDom(!1);return!1!==o?m.createElement("span",{onClick:t.onExpand,className:i},o):null},t.renderCheckbox=function(){var e=t.props,n=e.checked,r=e.halfChecked,i=e.disableCheckbox,o=t.props.context.prefixCls,a=t.isDisabled(),s=t.isCheckable();if(!s)return null;var l="boolean"!==typeof s?s:null;return m.createElement("span",{className:ic()("".concat(o,"-checkbox"),n&&"".concat(o,"-checkbox-checked"),!n&&r&&"".concat(o,"-checkbox-indeterminate"),(a||i)&&"".concat(o,"-checkbox-disabled")),onClick:t.onCheck},l)},t.renderIcon=function(){var e=t.props.loading,n=t.props.context.prefixCls;return m.createElement("span",{className:ic()("".concat(n,"-iconEle"),"".concat(n,"-icon__").concat(t.getNodeState()||"docu"),e&&"".concat(n,"-icon_loading"))})},t.renderSelector=function(){var e,n,r=t.state.dragNodeHighlight,i=t.props,o=i.title,a=void 0===o?"---":o,s=i.selected,l=i.icon,c=i.loading,u=i.data,h=t.props.context,p=h.prefixCls,d=h.showIcon,f=h.icon,g=h.loadData,y=h.titleRender,v=t.isDisabled(),x="".concat(p,"-node-content-wrapper");if(d){var _=l||f;e=_?m.createElement("span",{className:ic()("".concat(p,"-iconEle"),"".concat(p,"-icon__customize"))},"function"===typeof _?_(t.props):_):t.renderIcon()}else g&&c&&(e=t.renderIcon());n="function"===typeof a?a(u):y?y(u):a;var b=m.createElement("span",{className:"".concat(p,"-title")},n);return m.createElement("span",{ref:t.setSelectHandle,title:"string"===typeof a?a:"",className:ic()("".concat(x),"".concat(x,"-").concat(t.getNodeState()||"normal"),!v&&(s||r)&&"".concat(p,"-node-selected")),onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,onContextMenu:t.onContextMenu,onClick:t.onSelectorClick,onDoubleClick:t.onSelectorDoubleClick},e,b,t.renderDropIndicator())},t.renderDropIndicator=function(){var e=t.props,n=e.disabled,r=e.eventKey,i=t.props.context,o=i.draggable,a=i.dropLevelOffset,s=i.dropPosition,l=i.prefixCls,c=i.indent,u=i.dropIndicatorRender,h=i.dragOverNodeKey,p=i.direction;return!n&&!!o&&h===r?u({dropPosition:s,dropLevelOffset:a,indent:c,prefixCls:l,direction:p}):null},t}return ai(n,[{key:"componentDidMount",value:function(){this.syncLoadData(this.props)}},{key:"componentDidUpdate",value:function(){this.syncLoadData(this.props)}},{key:"isSelectable",value:function(){var t=this.props.selectable,e=this.props.context.selectable;return"boolean"===typeof t?t:e}},{key:"render",value:function(){var t,e=this.props,n=e.eventKey,r=e.className,i=e.style,o=e.dragOver,a=e.dragOverGapTop,s=e.dragOverGapBottom,l=e.isLeaf,c=e.isStart,u=e.isEnd,h=e.expanded,p=e.selected,d=e.checked,f=e.halfChecked,g=e.loading,y=e.domRef,v=e.active,x=(e.data,e.onMouseMove),_=e.selectable,b=Zo(e,QO),w=this.props.context,S=w.prefixCls,C=w.filterTreeNode,E=w.keyEntities,k=w.dropContainerKey,M=w.dropTargetKey,T=w.draggingNodeKey,I=this.isDisabled(),P=zd(b,{aria:!0,data:!0}),O=(E[n]||{}).level,A=u[u.length-1],D=this.isDraggable(),R=!I&&D,L=T===n,N=void 0!==_?{"aria-selected":!!_}:void 0;return m.createElement("div",Ui({ref:y,className:ic()(r,"".concat(S,"-treenode"),(t={},Ir(t,"".concat(S,"-treenode-disabled"),I),Ir(t,"".concat(S,"-treenode-switcher-").concat(h?"open":"close"),!l),Ir(t,"".concat(S,"-treenode-checkbox-checked"),d),Ir(t,"".concat(S,"-treenode-checkbox-indeterminate"),f),Ir(t,"".concat(S,"-treenode-selected"),p),Ir(t,"".concat(S,"-treenode-loading"),g),Ir(t,"".concat(S,"-treenode-active"),v),Ir(t,"".concat(S,"-treenode-leaf-last"),A),Ir(t,"".concat(S,"-treenode-draggable"),D),Ir(t,"dragging",L),Ir(t,"drop-target",M===n),Ir(t,"drop-container",k===n),Ir(t,"drag-over",!I&&o),Ir(t,"drag-over-gap-top",!I&&a),Ir(t,"drag-over-gap-bottom",!I&&s),Ir(t,"filter-node",C&&C(JO(this.props))),t)),style:i,draggable:R,"aria-grabbed":L,onDragStart:R?this.onDragStart:void 0,onDragEnter:D?this.onDragEnter:void 0,onDragOver:D?this.onDragOver:void 0,onDragLeave:D?this.onDragLeave:void 0,onDrop:D?this.onDrop:void 0,onDragEnd:D?this.onDragEnd:void 0,onMouseMove:x},N,P),m.createElement(HO,{prefixCls:S,level:O,isStart:c,isEnd:u}),this.renderDragHandler(),this.renderSwitcher(),this.renderCheckbox(),this.renderSelector())}}]),n}(m.Component),rA=function(t){return m.createElement(UO.Consumer,null,(function(e){return m.createElement(nA,Ui({},t,{context:e}))}))};rA.displayName="TreeNode",rA.isTreeNode=1;var iA=rA;function oA(t,e){if(!t)return[];var n=t.slice(),r=n.indexOf(e);return r>=0&&n.splice(r,1),n}function aA(t,e){var n=(t||[]).slice();return-1===n.indexOf(e)&&n.push(e),n}function sA(t){return t.split("-")}function lA(t,e){return"".concat(t,"-").concat(e)}function cA(t,e){var n=[];return function t(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(e){var r=e.key,i=e.children;n.push(r),t(i)}))}(e[t].children),n}function uA(t){if(t.parent){var e=sA(t.pos);return Number(e[e.length-1])===t.parent.children.length-1}return!1}function hA(t,e,n,r,i,o,a,s,l,c){var u,h=t.clientX,p=t.clientY,d=t.target.getBoundingClientRect(),f=d.top,g=d.height,m=(("rtl"===c?-1:1)*(((null===i||void 0===i?void 0:i.x)||0)-h)-12)/r,y=s[n.props.eventKey];if(p<f+g/2){var v=a.findIndex((function(t){return t.key===y.key})),x=a[v<=0?0:v-1].key;y=s[x]}var _=y.key,b=y,w=y.key,S=0,C=0;if(!l.includes(_))for(var E=0;E<m&&uA(y);E+=1)y=y.parent,C+=1;var k=e.props.data,M=y.node,T=!0;return function(t){var e=sA(t.pos);return 0===Number(e[e.length-1])}(y)&&0===y.level&&p<f+g/2&&o({dragNode:k,dropNode:M,dropPosition:-1})&&y.key===n.props.eventKey?S=-1:(b.children||[]).length&&l.includes(w)?o({dragNode:k,dropNode:M,dropPosition:0})?S=0:T=!1:0===C?m>-1.5?o({dragNode:k,dropNode:M,dropPosition:1})?S=1:T=!1:o({dragNode:k,dropNode:M,dropPosition:0})?S=0:o({dragNode:k,dropNode:M,dropPosition:1})?S=1:T=!1:o({dragNode:k,dropNode:M,dropPosition:1})?S=1:T=!1,{dropPosition:S,dropLevelOffset:C,dropTargetKey:y.key,dropTargetPos:y.pos,dragOverNodeKey:w,dropContainerKey:0===S?null:(null===(u=y.parent)||void 0===u?void 0:u.key)||null,dropAllowed:T}}function pA(t,e){if(t)return e.multiple?t.slice():t.length?[t[0]]:t}function dA(t){if(!t)return null;var e;if(Array.isArray(t))e={checkedKeys:t,halfCheckedKeys:void 0};else{if("object"!==Cr(t))return ni(!1,"`checkedKeys` is not an array or an object"),null;e={checkedKeys:t.checked||void 0,halfCheckedKeys:t.halfChecked||void 0}}return e}function fA(t,e){var n=new Set;function r(t){if(!n.has(t)){var i=e[t];if(i){n.add(t);var o=i.parent;i.node.disabled||o&&r(o.key)}}}return(t||[]).forEach((function(t){r(t)})),Sr(n)}function gA(t){if(null==t)throw new TypeError("Cannot destructure "+t)}var mA=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],yA=function(t,e){var n=t.className,r=t.style,i=t.motion,o=t.motionNodes,a=t.motionType,s=t.onMotionStart,l=t.onMotionEnd,c=t.active,u=t.treeNodeRequiredProps,h=Zo(t,mA),p=Ri(m.useState(!0),2),d=p[0],f=p[1],g=m.useContext(UO).prefixCls,y=m.useRef(!1),v=function(){y.current||l(),y.current=!0};return(0,m.useEffect)((function(){o&&"hide"===a&&d&&f(!1)}),[o]),(0,m.useEffect)((function(){return o&&s(),function(){o&&v()}}),[]),o?m.createElement(hu,Ui({ref:e,visible:d},i,{motionAppear:"show"===a,onAppearEnd:v,onLeaveEnd:v}),(function(t,e){var n=t.className,r=t.style;return m.createElement("div",{ref:e,className:ic()("".concat(g,"-treenode-motion"),n),style:r},o.map((function(t){var e=Ui({},(gA(t.data),t.data)),n=t.title,r=t.key,i=t.isStart,o=t.isEnd;delete e.children;var a=KO(r,u);return m.createElement(iA,Ui({},e,a,{title:n,active:c,data:t.data,key:r,isStart:i,isEnd:o}))})))})):m.createElement(iA,Ui({domRef:e,className:n,style:r},h,{active:c}))};yA.displayName="MotionTreeNode";var vA=m.forwardRef(yA);function xA(t,e,n){var r=t.findIndex((function(t){return t.key===n})),i=t[r+1],o=e.findIndex((function(t){return t.key===n}));if(i){var a=e.findIndex((function(t){return t.key===i.key}));return e.slice(o+1,a)}return e.slice(o+1)}var _A=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],bA={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},wA=function(){},SA="RC_TREE_MOTION_".concat(Math.random()),CA={key:SA},EA={key:SA,level:0,index:0,pos:"0",node:CA,nodes:[CA]},kA={parent:null,children:[],pos:EA.pos,data:CA,title:null,key:SA,isStart:[],isEnd:[]};function MA(t,e,n,r){return!1!==e&&n?t.slice(0,Math.ceil(n/r)+1):t}function TA(t){return WO(t.key,t.pos)}var IA=m.forwardRef((function(t,e){var n=t.prefixCls,r=t.data,i=(t.selectable,t.checkable,t.expandedKeys),o=t.selectedKeys,a=t.checkedKeys,s=t.loadedKeys,l=t.loadingKeys,c=t.halfCheckedKeys,u=t.keyEntities,h=t.disabled,p=t.dragging,d=t.dragOverNodeKey,f=t.dropPosition,g=t.motion,y=t.height,v=t.itemHeight,x=t.virtual,_=t.focusable,b=t.activeItem,w=t.focused,S=t.tabIndex,C=t.onKeyDown,E=t.onFocus,k=t.onBlur,M=t.onActiveChange,T=t.onListChangeStart,I=t.onListChangeEnd,P=Zo(t,_A),O=m.useRef(null),A=m.useRef(null);m.useImperativeHandle(e,(function(){return{scrollTo:function(t){O.current.scrollTo(t)},getIndentWidth:function(){return A.current.offsetWidth}}}));var D=Ri(m.useState(i),2),R=D[0],L=D[1],N=Ri(m.useState(r),2),F=N[0],z=N[1],B=Ri(m.useState(r),2),$=B[0],j=B[1],U=Ri(m.useState([]),2),V=U[0],H=U[1],G=Ri(m.useState(null),2),W=G[0],X=G[1],q=m.useRef(r);function Y(){var t=q.current;z(t),j(t),H([]),X(null),I()}q.current=r,m.useEffect((function(){L(i);var t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.length,r=e.length;if(1!==Math.abs(n-r))return{add:!1,key:null};function i(t,e){var n=new Map;t.forEach((function(t){n.set(t,!0)}));var r=e.filter((function(t){return!n.has(t)}));return 1===r.length?r[0]:null}return n<r?{add:!0,key:i(t,e)}:{add:!1,key:i(e,t)}}(R,i);if(null!==t.key)if(t.add){var e=F.findIndex((function(e){return e.key===t.key})),n=MA(xA(F,r,t.key),x,y,v),o=F.slice();o.splice(e+1,0,kA),j(o),H(n),X("show")}else{var a=r.findIndex((function(e){return e.key===t.key})),s=MA(xA(r,F,t.key),x,y,v),l=r.slice();l.splice(a+1,0,kA),j(l),H(s),X("hide")}else F!==r&&(z(r),j(r))}),[i,r]),m.useEffect((function(){p||Y()}),[p]);var Z=g?$:r,K={expandedKeys:i,selectedKeys:o,loadedKeys:s,loadingKeys:l,checkedKeys:a,halfCheckedKeys:c,dragOverNodeKey:d,dropPosition:f,keyEntities:u};return m.createElement(m.Fragment,null,w&&b&&m.createElement("span",{style:bA,"aria-live":"assertive"},function(t){for(var e=String(t.data.key),n=t;n.parent;)n=n.parent,e="".concat(n.data.key," > ").concat(e);return e}(b)),m.createElement("div",null,m.createElement("input",{style:bA,disabled:!1===_||h,tabIndex:!1!==_?S:null,onKeyDown:C,onFocus:E,onBlur:k,value:"",onChange:wA,"aria-label":"for screen reader"})),m.createElement("div",{className:"".concat(n,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0}},m.createElement("div",{className:"".concat(n,"-indent")},m.createElement("div",{ref:A,className:"".concat(n,"-indent-unit")}))),m.createElement(DE,Ui({},P,{data:Z,itemKey:TA,height:y,fullHeight:!1,virtual:x,itemHeight:v,prefixCls:"".concat(n,"-list"),ref:O,onVisibleChange:function(t,e){var n=new Set(t);e.filter((function(t){return!n.has(t)})).some((function(t){return TA(t)===SA}))&&Y()}}),(function(t){var e=t.pos,n=Ui({},(gA(t.data),t.data)),r=t.title,i=t.key,o=t.isStart,a=t.isEnd,s=WO(i,e);delete n.key,delete n.children;var l=KO(s,K);return m.createElement(vA,Ui({},n,l,{title:r,active:!!b&&i===b.key,pos:e,data:t.data,isStart:o,isEnd:a,motion:g,motionNodes:i===SA?V:null,motionType:W,onMotionStart:T,onMotionEnd:Y,treeNodeRequiredProps:K,onMouseMove:function(){M(null)}}))})))}));IA.displayName="NodeList";var PA=IA;function OA(t,e){var n=new Set;return t.forEach((function(t){e.has(t)||n.add(t)})),n}function AA(t){var e=t||{},n=e.disabled,r=e.disableCheckbox,i=e.checkable;return!(!n&&!r)||!1===i}function DA(t,e,n,r){var i,o=[];i=r||AA;var a,s=new Set(t.filter((function(t){var e=!!n[t];return e||o.push(t),e}))),l=new Map,c=0;return Object.keys(n).forEach((function(t){var e=n[t],r=e.level,i=l.get(r);i||(i=new Set,l.set(r,i)),i.add(e),c=Math.max(c,r)})),ni(!o.length,"Tree missing follow keys: ".concat(o.slice(0,100).map((function(t){return"'".concat(t,"'")})).join(", "))),a=!0===e?function(t,e,n,r){for(var i=new Set(t),o=new Set,a=0;a<=n;a+=1)(e.get(a)||new Set).forEach((function(t){var e=t.key,n=t.node,o=t.children,a=void 0===o?[]:o;i.has(e)&&!r(n)&&a.filter((function(t){return!r(t.node)})).forEach((function(t){i.add(t.key)}))}));for(var s=new Set,l=n;l>=0;l-=1)(e.get(l)||new Set).forEach((function(t){var e=t.parent,n=t.node;if(!r(n)&&t.parent&&!s.has(t.parent.key))if(r(t.parent.node))s.add(e.key);else{var a=!0,l=!1;(e.children||[]).filter((function(t){return!r(t.node)})).forEach((function(t){var e=t.key,n=i.has(e);a&&!n&&(a=!1),l||!n&&!o.has(e)||(l=!0)})),a&&i.add(e.key),l&&o.add(e.key),s.add(e.key)}}));return{checkedKeys:Array.from(i),halfCheckedKeys:Array.from(OA(o,i))}}(s,l,c,i):function(t,e,n,r,i){for(var o=new Set(t),a=new Set(e),s=0;s<=r;s+=1)(n.get(s)||new Set).forEach((function(t){var e=t.key,n=t.node,r=t.children,s=void 0===r?[]:r;o.has(e)||a.has(e)||i(n)||s.filter((function(t){return!i(t.node)})).forEach((function(t){o.delete(t.key)}))}));a=new Set;for(var l=new Set,c=r;c>=0;c-=1)(n.get(c)||new Set).forEach((function(t){var e=t.parent,n=t.node;if(!i(n)&&t.parent&&!l.has(t.parent.key))if(i(t.parent.node))l.add(e.key);else{var r=!0,s=!1;(e.children||[]).filter((function(t){return!i(t.node)})).forEach((function(t){var e=t.key,n=o.has(e);r&&!n&&(r=!1),s||!n&&!a.has(e)||(s=!0)})),r||o.delete(e.key),s&&a.add(e.key),l.add(e.key)}}));return{checkedKeys:Array.from(o),halfCheckedKeys:Array.from(OA(a,o))}}(s,e.halfCheckedKeys,l,c,i),a}var RA=function(t){Qo(n,t);var e=ea(n);function n(){var t;ii(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).destroyed=!1,t.delayedDragEnterLogic=void 0,t.loadingRetryTimes={},t.state={keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:XO()},t.dragStartMousePosition=null,t.dragNode=void 0,t.currentMouseOverDroppableNodeKey=null,t.listRef=m.createRef(),t.onNodeDragStart=function(e,n){var r=t.state,i=r.expandedKeys,o=r.keyEntities,a=t.props.onDragStart,s=n.props.eventKey;t.dragNode=n,t.dragStartMousePosition={x:e.clientX,y:e.clientY};var l=oA(i,s);t.setState({draggingNodeKey:s,dragChildrenKeys:cA(s,o),indent:t.listRef.current.getIndentWidth()}),t.setExpandedKeys(l),window.addEventListener("dragend",t.onWindowDragEnd),null===a||void 0===a||a({event:e,node:JO(n.props)})},t.onNodeDragEnter=function(e,n){var r=t.state,i=r.expandedKeys,o=r.keyEntities,a=r.dragChildrenKeys,s=r.flattenNodes,l=r.indent,c=t.props,u=c.onDragEnter,h=c.onExpand,p=c.allowDrop,d=c.direction,f=n.props,g=f.pos,m=f.eventKey,y=Ko(t).dragNode;if(t.currentMouseOverDroppableNodeKey!==m&&(t.currentMouseOverDroppableNodeKey=m),y){var v=hA(e,y,n,l,t.dragStartMousePosition,p,s,o,i,d),x=v.dropPosition,_=v.dropLevelOffset,b=v.dropTargetKey,w=v.dropContainerKey,S=v.dropTargetPos,C=v.dropAllowed,E=v.dragOverNodeKey;-1===a.indexOf(b)&&C?(t.delayedDragEnterLogic||(t.delayedDragEnterLogic={}),Object.keys(t.delayedDragEnterLogic).forEach((function(e){clearTimeout(t.delayedDragEnterLogic[e])})),y.props.eventKey!==n.props.eventKey&&(e.persist(),t.delayedDragEnterLogic[g]=window.setTimeout((function(){if(null!==t.state.draggingNodeKey){var r=Sr(i),a=o[n.props.eventKey];a&&(a.children||[]).length&&(r=aA(i,n.props.eventKey)),"expandedKeys"in t.props||t.setExpandedKeys(r),null===h||void 0===h||h(r,{node:JO(n.props),expanded:!0,nativeEvent:e.nativeEvent})}}),800)),y.props.eventKey!==b||0!==_?(t.setState({dragOverNodeKey:E,dropPosition:x,dropLevelOffset:_,dropTargetKey:b,dropContainerKey:w,dropTargetPos:S,dropAllowed:C}),null===u||void 0===u||u({event:e,node:JO(n.props),expandedKeys:i})):t.resetDragState()):t.resetDragState()}else t.resetDragState()},t.onNodeDragOver=function(e,n){var r=t.state,i=r.dragChildrenKeys,o=r.flattenNodes,a=r.keyEntities,s=r.expandedKeys,l=r.indent,c=t.props,u=c.onDragOver,h=c.allowDrop,p=c.direction,d=Ko(t).dragNode;if(d){var f=hA(e,d,n,l,t.dragStartMousePosition,h,o,a,s,p),g=f.dropPosition,m=f.dropLevelOffset,y=f.dropTargetKey,v=f.dropContainerKey,x=f.dropAllowed,_=f.dropTargetPos,b=f.dragOverNodeKey;-1===i.indexOf(y)&&x&&(d.props.eventKey===y&&0===m?null===t.state.dropPosition&&null===t.state.dropLevelOffset&&null===t.state.dropTargetKey&&null===t.state.dropContainerKey&&null===t.state.dropTargetPos&&!1===t.state.dropAllowed&&null===t.state.dragOverNodeKey||t.resetDragState():g===t.state.dropPosition&&m===t.state.dropLevelOffset&&y===t.state.dropTargetKey&&v===t.state.dropContainerKey&&_===t.state.dropTargetPos&&x===t.state.dropAllowed&&b===t.state.dragOverNodeKey||t.setState({dropPosition:g,dropLevelOffset:m,dropTargetKey:y,dropContainerKey:v,dropTargetPos:_,dropAllowed:x,dragOverNodeKey:b}),null===u||void 0===u||u({event:e,node:JO(n.props)}))}},t.onNodeDragLeave=function(e,n){t.currentMouseOverDroppableNodeKey!==n.props.eventKey||e.currentTarget.contains(e.relatedTarget)||(t.resetDragState(),t.currentMouseOverDroppableNodeKey=null);var r=t.props.onDragLeave;null===r||void 0===r||r({event:e,node:JO(n.props)})},t.onWindowDragEnd=function(e){t.onNodeDragEnd(e,null,!0),window.removeEventListener("dragend",t.onWindowDragEnd)},t.onNodeDragEnd=function(e,n){var r=t.props.onDragEnd;t.setState({dragOverNodeKey:null}),t.cleanDragState(),null===r||void 0===r||r({event:e,node:JO(n.props)}),t.dragNode=null,window.removeEventListener("dragend",t.onWindowDragEnd)},t.onNodeDrop=function(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=t.state,a=o.dragChildrenKeys,s=o.dropPosition,l=o.dropTargetKey,c=o.dropTargetPos;if(o.dropAllowed){var u=t.props.onDrop;if(t.setState({dragOverNodeKey:null}),t.cleanDragState(),null!==l){var h=Or(Or({},KO(l,t.getTreeNodeRequiredProps())),{},{active:(null===(r=t.getActiveItem())||void 0===r?void 0:r.key)===l,data:t.state.keyEntities[l].node}),p=-1!==a.indexOf(l);ni(!p,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var d=sA(c),f={event:e,node:JO(h),dragNode:t.dragNode?JO(t.dragNode.props):null,dragNodesKeys:[t.dragNode.props.eventKey].concat(a),dropToGap:0!==s,dropPosition:s+Number(d[d.length-1])};i||null===u||void 0===u||u(f),t.dragNode=null}}},t.cleanDragState=function(){null!==t.state.draggingNodeKey&&t.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),t.dragStartMousePosition=null,t.currentMouseOverDroppableNodeKey=null},t.triggerExpandActionExpand=function(e,n){var r=t.state,i=r.expandedKeys,o=r.flattenNodes,a=n.expanded,s=n.key;if(!(n.isLeaf||e.shiftKey||e.metaKey||e.ctrlKey)){var l=o.filter((function(t){return t.key===s}))[0],c=JO(Or(Or({},KO(s,t.getTreeNodeRequiredProps())),{},{data:l.data}));t.setExpandedKeys(a?oA(i,s):aA(i,s)),t.onNodeExpand(e,c)}},t.onNodeClick=function(e,n){var r=t.props,i=r.onClick;"click"===r.expandAction&&t.triggerExpandActionExpand(e,n),null===i||void 0===i||i(e,n)},t.onNodeDoubleClick=function(e,n){var r=t.props,i=r.onDoubleClick;"doubleClick"===r.expandAction&&t.triggerExpandActionExpand(e,n),null===i||void 0===i||i(e,n)},t.onNodeSelect=function(e,n){var r=t.state.selectedKeys,i=t.state,o=i.keyEntities,a=i.fieldNames,s=t.props,l=s.onSelect,c=s.multiple,u=n.selected,h=n[a.key],p=!u,d=(r=p?c?aA(r,h):[h]:oA(r,h)).map((function(t){var e=o[t];return e?e.node:null})).filter((function(t){return t}));t.setUncontrolledState({selectedKeys:r}),null===l||void 0===l||l(r,{event:"select",selected:p,node:n,selectedNodes:d,nativeEvent:e.nativeEvent})},t.onNodeCheck=function(e,n,r){var i,o=t.state,a=o.keyEntities,s=o.checkedKeys,l=o.halfCheckedKeys,c=t.props,u=c.checkStrictly,h=c.onCheck,p=n.key,d={event:"check",node:n,checked:r,nativeEvent:e.nativeEvent};if(u){var f=r?aA(s,p):oA(s,p);i={checked:f,halfChecked:oA(l,p)},d.checkedNodes=f.map((function(t){return a[t]})).filter((function(t){return t})).map((function(t){return t.node})),t.setUncontrolledState({checkedKeys:f})}else{var g=DA([].concat(Sr(s),[p]),!0,a),m=g.checkedKeys,y=g.halfCheckedKeys;if(!r){var v=new Set(m);v.delete(p);var x=DA(Array.from(v),{checked:!1,halfCheckedKeys:y},a);m=x.checkedKeys,y=x.halfCheckedKeys}i=m,d.checkedNodes=[],d.checkedNodesPositions=[],d.halfCheckedKeys=y,m.forEach((function(t){var e=a[t];if(e){var n=e.node,r=e.pos;d.checkedNodes.push(n),d.checkedNodesPositions.push({node:n,pos:r})}})),t.setUncontrolledState({checkedKeys:m},!1,{halfCheckedKeys:y})}null===h||void 0===h||h(i,d)},t.onNodeLoad=function(e){var n=e.key,r=new Promise((function(r,i){t.setState((function(o){var a=o.loadedKeys,s=void 0===a?[]:a,l=o.loadingKeys,c=void 0===l?[]:l,u=t.props,h=u.loadData,p=u.onLoad;return h&&-1===s.indexOf(n)&&-1===c.indexOf(n)?(h(e).then((function(){var i=aA(t.state.loadedKeys,n);null===p||void 0===p||p(i,{event:"load",node:e}),t.setUncontrolledState({loadedKeys:i}),t.setState((function(t){return{loadingKeys:oA(t.loadingKeys,n)}})),r()})).catch((function(e){if(t.setState((function(t){return{loadingKeys:oA(t.loadingKeys,n)}})),t.loadingRetryTimes[n]=(t.loadingRetryTimes[n]||0)+1,t.loadingRetryTimes[n]>=10){var o=t.state.loadedKeys;ni(!1,"Retry for `loadData` many times but still failed. No more retry."),t.setUncontrolledState({loadedKeys:aA(o,n)}),r()}i(e)})),{loadingKeys:aA(c,n)}):null}))}));return r.catch((function(){})),r},t.onNodeMouseEnter=function(e,n){var r=t.props.onMouseEnter;null===r||void 0===r||r({event:e,node:n})},t.onNodeMouseLeave=function(e,n){var r=t.props.onMouseLeave;null===r||void 0===r||r({event:e,node:n})},t.onNodeContextMenu=function(e,n){var r=t.props.onRightClick;r&&(e.preventDefault(),r({event:e,node:n}))},t.onFocus=function(){var e=t.props.onFocus;t.setState({focused:!0});for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];null===e||void 0===e||e.apply(void 0,r)},t.onBlur=function(){var e=t.props.onBlur;t.setState({focused:!1}),t.onActiveChange(null);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];null===e||void 0===e||e.apply(void 0,r)},t.getTreeNodeRequiredProps=function(){var e=t.state;return{expandedKeys:e.expandedKeys||[],selectedKeys:e.selectedKeys||[],loadedKeys:e.loadedKeys||[],loadingKeys:e.loadingKeys||[],checkedKeys:e.checkedKeys||[],halfCheckedKeys:e.halfCheckedKeys||[],dragOverNodeKey:e.dragOverNodeKey,dropPosition:e.dropPosition,keyEntities:e.keyEntities}},t.setExpandedKeys=function(e){var n=t.state,r=YO(n.treeData,e,n.fieldNames);t.setUncontrolledState({expandedKeys:e,flattenNodes:r},!0)},t.onNodeExpand=function(e,n){var r=t.state.expandedKeys,i=t.state,o=i.listChanging,a=i.fieldNames,s=t.props,l=s.onExpand,c=s.loadData,u=n.expanded,h=n[a.key];if(!o){var p=r.indexOf(h),d=!u;if(ni(u&&-1!==p||!u&&-1===p,"Expand state not sync with index check"),r=d?aA(r,h):oA(r,h),t.setExpandedKeys(r),null===l||void 0===l||l(r,{node:n,expanded:d,nativeEvent:e.nativeEvent}),d&&c){var f=t.onNodeLoad(n);f&&f.then((function(){var e=YO(t.state.treeData,r,a);t.setUncontrolledState({flattenNodes:e})})).catch((function(){var e=oA(t.state.expandedKeys,h);t.setExpandedKeys(e)}))}}},t.onListChangeStart=function(){t.setUncontrolledState({listChanging:!0})},t.onListChangeEnd=function(){setTimeout((function(){t.setUncontrolledState({listChanging:!1})}))},t.onActiveChange=function(e){var n=t.state.activeKey,r=t.props.onActiveChange;n!==e&&(t.setState({activeKey:e}),null!==e&&t.scrollTo({key:e}),null===r||void 0===r||r(e))},t.getActiveItem=function(){var e=t.state,n=e.activeKey,r=e.flattenNodes;return null===n?null:r.find((function(t){return t.key===n}))||null},t.offsetActiveKey=function(e){var n=t.state,r=n.flattenNodes,i=n.activeKey,o=r.findIndex((function(t){return t.key===i}));-1===o&&e<0&&(o=r.length);var a=r[o=(o+e+r.length)%r.length];if(a){var s=a.key;t.onActiveChange(s)}else t.onActiveChange(null)},t.onKeyDown=function(e){var n=t.state,r=n.activeKey,i=n.expandedKeys,o=n.checkedKeys,a=n.fieldNames,s=t.props,l=s.onKeyDown,c=s.checkable,u=s.selectable;switch(e.which){case sh.UP:t.offsetActiveKey(-1),e.preventDefault();break;case sh.DOWN:t.offsetActiveKey(1),e.preventDefault()}var h=t.getActiveItem();if(h&&h.data){var p=t.getTreeNodeRequiredProps(),d=!1===h.data.isLeaf||!!(h.data[a.children]||[]).length,f=JO(Or(Or({},KO(r,p)),{},{data:h.data,active:!0}));switch(e.which){case sh.LEFT:d&&i.includes(r)?t.onNodeExpand({},f):h.parent&&t.onActiveChange(h.parent.key),e.preventDefault();break;case sh.RIGHT:d&&!i.includes(r)?t.onNodeExpand({},f):h.children&&h.children.length&&t.onActiveChange(h.children[0].key),e.preventDefault();break;case sh.ENTER:case sh.SPACE:!c||f.disabled||!1===f.checkable||f.disableCheckbox?c||!u||f.disabled||!1===f.selectable||t.onNodeSelect({},f):t.onNodeCheck({},f,!o.includes(r))}}null===l||void 0===l||l(e)},t.setUncontrolledState=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t.destroyed){var i=!1,o=!0,a={};Object.keys(e).forEach((function(n){n in t.props?o=!1:(i=!0,a[n]=e[n])})),!i||n&&!o||t.setState(Or(Or({},a),r))}},t.scrollTo=function(e){t.listRef.current.scrollTo(e)},t}return ai(n,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var t=this.props.activeKey;void 0!==t&&t!==this.state.activeKey&&(this.setState({activeKey:t}),null!==t&&this.scrollTo({key:t}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var t,e,n=this.state,r=n.focused,i=n.flattenNodes,o=n.keyEntities,a=n.draggingNodeKey,s=n.activeKey,l=n.dropLevelOffset,c=n.dropContainerKey,u=n.dropTargetKey,h=n.dropPosition,p=n.dragOverNodeKey,d=n.indent,f=this.props,g=f.prefixCls,y=f.className,v=f.style,x=f.showLine,_=f.focusable,b=f.tabIndex,w=void 0===b?0:b,S=f.selectable,C=f.showIcon,E=f.icon,k=f.switcherIcon,M=f.draggable,T=f.checkable,I=f.checkStrictly,P=f.disabled,O=f.motion,A=f.loadData,D=f.filterTreeNode,R=f.height,L=f.itemHeight,N=f.virtual,F=f.titleRender,z=f.dropIndicatorRender,B=f.onContextMenu,$=f.onScroll,j=f.direction,U=f.rootClassName,V=f.rootStyle,H=zd(this.props,{aria:!0,data:!0});return M&&(e="object"===Cr(M)?M:"function"===typeof M?{nodeDraggable:M}:{}),m.createElement(UO.Provider,{value:{prefixCls:g,selectable:S,showIcon:C,icon:E,switcherIcon:k,draggable:e,draggingNodeKey:a,checkable:T,checkStrictly:I,disabled:P,keyEntities:o,dropLevelOffset:l,dropContainerKey:c,dropTargetKey:u,dropPosition:h,dragOverNodeKey:p,indent:d,direction:j,dropIndicatorRender:z,loadData:A,filterTreeNode:D,titleRender:F,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop}},m.createElement("div",{role:"tree",className:ic()(g,y,U,(t={},Ir(t,"".concat(g,"-show-line"),x),Ir(t,"".concat(g,"-focused"),r),Ir(t,"".concat(g,"-active-focused"),null!==s),t)),style:V},m.createElement(PA,Ui({ref:this.listRef,prefixCls:g,style:v,data:i,disabled:P,selectable:S,checkable:!!T,motion:O,dragging:null!==a,height:R,itemHeight:L,virtual:N,focusable:_,focused:r,tabIndex:w,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:B,onScroll:$},this.getTreeNodeRequiredProps(),H))))}}],[{key:"getDerivedStateFromProps",value:function(t,e){var n,r=e.prevProps,i={prevProps:t};function o(e){return!r&&e in t||r&&r[e]!==t[e]}var a=e.fieldNames;if(o("fieldNames")&&(a=XO(t.fieldNames),i.fieldNames=a),o("treeData")?n=t.treeData:o("children")&&(ni(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),n=qO(t.children)),n){i.treeData=n;var s=ZO(n,{fieldNames:a});i.keyEntities=Or(Ir({},SA,EA),s.keyEntities)}var l,c=i.keyEntities||e.keyEntities;if(o("expandedKeys")||r&&o("autoExpandParent"))i.expandedKeys=t.autoExpandParent||!r&&t.defaultExpandParent?fA(t.expandedKeys,c):t.expandedKeys;else if(!r&&t.defaultExpandAll){var u=Or({},c);delete u[SA],i.expandedKeys=Object.keys(u).map((function(t){return u[t].key}))}else!r&&t.defaultExpandedKeys&&(i.expandedKeys=t.autoExpandParent||t.defaultExpandParent?fA(t.defaultExpandedKeys,c):t.defaultExpandedKeys);if(i.expandedKeys||delete i.expandedKeys,n||i.expandedKeys){var h=YO(n||e.treeData,i.expandedKeys||e.expandedKeys,a);i.flattenNodes=h}if((t.selectable&&(o("selectedKeys")?i.selectedKeys=pA(t.selectedKeys,t):!r&&t.defaultSelectedKeys&&(i.selectedKeys=pA(t.defaultSelectedKeys,t))),t.checkable)&&(o("checkedKeys")?l=dA(t.checkedKeys)||{}:!r&&t.defaultCheckedKeys?l=dA(t.defaultCheckedKeys)||{}:n&&(l=dA(t.checkedKeys)||{checkedKeys:e.checkedKeys,halfCheckedKeys:e.halfCheckedKeys}),l)){var p=l,d=p.checkedKeys,f=void 0===d?[]:d,g=p.halfCheckedKeys,m=void 0===g?[]:g;if(!t.checkStrictly){var y=DA(f,!0,c);f=y.checkedKeys,m=y.halfCheckedKeys}i.checkedKeys=f,i.halfCheckedKeys=m}return o("loadedKeys")&&(i.loadedKeys=t.loadedKeys),i}}]),n}(m.Component);RA.defaultProps={prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:function(t){var e=t.dropPosition,n=t.dropLevelOffset,r=t.indent,i={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(e){case-1:i.top=0,i.left=-n*r;break;case 1:i.bottom=0,i.left=-n*r;break;case 0:i.bottom=0,i.left=r}return m.createElement("div",{style:i})},allowDrop:function(){return!0},expandAction:!1},RA.TreeNode=iA;var LA=RA,NA={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M300 276.5a56 56 0 1056-97 56 56 0 00-56 97zm0 284a56 56 0 1056-97 56 56 0 00-56 97zM640 228a56 56 0 10112 0 56 56 0 00-112 0zm0 284a56 56 0 10112 0 56 56 0 00-112 0zM300 844.5a56 56 0 1056-97 56 56 0 00-56 97zM640 796a56 56 0 10112 0 56 56 0 00-112 0z"}}]},name:"holder",theme:"outlined"},FA=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:NA}))};var zA=m.forwardRef(FA);const BA=new Uo("ant-tree-node-fx-do-not-use",{"0%":{opacity:0},"100%":{opacity:1}}),$A=(t,e)=>({[`.${t}-switcher-icon`]:{display:"inline-block",fontSize:10,verticalAlign:"baseline",svg:{transition:`transform ${e.motionDurationSlow}`}}}),jA=(t,e)=>({[`.${t}-drop-indicator`]:{position:"absolute",zIndex:1,height:2,backgroundColor:e.colorPrimary,borderRadius:1,pointerEvents:"none","&:after":{position:"absolute",top:-3,insetInlineStart:-6,width:8,height:8,backgroundColor:"transparent",border:`${e.lineWidthBold}px solid ${e.colorPrimary}`,borderRadius:"50%",content:'""'}}}),UA=(t,e)=>{const{treeCls:n,treeNodeCls:r,controlInteractiveSize:i,treeNodePadding:o,treeTitleHeight:a}=e,s=e.lineHeight*e.fontSize/2-i/2,l=(a-e.fontSizeLG)/2-s,c=e.paddingXS;return{[n]:Object.assign(Object.assign({},fu(e)),{background:e.colorBgContainer,borderRadius:e.borderRadius,transition:`background-color ${e.motionDurationSlow}`,[`&${n}-rtl`]:{[`${n}-switcher`]:{"&_close":{[`${n}-switcher-icon`]:{svg:{transform:"rotate(90deg)"}}}}},[`&-focused:not(:hover):not(${n}-active-focused)`]:Object.assign({},yu(e)),[`${n}-list-holder-inner`]:{alignItems:"flex-start"},[`&${n}-block-node`]:{[`${n}-list-holder-inner`]:{alignItems:"stretch",[`${n}-node-content-wrapper`]:{flex:"auto"},[`${r}.dragging`]:{position:"relative","&:after":{position:"absolute",top:0,insetInlineEnd:0,bottom:o,insetInlineStart:0,border:`1px solid ${e.colorPrimary}`,opacity:0,animationName:BA,animationDuration:e.motionDurationSlow,animationPlayState:"running",animationFillMode:"forwards",content:'""',pointerEvents:"none"}}}},[`${r}`]:{display:"flex",alignItems:"flex-start",padding:`0 0 ${o}px 0`,outline:"none","&-rtl":{direction:"rtl"},"&-disabled":{[`${n}-node-content-wrapper`]:{color:e.colorTextDisabled,cursor:"not-allowed","&:hover":{background:"transparent"}}},[`&-active ${n}-node-content-wrapper`]:Object.assign({},yu(e)),[`&:not(${r}-disabled).filter-node ${n}-title`]:{color:"inherit",fontWeight:500},"&-draggable":{[`${n}-draggable-icon`]:{flexShrink:0,width:a,lineHeight:`${a}px`,textAlign:"center",visibility:"visible",opacity:.2,transition:`opacity ${e.motionDurationSlow}`,[`${r}:hover &`]:{opacity:.45}},[`&${r}-disabled`]:{[`${n}-draggable-icon`]:{visibility:"hidden"}}}},[`${n}-indent`]:{alignSelf:"stretch",whiteSpace:"nowrap",userSelect:"none","&-unit":{display:"inline-block",width:a}},[`${n}-draggable-icon`]:{visibility:"hidden"},[`${n}-switcher`]:Object.assign(Object.assign({},$A(t,e)),{position:"relative",flex:"none",alignSelf:"stretch",width:a,margin:0,lineHeight:`${a}px`,textAlign:"center",cursor:"pointer",userSelect:"none","&-noop":{cursor:"default"},"&_close":{[`${n}-switcher-icon`]:{svg:{transform:"rotate(-90deg)"}}},"&-loading-icon":{color:e.colorPrimary},"&-leaf-line":{position:"relative",zIndex:1,display:"inline-block",width:"100%",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:a/2,bottom:-o,marginInlineStart:-1,borderInlineEnd:`1px solid ${e.colorBorder}`,content:'""'},"&:after":{position:"absolute",width:a/2*.8,height:a/2,borderBottom:`1px solid ${e.colorBorder}`,content:'""'}}}),[`${n}-checkbox`]:{top:"initial",marginInlineEnd:c,marginBlockStart:l},[`${n}-node-content-wrapper, ${n}-checkbox + span`]:{position:"relative",zIndex:"auto",minHeight:a,margin:0,padding:`0 ${e.paddingXS/2}px`,color:"inherit",lineHeight:`${a}px`,background:"transparent",borderRadius:e.borderRadius,cursor:"pointer",transition:`all ${e.motionDurationMid}, border 0s, line-height 0s, box-shadow 0s`,"&:hover":{backgroundColor:e.controlItemBgHover},[`&${n}-node-selected`]:{backgroundColor:e.controlItemBgActive},[`${n}-iconEle`]:{display:"inline-block",width:a,height:a,lineHeight:`${a}px`,textAlign:"center",verticalAlign:"top","&:empty":{display:"none"}}},[`${n}-unselectable ${n}-node-content-wrapper:hover`]:{backgroundColor:"transparent"},[`${n}-node-content-wrapper`]:Object.assign({lineHeight:`${a}px`,userSelect:"none"},jA(t,e)),[`${r}.drop-container`]:{"> [draggable]":{boxShadow:`0 0 0 2px ${e.colorPrimary}`}},"&-show-line":{[`${n}-indent`]:{"&-unit":{position:"relative",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:a/2,bottom:-o,borderInlineEnd:`1px solid ${e.colorBorder}`,content:'""'},"&-end":{"&:before":{display:"none"}}}},[`${n}-switcher`]:{background:"transparent","&-line-icon":{verticalAlign:"-0.15em"}}},[`${r}-leaf-last`]:{[`${n}-switcher`]:{"&-leaf-line":{"&:before":{top:"auto !important",bottom:"auto !important",height:a/2+"px !important"}}}}})}},VA=t=>{const{treeCls:e,treeNodeCls:n,treeNodePadding:r}=t;return{[`${e}${e}-directory`]:{[n]:{position:"relative","&:before":{position:"absolute",top:0,insetInlineEnd:0,bottom:r,insetInlineStart:0,transition:`background-color ${t.motionDurationMid}`,content:'""',pointerEvents:"none"},"&:hover":{"&:before":{background:t.controlItemBgHover}},"> *":{zIndex:1},[`${e}-switcher`]:{transition:`color ${t.motionDurationMid}`},[`${e}-node-content-wrapper`]:{borderRadius:0,userSelect:"none","&:hover":{background:"transparent"},[`&${e}-node-selected`]:{color:t.colorTextLightSolid,background:"transparent"}},"&-selected":{"\n            &:hover::before,\n            &::before\n          ":{background:t.colorPrimary},[`${e}-switcher`]:{color:t.colorTextLightSolid},[`${e}-node-content-wrapper`]:{color:t.colorTextLightSolid,background:"transparent"}}}}}},HA=(t,e)=>{const n=`.${t}`,r=vh(e,{treeCls:n,treeNodeCls:`${n}-treenode`,treeNodePadding:e.paddingXS/2,treeTitleHeight:e.controlHeightSM});return[UA(t,r),VA(r)]};var GA=bh("Tree",((t,e)=>{let{prefixCls:n}=e;return[{[t.componentCls]:pM(`${n}-checkbox`,t)},HA(n,t),ug(t)]}));function WA(t){const{dropPosition:e,dropLevelOffset:n,prefixCls:r,indent:i,direction:o="ltr"}=t,a="ltr"===o?"left":"right",s={[a]:-n*i+4,["ltr"===o?"right":"left"]:0};switch(e){case-1:s.top=-3;break;case 1:s.bottom=-3;break;default:s.bottom=-3,s[a]=i+4}return m.createElement("div",{style:s,className:`${r}-drop-indicator`})}var XA={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"},qA=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:XA}))};var YA=m.forwardRef(qA),ZA={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"},KA=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:ZA}))};var JA=m.forwardRef(KA),QA={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"},tD=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:QA}))};var eD=m.forwardRef(tD),nD={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"},rD=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:nD}))};var iD=m.forwardRef(rD);var oD=t=>{const{prefixCls:e,switcherIcon:n,treeNodeProps:r,showLine:i}=t,{isLeaf:o,expanded:a,loading:s}=r;if(s)return m.createElement(Xu,{className:`${e}-switcher-loading-icon`});let l;if(i&&"object"===typeof i&&(l=i.showLeafIcon),o){if(!i)return null;if("boolean"!==typeof l&&l){const t="function"===typeof l?l(r):l,n=`${e}-switcher-line-custom-icon`;return Xh(t)?Yh(t,{className:ic()(t.props.className||"",n)}):t}return l?m.createElement(JA,{className:`${e}-switcher-line-icon`}):m.createElement("span",{className:`${e}-switcher-leaf-line`})}const c=`${e}-switcher-icon`,u="function"===typeof n?n(r):n;return Xh(u)?Yh(u,{className:ic()(u.props.className||"",c)}):void 0!==u?u:i?a?m.createElement(eD,{className:`${e}-switcher-line-icon`}):m.createElement(iD,{className:`${e}-switcher-line-icon`}):m.createElement(YA,{className:c})};const aD=m.forwardRef(((t,e)=>{const{getPrefixCls:n,direction:r,virtual:i}=m.useContext(Gl),{prefixCls:o,className:a,showIcon:s=!1,showLine:l,switcherIcon:c,blockNode:u=!1,children:h,checkable:p=!1,selectable:d=!0,draggable:f,motion:g}=t,y=n("tree",o),v=n(),x=null!==g&&void 0!==g?g:Object.assign(Object.assign({},gd(v)),{motionAppear:!1}),_=Object.assign(Object.assign({},t),{checkable:p,selectable:d,showIcon:s,motion:x,blockNode:u,showLine:Boolean(l),dropIndicatorRender:WA}),[b,w]=GA(y),S=m.useMemo((()=>{if(!f)return!1;let t={};switch(typeof f){case"function":t.nodeDraggable=f;break;case"object":t=Object.assign({},f)}return!1!==t.icon&&(t.icon=t.icon||m.createElement(zA,null)),t}),[f]);return b(m.createElement(LA,Object.assign({itemHeight:20,ref:e,virtual:i},_,{prefixCls:y,className:ic()({[`${y}-icon-hide`]:!s,[`${y}-block-node`]:u,[`${y}-unselectable`]:!d,[`${y}-rtl`]:"rtl"===r},a,w),direction:r,checkable:p?m.createElement("span",{className:`${y}-checkbox-inner`}):p,selectable:d,switcherIcon:t=>m.createElement(oD,{prefixCls:y,switcherIcon:c,treeNodeProps:t,showLine:l}),draggable:S}),h))}));var sD=aD,lD={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"},cD=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:lD}))};var uD=m.forwardRef(cD),hD={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"},pD=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:hD}))};var dD,fD=m.forwardRef(pD);function gD(t,e){t.forEach((function(t){const{key:n,children:r}=t;!1!==e(n,t)&&gD(r||[],e)}))}function mD(t){let{treeData:e,expandedKeys:n,startKey:r,endKey:i}=t;const o=[];let a=dD.None;if(r&&r===i)return[r];if(!r||!i)return[];return gD(e,(t=>{if(a===dD.End)return!1;if(function(t){return t===r||t===i}(t)){if(o.push(t),a===dD.None)a=dD.Start;else if(a===dD.Start)return a=dD.End,!1}else a===dD.Start&&o.push(t);return n.includes(t)})),o}function yD(t,e){const n=Sr(e),r=[];return gD(t,((t,e)=>{const i=n.indexOf(t);return-1!==i&&(r.push(e),n.splice(i,1)),!!n.length})),r}!function(t){t[t.None=0]="None",t[t.Start=1]="Start",t[t.End=2]="End"}(dD||(dD={}));var vD=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function xD(t){const{isLeaf:e,expanded:n}=t;return e?m.createElement(JA,null):n?m.createElement(uD,null):m.createElement(fD,null)}function _D(t){let{treeData:e,children:n}=t;return e||qO(n)}const bD=(t,e)=>{var{defaultExpandAll:n,defaultExpandParent:r,defaultExpandedKeys:i}=t,o=vD(t,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]);const a=m.useRef(),s=m.useRef(),[l,c]=m.useState(o.selectedKeys||o.defaultSelectedKeys||[]),[u,h]=m.useState((()=>(()=>{const{keyEntities:t}=ZO(_D(o));let e;return e=n?Object.keys(t):r?fA(o.expandedKeys||i||[],t):o.expandedKeys||i,e})()));m.useEffect((()=>{"selectedKeys"in o&&c(o.selectedKeys)}),[o.selectedKeys]),m.useEffect((()=>{"expandedKeys"in o&&h(o.expandedKeys)}),[o.expandedKeys]);const{getPrefixCls:p,direction:d}=m.useContext(Gl),{prefixCls:f,className:g,showIcon:y=!0,expandAction:v="click"}=o,x=vD(o,["prefixCls","className","showIcon","expandAction"]),_=p("tree",f),b=ic()(`${_}-directory`,{[`${_}-directory-rtl`]:"rtl"===d},g);return m.createElement(sD,Object.assign({icon:xD,ref:e,blockNode:!0},x,{showIcon:y,expandAction:v,prefixCls:_,className:b,expandedKeys:u,selectedKeys:l,onSelect:(t,e)=>{var n;const{multiple:r}=o,{node:i,nativeEvent:l}=e,{key:h=""}=i,p=_D(o),d=Object.assign(Object.assign({},e),{selected:!0}),f=(null===l||void 0===l?void 0:l.ctrlKey)||(null===l||void 0===l?void 0:l.metaKey),g=null===l||void 0===l?void 0:l.shiftKey;let m;r&&f?(m=t,a.current=h,s.current=m,d.selectedNodes=yD(p,m)):r&&g?(m=Array.from(new Set([].concat(Sr(s.current||[]),Sr(mD({treeData:p,expandedKeys:u,startKey:h,endKey:a.current}))))),d.selectedNodes=yD(p,m)):(m=[h],a.current=h,s.current=m,d.selectedNodes=yD(p,m)),null===(n=o.onSelect)||void 0===n||n.call(o,m,d),"selectedKeys"in o||c(m)},onExpand:(t,e)=>{var n;return"expandedKeys"in o||h(t),null===(n=o.onExpand)||void 0===n?void 0:n.call(o,t,e)}}))};var wD=m.forwardRef(bD);const SD=sD;SD.DirectoryTree=wD,SD.TreeNode=iA;var CD=SD;var ED=function(t){let{value:e,onChange:n,filterSearch:r,tablePrefixCls:i,locale:o}=t;return r?m.createElement("div",{className:`${i}-filter-dropdown-search`},m.createElement(ob,{prefix:m.createElement(B_,null),placeholder:o.filterSearchPlaceholder,onChange:n,value:e,htmlSize:1,className:`${i}-filter-dropdown-search-input`})):null};const kD=t=>{const{keyCode:e}=t;e===sh.ENTER&&t.stopPropagation()};var MD=t=>m.createElement("div",{className:t.className,onClick:t=>t.stopPropagation(),onKeyDown:kD},t.children);function TD(t,e){return("string"===typeof e||"number"===typeof e)&&(null===e||void 0===e?void 0:e.toString().toLowerCase().includes(t.trim().toLowerCase()))}function ID(t){let{filters:e,prefixCls:n,filteredKeys:r,filterMultiple:i,searchValue:o,filterSearch:a}=t;return e.map(((t,e)=>{const s=String(t.value);if(t.children)return{key:s||e,label:t.text,popupClassName:`${n}-dropdown-submenu`,children:ID({filters:t.children,prefixCls:n,filteredKeys:r,filterMultiple:i,searchValue:o,filterSearch:a})};const l=i?SM:jO,c={key:void 0!==t.value?s:e,label:m.createElement(m.Fragment,null,m.createElement(l,{checked:r.includes(s)}),m.createElement("span",null,t.text))};return o.trim()?"function"===typeof a?a(o,t)?c:null:TD(o,t.text)?c:null:c}))}var PD=function(t){var e,n;const{tablePrefixCls:r,prefixCls:i,column:o,dropdownPrefixCls:a,columnKey:s,filterMultiple:l,filterMode:c="menu",filterSearch:u=!1,filterState:h,triggerFilter:p,locale:d,children:f,getPopupContainer:g}=t,{filterDropdownOpen:y,onFilterDropdownOpenChange:v,filterResetToDefaultFilteredValue:x,defaultFilteredValue:_,filterDropdownVisible:b,onFilterDropdownVisibleChange:w}=o,[S,C]=m.useState(!1),E=!(!h||!(null===(e=h.filteredKeys)||void 0===e?void 0:e.length)&&!h.forceFiltered),k=t=>{C(t),null===v||void 0===v||v(t),null===w||void 0===w||w(t)},M=null!==(n=null!==y&&void 0!==y?y:b)&&void 0!==n?n:S,T=null===h||void 0===h?void 0:h.filteredKeys,[I,P]=function(t){const e=m.useRef(t),n=Av();return[()=>e.current,t=>{e.current=t,n()}]}(T||[]),O=t=>{let{selectedKeys:e}=t;P(e)},A=(t,e)=>{let{node:n,checked:r}=e;O(l?{selectedKeys:t}:{selectedKeys:r&&n.key?[n.key]:[]})};m.useEffect((()=>{S&&O({selectedKeys:T||[]})}),[T]);const[D,R]=m.useState([]),L=t=>{R(t)},[N,F]=m.useState(""),z=t=>{const{value:e}=t.target;F(e)};m.useEffect((()=>{S||F("")}),[S]);const B=t=>{const e=t&&t.length?t:null;return null!==e||h&&h.filteredKeys?ri(e,null===h||void 0===h?void 0:h.filteredKeys,!0)?null:void p({column:o,key:s,filteredKeys:e}):null},$=()=>{k(!1),B(I())},j=function(){let{confirm:t,closeDropdown:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{confirm:!1,closeDropdown:!1};t&&B([]),e&&k(!1),F(""),P(x?(_||[]).map((t=>String(t))):[])},U=function(){let{closeDropdown:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{closeDropdown:!0};t&&k(!1),B(I())},V=ic()({[`${a}-menu-without-submenu`]:(H=o.filters||[],!H.some((t=>{let{children:e}=t;return e})))});var H;const G=t=>{if(t.target.checked){const t=DD(null===o||void 0===o?void 0:o.filters).map((t=>String(t)));P(t)}else P([])},W=t=>{let{filters:e}=t;return(e||[]).map(((t,e)=>{const n=String(t.value),r={title:t.text,key:void 0!==t.value?n:e};return t.children&&(r.children=W({filters:t.children})),r}))},X=t=>{var e;return Object.assign(Object.assign({},t),{text:t.title,value:t.key,children:(null===(e=t.children)||void 0===e?void 0:e.map((t=>X(t))))||[]})};let q,Y;if("function"===typeof o.filterDropdown)q=o.filterDropdown({prefixCls:`${a}-custom`,setSelectedKeys:t=>O({selectedKeys:t}),selectedKeys:I(),confirm:U,clearFilters:j,filters:o.filters,visible:M,close:()=>{k(!1)}});else if(o.filterDropdown)q=o.filterDropdown;else{const t=I()||[],e=()=>0===(o.filters||[]).length?m.createElement(BS,{image:BS.PRESENTED_IMAGE_SIMPLE,description:d.filterEmptyText,imageStyle:{height:24},style:{margin:0,padding:"16px 0"}}):"tree"===c?m.createElement(m.Fragment,null,m.createElement(ED,{filterSearch:u,value:N,onChange:z,tablePrefixCls:r,locale:d}),m.createElement("div",{className:`${r}-filter-dropdown-tree`},l?m.createElement(SM,{checked:t.length===DD(o.filters).length,indeterminate:t.length>0&&t.length<DD(o.filters).length,className:`${r}-filter-dropdown-checkall`,onChange:G},d.filterCheckall):null,m.createElement(CD,{checkable:!0,selectable:!1,blockNode:!0,multiple:l,checkStrictly:!l,className:`${a}-menu`,onCheck:A,checkedKeys:t,selectedKeys:t,showIcon:!1,treeData:W({filters:o.filters}),autoExpandParent:!0,defaultExpandAll:!0,filterTreeNode:N.trim()?t=>"function"===typeof u?u(N,X(t)):TD(N,t.title):void 0}))):m.createElement(m.Fragment,null,m.createElement(ED,{filterSearch:u,value:N,onChange:z,tablePrefixCls:r,locale:d}),m.createElement(oO,{selectable:!0,multiple:l,prefixCls:`${a}-menu`,className:V,onSelect:O,onDeselect:O,selectedKeys:t,getPopupContainer:g,openKeys:D,onOpenChange:L,items:ID({filters:o.filters||[],filterSearch:u,prefixCls:i,filteredKeys:I(),filterMultiple:l,searchValue:N})})),n=()=>x?ri((_||[]).map((t=>String(t))),t,!0):0===t.length;q=m.createElement(m.Fragment,null,e(),m.createElement("div",{className:`${i}-dropdown-btns`},m.createElement(id,{type:"link",size:"small",disabled:n(),onClick:()=>j()},d.filterReset),m.createElement(id,{type:"primary",size:"small",onClick:$},d.filterConfirm)))}o.filterDropdown&&(q=m.createElement(HP,{selectable:void 0},q)),Y="function"===typeof o.filterIcon?o.filterIcon(E):o.filterIcon?o.filterIcon:m.createElement(aM,null);const{direction:Z}=m.useContext(Gl);return m.createElement("div",{className:`${i}-column`},m.createElement("span",{className:`${r}-column-title`},f),m.createElement(bO,{dropdownRender:()=>m.createElement(MD,{className:`${i}-dropdown`},q),trigger:["click"],open:M,onOpenChange:t=>{t&&void 0!==T&&P(T||[]),k(t),t||o.filterDropdown||$()},getPopupContainer:g,placement:"rtl"===Z?"bottomLeft":"bottomRight"},m.createElement("span",{role:"button",tabIndex:-1,className:ic()(`${i}-trigger`,{active:E}),onClick:t=>{t.stopPropagation()}},Y)))};function OD(t,e,n){let r=[];return(t||[]).forEach(((t,i)=>{var o;const a=nM(i,n);if(t.filters||"filterDropdown"in t||"onFilter"in t)if("filteredValue"in t){let e=t.filteredValue;"filterDropdown"in t||(e=null!==(o=null===e||void 0===e?void 0:e.map(String))&&void 0!==o?o:e),r.push({column:t,key:eM(t,a),filteredKeys:e,forceFiltered:t.filtered})}else r.push({column:t,key:eM(t,a),filteredKeys:e&&t.defaultFilteredValue?t.defaultFilteredValue:void 0,forceFiltered:t.filtered});"children"in t&&(r=[].concat(Sr(r),Sr(OD(t.children,e,a))))})),r}function AD(t,e,n,r,i,o,a,s){return n.map(((n,l)=>{const c=nM(l,s),{filterMultiple:u=!0,filterMode:h,filterSearch:p}=n;let d=n;if(d.filters||d.filterDropdown){const s=eM(d,c),l=r.find((t=>{let{key:e}=t;return s===e}));d=Object.assign(Object.assign({},d),{title:r=>m.createElement(PD,{tablePrefixCls:t,prefixCls:`${t}-filter`,dropdownPrefixCls:e,column:d,columnKey:s,filterState:l,filterMultiple:u,filterMode:h,filterSearch:p,triggerFilter:o,locale:i,getPopupContainer:a},rM(n.title,r))})}return"children"in d&&(d=Object.assign(Object.assign({},d),{children:AD(t,e,d.children,r,i,o,a,c)})),d}))}function DD(t){let e=[];return(t||[]).forEach((t=>{let{value:n,children:r}=t;e.push(n),r&&(e=[].concat(Sr(e),Sr(DD(r))))})),e}function RD(t){const e={};return t.forEach((t=>{let{key:n,filteredKeys:r,column:i}=t;const{filters:o,filterDropdown:a}=i;if(a)e[n]=r||null;else if(Array.isArray(r)){const t=DD(o);e[n]=t.filter((t=>r.includes(String(t))))}else e[n]=null})),e}function LD(t,e){return e.reduce(((t,e)=>{const{column:{onFilter:n,filters:r},filteredKeys:i}=e;return n&&i&&i.length?t.filter((t=>i.some((e=>{const i=DD(r),o=i.findIndex((t=>String(t)===String(e))),a=-1!==o?i[o]:e;return n(a,t)})))):t}),t)}const ND=t=>t.flatMap((t=>"children"in t?[t].concat(Sr(ND(t.children||[]))):[t]));var FD=function(t){let{prefixCls:e,dropdownPrefixCls:n,mergedColumns:r,onFilterChange:i,getPopupContainer:o,locale:a}=t;const s=m.useMemo((()=>ND(r||[])),[r]),[l,c]=m.useState((()=>OD(s,!0))),u=m.useMemo((()=>{const t=OD(s,!1);if(0===t.length)return t;let e=!0,n=!0;if(t.forEach((t=>{let{filteredKeys:r}=t;void 0!==r?e=!1:n=!1})),e){const t=(s||[]).map(((t,e)=>eM(t,nM(e))));return l.filter((e=>{let{key:n}=e;return t.includes(n)})).map((e=>{const n=s[t.findIndex((t=>t===e.key))];return Object.assign(Object.assign({},e),{column:Object.assign(Object.assign({},e.column),n),forceFiltered:n.filtered})}))}return t}),[s,l]),h=m.useMemo((()=>RD(u)),[u]),p=t=>{const e=u.filter((e=>{let{key:n}=e;return n!==t.key}));e.push(t),c(e),i(RD(e),e)};return[t=>AD(e,n,t,u,a,p,o),u,h]};var zD=function(){const t=Object.assign({},arguments.length<=0?void 0:arguments[0]);for(let e=1;e<arguments.length;e++){const n=e<0||arguments.length<=e?void 0:arguments[e];n&&Object.keys(n).forEach((e=>{const r=n[e];void 0!==r&&(t[e]=r)}))}return t},BD=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const $D=10;var jD=function(t,e,n){const r=n&&"object"===typeof n?n:{},{total:i=0}=r,o=BD(r,["total"]),[a,s]=(0,m.useState)((()=>({current:"defaultCurrent"in o?o.defaultCurrent:1,pageSize:"defaultPageSize"in o?o.defaultPageSize:$D}))),l=zD(a,o,{total:i>0?i:t}),c=Math.ceil((i||t)/l.pageSize);l.current>c&&(l.current=c||1);const u=(t,e)=>{s({current:null!==t&&void 0!==t?t:1,pageSize:e||l.pageSize})};return!1===n?[{},()=>{}]:[Object.assign(Object.assign({},l),{onChange:(t,r)=>{var i;n&&(null===(i=n.onChange)||void 0===i||i.call(n,t,r)),u(t,r),e(t,r||(null===l||void 0===l?void 0:l.pageSize))}}),u]};const UD={},VD="SELECT_ALL",HD="SELECT_INVERT",GD="SELECT_NONE",WD=[],XD=(t,e)=>{let n=[];return(e||[]).forEach((e=>{n.push(e),e&&"object"===typeof e&&t in e&&(n=[].concat(Sr(n),Sr(XD(t,e[t]))))})),n};var qD=(t,e)=>{const{preserveSelectedRowKeys:n,selectedRowKeys:r,defaultSelectedRowKeys:i,getCheckboxProps:o,onChange:a,onSelect:s,onSelectAll:l,onSelectInvert:c,onSelectNone:u,onSelectMultiple:h,columnWidth:p,type:d,selections:f,fixed:g,renderCell:y,hideSelectAll:v,checkStrictly:x=!0}=e||{},{prefixCls:_,data:b,pageData:w,getRecordByKey:S,getRowKey:C,expandType:E,childrenColumnName:k,locale:M,getPopupContainer:T}=t,[I,P]=Cy(r||i||WD,{value:r}),O=m.useRef(new Map),A=(0,m.useCallback)((t=>{if(n){const e=new Map;t.forEach((t=>{let n=S(t);!n&&O.current.has(t)&&(n=O.current.get(t)),e.set(t,n)})),O.current=e}}),[S,n]);m.useEffect((()=>{A(I)}),[I]);const{keyEntities:D}=(0,m.useMemo)((()=>x?{keyEntities:null}:ZO(b,{externalGetKey:C,childrenPropName:k})),[b,C,x,k]),R=(0,m.useMemo)((()=>XD(k,w)),[k,w]),L=(0,m.useMemo)((()=>{const t=new Map;return R.forEach(((e,n)=>{const r=C(e,n),i=(o?o(e):null)||{};t.set(r,i)})),t}),[R,C,o]),N=(0,m.useCallback)((t=>{var e;return!!(null===(e=L.get(C(t)))||void 0===e?void 0:e.disabled)}),[L,C]),[F,z]=(0,m.useMemo)((()=>{if(x)return[I||[],[]];const{checkedKeys:t,halfCheckedKeys:e}=DA(I,!0,D,N);return[t||[],e]}),[I,x,D,N]),B=(0,m.useMemo)((()=>{const t="radio"===d?F.slice(0,1):F;return new Set(t)}),[F,d]),$=(0,m.useMemo)((()=>"radio"===d?new Set:new Set(z)),[z,d]),[j,U]=(0,m.useState)(null);m.useEffect((()=>{e||P(WD)}),[!!e]);const V=(0,m.useCallback)(((t,e)=>{let r,i;A(t),n?(r=t,i=t.map((t=>O.current.get(t)))):(r=[],i=[],t.forEach((t=>{const e=S(t);void 0!==e&&(r.push(t),i.push(e))}))),P(r),null===a||void 0===a||a(r,i,{type:e})}),[P,S,a,n]),H=(0,m.useCallback)(((t,e,n,r)=>{if(s){const i=n.map((t=>S(t)));s(S(t),e,i,r)}V(n,"single")}),[s,S,V]),G=(0,m.useMemo)((()=>{if(!f||v)return null;return(!0===f?[VD,HD,GD]:f).map((t=>t===VD?{key:"all",text:M.selectionAll,onSelect(){V(b.map(((t,e)=>C(t,e))).filter((t=>{const e=L.get(t);return!(null===e||void 0===e?void 0:e.disabled)||B.has(t)})),"all")}}:t===HD?{key:"invert",text:M.selectInvert,onSelect(){const t=new Set(B);w.forEach(((e,n)=>{const r=C(e,n),i=L.get(r);(null===i||void 0===i?void 0:i.disabled)||(t.has(r)?t.delete(r):t.add(r))}));const e=Array.from(t);c&&c(e),V(e,"invert")}}:t===GD?{key:"none",text:M.selectNone,onSelect(){null===u||void 0===u||u(),V(Array.from(B).filter((t=>{const e=L.get(t);return null===e||void 0===e?void 0:e.disabled})),"none")}}:t)).map((t=>Object.assign(Object.assign({},t),{onSelect:function(){for(var e,n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];null===(n=t.onSelect)||void 0===n||(e=n).call.apply(e,[t].concat(i)),U(null)}})))}),[f,B,w,C,c,V]),W=(0,m.useCallback)((t=>{var n;if(!e)return t.filter((t=>t!==UD));let r=Sr(t);const i=new Set(B),o=R.map(C).filter((t=>!L.get(t).disabled)),a=o.every((t=>i.has(t))),s=o.some((t=>i.has(t))),c=()=>{const t=[];a?o.forEach((e=>{i.delete(e),t.push(e)})):o.forEach((e=>{i.has(e)||(i.add(e),t.push(e))}));const e=Array.from(i);null===l||void 0===l||l(!a,e.map((t=>S(t))),t.map((t=>S(t)))),V(e,"all"),U(null)};let u,b;if("radio"!==d){let t;if(G){const e={getPopupContainer:T,items:G.map(((t,e)=>{const{key:n,text:r,onSelect:i}=t;return{key:null!==n&&void 0!==n?n:e,onClick:()=>{null===i||void 0===i||i(o)},label:r}}))};t=m.createElement("div",{className:`${_}-selection-extra`},m.createElement(bO,{menu:e,getPopupContainer:T},m.createElement("span",null,m.createElement(lb,null))))}const e=R.map(((t,e)=>{const n=C(t,e),r=L.get(n)||{};return Object.assign({checked:i.has(n)},r)})).filter((t=>{let{disabled:e}=t;return e})),n=!!e.length&&e.length===R.length,r=n&&e.every((t=>{let{checked:e}=t;return e})),l=n&&e.some((t=>{let{checked:e}=t;return e}));u=!v&&m.createElement("div",{className:`${_}-selection`},m.createElement(SM,{checked:n?r:!!R.length&&a,indeterminate:n?!r&&l:!a&&s,onChange:c,disabled:0===R.length||n,"aria-label":t?"Custom selection":"Select all",skipGroup:!0}),t)}b="radio"===d?(t,e,n)=>{const r=C(e,n),o=i.has(r);return{node:m.createElement(jO,Object.assign({},L.get(r),{checked:o,onClick:t=>t.stopPropagation(),onChange:t=>{i.has(r)||H(r,!0,[r],t.nativeEvent)}})),checked:o}}:(t,e,n)=>{var r;const a=C(e,n),s=i.has(a),l=$.has(a),c=L.get(a);let u;return u="nest"===E?l:null!==(r=null===c||void 0===c?void 0:c.indeterminate)&&void 0!==r?r:l,{node:m.createElement(SM,Object.assign({},c,{indeterminate:u,checked:s,skipGroup:!0,onClick:t=>t.stopPropagation(),onChange:t=>{let{nativeEvent:e}=t;const{shiftKey:n}=e;let r=-1,l=-1;if(n&&x){const t=new Set([j,a]);o.some(((e,n)=>{if(t.has(e)){if(-1!==r)return l=n,!0;r=n}return!1}))}if(-1!==l&&r!==l&&x){const t=o.slice(r,l+1),e=[];s?t.forEach((t=>{i.has(t)&&(e.push(t),i.delete(t))})):t.forEach((t=>{i.has(t)||(e.push(t),i.add(t))}));const n=Array.from(i);null===h||void 0===h||h(!s,n.map((t=>S(t))),e.map((t=>S(t)))),V(n,"multiple")}else{const t=F;if(x){const n=s?oA(t,a):aA(t,a);H(a,!s,n,e)}else{const n=DA([].concat(Sr(t),[a]),!0,D,N),{checkedKeys:r,halfCheckedKeys:i}=n;let o=r;if(s){const t=new Set(r);t.delete(a),o=DA(Array.from(t),{checked:!1,halfCheckedKeys:i},D,N).checkedKeys}H(a,!s,o,e)}}U(s?null:a)}})),checked:s}};if(!r.includes(UD))if(0===r.findIndex((t=>{var e;return"EXPAND_COLUMN"===(null===(e=t[Yw])||void 0===e?void 0:e.columnType)}))){const[t,...e]=r;r=[t,UD].concat(Sr(e))}else r=[UD].concat(Sr(r));const w=r.indexOf(UD);r=r.filter(((t,e)=>t!==UD||e===w));const k=r[w-1],M=r[w+1];let I=g;void 0===I&&(void 0!==(null===M||void 0===M?void 0:M.fixed)?I=M.fixed:void 0!==(null===k||void 0===k?void 0:k.fixed)&&(I=k.fixed)),I&&k&&"EXPAND_COLUMN"===(null===(n=k[Yw])||void 0===n?void 0:n.columnType)&&void 0===k.fixed&&(k.fixed=I);const P=ic()(`${_}-selection-col`,{[`${_}-selection-col-with-dropdown`]:f&&"checkbox"===d}),O={fixed:I,width:p,className:`${_}-selection-column`,title:e.columnTitle||u,render:(t,e,n)=>{const{node:r,checked:i}=b(t,e,n);return y?y(i,e,n,r):r},onCell:e.onCell,[Yw]:{className:P}};return r.map((t=>t===UD?O:t))}),[C,R,e,F,B,$,p,G,E,j,L,h,H,N]);return[W,B]},YD={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"outlined"},ZD=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:YD}))};var KD=m.forwardRef(ZD),JD={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z"}}]},name:"caret-up",theme:"outlined"},QD=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:JD}))};var tR=m.forwardRef(QD);const eR="ascend",nR="descend";function rR(t){return"object"===typeof t.sorter&&"number"===typeof t.sorter.multiple&&t.sorter.multiple}function iR(t){return"function"===typeof t?t:!(!t||"object"!==typeof t||!t.compare)&&t.compare}function oR(t,e,n){let r=[];function i(t,e){r.push({column:t,key:eM(t,e),multiplePriority:rR(t),sortOrder:t.sortOrder})}return(t||[]).forEach(((t,o)=>{const a=nM(o,n);t.children?("sortOrder"in t&&i(t,a),r=[].concat(Sr(r),Sr(oR(t.children,e,a)))):t.sorter&&("sortOrder"in t?i(t,a):e&&t.defaultSortOrder&&r.push({column:t,key:eM(t,a),multiplePriority:rR(t),sortOrder:t.defaultSortOrder}))})),r}function aR(t,e,n,r,i,o,a,s){return(e||[]).map(((e,l)=>{const c=nM(l,s);let u=e;if(u.sorter){const s=u.sortDirections||i,l=void 0===u.showSorterTooltip?a:u.showSorterTooltip,h=eM(u,c),p=n.find((t=>{let{key:e}=t;return e===h})),d=p?p.sortOrder:null,f=function(t,e){return e?t[t.indexOf(e)+1]:t[0]}(s,d),g=s.includes(eR)&&m.createElement(tR,{className:ic()(`${t}-column-sorter-up`,{active:d===eR})}),y=s.includes(nR)&&m.createElement(KD,{className:ic()(`${t}-column-sorter-down`,{active:d===nR})}),{cancelSort:v,triggerAsc:x,triggerDesc:_}=o||{};let b=v;f===nR?b=_:f===eR&&(b=x);const w="object"===typeof l?l:{title:b};u=Object.assign(Object.assign({},u),{className:ic()(u.className,{[`${t}-column-sort`]:d}),title:n=>{const r=m.createElement("div",{className:`${t}-column-sorters`},m.createElement("span",{className:`${t}-column-title`},rM(e.title,n)),m.createElement("span",{className:ic()(`${t}-column-sorter`,{[`${t}-column-sorter-full`]:!(!g||!y)})},m.createElement("span",{className:`${t}-column-sorter-inner`,"aria-hidden":"true"},g,y)));return l?m.createElement(Ky,Object.assign({},w),r):r},onHeaderCell:n=>{const i=e.onHeaderCell&&e.onHeaderCell(n)||{},o=i.onClick,a=i.onKeyDown;i.onClick=t=>{r({column:e,key:h,sortOrder:f,multiplePriority:rR(e)}),null===o||void 0===o||o(t)},i.onKeyDown=t=>{t.keyCode===sh.ENTER&&(r({column:e,key:h,sortOrder:f,multiplePriority:rR(e)}),null===a||void 0===a||a(t))};const s=function(t,e){const n=rM(t,e);return"[object Object]"===Object.prototype.toString.call(n)?"":n}(e.title,{}),l=null===s||void 0===s?void 0:s.toString();return d?i["aria-sort"]="ascend"===d?"ascending":"descending":i["aria-label"]=l||"",i.className=ic()(i.className,`${t}-column-has-sorters`),i.tabIndex=0,e.ellipsis&&(i.title=(null!==s&&void 0!==s?s:"").toString()),i}})}return"children"in u&&(u=Object.assign(Object.assign({},u),{children:aR(t,u.children,n,r,i,o,a,c)})),u}))}function sR(t){const{column:e,sortOrder:n}=t;return{column:e,order:n,field:e.dataIndex,columnKey:e.key}}function lR(t){const e=t.filter((t=>{let{sortOrder:e}=t;return e})).map(sR);return 0===e.length&&t.length?Object.assign(Object.assign({},sR(t[t.length-1])),{column:void 0}):e.length<=1?e[0]||{}:e}function cR(t,e,n){const r=e.slice().sort(((t,e)=>e.multiplePriority-t.multiplePriority)),i=t.slice(),o=r.filter((t=>{let{column:{sorter:e},sortOrder:n}=t;return iR(e)&&n}));return o.length?i.sort(((t,e)=>{for(let n=0;n<o.length;n+=1){const r=o[n],{column:{sorter:i},sortOrder:a}=r,s=iR(i);if(s&&a){const n=s(t,e,a);if(0!==n)return a===eR?n:-n}}return 0})).map((t=>{const r=t[n];return r?Object.assign(Object.assign({},t),{[n]:cR(r,e,n)}):t})):i}function uR(t,e){return t.map((t=>{const n=Object.assign({},t);return n.title=rM(t.title,e),"children"in n&&(n.children=uR(n.children,e)),n}))}function hR(t){return[m.useCallback((e=>uR(e,t)),[t])]}var pR=t=>{const{componentCls:e}=t,n=`${t.lineWidth}px ${t.lineType} ${t.tableBorderColor}`,r=(n,r,i)=>({[`&${e}-${n}`]:{[`> ${e}-container`]:{[`> ${e}-content, > ${e}-body`]:{"\n            > table > tbody > tr > th,\n            > table > tbody > tr > td\n          ":{[`> ${e}-expanded-row-fixed`]:{margin:`-${r}px -${i+t.lineWidth}px`}}}}}});return{[`${e}-wrapper`]:{[`${e}${e}-bordered`]:Object.assign(Object.assign(Object.assign({[`> ${e}-title`]:{border:n,borderBottom:0},[`> ${e}-container`]:{borderInlineStart:n,borderTop:n,[`\n            > ${e}-content,\n            > ${e}-header,\n            > ${e}-body,\n            > ${e}-summary\n          `]:{"> table":{"\n                > thead > tr > th,\n                > thead > tr > td,\n                > tbody > tr > th,\n                > tbody > tr > td,\n                > tfoot > tr > th,\n                > tfoot > tr > td\n              ":{borderInlineEnd:n},"> thead":{"> tr:not(:last-child) > th":{borderBottom:n},"> tr > th::before":{backgroundColor:"transparent !important"}},"\n                > thead > tr,\n                > tbody > tr,\n                > tfoot > tr\n              ":{[`> ${e}-cell-fix-right-first::after`]:{borderInlineEnd:n}},"\n                > tbody > tr > th,\n                > tbody > tr > td\n              ":{[`> ${e}-expanded-row-fixed`]:{margin:`-${t.tablePaddingVertical}px -${t.tablePaddingHorizontal+t.lineWidth}px`,"&::after":{position:"absolute",top:0,insetInlineEnd:t.lineWidth,bottom:0,borderInlineEnd:n,content:'""'}}}}}},[`&${e}-scroll-horizontal`]:{[`> ${e}-container > ${e}-body`]:{"> table > tbody":{[`\n                > tr${e}-expanded-row,\n                > tr${e}-placeholder\n              `]:{"> th, > td":{borderInlineEnd:0}}}}}},r("middle",t.tablePaddingVerticalMiddle,t.tablePaddingHorizontalMiddle)),r("small",t.tablePaddingVerticalSmall,t.tablePaddingHorizontalSmall)),{[`> ${e}-footer`]:{border:n,borderTop:0}}),[`${e}-cell`]:{[`${e}-container:first-child`]:{borderTop:0},"&-scrollbar:not([rowspan])":{boxShadow:`0 ${t.lineWidth}px 0 ${t.lineWidth}px ${t.tableHeaderBg}`}},[`${e}-bordered ${e}-cell-scrollbar`]:{borderInlineEnd:n}}}};var dR=t=>{const{componentCls:e}=t;return{[`${e}-wrapper`]:{[`${e}-cell-ellipsis`]:Object.assign(Object.assign({},du),{wordBreak:"keep-all",[`\n          &${e}-cell-fix-left-last,\n          &${e}-cell-fix-right-first\n        `]:{overflow:"visible",[`${e}-cell-content`]:{display:"block",overflow:"hidden",textOverflow:"ellipsis"}},[`${e}-column-title`]:{overflow:"hidden",textOverflow:"ellipsis",wordBreak:"keep-all"}})}}};var fR=t=>{const{componentCls:e}=t;return{[`${e}-wrapper`]:{[`${e}-tbody > tr${e}-placeholder`]:{textAlign:"center",color:t.colorTextDisabled,"\n          &:hover > th,\n          &:hover > td,\n        ":{background:t.colorBgContainer}}}}};const gR=t=>({color:t.colorLink,textDecoration:"none",outline:"none",cursor:"pointer",transition:`color ${t.motionDurationSlow}`,"&:focus, &:hover":{color:t.colorLinkHover},"&:active":{color:t.colorLinkActive}});var mR=t=>{const{componentCls:e,antCls:n,controlInteractiveSize:r,motionDurationSlow:i,lineWidth:o,paddingXS:a,lineType:s,tableBorderColor:l,tableExpandIconBg:c,tableExpandColumnWidth:u,borderRadius:h,fontSize:p,fontSizeSM:d,lineHeight:f,tablePaddingVertical:g,tablePaddingHorizontal:m,tableExpandedRowBg:y,paddingXXS:v}=t,x=r/2-o,_=2*x+3*o,b=`${o}px ${s} ${l}`,w=v-o;return{[`${e}-wrapper`]:{[`${e}-expand-icon-col`]:{width:u},[`${e}-row-expand-icon-cell`]:{textAlign:"center",[`${e}-row-expand-icon`]:{display:"inline-flex",float:"none",verticalAlign:"sub"}},[`${e}-row-indent`]:{height:1,float:"left"},[`${e}-row-expand-icon`]:Object.assign(Object.assign({},gR(t)),{position:"relative",float:"left",boxSizing:"border-box",width:_,height:_,padding:0,color:"inherit",lineHeight:`${_}px`,background:c,border:b,borderRadius:h,transform:`scale(${r/_})`,transition:`all ${i}`,userSelect:"none","&:focus, &:hover, &:active":{borderColor:"currentcolor"},"&::before, &::after":{position:"absolute",background:"currentcolor",transition:`transform ${i} ease-out`,content:'""'},"&::before":{top:x,insetInlineEnd:w,insetInlineStart:w,height:o},"&::after":{top:w,bottom:w,insetInlineStart:x,width:o,transform:"rotate(90deg)"},"&-collapsed::before":{transform:"rotate(-180deg)"},"&-collapsed::after":{transform:"rotate(0deg)"},"&-spaced":{"&::before, &::after":{display:"none",content:"none"},background:"transparent",border:0,visibility:"hidden"}}),[`${e}-row-indent + ${e}-row-expand-icon`]:{marginTop:(p*f-3*o)/2-Math.ceil((1.4*d-3*o)/2),marginInlineEnd:a},[`tr${e}-expanded-row`]:{"&, &:hover":{"> th, > td":{background:y}},[`${n}-descriptions-view`]:{display:"flex",table:{flex:"auto",width:"auto"}}},[`${e}-expanded-row-fixed`]:{position:"relative",margin:`-${g}px -${m}px`,padding:`${g}px ${m}px`}}}};var yR=t=>{const{componentCls:e,antCls:n,iconCls:r,tableFilterDropdownWidth:i,tableFilterDropdownSearchWidth:o,paddingXXS:a,paddingXS:s,colorText:l,lineWidth:c,lineType:u,tableBorderColor:h,tableHeaderIconColor:p,fontSizeSM:d,tablePaddingHorizontal:f,borderRadius:g,motionDurationSlow:m,colorTextDescription:y,colorPrimary:v,tableHeaderFilterActiveBg:x,colorTextDisabled:_,tableFilterDropdownBg:b,tableFilterDropdownHeight:w,controlItemBgHover:S,controlItemBgActive:C,boxShadowSecondary:E}=t,k=`${n}-dropdown`,M=`${e}-filter-dropdown`,T=`${n}-tree`,I=`${c}px ${u} ${h}`;return[{[`${e}-wrapper`]:{[`${e}-filter-column`]:{display:"flex",justifyContent:"space-between"},[`${e}-filter-trigger`]:{position:"relative",display:"flex",alignItems:"center",marginBlock:-a,marginInline:`${a}px ${-f/2}px`,padding:`0 ${a}px`,color:p,fontSize:d,borderRadius:g,cursor:"pointer",transition:`all ${m}`,"&:hover":{color:y,background:x},"&.active":{color:v}}}},{[`${n}-dropdown`]:{[M]:Object.assign(Object.assign({},fu(t)),{minWidth:i,backgroundColor:b,borderRadius:g,boxShadow:E,[`${k}-menu`]:{maxHeight:w,overflowX:"hidden",border:0,boxShadow:"none","&:empty::after":{display:"block",padding:`${s}px 0`,color:_,fontSize:d,textAlign:"center",content:'"Not Found"'}},[`${M}-tree`]:{paddingBlock:`${s}px 0`,paddingInline:s,[T]:{padding:0},[`${T}-treenode ${T}-node-content-wrapper:hover`]:{backgroundColor:S},[`${T}-treenode-checkbox-checked ${T}-node-content-wrapper`]:{"&, &:hover":{backgroundColor:C}}},[`${M}-search`]:{padding:s,borderBottom:I,"&-input":{input:{minWidth:o},[r]:{color:_}}},[`${M}-checkall`]:{width:"100%",marginBottom:a,marginInlineStart:a},[`${M}-btns`]:{display:"flex",justifyContent:"space-between",padding:`${s-c}px ${s}px`,overflow:"hidden",borderTop:I}})}},{[`${n}-dropdown ${M}, ${M}-submenu`]:{[`${n}-checkbox-wrapper + span`]:{paddingInlineStart:s,color:l},"> ul":{maxHeight:"calc(100vh - 130px)",overflowX:"hidden",overflowY:"auto"}}}]};var vR=t=>{const{componentCls:e,lineWidth:n,colorSplit:r,motionDurationSlow:i,zIndexTableFixed:o,tableBg:a,zIndexTableSticky:s}=t;return{[`${e}-wrapper`]:{[`\n        ${e}-cell-fix-left,\n        ${e}-cell-fix-right\n      `]:{position:"sticky !important",zIndex:o,background:a},[`\n        ${e}-cell-fix-left-first::after,\n        ${e}-cell-fix-left-last::after\n      `]:{position:"absolute",top:0,right:{_skip_check_:!0,value:0},bottom:-n,width:30,transform:"translateX(100%)",transition:`box-shadow ${i}`,content:'""',pointerEvents:"none"},[`${e}-cell-fix-left-all::after`]:{display:"none"},[`\n        ${e}-cell-fix-right-first::after,\n        ${e}-cell-fix-right-last::after\n      `]:{position:"absolute",top:0,bottom:-n,left:{_skip_check_:!0,value:0},width:30,transform:"translateX(-100%)",transition:`box-shadow ${i}`,content:'""',pointerEvents:"none"},[`${e}-container`]:{"&::before, &::after":{position:"absolute",top:0,bottom:0,zIndex:s+1,width:30,transition:`box-shadow ${i}`,content:'""',pointerEvents:"none"},"&::before":{insetInlineStart:0},"&::after":{insetInlineEnd:0}},[`${e}-ping-left`]:{[`&:not(${e}-has-fix-left) ${e}-container`]:{position:"relative","&::before":{boxShadow:`inset 10px 0 8px -8px ${r}`}},[`\n          ${e}-cell-fix-left-first::after,\n          ${e}-cell-fix-left-last::after\n        `]:{boxShadow:`inset 10px 0 8px -8px ${r}`},[`${e}-cell-fix-left-last::before`]:{backgroundColor:"transparent !important"}},[`${e}-ping-right`]:{[`&:not(${e}-has-fix-right) ${e}-container`]:{position:"relative","&::after":{boxShadow:`inset -10px 0 8px -8px ${r}`}},[`\n          ${e}-cell-fix-right-first::after,\n          ${e}-cell-fix-right-last::after\n        `]:{boxShadow:`inset -10px 0 8px -8px ${r}`}}}}};var xR=t=>{const{componentCls:e,antCls:n}=t;return{[`${e}-wrapper`]:{[`${e}-pagination${n}-pagination`]:{margin:`${t.margin}px 0`},[`${e}-pagination`]:{display:"flex",flexWrap:"wrap",rowGap:t.paddingXS,"> *":{flex:"none"},"&-left":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-right":{justifyContent:"flex-end"}}}}};var _R=t=>{const{componentCls:e,tableRadius:n}=t;return{[`${e}-wrapper`]:{[e]:{[`${e}-title, ${e}-header`]:{borderRadius:`${n}px ${n}px 0 0`},[`${e}-title + ${e}-container`]:{borderStartStartRadius:0,borderStartEndRadius:0,[`${e}-header, table`]:{borderRadius:0},"table > thead > tr:first-child":{"th:first-child, th:last-child, td:first-child, td:last-child":{borderRadius:0}}},"&-container":{borderStartStartRadius:n,borderStartEndRadius:n,"table > thead > tr:first-child":{"> *:first-child":{borderStartStartRadius:n},"> *:last-child":{borderStartEndRadius:n}}},"&-footer":{borderRadius:`0 0 ${n}px ${n}px`}}}}};var bR=t=>{const{componentCls:e}=t;return{[`${e}-wrapper-rtl`]:{direction:"rtl",table:{direction:"rtl"},[`${e}-pagination-left`]:{justifyContent:"flex-end"},[`${e}-pagination-right`]:{justifyContent:"flex-start"},[`${e}-row-expand-icon`]:{"&::after":{transform:"rotate(-90deg)"},"&-collapsed::before":{transform:"rotate(180deg)"},"&-collapsed::after":{transform:"rotate(0deg)"}},[`${e}-container`]:{"&::before":{insetInlineStart:"unset",insetInlineEnd:0},"&::after":{insetInlineStart:0,insetInlineEnd:"unset"}}}}};var wR=t=>{const{componentCls:e,antCls:n,iconCls:r,fontSizeIcon:i,padding:o,paddingXS:a,tableHeaderIconColor:s,tableHeaderIconColorHover:l,tableSelectionColumnWidth:c}=t;return{[`${e}-wrapper`]:{[`${e}-selection-col`]:{width:c,[`&${e}-selection-col-with-dropdown`]:{width:c+i+o/4}},[`${e}-bordered ${e}-selection-col`]:{width:c+2*a,[`&${e}-selection-col-with-dropdown`]:{width:c+i+o/4+2*a}},[`\n        table tr th${e}-selection-column,\n        table tr td${e}-selection-column\n      `]:{paddingInlineEnd:t.paddingXS,paddingInlineStart:t.paddingXS,textAlign:"center",[`${n}-radio-wrapper`]:{marginInlineEnd:0}},[`table tr th${e}-selection-column${e}-cell-fix-left`]:{zIndex:t.zIndexTableFixed+1},[`table tr th${e}-selection-column::after`]:{backgroundColor:"transparent !important"},[`${e}-selection`]:{position:"relative",display:"inline-flex",flexDirection:"column"},[`${e}-selection-extra`]:{position:"absolute",top:0,zIndex:1,cursor:"pointer",transition:`all ${t.motionDurationSlow}`,marginInlineStart:"100%",paddingInlineStart:t.tablePaddingHorizontal/4+"px",[r]:{color:s,fontSize:i,verticalAlign:"baseline","&:hover":{color:l}}}}}};var SR=t=>{const{componentCls:e}=t,n=(n,r,i,o)=>({[`${e}${e}-${n}`]:{fontSize:o,[`\n        ${e}-title,\n        ${e}-footer,\n        ${e}-thead > tr > th,\n        ${e}-tbody > tr > th,\n        ${e}-tbody > tr > td,\n        tfoot > tr > th,\n        tfoot > tr > td\n      `]:{padding:`${r}px ${i}px`},[`${e}-filter-trigger`]:{marginInlineEnd:`-${i/2}px`},[`${e}-expanded-row-fixed`]:{margin:`-${r}px -${i}px`},[`${e}-tbody`]:{[`${e}-wrapper:only-child ${e}`]:{marginBlock:`-${r}px`,marginInline:`${t.tableExpandColumnWidth-i}px -${i}px`}},[`${e}-selection-column`]:{paddingInlineStart:i/4+"px"}}});return{[`${e}-wrapper`]:Object.assign(Object.assign({},n("middle",t.tablePaddingVerticalMiddle,t.tablePaddingHorizontalMiddle,t.tableFontSizeMiddle)),n("small",t.tablePaddingVerticalSmall,t.tablePaddingHorizontalSmall,t.tableFontSizeSmall))}};var CR=t=>{const{componentCls:e,marginXXS:n,fontSizeIcon:r,tableHeaderIconColor:i,tableHeaderIconColorHover:o}=t;return{[`${e}-wrapper`]:{[`${e}-thead th${e}-column-has-sorters`]:{outline:"none",cursor:"pointer",transition:`all ${t.motionDurationSlow}`,"&:hover":{background:t.tableHeaderSortHoverBg,"&::before":{backgroundColor:"transparent !important"}},"&:focus-visible":{color:t.colorPrimary},[`\n          &${e}-cell-fix-left:hover,\n          &${e}-cell-fix-right:hover\n        `]:{background:t.tableFixedHeaderSortActiveBg}},[`${e}-thead th${e}-column-sort`]:{background:t.tableHeaderSortBg,"&::before":{backgroundColor:"transparent !important"}},[`td${e}-column-sort`]:{background:t.tableBodySortBg},[`${e}-column-title`]:{position:"relative",zIndex:1,flex:1},[`${e}-column-sorters`]:{display:"flex",flex:"auto",alignItems:"center",justifyContent:"space-between","&::after":{position:"absolute",inset:0,width:"100%",height:"100%",content:'""'}},[`${e}-column-sorter`]:{marginInlineStart:n,color:i,fontSize:0,transition:`color ${t.motionDurationSlow}`,"&-inner":{display:"inline-flex",flexDirection:"column",alignItems:"center"},"&-up, &-down":{fontSize:r,"&.active":{color:t.colorPrimary}},[`${e}-column-sorter-up + ${e}-column-sorter-down`]:{marginTop:"-0.3em"}},[`${e}-column-sorters:hover ${e}-column-sorter`]:{color:o}}}};var ER=t=>{const{componentCls:e,opacityLoading:n,tableScrollThumbBg:r,tableScrollThumbBgHover:i,tableScrollThumbSize:o,tableScrollBg:a,zIndexTableSticky:s}=t,l=`${t.lineWidth}px ${t.lineType} ${t.tableBorderColor}`;return{[`${e}-wrapper`]:{[`${e}-sticky`]:{"&-holder":{position:"sticky",zIndex:s,background:t.colorBgContainer},"&-scroll":{position:"sticky",bottom:0,height:`${o}px !important`,zIndex:s,display:"flex",alignItems:"center",background:a,borderTop:l,opacity:n,"&:hover":{transformOrigin:"center bottom"},"&-bar":{height:o,backgroundColor:r,borderRadius:100,transition:`all ${t.motionDurationSlow}, transform none`,position:"absolute",bottom:0,"&:hover, &-active":{backgroundColor:i}}}}}}};var kR=t=>{const{componentCls:e,lineWidth:n,tableBorderColor:r}=t,i=`${n}px ${t.lineType} ${r}`;return{[`${e}-wrapper`]:{[`${e}-summary`]:{position:"relative",zIndex:t.zIndexTableFixed,background:t.tableBg,"> tr":{"> th, > td":{borderBottom:i}}},[`div${e}-summary`]:{boxShadow:`0 -${n}px 0 ${r}`}}}};const MR=t=>{const{componentCls:e,fontWeightStrong:n,tablePaddingVertical:r,tablePaddingHorizontal:i,lineWidth:o,lineType:a,tableBorderColor:s,tableFontSize:l,tableBg:c,tableRadius:u,tableHeaderTextColor:h,motionDurationMid:p,tableHeaderBg:d,tableHeaderCellSplitColor:f,tableRowHoverBg:g,tableSelectedRowBg:m,tableSelectedRowHoverBg:y,tableFooterTextColor:v,tableFooterBg:x,paddingContentVerticalLG:_}=t,b=`${o}px ${a} ${s}`;return{[`${e}-wrapper`]:Object.assign(Object.assign({clear:"both",maxWidth:"100%"},{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),{[e]:Object.assign(Object.assign({},fu(t)),{fontSize:l,background:c,borderRadius:`${u}px ${u}px 0 0`}),table:{width:"100%",textAlign:"start",borderRadius:`${u}px ${u}px 0 0`,borderCollapse:"separate",borderSpacing:0},[`\n          ${e}-thead > tr > th,\n          ${e}-tbody > tr > th,\n          ${e}-tbody > tr > td,\n          tfoot > tr > th,\n          tfoot > tr > td\n        `]:{position:"relative",padding:`${_}px ${i}px`,overflowWrap:"break-word"},[`${e}-title`]:{padding:`${r}px ${i}px`},[`${e}-thead`]:{"\n          > tr > th,\n          > tr > td\n        ":{position:"relative",color:h,fontWeight:n,textAlign:"start",background:d,borderBottom:b,transition:`background ${p} ease`,"&[colspan]:not([colspan='1'])":{textAlign:"center"},[`&:not(:last-child):not(${e}-selection-column):not(${e}-row-expand-icon-cell):not([colspan])::before`]:{position:"absolute",top:"50%",insetInlineEnd:0,width:1,height:"1.6em",backgroundColor:f,transform:"translateY(-50%)",transition:`background-color ${p}`,content:'""'}},"> tr:not(:last-child) > th[colspan]":{borderBottom:0}},[`${e}-tbody`]:{"> tr":{"> th, > td":{transition:`background ${p}, border-color ${p}`,borderBottom:b,[`\n              > ${e}-wrapper:only-child,\n              > ${e}-expanded-row-fixed > ${e}-wrapper:only-child\n            `]:{[e]:{marginBlock:`-${r}px`,marginInline:`${t.tableExpandColumnWidth-i}px -${i}px`,[`${e}-tbody > tr:last-child > td`]:{borderBottom:0,"&:first-child, &:last-child":{borderRadius:0}}}}},"> th":{position:"relative",color:h,fontWeight:n,textAlign:"start",background:d,borderBottom:b,transition:`background ${p} ease`},[`\n            &${e}-row:hover > th,\n            &${e}-row:hover > td,\n            > th${e}-cell-row-hover\n            > td${e}-cell-row-hover\n          `]:{background:g},[`&${e}-row-selected`]:{"> th, > td":{background:m},"&:hover > th, &:hover > td":{background:y}}}},[`${e}-footer`]:{padding:`${r}px ${i}px`,color:v,background:x}})}};var TR=bh("Table",(t=>{const{controlItemBgActive:e,controlItemBgActiveHover:n,colorTextPlaceholder:r,colorTextHeading:i,colorSplit:o,colorBorderSecondary:a,fontSize:s,padding:l,paddingXS:c,paddingSM:u,controlHeight:h,colorFillAlter:p,colorIcon:d,colorIconHover:f,opacityLoading:g,colorBgContainer:m,borderRadiusLG:y,colorFillContent:v,colorFillSecondary:x,controlInteractiveSize:_}=t,b=new Ml(d),w=new Ml(f),S=e,C=new Ml(x).onBackground(m).toHexShortString(),E=new Ml(v).onBackground(m).toHexShortString(),k=new Ml(p).onBackground(m).toHexShortString(),M=vh(t,{tableFontSize:s,tableBg:m,tableRadius:y,tablePaddingVertical:l,tablePaddingHorizontal:l,tablePaddingVerticalMiddle:u,tablePaddingHorizontalMiddle:c,tablePaddingVerticalSmall:c,tablePaddingHorizontalSmall:c,tableBorderColor:a,tableHeaderTextColor:i,tableHeaderBg:k,tableFooterTextColor:i,tableFooterBg:k,tableHeaderCellSplitColor:a,tableHeaderSortBg:C,tableHeaderSortHoverBg:E,tableHeaderIconColor:b.clone().setAlpha(b.getAlpha()*g).toRgbString(),tableHeaderIconColorHover:w.clone().setAlpha(w.getAlpha()*g).toRgbString(),tableBodySortBg:k,tableFixedHeaderSortActiveBg:C,tableHeaderFilterActiveBg:v,tableFilterDropdownBg:m,tableRowHoverBg:k,tableSelectedRowBg:S,tableSelectedRowHoverBg:n,zIndexTableFixed:2,zIndexTableSticky:3,tableFontSizeMiddle:s,tableFontSizeSmall:s,tableSelectionColumnWidth:h,tableExpandIconBg:m,tableExpandColumnWidth:_+2*t.padding,tableExpandedRowBg:p,tableFilterDropdownWidth:120,tableFilterDropdownHeight:264,tableFilterDropdownSearchWidth:140,tableScrollThumbSize:8,tableScrollThumbBg:r,tableScrollThumbBgHover:i,tableScrollBg:o});return[MR(M),xR(M),kR(M),CR(M),yR(M),pR(M),_R(M),mR(M),kR(M),fR(M),wR(M),vR(M),ER(M),dR(M),SR(M),bR(M)]}));const IR=[],PR=(t,e)=>{const{prefixCls:n,className:r,rootClassName:i,style:o,size:a,bordered:s,dropdownPrefixCls:l,dataSource:c,pagination:u,rowSelection:h,rowKey:p="key",rowClassName:d,columns:f,children:g,childrenColumnName:y,onChange:v,getPopupContainer:x,loading:_,expandIcon:b,expandable:w,expandedRowRender:S,expandIconColumnIndex:C,indentSize:E,scroll:k,sortDirections:M,locale:T,showSorterTooltip:I=!0}=t;const P=m.useMemo((()=>f||aS(g)),[f,g]),O=m.useMemo((()=>P.some((t=>t.responsive))),[P]),A=jS(O),D=m.useMemo((()=>{const t=new Set(Object.keys(A).filter((t=>A[t])));return P.filter((e=>!e.responsive||e.responsive.some((e=>t.has(e)))))}),[P,A]),R=Gh(t,["className","style","columns"]),{locale:L=Rs,direction:N,renderEmpty:F,getPrefixCls:z,getPopupContainer:B}=m.useContext(Gl),$=Jl(a),j=Object.assign(Object.assign({},L.Table),T),U=c||IR,V=z("table",n),H=z("dropdown",l),G=Object.assign({childrenColumnName:y,expandIconColumnIndex:C},w),{childrenColumnName:W="children"}=G,X=m.useMemo((()=>U.some((t=>null===t||void 0===t?void 0:t[W]))?"nest":S||w&&w.expandedRowRender?"row":null),[U]),q={body:m.useRef()},Y=m.useMemo((()=>"function"===typeof p?p:t=>null===t||void 0===t?void 0:t[p]),[p]),[Z]=function(t,e,n){const r=m.useRef({});return[function(i){if(!r.current||r.current.data!==t||r.current.childrenColumnName!==e||r.current.getRowKey!==n){const o=new Map;function a(t){t.forEach(((t,r)=>{const i=n(t,r);o.set(i,t),t&&"object"===typeof t&&e in t&&a(t[e]||[])}))}a(t),r.current={data:t,childrenColumnName:e,kvMap:o,getRowKey:n}}return r.current.kvMap.get(i)}]}(U,W,Y),K={},J=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var r,i,o;const a=Object.assign(Object.assign({},K),t);n&&(null===(r=K.resetPagination)||void 0===r||r.call(K),(null===(i=a.pagination)||void 0===i?void 0:i.current)&&(a.pagination.current=1),u&&u.onChange&&u.onChange(1,null===(o=a.pagination)||void 0===o?void 0:o.pageSize)),k&&!1!==k.scrollToFirstRowOnChange&&q.body.current&&PS(0,{getContainer:()=>q.body.current}),null===v||void 0===v||v(a.pagination,a.filters,a.sorter,{currentDataSource:LD(cR(U,a.sorterStates,W),a.filterStates),action:e})},[Q,tt,et,nt]=function(t){let{prefixCls:e,mergedColumns:n,onSorterChange:r,sortDirections:i,tableLocale:o,showSorterTooltip:a}=t;const[s,l]=m.useState(oR(n,!0)),c=m.useMemo((()=>{let t=!0;const e=oR(n,!1);if(!e.length)return s;const r=[];function i(e){t?r.push(e):r.push(Object.assign(Object.assign({},e),{sortOrder:null}))}let o=null;return e.forEach((e=>{null===o?(i(e),e.sortOrder&&(!1===e.multiplePriority?t=!1:o=!0)):(o&&!1!==e.multiplePriority||(t=!1),i(e))})),r}),[n,s]),u=m.useMemo((()=>{const t=c.map((t=>{let{column:e,sortOrder:n}=t;return{column:e,order:n}}));return{sortColumns:t,sortColumn:t[0]&&t[0].column,sortOrder:t[0]&&t[0].order}}),[c]);function h(t){let e;e=!1!==t.multiplePriority&&c.length&&!1!==c[0].multiplePriority?[].concat(Sr(c.filter((e=>{let{key:n}=e;return n!==t.key}))),[t]):[t],l(e),r(lR(e),e)}return[t=>aR(e,t,c,h,i,o,a),c,u,()=>lR(c)]}({prefixCls:V,mergedColumns:D,onSorterChange:(t,e)=>{J({sorter:t,sorterStates:e},"sort",!1)},sortDirections:M||["ascend","descend"],tableLocale:j,showSorterTooltip:I}),rt=m.useMemo((()=>cR(U,tt,W)),[U,tt]);K.sorter=nt(),K.sorterStates=tt;const[it,ot,at]=FD({prefixCls:V,locale:j,dropdownPrefixCls:H,mergedColumns:D,onFilterChange:(t,e)=>{J({filters:t,filterStates:e},"filter",!0)},getPopupContainer:x||B}),st=LD(rt,ot);K.filters=at,K.filterStates=ot;const lt=m.useMemo((()=>{const t={};return Object.keys(at).forEach((e=>{null!==at[e]&&(t[e]=at[e])})),Object.assign(Object.assign({},et),{filters:t})}),[et,at]),[ct]=hR(lt),[ut,ht]=jD(st.length,((t,e)=>{J({pagination:Object.assign(Object.assign({},K.pagination),{current:t,pageSize:e})},"paginate")}),u);K.pagination=!1===u?{}:function(t,e){const n={current:t.current,pageSize:t.pageSize},r=e&&"object"===typeof e?e:{};return Object.keys(r).forEach((e=>{const r=t[e];"function"!==typeof r&&(n[e]=r)})),n}(ut,u),K.resetPagination=ht;const pt=m.useMemo((()=>{if(!1===u||!ut.pageSize)return st;const{current:t=1,total:e,pageSize:n=$D}=ut;return st.length<e?st.length>n?st.slice((t-1)*n,t*n):st:st.slice((t-1)*n,t*n)}),[!!u,st,ut&&ut.current,ut&&ut.pageSize,ut&&ut.total]),[dt,ft]=qD({prefixCls:V,data:st,pageData:pt,getRowKey:Y,getRecordByKey:Z,expandType:X,childrenColumnName:W,locale:j,getPopupContainer:x||B},h);G.__PARENT_RENDER_ICON__=G.expandIcon,G.expandIcon=G.expandIcon||b||Qk(j),"nest"===X&&void 0===G.expandIconColumnIndex?G.expandIconColumnIndex=h?1:0:G.expandIconColumnIndex>0&&h&&(G.expandIconColumnIndex-=1),"number"!==typeof G.indentSize&&(G.indentSize="number"===typeof E?E:15);const gt=m.useCallback((t=>ct(dt(it(Q(t))))),[Q,it,dt]);let mt,yt,vt;if(!1!==u&&(null===ut||void 0===ut?void 0:ut.total)){let t;t=ut.size?ut.size:"small"===$||"middle"===$?"small":void 0;const e=e=>m.createElement(Uk,Object.assign({},ut,{className:ic()(`${V}-pagination ${V}-pagination-${e}`,ut.className),size:t})),n="rtl"===N?"left":"right",{position:r}=ut;if(null!==r&&Array.isArray(r)){const t=r.find((t=>t.includes("top"))),i=r.find((t=>t.includes("bottom"))),o=r.every((t=>"none"===`${t}`));t||i||o||(yt=e(n)),t&&(mt=e(t.toLowerCase().replace("top",""))),i&&(yt=e(i.toLowerCase().replace("bottom","")))}else yt=e(n)}"boolean"===typeof _?vt={spinning:_}:"object"===typeof _&&(vt=Object.assign({spinning:!0},_));const[xt,_t]=TR(V),bt=ic()(`${V}-wrapper`,{[`${V}-wrapper-rtl`]:"rtl"===N},r,i,_t),wt=T&&T.emptyText||(null===F||void 0===F?void 0:F("Table"))||m.createElement($S,{componentName:"Table"});return xt(m.createElement("div",{ref:e,className:bt,style:o},m.createElement(Jk,Object.assign({spinning:!1},vt),mt,m.createElement(tM,Object.assign({},R,{columns:D,direction:N,expandable:G,prefixCls:V,className:ic()({[`${V}-middle`]:"middle"===$,[`${V}-small`]:"small"===$,[`${V}-bordered`]:s,[`${V}-empty`]:0===U.length}),data:pt,rowKey:Y,rowClassName:(t,e,n)=>{let r;return r="function"===typeof d?ic()(d(t,e,n)):ic()(d),ic()({[`${V}-row-selected`]:ft.has(Y(t,e))},r)},emptyText:wt,internalHooks:mw,internalRefs:q,transformColumns:gt})),yt)))};var OR=m.forwardRef(PR);const AR=(t,e)=>{const n=m.useRef(0);return n.current+=1,m.createElement(OR,Object.assign({},t,{ref:e,_renderTimes:n.current}))},DR=m.forwardRef(AR);DR.SELECTION_COLUMN=UD,DR.EXPAND_COLUMN=gw,DR.SELECTION_ALL=VD,DR.SELECTION_INVERT=HD,DR.SELECTION_NONE=GD,DR.Column=MS,DR.ColumnGroup=TS,DR.Summary=Fw;var RR=DR;var LR=function(){const[t,e]=(0,m.useState)([]),[n,r]=(0,m.useState)("Rider"),[i,o]=(0,m.useState)(1),[a,s]=(0,m.useState)(1),{Search:l}=ob,[c,u]=(0,m.useState)(""),h=ht();(0,m.useEffect)((()=>{(async()=>{try{const t=await Pn.get("/api/v1/admin/check-login",{headers:{Cookies:jt.get("admin_cookie")}});if(200===t.status){const{alreadyLoggedIn:e}=t.data;e||(sr.error("You are not logged in"),h("/"))}}catch(t){console.error(t),sr.error("Server Error: "+t.message)}})()}),[]),(0,m.useEffect)((()=>{x(1),u(""),p()}),[n]);const p=async()=>{try{let t;"Rider"===n?t=await Pn.get("/api/v1/pagecount",{params:{tableName:"riders",name:c},headers:{Cookies:jt.get("admin_cookie")}}):"Driver"===n&&(t=await Pn.get("/api/v1/pagecount",{params:{tableName:"drivers",name:c},headers:{Cookies:jt.get("admin_cookie")}})),s(t.data.pageCount.count)}catch(t){console.error("Error fetching Page Count:",t),t.response&&500===t.response.status?sr.error("Server Error: "+t.response.data):sr.error("Error fetching Page Count")}};(0,m.useEffect)((()=>{c?(p(),f()):(p(),d())}),[n,i,c]),(0,m.useEffect)((()=>{console.log("Check page changed1",i)}),[i]);const d=async()=>{try{let t;"Rider"===n?(t=await Pn.get("/api/v1/rider",{params:{pageNumber:i},headers:{Cookies:jt.get("admin_cookie")}}),e(t.data.riders)):"Driver"===n&&(t=await Pn.get("/api/v1/driver",{params:{pageNumber:i},headers:{Cookies:jt.get("admin_cookie")}}),e(t.data.drivers))}catch(t){console.error("Error fetching data:",t),t.response&&403===t.response.status&&"Access denied"===t.response.data?sr.error("Access denied"):t.response&&500===t.response.status?sr.error("Server Error: "+t.response.data):sr.error("Failed to fetch data")}},f=async()=>{try{let t;"Rider"===n?(t=await Pn.get("/api/v1/rider/search",{params:{pageNumber:i,name:c},headers:{Cookies:jt.get("admin_cookie")}}),200===t.status&&(console.log(t),t.data.riders?e(t.data.riders):sr.error(t.data.message))):"Driver"===n&&(t=await Pn.get("/api/v1/driver/search",{params:{pageNumber:i,name:c},headers:{Cookies:jt.get("admin_cookie")}}),200===t.status&&(t.data.drivers?e(t.data.drivers):sr.error(t.data.message)))}catch(t){console.error("Error fetching data:",t),t.response&&403===t.response.status&&"Access denied"===t.response.data?sr.error("Access denied"):t.response&&500===t.response.status?sr.error("Server Error: "+t.response.data):sr.error("Failed To Fetch Data")}},g=async t=>{let e;try{"Rider"===n?e=await Pn.post("/api/v1/rider",{first_name:t.first_name,last_name:t.last_name,address:t.address,city:t.city,zip_postal_code:t.zip_postal_code,state_province:t.state_province,profile_picture:t.profile_picture},{headers:{Cookies:jt.get("admin_cookie")}}):"Driver"===n&&(e=await Pn.post("/api/v1/driver",{first_name:t.first_name,last_name:t.last_name,address:t.address,city:t.city,zip_postal_code:t.zip_postal_code,state_province:t.state_province,capacity:t.capacity,description:t.description,profile_picture:t.profile_picture},{headers:{Cookies:jt.get("admin_cookie")}})),200===e.status&&(sr.success("Profile Created Successfully"),d())}catch(r){r.response&&403===r.response.status&&"Only Super Admin can perform this operation"===r.response.data?sr.error("Only Super Admin can perform this operation"):r.response&&500===r.response.status?sr.error("Server Error: "+r.response.data):400===e.status?sr.error(e.message):sr.error("Failed to Create Profile")}},y=async(t,e)=>{let r;try{console.log("Rider selected: ",t,e),"Rider"===n?(console.log("Rider selected: ",t,e),r=await Pn.patch("/api/v1/rider",{data:{first_name:e.first_name,last_name:e.last_name,address:e.address,city:e.city,zip_postal_code:e.zip_postal_code,state_province:e.state_province,profile_picture:e.profile_picture},id:t},{headers:{Cookies:jt.get("admin_cookie")}}),204===r.status&&(sr.success("Profile Updated Successfully"),d())):"Driver"===n&&(r=await Pn.patch("/api/v1/driver",{data:{first_name:e.first_name,last_name:e.last_name,address:e.address,city:e.city,zip_postal_code:e.zip_postal_code,state_province:e.state_province,capacity:e.capacity,description:e.description,profile_picture:e.profile_picture},id:t},{headers:{Cookies:jt.get("admin_cookie")}}),204===r.status&&(sr.success("Profile Updated Successfully"),d()))}catch(i){i.response&&403===i.response.status&&"Only Super Admin can perform this operation"===i.response.data?sr.error("Only Super Admin can perform this operation"):i.response&&500===i.response.status?sr.error("Server Error: "+i.response.data):400===r.status?sr.error(r.message):sr.error("Failed to Update")}},v=async t=>{try{let e;"Rider"===n?e=await Pn.delete("/api/v1/rider",{headers:{Cookies:jt.get("admin_cookie")},params:{rider_id:t}}):"Driver"===n&&(e=await Pn.delete("/api/v1/driver",{headers:{Cookies:jt.get("admin_cookie")},params:{driver_id:t}})),200===e.status&&(sr.success("Profile Deleted"),d())}catch(e){e.response&&403===e.response.status&&"Only Super Admin can perform this operation"===e.response.data?sr.error("Only Super Admin can perform this operation"):e.response&&500===e.response.status?sr.error("Server Error: "+e.response.data):400===e.response.status?sr.error(e.response.message):sr.error("Failed to Delete Profile")}},x=t=>{o(t)},_=[{title:"ID",dataIndex:"id",key:"id"},{title:"Profile Picture",dataIndex:"profile_picture",key:"profile_picture",render:t=>(0,lr.jsx)("img",{src:t||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHsAAAB7CAMAAABjGQ9NAAAAJFBMVEX////d3d3c3Nz4+Pjm5ub7+/vh4eHq6ur19fXy8vLu7u7Z2dk19XF3AAAEzUlEQVRogcVb2QKkIAxbuY///98Fj/GEphV38zijRmhpG6h//ghgQ0zemwXepxis5DFc6OideoLzUX/Ia6OZJqWmZ9Q/TPxkAmxybd4Dv0uj6YNRJPFGr0wYyJxcxohX+uzSKGYW8UY/gj1NfOaZfXrLHp2MeWZ38QWzfcG8sIt9PoKu3SFXsqFbl18yV2TJ0N8PeoFg6H7EoBdkz6M2Ywa9QBkG81v/vpHjRh9NzSC3wkjWJZ8gcjueeWYHyO0nzBUk+Xhbb6Bt/hl1Je9TD13XN/LuOk9fUhfyTkoP31IX8nYl9zV1If8vxl65GyaP41JXG/kxo34Uz654jG//YMZn7odZZ/p4lX+5AJUrhzvvvs4JaEV1uqp8tQ7RG0CnnW6+hbcI317lrj4ZrepTzptf3Q1nflR6liUizveiwTSbpsCP8NgvoRXUt1NX3SY0QJyiG2ZtRRW7Gpz4k8Whe5AiHwsSR1fX0GRBuwkeIs+adYMCd5Eg8oP1HOtNCUDT/pv0QE85R9AhzpM3A9JvSnr4EUiVvWUUS085UWFegKzYtWCmM1inzHoEYPL1kaRnsjRshQa4l7hKTnlmb1sAC202I+ka7GFj9VcdEGlufGnvAJZONTidPvnUiP8m4BV7QqYNmrtaknI17gJbQE+6A96wKWO6oC2pAJfkxbQNdFouIoHyClYoP4DOT5oMvjJXAwrfkhpJbuHhBxktCzflFGJu0ofTZ9zkIvvP3FTK+Y7b09zCAxfa1wBu4RpDakDS3vzsPYOOa7SvCWMqlETJohLZfL6DrpqAuCZ0NrruLs8lJ0dkcAtInQDUs1nADexjFHFJl5SSSQfUZfUj+iq+pwPqci5B6Vd83gPtDhtRZH9wDcEAIgbnegi4kBtXaebVizRyIUuaYHsu8yMRn+TMOrYPvzwR2SBhkANhZfpFLOg94VIZPAJY1w6g1HFyDe6qbh4EGBwlR3c1f8sW80vkEBtukvgNBNvSJLeROU0S+34CvO+eTWfo+Ab6cdngx6BK+QY76+DgGCgZp3JqMvfuRJsc67zmWBKwzsaUcibupzU21I4+xv2XUgj1tp0+T87VLk3nVGYfkZ13riTH/Ut/Jv++a4D+/OT7xH1Zqh/2Odyor3mJCuoKNCtw3b0Y6Lh67Tr1KWgMIfnuCelDXmjmvnoKyZVFtvaztp738LDnU70sbniMz31/z82jD+6W3ZsW2/DA3iiAbu6mpLr/h3Sb+VbVeUkpyr1v6r7WEu3RnC6UbjhccFo/vZKT9AkBTj7cuW43OV+DNbHXwX2JsQmkgdQ7OSWmF3977eCyh9aidZCb7agOh9TY5TrZtlYPDhxPWWkjrV0RYUFnxnTs70gZt6JX3P7l/uMy59ClxOGeCmDBGmZeKMLqVQrbERy7A11XCTKA2pdMxk9JZarknyqssGXQolhR5v2lyxUnkx472Popj3ypx/pxj3zm4iT2uepj72KU9TL2mbkll2Ho4nPc76Lqd1eq3WXHYq/dmPCj6suqTn8fF2nKRet4eu5DCcdFH49NB9GoefSpqVFsSPOIlRmdBddO0Cq4nUlRa7u9g7VVg81dquXPj75WrEOrMi/XwU1ux+8n//F3onbVmSfMOvWffJ86v4IOcUHQUtK/HYswl1HlW4MAAAAASUVORK5CYII=",alt:"Profile Picture",className:"profile-picture"})},{title:"First Name",dataIndex:"first_name",key:"first_name"},{title:"Last Name",dataIndex:"last_name",key:"last_name"},{title:"Address",dataIndex:"address",key:"address"},{title:"City",dataIndex:"city",key:"city"},{title:"State Province",dataIndex:"state_province",key:"state_province"},{title:"Zip Code",dataIndex:"zip_postal_code",key:"zip_postal_code"},{title:"View Routes",key:"view_routes",render:(t,e)=>{const r="Rider"===n?e.rider_id:e.driver_id;return(0,lr.jsx)("button",{className:"view-routes-button",onClick:()=>{return t=r,void("Rider"===n?h(`/Rroutes?rider_id=${t}`):"Driver"===n&&h(`/Droutes?driver_id=${t}`));var t},children:"View Routes"})}},{title:"Edit Profile",key:"edit_profile",render:(t,e)=>{const r="Rider"===n?e.rider_id:e.driver_id;return"Rider"===n?(0,lr.jsx)(pw,{item:e,onData:t=>y(r,t),onDelete:()=>v(r)}):(0,lr.jsx)(fw,{item:e,onData:t=>y(r,t),onDelete:()=>v(r)})}}];return"Driver"===n&&_.splice(8,0,{title:"Capacity",dataIndex:"capacity",key:"capacity"},{title:"Description",dataIndex:"description",key:"description"}),(0,lr.jsx)(lr.Fragment,{children:(0,lr.jsxs)("div",{className:"dashboard-content",children:[(0,lr.jsx)(xr,{btnText:"Refresh"}),(0,lr.jsxs)("div",{className:"dashboard-content-container",children:[(0,lr.jsxs)("div",{className:"dashboard-content-header",children:[(0,lr.jsx)("h2",{children:"Rider"===n?"Riders":"Drivers"}),(0,lr.jsx)(lg,{onData:async t=>{console.log("Uploading",t);try{let e;const r=new FormData;r.append("file",t),"Rider"===n?e=await Pn.post("/api/v1/rider/batchimport",r,{headers:{Cookies:jt.get("admin_cookie"),"Content-Type":"multipart/form-data"}}):"Driver"===n&&(e=await Pn.post("/api/v1/driver/batchimport",r,{headers:{Cookies:jt.get("admin_cookie"),"Content-Type":"multipart/form-data"}})),200===e.status&&(sr.success("Data uploaded successfully"),d())}catch(e){console.error("Error Uploading data:",e),403===e.response.status&&"Access denied"===e.response.data?sr.error("Access denied"):400===e.response.status?sr.error("Error: "+e.response.message):500===e.response.status?sr.error("Server Error: "+e.response.message):sr.error("Failed to Upload data")}}}),"Rider"===n?(0,lr.jsx)(Vb,{onData:g}):(0,lr.jsx)(Gb,{onData:g}),(0,lr.jsx)("div",{className:"dashboard-content-dropdown",children:(0,lr.jsxs)("select",{value:n,onChange:t=>{r(t.target.value)},children:[(0,lr.jsx)("option",{value:"Rider",children:"Rider"}),(0,lr.jsx)("option",{value:"Driver",children:"Driver"})]})}),(0,lr.jsx)("div",{className:"dashboard-content-Search",children:(0,lr.jsx)(l,{placeholder:"input search text",allowClear:!0,onSearch:t=>{t&&(u(t),o(1))},style:{width:200}})})]}),(0,lr.jsx)(RR,{columns:_,pagination:!1,rowClassName:(t,e)=>e%2===0?"row-even":"row-odd",dataSource:t,rowKey:t=>t.rider_id||t.driver_id}),(0,lr.jsx)(Kn,{}),(0,lr.jsx)("div",{className:"pagination-container",children:(0,lr.jsx)(Uk,{simple:!0,current:i,total:a,onChange:x})})]})]})})},NR={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},FR=m.createContext&&m.createContext(NR),zR=function(){return zR=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},zR.apply(this,arguments)},BR=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function $R(t){return t&&t.map((function(t,e){return m.createElement(t.tag,zR({key:e},t.attr),$R(t.child))}))}function jR(t){return function(e){return m.createElement(UR,zR({attr:zR({},t.attr)},e),$R(t.child))}}function UR(t){var e=function(e){var n,r=t.attr,i=t.size,o=t.title,a=BR(t,["attr","size","title"]),s=i||e.size||"1em";return e.className&&(n=e.className),t.className&&(n=(n?n+" ":"")+t.className),m.createElement("svg",zR({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,r,a,{className:n,style:zR(zR({color:t.color||e.color},e.style),t.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),o&&m.createElement("title",null,o),t.children)};return void 0!==FR?m.createElement(FR.Consumer,null,(function(t){return e(t)})):e(NR)}function VR(t){return jR({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"g",attr:{fill:"#D1C4E9"},child:[{tag:"path",attr:{d:"M38,7H10C8.9,7,8,7.9,8,9v6c0,1.1,0.9,2,2,2h28c1.1,0,2-0.9,2-2V9C40,7.9,39.1,7,38,7z"}},{tag:"path",attr:{d:"M38,19H10c-1.1,0-2,0.9-2,2v6c0,1.1,0.9,2,2,2h28c1.1,0,2-0.9,2-2v-6C40,19.9,39.1,19,38,19z"}},{tag:"path",attr:{d:"M38,31H10c-1.1,0-2,0.9-2,2v6c0,1.1,0.9,2,2,2h28c1.1,0,2-0.9,2-2v-6C40,31.9,39.1,31,38,31z"}}]},{tag:"circle",attr:{fill:"#F44336",cx:"38",cy:"38",r:"10"}},{tag:"g",attr:{fill:"#fff"},child:[{tag:"rect",attr:{x:"36.5",y:"32",transform:"matrix(-.707 .707 -.707 -.707 91.74 38)",width:"3",height:"12"}},{tag:"rect",attr:{x:"36.5",y:"32",transform:"matrix(-.707 -.707 .707 -.707 38 91.74)",width:"3",height:"12"}}]}]})(t)}const HR=Object.create(null);HR.open="0",HR.close="1",HR.ping="2",HR.pong="3",HR.message="4",HR.upgrade="5",HR.noop="6";const GR=Object.create(null);Object.keys(HR).forEach((t=>{GR[HR[t]]=t}));const WR={type:"error",data:"parser error"},XR="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),qR="function"===typeof ArrayBuffer,YR=(t,e)=>{const n=new FileReader;return n.onload=function(){const t=n.result.split(",")[1];e("b"+(t||""))},n.readAsDataURL(t)};var ZR=(t,e,n)=>{let{type:r,data:i}=t;return XR&&i instanceof Blob?e?n(i):YR(i,n):qR&&(i instanceof ArrayBuffer||(o=i,"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(o):o&&o.buffer instanceof ArrayBuffer))?e?n(i):YR(new Blob([i]),n):n(HR[r]+(i||""));var o};const KR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",JR="undefined"===typeof Uint8Array?[]:new Uint8Array(256);for(let n=0;n<64;n++)JR[KR.charCodeAt(n)]=n;const QR="function"===typeof ArrayBuffer,tL=(t,e)=>{if(QR){const n=(t=>{let e,n,r,i,o,a=.75*t.length,s=t.length,l=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);const c=new ArrayBuffer(a),u=new Uint8Array(c);for(e=0;e<s;e+=4)n=JR[t.charCodeAt(e)],r=JR[t.charCodeAt(e+1)],i=JR[t.charCodeAt(e+2)],o=JR[t.charCodeAt(e+3)],u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|i>>2,u[l++]=(3&i)<<6|63&o;return c})(t);return eL(n,e)}return{base64:!0,data:t}},eL=(t,e)=>"blob"===e&&t instanceof ArrayBuffer?new Blob([t]):t;var nL=(t,e)=>{if("string"!==typeof t)return{type:"message",data:eL(t,e)};const n=t.charAt(0);if("b"===n)return{type:"message",data:tL(t.substring(1),e)};return GR[n]?t.length>1?{type:GR[n],data:t.substring(1)}:{type:GR[n]}:WR};const rL=String.fromCharCode(30);function iL(t){if(t)return function(t){for(var e in iL.prototype)t[e]=iL.prototype[e];return t}(t)}iL.prototype.on=iL.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},iL.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},iL.prototype.off=iL.prototype.removeListener=iL.prototype.removeAllListeners=iL.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i=0;i<r.length;i++)if((n=r[i])===e||n.fn===e){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+t],this},iL.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,e)}return this},iL.prototype.emitReserved=iL.prototype.emit,iL.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},iL.prototype.hasListeners=function(t){return!!this.listeners(t).length};const oL="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function aL(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce(((e,n)=>(t.hasOwnProperty(n)&&(e[n]=t[n]),e)),{})}const sL=oL.setTimeout,lL=oL.clearTimeout;function cL(t,e){e.useNativeTimers?(t.setTimeoutFn=sL.bind(oL),t.clearTimeoutFn=lL.bind(oL)):(t.setTimeoutFn=oL.setTimeout.bind(oL),t.clearTimeoutFn=oL.clearTimeout.bind(oL))}class uL extends Error{constructor(t,e,n){super(t),this.description=e,this.context=n,this.type="TransportError"}}class hL extends iL{constructor(t){super(),this.writable=!1,cL(this,t),this.opts=t,this.query=t.query,this.socket=t.socket}onError(t,e,n){return super.emitReserved("error",new uL(t,e,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=nL(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}}const pL="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),dL=64,fL={};let gL,mL=0,yL=0;function vL(t){let e="";do{e=pL[t%dL]+e,t=Math.floor(t/dL)}while(t>0);return e}function xL(){const t=vL(+new Date);return t!==gL?(mL=0,gL=t):t+"."+vL(mL++)}for(;yL<dL;yL++)fL[pL[yL]]=yL;function _L(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}let bL=!1;try{bL="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(Mft){}const wL=bL;function SL(t){const e=t.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!e||wL))return new XMLHttpRequest}catch(kg){}if(!e)try{return new(oL[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(kg){}}function CL(){}const EL=null!=new SL({xdomain:!1}).responseType;class kL extends iL{constructor(t,e){super(),cL(this,e),this.opts=e,this.method=e.method||"GET",this.uri=t,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.create()}create(){const t=aL(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const e=this.xhr=new SL(t);try{e.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(let t in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(t)&&e.setRequestHeader(t,this.opts.extraHeaders[t])}}catch(kg){}if("POST"===this.method)try{e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(kg){}try{e.setRequestHeader("Accept","*/*")}catch(kg){}"withCredentials"in e&&(e.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(e.timeout=this.opts.requestTimeout),e.onreadystatechange=()=>{4===e.readyState&&(200===e.status||1223===e.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"===typeof e.status?e.status:0)}),0))},e.send(this.data)}catch(kg){return void this.setTimeoutFn((()=>{this.onError(kg)}),0)}"undefined"!==typeof document&&(this.index=kL.requestsCount++,kL.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=CL,t)try{this.xhr.abort()}catch(kg){}"undefined"!==typeof document&&delete kL.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;null!==t&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if(kL.requestsCount=0,kL.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",ML);else if("function"===typeof addEventListener){addEventListener("onpagehide"in oL?"pagehide":"unload",ML,!1)}function ML(){for(let t in kL.requests)kL.requests.hasOwnProperty(t)&&kL.requests[t].abort()}const TL="function"===typeof Promise&&"function"===typeof Promise.resolve?t=>Promise.resolve().then(t):(t,e)=>e(t,0),IL=oL.WebSocket||oL.MozWebSocket,PL="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();const OL={websocket:class extends hL{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,n=PL?{}:aL(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=PL?new IL(t,e,n):e?new IL(t,e):new IL(t)}catch(Mft){return this.emitReserved("error",Mft)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const n=t[e],r=e===t.length-1;ZR(n,this.supportsBinary,(t=>{try{this.ws.send(t)}catch(kg){}r&&TL((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){"undefined"!==typeof this.ws&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const e=this.opts.secure?"wss":"ws";let n="";this.opts.port&&("wss"===e&&443!==Number(this.opts.port)||"ws"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=xL()),this.supportsBinary||(t.b64=1);const r=_L(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}check(){return!!IL}},polling:class extends hL{constructor(t){if(super(t),this.polling=!1,"undefined"!==typeof location){const e="https:"===location.protocol;let n=location.port;n||(n=e?"443":"80"),this.xd="undefined"!==typeof location&&t.hostname!==location.hostname||n!==t.port,this.xs=t.secure!==e}const e=t&&t.forceBase64;this.supportsBinary=EL&&!e}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let t=0;this.polling&&(t++,this.once("pollComplete",(function(){--t||e()}))),this.writable||(t++,this.once("drain",(function(){--t||e()})))}else e()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){((t,e)=>{const n=t.split(rL),r=[];for(let i=0;i<n.length;i++){const t=nL(n[i],e);if(r.push(t),"error"===t.type)break}return r})(t,this.socket.binaryType).forEach((t=>{if("opening"===this.readyState&&"open"===t.type&&this.onOpen(),"close"===t.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}write(t){this.writable=!1,((t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach(((t,o)=>{ZR(t,!1,(t=>{r[o]=t,++i===n&&e(r.join(rL))}))}))})(t,(t=>{this.doWrite(t,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){let t=this.query||{};const e=this.opts.secure?"https":"http";let n="";!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=xL()),this.supportsBinary||t.sid||(t.b64=1),this.opts.port&&("https"===e&&443!==Number(this.opts.port)||"http"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);const r=_L(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}request(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new kL(this.uri(),t)}doWrite(t,e){const n=this.request({method:"POST",data:t});n.on("success",e),n.on("error",((t,e)=>{this.onError("xhr post error",t,e)}))}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",((t,e)=>{this.onError("xhr poll error",t,e)})),this.pollXhr=t}}},AL=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,DL=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function RL(t){const e=t,n=t.indexOf("["),r=t.indexOf("]");-1!=n&&-1!=r&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=AL.exec(t||""),o={},a=14;for(;a--;)o[DL[a]]=i[a]||"";return-1!=n&&-1!=r&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=function(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");"/"!=e.slice(0,1)&&0!==e.length||r.splice(0,1);"/"==e.slice(-1)&&r.splice(r.length-1,1);return r}(0,o.path),o.queryKey=function(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,r){e&&(n[e]=r)})),n}(0,o.query),o}class LL extends iL{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.writeBuffer=[],t&&"object"===typeof t&&(e=t,t=null),t?(t=RL(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=RL(e.host).host),cL(this,e),this.secure=null!=e.secure?e.secure:"undefined"!==typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!==typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"===typeof this.opts.query&&(this.opts.query=function(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let t=n[r].split("=");e[decodeURIComponent(t[0])]=decodeURIComponent(t[1])}return e}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"===typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=4,e.transport=t,this.id&&(e.sid=this.id);const n=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new OL[t](n)}open(){let t;if(this.opts.rememberUpgrade&&LL.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(kg){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(t=>this.onClose("transport close",t)))}probe(t){let e=this.createTransport(t),n=!1;LL.priorWebsocketSuccess=!1;const r=()=>{n||(e.send([{type:"ping",data:"probe"}]),e.once("packet",(t=>{if(!n)if("pong"===t.type&&"probe"===t.data){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;LL.priorWebsocketSuccess="websocket"===e.name,this.transport.pause((()=>{n||"closed"!==this.readyState&&(c(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())}))}else{const t=new Error("probe error");t.transport=e.name,this.emitReserved("upgradeError",t)}})))};function i(){n||(n=!0,c(),e.close(),e=null)}const o=t=>{const n=new Error("probe error: "+t);n.transport=e.name,i(),this.emitReserved("upgradeError",n)};function a(){o("transport closed")}function s(){o("socket closed")}function l(t){e&&t.name!==e.name&&i()}const c=()=>{e.removeListener("open",r),e.removeListener("error",o),e.removeListener("close",a),this.off("close",s),this.off("upgrading",l)};e.once("open",r),e.once("error",o),e.once("close",a),this.once("close",s),this.once("upgrading",l),e.open()}onOpen(){if(this.readyState="open",LL.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade){let t=0;const e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let n=0;n<this.writeBuffer.length;n++){const r=this.writeBuffer[n].data;if(r&&(t+="string"===typeof(e=r)?function(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}(e):Math.ceil(1.33*(e.byteLength||e.size))),n>0&&t>this.maxPayload)return this.writeBuffer.slice(0,n);t+=2}var e;return this.writeBuffer}write(t,e,n){return this.sendPacket("message",t,e,n),this}send(t,e,n){return this.sendPacket("message",t,e,n),this}sendPacket(t,e,n,r){if("function"===typeof e&&(r=e,e=void 0),"function"===typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const i={type:t,data:e,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},n=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():t()})):this.upgrading?n():t()),this}onError(t){LL.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"===typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const e=[];let n=0;const r=t.length;for(;n<r;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}}LL.protocol=4;LL.protocol;const NL="function"===typeof ArrayBuffer,FL=t=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,zL=Object.prototype.toString,BL="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===zL.call(Blob),$L="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===zL.call(File);function jL(t){return NL&&(t instanceof ArrayBuffer||FL(t))||BL&&t instanceof Blob||$L&&t instanceof File}function UL(t,e){if(!t||"object"!==typeof t)return!1;if(Array.isArray(t)){for(let e=0,n=t.length;e<n;e++)if(UL(t[e]))return!0;return!1}if(jL(t))return!0;if(t.toJSON&&"function"===typeof t.toJSON&&1===arguments.length)return UL(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&UL(t[n]))return!0;return!1}function VL(t){const e=[],n=t.data,r=t;return r.data=HL(n,e),r.attachments=e.length,{packet:r,buffers:e}}function HL(t,e){if(!t)return t;if(jL(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=HL(t[r],e);return n}if("object"===typeof t&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=HL(t[r],e));return n}return t}function GL(t,e){return t.data=WL(t.data,e),delete t.attachments,t}function WL(t,e){if(!t)return t;if(t&&!0===t._placeholder){if("number"===typeof t.num&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=WL(t[n],e);else if("object"===typeof t)for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=WL(t[n],e));return t}const XL=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],qL=5;var YL;!function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(YL||(YL={}));class ZL{constructor(t){this.replacer=t}encode(t){return t.type!==YL.EVENT&&t.type!==YL.ACK||!UL(t)?[this.encodeAsString(t)]:this.encodeAsBinary({type:t.type===YL.EVENT?YL.BINARY_EVENT:YL.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id})}encodeAsString(t){let e=""+t.type;return t.type!==YL.BINARY_EVENT&&t.type!==YL.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=VL(t),n=this.encodeAsString(e.packet),r=e.buffers;return r.unshift(n),r}}function KL(t){return"[object Object]"===Object.prototype.toString.call(t)}class JL extends iL{constructor(t){super(),this.reviver=t}add(t){let e;if("string"===typeof t){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);const n=e.type===YL.BINARY_EVENT;n||e.type===YL.BINARY_ACK?(e.type=n?YL.EVENT:YL.ACK,this.reconstructor=new QL(e),0===e.attachments&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else{if(!jL(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e))}}decodeString(t){let e=0;const n={type:Number(t.charAt(0))};if(void 0===YL[n.type])throw new Error("unknown packet type "+n.type);if(n.type===YL.BINARY_EVENT||n.type===YL.BINARY_ACK){const r=e+1;for(;"-"!==t.charAt(++e)&&e!=t.length;);const i=t.substring(r,e);if(i!=Number(i)||"-"!==t.charAt(e))throw new Error("Illegal attachments");n.attachments=Number(i)}if("/"===t.charAt(e+1)){const r=e+1;for(;++e;){if(","===t.charAt(e))break;if(e===t.length)break}n.nsp=t.substring(r,e)}else n.nsp="/";const r=t.charAt(e+1);if(""!==r&&Number(r)==r){const r=e+1;for(;++e;){const n=t.charAt(e);if(null==n||Number(n)!=n){--e;break}if(e===t.length)break}n.id=Number(t.substring(r,e+1))}if(t.charAt(++e)){const r=this.tryParse(t.substr(e));if(!JL.isPayloadValid(n.type,r))throw new Error("invalid payload");n.data=r}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch(kg){return!1}}static isPayloadValid(t,e){switch(t){case YL.CONNECT:return KL(e);case YL.DISCONNECT:return void 0===e;case YL.CONNECT_ERROR:return"string"===typeof e||KL(e);case YL.EVENT:case YL.BINARY_EVENT:return Array.isArray(e)&&("number"===typeof e[0]||"string"===typeof e[0]&&-1===XL.indexOf(e[0]));case YL.ACK:case YL.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class QL{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const t=GL(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function tN(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const eN=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class nN extends iL{constructor(t,e,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[tN(t,"open",this.onopen.bind(this)),tN(t,"packet",this.onpacket.bind(this)),tN(t,"error",this.onerror.bind(this)),tN(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.unshift("message"),this.emit.apply(this,e),this}emit(t){if(eN.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const i={type:YL.EVENT,data:n,options:{}};if(i.options.compress=!1!==this.flags.compress,"function"===typeof n[n.length-1]){const t=this.ids++,e=n.pop();this._registerAckCallback(t,e),i.id=t}const o=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!o||!this.connected)||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(t,e){var n,r=this;const i=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===i)return void(this.acks[t]=e);const o=this.io.setTimeoutFn((()=>{delete this.acks[t];for(let e=0;e<this.sendBuffer.length;e++)this.sendBuffer[e].id===t&&this.sendBuffer.splice(e,1);e.call(this,new Error("operation has timed out"))}),i);this.acks[t]=function(){r.io.clearTimeoutFn(o);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.apply(r,[null,...n])}}emitWithAck(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];const i=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise(((e,r)=>{n.push(((t,n)=>i?t?r(t):e(n):e(t))),this.emit(t,...n)}))}_addToQueue(t){var e=this;let n;"function"===typeof t[t.length-1]&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((function(t){if(r!==e._queue[0])return;if(null!==t)r.tryCount>e._opts.retries&&(e._queue.shift(),n&&n(t));else if(e._queue.shift(),n){for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];n(null,...o)}return r.pending=!1,e._drainQueue()})),this._queue.push(r),this._drainQueue()}_drainQueue(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.connected||0===this._queue.length)return;const e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){"function"==typeof this.auth?this.auth((t=>{this._sendConnectPacket(t)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:YL.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case YL.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case YL.EVENT:case YL.BINARY_EVENT:this.onevent(t);break;case YL.ACK:case YL.BINARY_ACK:this.onack(t);break;case YL.DISCONNECT:this.ondisconnect();break;case YL.CONNECT_ERROR:this.destroy();const e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}onevent(t){const e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const n of e)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&"string"===typeof t[t.length-1]&&(this._lastOffset=t[t.length-1])}ack(t){const e=this;let n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];e.packet({type:YL.ACK,id:t,data:i})}}}onack(t){const e=this.acks[t.id];"function"===typeof e&&(e.apply(this,t.data),delete this.acks[t.id])}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((t=>this.emitEvent(t))),this.receiveBuffer=[],this.sendBuffer.forEach((t=>{this.notifyOutgoingListeners(t),this.packet(t)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((t=>t())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:YL.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const n of e)n.apply(this,t.data)}}}function rN(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}rN.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},rN.prototype.reset=function(){this.attempts=0},rN.prototype.setMin=function(t){this.ms=t},rN.prototype.setMax=function(t){this.max=t},rN.prototype.setJitter=function(t){this.jitter=t};class iN extends iL{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&"object"===typeof e&&(n=e,e=void 0),(n=n||{}).path=n.path||"/socket.io",this.opts=n,cL(this,n),this.reconnection(!1!==n.reconnection),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=n.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new rN({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==n.timeout?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||t;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=!1!==n.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new LL(this.uri,this.opts);const e=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=tN(e,"open",(function(){n.onopen(),t&&t()})),i=tN(e,"error",(e=>{n.cleanup(),n._readyState="closed",this.emitReserved("error",e),t?t(e):n.maybeReconnectOnOpen()}));if(!1!==this._timeout){const t=this._timeout;0===t&&r();const n=this.setTimeoutFn((()=>{r(),e.close(),e.emit("error",new Error("timeout"))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((function(){clearTimeout(n)}))}return this.subs.push(r),this.subs.push(i),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(tN(t,"ping",this.onping.bind(this)),tN(t,"data",this.ondata.bind(this)),tN(t,"error",this.onerror.bind(this)),tN(t,"close",this.onclose.bind(this)),tN(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(kg){this.onclose("parse error",kg)}}ondecoded(t){TL((()=>{this.emitReserved("packet",t)}),this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new nN(this,t,e),this.nsps[t]=n),n}_destroy(t){const e=Object.keys(this.nsps);for(const n of e){if(this.nsps[n].active)return}this._close()}_packet(t){const e=this.encoder.encode(t);for(let n=0;n<e.length;n++)this.engine.write(e[n],t.options)}cleanup(){this.subs.forEach((t=>t())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((e=>{e?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",e)):t.onreconnect()})))}),e);this.opts.autoUnref&&n.unref(),this.subs.push((function(){clearTimeout(n)}))}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const oN={};function aN(t,e){"object"===typeof t&&(e=t,t=void 0);const n=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=t;n=n||"undefined"!==typeof location&&location,null==t&&(t=n.protocol+"//"+n.host),"string"===typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(t="undefined"!==typeof n?n.protocol+"//"+t:"https://"+t),r=RL(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+e,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}(t,(e=e||{}).path||"/socket.io"),r=n.source,i=n.id,o=n.path,a=oN[i]&&o in oN[i].nsps;let s;return e.forceNew||e["force new connection"]||!1===e.multiplex||a?s=new iN(r,e):(oN[i]||(oN[i]=new iN(r,e)),s=oN[i]),n.query&&!e.query&&(e.query=n.queryKey),s.socket(n.path,e)}Object.assign(aN,{Manager:iN,Socket:nN,io:aN,connect:aN});var sN=n(7673),lN=n.n(sN);var cN=function(){const[t,e]=(0,m.useState)(""),[n,r]=(0,m.useState)(1),[i,o]=(0,m.useState)([]),[a,s]=(0,m.useState)([]),[l,c]=(0,m.useState)([]),[u,h]=(0,m.useState)([]),[p,d]=(0,m.useState)(!1),[f,g]=(0,m.useState)(""),[y,v]=(0,m.useState)(!1),[x,_]=(0,m.useState)(null),[b,w]=(0,m.useState)(null),[S,C]=(0,m.useState)(null),[E,k]=(0,m.useState)(null);(0,m.useEffect)((()=>{if(E)return E.on("uploadStatus",(t=>{w(t),localStorage.setItem("uploadStatus",JSON.stringify(t)),t&&"completed"===t.message&&E.close()})),()=>E.close()}),[E]),(0,m.useEffect)((()=>{const t=aN.connect("http://localhost:3300");return k(t),t.on("uploadStatus",(e=>{w(e),localStorage.setItem("uploadStatus",JSON.stringify(e)),e&&"completed"===e.message&&t.close()})),t.emit("sessiontoken",jt.get("admin_cookie")),()=>t.close()}),[]),(0,m.useEffect)((()=>{const t=localStorage.getItem("uploadStatus");t&&w(JSON.parse(t)),(async()=>{try{const t=await Pn.get("/api/v1/nodes/batch-import/status",{headers:{Cookies:jt.get("admin_cookie")}});w(t.data),"completed"===t.data.message?localStorage.removeItem("uploadStatus"):"error"===t.data.message&&localStorage.setItem("uploadStatus",JSON.stringify({message:"error"}))}catch(t){console.error(t)}})()}),[]);const[M,T]=(0,m.useState)("");(0,m.useEffect)((()=>{(async()=>{try{let t=await Pn.get("/api/v1/admin/role",{headers:{Cookies:jt.get("admin_cookie")}});T(t.data.currentRole)}catch(t){console.error("Error fetching data:",t)}})()}),[]);const I=ht();(0,m.useEffect)((()=>{(async()=>{try{const t=await Pn.get("/api/v1/admin/check-login",{headers:{Cookies:jt.get("admin_cookie")}});if(200===t.status){const{alreadyLoggedIn:e}=t.data;e||(sr.error("You are not logged in"),I("/"))}}catch(t){console.error(t),sr.error("Server Error: "+t.message)}})()}),[]),(0,m.useEffect)((()=>{(async()=>{try{const t=await Pn.get("/api/v1/database/table-stats",{headers:{Cookies:jt.get("admin_cookie")}});s(t.data.stats),c(t.data.stats)}catch(t){console.error("Error fetching table stats:",t),t.response&&500===t.response.status?sr.error("Server Error: "+t.response.data):sr.error("Error fetching table stats")}})()}),[]);const P=()=>{Hh.error("Deletion Failed")};(0,m.useEffect)((()=>{(()=>{const t=Math.ceil(a.length/5),e=Array.from({length:t},((t,e)=>e+1));o(e)})()}),[a]),(0,m.useEffect)((()=>{const t=5*(n-1),e=t+5,r=a.slice(t,e);c(r)}),[n,a]),(0,m.useEffect)((()=>{const e=5*(n-1),r=e+5;let i=[];i=""===t?a.slice(e,r):u.slice(e,r),c(i)}),[n,a,t,u]);const O=[{title:"Name",dataIndex:"name",key:"name"},{title:"Number of Rows",dataIndex:"count",key:"count"},{title:"Storage Consumption",dataIndex:"usage",key:"usage",render:t=>`${t} Bytes`},{title:"Purge",dataIndex:"name",key:"purge",render:t=>(0,lr.jsx)(uw,{title:"Delete",description:"Are you sure you want to delete this table and all its contents?",onConfirm:()=>(async t=>{try{const e=[t];200===(await Pn.post("/api/v1/database/purge-tables",{purgeTableList:e},{headers:{Cookies:jt.get("admin_cookie")}})).status&&(sr.success("Table deleted successfully!"),s((e=>e.filter((e=>e.name!==t)))),c((e=>e.filter((e=>e.name!==t)))))}catch(e){console.error("Error deleting table:",e),e.response&&400===e.response.status?sr.error("Failed to delete table. Other Tables depend on this table"):e.response&&403===e.response.status&&"Only Super Admin can perform this operation"===e.response.data?sr.error("Only Super Admin can perform this operation"):e.response&&500===e.response.status?sr.error("Server Error: "+e.response.data):sr.error("Error deleting table")}})(t),onCancel:P,okText:"Yes",cancelText:"No",children:(0,lr.jsx)(id,{danger:!0,children:(0,lr.jsx)(VR,{})})})},{title:"Upload",dataIndex:"name",key:"upload",render:(t,e)=>"nodes"===e.name?b&&"completed"===b.message?(0,lr.jsx)(id,{onClick:()=>(g(t),void d(!0)),children:"Upload CSV"}):(0,lr.jsx)("span",{children:b?b.message:"-"}):"-"}];return(0,lr.jsx)(lr.Fragment,{children:(0,lr.jsxs)("div",{className:"dashboard-content",children:[(0,lr.jsx)(xr,{btnText:"Refresh"}),(0,lr.jsxs)("div",{className:"dashboard-content-container",children:[(0,lr.jsxs)("div",{className:"dashboard-content-header",children:[(0,lr.jsx)("h2",{children:"DataBase Summary"}),(0,lr.jsx)("div",{className:"dashboard-content-search",children:(0,lr.jsx)("input",{type:"text",value:t,placeholder:"Search..",className:"dashboard-content-input",onChange:t=>{const i=t.target.value.toLowerCase();if(e(i),""===i){const t=5,e=Math.ceil(a.length/t),r=Array.from({length:e},((t,e)=>e+1));o(r);const i=(n-1)*t,s=i+t,l=a.slice(i,s);c(l),h([])}else{const t=a.filter((t=>t.name.toLowerCase().includes(i))),e=5,n=Math.ceil(t.length/e),s=Array.from({length:n},((t,e)=>e+1));o(s),c(t.slice(0,e)),h(t),r(1)}}})})]}),(0,lr.jsx)(RR,{columns:O,dataSource:l,pagination:!1,rowClassName:(t,e)=>e%2===0?"row-even":"row-odd",rowKey:"name"}),(0,lr.jsxs)(ig,{title:"Upload CSV",visible:p,onOk:async()=>{if(null===x)return void Hh.error("No CSV file selected!");let t;const e=new FormData;e.append("file",new Blob([x.join("\n")],{type:"text/csv"}));const n=aN.connect("http://localhost:3300");k(n),n.on("uploadStatus",(t=>{w(t),localStorage.setItem("uploadStatus",JSON.stringify(t)),t&&"completed"===t.message&&(Hh.success("Data Uploaded"),n.close())})),n.emit("sessiontoken",jt.get("admin_cookie"));try{t=await Pn.post("/api/v1/nodes/batch-import",e,{headers:{Cookies:jt.get("admin_cookie"),"Content-Type":"multipart/form-data"}}),d(!1),200===t.status&&w({message:"Processing"})}catch(r){console.error(r),Hh.error("Error Please upload Node file")}},onCancel:()=>{d(!1)},children:[(0,lr.jsxs)("p",{children:["Select a CSV file to upload for table ",f,":"]}),(0,lr.jsx)(lN(),{onFileLoaded:(t,e)=>{console.log(t),_(t)}})]}),(0,lr.jsx)(Kn,{}),0!==i.length&&(0,lr.jsx)("div",{className:"dashboard-content-footer",children:i.map(((t,e)=>(0,lr.jsx)("span",{className:t===n?"active-pagination":"pagination",onClick:()=>{r(t)},children:t},e)))})]})]})})},uN={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"},hN=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:uN}))};var pN=m.forwardRef(hN),dN={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},fN=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:dN}))};var gN=m.forwardRef(fN),mN={icon:function(t,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M81.8 537.8a60.3 60.3 0 010-51.5C176.6 286.5 319.8 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c-192.1 0-335.4-100.5-430.2-300.2z",fill:e}},{tag:"path",attrs:{d:"M512 258c-161.3 0-279.4 81.8-362.7 254C232.6 684.2 350.7 766 512 766c161.4 0 279.5-81.8 362.7-254C791.4 339.8 673.3 258 512 258zm-4 430c-97.2 0-176-78.8-176-176s78.8-176 176-176 176 78.8 176 176-78.8 176-176 176z",fill:e}},{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258s279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766z",fill:t}},{tag:"path",attrs:{d:"M508 336c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z",fill:t}}]}},name:"eye",theme:"twotone"},yN=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:mN}))};var vN=m.forwardRef(yN),xN=n.p+"static/media/login.c7bc28a8f0d5e9253e08.png";const _N=cv.Item;var bN=function(){const t=ht();(0,m.useEffect)((()=>{(async()=>{try{!0===(await Pn.get("/api/v1/admin/check-login",{headers:{Cookies:jt.get("admin_cookie")}})).data.alreadyLoggedIn&&(sr.success("Already Logged In"),t("/summary"))}catch(e){e.response&&500===e.response.status?sr.error("Server Error: "+e.response.data):sr.error("Failed to fetch data")}})()}),[]);const[e]=cv.useForm();return(0,lr.jsxs)("div",{className:"login-container",children:[(0,lr.jsx)("div",{className:"login-header",children:(0,lr.jsx)("img",{src:xN,alt:"Login",className:"login-header-image"})}),(0,lr.jsx)("div",{className:"login-form-container",children:(0,lr.jsxs)(cv,{form:e,onFinish:async e=>{try{const n=await Pn.post("/api/v1/user/login",{userEmail:e.userName,password:e.password},{headers:{Cookies:jt.get("admin_cookie")}});200===n.status?("Already Authorized"!=n.data.message?(jt.set("admin_cookie",n.data.cookie,{expires:new Date((new Date).getTime()+36e5),path:"/"}),sr.success("Login successful!",{position:sr.POSITION.TOP_CENTER,autoClose:3e3,hideProgressBar:!0,closeButton:!1,className:"toast-success",bodyClassName:"toast-body"})):"Already Authorized"===n.data.message&&sr.success("Already Authorized",{position:sr.POSITION.TOP_CENTER,autoClose:3e3,hideProgressBar:!0,closeButton:!1,className:"toast-success",bodyClassName:"toast-body"}),setTimeout((()=>{t("/summary")}),1e3)):sr.error(n.data.error||"Invalid username or password",{position:sr.POSITION.TOP_CENTER,autoClose:3e3,hideProgressBar:!0,closeButton:!1,className:"toast-error",bodyClassName:"toast-body"})}catch(n){console.error(n),sr.error("An error occurred. Please try again later.",{position:sr.POSITION.TOP_CENTER,autoClose:3e3,hideProgressBar:!0,closeButton:!1,className:"toast-error",bodyClassName:"toast-body"})}},className:"login-form",children:[(0,lr.jsx)(_N,{name:"userName",rules:[{required:!0,message:"Please enter your username"}],children:(0,lr.jsx)(ob,{prefix:(0,lr.jsx)(pN,{style:{color:"#015C92"}}),placeholder:"Username"})}),(0,lr.jsx)(_N,{name:"password",rules:[{required:!0,message:"Please enter your Password"}],children:(0,lr.jsx)(ob.Password,{prefix:(0,lr.jsx)(gN,{style:{color:"#015C92"}}),placeholder:"Password",iconRender:t=>t?(0,lr.jsx)(vN,{}):(0,lr.jsx)(O_,{})})}),(0,lr.jsx)(_N,{children:(0,lr.jsx)(id,{type:"primary",htmlType:"submit",className:"login-form-button",children:"Log in"})})]})}),(0,lr.jsx)(Kn,{})]})},wN=n(7892),SN=n.n(wN),CN=n(4334),EN=n.n(CN),kN=n(4036),MN=n.n(kN),TN=n(9216),IN=n.n(TN),PN=n(4834),ON=n.n(PN),AN=n(776),DN=n.n(AN),RN=n(8808),LN=n.n(RN);SN().extend(LN()),SN().extend(DN()),SN().extend(EN()),SN().extend(MN()),SN().extend(IN()),SN().extend(ON()),SN().extend((function(t,e){var n=e.prototype,r=n.format;n.format=function(t){var e=(t||"").replace("Wo","wo");return r.bind(this)(e)}}));var NN={bn_BD:"bn-bd",by_BY:"be",en_GB:"en-gb",en_US:"en",fr_BE:"fr",fr_CA:"fr-ca",hy_AM:"hy-am",kmr_IQ:"ku",nl_BE:"nl-be",pt_BR:"pt-br",zh_CN:"zh-cn",zh_HK:"zh-hk",zh_TW:"zh-tw"},FN=function(t){return NN[t]||t.split("_")[0]},zN=function(){ei(!1,"Not match any format. Please help to fire a issue about this.")},BN={getNow:function(){return SN()()},getFixedDate:function(t){return SN()(t,["YYYY-M-DD","YYYY-MM-DD"])},getEndDate:function(t){return t.endOf("month")},getWeekDay:function(t){var e=t.locale("en");return e.weekday()+e.localeData().firstDayOfWeek()},getYear:function(t){return t.year()},getMonth:function(t){return t.month()},getDate:function(t){return t.date()},getHour:function(t){return t.hour()},getMinute:function(t){return t.minute()},getSecond:function(t){return t.second()},addYear:function(t,e){return t.add(e,"year")},addMonth:function(t,e){return t.add(e,"month")},addDate:function(t,e){return t.add(e,"day")},setYear:function(t,e){return t.year(e)},setMonth:function(t,e){return t.month(e)},setDate:function(t,e){return t.date(e)},setHour:function(t,e){return t.hour(e)},setMinute:function(t,e){return t.minute(e)},setSecond:function(t,e){return t.second(e)},isAfter:function(t,e){return t.isAfter(e)},isValidate:function(t){return t.isValid()},locale:{getWeekFirstDay:function(t){return SN()().locale(FN(t)).localeData().firstDayOfWeek()},getWeekFirstDate:function(t,e){return e.locale(FN(t)).weekday(0)},getWeek:function(t,e){return e.locale(FN(t)).week()},getShortWeekDays:function(t){return SN()().locale(FN(t)).localeData().weekdaysMin()},getShortMonths:function(t){return SN()().locale(FN(t)).localeData().monthsShort()},format:function(t,e,n){return e.locale(FN(t)).format(n)},parse:function(t,e,n){for(var r=FN(t),i=0;i<n.length;i+=1){var o=n[i],a=e;if(o.includes("wo")||o.includes("Wo")){for(var s=a.split("-")[0],l=a.split("-")[1],c=SN()(s,"YYYY").startOf("year").locale(r),u=0;u<=52;u+=1){var h=c.add(u,"week");if(h.format("Wo")===l)return h}return zN(),null}var p=SN()(a,o,!0).locale(r);if(p.isValid())return p}return e&&zN(),null}}},$N=BN;var jN={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"}}]},name:"calendar",theme:"outlined"},UN=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:jN}))};var VN=m.forwardRef(UN),HN={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"},GN=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:HN}))};var WN=m.forwardRef(GN),XN={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M873.1 596.2l-164-208A32 32 0 00684 376h-64.8c-6.7 0-10.4 7.7-6.3 13l144.3 183H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h695.9c26.8 0 41.7-30.8 25.2-51.8z"}}]},name:"swap-right",theme:"outlined"},qN=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:XN}))};var YN=m.forwardRef(qN),ZN=m.createContext({}),KN={visibility:"hidden"};var JN=function(t){var e=t.prefixCls,n=t.prevIcon,r=void 0===n?"\u2039":n,i=t.nextIcon,o=void 0===i?"\u203a":i,a=t.superPrevIcon,s=void 0===a?"\xab":a,l=t.superNextIcon,c=void 0===l?"\xbb":l,u=t.onSuperPrev,h=t.onSuperNext,p=t.onPrev,d=t.onNext,f=t.children,g=m.useContext(ZN),y=g.hideNextBtn,v=g.hidePrevBtn;return m.createElement("div",{className:e},u&&m.createElement("button",{type:"button",onClick:u,tabIndex:-1,className:"".concat(e,"-super-prev-btn"),style:v?KN:{}},s),p&&m.createElement("button",{type:"button",onClick:p,tabIndex:-1,className:"".concat(e,"-prev-btn"),style:v?KN:{}},r),m.createElement("div",{className:"".concat(e,"-view")},f),d&&m.createElement("button",{type:"button",onClick:d,tabIndex:-1,className:"".concat(e,"-next-btn"),style:y?KN:{}},o),h&&m.createElement("button",{type:"button",onClick:h,tabIndex:-1,className:"".concat(e,"-super-next-btn"),style:y?KN:{}},c))};var QN=function(t){var e=t.prefixCls,n=t.generateConfig,r=t.viewDate,i=t.onPrevDecades,o=t.onNextDecades;if(m.useContext(ZN).hideHeader)return null;var a="".concat(e,"-header"),s=n.getYear(r),l=Math.floor(s/gF)*gF,c=l+gF-1;return m.createElement(JN,Ui({},t,{prefixCls:a,onSuperPrev:i,onSuperNext:o}),l,"-",c)};function tF(t,e,n,r,i){var o=t.setHour(e,n);return o=t.setMinute(o,r),o=t.setSecond(o,i)}function eF(t,e,n){if(!n)return e;var r=e;return r=t.setHour(r,t.getHour(n)),r=t.setMinute(r,t.getMinute(n)),r=t.setSecond(r,t.getSecond(n))}function nF(t,e){var n=t.getYear(e),r=t.getMonth(e)+1,i=t.getEndDate(t.getFixedDate("".concat(n,"-").concat(r,"-01"))),o=t.getDate(i),a=r<10?"0".concat(r):"".concat(r);return"".concat(n,"-").concat(a,"-").concat(o)}function rF(t){for(var e=t.prefixCls,n=t.disabledDate,r=t.onSelect,i=t.picker,o=t.rowNum,a=t.colNum,s=t.prefixColumn,l=t.rowClassName,c=t.baseDate,u=t.getCellClassName,h=t.getCellText,p=t.getCellNode,d=t.getCellDate,f=t.generateConfig,g=t.titleCell,y=t.headerCells,v=m.useContext(ZN),x=v.onDateMouseEnter,_=v.onDateMouseLeave,b=v.mode,w="".concat(e,"-cell"),S=[],C=0;C<o;C+=1){for(var E=[],k=void 0,M=function(){var t,e=d(c,C*a+T),o=IF({cellDate:e,mode:b,disabledDate:n,generateConfig:f});0===T&&(k=e,s&&E.push(s(k)));var l=g&&g(e),y=m.createElement("div",{className:"".concat(w,"-inner")},h(e));E.push(m.createElement("td",{key:T,title:l,className:ic()(w,Or((t={},Ir(t,"".concat(w,"-disabled"),o),Ir(t,"".concat(w,"-start"),1===h(e)||"year"===i&&Number(l)%10===0),Ir(t,"".concat(w,"-end"),l===nF(f,e)||"year"===i&&Number(l)%10===9),t),u(e))),onClick:function(){o||r(e)},onMouseEnter:function(){!o&&x&&x(e)},onMouseLeave:function(){!o&&_&&_(e)}},p?p(e,y):y))},T=0;T<a;T+=1)M();S.push(m.createElement("tr",{key:C,className:l&&l(k)},E))}return m.createElement("div",{className:"".concat(e,"-body")},m.createElement("table",{className:"".concat(e,"-content")},y&&m.createElement("thead",null,m.createElement("tr",null,y)),m.createElement("tbody",null,S)))}var iF=function(t){var e=fF-1,n=t.prefixCls,r=t.viewDate,i=t.generateConfig,o=t.cellRender,a=t.locale,s="".concat(n,"-cell"),l=i.getYear(r),c=Math.floor(l/fF)*fF,u=Math.floor(l/gF)*gF,h=u+gF-1,p=i.setYear(r,u-Math.ceil((12*fF-gF)/2)),d=o?function(t,e){return o(t,{originNode:e,today:i.getNow(),type:"decade",locale:a})}:void 0;return m.createElement(rF,Ui({},t,{rowNum:4,colNum:3,baseDate:p,getCellNode:d,getCellText:function(t){var n=i.getYear(t);return"".concat(n,"-").concat(n+e)},getCellClassName:function(t){var n,r=i.getYear(t),o=r+e;return Ir(n={},"".concat(s,"-in-view"),u<=r&&o<=h),Ir(n,"".concat(s,"-selected"),r===c),n},getCellDate:function(t,e){return i.addYear(t,e*fF)}}))},oF=new Map;function aF(t,e,n){if(oF.get(t)&&cancelAnimationFrame(oF.get(t)),n<=0)oF.set(t,requestAnimationFrame((function(){t.scrollTop=e})));else{var r=(e-t.scrollTop)/n*10;oF.set(t,requestAnimationFrame((function(){t.scrollTop+=r,t.scrollTop!==e&&aF(t,e,n-10)})))}}function sF(t,e){var n=e.onLeftRight,r=e.onCtrlLeftRight,i=e.onUpDown,o=e.onPageUpDown,a=e.onEnter,s=t.which,l=t.ctrlKey,c=t.metaKey;switch(s){case sh.LEFT:if(l||c){if(r)return r(-1),!0}else if(n)return n(-1),!0;break;case sh.RIGHT:if(l||c){if(r)return r(1),!0}else if(n)return n(1),!0;break;case sh.UP:if(i)return i(-1),!0;break;case sh.DOWN:if(i)return i(1),!0;break;case sh.PAGE_UP:if(o)return o(-1),!0;break;case sh.PAGE_DOWN:if(o)return o(1),!0;break;case sh.ENTER:if(a)return a(),!0}return!1}function lF(t,e,n,r){var i=t;if(!i)switch(e){case"time":i=r?"hh:mm:ss a":"HH:mm:ss";break;case"week":i="gggg-wo";break;case"month":i="YYYY-MM";break;case"quarter":i="YYYY-[Q]Q";break;case"year":i="YYYY";break;default:i=n?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD"}return i}function cF(t,e,n){var r="time"===t?8:10,i="function"===typeof e?e(n.getNow()).length:e.length;return Math.max(r,i)+2}var uF=null,hF=new Set;var pF={year:function(t){return"month"===t||"date"===t?"year":t},month:function(t){return"date"===t?"month":t},quarter:function(t){return"month"===t||"date"===t?"quarter":t},week:function(t){return"date"===t?"week":t},time:null,date:null};function dF(t,e){return t.some((function(t){return t&&t.contains(e)}))}var fF=10,gF=10*fF;var mF=function(t){var e=t.prefixCls,n=t.onViewDateChange,r=t.generateConfig,i=t.viewDate,o=t.operationRef,a=t.onSelect,s=t.onPanelChange,l="".concat(e,"-decade-panel");o.current={onKeyDown:function(t){return sF(t,{onLeftRight:function(t){a(r.addYear(i,t*fF),"key")},onCtrlLeftRight:function(t){a(r.addYear(i,t*gF),"key")},onUpDown:function(t){a(r.addYear(i,t*fF*3),"key")},onEnter:function(){s("year",i)}})}};var c=function(t){var e=r.addYear(i,t*gF);n(e),s(null,e)};return m.createElement("div",{className:l},m.createElement(QN,Ui({},t,{prefixCls:e,onPrevDecades:function(){c(-1)},onNextDecades:function(){c(1)}})),m.createElement(iF,Ui({},t,{prefixCls:e,onSelect:function(t){a(t,"mouse"),s("year",t)}})))};function yF(t,e){return!t&&!e||!(!t||!e)&&void 0}function vF(t,e,n){var r=yF(e,n);return"boolean"===typeof r?r:t.getYear(e)===t.getYear(n)}function xF(t,e){return Math.floor(t.getMonth(e)/3)+1}function _F(t,e,n){var r=yF(e,n);return"boolean"===typeof r?r:vF(t,e,n)&&xF(t,e)===xF(t,n)}function bF(t,e,n){var r=yF(e,n);return"boolean"===typeof r?r:vF(t,e,n)&&t.getMonth(e)===t.getMonth(n)}function wF(t,e,n){var r=yF(e,n);return"boolean"===typeof r?r:t.getYear(e)===t.getYear(n)&&t.getMonth(e)===t.getMonth(n)&&t.getDate(e)===t.getDate(n)}function SF(t,e,n,r){var i=yF(n,r);return"boolean"===typeof i?i:t.locale.getWeek(e,n)===t.locale.getWeek(e,r)}function CF(t,e,n){return wF(t,e,n)&&function(t,e,n){var r=yF(e,n);return"boolean"===typeof r?r:t.getHour(e)===t.getHour(n)&&t.getMinute(e)===t.getMinute(n)&&t.getSecond(e)===t.getSecond(n)}(t,e,n)}function EF(t,e,n,r){return!!(e&&n&&r)&&(!wF(t,e,r)&&!wF(t,n,r)&&t.isAfter(r,e)&&t.isAfter(n,r))}function kF(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;switch(e){case"year":return n.addYear(t,10*r);case"quarter":case"month":return n.addYear(t,r);default:return n.addMonth(t,r)}}function MF(t,e){var n=e.generateConfig,r=e.locale,i=e.format;return"function"===typeof i?i(t):n.locale.format(r.locale,t,i)}function TF(t,e){var n=e.generateConfig,r=e.locale,i=e.formatList;return t&&"function"!==typeof i[0]?n.locale.parse(r.locale,t,i):null}function IF(t){var e=t.cellDate,n=t.mode,r=t.disabledDate,i=t.generateConfig;if(!r)return!1;var o=function(t,n,o){for(var a=n;a<=o;){var s=void 0;switch(t){case"date":if(s=i.setDate(e,a),!r(s))return!1;break;case"month":if(!IF({cellDate:s=i.setMonth(e,a),mode:"month",generateConfig:i,disabledDate:r}))return!1;break;case"year":if(!IF({cellDate:s=i.setYear(e,a),mode:"year",generateConfig:i,disabledDate:r}))return!1}a+=1}return!0};switch(n){case"date":case"week":return r(e);case"month":return o("date",1,i.getDate(i.getEndDate(e)));case"quarter":var a=3*Math.floor(i.getMonth(e)/3);return o("month",a,a+2);case"year":return o("month",0,11);case"decade":var s=i.getYear(e),l=Math.floor(s/fF)*fF;return o("year",l,l+fF-1)}}function PF(t,e){var n=e.formatList,r=e.generateConfig,i=e.locale;return qr((function(){if(!t)return[[""],""];for(var e="",o=[],a=0;a<n.length;a+=1){var s=n[a],l=MF(t,{generateConfig:r,locale:i,format:s});o.push(l),0===a&&(e=l)}return[o,e]}),[t,n],(function(t,e){return!CF(r,t[0],e[0])||!ri(t[1],e[1],!0)}))}function OF(t,e){var n=e.formatList,r=e.generateConfig,i=e.locale,o=Ri((0,m.useState)(null),2),a=o[0],s=o[1],l=(0,m.useRef)(null);function c(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];cancelAnimationFrame(l.current),e?s(t):l.current=requestAnimationFrame((function(){s(t)}))}var u=Ri(PF(a,{formatList:n,generateConfig:r,locale:i}),2)[1];function h(){c(null,arguments.length>0&&void 0!==arguments[0]&&arguments[0])}return(0,m.useEffect)((function(){h(!0)}),[t]),(0,m.useEffect)((function(){return function(){return cancelAnimationFrame(l.current)}}),[]),[u,function(t){c(t)},h]}function AF(t){var e=t.open,n=t.value,r=t.isClickOutside,i=t.triggerOpen,o=t.forwardKeyDown,a=t.onKeyDown,s=t.blurToCancel,l=t.onSubmit,c=t.onCancel,u=t.onFocus,h=t.onBlur,p=t.changeOnBlur,d=Ri((0,m.useState)(!1),2),f=d[0],g=d[1],y=Ri((0,m.useState)(!1),2),v=y[0],x=y[1],_=(0,m.useRef)(!1),b=(0,m.useRef)(!1),w=(0,m.useRef)(!1),S={onMouseDown:function(){g(!0),i(!0)},onKeyDown:function(t){if(a(t,(function(){w.current=!0})),!w.current){switch(t.which){case sh.ENTER:return e?!1!==l()&&g(!0):i(!0),void t.preventDefault();case sh.TAB:return void(f&&e&&!t.shiftKey?(g(!1),t.preventDefault()):!f&&e&&!o(t)&&t.shiftKey&&(g(!0),t.preventDefault()));case sh.ESC:return g(!0),void c()}e||[sh.SHIFT].includes(t.which)?f||o(t):i(!0)}},onFocus:function(t){g(!0),x(!0),u&&u(t)},onBlur:function(t){!_.current&&r(document.activeElement)?(s?setTimeout((function(){for(var t=document.activeElement;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;r(t)&&c()}),0):e&&(i(!1),b.current&&l()),x(!1),null===h||void 0===h||h(t)):_.current=!1}};return(0,m.useEffect)((function(){b.current=!1}),[e]),(0,m.useEffect)((function(){b.current=!0}),[n]),(0,m.useEffect)((function(){return t=function(t){var n=function(t){var e,n=t.target;return t.composed&&n.shadowRoot&&(null===(e=t.composedPath)||void 0===e?void 0:e.call(t)[0])||n}(t),o=r(n);e&&(o?p||v&&!o||i(!1):(_.current=!0,Xc((function(){_.current=!1}))))},!uF&&"undefined"!==typeof window&&window.addEventListener&&(uF=function(t){Sr(hF).forEach((function(e){e(t)}))},window.addEventListener("mousedown",uF)),hF.add(t),function(){hF.delete(t),0===hF.size&&(window.removeEventListener("mousedown",uF),uF=null)};var t})),[S,{focused:v,typing:f}]}function DF(t,e){return m.useMemo((function(){return t||(e?(ni(!1,"`ranges` is deprecated. Please use `presets` instead."),Object.keys(e).map((function(t){var n=e[t];return{label:t,value:"function"===typeof n?n():n}}))):[])}),[t,e])}function RF(t){var e=t.valueTexts,n=t.onTextChange,r=Ri(m.useState(""),2),i=r[0],o=r[1],a=m.useRef([]);function s(){o(a.current[0])}return a.current=e,_d((function(){e.every((function(t){return t!==i}))&&s()}),[e.join("||")]),[i,function(t){o(t),n(t)},s]}function LF(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",r=String(t);r.length<e;)r="".concat(n).concat(t);return r}function NF(t){return null===t||void 0===t?[]:Array.isArray(t)?t:[t]}function FF(t){var e={};return Object.keys(t).forEach((function(n){"data-"!==n.substr(0,5)&&"aria-"!==n.substr(0,5)&&"role"!==n&&"name"!==n||"data-__"===n.substr(0,7)||(e[n]=t[n])})),e}function zF(t,e){return t?t[e]:null}function BF(t,e,n){var r=[zF(t,0),zF(t,1)];return r[n]="function"===typeof e?e(r[n]):e,r[0]||r[1]?r:null}function $F(t){var e=t.cellPrefixCls,n=t.generateConfig,r=t.rangedValue,i=t.hoverRangedValue,o=t.isInView,a=t.isSameCell,s=t.offsetCell,l=t.today,c=t.value;return function(t){var u,h=s(t,-1),p=s(t,1),d=zF(r,0),f=zF(r,1),g=zF(i,0),m=zF(i,1),y=EF(n,g,m,t);function v(t){return a(d,t)}function x(t){return a(f,t)}var _=a(g,t),b=a(m,t),w=(y||b)&&(!o(h)||x(h)),S=(y||_)&&(!o(p)||v(p));return Ir(u={},"".concat(e,"-in-view"),o(t)),Ir(u,"".concat(e,"-in-range"),EF(n,d,f,t)),Ir(u,"".concat(e,"-range-start"),v(t)),Ir(u,"".concat(e,"-range-end"),x(t)),Ir(u,"".concat(e,"-range-start-single"),v(t)&&!f),Ir(u,"".concat(e,"-range-end-single"),x(t)&&!d),Ir(u,"".concat(e,"-range-start-near-hover"),v(t)&&(a(h,g)||EF(n,g,m,h))),Ir(u,"".concat(e,"-range-end-near-hover"),x(t)&&(a(p,m)||EF(n,g,m,p))),Ir(u,"".concat(e,"-range-hover"),y),Ir(u,"".concat(e,"-range-hover-start"),_),Ir(u,"".concat(e,"-range-hover-end"),b),Ir(u,"".concat(e,"-range-hover-edge-start"),w),Ir(u,"".concat(e,"-range-hover-edge-end"),S),Ir(u,"".concat(e,"-range-hover-edge-start-near-range"),w&&a(h,f)),Ir(u,"".concat(e,"-range-hover-edge-end-near-range"),S&&a(p,d)),Ir(u,"".concat(e,"-today"),a(l,t)),Ir(u,"".concat(e,"-selected"),a(c,t)),u}}var jF=m.createContext({});var UF=function(t){var e=t.prefixCls,n=t.generateConfig,r=t.prefixColumn,i=t.locale,o=t.rowCount,a=t.viewDate,s=t.value,l=t.cellRender,c=t.isSameCell,u=m.useContext(jF),h=u.rangedValue,p=u.hoverRangedValue,d=function(t,e,n){var r=e.locale.getWeekFirstDay(t),i=e.setDate(n,1),o=e.getWeekDay(i),a=e.addDate(i,r-o);return e.getMonth(a)===e.getMonth(n)&&e.getDate(a)>1&&(a=e.addDate(a,-7)),a}(i.locale,n,a),f="".concat(e,"-cell"),g=n.locale.getWeekFirstDay(i.locale),y=n.getNow(),v=[],x=i.shortWeekDays||(n.locale.getShortWeekDays?n.locale.getShortWeekDays(i.locale):[]);r&&v.push(m.createElement("th",{key:"empty","aria-label":"empty cell"}));for(var _=0;_<7;_+=1)v.push(m.createElement("th",{key:_},x[(_+g)%7]));var b=$F({cellPrefixCls:f,today:y,value:s,generateConfig:n,rangedValue:r?null:h,hoverRangedValue:r?null:p,isSameCell:c||function(t,e){return wF(n,t,e)},isInView:function(t){return bF(n,t,a)},offsetCell:function(t,e){return n.addDate(t,e)}}),w=l?function(t,e){return l(t,{originNode:e,today:y,type:"date",locale:i})}:void 0;return m.createElement(rF,Ui({},t,{rowNum:o,colNum:7,baseDate:d,getCellNode:w,getCellText:n.getDate,getCellClassName:b,getCellDate:n.addDate,titleCell:function(t){return MF(t,{locale:i,format:"YYYY-MM-DD",generateConfig:n})},headerCells:v}))};var VF=function(t){var e=t.prefixCls,n=t.generateConfig,r=t.locale,i=t.viewDate,o=t.onNextMonth,a=t.onPrevMonth,s=t.onNextYear,l=t.onPrevYear,c=t.onYearClick,u=t.onMonthClick;if(m.useContext(ZN).hideHeader)return null;var h="".concat(e,"-header"),p=r.shortMonths||(n.locale.getShortMonths?n.locale.getShortMonths(r.locale):[]),d=n.getMonth(i),f=m.createElement("button",{type:"button",key:"year",onClick:c,tabIndex:-1,className:"".concat(e,"-year-btn")},MF(i,{locale:r,format:r.yearFormat,generateConfig:n})),g=m.createElement("button",{type:"button",key:"month",onClick:u,tabIndex:-1,className:"".concat(e,"-month-btn")},r.monthFormat?MF(i,{locale:r,format:r.monthFormat,generateConfig:n}):p[d]),y=r.monthBeforeYear?[g,f]:[f,g];return m.createElement(JN,Ui({},t,{prefixCls:h,onSuperPrev:l,onPrev:a,onNext:o,onSuperNext:s}),y)};var HF=function(t){var e=t.prefixCls,n=t.panelName,r=void 0===n?"date":n,i=t.keyboardConfig,o=t.active,a=t.operationRef,s=t.generateConfig,l=t.value,c=t.viewDate,u=t.onViewDateChange,h=t.onPanelChange,p=t.onSelect,d="".concat(e,"-").concat(r,"-panel");a.current={onKeyDown:function(t){return sF(t,Or({onLeftRight:function(t){p(s.addDate(l||c,t),"key")},onCtrlLeftRight:function(t){p(s.addYear(l||c,t),"key")},onUpDown:function(t){p(s.addDate(l||c,7*t),"key")},onPageUpDown:function(t){p(s.addMonth(l||c,t),"key")}},i))}};var f=function(t){var e=s.addYear(c,t);u(e),h(null,e)},g=function(t){var e=s.addMonth(c,t);u(e),h(null,e)};return m.createElement("div",{className:ic()(d,Ir({},"".concat(d,"-active"),o))},m.createElement(VF,Ui({},t,{prefixCls:e,value:l,viewDate:c,onPrevYear:function(){f(-1)},onNextYear:function(){f(1)},onPrevMonth:function(){g(-1)},onNextMonth:function(){g(1)},onMonthClick:function(){h("month",c)},onYearClick:function(){h("year",c)}})),m.createElement(UF,Ui({},t,{onSelect:function(t){return p(t,"mouse")},prefixCls:e,value:l,viewDate:c,rowCount:6})))};var GF=function(t){if(m.useContext(ZN).hideHeader)return null;var e=t.prefixCls,n=t.generateConfig,r=t.locale,i=t.value,o=t.format,a="".concat(e,"-header");return m.createElement(JN,{prefixCls:a},i?MF(i,{locale:r,format:o,generateConfig:n}):"\xa0")};var WF=function(t){var e=t.prefixCls,n=t.units,r=t.onSelect,i=t.value,o=t.active,a=t.hideDisabledOptions,s=t.info,l=t.type,c="".concat(e,"-cell"),u=m.useContext(ZN).open,h=(0,m.useRef)(null),p=(0,m.useRef)(new Map),d=(0,m.useRef)();return(0,m.useLayoutEffect)((function(){var t=p.current.get(i);t&&!1!==u&&aF(h.current,t.offsetTop,120)}),[i]),(0,m.useLayoutEffect)((function(){if(u){var t=p.current.get(i);t&&(d.current=function(t,e){var n;return function r(){Wh(t)?e():n=Xc((function(){r()}))}(),function(){Xc.cancel(n)}}(t,(function(){aF(h.current,t.offsetTop,0)})))}return function(){var t;null===(t=d.current)||void 0===t||t.call(d)}}),[u]),m.createElement("ul",{className:ic()("".concat(e,"-column"),Ir({},"".concat(e,"-column-active"),o)),ref:h,style:{position:"relative"}},n.map((function(t){var e;return a&&t.disabled?null:m.createElement("li",{key:t.value,ref:function(e){p.current.set(t.value,e)},className:ic()(c,(e={},Ir(e,"".concat(c,"-disabled"),t.disabled),Ir(e,"".concat(c,"-selected"),i===t.value),e)),onClick:function(){t.disabled||r(t.value)}},s.cellRender?s.cellRender(t.value,{today:s.today,locale:s.locale,originNode:m.createElement("div",{className:"".concat(c,"-inner")},t.label),type:"time",subType:l}):m.createElement("div",{className:"".concat(c,"-inner")},t.label))})))};function XF(t,e){if(t.length!==e.length)return!0;for(var n=0;n<t.length;n+=1)if(t[n].disabled!==e[n].disabled)return!0;return!1}function qF(t,e,n,r){for(var i=[],o=n>=1?0|n:1,a=t;a<=e;a+=o)i.push({label:LF(a,2),value:a,disabled:(r||[]).includes(a)});return i}var YF=function(t){var e,n=t.generateConfig,r=t.prefixCls,i=t.operationRef,o=t.activeColumnIndex,a=t.value,s=t.showHour,l=t.showMinute,c=t.showSecond,u=t.use12Hours,h=t.hourStep,p=void 0===h?1:h,d=t.minuteStep,f=void 0===d?1:d,g=t.secondStep,y=void 0===g?1:g,v=t.disabledHours,x=t.disabledMinutes,_=t.disabledSeconds,b=t.disabledTime,w=t.hideDisabledOptions,S=t.onSelect,C=t.cellRender,E=t.locale,k=[],M="".concat(r,"-content"),T="".concat(r,"-time-panel"),I=a?n.getHour(a):-1,P=I,O=a?n.getMinute(a):-1,A=a?n.getSecond(a):-1,D=n.getNow(),R=Ri(m.useMemo((function(){if(b){var t=b(D);return[t.disabledHours,t.disabledMinutes,t.disabledSeconds]}return[v,x,_]}),[v,x,_,b,D]),3),L=R[0],N=R[1],F=R[2],z=function(t,e,r,i){var o=a||n.getNow(),s=Math.max(0,e),l=Math.max(0,r),c=Math.max(0,i);return o=tF(n,o,u&&t?s+12:s,l,c)},B=qF(0,23,p,L&&L()),$=qr((function(){return B}),B,XF);u&&(e=P>=12,P%=12);var j=Ri(m.useMemo((function(){if(!u)return[!1,!1];var t=[!0,!0];return $.forEach((function(e){var n=e.disabled,r=e.value;n||(r>=12?t[1]=!1:t[0]=!1)})),t}),[u,$]),2),U=j[0],V=j[1],H=m.useMemo((function(){return u?$.filter(e?function(t){return t.value>=12}:function(t){return t.value<12}).map((function(t){var e=t.value%12,n=0===e?"12":LF(e,2);return Or(Or({},t),{},{label:n,value:e})})):$}),[u,e,$]),G=qF(0,59,f,N&&N(I)),W=qF(0,59,y,F&&F(I,O));function X(t,e,n,r,i){!1!==t&&k.push({node:m.cloneElement(e,{prefixCls:T,value:n,active:o===k.length,onSelect:i,units:r,hideDisabledOptions:w}),onSelect:i,value:n,units:r})}i.current={onUpDown:function(t){var e=k[o];if(e)for(var n=e.units.findIndex((function(t){return t.value===e.value})),r=e.units.length,i=1;i<r;i+=1){var a=e.units[(n+t*i+r)%r];if(!0!==a.disabled){e.onSelect(a.value);break}}}},X(s,m.createElement(WF,{key:"hour",type:"hour",info:{today:D,locale:E,cellRender:C}}),P,H,(function(t){S(z(e,t,O,A),"mouse")})),X(l,m.createElement(WF,{key:"minute",type:"minute",info:{today:D,locale:E,cellRender:C}}),O,G,(function(t){S(z(e,P,t,A),"mouse")})),X(c,m.createElement(WF,{key:"second",type:"second",info:{today:D,locale:E,cellRender:C}}),A,W,(function(t){S(z(e,P,O,t),"mouse")}));var q=-1;return"boolean"===typeof e&&(q=e?1:0),X(!0===u,m.createElement(WF,{key:"meridiem",type:"meridiem",info:{today:D,locale:E,cellRender:C}}),q,[{label:"AM",value:0,disabled:U},{label:"PM",value:1,disabled:V}],(function(t){S(z(!!t,P,O,A),"mouse")})),m.createElement("div",{className:M},k.map((function(t){return t.node})))};var ZF=function(t){var e=t.generateConfig,n=t.format,r=void 0===n?"HH:mm:ss":n,i=t.prefixCls,o=t.active,a=t.operationRef,s=t.showHour,l=t.showMinute,c=t.showSecond,u=t.use12Hours,h=void 0!==u&&u,p=t.onSelect,d=t.value,f="".concat(i,"-time-panel"),g=m.useRef(),y=Ri(m.useState(-1),2),v=y[0],x=y[1],_=[s,l,c,h].filter((function(t){return!1!==t})).length;return a.current={onKeyDown:function(t){return sF(t,{onLeftRight:function(t){x((v+t+_)%_)},onUpDown:function(t){-1===v?x(0):g.current&&g.current.onUpDown(t)},onEnter:function(){p(d||e.getNow(),"key"),x(-1)}})},onBlur:function(){x(-1)}},m.createElement("div",{className:ic()(f,Ir({},"".concat(f,"-active"),o))},m.createElement(GF,Ui({},t,{format:r,prefixCls:i})),m.createElement(YF,Ui({},t,{prefixCls:i,activeColumnIndex:v,operationRef:g})))},KF=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}("date","time");var JF=function(t){var e=t.prefixCls,n=t.operationRef,r=t.generateConfig,i=t.value,o=t.defaultValue,a=t.disabledTime,s=t.showTime,l=t.onSelect,c=t.cellRender,u="".concat(e,"-datetime-panel"),h=Ri(m.useState(null),2),p=h[0],d=h[1],f=m.useRef({}),g=m.useRef({}),y="object"===Cr(s)?Or({},s):{},v=function(t){g.current.onBlur&&g.current.onBlur(t),d(null)};n.current={onKeyDown:function(t){if(t.which===sh.TAB){var e=function(t){var e=KF.indexOf(p)+t;return KF[e]||null}(t.shiftKey?-1:1);return d(e),e&&t.preventDefault(),!0}if(p){var n="date"===p?f:g;return n.current&&n.current.onKeyDown&&n.current.onKeyDown(t),!0}return!![sh.LEFT,sh.RIGHT,sh.UP,sh.DOWN].includes(t.which)&&(d("date"),!0)},onBlur:v,onClose:v};var x=function(t,e){var n=t;"date"===e&&!i&&y.defaultValue?(n=r.setHour(n,r.getHour(y.defaultValue)),n=r.setMinute(n,r.getMinute(y.defaultValue)),n=r.setSecond(n,r.getSecond(y.defaultValue))):"time"===e&&!i&&o&&(n=r.setYear(n,r.getYear(o)),n=r.setMonth(n,r.getMonth(o)),n=r.setDate(n,r.getDate(o))),l&&l(n,"mouse")},_=a?a(i||null):{};return m.createElement("div",{className:ic()(u,Ir({},"".concat(u,"-active"),p))},m.createElement(HF,Ui({},t,{cellRender:c,operationRef:f,active:"date"===p,onSelect:function(t){x(eF(r,t,i||"object"!==Cr(s)?null:s.defaultValue),"date")}})),m.createElement(ZF,Ui({},t,{cellRender:c?function(t,e){return c(t,Or(Or({},e),{},{type:"time"}))}:void 0,format:void 0},y,_,{disabledTime:null,defaultValue:void 0,operationRef:g,active:"time"===p,onSelect:function(t){x(t,"time")}})))};var QF=function(t){var e=t.prefixCls,n=t.generateConfig,r=t.locale,i=t.viewDate,o=t.onNextYear,a=t.onPrevYear,s=t.onYearClick;if(m.useContext(ZN).hideHeader)return null;var l="".concat(e,"-header");return m.createElement(JN,Ui({},t,{prefixCls:l,onSuperPrev:a,onSuperNext:o}),m.createElement("button",{type:"button",onClick:s,className:"".concat(e,"-year-btn")},MF(i,{locale:r,format:r.yearFormat,generateConfig:n})))};var tz=function(t){var e=t.prefixCls,n=t.locale,r=t.value,i=t.viewDate,o=t.generateConfig,a=t.cellRender,s=m.useContext(jF),l=s.rangedValue,c=s.hoverRangedValue,u=$F({cellPrefixCls:"".concat(e,"-cell"),value:r,generateConfig:o,rangedValue:l,hoverRangedValue:c,isSameCell:function(t,e){return bF(o,t,e)},isInView:function(){return!0},offsetCell:function(t,e){return o.addMonth(t,e)}}),h=n.shortMonths||(o.locale.getShortMonths?o.locale.getShortMonths(n.locale):[]),p=o.setMonth(i,0),d=a?function(t,e){return a(t,{originNode:e,locale:n,today:o.getNow(),type:"month"})}:void 0;return m.createElement(rF,Ui({},t,{rowNum:4,colNum:3,baseDate:p,getCellNode:d,getCellText:function(t){return n.monthFormat?MF(t,{locale:n,format:n.monthFormat,generateConfig:o}):h[o.getMonth(t)]},getCellClassName:u,getCellDate:o.addMonth,titleCell:function(t){return MF(t,{locale:n,format:"YYYY-MM",generateConfig:o})}}))};var ez=function(t){var e=t.prefixCls,n=t.operationRef,r=t.onViewDateChange,i=t.generateConfig,o=t.value,a=t.viewDate,s=t.onPanelChange,l=t.onSelect,c="".concat(e,"-month-panel");n.current={onKeyDown:function(t){return sF(t,{onLeftRight:function(t){l(i.addMonth(o||a,t),"key")},onCtrlLeftRight:function(t){l(i.addYear(o||a,t),"key")},onUpDown:function(t){l(i.addMonth(o||a,3*t),"key")},onEnter:function(){s("date",o||a)}})}};var u=function(t){var e=i.addYear(a,t);r(e),s(null,e)};return m.createElement("div",{className:c},m.createElement(QF,Ui({},t,{prefixCls:e,onPrevYear:function(){u(-1)},onNextYear:function(){u(1)},onYearClick:function(){s("year",a)}})),m.createElement(tz,Ui({},t,{prefixCls:e,onSelect:function(t){l(t,"mouse"),s("date",t)}})))};var nz=function(t){var e=t.prefixCls,n=t.generateConfig,r=t.locale,i=t.viewDate,o=t.onNextYear,a=t.onPrevYear,s=t.onYearClick;if(m.useContext(ZN).hideHeader)return null;var l="".concat(e,"-header");return m.createElement(JN,Ui({},t,{prefixCls:l,onSuperPrev:a,onSuperNext:o}),m.createElement("button",{type:"button",onClick:s,className:"".concat(e,"-year-btn")},MF(i,{locale:r,format:r.yearFormat,generateConfig:n})))};var rz=function(t){var e=t.prefixCls,n=t.locale,r=t.value,i=t.viewDate,o=t.generateConfig,a=t.cellRender,s=m.useContext(jF),l=s.rangedValue,c=s.hoverRangedValue,u=$F({cellPrefixCls:"".concat(e,"-cell"),value:r,generateConfig:o,rangedValue:l,hoverRangedValue:c,isSameCell:function(t,e){return _F(o,t,e)},isInView:function(){return!0},offsetCell:function(t,e){return o.addMonth(t,3*e)}}),h=o.setDate(o.setMonth(i,0),1),p=a?function(t,e){return a(t,{originNode:e,locale:n,today:o.getNow(),type:"quarter"})}:void 0;return m.createElement(rF,Ui({},t,{rowNum:1,colNum:4,baseDate:h,getCellNode:p,getCellText:function(t){return MF(t,{locale:n,format:n.quarterFormat||"[Q]Q",generateConfig:o})},getCellClassName:u,getCellDate:function(t,e){return o.addMonth(t,3*e)},titleCell:function(t){return MF(t,{locale:n,format:"YYYY-[Q]Q",generateConfig:o})}}))};var iz=function(t){var e=t.prefixCls,n=t.operationRef,r=t.onViewDateChange,i=t.generateConfig,o=t.value,a=t.viewDate,s=t.onPanelChange,l=t.onSelect,c="".concat(e,"-quarter-panel");n.current={onKeyDown:function(t){return sF(t,{onLeftRight:function(t){l(i.addMonth(o||a,3*t),"key")},onCtrlLeftRight:function(t){l(i.addYear(o||a,t),"key")},onUpDown:function(t){l(i.addYear(o||a,t),"key")}})}};var u=function(t){var e=i.addYear(a,t);r(e),s(null,e)};return m.createElement("div",{className:c},m.createElement(nz,Ui({},t,{prefixCls:e,onPrevYear:function(){u(-1)},onNextYear:function(){u(1)},onYearClick:function(){s("year",a)}})),m.createElement(rz,Ui({},t,{prefixCls:e,onSelect:function(t){l(t,"mouse")}})))};var oz=function(t){var e=t.prefixCls,n=t.generateConfig,r=t.locale,i=t.value,o=t.disabledDate,a=t.onSelect,s=m.useContext(jF),l=s.rangedValue,c=s.hoverRangedValue,u=m.useContext(ZN),h=u.onDateMouseEnter,p=u.onDateMouseLeave,d=(null===c||void 0===c?void 0:c[0])||(null===l||void 0===l?void 0:l[0]),f=(null===c||void 0===c?void 0:c[1])||(null===l||void 0===l?void 0:l[1]),g="".concat(e,"-cell"),y="".concat(e,"-week-panel-row");return m.createElement(HF,Ui({},t,{panelName:"week",prefixColumn:function(t){var e=IF({cellDate:t,mode:"week",disabledDate:o,generateConfig:n});return m.createElement("td",{key:"week",className:ic()(g,"".concat(g,"-week")),onClick:function(){e||a(t,"mouse")},onMouseEnter:function(){!e&&h&&h(t)},onMouseLeave:function(){!e&&p&&p(t)}},m.createElement("div",{className:"".concat(g,"-inner")},n.locale.getWeek(r.locale,t)))},rowClassName:function(t){var e,o=SF(n,r.locale,d,t),a=SF(n,r.locale,f,t);return ic()(y,(Ir(e={},"".concat(y,"-selected"),!l&&SF(n,r.locale,i,t)),Ir(e,"".concat(y,"-range-start"),o),Ir(e,"".concat(y,"-range-end"),a),Ir(e,"".concat(y,"-range-hover"),!o&&!a&&EF(n,d,f,t)),e))},keyboardConfig:{onLeftRight:null},isSameCell:function(){return!1}}))};var az=function(t){var e=t.prefixCls,n=t.generateConfig,r=t.viewDate,i=t.onPrevDecade,o=t.onNextDecade,a=t.onDecadeClick;if(m.useContext(ZN).hideHeader)return null;var s="".concat(e,"-header"),l=n.getYear(r),c=Math.floor(l/lz)*lz,u=c+lz-1;return m.createElement(JN,Ui({},t,{prefixCls:s,onSuperPrev:i,onSuperNext:o}),m.createElement("button",{type:"button",onClick:a,className:"".concat(e,"-decade-btn")},c,"-",u))};var sz=function(t){var e=t.prefixCls,n=t.value,r=t.viewDate,i=t.locale,o=t.generateConfig,a=t.cellRender,s=m.useContext(jF),l=s.rangedValue,c=s.hoverRangedValue,u="".concat(e,"-cell"),h=o.getYear(r),p=Math.floor(h/lz)*lz,d=p+lz-1,f=o.setYear(r,p-Math.ceil((12-lz)/2)),g=o.getNow(),y=$F({cellPrefixCls:u,value:n,generateConfig:o,rangedValue:l,hoverRangedValue:c,isSameCell:function(t,e){return vF(o,t,e)},isInView:function(t){var e=o.getYear(t);return p<=e&&e<=d},offsetCell:function(t,e){return o.addYear(t,e)}}),v=a?function(t,e){return a(t,{originNode:e,today:g,type:"year",locale:i})}:void 0;return m.createElement(rF,Ui({},t,{rowNum:4,colNum:3,baseDate:f,getCellNode:v,getCellText:o.getYear,getCellClassName:y,getCellDate:o.addYear,titleCell:function(t){return MF(t,{locale:i,format:"YYYY",generateConfig:o})}}))},lz=10;var cz=function(t){var e=t.prefixCls,n=t.operationRef,r=t.onViewDateChange,i=t.generateConfig,o=t.value,a=t.viewDate,s=t.sourceMode,l=t.onSelect,c=t.onPanelChange,u="".concat(e,"-year-panel");n.current={onKeyDown:function(t){return sF(t,{onLeftRight:function(t){l(i.addYear(o||a,t),"key")},onCtrlLeftRight:function(t){l(i.addYear(o||a,t*lz),"key")},onUpDown:function(t){l(i.addYear(o||a,3*t),"key")},onEnter:function(){c("date"===s?"date":"month",o||a)}})}};var h=function(t){var e=i.addYear(a,10*t);r(e),c(null,e)};return m.createElement("div",{className:u},m.createElement(az,Ui({},t,{prefixCls:e,onPrevDecade:function(){h(-1)},onNextDecade:function(){h(1)},onDecadeClick:function(){c("decade",a)}})),m.createElement(sz,Ui({},t,{prefixCls:e,onSelect:function(t){c("date"===s?"date":"month",t),l(t,"mouse")}})))};function uz(t,e,n){return n?m.createElement("div",{className:"".concat(t,"-footer-extra")},n(e)):null}function hz(t){var e,n,r=t.prefixCls,i=t.components,o=void 0===i?{}:i,a=t.needConfirmButton,s=t.onNow,l=t.onOk,c=t.okDisabled,u=t.showNow,h=t.locale;if(a){var p=o.button||"button";s&&!1!==u&&(e=m.createElement("li",{className:"".concat(r,"-now")},m.createElement("a",{className:"".concat(r,"-now-btn"),onClick:s},h.now))),n=a&&m.createElement("li",{className:"".concat(r,"-ok")},m.createElement(p,{disabled:c,onClick:l},h.ok))}return e||n?m.createElement("ul",{className:"".concat(r,"-ranges")},e,n):null}function pz(t){var e=t.cellRender,n=t.monthCellRender,r=t.dateRender,i=m.useMemo((function(){return e||(n||r?function(t,e){var i=t;return r&&"date"===e.type?r(i,e.today):n&&"month"===e.type?n(i,e.locale):e.originNode}:void 0)}),[e,n,r]);return i}var dz=["date","month"];var fz=function(t){var e,n=t,r=n.prefixCls,i=void 0===r?"rc-picker":r,o=n.className,a=n.style,s=n.locale,l=n.generateConfig,c=n.value,u=n.defaultValue,h=n.pickerValue,p=n.defaultPickerValue,d=n.disabledDate,f=n.mode,g=n.picker,y=void 0===g?"date":g,v=n.tabIndex,x=void 0===v?0:v,_=n.showNow,b=n.showTime,w=n.showToday,S=n.renderExtraFooter,C=n.hideHeader,E=n.onSelect,k=n.onChange,M=n.onPanelChange,T=n.onMouseDown,I=n.onPickerValueChange,P=n.onOk,O=n.components,A=n.direction,D=n.hourStep,R=void 0===D?1:D,L=n.minuteStep,N=void 0===L?1:L,F=n.secondStep,z=void 0===F?1:F,B=n.dateRender,$=n.monthCellRender,j=n.cellRender,U="date"===y&&!!b||"time"===y,V=24%R===0,H=60%N===0,G=60%z===0,W=m.useContext(ZN),X=W.operationRef,q=W.onSelect,Y=W.hideRanges,Z=W.defaultOpenValue,K=m.useContext(jF),J=K.inRange,Q=K.panelPosition,tt=K.rangedValue,et=K.hoverRangedValue,nt=m.useRef({}),rt=m.useRef(!0),it=Ri(Cy(null,{value:c,defaultValue:u,postState:function(t){return!t&&Z&&"time"===y?Z:t}}),2),ot=it[0],at=it[1],st=Cy(null,{value:h,defaultValue:p||ot,postState:function(t){var e=l.getNow();if(!t)return e;if(!ot&&b){var n="object"===Cr(b)?b.defaultValue:u;return eF(l,Array.isArray(t)?t[0]:t,n||e)}return Array.isArray(t)?t[0]:t}}),lt=Ri(st,2),ct=lt[0],ut=lt[1],ht=function(t){ut(t),I&&I(t)},pt=function(t){var e=pF[y];return e?e(t):t},dt=Ri(Cy((function(){return"time"===y?"time":pt("date")}),{value:f}),2),ft=dt[0],gt=dt[1];m.useEffect((function(){gt(y)}),[y]);var mt,yt=Ri(m.useState((function(){return ft})),2),vt=yt[0],xt=yt[1],_t=function(t,e){(ft===y||arguments.length>2&&void 0!==arguments[2]&&arguments[2])&&(at(t),E&&E(t),q&&q(t,e),!k||CF(l,t,ot)||null!==d&&void 0!==d&&d(t)||k(t))},bt=function(t){if(nt.current&&nt.current.onKeyDown){var e=!0,n=t.which;if([sh.LEFT,sh.RIGHT,sh.UP,sh.DOWN,sh.PAGE_UP,sh.PAGE_DOWN,sh.ENTER].includes(n)&&(t.preventDefault(),n!==sh.ENTER&&0===x&&(e=function(t){if(dz.includes(ft)){var e,n,r="date"===ft;switch(n=t===sh.PAGE_UP||t===sh.PAGE_DOWN?r?l.addMonth:l.addYear:r?l.addDate:l.addMonth,t){case sh.LEFT:case sh.PAGE_UP:e=n(ct,-1);break;case sh.RIGHT:case sh.PAGE_DOWN:e=n(ct,1);break;case sh.UP:case sh.DOWN:e=n(ct,Number("".concat(t===sh.UP?"-":"").concat(r?7:3)))}if(e)return!(null!==d&&void 0!==d&&d(e))}return!0}(n))),e)return nt.current.onKeyDown(t)}return ni(!1,"Panel not correct handle keyDown event. Please help to fire issue about this."),!1};X&&"right"!==Q&&(X.current={onKeyDown:bt,onClose:function(){nt.current&&nt.current.onClose&&nt.current.onClose()}}),m.useEffect((function(){c&&!rt.current&&ut(c)}),[c]),m.useEffect((function(){rt.current=!1}),[]);var wt,St,Ct,Et=pz({cellRender:j,monthCellRender:$,dateRender:B}),kt=Or(Or({},t),{},{cellRender:Et,operationRef:nt,prefixCls:i,viewDate:ct,value:ot,onViewDateChange:ht,sourceMode:vt,onPanelChange:function(t,e){var n=pt(t||ft);xt(ft),gt(n),M&&(ft!==n||CF(l,ct,ct))&&M(e,n)},disabledDate:d});switch(delete kt.onChange,delete kt.onSelect,ft){case"decade":mt=m.createElement(mF,Ui({},kt,{onSelect:function(t,e){ht(t),_t(t,e)}}));break;case"year":mt=m.createElement(cz,Ui({},kt,{onSelect:function(t,e){ht(t),_t(t,e)}}));break;case"month":mt=m.createElement(ez,Ui({},kt,{onSelect:function(t,e){ht(t),_t(t,e)}}));break;case"quarter":mt=m.createElement(iz,Ui({},kt,{onSelect:function(t,e){ht(t),_t(t,e)}}));break;case"week":mt=m.createElement(oz,Ui({},kt,{onSelect:function(t,e){ht(t),_t(t,e)}}));break;case"time":delete kt.showTime,mt=m.createElement(ZF,Ui({},kt,"object"===Cr(b)?b:null,{onSelect:function(t,e){ht(t),_t(t,e)}}));break;default:mt=b?m.createElement(JF,Ui({},kt,{onSelect:function(t,e){ht(t),_t(t,e)}})):m.createElement(HF,Ui({},kt,{onSelect:function(t,e){ht(t),_t(t,e)}}))}if(Y||(wt=uz(i,ft,S),St=hz({prefixCls:i,components:O,needConfirmButton:U,okDisabled:!ot||d&&d(ot),locale:s,showNow:_,onNow:U&&function(){var t=l.getNow(),e=function(t,e,n,r,i,o){var a=Math.floor(t/r)*r;if(a<t)return[a,60-i,60-o];var s=Math.floor(e/i)*i;return s<e?[a,s,60-o]:[a,s,Math.floor(n/o)*o]}(l.getHour(t),l.getMinute(t),l.getSecond(t),V?R:1,H?N:1,G?z:1),n=tF(l,t,e[0],e[1],e[2]);_t(n,"submit")},onOk:function(){ot&&(_t(ot,"submit",!0),P&&P(ot))}})),w&&"date"===ft&&"date"===y&&!b){var Mt=l.getNow(),Tt="".concat(i,"-today-btn"),It=d&&d(Mt);Ct=m.createElement("a",{className:ic()(Tt,It&&"".concat(Tt,"-disabled")),"aria-disabled":It,onClick:function(){It||_t(Mt,"mouse",!0)}},s.today)}return m.createElement(ZN.Provider,{value:Or(Or({},W),{},{mode:ft,hideHeader:"hideHeader"in t?C:W.hideHeader,hidePrevBtn:J&&"right"===Q,hideNextBtn:J&&"left"===Q})},m.createElement("div",{tabIndex:x,className:ic()("".concat(i,"-panel"),o,(e={},Ir(e,"".concat(i,"-panel-has-range"),tt&&tt[0]&&tt[1]),Ir(e,"".concat(i,"-panel-has-range-hover"),et&&et[0]&&et[1]),Ir(e,"".concat(i,"-panel-rtl"),"rtl"===A),e)),style:a,onKeyDown:bt,onBlur:function(t){nt.current&&nt.current.onBlur&&nt.current.onBlur(t)},onMouseDown:T},mt,wt||St||Ct?m.createElement("div",{className:"".concat(i,"-footer")},wt,St,Ct):null))},gz={bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}}};var mz=function(t){var e,n=t.prefixCls,r=t.popupElement,i=t.popupStyle,o=t.visible,a=t.dropdownClassName,s=t.dropdownAlign,l=t.transitionName,c=t.getPopupContainer,u=t.children,h=t.range,p=t.popupPlacement,d=t.direction,f="".concat(n,"-dropdown");return m.createElement(fy,{showAction:[],hideAction:[],popupPlacement:void 0!==p?p:"rtl"===d?"bottomRight":"bottomLeft",builtinPlacements:gz,prefixCls:f,popupTransitionName:l,popup:r,popupAlign:s,popupVisible:o,popupClassName:ic()(a,(e={},Ir(e,"".concat(f,"-range"),h),Ir(e,"".concat(f,"-rtl"),"rtl"===d),e)),popupStyle:i,getPopupContainer:c},u)};function yz(t){var e=t.prefixCls,n=t.presets,r=t.onClick,i=t.onHover;return n.length?m.createElement("div",{className:"".concat(e,"-presets")},m.createElement("ul",null,n.map((function(t,e){var n=t.label,o=t.value;return m.createElement("li",{key:e,onClick:function(){r(o)},onMouseEnter:function(){null===i||void 0===i||i(o)},onMouseLeave:function(){null===i||void 0===i||i(null)}},n)})))):null}function vz(t){var e,n=t,r=n.prefixCls,i=void 0===r?"rc-picker":r,o=n.id,a=n.tabIndex,s=n.style,l=n.className,c=n.dropdownClassName,u=n.dropdownAlign,h=n.popupStyle,p=n.transitionName,d=n.generateConfig,f=n.locale,g=n.inputReadOnly,y=n.allowClear,v=n.autoFocus,x=n.showTime,_=n.picker,b=void 0===_?"date":_,w=n.format,S=n.use12Hours,C=n.value,E=n.defaultValue,k=n.presets,M=n.open,T=n.defaultOpen,I=n.defaultOpenValue,P=n.suffixIcon,O=n.clearIcon,A=n.disabled,D=n.disabledDate,R=n.placeholder,L=n.getPopupContainer,N=n.pickerRef,F=n.panelRender,z=n.onChange,B=n.onOpenChange,$=n.onFocus,j=n.onBlur,U=n.onMouseDown,V=n.onMouseUp,H=n.onMouseEnter,G=n.onMouseLeave,W=n.onContextMenu,X=n.onClick,q=n.onKeyDown,Y=n.onSelect,Z=n.direction,K=n.autoComplete,J=void 0===K?"off":K,Q=n.inputRender,tt=n.changeOnBlur,et=m.useRef(null),nt="date"===b&&!!x||"time"===b,rt=DF(k);var it=NF(lF(w,b,x,S)),ot=m.useRef(null),at=m.useRef(null),st=m.useRef(null),lt=Ri(Cy(null,{value:C,defaultValue:E}),2),ct=lt[0],ut=lt[1],ht=Ri(m.useState(ct),2),pt=ht[0],dt=ht[1],ft=m.useRef(null),gt=Ri(Cy(!1,{value:M,defaultValue:T,postState:function(t){return!A&&t},onChange:function(t){B&&B(t),!t&&ft.current&&ft.current.onClose&&ft.current.onClose()}}),2),mt=gt[0],yt=gt[1],vt=Ri(PF(pt,{formatList:it,generateConfig:d,locale:f}),2),xt=vt[0],_t=vt[1],bt=Ri(RF({valueTexts:xt,onTextChange:function(t){var e=TF(t,{locale:f,formatList:it,generateConfig:d});!e||D&&D(e)||dt(e)}}),3),wt=bt[0],St=bt[1],Ct=bt[2],Et=function(t){dt(t),ut(t),z&&!CF(d,ct,t)&&z(t,t?MF(t,{generateConfig:d,locale:f,format:it[0]}):"")},kt=function(t){A&&t||yt(t)},Mt=AF({blurToCancel:nt,open:mt,value:wt,triggerOpen:kt,forwardKeyDown:function(t){return mt&&ft.current&&ft.current.onKeyDown?ft.current.onKeyDown(t):(ni(!1,"Picker not correct forward KeyDown operation. Please help to fire issue about this."),!1)},isClickOutside:function(t){return!dF([ot.current,at.current,st.current],t)},onSubmit:function(){return!(!pt||D&&D(pt))&&(Et(pt),kt(!1),Ct(),!0)},onCancel:function(){kt(!1),dt(ct),Ct()},onKeyDown:function(t,e){null===q||void 0===q||q(t,e)},onFocus:$,onBlur:function(t){tt&&Et(pt),null===j||void 0===j||j(t)},changeOnBlur:tt}),Tt=Ri(Mt,2),It=Tt[0],Pt=Tt[1],Ot=Pt.focused,At=Pt.typing;m.useEffect((function(){mt||(dt(ct),xt.length&&""!==xt[0]?_t!==wt&&Ct():St(""))}),[mt,xt]),m.useEffect((function(){mt||Ct()}),[b]),m.useEffect((function(){dt(ct)}),[ct]),N&&(N.current={focus:function(){et.current&&et.current.focus()},blur:function(){et.current&&et.current.blur()}});var Dt=Ri(OF(wt,{formatList:it,generateConfig:d,locale:f}),3),Rt=Dt[0],Lt=Dt[1],Nt=Dt[2],Ft=Or(Or({},t),{},{className:void 0,style:void 0,pickerValue:void 0,onPickerValueChange:void 0,onChange:null}),zt=m.createElement("div",{className:"".concat(i,"-panel-layout")},m.createElement(yz,{prefixCls:i,presets:rt,onClick:function(t){Et(t),kt(!1)}}),m.createElement(fz,Ui({},Ft,{generateConfig:d,className:ic()(Ir({},"".concat(i,"-panel-focused"),!At)),value:pt,locale:f,tabIndex:-1,onSelect:function(t){null===Y||void 0===Y||Y(t),dt(t)},direction:Z,onPanelChange:function(e,n){var r=t.onPanelChange;Nt(!0),null===r||void 0===r||r(e,n)}})));F&&(zt=F(zt));var Bt,$t,jt=m.createElement("div",{className:"".concat(i,"-panel-container"),ref:ot,onMouseDown:function(t){t.preventDefault()}},zt);P&&(Bt=m.createElement("span",{className:"".concat(i,"-suffix"),onMouseDown:function(t){t.preventDefault()}},P)),y&&ct&&!A&&($t=m.createElement("span",{onMouseDown:function(t){t.preventDefault(),t.stopPropagation()},onMouseUp:function(t){t.preventDefault(),t.stopPropagation(),Et(null),kt(!1)},className:"".concat(i,"-clear"),role:"button"},O||m.createElement("span",{className:"".concat(i,"-clear-btn")})));var Ut=Or(Or(Or({id:o,tabIndex:a,disabled:A,readOnly:g||"function"===typeof it[0]||!At,value:Rt||wt,onChange:function(t){St(t.target.value)},autoFocus:v,placeholder:R,ref:et,title:wt},It),{},{size:cF(b,it[0],d)},FF(t)),{},{autoComplete:J}),Vt=Q?Q(Ut):m.createElement("input",Ut);var Ht="rtl"===Z?"bottomRight":"bottomLeft";return m.createElement(ZN.Provider,{value:{operationRef:ft,hideHeader:"time"===b,onSelect:function(t,e){("submit"===e||"key"!==e&&!nt)&&(Et(t),kt(!1))},open:mt,defaultOpenValue:I,onDateMouseEnter:Lt,onDateMouseLeave:Nt}},m.createElement(mz,{visible:mt,popupElement:jt,popupStyle:h,prefixCls:i,dropdownClassName:c,dropdownAlign:u,getPopupContainer:L,transitionName:p,popupPlacement:Ht,direction:Z},m.createElement("div",{ref:st,className:ic()(i,l,(e={},Ir(e,"".concat(i,"-disabled"),A),Ir(e,"".concat(i,"-focused"),Ot),Ir(e,"".concat(i,"-rtl"),"rtl"===Z),e)),style:s,onMouseDown:U,onMouseUp:V,onMouseEnter:H,onMouseLeave:G,onContextMenu:W,onClick:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];null===X||void 0===X||X.apply(void 0,e),et.current&&(et.current.focus(),kt(!0))}},m.createElement("div",{className:ic()("".concat(i,"-input"),Ir({},"".concat(i,"-input-placeholder"),!!Rt)),ref:at},Vt,Bt,$t))))}var xz=function(t){Qo(n,t);var e=ea(n);function n(){var t;ii(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ir(Ko(t=e.call.apply(e,[this].concat(i))),"pickerRef",m.createRef()),Ir(Ko(t),"focus",(function(){t.pickerRef.current&&t.pickerRef.current.focus()})),Ir(Ko(t),"blur",(function(){t.pickerRef.current&&t.pickerRef.current.blur()})),t}return ai(n,[{key:"render",value:function(){return m.createElement(vz,Ui({},this.props,{pickerRef:this.pickerRef}))}}]),n}(m.Component),_z=xz;function bz(t,e,n,r){var i=kF(t,n,r,1);function o(n){return n(t,e)?"same":n(i,e)?"closing":"far"}switch(n){case"year":return o((function(t,e){return function(t,e,n){var r=yF(e,n);return"boolean"===typeof r?r:Math.floor(t.getYear(e)/10)===Math.floor(t.getYear(n)/10)}(r,t,e)}));case"quarter":case"month":return o((function(t,e){return vF(r,t,e)}));default:return o((function(t,e){return bF(r,t,e)}))}}function wz(t){var e=t.values,n=t.picker,r=t.defaultDates,i=t.generateConfig,o=Ri(m.useState((function(){return[zF(r,0),zF(r,1)]})),2),a=o[0],s=o[1],l=Ri(m.useState(null),2),c=l[0],u=l[1],h=zF(e,0),p=zF(e,1);return[function(t){return a[t]?a[t]:zF(c,t)||function(t,e,n,r){var i=zF(t,0),o=zF(t,1);if(0===e)return i;if(i&&o)switch(bz(i,o,n,r)){case"same":case"closing":return i;default:return kF(o,n,r,-1)}return i}(e,t,n,i)||h||p||i.getNow()},function(t,n){if(t){var r=BF(c,t,n);s(BF(a,null,n)||[null,null]);var i=(n+1)%2;zF(e,i)||(r=BF(r,t,i)),u(r)}else(h||p)&&u(null)}]}function Sz(t,e){return t&&t[0]&&t[1]&&e.isAfter(t[0],t[1])?[t[1],t[0]]:t}function Cz(t,e,n,r){return!!t||(!(!r||!r[e])||!!n[(e+1)%2])}function Ez(t){var e,n,r,i=t,o=i.prefixCls,a=void 0===o?"rc-picker":o,s=i.id,l=i.style,c=i.className,u=i.popupStyle,h=i.dropdownClassName,p=i.transitionName,d=i.dropdownAlign,f=i.getPopupContainer,g=i.generateConfig,y=i.locale,v=i.placeholder,x=i.autoFocus,_=i.disabled,b=i.format,w=i.picker,S=void 0===w?"date":w,C=i.showTime,E=i.use12Hours,k=i.separator,M=void 0===k?"~":k,T=i.value,I=i.defaultValue,P=i.defaultPickerValue,O=i.open,A=i.defaultOpen,D=i.disabledDate,R=i.disabledTime,L=i.dateRender,N=i.monthCellRender,F=i.cellRender,z=i.panelRender,B=i.presets,$=i.ranges,j=i.allowEmpty,U=i.allowClear,V=i.suffixIcon,H=i.clearIcon,G=i.pickerRef,W=i.inputReadOnly,X=i.mode,q=i.renderExtraFooter,Y=i.onChange,Z=i.onOpenChange,K=i.onPanelChange,J=i.onCalendarChange,Q=i.onFocus,tt=i.onBlur,et=i.onMouseDown,nt=i.onMouseUp,rt=i.onMouseEnter,it=i.onMouseLeave,ot=i.onClick,at=i.onOk,st=i.onKeyDown,lt=i.components,ct=i.order,ut=i.direction,ht=i.activePickerIndex,pt=i.autoComplete,dt=void 0===pt?"off":pt,ft=i.changeOnBlur,gt="date"===S&&!!C||"time"===S,mt=(0,m.useRef)(null),yt=(0,m.useRef)(null),vt=(0,m.useRef)(null),xt=(0,m.useRef)(null),_t=(0,m.useRef)(null),bt=(0,m.useRef)(null),wt=(0,m.useRef)(null),St=(0,m.useRef)(null);var Ct=NF(lF(b,S,C,E)),Et=(0,m.useRef)(null),kt=m.useMemo((function(){return Array.isArray(_)?_:[_||!1,_||!1]}),[_]),Mt=Ri(Cy(null,{value:T,defaultValue:I,postState:function(t){return"time"!==S||ct?Sz(t,g):t}}),2),Tt=Mt[0],It=Mt[1],Pt=Ri(wz({values:Tt,picker:S,defaultDates:P,generateConfig:g}),2),Ot=Pt[0],At=Pt[1],Dt=Ri(Cy(Tt,{postState:function(t){var e=t;if(kt[0]&&kt[1])return e;for(var n=0;n<2;n+=1)!kt[n]||e||zF(e,n)||zF(j,n)||(e=BF(e,g.getNow(),n));return e}}),2),Rt=Dt[0],Lt=Dt[1],Nt=Ri(Cy([S,S],{value:X}),2),Ft=Nt[0],zt=Nt[1];(0,m.useEffect)((function(){zt([S,S])}),[S]);var Bt=function(t,e){zt(t),K&&K(e,t)},$t=function(t,e,n,r,i,o,a,s,l){var c=Ri(m.useState(!1),2),u=c[0],h=c[1],p=Ri(Cy(t||!1,{value:e,onChange:function(t){null===l||void 0===l||l(t)}}),2),d=p[0],f=p[1],g=Ri(Cy(0,{value:n}),2),y=g[0],v=g[1],x=Ri(m.useState(null),2),_=x[0],b=x[1];m.useEffect((function(){d&&h(!0)}),[d]);var w=Vm((function(t,e,n){if(!1===e)f(t);else if(t){v(e),f(t);var l=0===e?1:0;d&&[a,s][l]?(h(!1),null!==_&&b(null)):b(l)}else"confirm"===n||"blur"===n&&r?(null!==_&&(h(!1),v(_)),b(null),null!==_?Xc((function(){var t;null===(t=[i,o][_].current)||void 0===t||t.focus()})):f(!1)):f(!1)}));return[d,y,u,w]}(A,O,ht,ft,bt,wt,zF(Rt,0),zF(Rt,1),Z),jt=Ri($t,4),Ut=jt[0],Vt=jt[1],Ht=jt[2],Gt=jt[3],Wt=Ut&&0===Vt,Xt=Ut&&1===Vt,qt=function(t,e){var n=t.picker,r=t.locale,i=t.selectedValue,o=t.disabledDate,a=t.disabled,s=t.generateConfig,l=zF(i,0),c=zF(i,1);function u(t){return s.locale.getWeekFirstDate(r.locale,t)}function h(t){return 100*s.getYear(t)+s.getMonth(t)}function p(t){return 10*s.getYear(t)+xF(s,t)}var d=m.useCallback((function(t){if(o&&o(t))return!0;if(a[1]&&c)return!wF(s,t,c)&&s.isAfter(t,c);if(!e&&c)switch(n){case"quarter":return p(t)>p(c);case"month":return h(t)>h(c);case"week":return u(t)>u(c);default:return!wF(s,t,c)&&s.isAfter(t,c)}return!1}),[o,a[1],c,e]),f=m.useCallback((function(t){if(o&&o(t))return!0;if(a[0]&&l)return!wF(s,t,c)&&s.isAfter(l,t);if(!e&&l)switch(n){case"quarter":return p(t)<p(l);case"month":return h(t)<h(l);case"week":return u(t)<u(l);default:return!wF(s,t,l)&&s.isAfter(l,t)}return!1}),[o,a[0],l,e]);return[d,f]}({picker:S,selectedValue:Rt,locale:y,disabled:kt,disabledDate:D,generateConfig:g},!Ut||Ht),Yt=Ri(qt,2),Zt=Yt[0],Kt=Yt[1],Jt=Ri((0,m.useState)(0),2),Qt=Jt[0],te=Jt[1];function ee(t){Gt(!0,t,"open"),Xc((function(){var e=[bt,wt][t];e.current&&e.current.focus()}),0)}function ne(t,e){var n=t,r=zF(n,0),i=zF(n,1);r&&i&&g.isAfter(r,i)&&("week"===S&&!SF(g,y.locale,r,i)||"quarter"===S&&!_F(g,r,i)||"week"!==S&&"quarter"!==S&&"time"!==S&&!wF(g,r,i)?0===e?(n=[r,null],i=null):(r=null,n=[null,i]):"time"===S&&!1===ct||(n=Sz(n,g))),Lt(n);var o=n&&n[0]?MF(n[0],{generateConfig:g,locale:y,format:Ct[0]}):"",a=n&&n[1]?MF(n[1],{generateConfig:g,locale:y,format:Ct[0]}):"";J&&J(n,[o,a],{range:0===e?"start":"end"});var s=Cz(r,0,kt,j),l=Cz(i,1,kt,j);(null===n||s&&l)&&(It(n),!Y||CF(g,zF(Tt,0),r)&&CF(g,zF(Tt,1),i)||Y(n,[o,a]))}(0,m.useEffect)((function(){!Ut&&mt.current&&te(mt.current.offsetWidth)}),[Ut]);var re=function(t){return Ut&&Et.current&&Et.current.onKeyDown?Et.current.onKeyDown(t):(ni(!1,"Picker not correct forward KeyDown operation. Please help to fire issue about this."),!1)},ie={formatList:Ct,generateConfig:g,locale:y},oe=Ri(PF(zF(Rt,0),ie),2),ae=oe[0],se=oe[1],le=Ri(PF(zF(Rt,1),ie),2),ce=le[0],ue=le[1],he=function(t,e){var n=TF(t,{locale:y,formatList:Ct,generateConfig:g});n&&!(0===e?Zt:Kt)(n)&&(Lt(BF(Rt,n,e)),At(n,e))},pe=Ri(RF({valueTexts:ae,onTextChange:function(t){return he(t,0)}}),3),de=pe[0],fe=pe[1],ge=pe[2],me=Ri(RF({valueTexts:ce,onTextChange:function(t){return he(t,1)}}),3),ye=me[0],ve=me[1],xe=me[2],_e=Ri((0,m.useState)(null),2),be=_e[0],we=_e[1],Se=Ri((0,m.useState)(null),2),Ce=Se[0],Ee=Se[1],ke=Ri(OF(de,{formatList:Ct,generateConfig:g,locale:y}),3),Me=ke[0],Te=ke[1],Ie=ke[2],Pe=Ri(OF(ye,{formatList:Ct,generateConfig:g,locale:y}),3),Oe=Pe[0],Ae=Pe[1],De=Pe[2],Re=Ri(m.useState(Ut),2),Le=Re[0],Ne=Re[1];m.useEffect((function(){Ne(Ut)}),[Ut]);var Fe=function(t){ft&&Le&&(zF(Rt,Vt)&&ne(Rt,Vt));return null===tt||void 0===tt?void 0:tt(t)},ze=function(t,e){return{blurToCancel:!ft&&gt,forwardKeyDown:re,onBlur:Fe,isClickOutside:function(t){return!dF([yt.current,vt.current,xt.current,mt.current],t)},onFocus:function(t){Q&&Q(t)},triggerOpen:function(e){e?Gt(e,t,"open"):Gt(e,!!zF(Rt,t)&&t,"blur")},onSubmit:function(){if(!Rt||D&&D(Rt[t]))return!1;ne(Rt,t),e(),Gt(!1,Vt,"confirm")},onCancel:function(){Gt(!1,t,"cancel"),Lt(Tt),e()}}},Be={onKeyDown:function(t,e){null===st||void 0===st||st(t,e)},changeOnBlur:ft},$e=Ri(AF(Or(Or({},ze(0,ge)),{},{open:Wt,value:de},Be)),2),je=$e[0],Ue=$e[1],Ve=Ue.focused,He=Ue.typing,Ge=Ri(AF(Or(Or({},ze(1,xe)),{},{open:Xt,value:ye},Be)),2),We=Ge[0],Xe=Ge[1],qe=Xe.focused,Ye=Xe.typing,Ze=Tt&&Tt[0]?MF(Tt[0],{locale:y,format:"YYYYMMDDHHmmss",generateConfig:g}):"",Ke=Tt&&Tt[1]?MF(Tt[1],{locale:y,format:"YYYYMMDDHHmmss",generateConfig:g}):"";(0,m.useEffect)((function(){Ut||(Lt(Tt),ae.length&&""!==ae[0]?se!==de&&ge():fe(""),ce.length&&""!==ce[0]?ue!==ye&&xe():ve(""))}),[Ut,ae,ce]),(0,m.useEffect)((function(){Lt(Tt)}),[Ze,Ke]);var Je=pz({cellRender:F,monthCellRender:N,dateRender:L}),Qe=m.useMemo((function(){if(Je)return function(t,e){return Je(t,Or(Or({},e),{},{range:Vt?"end":"start"}))}}),[Vt,Je]);G&&(G.current={focus:function(){bt.current&&bt.current.focus()},blur:function(){bt.current&&bt.current.blur(),wt.current&&wt.current.blur()}});var tn=DF(B,$);function en(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null;Ut&&Ce&&Ce[0]&&Ce[1]&&g.isAfter(Ce[1],Ce[0])&&(r=Ce);var i=C;if(C&&"object"===Cr(C)&&C.defaultValue){var o=C.defaultValue;i=Or(Or({},C),{},{defaultValue:zF(o,Vt)||void 0})}return m.createElement(jF.Provider,{value:{inRange:!0,panelPosition:e,rangedValue:be||Rt,hoverRangedValue:r}},m.createElement(fz,Ui({},t,n,{cellRender:Qe,showTime:i,mode:Ft[Vt],generateConfig:g,style:void 0,direction:ut,disabledDate:0===Vt?Zt:Kt,disabledTime:function(t){return!!R&&R(t,0===Vt?"start":"end")},className:ic()(Ir({},"".concat(a,"-panel-focused"),0===Vt?!He:!Ye)),value:zF(Rt,Vt),locale:y,tabIndex:-1,onPanelChange:function(t,n){0===Vt&&Ie(!0),1===Vt&&De(!0),Bt(BF(Ft,n,Vt),BF(Rt,t,Vt));var r=t;"right"===e&&Ft[Vt]===n&&(r=kF(r,n,g,-1)),At(r,Vt)},onOk:null,onSelect:void 0,onChange:void 0,defaultValue:zF(Rt,0===Vt?1:0)})))}var nn=0,rn=0;if(Vt&&vt.current&&_t.current&&yt.current){nn=vt.current.offsetWidth+_t.current.offsetWidth;var on=St.current.offsetLeft>nn?St.current.offsetLeft-nn:St.current.offsetLeft,an=yt.current.offsetWidth,sn=St.current.offsetWidth;an&&sn&&nn>an-sn-("rtl"===ut?0:on)&&(rn=nn)}var ln="rtl"===ut?{right:nn}:{left:nn};var cn,un,hn=m.createElement("div",{className:ic()("".concat(a,"-range-wrapper"),"".concat(a,"-").concat(S,"-range-wrapper")),style:{minWidth:Qt}},m.createElement("div",{ref:St,className:"".concat(a,"-range-arrow"),style:ln}),function(){var t,e=uz(a,Ft[Vt],q),n=hz({prefixCls:a,components:lt,needConfirmButton:gt,okDisabled:!zF(Rt,Vt)||D&&D(Rt[Vt]),locale:y,onOk:function(){zF(Rt,Vt)&&(ne(Rt,Vt),null===at||void 0===at||at(Rt),Gt(!1,Vt,"confirm"))}});if("time"===S||C)t=en();else{var r=Ot(Vt),i=kF(r,S,g),o=Ft[Vt]===S,s=en(!!o&&"left",{pickerValue:r,onPickerValueChange:function(t){At(t,Vt)}}),l=en("right",{pickerValue:i,onPickerValueChange:function(t){At(kF(t,S,g,-1),Vt)}});t="rtl"===ut?m.createElement(m.Fragment,null,l,o&&s):m.createElement(m.Fragment,null,s,o&&l)}var c=m.createElement("div",{className:"".concat(a,"-panel-layout")},m.createElement(yz,{prefixCls:a,presets:tn,onClick:function(t){ne(t,null),Gt(!1,Vt,"preset")},onHover:function(t){we(t)}}),m.createElement("div",null,m.createElement("div",{className:"".concat(a,"-panels")},t),(e||n)&&m.createElement("div",{className:"".concat(a,"-footer")},e,n)));return z&&(c=z(c)),m.createElement("div",{className:"".concat(a,"-panel-container"),style:{marginLeft:rn},ref:yt,onMouseDown:function(t){t.preventDefault()}},c)}());V&&(cn=m.createElement("span",{className:"".concat(a,"-suffix"),onMouseDown:function(t){t.preventDefault()}},V)),U&&(zF(Tt,0)&&!kt[0]||zF(Tt,1)&&!kt[1])&&(un=m.createElement("span",{onMouseDown:function(t){t.preventDefault(),t.stopPropagation()},onMouseUp:function(t){t.preventDefault(),t.stopPropagation();var e=Tt;kt[0]||(e=BF(e,null,0)),kt[1]||(e=BF(e,null,1)),ne(e,null),Gt(!1,Vt,"clear")},className:"".concat(a,"-clear")},H||m.createElement("span",{className:"".concat(a,"-clear-btn")})));var pn={size:cF(S,Ct[0],g)},dn=0,fn=0;vt.current&&xt.current&&_t.current&&(0===Vt?fn=vt.current.offsetWidth:(dn=nn,fn=xt.current.offsetWidth));var gn="rtl"===ut?{right:dn}:{left:dn};return m.createElement(ZN.Provider,{value:{operationRef:Et,hideHeader:"time"===S,onDateMouseEnter:function(t){Ee(BF(Rt,t,Vt)),0===Vt?Te(t):Ae(t)},onDateMouseLeave:function(){Ee(BF(Rt,null,Vt)),0===Vt?Ie():De()},hideRanges:!0,onSelect:function(t,e){var n=BF(Rt,t,Vt);"submit"===e||"key"!==e&&!gt?(ne(n,Vt),0===Vt?Ie():De(),Gt(!1,Vt,"confirm")):Lt(n)},open:Ut}},m.createElement(mz,{visible:Ut,popupElement:hn,popupStyle:u,prefixCls:a,dropdownClassName:h,dropdownAlign:d,getPopupContainer:f,transitionName:p,range:!0,direction:ut},m.createElement("div",Ui({ref:mt,className:ic()(a,"".concat(a,"-range"),c,(e={},Ir(e,"".concat(a,"-disabled"),kt[0]&&kt[1]),Ir(e,"".concat(a,"-focused"),0===Vt?Ve:qe),Ir(e,"".concat(a,"-rtl"),"rtl"===ut),e)),style:l,onClick:function(t){ot&&ot(t),Ut||bt.current.contains(t.target)||wt.current.contains(t.target)||(kt[0]?kt[1]||ee(1):ee(0))},onMouseEnter:rt,onMouseLeave:it,onMouseDown:function(t){et&&et(t),!Ut||!Ve&&!qe||bt.current.contains(t.target)||wt.current.contains(t.target)||t.preventDefault()},onMouseUp:nt},FF(t)),m.createElement("div",{className:ic()("".concat(a,"-input"),(n={},Ir(n,"".concat(a,"-input-active"),0===Vt),Ir(n,"".concat(a,"-input-placeholder"),!!Me),n)),ref:vt},m.createElement("input",Ui({id:s,disabled:kt[0],readOnly:W||"function"===typeof Ct[0]||!He,value:Me||de,onChange:function(t){fe(t.target.value)},autoFocus:x,placeholder:zF(v,0)||"",ref:bt},je,pn,{autoComplete:dt}))),m.createElement("div",{className:"".concat(a,"-range-separator"),ref:_t},M),m.createElement("div",{className:ic()("".concat(a,"-input"),(r={},Ir(r,"".concat(a,"-input-active"),1===Vt),Ir(r,"".concat(a,"-input-placeholder"),!!Oe),r)),ref:xt},m.createElement("input",Ui({disabled:kt[1],readOnly:W||"function"===typeof Ct[0]||!Ye,value:Oe||ye,onChange:function(t){ve(t.target.value)},placeholder:zF(v,1)||"",ref:wt},We,pn,{autoComplete:dt}))),m.createElement("div",{className:"".concat(a,"-active-bar"),style:Or(Or({},gn),{},{width:fn,position:"absolute"})}),cn,un)))}var kz=function(t){Qo(n,t);var e=ea(n);function n(){var t;ii(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ir(Ko(t=e.call.apply(e,[this].concat(i))),"pickerRef",m.createRef()),Ir(Ko(t),"focus",(function(){t.pickerRef.current&&t.pickerRef.current.focus()})),Ir(Ko(t),"blur",(function(){t.pickerRef.current&&t.pickerRef.current.blur()})),t}return ai(n,[{key:"render",value:function(){return m.createElement(Ez,Ui({},this.props,{pickerRef:this.pickerRef}))}}]),n}(m.Component),Mz=kz,Tz=_z;const Iz=(t,e,n,r)=>{const{lineHeight:i}=t,o=Math.floor(n*i)+2,a=Math.max((e-o)/2,0);return{padding:`${a}px ${r}px ${Math.max(e-o-a,0)}px`}},Pz=t=>{const{componentCls:e,pickerCellCls:n,pickerCellInnerCls:r,pickerPanelCellHeight:i,motionDurationSlow:o,borderRadiusSM:a,motionDurationMid:s,controlItemBgHover:l,lineWidth:c,lineType:u,colorPrimary:h,controlItemBgActive:p,colorTextLightSolid:d,controlHeightSM:f,pickerDateHoverRangeBorderColor:g,pickerCellBorderGap:m,pickerBasicCellHoverWithRangeColor:y,pickerPanelCellWidth:v,colorTextDisabled:x,colorBgContainerDisabled:_}=t;return{"&::before":{position:"absolute",top:"50%",insetInlineStart:0,insetInlineEnd:0,zIndex:1,height:i,transform:"translateY(-50%)",transition:`all ${o}`,content:'""'},[r]:{position:"relative",zIndex:2,display:"inline-block",minWidth:i,height:i,lineHeight:`${i}px`,borderRadius:a,transition:`background ${s}, border ${s}`},[`&:hover:not(${n}-in-view),\n    &:hover:not(${n}-selected):not(${n}-range-start):not(${n}-range-end):not(${n}-range-hover-start):not(${n}-range-hover-end)`]:{[r]:{background:l}},[`&-in-view${n}-today ${r}`]:{"&::before":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:1,border:`${c}px ${u} ${h}`,borderRadius:a,content:'""'}},[`&-in-view${n}-in-range`]:{position:"relative","&::before":{background:p}},[`&-in-view${n}-selected ${r},\n      &-in-view${n}-range-start ${r},\n      &-in-view${n}-range-end ${r}`]:{color:d,background:h},[`&-in-view${n}-range-start:not(${n}-range-start-single),\n      &-in-view${n}-range-end:not(${n}-range-end-single)`]:{"&::before":{background:p}},[`&-in-view${n}-range-start::before`]:{insetInlineStart:"50%"},[`&-in-view${n}-range-end::before`]:{insetInlineEnd:"50%"},[`&-in-view${n}-range-hover-start:not(${n}-in-range):not(${n}-range-start):not(${n}-range-end),\n      &-in-view${n}-range-hover-end:not(${n}-in-range):not(${n}-range-start):not(${n}-range-end),\n      &-in-view${n}-range-hover-start${n}-range-start-single,\n      &-in-view${n}-range-hover-start${n}-range-start${n}-range-end${n}-range-end-near-hover,\n      &-in-view${n}-range-hover-end${n}-range-start${n}-range-end${n}-range-start-near-hover,\n      &-in-view${n}-range-hover-end${n}-range-end-single,\n      &-in-view${n}-range-hover:not(${n}-in-range)`]:{"&::after":{position:"absolute",top:"50%",zIndex:0,height:f,borderTop:`${c}px dashed ${g}`,borderBottom:`${c}px dashed ${g}`,transform:"translateY(-50%)",transition:`all ${o}`,content:'""'}},"&-range-hover-start::after,\n      &-range-hover-end::after,\n      &-range-hover::after":{insetInlineEnd:0,insetInlineStart:m},[`&-in-view${n}-in-range${n}-range-hover::before,\n      &-in-view${n}-in-range${n}-range-hover-start::before,\n      &-in-view${n}-in-range${n}-range-hover-end::before,\n      &-in-view${n}-range-start${n}-range-hover::before,\n      &-in-view${n}-range-end${n}-range-hover::before,\n      &-in-view${n}-range-start:not(${n}-range-start-single)${n}-range-hover-start::before,\n      &-in-view${n}-range-end:not(${n}-range-end-single)${n}-range-hover-end::before,\n      ${e}-panel\n      > :not(${e}-date-panel)\n      &-in-view${n}-in-range${n}-range-hover-start::before,\n      ${e}-panel\n      > :not(${e}-date-panel)\n      &-in-view${n}-in-range${n}-range-hover-end::before`]:{background:y},[`&-in-view${n}-range-start:not(${n}-range-start-single):not(${n}-range-end) ${r}`]:{borderStartStartRadius:a,borderEndStartRadius:a,borderStartEndRadius:0,borderEndEndRadius:0},[`&-in-view${n}-range-end:not(${n}-range-end-single):not(${n}-range-start) ${r}`]:{borderStartStartRadius:0,borderEndStartRadius:0,borderStartEndRadius:a,borderEndEndRadius:a},[`&-range-hover${n}-range-end::after`]:{insetInlineStart:"50%"},[`tr > &-in-view${n}-range-hover:first-child::after,\n      tr > &-in-view${n}-range-hover-end:first-child::after,\n      &-in-view${n}-start${n}-range-hover-edge-start${n}-range-hover-edge-start-near-range::after,\n      &-in-view${n}-range-hover-edge-start:not(${n}-range-hover-edge-start-near-range)::after,\n      &-in-view${n}-range-hover-start::after`]:{insetInlineStart:(v-i)/2,borderInlineStart:`${c}px dashed ${g}`,borderStartStartRadius:c,borderEndStartRadius:c},[`tr > &-in-view${n}-range-hover:last-child::after,\n      tr > &-in-view${n}-range-hover-start:last-child::after,\n      &-in-view${n}-end${n}-range-hover-edge-end${n}-range-hover-edge-end-near-range::after,\n      &-in-view${n}-range-hover-edge-end:not(${n}-range-hover-edge-end-near-range)::after,\n      &-in-view${n}-range-hover-end::after`]:{insetInlineEnd:(v-i)/2,borderInlineEnd:`${c}px dashed ${g}`,borderStartEndRadius:c,borderEndEndRadius:c},"&-disabled":{color:x,pointerEvents:"none",[r]:{background:"transparent"},"&::before":{background:_}},[`&-disabled${n}-today ${r}::before`]:{borderColor:x}}},Oz=t=>{const{componentCls:e,pickerCellCls:n,pickerCellInnerCls:r,pickerYearMonthCellWidth:i,pickerControlIconSize:o,pickerPanelCellWidth:a,paddingSM:s,paddingXS:l,paddingXXS:c,colorBgContainer:u,lineWidth:h,lineType:p,borderRadiusLG:d,colorPrimary:f,colorTextHeading:g,colorSplit:m,pickerControlIconBorderWidth:y,colorIcon:v,pickerTextHeight:x,motionDurationMid:_,colorIconHover:b,fontWeightStrong:w,pickerPanelCellHeight:S,pickerCellPaddingVertical:C,colorTextDisabled:E,colorText:k,fontSize:M,pickerBasicCellHoverWithRangeColor:T,motionDurationSlow:I,pickerPanelWithoutTimeCellHeight:P,pickerQuarterPanelContentHeight:O,colorLink:A,colorLinkActive:D,colorLinkHover:R,pickerDateHoverRangeBorderColor:L,borderRadiusSM:N,colorTextLightSolid:F,controlItemBgHover:z,pickerTimePanelColumnHeight:B,pickerTimePanelColumnWidth:$,pickerTimePanelCellHeight:j,controlItemBgActive:U,marginXXS:V,pickerDatePanelPaddingHorizontal:H}=t,G=7*a+2*H,W=(G-2*l)/3-i-s,X=(G-2*l)/4-i;return{[e]:{"&-panel":{display:"inline-flex",flexDirection:"column",textAlign:"center",background:u,border:`${h}px ${p} ${m}`,borderRadius:d,outline:"none","&-focused":{borderColor:f},"&-rtl":{direction:"rtl",[`${e}-prev-icon,\n              ${e}-super-prev-icon`]:{transform:"rotate(45deg)"},[`${e}-next-icon,\n              ${e}-super-next-icon`]:{transform:"rotate(-135deg)"}}},"&-decade-panel,\n        &-year-panel,\n        &-quarter-panel,\n        &-month-panel,\n        &-week-panel,\n        &-date-panel,\n        &-time-panel":{display:"flex",flexDirection:"column",width:G},"&-header":{display:"flex",padding:`0 ${l}px`,color:g,borderBottom:`${h}px ${p} ${m}`,"> *":{flex:"none"},button:{padding:0,color:v,lineHeight:`${x}px`,background:"transparent",border:0,cursor:"pointer",transition:`color ${_}`,fontSize:"inherit"},"> button":{minWidth:"1.6em",fontSize:M,"&:hover":{color:b}},"&-view":{flex:"auto",fontWeight:w,lineHeight:`${x}px`,button:{color:"inherit",fontWeight:"inherit",verticalAlign:"top","&:not(:first-child)":{marginInlineStart:l},"&:hover":{color:f}}}},"&-prev-icon,\n        &-next-icon,\n        &-super-prev-icon,\n        &-super-next-icon":{position:"relative",display:"inline-block",width:o,height:o,"&::before":{position:"absolute",top:0,insetInlineStart:0,display:"inline-block",width:o,height:o,border:"0 solid currentcolor",borderBlockStartWidth:y,borderBlockEndWidth:0,borderInlineStartWidth:y,borderInlineEndWidth:0,content:'""'}},"&-super-prev-icon,\n        &-super-next-icon":{"&::after":{position:"absolute",top:Math.ceil(o/2),insetInlineStart:Math.ceil(o/2),display:"inline-block",width:o,height:o,border:"0 solid currentcolor",borderBlockStartWidth:y,borderBlockEndWidth:0,borderInlineStartWidth:y,borderInlineEndWidth:0,content:'""'}},"&-prev-icon,\n        &-super-prev-icon":{transform:"rotate(-45deg)"},"&-next-icon,\n        &-super-next-icon":{transform:"rotate(135deg)"},"&-content":{width:"100%",tableLayout:"fixed",borderCollapse:"collapse","th, td":{position:"relative",minWidth:S,fontWeight:"normal"},th:{height:S+2*C,color:k,verticalAlign:"middle"}},"&-cell":Object.assign({padding:`${C}px 0`,color:E,cursor:"pointer","&-in-view":{color:k}},Pz(t)),[`&-date-panel ${e}-cell-in-view${e}-cell-in-range${e}-cell-range-hover-start ${r},\n        &-date-panel ${e}-cell-in-view${e}-cell-in-range${e}-cell-range-hover-end ${r}`]:{"&::after":{position:"absolute",top:0,bottom:0,zIndex:-1,background:T,transition:`all ${I}`,content:'""'}},[`&-date-panel\n        ${e}-cell-in-view${e}-cell-in-range${e}-cell-range-hover-start\n        ${r}::after`]:{insetInlineEnd:-(a-S)/2,insetInlineStart:0},[`&-date-panel ${e}-cell-in-view${e}-cell-in-range${e}-cell-range-hover-end ${r}::after`]:{insetInlineEnd:0,insetInlineStart:-(a-S)/2},[`&-range-hover${e}-range-start::after`]:{insetInlineEnd:"50%"},"&-decade-panel,\n        &-year-panel,\n        &-quarter-panel,\n        &-month-panel":{[`${e}-content`]:{height:4*P},[r]:{padding:`0 ${l}px`}},"&-quarter-panel":{[`${e}-content`]:{height:O},[`${e}-cell-range-hover-start::after`]:{insetInlineStart:X,borderInlineStart:`${h}px dashed ${L}`,[`${e}-panel-rtl &`]:{insetInlineEnd:X,borderInlineEnd:`${h}px dashed ${L}`}},[`${e}-cell-range-hover-end::after`]:{insetInlineEnd:X,borderInlineEnd:`${h}px dashed ${L}`,[`${e}-panel-rtl &`]:{insetInlineStart:X,borderInlineStart:`${h}px dashed ${L}`}}},[`&-panel ${e}-footer`]:{borderTop:`${h}px ${p} ${m}`},"&-footer":{width:"min-content",minWidth:"100%",lineHeight:x-2*h+"px",textAlign:"center","&-extra":{padding:`0 ${s}`,lineHeight:x-2*h+"px",textAlign:"start","&:not(:last-child)":{borderBottom:`${h}px ${p} ${m}`}}},"&-now":{textAlign:"start"},"&-today-btn":{color:A,"&:hover":{color:R},"&:active":{color:D},[`&${e}-today-btn-disabled`]:{color:E,cursor:"not-allowed"}},"&-decade-panel":{[r]:{padding:`0 ${l/2}px`},[`${e}-cell::before`]:{display:"none"}},"&-year-panel,\n        &-quarter-panel,\n        &-month-panel":{[`${e}-body`]:{padding:`0 ${l}px`},[r]:{width:i},[`${e}-cell-range-hover-start::after`]:{borderStartStartRadius:N,borderEndStartRadius:N,borderStartEndRadius:0,borderEndEndRadius:0,[`${e}-panel-rtl &`]:{borderStartStartRadius:0,borderEndStartRadius:0,borderStartEndRadius:N,borderEndEndRadius:N}},[`${e}-cell-range-hover-end::after`]:{borderStartStartRadius:0,borderEndStartRadius:0,borderStartEndRadius:N,borderEndEndRadius:N,[`${e}-panel-rtl &`]:{borderStartStartRadius:N,borderEndStartRadius:N,borderStartEndRadius:0,borderEndEndRadius:0}}},"&-year-panel,\n        &-month-panel":{[`${e}-cell-range-hover-start::after`]:{insetInlineStart:W,borderInlineStart:`${h}px dashed ${L}`,[`${e}-panel-rtl &`]:{insetInlineEnd:W,borderInlineEnd:`${h}px dashed ${L}`}},[`${e}-cell-range-hover-end::after`]:{insetInlineEnd:W,borderInlineEnd:`${h}px dashed ${L}`,[`${e}-panel-rtl &`]:{insetInlineStart:W,borderInlineStart:`${h}px dashed ${L}`}}},"&-week-panel":{[`${e}-body`]:{padding:`${l}px ${s}px`},[`${e}-cell`]:{[`&:hover ${r},\n            &-selected ${r},\n            ${r}`]:{background:"transparent !important"}},"&-row":{td:{"&:before":{transition:`background ${_}`},"&:first-child:before":{borderStartStartRadius:N,borderEndStartRadius:N},"&:last-child:before":{borderStartEndRadius:N,borderEndEndRadius:N}},"&:hover td":{"&:before":{background:z}},"&-range-start td,\n            &-range-end td,\n            &-selected td":{[`&${n}`]:{"&:before":{background:f},[`&${e}-cell-week`]:{color:new Ml(F).setAlpha(.5).toHexString()},[r]:{color:F}}},"&-range-hover td:before":{background:U}}},"&-date-panel":{[`${e}-body`]:{padding:`${l}px ${H}px`},[`${e}-content`]:{width:7*a,th:{width:a}}},"&-datetime-panel":{display:"flex",[`${e}-time-panel`]:{borderInlineStart:`${h}px ${p} ${m}`},[`${e}-date-panel,\n          ${e}-time-panel`]:{transition:`opacity ${I}`},"&-active":{[`${e}-date-panel,\n            ${e}-time-panel`]:{opacity:.3,"&-active":{opacity:1}}}},"&-time-panel":{width:"auto",minWidth:"auto",direction:"ltr",[`${e}-content`]:{display:"flex",flex:"auto",height:B},"&-column":{flex:"1 0 auto",width:$,margin:`${c}px 0`,padding:0,overflowY:"hidden",textAlign:"start",listStyle:"none",transition:`background ${_}`,overflowX:"hidden","&::after":{display:"block",height:B-j,content:'""'},"&:not(:first-child)":{borderInlineStart:`${h}px ${p} ${m}`},"&-active":{background:new Ml(U).setAlpha(.2).toHexString()},"&:hover":{overflowY:"auto"},"> li":{margin:0,padding:0,[`&${e}-time-panel-cell`]:{marginInline:V,[`${e}-time-panel-cell-inner`]:{display:"block",width:$-2*V,height:j,margin:0,paddingBlock:0,paddingInlineEnd:0,paddingInlineStart:($-j)/2,color:k,lineHeight:`${j}px`,borderRadius:N,cursor:"pointer",transition:`background ${_}`,"&:hover":{background:z}},"&-selected":{[`${e}-time-panel-cell-inner`]:{background:U}},"&-disabled":{[`${e}-time-panel-cell-inner`]:{color:E,background:"transparent",cursor:"not-allowed"}}}}}},[`&-datetime-panel ${e}-time-panel-column:after`]:{height:B-j+2*c}}}},Az=t=>{const{componentCls:e,colorBgContainer:n,colorError:r,colorErrorOutline:i,colorWarning:o,colorWarningOutline:a}=t;return{[`${e}:not(${e}-disabled)`]:{[`&${e}-status-error`]:{"&, &:not([disabled]):hover":{backgroundColor:n,borderColor:r},[`&${e}-focused, &:focus`]:Object.assign({},Qx(vh(t,{inputBorderActiveColor:r,inputBorderHoverColor:r,controlOutline:i}))),[`${e}-active-bar`]:{background:r}},[`&${e}-status-warning`]:{"&, &:not([disabled]):hover":{backgroundColor:n,borderColor:o},[`&${e}-focused, &:focus`]:Object.assign({},Qx(vh(t,{inputBorderActiveColor:o,inputBorderHoverColor:o,controlOutline:a}))),[`${e}-active-bar`]:{background:o}}}}},Dz=t=>{const{componentCls:e,antCls:n,controlHeight:r,fontSize:i,inputPaddingHorizontal:o,colorBgContainer:a,lineWidth:s,lineType:l,colorBorder:c,borderRadius:u,motionDurationMid:h,colorBgContainerDisabled:p,colorTextDisabled:d,colorTextPlaceholder:f,controlHeightLG:g,fontSizeLG:m,controlHeightSM:y,inputPaddingHorizontalSM:v,paddingXS:x,marginXS:_,colorTextDescription:b,lineWidthBold:w,lineHeight:S,colorPrimary:C,motionDurationSlow:E,zIndexPopup:k,paddingXXS:M,paddingSM:T,pickerTextHeight:I,controlItemBgActive:P,colorPrimaryBorder:O,sizePopupArrow:A,borderRadiusXS:D,borderRadiusOuter:R,colorBgElevated:L,borderRadiusLG:N,boxShadowSecondary:F,borderRadiusSM:z,colorSplit:B,controlItemBgHover:$,presetsWidth:j,presetsMaxWidth:U,boxShadowPopoverArrow:V}=t;return[{[e]:Object.assign(Object.assign(Object.assign({},fu(t)),Iz(t,r,i,o)),{position:"relative",display:"inline-flex",alignItems:"center",background:a,lineHeight:1,border:`${s}px ${l} ${c}`,borderRadius:u,transition:`border ${h}, box-shadow ${h}`,"&:hover, &-focused":Object.assign({},Jx(t)),"&-focused":Object.assign({},Qx(t)),[`&${e}-disabled`]:{background:p,borderColor:c,cursor:"not-allowed",[`${e}-suffix`]:{color:d}},[`&${e}-borderless`]:{backgroundColor:"transparent !important",borderColor:"transparent !important",boxShadow:"none !important"},[`${e}-input`]:{position:"relative",display:"inline-flex",alignItems:"center",width:"100%","> input":Object.assign(Object.assign({},i_(t)),{flex:"auto",minWidth:1,height:"auto",padding:0,background:"transparent",border:0,borderRadius:0,"&:focus":{boxShadow:"none"},"&[disabled]":{background:"transparent"}}),"&:hover":{[`${e}-clear`]:{opacity:1}},"&-placeholder":{"> input":{color:f}}},"&-large":Object.assign(Object.assign({},Iz(t,g,m,o)),{[`${e}-input > input`]:{fontSize:m}}),"&-small":Object.assign({},Iz(t,y,i,v)),[`${e}-suffix`]:{display:"flex",flex:"none",alignSelf:"center",marginInlineStart:x/2,color:d,lineHeight:1,pointerEvents:"none","> *":{verticalAlign:"top","&:not(:last-child)":{marginInlineEnd:_}}},[`${e}-clear`]:{position:"absolute",top:"50%",insetInlineEnd:0,color:d,lineHeight:1,background:a,transform:"translateY(-50%)",cursor:"pointer",opacity:0,transition:`opacity ${h}, color ${h}`,"> *":{verticalAlign:"top"},"&:hover":{color:b}},[`${e}-separator`]:{position:"relative",display:"inline-block",width:"1em",height:m,color:d,fontSize:m,verticalAlign:"top",cursor:"default",[`${e}-focused &`]:{color:b},[`${e}-range-separator &`]:{[`${e}-disabled &`]:{cursor:"not-allowed"}}},"&-range":{position:"relative",display:"inline-flex",[`${e}-clear`]:{insetInlineEnd:o},"&:hover":{[`${e}-clear`]:{opacity:1}},[`${e}-active-bar`]:{bottom:-s,height:w,marginInlineStart:o,background:C,opacity:0,transition:`all ${E} ease-out`,pointerEvents:"none"},[`&${e}-focused`]:{[`${e}-active-bar`]:{opacity:1}},[`${e}-range-separator`]:{alignItems:"center",padding:`0 ${x}px`,lineHeight:1},[`&${e}-small`]:{[`${e}-clear`]:{insetInlineEnd:v},[`${e}-active-bar`]:{marginInlineStart:v}}},"&-dropdown":Object.assign(Object.assign(Object.assign({},fu(t)),Oz(t)),{position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:k,[`&${e}-dropdown-hidden`]:{display:"none"},[`&${e}-dropdown-placement-bottomLeft`]:{[`${e}-range-arrow`]:{top:0,display:"block",transform:"translateY(-100%)"}},[`&${e}-dropdown-placement-topLeft`]:{[`${e}-range-arrow`]:{bottom:0,display:"block",transform:"translateY(100%) rotate(180deg)"}},[`&${n}-slide-up-enter${n}-slide-up-enter-active${e}-dropdown-placement-topLeft,\n          &${n}-slide-up-enter${n}-slide-up-enter-active${e}-dropdown-placement-topRight,\n          &${n}-slide-up-appear${n}-slide-up-appear-active${e}-dropdown-placement-topLeft,\n          &${n}-slide-up-appear${n}-slide-up-appear-active${e}-dropdown-placement-topRight`]:{animationName:qE},[`&${n}-slide-up-enter${n}-slide-up-enter-active${e}-dropdown-placement-bottomLeft,\n          &${n}-slide-up-enter${n}-slide-up-enter-active${e}-dropdown-placement-bottomRight,\n          &${n}-slide-up-appear${n}-slide-up-appear-active${e}-dropdown-placement-bottomLeft,\n          &${n}-slide-up-appear${n}-slide-up-appear-active${e}-dropdown-placement-bottomRight`]:{animationName:WE},[`&${n}-slide-up-leave${n}-slide-up-leave-active${e}-dropdown-placement-topLeft,\n          &${n}-slide-up-leave${n}-slide-up-leave-active${e}-dropdown-placement-topRight`]:{animationName:YE},[`&${n}-slide-up-leave${n}-slide-up-leave-active${e}-dropdown-placement-bottomLeft,\n          &${n}-slide-up-leave${n}-slide-up-leave-active${e}-dropdown-placement-bottomRight`]:{animationName:XE},[`${e}-panel > ${e}-time-panel`]:{paddingTop:M},[`${e}-ranges`]:{marginBottom:0,padding:`${M}px ${T}px`,overflow:"hidden",lineHeight:I-2*s-x/2+"px",textAlign:"start",listStyle:"none",display:"flex",justifyContent:"space-between","> li":{display:"inline-block"},[`${e}-preset > ${n}-tag-blue`]:{color:C,background:P,borderColor:O,cursor:"pointer"},[`${e}-ok`]:{marginInlineStart:"auto"}},[`${e}-range-wrapper`]:{display:"flex",position:"relative"},[`${e}-range-arrow`]:Object.assign({position:"absolute",zIndex:1,display:"none",marginInlineStart:1.5*o,transition:`left ${E} ease-out`},Ey(A,D,R,L,V)),[`${e}-panel-container`]:{overflow:"hidden",verticalAlign:"top",background:L,borderRadius:N,boxShadow:F,transition:`margin ${E}`,[`${e}-panel-layout`]:{display:"flex",flexWrap:"nowrap",alignItems:"stretch"},[`${e}-presets`]:{display:"flex",flexDirection:"column",minWidth:j,maxWidth:U,ul:{height:0,flex:"auto",listStyle:"none",overflow:"auto",margin:0,padding:x,borderInlineEnd:`${s}px ${l} ${B}`,li:Object.assign(Object.assign({},du),{borderRadius:z,paddingInline:x,paddingBlock:(y-Math.round(i*S))/2,cursor:"pointer",transition:`all ${E}`,"+ li":{marginTop:_},"&:hover":{background:$}})}},[`${e}-panels`]:{display:"inline-flex",flexWrap:"nowrap",direction:"ltr",[`${e}-panel`]:{borderWidth:`0 0 ${s}px`},"&:last-child":{[`${e}-panel`]:{borderWidth:0}}},[`${e}-panel`]:{verticalAlign:"top",background:"transparent",borderRadius:0,borderWidth:0,[`${e}-content,\n            table`]:{textAlign:"center"},"&-focused":{borderColor:c}}}}),"&-dropdown-range":{padding:2*A/3+"px 0","&-hidden":{display:"none"}},"&-rtl":{direction:"rtl",[`${e}-separator`]:{transform:"rotate(180deg)"},[`${e}-footer`]:{"&-extra":{direction:"rtl"}}}})},ek(t,"slide-up"),ek(t,"slide-down"),ck(t,"move-up"),ck(t,"move-down")]};var Rz=bh("DatePicker",(t=>{const e=vh(h_(t),(t=>{const{componentCls:e,controlHeightLG:n,controlHeightSM:r,colorPrimary:i,paddingXXS:o,padding:a}=t;return{pickerCellCls:`${e}-cell`,pickerCellInnerCls:`${e}-cell-inner`,pickerTextHeight:n,pickerPanelCellWidth:1.5*r,pickerPanelCellHeight:r,pickerDateHoverRangeBorderColor:new Ml(i).lighten(20).toHexString(),pickerBasicCellHoverWithRangeColor:new Ml(i).lighten(35).toHexString(),pickerPanelWithoutTimeCellHeight:1.65*n,pickerYearMonthCellWidth:1.5*n,pickerTimePanelColumnHeight:224,pickerTimePanelColumnWidth:1.4*n,pickerTimePanelCellHeight:28,pickerQuarterPanelContentHeight:1.4*n,pickerCellPaddingVertical:o+o/2,pickerCellBorderGap:2,pickerControlIconSize:7,pickerControlIconBorderWidth:1.5,pickerDatePanelPaddingHorizontal:a+o/2}})(t));return[Dz(e),Az(e),Mp(t,{focusElCls:`${t.componentCls}-focused`})]}),(t=>({presetsWidth:120,presetsMaxWidth:200,zIndexPopup:t.zIndexPopupBase+50})));function Lz(t,e,n){return void 0!==n?n:"year"===e&&t.lang.yearPlaceholder?t.lang.yearPlaceholder:"quarter"===e&&t.lang.quarterPlaceholder?t.lang.quarterPlaceholder:"month"===e&&t.lang.monthPlaceholder?t.lang.monthPlaceholder:"week"===e&&t.lang.weekPlaceholder?t.lang.weekPlaceholder:"time"===e&&t.timePickerLocale.placeholder?t.timePickerLocale.placeholder:t.lang.placeholder}function Nz(t,e,n){return void 0!==n?n:"year"===e&&t.lang.yearPlaceholder?t.lang.rangeYearPlaceholder:"quarter"===e&&t.lang.quarterPlaceholder?t.lang.rangeQuarterPlaceholder:"month"===e&&t.lang.monthPlaceholder?t.lang.rangeMonthPlaceholder:"week"===e&&t.lang.weekPlaceholder?t.lang.rangeWeekPlaceholder:"time"===e&&t.timePickerLocale.placeholder?t.timePickerLocale.rangePlaceholder:t.lang.rangePlaceholder}function Fz(t,e){const n={adjustX:1,adjustY:1};switch(e){case"bottomLeft":return{points:["tl","bl"],offset:[0,4],overflow:n};case"bottomRight":return{points:["tr","br"],offset:[0,4],overflow:n};case"topLeft":return{points:["bl","tl"],offset:[0,-4],overflow:n};case"topRight":return{points:["br","tr"],offset:[0,-4],overflow:n};default:return{points:"rtl"===t?["tr","br"]:["tl","bl"],offset:[0,4],overflow:n}}}var zz=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};var Bz=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const $z={button:function(t){return m.createElement(id,Object.assign({size:"small",type:"primary"},t))}};function jz(t){const{format:e,picker:n,showHour:r,showMinute:i,showSecond:o,use12Hours:a}=t,s=function(t){return t?Array.isArray(t)?t:[t]:[]}(e)[0],l=Object.assign({},t);return s&&"string"===typeof s&&(s.includes("s")||void 0!==o||(l.showSecond=!1),s.includes("m")||void 0!==i||(l.showMinute=!1),s.includes("H")||s.includes("h")||void 0!==r||(l.showHour=!1),(s.includes("a")||s.includes("A"))&&void 0===a&&(l.use12Hours=!0)),"time"===n?l:("function"===typeof s&&delete l.format,{showTime:l})}var Uz=function(t){const{DatePicker:e,WeekPicker:n,MonthPicker:r,YearPicker:i,TimePicker:o,QuarterPicker:a}=function(t){function e(e,n){const r=(0,m.forwardRef)(((n,r)=>{const{prefixCls:i,getPopupContainer:o,className:a,rootClassName:s,size:l,bordered:c=!0,placement:u,placeholder:h,popupClassName:p,dropdownClassName:d,disabled:f,status:g}=n,y=Bz(n,["prefixCls","getPopupContainer","className","rootClassName","size","bordered","placement","placeholder","popupClassName","dropdownClassName","disabled","status"]),{getPrefixCls:v,direction:x,getPopupContainer:_}=(0,m.useContext)(Gl),b=v("picker",i),{compactSize:w,compactItemClassnames:S}=lp(b,x),C=m.useRef(null),{format:E,showTime:k}=n,[M,T]=Rz(b);(0,m.useImperativeHandle)(r,(()=>({focus:()=>{var t;return null===(t=C.current)||void 0===t?void 0:t.focus()},blur:()=>{var t;return null===(t=C.current)||void 0===t?void 0:t.blur()}})));let I={};e&&(I.picker=e);const P=e||n.picker;I=Object.assign(Object.assign(Object.assign({},I),k?jz(Object.assign({format:E,picker:P},k)):{}),"time"===P?jz(Object.assign(Object.assign({format:E},n),{picker:P})):{});const O=v(),A=Jl((t=>{var e;return null!==(e=null!==w&&void 0!==w?w:l)&&void 0!==e?e:t})),D=m.useContext(Kl),R=null!==f&&void 0!==f?f:D,L=(0,m.useContext)(tf),{hasFeedback:N,status:F,feedbackIcon:z}=L,B=m.createElement(m.Fragment,null,"time"===P?m.createElement(WN,null):m.createElement(VN,null),N&&z),[$]=od("DatePicker",As),j=Object.assign(Object.assign({},$),n.locale);return M(m.createElement(Tz,Object.assign({ref:C,placeholder:Lz(j,P,h),suffixIcon:B,dropdownAlign:Fz(x,u),clearIcon:m.createElement(Qu,null),prevIcon:m.createElement("span",{className:`${b}-prev-icon`}),nextIcon:m.createElement("span",{className:`${b}-next-icon`}),superPrevIcon:m.createElement("span",{className:`${b}-super-prev-icon`}),superNextIcon:m.createElement("span",{className:`${b}-super-next-icon`}),allowClear:!0,transitionName:`${O}-slide-up`},{showToday:!0},y,I,{locale:j.lang,className:ic()({[`${b}-${A}`]:A,[`${b}-borderless`]:!c},S_(b,C_(F,g),N),T,S,a,s),prefixCls:b,getPopupContainer:o||_,generateConfig:t,components:$z,direction:x,disabled:R,dropdownClassName:ic()(T,s,p||d)})))}));return n&&(r.displayName=n),r}return{DatePicker:e(),WeekPicker:e("week","WeekPicker"),MonthPicker:e("month","MonthPicker"),YearPicker:e("year","YearPicker"),TimePicker:e("time","TimePicker"),QuarterPicker:e("quarter","QuarterPicker")}}(t),s=function(t){const e=(0,m.forwardRef)(((e,n)=>{const{prefixCls:r,getPopupContainer:i,className:o,placement:a,size:s,disabled:l,bordered:c=!0,placeholder:u,popupClassName:h,dropdownClassName:p,status:d}=e,f=zz(e,["prefixCls","getPopupContainer","className","placement","size","disabled","bordered","placeholder","popupClassName","dropdownClassName","status"]),g=m.useRef(null),{getPrefixCls:y,direction:v,getPopupContainer:x}=(0,m.useContext)(Gl),_=y("picker",r),{compactSize:b,compactItemClassnames:w}=lp(_,v),{format:S,showTime:C,picker:E}=e,k=y(),[M,T]=Rz(_);let I={};I=Object.assign(Object.assign(Object.assign({},I),C?jz(Object.assign({format:S,picker:E},C)):{}),"time"===E?jz(Object.assign(Object.assign({format:S},e),{picker:E})):{});const P=Jl((t=>{var e;return null!==(e=null!==b&&void 0!==b?b:s)&&void 0!==e?e:t})),O=m.useContext(Kl),A=null!==l&&void 0!==l?l:O,D=(0,m.useContext)(tf),{hasFeedback:R,status:L,feedbackIcon:N}=D,F=m.createElement(m.Fragment,null,"time"===E?m.createElement(WN,null):m.createElement(VN,null),R&&N);(0,m.useImperativeHandle)(n,(()=>({focus:()=>{var t;return null===(t=g.current)||void 0===t?void 0:t.focus()},blur:()=>{var t;return null===(t=g.current)||void 0===t?void 0:t.blur()}})));const[z]=od("Calendar",As),B=Object.assign(Object.assign({},z),e.locale);return M(m.createElement(Mz,Object.assign({separator:m.createElement("span",{"aria-label":"to",className:`${_}-separator`},m.createElement(YN,null)),disabled:A,ref:g,dropdownAlign:Fz(v,a),placeholder:Nz(B,E,u),suffixIcon:F,clearIcon:m.createElement(Qu,null),prevIcon:m.createElement("span",{className:`${_}-prev-icon`}),nextIcon:m.createElement("span",{className:`${_}-next-icon`}),superPrevIcon:m.createElement("span",{className:`${_}-super-prev-icon`}),superNextIcon:m.createElement("span",{className:`${_}-super-next-icon`}),allowClear:!0,transitionName:`${k}-slide-up`},f,I,{className:ic()({[`${_}-${P}`]:P,[`${_}-borderless`]:!c},S_(_,C_(L,d),R),T,w,o),locale:B.lang,prefixCls:_,getPopupContainer:i||x,generateConfig:t,components:$z,direction:v,dropdownClassName:ic()(T,h||p)})))}));return e}(t),l=e;return l.WeekPicker=n,l.MonthPicker=r,l.YearPicker=i,l.RangePicker=s,l.TimePicker=o,l.QuarterPicker=a,l};const Vz=Uz($N);function Hz(t){const e=Fz(t.direction,t.placement);return e.overflow.adjustY=!1,e.overflow.adjustX=!1,Object.assign(Object.assign({},t),{dropdownAlign:e})}const Gz=GE(Vz,"picker",null,Hz);Vz._InternalPanelDoNotUseOrYouWillBeFired=Gz;const Wz=GE(Vz.RangePicker,"picker",null,Hz);Vz._InternalRangePanelDoNotUseOrYouWillBeFired=Wz,Vz.generatePicker=Uz;var Xz=Vz,qz=n(9962),Yz=n.n(qz);const{Option:Zz}=Ik;var Kz=t=>{let{onData:e}=t;const[n]=cv.useForm(),r=(0,m.useRef)(n),[i,o]=(0,m.useState)(!1),[a,s]=(0,m.useState)(!0),[l,c]=(0,m.useState)({left:0,top:0,bottom:0,right:0}),u=(0,m.useRef)(null),[h,p]=(0,m.useState)(null),[d,f]=(0,m.useState)(null);return(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsx)(id,{onClick:()=>{o(!0)},children:"Filters"}),(0,lr.jsx)(ig,{title:(0,lr.jsx)("div",{style:{width:"100%",cursor:"move"},onMouseOver:()=>{a&&s(!1)},onMouseOut:()=>{s(!0)},onFocus:()=>{},onBlur:()=>{},children:"Filter Options"}),open:i,width:800,onCancel:()=>{o(!1)},footer:[(0,lr.jsx)(uw,{title:"Delete",description:"Are you sure you want to delete this item?",onConfirm:()=>{const t=r.current.getFieldsValue(),n={status:void 0!==t.status?t.status:null,start:t.start_date?t.start_date.format("YYYY-MM-DD HH:mm"):null,end:t.end_date?t.end_date.format("YYYY-MM-DD HH:mm"):null};e(n),r.current.resetFields(),o(!1)},onCancel:()=>{Hh.error("Deletion Failed")},okText:"Yes",cancelText:"No",children:(0,lr.jsx)(id,{type:"primary",danger:!0,children:"Delete"},"purge")})],modalRender:t=>(0,lr.jsx)(Yz(),{disabled:a,bounds:l,onStart:(t,e)=>((t,e)=>{var n;const{clientWidth:r,clientHeight:i}=window.document.documentElement,o=null===(n=u.current)||void 0===n?void 0:n.getBoundingClientRect();o&&c({left:-o.left+e.x,right:r-(o.right-e.x),top:-o.top+e.y,bottom:i-(o.bottom-e.y)})})(0,e),children:(0,lr.jsx)("div",{ref:u,children:t})}),children:(0,lr.jsxs)(cv,{form:r.current,labelCol:{span:4},wrapperCol:{span:14},layout:"horizontal",size:"small",style:{maxWidth:600,textAlign:"start"},children:[(0,lr.jsx)(cv.Item,{label:"Status",name:"status",children:(0,lr.jsxs)(Ik,{children:[(0,lr.jsx)(Zz,{value:"requested",children:"Requested"}),(0,lr.jsx)(Zz,{value:"scheduled",children:"Scheduled"}),(0,lr.jsx)(Zz,{value:"underway",children:"Underway"})]})}),(0,lr.jsx)(cv.Item,{name:"",label:"DepartureTime",children:" "}),(0,lr.jsx)(cv.Item,{name:"start_date",label:"Start Time",children:(0,lr.jsx)(Xz,{showTime:!0,format:"YYYY-MM-DD HH:mm",style:{width:"100%"}})}),(0,lr.jsx)(cv.Item,{name:"end_date",label:"End Time",children:(0,lr.jsx)(Xz,{showTime:!0,format:"YYYY-MM-DD HH:mm",style:{width:"100%"}})})]})})]})},Jz=(n(9466),n(3027)),Qz=n.n(Jz);SN().extend(DN()),SN().extend(Qz());var tB=function(){const t=ct(),e=new URLSearchParams(t.search).get("rider_id"),[n,r]=(0,m.useState)([]),[i,o]=(0,m.useState)(1),[a,s]=(0,m.useState)(1),l=ht();(0,m.useEffect)((()=>{(async()=>{try{const t=await Pn.get("/api/v1/admin/check-login",{headers:{Cookies:jt.get("admin_cookie")}});if(200===t.status){const{alreadyLoggedIn:e}=t.data;e||(sr.error("You are not logged in"),l("/"))}}catch(t){console.error(t),sr.error("Server Error: "+t.message)}})()}),[]),(0,m.useEffect)((()=>{e&&(c(),h(1),(async()=>{try{let t=await Pn.get("/api/v1/pagecount",{params:{id:e,tableName:"rroutes"},headers:{Cookies:jt.get("admin_cookie")}});s(t.data.pageCount.count)}catch(t){console.error("Error fetching Page Count:",t),t.response&&500===t.response.status?sr.error("Server Error: "+t.response.data):sr.error("Error fetching Page Count")}})())}),[e]),(0,m.useEffect)((()=>{c(),console.log("Check page changed1",i)}),[i]);const c=async()=>{try{const t=await Pn.get("/api/v1/rider/rroutes",{params:{rider_id:e,pageNumber:i},headers:{Cookies:jt.get("admin_cookie")}});200===t.status&&r(t.data.rider_routes)}catch(t){console.error("Error fetching rider routes:",t),t.response&&403===t.response.status&&"Access denied"===t.response.data?sr.error("Access denied"):t.response&&500===t.response.status?sr.error("Server Error: "+t.response.data):sr.error("Failed to fetch rider routes")}},u=()=>{Hh.error("Deletion Failed")},h=t=>{o(t)},p=[{title:"Rider ID",dataIndex:"rider_id",key:"rider_id"},{title:"Rroute ID",dataIndex:"rroute_id",key:"rroute_id"},{title:"Origin",dataIndex:"origin_node",key:"origin_node"},{title:"Destination",dataIndex:"destination_node",key:"destination_node"},{title:"Departure",dataIndex:"departure_time",key:"departure_time",render:t=>SN()(t).format("hh:mm A DD-MM-YYYY")},{title:"Status",dataIndex:"status",key:"status"},{title:"Tags",dataIndex:"rroute_dbm_tag",key:"rroute_dbm_tag"},{title:"View Route Nodes",dataIndex:"rroute_id",key:"view_route_nodes",render:(t,e)=>(0,lr.jsx)("button",{className:"view-routes-button",onClick:()=>{return t=e.rroute_id,void l(`/RrouteNodes?rroute_id=${t}`);var t},children:"View Route Nodes"})},{title:"Purge",dataIndex:"rroute_id",key:"purge",render:(t,e)=>(0,lr.jsx)(uw,{title:"Delete",description:"Are you sure you want to delete this item?",onConfirm:()=>(async t=>{let e;try{e=await Pn.delete("/api/v1/rider/rroutes",{params:{rroute_id:t.id},headers:{Cookies:jt.get("admin_cookie")}}),200===e.status&&(sr.success("Route deleted successfully!"),c())}catch(n){console.error("Error deleting route:",n),n.response&&400===n.response.status?sr.error("Invalid Data"):n.response&&403===n.response.status&&"Only Super Admin can perform this operation"===n.response.data?sr.error("Only Super Admin can perform this operation"):n.response&&500===n.response.status?sr.error("Server Error: "+n.response.data):sr.error("Error deleting route")}})({id:e.rroute_id}),onCancel:u,okText:"Yes",cancelText:"No",children:(0,lr.jsx)(id,{danger:!0,children:(0,lr.jsx)(VR,{})})})}];return(0,lr.jsx)(lr.Fragment,{children:(0,lr.jsxs)("div",{className:"dashboard-content",children:[(0,lr.jsx)(xr,{btnText:"Refresh"}),(0,lr.jsxs)("div",{className:"dashboard-content-container",children:[(0,lr.jsxs)("div",{className:"dashboard-content-header",children:[(0,lr.jsx)("h2",{children:"Rider Routes"}),(0,lr.jsx)(Kz,{onData:async t=>{try{const n={filterList:[{name:"status",value:t.status,d_type:"varchar"},{name:"departure_time",start:t.start,end:t.end,d_type:"datetime"}],tableName:"rroutes",id:e},r=await Pn.post("/api/v1/truncate/selected-filter",{Data:n},{headers:{Cookies:jt.get("admin_cookie")}});200===r.status&&(0===r.data.rowCount?sr.success("No such Routes Exist"):sr.success(r.data.rowCount+" Rows Truncated"),c())}catch(n){n.response&&403===n.response.status&&"Only Super Admin can perform this operation"===n.response.data?sr.error("Only Super Admin can perform this operation"):n.response&&500===n.response.status?sr.error("Server Error: "+n.response.data):n.response&&400===n.response.status?sr.error("Invalid filters or table name"):sr.error("Failed to purge filters")}}})]}),(0,lr.jsx)(RR,{dataSource:n,pagination:!1,rowClassName:(t,e)=>e%2===0?"row-even":"row-odd",columns:p,rowKey:"rroute_id"}),(0,lr.jsx)(Kn,{}),(0,lr.jsx)("div",{className:"pagination-container",children:(0,lr.jsx)(Uk,{simple:!0,current:i,total:a,onChange:h})})]})]})})};const{Option:eB}=Ik;var nB=t=>{let{onData:e}=t;const[n]=cv.useForm(),r=(0,m.useRef)(n),[i,o]=(0,m.useState)(!1),[a,s]=(0,m.useState)(!0),[l,c]=(0,m.useState)({left:0,top:0,bottom:0,right:0}),u=(0,m.useRef)(null),[h,p]=(0,m.useState)(null),[d,f]=(0,m.useState)(null);return(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsx)(id,{onClick:()=>{o(!0)},children:"Filters"}),(0,lr.jsx)(ig,{title:(0,lr.jsx)("div",{style:{width:"100%",cursor:"move"},onMouseOver:()=>{a&&s(!1)},onMouseOut:()=>{s(!0)},onFocus:()=>{},onBlur:()=>{},children:"Filter Options"}),open:i,width:800,onCancel:()=>{o(!1)},footer:[(0,lr.jsx)(uw,{title:"Delete",description:"Are you sure you want to delete this item?",onConfirm:()=>{const t=r.current.getFieldsValue(),n={status:void 0!==t.status?t.status:null,fixed_route:void 0!==t.fixed_route?t.fixed_route:null,max_wait:void 0!==t.max_wait?t.max_wait:null,capacity:void 0!==t.capacity?t.capacity:null,start:t.start_date?t.start_date.format("YYYY-MM-DD HH:mm"):null,end:t.end_date?t.end_date.format("YYYY-MM-DD HH:mm"):null};e(n),r.current.resetFields(),o(!1)},onCancel:()=>{Hh.error("Deletion Failed")},okText:"Yes",cancelText:"No",children:(0,lr.jsx)(id,{type:"primary",danger:!0,children:"Delete"},"purge")})],modalRender:t=>(0,lr.jsx)(Yz(),{disabled:a,bounds:l,onStart:(t,e)=>((t,e)=>{var n;const{clientWidth:r,clientHeight:i}=window.document.documentElement,o=null===(n=u.current)||void 0===n?void 0:n.getBoundingClientRect();o&&c({left:-o.left+e.x,right:r-(o.right-e.x),top:-o.top+e.y,bottom:i-(o.bottom-e.y)})})(0,e),children:(0,lr.jsx)("div",{ref:u,children:t})}),children:(0,lr.jsxs)(cv,{form:r.current,labelCol:{span:4},wrapperCol:{span:14},layout:"horizontal",size:"small",style:{maxWidth:600},children:[(0,lr.jsx)(cv.Item,{label:"Status",name:"status",children:(0,lr.jsxs)(Ik,{children:[(0,lr.jsx)(eB,{value:"new",children:"New"}),(0,lr.jsx)(eB,{value:"open",children:"Open"}),(0,lr.jsx)(eB,{value:"close",children:"Close"}),(0,lr.jsx)(eB,{value:"underway",children:"Underway"})]})}),(0,lr.jsx)(cv.Item,{label:"Fixed Route",name:"fixed_route",children:(0,lr.jsxs)(Ik,{children:[(0,lr.jsx)(eB,{value:"true",children:"True"}),(0,lr.jsx)(eB,{value:"false",children:"False"})]})}),(0,lr.jsx)(cv.Item,{label:"Max Wait",name:"max_wait",children:(0,lr.jsx)(zb,{min:0,onKeyPress:t=>{const e=t.which||t.keyCode;46!==e&&e>31&&(e<48||e>57)&&t.preventDefault()}})}),(0,lr.jsx)(cv.Item,{label:"Capacity",name:"capacity",children:(0,lr.jsx)(zb,{min:0,onKeyPress:t=>{const e=t.which||t.keyCode;46!==e&&e>31&&(e<48||e>57)&&t.preventDefault()}})}),(0,lr.jsx)(cv.Item,{name:"",label:"DepartureTime",children:" "}),(0,lr.jsx)(cv.Item,{name:"start_date",label:"Start Time",children:(0,lr.jsx)(Xz,{showTime:!0,format:"YYYY-MM-DD HH:mm",style:{width:"100%"}})}),(0,lr.jsx)(cv.Item,{name:"end_date",label:"End Time",children:(0,lr.jsx)(Xz,{showTime:!0,format:"YYYY-MM-DD HH:mm",style:{width:"100%"}})})]})})]})};SN().extend(DN()),SN().extend(Qz());var rB=function(){const t=ct(),e=new URLSearchParams(t.search).get("driver_id"),[n,r]=(0,m.useState)([]),[i,o]=(0,m.useState)(1),[a,s]=(0,m.useState)(1),l=ht();(0,m.useEffect)((()=>{(async()=>{try{const t=await Pn.get("/api/v1/admin/check-login",{headers:{Cookies:jt.get("admin_cookie")}});if(200===t.status){const{alreadyLoggedIn:e}=t.data;e||(sr.error("You are not logged in"),l("/"))}}catch(t){console.error(t),sr.error("Server Error: "+t.message)}})()}),[]),(0,m.useEffect)((()=>{e&&(c(),h(1),(async()=>{try{let t=await Pn.get("/api/v1/pagecount",{params:{tableName:"droutes",id:e},headers:{Cookies:jt.get("admin_cookie")}});s(t.data.pageCount.count)}catch(t){console.error("Error fetching Page Count:",t),t.response&&500===t.response.status?sr.error("Server Error: "+t.response.data):sr.error("Error fetching Page Count")}})())}),[e]),(0,m.useEffect)((()=>{c(),console.log("Check page changed1",i)}),[i]);const c=async()=>{try{const t=await Pn.get("/api/v1/driver/droutes",{params:{driver_id:e,pageNumber:i},headers:{Cookies:jt.get("admin_cookie")}});200===t.status&&r(t.data.driver_routes)}catch(t){console.error("Error fetching driver routes:",t),t.response&&403===t.response.status&&"Access denied"===t.response.data?sr.error("Access denied"):t.response&&500===t.response.status?sr.error("Server Error: "+t.response.data):sr.error("Failed to fetch driver routes")}},u=()=>{Hh.error("Deletion Failed")},h=t=>{o(t)};return(0,lr.jsx)(lr.Fragment,{children:(0,lr.jsxs)("div",{className:"dashboard-content",children:[(0,lr.jsx)(xr,{btnText:"Refresh"}),(0,lr.jsxs)("div",{className:"dashboard-content-container",children:[(0,lr.jsxs)("div",{className:"dashboard-content-header",children:[(0,lr.jsx)("h2",{children:"Driver Routes"}),(0,lr.jsx)(nB,{onData:async t=>{let n;try{const r={filterList:[{name:"status",value:t.status,d_type:"varchar"},{name:"fixed_route",value:t.fixed_route,d_type:"boolean"},{name:"max_wait",value:t.max_wait,d_type:"integer"},{name:"capacity",value:t.capacity,d_type:"integer"},{name:"departure_time",start:t.start,end:t.end,d_type:"datetime"}],tableName:"droutes",id:e};n=await Pn.post("/api/v1/truncate/selected-filter",{Data:r},{headers:{Cookies:jt.get("admin_cookie")}}),200===n.status&&(0===n.data.rowCount?sr.success("No such Routes Exist"):sr.success(n.data.rowCount+" Rows Truncated"),c())}catch(r){r.response&&403===r.response.status&&"Only Super Admin can perform this operation"===r.response.data?sr.error("Only Super Admin can perform this operation"):r.response&&500===r.response.status?sr.error("Server Error: "+r.response.data):r.response&&400===r.response.status?sr.error("Invalid filters or table name"):sr.error("Failed to purge filters")}}})]}),(0,lr.jsxs)("table",{children:[(0,lr.jsx)("thead",{children:(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("th",{children:"drive ID"}),(0,lr.jsx)("th",{children:"Droute ID"}),(0,lr.jsx)("th",{children:"Origin"}),(0,lr.jsx)("th",{children:"Destination"}),(0,lr.jsx)("th",{children:"Departure"}),(0,lr.jsx)("th",{children:"Capacity"}),(0,lr.jsx)("th",{children:"Max Wait"}),(0,lr.jsx)("th",{children:"Fixed Route"}),(0,lr.jsx)("th",{children:"Status"}),(0,lr.jsx)("th",{children:"Tags"}),(0,lr.jsx)("th",{children:"View Route Nodes"}),(0,lr.jsx)("th",{children:"Purge"})]})}),(0,lr.jsx)("tbody",{children:n.length>0?null===n||void 0===n?void 0:n.map((t=>(0,lr.jsxs)("tr",{children:[(0,lr.jsx)("td",{children:t.driver_id}),(0,lr.jsx)("td",{children:t.droute_id}),(0,lr.jsx)("td",{children:t.origin_node}),(0,lr.jsx)("td",{children:t.destination_node}),(0,lr.jsx)("td",{children:SN()(t.departure_time).format("hh:mm A DD-MM-YYYY")}),(0,lr.jsx)("td",{children:t.capacity}),(0,lr.jsx)("td",{children:t.max_wait}),(0,lr.jsx)("td",{children:t.fixed_route}),(0,lr.jsx)("td",{children:t.status}),(0,lr.jsx)("td",{children:t.droute_dbm_tag}),(0,lr.jsx)("td",{children:(0,lr.jsx)("button",{className:"view-routes-button",onClick:()=>{return e=t.droute_id,void l(`/DrouteNodes?droute_id=${e}`);var e},children:"View Route Nodes"})}),(0,lr.jsx)("td",{children:(0,lr.jsx)(uw,{title:"Delete",description:"Are you sure you want to delete this item?",onConfirm:()=>(async t=>{let e;try{e=await Pn.delete("/api/v1/driver/droutes",{params:{droute_id:t.id},headers:{Cookies:jt.get("admin_cookie")}}),200===e.status&&(sr.success("Route deleted successfully!"),c())}catch(n){console.error("Error deleting route:",n),n.response&&400===n.response.status?sr.error("Invalid Data"):n.response&&403===n.response.status&&"Only Super Admin can perform this operation"===n.response.data?sr.error("Only Super Admin can perform this operation"):n.response&&500===n.response.status?sr.error("Server Error: "+n.response.data):sr.error("Error deleting route")}})({id:t.droute_id}),onCancel:u,okText:"Yes",cancelText:"No",children:(0,lr.jsx)(id,{danger:!0,children:(0,lr.jsx)(VR,{})})})})]},t.droute_id))):(0,lr.jsx)("tr",{children:(0,lr.jsx)("td",{colSpan:9,className:"empty-table",children:"No data"})})})]}),(0,lr.jsx)(Kn,{}),(0,lr.jsx)("div",{className:"pagination-container",children:(0,lr.jsx)(Uk,{simple:!0,current:i,total:a,onChange:h})})]})]})})};SN().extend(DN()),SN().extend(Qz());var iB=function(){const t=ct(),e=new URLSearchParams(t.search).get("rroute_id"),[n,r]=(0,m.useState)([]),[i,o]=(0,m.useState)(1),[a,s]=(0,m.useState)(1),l=ht();(0,m.useEffect)((()=>{(async()=>{try{const t=await Pn.get("/api/v1/admin/check-login",{headers:{Cookies:jt.get("admin_cookie")}});if(200===t.status){const{alreadyLoggedIn:e}=t.data;e||(sr.error("You are not logged in"),l("/"))}}catch(t){console.error(t),sr.error("Server Error: "+t.message)}})()}),[]),(0,m.useEffect)((()=>{e&&(c(),u(1),(async()=>{try{let t=await Pn.get("/api/v1/pagecount",{params:{tableName:"rroutenodes",id:e},headers:{Cookies:jt.get("admin_cookie")}});s(t.data.pageCount.count)}catch(t){console.error("Error fetching Page Count:",t),t.response&&500===t.response.status?sr.error("Server Error: "+t.response.data):sr.error("Error fetching Page Count")}})())}),[e]),(0,m.useEffect)((()=>{c(),console.log("Check page changed1",i)}),[i]);const c=async()=>{try{const t=await Pn.get("/api/v1/rroute/node",{params:{routeId:e,pageNumber:i},headers:{Cookies:jt.get("admin_cookie")}});200===t.status&&r(t.data.rRouteNodes||[])}catch(t){console.error("Error fetching driver routes:",t),t.response&&403===t.response.status&&"Access denied"===t.response.data?sr.error("Access denied"):t.response&&500===t.response.status?sr.error("Server Error: "+t.response.data):sr.error("Failed to fetch Rider Route Nodes")}},u=t=>{o(t)},h=null===n||void 0===n?void 0:n.map(((t,e)=>({key:e,...t})));return(0,lr.jsx)(lr.Fragment,{children:(0,lr.jsxs)("div",{className:"dashboard-content",children:[(0,lr.jsx)(xr,{btnText:"Refresh"}),(0,lr.jsxs)("div",{className:"dashboard-content-container",children:[(0,lr.jsx)("div",{className:"dashboard-content-header",children:(0,lr.jsx)("h2",{children:"Rider Route Nodes"})}),(0,lr.jsx)(RR,{columns:[{title:"Rroute ID",dataIndex:"rroute_id",key:"rroute_id"},{title:"Droute ID",dataIndex:"droute_id",key:"droute_id"},{title:"Rider ID",dataIndex:"rider_id",key:"rider_id"},{title:"Node ID",dataIndex:"node_id",key:"node_id"},{title:"Permutation ID",dataIndex:"permutation_id",key:"permutation_id"},{title:"Arrival Time",dataIndex:"arrival_time",key:"arrival_time"},{title:"Departure Time",dataIndex:"departure_time",key:"departure_time"},{title:"Rank",dataIndex:"rank",key:"rank"},{title:"Cumulative Distance",dataIndex:"Cum_distance",key:"Cum_distance"},{title:"Cumulative Time",dataIndex:"Cum_time",key:"Cum_time"},{title:"Status",dataIndex:"status",key:"status"}],dataSource:h,locale:{emptyText:"No data"}}),(0,lr.jsx)(Kn,{}),(0,lr.jsx)("div",{className:"pagination-container",children:(0,lr.jsx)(Uk,{simple:!0,current:i,total:a,onChange:u})})]})]})})};SN().extend(DN()),SN().extend(Qz());var oB=function(){const t=ct(),e=new URLSearchParams(t.search).get("droute_id"),[n,r]=(0,m.useState)([]),[i,o]=(0,m.useState)(1),[a,s]=(0,m.useState)(1),l=ht();(0,m.useEffect)((()=>{(async()=>{try{const t=await Pn.get("/api/v1/admin/check-login",{headers:{Cookies:jt.get("admin_cookie")}});if(200===t.status){const{alreadyLoggedIn:e}=t.data;e||(sr.error("You are not logged in"),l("/"))}}catch(t){console.error(t),sr.error("Server Error: "+t.message)}})()}),[]),(0,m.useEffect)((()=>{e&&(c(),u(1),(async()=>{try{let t=await Pn.get("/api/v1/pagecount",{params:{tableName:"droutenodes",id:e},headers:{Cookies:jt.get("admin_cookie")}});s(t.data.pageCount.count)}catch(t){console.error("Error fetching Page Count:",t),t.response&&500===t.response.status?sr.error("Server Error: "+t.response.data):sr.error("Error fetching Page Count")}})())}),[e]),(0,m.useEffect)((()=>{c(),console.log("Check page changed1",i)}),[i]);const c=async()=>{try{const t=await Pn.get("/api/v1/droute/node",{params:{routeId:e,pageNumber:i},headers:{Cookies:jt.get("admin_cookie")}});200===t.status&&r(t.data.dRouteNodes)}catch(t){console.error("Error fetching driver routes:",t),t.response&&403===t.response.status&&"Access denied"===t.response.data?sr.error("Access denied"):t.response&&500===t.response.status?sr.error("Server Error: "+t.response.data):sr.error("Failed to fetch Driver Route Nodes")}},u=t=>{o(t)};return(0,lr.jsx)(lr.Fragment,{children:(0,lr.jsxs)("div",{className:"dashboard-content",children:[(0,lr.jsx)(xr,{btnText:"Refresh"}),(0,lr.jsxs)("div",{className:"dashboard-content-container",children:[(0,lr.jsx)("div",{className:"dashboard-content-header",children:(0,lr.jsx)("h2",{children:"Driver Route Nodes"})}),(0,lr.jsx)(RR,{columns:[{title:"Droute ID",dataIndex:"droute_id",key:"droute_id"},{title:"OutBound Driver ID",dataIndex:"outb_driver_id",key:"outb_driver_id"},{title:"Node ID",dataIndex:"node_id",key:"node_id"},{title:"Permutation ID",dataIndex:"permutation_id",key:"permutation_id"},{title:"Arrival Time",dataIndex:"arrival_time",key:"arrival_time"},{title:"Departure Time",dataIndex:"departure_time",key:"departure_time"},{title:"Max Wait",dataIndex:"max_wait",key:"max_wait"},{title:"Rank",dataIndex:"rank",key:"rank"},{title:"Capacity",dataIndex:"capacity",key:"capacity"},{title:"Capacity Used",dataIndex:"capacity_used",key:"capacity_used"},{title:"Cumulative Distance",dataIndex:"Cum_distance",key:"Cum_distance"},{title:"Cumulative Time",dataIndex:"Cum_time",key:"Cum_time"},{title:"Status",dataIndex:"status",key:"status"}],dataSource:n,rowKey:t=>`${t.droute_id}${t.outb_driver_id}${t.node_id}`}),(0,lr.jsx)(Kn,{}),(0,lr.jsx)("div",{className:"pagination-container",children:(0,lr.jsx)(Uk,{simple:!0,current:i,total:a,onChange:u})})]})]})})};const aB=()=>{const[t,e]=(0,m.useState)(!1),[n]=cv.useForm(),[r,i]=(0,m.useState)(null),o=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],[a,s]=(0,m.useState)("days");return(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsx)(id,{className:"Upload_Button",onClick:()=>e(!0),children:"Transit Options"}),(0,lr.jsx)(ig,{title:"Transit Options",visible:t,onOk:async()=>{if(!r)return void console.error("Please upload a CSV file!");const t=await n.validateFields();let a="",s=null,l=null;"days"===t.option?a=o.map((e=>t.days.includes(e)?"1":"0")).join(""):(s=t.dateRange[0],l=t.dateRange[1]);const c=Intl.DateTimeFormat().resolvedOptions().timeZone,u=new FormData;u.append("file",new Blob([r.join("\n")],{type:"text/csv"})),u.append("scheduled_weekdays",a),u.append("scheduled_start",s),u.append("scheduled_end",l),u.append("time_zone",c);try{await Pn.post("/api/v1/droutes/transit-import",u,{headers:{Cookies:jt.get("admin_cookie"),"Content-Type":"multipart/form-data"}});n.resetFields(),e(!1),i(null)}catch(h){console.error(h)}},onCancel:()=>{e(!1),i(null)},children:(0,lr.jsxs)(cv,{form:n,layout:"vertical",name:"form_in_modal",children:[(0,lr.jsx)(cv.Item,{name:"csv",label:"Upload CSV:",children:(0,lr.jsx)(lN(),{onFileLoaded:(t,e)=>{i(t),console.log("CSV Data:",t),console.log("File Info:",e)},children:(0,lr.jsx)("span",{children:"Drop CSV file here or click to upload."})})}),(0,lr.jsx)(cv.Item,{name:"option",children:(0,lr.jsxs)(jO.Group,{onChange:t=>s(t.target.value),value:a,children:[(0,lr.jsx)(jO,{value:"days",children:"Days of Week"}),(0,lr.jsx)(jO,{value:"date",children:"Date Range"})]})}),"days"===a&&(0,lr.jsx)(cv.Item,{name:"days",label:"Select Days:",children:(0,lr.jsx)(SM.Group,{options:o})}),"date"===a&&(0,lr.jsx)(cv.Item,{name:"dateRange",label:"Select Date Range:",children:(0,lr.jsx)(Xz.RangePicker,{})})]})})]})},{Option:sB}=Ik;var lB=t=>{let{onData:e,selectedOption:n}=t;const[r,i]=(0,m.useState)(!1),[o,a]=(0,m.useState)(!1),[s,l]=(0,m.useState)(null),[c,u]=(0,m.useState)(null),[h,p]=(0,m.useState)("Bulk Import"),d=()=>{i(!0),setTimeout((()=>{i(!1),a(!1);e([h,s])}),3e3)},f=()=>{a(!1),l(null),u(null)};return(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsx)(id,{type:"primary",className:"Upload_Button",onClick:()=>{a(!0)},children:"Batch Import"}),(0,lr.jsxs)(ig,{open:o,title:"Upload CSV",onOk:d,onCancel:f,footer:[(0,lr.jsx)(id,{onClick:f,children:"Cancel"},"back"),(0,lr.jsx)(id,{type:"primary",loading:r,onClick:d,children:"Submit"},"submit")],children:["Rider Routes"==n?(0,lr.jsxs)(Ik,{defaultValue:"Bulk Import",style:{width:120,marginBottom:16},onChange:t=>p(t),children:[(0,lr.jsx)(sB,{value:"Bulk Import",children:"Bulk Import"}),(0,lr.jsx)(sB,{value:"Batch Import",children:"Batch Import"})]}):(0,lr.jsx)(Ik,{defaultValue:"Batch Import",style:{width:120,marginBottom:16},onChange:t=>p(t),children:(0,lr.jsx)(sB,{value:"Batch Import",children:"Batch Import"})}),(0,lr.jsx)("br",{}),(0,lr.jsx)("input",{type:"file",id:"file",style:{marginTop:"16px"},onChange:t=>{const e=t.target.files[0];"text/csv"===e.type||e.name.endsWith(".csv")?e.size>52428800?Hh.error("File size exceeds the limit (50MB)."):(u(e.name),l(e)):Hh.error("You can only upload CSV files!")},accept:".csv"}),s&&(0,lr.jsxs)("div",{children:[(0,lr.jsx)("h3",{children:"Uploaded CSV file:"}),(0,lr.jsxs)("div",{children:[c," ",(0,lr.jsx)(sg,{onClick:()=>{l(null),u(null)},style:{cursor:"pointer",color:"red"}})]})]}),(0,lr.jsx)("div",{className:"modal-footer",children:(0,lr.jsx)("div",{className:"transit-options-container",children:"Driver Routes"===n?(0,lr.jsx)(aB,{}):(0,lr.jsx)(lr.Fragment,{})})})]})]})},cB={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"},uB=function(t,e){return m.createElement(Gu,Ui({},t,{ref:e,icon:cB}))};var hB=m.forwardRef(uB);var pB=t=>{let{tags:e,onSearch:n,onDelete:r}=t;const[i,o]=(0,m.useState)([]),[a,s]=(0,m.useState)(!1),[l,c]=(0,m.useState)(!1),u=e.filter((t=>!i.includes(t)));(0,m.useEffect)((()=>{0===u.length&&c(!1)}),[u]),(0,m.useEffect)((()=>{i.some((t=>e.includes(t)))||(s(!1),n([]))}),[i,e]);return(0,lr.jsxs)("div",{className:"select-container",children:[(0,lr.jsx)(Ik,{mode:"multiple",placeholder:"Select",value:i,onChange:o,style:{width:"100%"},options:u.map((t=>({value:t,label:t}))),suffixIcon:(0,lr.jsx)(id,{type:"text",onClick:()=>{s(!0),n(i)},disabled:!i.length,icon:(0,lr.jsx)(B_,{})}),open:l,onDropdownVisibleChange:t=>{c(u.length>0&&t)}}),(0,lr.jsx)(id,{type:"primary",danger:!0,style:{marginLeft:"10px"},disabled:!a||0===i.length,icon:a?(0,lr.jsx)(sg,{}):(0,lr.jsx)(hB,{}),children:a&&0!==i.length?(0,lr.jsx)(uw,{title:"Delete",description:"Are you sure you want to delete this item?",onConfirm:()=>{const t=[...i];o([]),s(!1),r(t)},onCancel:()=>{Hh.error("Deletion Failed")},okText:"Yes",cancelText:"No",children:"Delete"}):"Delete"},"delete")]})};var dB=function(){const[t,e]=(0,m.useState)([]),[n,r]=(0,m.useState)("Rider Routes"),[i,o]=(0,m.useState)(1),[a,s]=(0,m.useState)(1),[l,c]=(0,m.useState)([]),[u,h]=(0,m.useState)(""),p=ht();(0,m.useEffect)((()=>{(async()=>{try{const t=await Pn.get("/api/v1/admin/check-login",{headers:{Cookies:jt.get("admin_cookie")}});if(200===t.status){const{alreadyLoggedIn:e}=t.data;e||(sr.error("You are not logged in"),p("/"))}}catch(t){console.error(t),sr.error("Server Error: "+t.message)}})()}),[]);const d=async()=>{try{let t;"Rider Routes"===n?t=await Pn.get("/api/v1/pagecount",{params:{tableName:"rroutes",tagsList:u.length>0?u.join(","):""},headers:{Cookies:jt.get("admin_cookie")}}):"Driver Routes"===n&&(t=await Pn.get("/api/v1/pagecount",{params:{tableName:"droutes",tagsList:u.length>0?u.join(","):""},headers:{Cookies:jt.get("admin_cookie")}})),s(t.data.pageCount.count)}catch(t){console.error("Error fetching Page Count:",t),t.response&&500===t.response.status?sr.error("Server Error: "+t.response.data):sr.error("Error fetching Page Count")}};(0,m.useEffect)((()=>{E(1),d(),"Rider Routes"===n?f():"Driver Routes"===n&&g()}),[n]),(0,m.useEffect)((()=>{y()}),[n,i,a]),(0,m.useEffect)((()=>{console.log("Search selected tags:",u),E(1),d(),y()}),[u]),(0,m.useEffect)((()=>{console.log("Check page changed1",i)}),[i]);const f=async()=>{try{let t;t=await Pn.get("/api/v1/rroutes/tag",{headers:{Cookies:jt.get("admin_cookie")}}),c(t.data.route_tags)}catch(t){console.error("Error fetching data:",t),t.response&&403===t.response.status&&"Access denied"===t.response.data?sr.error("Access denied"):t.response&&500===t.response.status?sr.error("Server Error: "+t.response.data):sr.error("Failed to fetch data")}},g=async()=>{try{let t;t=await Pn.get("/api/v1/droutes/tag",{headers:{Cookies:jt.get("admin_cookie")}}),c(t.data.route_tags)}catch(t){console.error("Error fetching data:",t),t.response&&403===t.response.status&&"Access denied"===t.response.data?sr.error("Access denied"):t.response&&500===t.response.status?sr.error("Server Error: "+t.response.data):sr.error("Failed to fetch data")}},y=async()=>{try{let t;console.log("fetch Data:",u),"Rider Routes"===n?(t=await Pn.get("/api/v1/rroutes",{params:{tagsList:u.length>0?u.join(","):"",pageNumber:i},headers:{Cookies:jt.get("admin_cookie")}}),e(t.data.rider_routes)):"Driver Routes"===n&&(t=await Pn.get("/api/v1/droutes",{params:{tagsList:u.length>0?u.join(","):"",pageNumber:i},headers:{Cookies:jt.get("admin_cookie")}}),e(t.data.driver_routes))}catch(t){console.error("Error fetching data:",t),t.response&&403===t.response.status&&"Access denied"===t.response.data?sr.error("Access denied"):t.response&&500===t.response.status?sr.error("Server Error: "+t.response.data):sr.error("Failed to fetch data")}},v=[{title:"Rider Routes"===n?"Rider ID":"Driver ID",dataIndex:"Rider Routes"===n?"rider_id":"driver_id",key:"Rider Routes"===n?"rider_id":"driver_id"},{title:"Rider Routes"===n?"Rroutes ID":"Droutes ID",dataIndex:"Rider Routes"===n?"rroute_id":"droute_id",key:"Rider Routes"===n?"rroute_id":"droute_id"},{title:"Origin",dataIndex:"origin_node",key:"origin_node"},{title:"Destination",dataIndex:"destination_node",key:"destination_node"},{title:"Departure",dataIndex:"departure_time",key:"departure_time"},..."Driver Routes"===n?[{title:"Capacity",dataIndex:"capacity",key:"capacity"},{title:"Max Wait",dataIndex:"max_wait",key:"max_wait"},{title:"Fixed Route",dataIndex:"fixed_route",key:"fixed_route"}]:[],{title:"Status",dataIndex:"status",key:"status"},{title:"Tags",dataIndex:"Driver Routes"===n?"droute_dbm_tag":"rroute_dbm_tag",key:"Driver Routes"===n?"droute_dbm_tag":"rroute_dbm_tag"},{title:"Purge",key:"action",render:(t,e)=>(0,lr.jsx)(uw,{title:"Delete",description:"Are you sure you want to delete this item?",onConfirm:()=>b({id:e.rroute_id||e.droute_id}),onCancel:w,okText:"Yes",cancelText:"No",children:(0,lr.jsx)(id,{danger:!0,children:"Delete"})})}],x=t=>{let e=[];"Rider Routes"===n?e={filterList:[{name:"status",value:t.status,d_type:"varchar"},{name:"departure_time",start:t.start,end:t.end,d_type:"datetime"}],tableName:"rroutes"}:"Driver Routes"===n&&(e={filterList:[{name:"status",value:t.status,d_type:"varchar"},{name:"fixed_route",value:t.fixed_route,d_type:"boolean"},{name:"max_wait",value:t.max_wait,d_type:"integer"},{name:"capacity",value:t.capacity,d_type:"integer"},{name:"departure_time",start:t.start,end:t.end,d_type:"datetime"}],tableName:"droutes"}),_(e)},_=async t=>{let e;try{e=await Pn.post("/api/v1/truncate/selected-filter",{Data:t},{headers:{Cookies:jt.get("admin_cookie")}}),200===e.status&&(0===e.data.rowCount?sr.success("No such Routes Exist"):sr.success(e.data.rowCount+" Rows Truncated"),y())}catch(n){n.response&&403===n.response.status&&"Only Super Admin can perform this operation"===n.response.data?sr.error("Only Super Admin can perform this operation"):n.response&&500===n.response.status?sr.error("Server Error: "+n.response.data):e&&400===e.status?sr.error("Invalid filters or table name"):sr.error("Failed to purge filters")}},b=async t=>{let e;try{"Driver Routes"===n?e=await Pn.delete("/api/v1/driver/droutes",{params:{droute_id:t.id},headers:{Cookies:jt.get("admin_cookie")}}):"Rider Routes"===n&&(e=await Pn.delete("/api/v1/rider/rroutes",{params:{rroute_id:t.id},headers:{Cookies:jt.get("admin_cookie")}})),200===e.status&&(sr.success("Route deleted successfully!"),y())}catch(r){console.error("Error deleting route:",r),r.response&&400===r.response.status?sr.error("Invalid Data"):r.response&&403===r.response.status&&"Only Super Admin can perform this operation"===r.response.data?sr.error("Only Super Admin can perform this operation"):r.response&&500===r.response.status?sr.error("Server Error: "+r.response.data):sr.error("Error deleting route")}},w=()=>{Hh.error("Deletion Failed")},S=async t=>{let e;const r=t;try{const t=await(i=r,new Promise(((t,e)=>{const n=new FileReader;n.onload=e=>{const n=e.target.result.split("\r\n").map((t=>t.split(",")));t(n)},n.onerror=t=>{e(new Error("Error reading CSV file"))},n.readAsText(i)}))),o=t[0],a=t.slice(1);for(const r of a){const t={};o.forEach(((e,n)=>{t[e]=r[n]}));const i={row:t},a="Rider Routes"===n?"/api/v1/rider/route":"/api/v1/driver/route";e=await Pn.post(a,i,{headers:{Cookies:jt.get("admin_cookie"),"Content-Type":"application/json"}})}200===e.status&&(sr.success("Data uploaded successfully"),y())}catch(o){console.error("Error uploading data:",o),o.response&&403===o.response.status&&"Access denied"===o.response.data?sr.error("Access denied"):o.response&&400===o.response.status?sr.error("Error: "+o.response.message):o.response&&500===o.response.status?sr.error("Server Error: "+o.response.data.message):sr.error("Failed to upload data")}var i},C=async t=>{console.log("Uploading",t);const e=t.originFileObj;try{let t;const r=new FormData;r.append("file",e),console.log("Uploading",r),"Rider Routes"===n?t=await Pn.post("/api/v1/rider/route/batchimport",r,{headers:{Cookies:jt.get("admin_cookie"),"Content-Type":"multipart/form-data"}}):"Driver Routes"===n&&(t=await Pn.post("/api/v1/driver/route/batchimport",r,{headers:{Cookies:jt.get("admin_cookie"),"Content-Type":"multipart/form-data"}})),200===t.status&&(sr.success("Data uploaded successfully"),y())}catch(r){console.error("Error Uploading data:",r),403===r.response.status&&"Access denied"===r.response.data?sr.error("Access denied"):400===r.response.status?sr.error("Error: "+r.response.message):500===r.response.status?sr.error("Server Error: "+r.response.message):sr.error("Failed to Upload data")}},E=t=>{o(t)};return(0,lr.jsx)(lr.Fragment,{children:(0,lr.jsxs)("div",{className:"dashboard-content",children:[(0,lr.jsx)(xr,{btnText:"Refresh"}),(0,lr.jsxs)("div",{className:"dashboard-content-container",children:[(0,lr.jsxs)("div",{className:"dashboard-content-header",children:[(0,lr.jsx)("h2",{children:"Rider Routes"===n?"Rider Routes":"Driver Routes"}),(0,lr.jsx)(lB,{selectedOption:n,onData:async t=>{const e=t[0],n=t[1];"Bulk Import"===e?C(n):"Batch Import"===e&&S(n)}}),"Rider Routes"===n?(0,lr.jsx)(Kz,{onData:x}):(0,lr.jsx)(nB,{onData:x}),(0,lr.jsx)(pB,{tags:l,onSearch:t=>{console.log("Search selected items:",t),h(t)},onDelete:async t=>{let e;console.log("Delete selected items:",t);try{"Driver Routes"===n?e=await Pn.delete("/api/v1/droutes/filter/tag",{params:{tagsList:t.join(",")},headers:{Cookies:jt.get("admin_cookie")}}):"Rider Routes"===n&&(e=await Pn.delete("/api/v1/rroutes/filter/tag",{params:{tagsList:t.join(",")},headers:{Cookies:jt.get("admin_cookie")}})),y()}catch(r){console.error("Error Fetching route Tags:",r),r.response&&400===r.response.status?sr.error("Invalid Data"):r.response&&403===r.response.status&&"Only Super Admin can perform this operation"===r.response.data?sr.error("Only Super Admin can perform this operation"):r.response&&500===r.response.status?sr.error("Server Error: "+r.response.data):sr.error("Error Fetching route Tags")}}}),(0,lr.jsx)("div",{className:"dashboard-content-dropdown",children:(0,lr.jsxs)("select",{value:n,onChange:t=>{r(t.target.value)},children:[(0,lr.jsx)("option",{value:"Rider Routes",children:"Rider Routes"}),(0,lr.jsx)("option",{value:"Driver Routes",children:"Driver Routes"})]})})]}),(0,lr.jsx)(RR,{rowKey:t=>t.rroute_id||t.droute_id,columns:v,dataSource:t,pagination:!1,rowClassName:(t,e)=>e%2===0?"row-even":"row-odd"}),(0,lr.jsx)(Kn,{}),(0,lr.jsx)("div",{className:"pagination-container",children:(0,lr.jsx)(Uk,{simple:!0,current:i,total:a,onChange:E})})]})]})})},fB=n(5483),gB=n.n(fB),mB=function(){return mB=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},mB.apply(this,arguments)},yB={onResize:"resize",onDblClick:"dblclick",onClick:"click",onMouseMove:"mousemove",onMouseOut:"mouseout",onMoveStart:"movestart",onMove:"move",onMoveEnd:"moveend",onMouseUp:"mouseup",onMouseDown:"mousedown",onDragStart:"dragstart",onDrag:"drag",onDragEnd:"dragend",onZoomStart:"zoomstart",onZoom:"zoom",onZoomEnd:"zoomend",onPitch:"pitch",onPitchStart:"pitchstart",onPitchEnd:"pitchend",onWebGlContextLost:"webglcontextlost",onWebGlContextRestored:"webglcontextrestored",onRemove:"remove",onContextMenu:"contextmenu",onRender:"render",onError:"error",onSourceData:"sourcedata",onDataLoading:"dataloading",onStyleDataLoading:"styledataloading",onStyleImageMissing:"styleimagemissing",onTouchCancel:"touchcancel",onData:"data",onSourceDataLoading:"sourcedataloading",onTouchMove:"touchmove",onTouchEnd:"touchend",onTouchStart:"touchstart",onStyleData:"styledata",onBoxZoomStart:"boxzoomstart",onBoxZoomEnd:"boxzoomend",onBoxZoomCancel:"boxzoomcancel",onRotateStart:"rotatestart",onRotate:"rotate",onRotateEnd:"rotateend"},vB=function(t,e,n){return Object.keys(t).reduce((function(r,i){var o=e[i];if(o){var a=function(t){o(n,t)};n.on(t[i],a),r[i]=a}return r}),{})},xB=function(){return xB=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},xB.apply(this,arguments)},_B=m.createContext(void 0);function bB(t){return function(e){return m.createElement(_B.Consumer,null,(function(n){return m.createElement(t,xB({map:n},e))}))}}var wB=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),SB=function(){return SB=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},SB.apply(this,arguments)},CB=n(2722),EB=[11],kB="flyTo",MB=[-.2416815,51.5285582],TB=function(t){var e,n=t.accessToken,r=t.apiUrl,i=t.minZoom,o=void 0===i?0:i,a=t.maxZoom,s=void 0===a?20:a,l=t.hash,c=void 0!==l&&l,u=t.preserveDrawingBuffer,h=void 0!==u&&u,p=t.scrollZoom,d=void 0===p||p,f=t.interactive,g=void 0===f||f,y=t.dragRotate,v=void 0===y||y,x=t.pitchWithRotate,_=void 0===x||x,b=t.attributionControl,w=void 0===b||b,S=t.customAttribution,C=t.logoPosition,E=void 0===C?"bottom-left":C,k=t.renderWorldCopies,M=void 0===k||k,T=t.trackResize,I=void 0===T||T,P=t.touchZoomRotate,O=void 0===P||P,A=t.doubleClickZoom,D=void 0===A||A,R=t.keyboard,L=void 0===R||R,N=t.dragPan,F=void 0===N||N,z=t.boxZoom,B=void 0===z||z,$=t.refreshExpiredTiles,j=void 0===$||$,U=t.failIfMajorPerformanceCaveat,V=void 0!==U&&U,H=t.bearingSnap,G=void 0===H?7:H,W=t.antialias,X=void 0!==W&&W,q=t.mapInstance,Y=t.transformRequest;return e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={map:q,ready:!1},e.listeners={},e._isMounted=!0,e.calcCenter=function(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]},e.setRef=function(t){e.container=t},e}return wB(e,t),e.prototype.componentDidMount=function(){var t=this,e=this.props,i=e.style,a=e.onStyleLoad,l=e.center,u=e.pitch,p=e.zoom,f=e.fitBounds,m=e.fitBoundsOptions,y=e.bearing,x=e.maxBounds;if(fB.accessToken=n,r&&(fB.config.API_URL=r),!Array.isArray(p))throw new Error("zoom need to be an array type of length 1 for reliable update");var b={preserveDrawingBuffer:h,hash:c,zoom:p[0],minZoom:o,maxZoom:s,maxBounds:x,container:this.container,center:f&&l===MB?this.calcCenter(f):l,style:i,scrollZoom:d,attributionControl:w,customAttribution:S,interactive:g,dragRotate:v,pitchWithRotate:_,renderWorldCopies:M,trackResize:I,touchZoomRotate:O,doubleClickZoom:D,keyboard:L,dragPan:F,boxZoom:B,refreshExpiredTiles:j,logoPosition:E,bearingSnap:G,failIfMajorPerformanceCaveat:V,antialias:X,transformRequest:Y};if(y){if(!Array.isArray(y))throw new Error("bearing need to be an array type of length 1 for reliable update");b.bearing=y[0]}if(u){if(!Array.isArray(u))throw new Error("pitch need to be an array type of length 1 for reliable update");b.pitch=u[0]}var C=this.state.map;C||(C=new fB.Map(b),this.setState({map:C})),f&&C.fitBounds(f,m,{fitboundUpdate:!0}),C.on("load",(function(e){t._isMounted&&t.setState({ready:!0}),a&&a(C,e)})),this.listeners=vB(yB,this.props,C)},e.prototype.componentWillUnmount=function(){var t=this.state.map;this._isMounted=!1,t&&t.remove()},e.prototype.componentDidUpdate=function(t){var e=this,n=this.state.map;if(!n)return null;this.listeners=function(t,e,n){Object.keys(yB).filter((function(n){return t[n]&&"function"!==typeof e[n]})).forEach((function(e){n.off(yB[e],t[e]),delete t[e]}));var r=Object.keys(yB).filter((function(n){return!t[n]&&"function"===typeof e[n]})).reduce((function(t,e){return t[e]=yB[e],t}),{}),i=vB(r,e,n);return mB({},t,i)}(this.listeners,this.props,n);var r=n.getCenter(),i=n.getZoom(),o=n.getBearing(),a=n.getPitch(),s=t.zoom!==this.props.zoom&&(this.props.zoom&&this.props.zoom[0])!==i,l=t.center!==this.props.center&&((this.props.center&&this.props.center[0])!==r.lng||(this.props.center&&this.props.center[1])!==r.lat),c=t.bearing!==this.props.bearing&&(this.props.bearing&&this.props.bearing[0])!==o,u=t.pitch!==this.props.pitch&&(this.props.pitch&&this.props.pitch[0])!==a;this.props.maxBounds&&(t.maxBounds!==this.props.maxBounds&&n.setMaxBounds(this.props.maxBounds));if(this.props.fitBounds){var h=t.fitBounds;!(h!==this.props.fitBounds||this.props.fitBounds.length!==(h&&h.length)||!!h.filter((function(t,n){var r=e.props.fitBounds&&e.props.fitBounds[n];return t[0]!==(r&&r[0])||t[1]!==(r&&r[1])}))[0])&&CB(t.fitBoundsOptions,this.props.fitBoundsOptions)||n.fitBounds(this.props.fitBounds,this.props.fitBoundsOptions,{fitboundUpdate:!0})}if(s||l||c||u){var p=this.props.movingMethod||kB,d=this.props,f=d.flyToOptions,g=d.animationOptions;n[p](SB({},g,f,{zoom:s&&this.props.zoom?this.props.zoom[0]:i,center:l?this.props.center:r,bearing:c?this.props.bearing:o,pitch:u?this.props.pitch:a}))}return CB(t.style,this.props.style)||n.setStyle(this.props.style),null},e.prototype.render=function(){var t=this.props,e=t.containerStyle,n=t.className,r=t.children,i=t.renderChildrenInPortal,o=this.state,a=o.ready,s=o.map;if(i){var l=a&&s&&"function"===typeof s.getCanvasContainer?s.getCanvasContainer():void 0;return m.createElement(_B.Provider,{value:s},m.createElement("div",{ref:this.setRef,className:n,style:SB({},e)},a&&l&&(0,Dr.createPortal)(r,l)))}return m.createElement(_B.Provider,{value:s},m.createElement("div",{ref:this.setRef,className:n,style:SB({},e)},a&&r))},e}(m.Component),e.defaultProps={onStyleLoad:function(t,e){return null},center:MB,zoom:EB,bearing:0,movingMethod:kB,pitch:0,containerStyle:{textAlign:"left"}},e},IB=function(t,e){var n={};return Array.from(new Set(Object.keys(t).concat(Object.keys(e)))).map((function(r){t[r]!==e[r]&&(n[r]=e[r])})),n},PB=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),OB=function(){return OB=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},OB.apply(this,arguments)},AB=n(2722),DB={touchstart:"onTouchStart",touchend:"onTouchEnd",touchcancel:"onTouchCancel",mousemove:"onMouseMove",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousedown:"onMouseDown",mouseup:"onMouseUp",click:"onClick"},RB=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.source=OB({type:"geojson"},e.props.geoJSONSourceOptions,{data:{type:"FeatureCollection",features:[]}}),e.geometry=function(t){switch(e.props.type){case"symbol":case"circle":default:return{type:"Point",coordinates:t};case"fill":return Array.isArray(t[0][0][0])?{type:"MultiPolygon",coordinates:t}:{type:"Polygon",coordinates:t};case"line":return{type:"LineString",coordinates:t}}},e.makeFeature=function(t,n){return{type:"Feature",geometry:e.geometry(t.coordinates),properties:OB({},t.properties,{id:n})}},e.initialize=function(){var t=e.props,n=t.type,r=t.layout,i=t.paint,o=t.sourceId,a=t.before,s=t.images,l=t.id,c=t.metadata,u=t.sourceLayer,h=t.minZoom,p=t.maxZoom,d=t.filter,f=e.props.map,g={id:l,source:o||l,type:n,layout:r,paint:i,metadata:c};(u&&(g["source-layer"]=u),h&&(g.minzoom=h),p&&(g.maxzoom=p),d&&(g.filter=d),s)&&(Array.isArray(s[0])?s:[s]).filter((function(t){return!f.hasImage(t[0])})).forEach((function(t){f.addImage(t[0],t[1],t[2])}));o||f.getSource(l)||f.addSource(l,e.source),f.getLayer(l)||f.addLayer(g,a),Object.entries(DB).forEach((function(t){var n=t[0],r=t[1],i=e.props[r];i&&f.on(n,l,i)}))},e.onStyleDataChange=function(){e.props.map.getLayer(e.props.id)||(e.initialize(),e.forceUpdate())},e.getChildren=function(){var t=e.props.children;return t?Array.isArray(t)?t.reduce((function(t,e){return t.concat(e)}),[]):[t]:[]},e}return PB(e,t),e.prototype.componentDidMount=function(){var t=this.props.map;this.initialize(),t.on("styledata",this.onStyleDataChange)},e.prototype.componentWillUnmount=function(){var t=this,e=this.props.map,n=this.props,r=n.images,i=n.id;e&&e.getStyle()&&(e.off("styledata",this.onStyleDataChange),Object.entries(DB).forEach((function(n){var r=n[0],o=n[1],a=t.props[o];a&&e.off(r,i,a)})),e.getLayer(i)&&e.removeLayer(i),this.props.sourceId||e.removeSource(i),r&&(Array.isArray(r[0])?r:[r]).map((function(t){var e=t[0];t.slice(1);return e})).forEach(e.removeImage.bind(e)))},e.prototype.componentDidUpdate=function(t){var e=this,n=t.paint,r=t.layout,i=t.before,o=t.filter,a=t.id,s=t.minZoom,l=t.maxZoom,c=t.map;if(!AB(this.props.paint,n)){var u=IB(n,this.props.paint);Object.keys(u).forEach((function(t){c.setPaintProperty(a,t,u[t])}))}if(!AB(this.props.layout,r)){var h=IB(r,this.props.layout);Object.keys(h).forEach((function(t){c.setLayoutProperty(a,t,h[t])}))}AB(this.props.filter,o)||c.setFilter(a,this.props.filter),i!==this.props.before&&c.moveLayer(a,this.props.before),s===this.props.minZoom&&l===this.props.maxZoom||c.setLayerZoomRange(a,this.props.minZoom,this.props.maxZoom),Object.entries(DB).forEach((function(n){var r=n[0],i=n[1],o=t[i],s=e.props[i];o!==s&&(o&&c.off(r,a,o),s&&c.on(r,a,s))}))},e.prototype.render=function(){var t=this,e=this.props.map,n=this.props,r=n.sourceId,i=n.draggedChildren,o=this.getChildren();if(i){var a=i.map((function(t){return t.key}));o=o.map((function(t){var e=a.indexOf(t.key);return-1!==e?i[e]:t}))}var s=o.map((function(e,n){var r=e.props;return t.makeFeature(r,n)})).filter(Boolean),l=e.getSource(r||this.props.id);return l&&!r&&l.setData&&l.setData({type:"FeatureCollection",features:s}),null},e.defaultProps={type:"symbol",layout:{},paint:{}},e}(m.Component),LB=RB,NB=0,FB=function(){return NB+=1},zB=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),BB=function(){return BB=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},BB.apply(this,arguments)};var $B=function(t){return function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.hover=[],t.draggedChildren=void 0,t.id=t.props.id||"layer-"+FB(),t.getChildren=function(){return[].concat(t.props.children).filter((function(t){return"undefined"!==typeof t}))},t.getChildFromId=function(t,e){return t[e]},t.areFeaturesDraggable=function(e,n){return void 0===n&&(n=t.hover),!!n.map((function(n){return!!t.getChildFromId(e,n)&&t.getChildFromId(e,n).props.draggable})).filter(Boolean).length},t.onClick=function(e){var n=e.features,r=t.getChildren(),i=t.props.map;n&&n.forEach((function(n){var o=n.properties.id;if(r){var a=t.getChildFromId(r,o),s=a&&a.props.onClick;s&&s(BB({},e,{feature:n,map:i}))}}))},t.onMouseEnter=function(e){var n=t.getChildren(),r=t.props.map;t.hover=[],e.features.forEach((function(i){var o=i.properties.id,a=t.getChildFromId(n,o);t.hover.push(o);var s=a&&a.props.onMouseEnter;s&&s(BB({},e,{feature:i,map:r}))})),t.areFeaturesDraggable(n)&&r.dragPan.disable()},t.onMouseLeave=function(e){var n=t.getChildren(),r=t.props.map;t.areFeaturesDraggable(n)&&r.dragPan.enable(),t.hover.forEach((function(i){var o=t.getChildFromId(n,i),a=o&&o.props.onMouseLeave;a&&a(BB({},e,{map:r}))})),t.draggedChildren||(t.hover=[])},t.onMouseDown=function(){t.hover.length&&t.onFeatureDown("mousedown")},t.onTouchStart=function(e){t.hover=e.features.map((function(t){return t.properties.id})),t.hover.length&&t.onFeatureDown("touchstart")},t.onFeatureDown=function(e){var n="mousedown"===e?"mousemove":"touchmove",r="mousedown"===e?"mouseup":"touchend",i=t.props.map;i.once(n,t.onFeatureDragStart),i.on(n,t.onFeatureDrag),i.once(r,(function(e){i.off(n,t.onFeatureDragStart),i.off(n,t.onFeatureDrag),t.onFeatureDragEnd(e)}))},t.onFeatureDragStart=function(e){var n=t.props.map,r=t.getChildren();t.hover.forEach((function(i){var o=t.getChildFromId(r,i);if(!o||o.props.draggable){var a=o&&o.props.onDragStart;a&&a(BB({},e,{map:n}))}}))},t.onFeatureDrag=function(e){var n=t.getChildren(),r=t.props.map,i=e.lngLat,o=i.lng,a=i.lat;t.draggedChildren=[],t.hover.forEach((function(i){var s=t.getChildFromId(n,i),l=s&&s.props.onDrag;s&&s.props.draggable&&(t.draggedChildren.push(m.cloneElement(s,{coordinates:[o,a]})),l&&l(BB({},e,{map:r})))})),t.forceUpdate()},t.onFeatureDragEnd=function(e){var n=t.props.map,r=t.getChildren();t.hover.forEach((function(i){var o=t.getChildFromId(r,i),a=o&&o.props.onDragEnd;a&&o.props.draggable&&t.draggedChildren&&a(BB({},e,{map:n}))})),t.draggedChildren=void 0},t}return zB(n,e),n.prototype.componentDidMount=function(){var t=this.props.map;t.on("click",this.id,this.onClick),t.on("mouseenter",this.id,this.onMouseEnter),t.on("mouseleave",this.id,this.onMouseLeave),t.on("mousedown",this.id,this.onMouseDown),t.on("touchstart",this.id,this.onTouchStart)},n.prototype.componentWillUnmount=function(){var t=this.props.map;t.off("click",this.onClick),t.off("mouseenter",this.onMouseEnter),t.off("mouseleave",this.onMouseLeave),t.off("mousedown",this.onMouseDown),t.off("touchstart",this.onTouchStart)},n.prototype.render=function(){return m.createElement(t,BB({},this.props,{id:this.id,map:this.props.map,draggedChildren:this.draggedChildren}))},n}(m.Component)},jB=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),UB=function(){return UB=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},UB.apply(this,arguments)},VB=n(2722),HB=["symbol","line","fill","fill-extrusion","circle"],GB=function(t){return t.replace(/(?:^\w|[A-Z]|\b\w)/g,(function(t,e){return 0===e?t.toLowerCase():t.toUpperCase()})).replace(/[\s+]|-/g,"")},WB={mousemove:"OnMouseMove",mouseenter:"OnMouseEnter",mouseleave:"OnMouseLeave",mousedown:"OnMouseDown",mouseup:"OnMouseUp",click:"OnClick"},XB=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id=e.props.id||"geojson-"+FB(),e.source=UB({type:"geojson"},e.props.sourceOptions,{data:e.props.data}),e.layerIds=[],e.buildLayerId=function(t){return e.id+"-"+t},e.createLayer=function(t){var n=e.props,r=n.before,i=n.layerOptions,o=n.map,a=e.buildLayerId(t);e.layerIds.push(a);var s=e.props[GB(t)+"Paint"]||{},l=Object.keys(s).length?"visible":"none",c=e.props[GB(t)+"Layout"]||{visibility:l},u=UB({id:a,source:e.id,type:t,paint:s,layout:c},i);o.addLayer(u,r),e.mapLayerMouseHandlers(t)},e.mapLayerMouseHandlers=function(t){var n=e.props.map,r=e.buildLayerId(t);Object.keys(WB).forEach((function(i){var o=e.props[""+GB(t)+WB[i]]||null;o&&n.on(i,r,o)}))},e.onStyleDataChange=function(){e.props.map.getSource(e.id)||(e.unbind(),e.initialize(),e.forceUpdate())},e.isGeoJSONSource=function(t){return!!t&&"function"===typeof t.setData},e}return jB(e,t),e.prototype.initialize=function(){this.props.map.addSource(this.id,this.source),this.createLayer("symbol"),this.createLayer("line"),this.createLayer("fill"),this.createLayer("fill-extrusion"),this.createLayer("circle")},e.prototype.unbind=function(){var t=this,e=this.props.map;if(e.getSource(this.id)){var n=e.getStyle().layers;n&&n.filter((function(e){return e.source===t.id})).forEach((function(t){return e.removeLayer(t.id)})),e.removeSource(this.id)}HB.forEach((function(n){Object.keys(WB).forEach((function(r){var i=GB(n)+WB[r];t.props[i]&&e.off(r,t.buildLayerId(n),t.props[i])}))})),this.layerIds.forEach((function(t){e.getLayer(t)&&e.removeLayer(t)}))},e.prototype.componentDidMount=function(){var t=this.props.map;this.initialize(),t.on("styledata",this.onStyleDataChange)},e.prototype.componentWillUnmount=function(){var t=this.props.map;t&&t.getStyle()&&(t.off("styledata",this.onStyleDataChange),this.unbind())},e.prototype.componentDidUpdate=function(t){var e=this,n=t.data,r=t.before,i=t.layerOptions,o=t.map,a=o.getSource(this.id);if(this.isGeoJSONSource(a)){this.props.data!==n&&(a.setData(this.props.data),this.source=UB({type:"geojson"},this.props.sourceOptions,{data:this.props.data}));var s=this.props.layerOptions&&i&&!VB(this.props.layerOptions.filter,i.filter);HB.forEach((function(n){var i=e.buildLayerId(n);e.props.layerOptions&&s&&o.setFilter(i,e.props.layerOptions.filter||[]);var a=GB(n)+"Paint";if(!VB(t[a],e.props[a])){var l=IB(t[a],e.props[a]);Object.keys(l).forEach((function(t){o.setPaintProperty(i,t,l[t])}))}var c=GB(n)+"Layout";if(!VB(t[c],e.props[c])){var u=IB(t[c],e.props[c]);Object.keys(u).forEach((function(t){o.setLayoutProperty(i,t,u[t])}))}Object.keys(WB).forEach((function(r){var a=GB(n)+WB[r];t[a]!==e.props[a]&&(t[a]&&o.off(r,i,t[a]),e.props[a]&&o.on(r,i,e.props[a]))})),r!==e.props.before&&o.moveLayer(i,e.props.before)}))}},e.prototype.render=function(){return null},e}(m.Component),qB=(bB(XB),function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),YB=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}qB(e,t),e.prototype.render=function(){return null}}(m.Component),function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),ZB=function(){return ZB=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ZB.apply(this,arguments)},KB={position:"absolute",zIndex:10,display:"flex",flexDirection:"column",boxShadow:"0px 1px 4px rgba(0, 0, 0, .3)",border:"1px solid rgba(0, 0, 0, 0.1)"},JB={"top-right":{top:10,right:10,bottom:"auto",left:"auto"},"top-left":{top:10,left:10,bottom:"auto",right:"auto"},"bottom-right":{bottom:10,right:10,top:"auto",left:"auto"},"bottom-left":{bottom:10,left:10,top:"auto",right:"auto"}},QB={backgroundColor:"#f9f9f9",opacity:.95,transition:"background-color 0.16s ease-out",cursor:"pointer",border:0,height:26,width:26,backgroundImage:"url('https://api.mapbox.com/mapbox.js/v2.4.0/images/icons-000000@2x.png')",backgroundPosition:"0px 0px",backgroundSize:"26px 260px",outline:0},t$={backgroundColor:"#fff",opacity:1},e$={borderBottom:"1px solid rgba(0, 0, 0, 0.1)",borderTopLeftRadius:2,borderTopRightRadius:2},n$={backgroundPosition:"0px -26px",borderBottomLeftRadius:2,borderBottomRightRadius:2},r$=[0,1],i$=r$[0],o$=r$[1],a$=Object.keys(JB),s$=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={hover:void 0},e.onMouseOut=function(){e.setState({hover:void 0})},e.plusOver=function(){i$!==e.state.hover&&e.setState({hover:i$})},e.minusOver=function(){o$!==e.state.hover&&e.setState({hover:o$})},e.onClickPlus=function(){e.props.onControlClick(e.props.map,e.props.zoomDiff)},e.onClickMinus=function(){e.props.onControlClick(e.props.map,-e.props.zoomDiff)},e}return YB(e,t),e.prototype.render=function(){var t=this.props,e=t.position,n=t.style,r=t.className,i=t.tabIndex,o=this.state.hover,a=ZB({},QB,e$,o===i$?t$:{}),s=ZB({},QB,n$,o===o$?t$:{});return m.createElement("div",{className:r,tabIndex:i,style:ZB({},KB,JB[e],n)},m.createElement("button",{id:"zoomIn",type:"button",style:a,"aria-label":"Zoom in",onMouseOver:this.plusOver,onMouseOut:this.onMouseOut,onClick:this.onClickPlus}),m.createElement("button",{id:"zoomOut",type:"button",style:s,"aria-label":"Zoom out",onMouseOver:this.minusOver,onMouseOut:this.onMouseOut,onClick:this.onClickMinus}))},e.defaultProps={position:a$[0],zoomDiff:.5,onControlClick:function(t,e){t.zoomTo(t.getZoom()+e)}},e}(m.Component),l$=(bB(s$),["center","top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"]),c$={center:"translate(-50%, -50%)",top:"translate(-50%, 0)",left:"translate(0, -50%)",right:"translate(-100%, -50%)",bottom:"translate(-50%, -100%)","top-left":"translate(0, 0)","top-right":"translate(-100%, 0)","bottom-left":"translate(0, -100%)","bottom-right":"translate(-100%, -100%)"},u$={offsetWidth:0,offsetHeight:0},h$=[0,0],p$=function(t){if(!t)return p$(new fB.Point(0,0));if("number"===typeof t){var e=Math.round(Math.sqrt(.5*Math.pow(t,2)));return{center:new fB.Point(t,t),top:new fB.Point(0,t),bottom:new fB.Point(0,-t),left:new fB.Point(t,0),right:new fB.Point(-t,0),"top-left":new fB.Point(e,e),"top-right":new fB.Point(-e,e),"bottom-left":new fB.Point(e,-e),"bottom-right":new fB.Point(-e,-e)}}return t instanceof fB.Point||Array.isArray(t)?l$.reduce((function(e,n){return e[n]=fB.Point.convert(t),e}),{}):l$.reduce((function(e,n){return e[n]=fB.Point.convert(t[n]||h$),e}),{})},d$=function(t,e,n){var r=function(t,e){return t.project(fB.LngLat.convert(e))}(e,t.coordinates),i=p$(t.offset),o=t.anchor||function(t,e,n,r){var i=void 0===r?u$:r,o=i.offsetHeight,a=i.offsetWidth,s=[];return n.y+e.bottom.y-o<0?s=[l$[1]]:n.y+e.top.y+o>t.transform.height&&(s=[l$[2]]),n.x<a/2?s.push(l$[3]):n.x>t.transform.width-a/2&&s.push(l$[4]),0===s.length?l$[2]:s.join("-")}(e,i,r,n);return{anchor:o,position:r,offset:i[o]}},f$=function(t){return t?"translate("+t.x.toFixed(0)+"px, "+t.y.toFixed(0)+"px)":""},g$=function(t){var e=t.anchor,n=t.position,r=t.offset,i=[];return n&&i.push(f$(n)),r&&void 0!==r.x&&void 0!==r.y&&i.push(f$(r)),e&&i.push(c$[e]),i},m$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),y$=function(){return y$=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},y$.apply(this,arguments)},v$={zIndex:3},x$=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.container=void 0,e.prevent=!1,e.state={},e.setContainer=function(t){t&&(e.container=t)},e.handleMapMove=function(){e.prevent||e.setState(d$(e.props,e.props.map,e.container))},e}return m$(e,t),e.prototype.componentDidMount=function(){this.props.map.on("move",this.handleMapMove),this.handleMapMove()},e.prototype.havePropsChanged=function(t,e){return t.coordinates[0]!==e.coordinates[0]||t.coordinates[1]!==e.coordinates[1]||t.offset!==e.offset||t.anchor!==e.anchor},e.prototype.componentDidUpdate=function(t){this.havePropsChanged(this.props,t)&&this.setState(d$(this.props,this.props.map,this.container))},e.prototype.componentWillUnmount=function(){var t=this.props.map;this.prevent=!0,t.off("move",this.handleMapMove)},e.prototype.render=function(){var t=this.props,e=t.style,n=t.children,r=t.className,i=t.onClick,o=t.onDoubleClick,a=t.onMouseEnter,s=t.onMouseLeave,l=t.onScroll,c=t.onWheel,u=t.type,h=t.tabIndex,p=this.state.anchor,d=y$({},v$,e,{transform:g$(this.state).join(" ")}),f=p&&"popup"===u?"mapboxgl-popup-anchor-"+p:"";return m.createElement("div",{className:r+" "+f,onClick:i,onDoubleClick:o,onMouseEnter:a,onMouseLeave:s,onScroll:l,onWheel:c,style:d,ref:this.setContainer,tabIndex:h},n)},e.defaultProps={offset:0,onClick:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t}},e}(m.Component),_$=bB(x$),b$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),w$=function(){return w$=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},w$.apply(this,arguments)},S$=["mapboxgl-popup"],C$=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}b$(e,t),e.prototype.render=function(){var t=this.props,e=t.children,n=t.className,r=w$({},this.props,{children:void 0}),i=function(t,e){return e?e.split(" ").concat(t).join(" "):t.join(" ")}(S$,n);return m.createElement(_$,w$({},r,{type:"popup",className:i}),m.createElement("div",{className:"mapboxgl-popup-tip"}),m.createElement("div",{className:"mapboxgl-popup-content"},e))}}(m.Component),function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),E$=function(){return E$=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},E$.apply(this,arguments)},k$=["moveend","touchend","zoomend"],M$=[.01,.02,.05,.1,.2,.5,1,2,5,10,20,50,100,200,500,1e3,2e3,5e3,1e4],T$={"top-right":{top:10,right:10,bottom:"auto",left:"auto"},"top-left":{top:10,left:10,bottom:"auto",right:"auto"},"bottom-right":{bottom:10,right:10,top:"auto",left:"auto"},"bottom-left":{bottom:10,left:10,top:"auto",right:"auto"}},I$={position:"absolute",zIndex:10,boxShadow:"0px 1px 4px rgba(0, 0, 0, .3)",border:"1px solid rgba(0, 0, 0, 0.1)",right:50,backgroundColor:"#fff",opacity:.85,display:"flex",flexDirection:"row",alignItems:"baseline",padding:"3px 7px"},P$={border:"2px solid #7e8490",boxShadow:"0px 1px 4px rgba(0, 0, 0, .3)",borderTop:"none",height:7,borderBottomLeftRadius:1,borderBottomRightRadius:1},O$=Object.keys(T$),A$=["km","mi"],D$=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={chosenScale:0,scaleWidth:60},e.setScale=function(){var t=e.props,n=t.measurement,r=t.map,i=r._canvas.clientWidth,o=r.getBounds(),a=o._ne,s=o._sw,l=e._getDistanceTwoPoints([s.lng,a.lat],[a.lng,a.lat],n),c=l/i*60,u=M$.reduce((function(t,e){return!t&&e>c?e:t}),0),h=u/l*i;e.setState({chosenScale:u,scaleWidth:h})},e}return C$(e,t),e.prototype.componentDidMount=function(){var t=this;this.setScale(),k$.forEach((function(e){t.props.map.on(e,t.setScale)}))},e.prototype.componentWillUnmount=function(){var t=this;this.props.map&&k$.forEach((function(e){t.props.map.off(e,t.setScale)}))},e.prototype._getDistanceTwoPoints=function(t,e,n){void 0===n&&(n="km");var r=t[0],i=t[1],o=e[0],a=e[1],s="km"===n?6371:6371/1.60934,l=this._deg2rad(a-i),c=this._deg2rad(o-r),u=Math.sin(l/2)*Math.sin(l/2)+Math.cos(this._deg2rad(i))*Math.cos(this._deg2rad(a))*Math.sin(c/2)*Math.sin(c/2);return s*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))},e.prototype._deg2rad=function(t){return t*(Math.PI/180)},e.prototype._displayMeasurement=function(t,e){return e>=1?e+" "+t:"mi"===t?Math.floor(5280*e)+" ft":Math.floor(1e3*e)+" m"},e.prototype.render=function(){var t=this.props,e=t.measurement,n=t.style,r=t.position,i=t.className,o=t.tabIndex,a=this.state,s=a.chosenScale,l=a.scaleWidth;return m.createElement("div",{tabIndex:o,style:E$({},I$,T$[r],n),className:i},m.createElement("div",{style:E$({},P$,{width:l})}),m.createElement("div",{style:{paddingLeft:10}},this._displayMeasurement(e,s)))},e.defaultProps={measurement:A$[0],position:O$[2]},e}(m.Component),R$=(bB(D$),function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),L$=function(){return L$=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},L$.apply(this,arguments)},N$=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id=e.props.id,e.onStyleDataChange=function(){e.props.map.getLayer(e.id)||(e.initialize(),e.forceUpdate())},e.initialize=function(){var t=e.props.map,n=e.props,r=n.geoJsonSource,i=n.tileJsonSource,o=n.onSourceAdded;t.getSource(e.id)||!r&&!i||(r?t.addSource(e.id,r):i&&t.addSource(e.id,i),t.on("sourcedata",e.onData),o&&o(t.getSource(e.id)))},e.onData=function(){var t=e.props.map,n=t.getSource(e.props.id);if(n&&t.isSourceLoaded(e.props.id)){var r=e.props.onSourceLoaded;n&&r&&r(n),n&&e.props.geoJsonSource&&e.props.geoJsonSource.data&&n.setData(e.props.geoJsonSource.data),t.off("sourcedata",e.onData)}},e}return R$(e,t),e.prototype.componentDidMount=function(){this.props.map.on("styledata",this.onStyleDataChange),this.initialize()},e.prototype.removeSource=function(){var t=this,e=this.props.map;if(e.getSource(this.id)){var n=e.getStyle().layers,r=void 0===n?[]:n;return(r=r.map((function(t,e){var n=(r[e+1]||{id:void 0}).id;return L$({},t,{before:n})})).filter((function(e){return e.source===t.id}))).forEach((function(t){return e.removeLayer(t.id)})),e.removeSource(this.id),r.reverse()}return[]},e.prototype.componentWillUnmount=function(){var t=this.props.map;t&&t.getStyle()&&(t.off("styledata",this.onStyleDataChange),this.removeSource())},e.prototype.componentDidUpdate=function(t){var e=t.geoJsonSource,n=t.tileJsonSource,r=t.map,i=r.getSource(this.id);if(n&&this.props.tileJsonSource){var o=!1,a=!1;if(i&&"vector"===i.type)n.url!==this.props.tileJsonSource.url&&void 0!==this.props.tileJsonSource.url&&(i.setUrl(this.props.tileJsonSource.url),o=!0),n.tiles!==this.props.tileJsonSource.tiles&&void 0!==this.props.tileJsonSource.tiles&&(i.setTiles(this.props.tileJsonSource.tiles),a=!0);if(!o&&n.url!==this.props.tileJsonSource.url||!a&&n.tiles!==this.props.tileJsonSource.tiles||n.minzoom!==this.props.tileJsonSource.minzoom||n.maxzoom!==this.props.tileJsonSource.maxzoom){var s=this.removeSource();r.addSource(this.id,this.props.tileJsonSource),s.forEach((function(t){return r.addLayer(t,t.before)}))}}e&&this.props.geoJsonSource&&this.props.geoJsonSource.data!==e.data&&this.props.geoJsonSource.data&&i&&"geojson"===i.type&&i.setData(this.props.geoJsonSource.data)},e.prototype.render=function(){return null},e}(m.Component);bB(N$);function F$(t,e,n,r,i,o){if(i-r<=n)return;const a=r+i>>1;z$(t,e,a,r,i,o%2),F$(t,e,n,r,a-1,o+1),F$(t,e,n,a+1,i,o+1)}function z$(t,e,n,r,i,o){for(;i>r;){if(i-r>600){const a=i-r+1,s=n-r+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(s-a/2<0?-1:1);z$(t,e,n,Math.max(r,Math.floor(n-s*c/a+u)),Math.min(i,Math.floor(n+(a-s)*c/a+u)),o)}const a=e[2*n+o];let s=r,l=i;for(B$(t,e,r,n),e[2*i+o]>a&&B$(t,e,r,i);s<l;){for(B$(t,e,s,l),s++,l--;e[2*s+o]<a;)s++;for(;e[2*l+o]>a;)l--}e[2*r+o]===a?B$(t,e,r,l):(l++,B$(t,e,l,i)),l<=n&&(r=l+1),n<=l&&(i=l-1)}}function B$(t,e,n,r){$$(t,n,r),$$(e,2*n,2*r),$$(e,2*n+1,2*r+1)}function $$(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function j$(t,e,n,r){const i=t-n,o=e-r;return i*i+o*o}const U$=t=>t[0],V$=t=>t[1];class H${constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U$,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:V$,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Float64Array;this.nodeSize=r,this.points=t;const o=t.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),s=this.coords=new i(2*t.length);for(let l=0;l<t.length;l++)a[l]=l,s[2*l]=e(t[l]),s[2*l+1]=n(t[l]);F$(a,s,r,0,a.length-1,0)}range(t,e,n,r){return function(t,e,n,r,i,o,a){const s=[0,t.length-1,0],l=[];let c,u;for(;s.length;){const h=s.pop(),p=s.pop(),d=s.pop();if(p-d<=a){for(let a=d;a<=p;a++)c=e[2*a],u=e[2*a+1],c>=n&&c<=i&&u>=r&&u<=o&&l.push(t[a]);continue}const f=Math.floor((d+p)/2);c=e[2*f],u=e[2*f+1],c>=n&&c<=i&&u>=r&&u<=o&&l.push(t[f]);const g=(h+1)%2;(0===h?n<=c:r<=u)&&(s.push(d),s.push(f-1),s.push(g)),(0===h?i>=c:o>=u)&&(s.push(f+1),s.push(p),s.push(g))}return l}(this.ids,this.coords,t,e,n,r,this.nodeSize)}within(t,e,n){return function(t,e,n,r,i,o){const a=[0,t.length-1,0],s=[],l=i*i;for(;a.length;){const c=a.pop(),u=a.pop(),h=a.pop();if(u-h<=o){for(let i=h;i<=u;i++)j$(e[2*i],e[2*i+1],n,r)<=l&&s.push(t[i]);continue}const p=Math.floor((h+u)/2),d=e[2*p],f=e[2*p+1];j$(d,f,n,r)<=l&&s.push(t[p]);const g=(c+1)%2;(0===c?n-i<=d:r-i<=f)&&(a.push(h),a.push(p-1),a.push(g)),(0===c?n+i>=d:r+i>=f)&&(a.push(p+1),a.push(u),a.push(g))}return s}(this.ids,this.coords,t,e,n,this.nodeSize)}}const G$={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},W$=Math.fround||(X$=new Float32Array(1),t=>(X$[0]=+t,X$[0]));var X$;class q${constructor(t){this.options=rj(Object.create(G$),t),this.trees=new Array(this.options.maxZoom+1)}load(t){const{log:e,minZoom:n,maxZoom:r,nodeSize:i}=this.options;e&&console.time("total time");const o=`prepare ${t.length} points`;e&&console.time(o),this.points=t;let a=[];for(let s=0;s<t.length;s++)t[s].geometry&&a.push(Z$(t[s],s));this.trees[r+1]=new H$(a,ij,oj,i,Float32Array),e&&console.timeEnd(o);for(let s=r;s>=n;s--){const t=+Date.now();a=this._cluster(a,s),this.trees[s]=new H$(a,ij,oj,i,Float32Array),e&&console.log("z%d: %d clusters in %dms",s,a.length,+Date.now()-t)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let n=((t[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,t[1]));let i=180===t[2]?180:((t[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){const t=this.getClusters([n,r,180,o],e),a=this.getClusters([-180,r,i,o],e);return t.concat(a)}const a=this.trees[this._limitZoom(e)],s=a.range(Q$(n),tj(o),Q$(i),tj(r)),l=[];for(const c of s){const t=a.points[c];l.push(t.numPoints?K$(t):this.points[t.index])}return l}getChildren(t){const e=this._getOriginId(t),n=this._getOriginZoom(t),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);const o=i.points[e];if(!o)throw new Error(r);const a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=i.within(o.x,o.y,a),l=[];for(const c of s){const e=i.points[c];e.parentId===t&&l.push(e.numPoints?K$(e):this.points[e.index])}if(0===l.length)throw new Error(r);return l}getLeaves(t,e,n){e=e||10,n=n||0;const r=[];return this._appendLeaves(r,t,e,n,0),r}getTile(t,e,n){const r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),{extent:o,radius:a}=this.options,s=a/o,l=(n-s)/i,c=(n+1+s)/i,u={features:[]};return this._addTileFeatures(r.range((e-s)/i,l,(e+1+s)/i,c),r.points,e,n,i,u),0===e&&this._addTileFeatures(r.range(1-s/i,l,1,c),r.points,i,n,i,u),e===i-1&&this._addTileFeatures(r.range(0,l,s/i,c),r.points,-1,n,i,u),u.features.length?u:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e}_appendLeaves(t,e,n,r,i){const o=this.getChildren(e);for(const a of o){const e=a.properties;if(e&&e.cluster?i+e.point_count<=r?i+=e.point_count:i=this._appendLeaves(t,e.cluster_id,n,r,i):i<r?i++:t.push(a),t.length===n)break}return i}_addTileFeatures(t,e,n,r,i,o){for(const a of t){const t=e[a],s=t.numPoints;let l,c,u;if(s)l=J$(t),c=t.x,u=t.y;else{const e=this.points[t.index];l=e.properties,c=Q$(e.geometry.coordinates[0]),u=tj(e.geometry.coordinates[1])}const h={type:1,geometry:[[Math.round(this.options.extent*(c*i-n)),Math.round(this.options.extent*(u*i-r))]],tags:l};let p;s?p=t.id:this.options.generateId?p=t.index:this.points[t.index].id&&(p=this.points[t.index].id),void 0!==p&&(h.id=p),o.features.push(h)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,e){const n=[],{radius:r,extent:i,reduce:o,minPoints:a}=this.options,s=r/(i*Math.pow(2,e));for(let l=0;l<t.length;l++){const r=t[l];if(r.zoom<=e)continue;r.zoom=e;const i=this.trees[e+1],c=i.within(r.x,r.y,s),u=r.numPoints||1;let h=u;for(const t of c){const n=i.points[t];n.zoom>e&&(h+=n.numPoints||1)}if(h>u&&h>=a){let t=r.x*u,a=r.y*u,s=o&&u>1?this._map(r,!0):null;const p=(l<<5)+(e+1)+this.points.length;for(const n of c){const l=i.points[n];if(l.zoom<=e)continue;l.zoom=e;const c=l.numPoints||1;t+=l.x*c,a+=l.y*c,l.parentId=p,o&&(s||(s=this._map(r,!0)),o(s,this._map(l)))}r.parentId=p,n.push(Y$(t/h,a/h,p,h,s))}else if(n.push(r),h>1)for(const t of c){const r=i.points[t];r.zoom<=e||(r.zoom=e,n.push(r))}}return n}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e){if(t.numPoints)return e?rj({},t.properties):t.properties;const n=this.points[t.index].properties,r=this.options.map(n);return e&&r===n?rj({},r):r}}function Y$(t,e,n,r,i){return{x:W$(t),y:W$(e),zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function Z$(t,e){const[n,r]=t.geometry.coordinates;return{x:W$(Q$(n)),y:W$(tj(r)),zoom:1/0,index:e,parentId:-1}}function K$(t){return{type:"Feature",id:t.id,properties:J$(t),geometry:{type:"Point",coordinates:[ej(t.x),nj(t.y)]}}}function J$(t){const e=t.numPoints,n=e>=1e4?`${Math.round(e/1e3)}k`:e>=1e3?Math.round(e/100)/10+"k":e;return rj(rj({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function Q$(t){return t/360+.5}function tj(t){const e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function ej(t){return 360*(t-.5)}function nj(t){const e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function rj(t,e){for(const n in e)t[n]=e[n];return t}function ij(t){return t.x}function oj(t){return t.y}var aj=n(9607),sj=n.n(aj),lj=n(6758),cj=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),uj=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={superC:new q$({radius:e.props.radius,maxZoom:e.props.maxZoom,minZoom:e.props.minZoom,extent:e.props.extent,nodeSize:e.props.nodeSize,log:e.props.log}),clusterPoints:[]},e.featureClusterMap=new WeakMap,e.childrenChange=function(t){var n=e.state.superC;e.featureClusterMap=new WeakMap;var r=e.childrenToFeatures(t);n.load(r)},e.mapChange=function(t){void 0===t&&(t=!1);var n=e.props.map,r=e.state,i=r.superC,o=r.clusterPoints,a=n.getZoom(),s=n.getCanvas(),l=s.width,c=s.height,u=n.unproject([0,0]).toArray(),h=n.unproject([l,0]).toArray(),p=n.unproject([l,c]).toArray(),d=n.unproject([0,c]).toArray(),f=i.getClusters(sj()((0,lj.polygon)([[u,h,p,d,u]])),Math.round(a));(f.length!==o.length||t)&&e.setState({clusterPoints:f})},e.childrenToFeatures=function(t){return t.map((function(t){var n=e.feature(t&&t.props.coordinates);return e.featureClusterMap.set(n,t),n}))},e.getLeaves=function(t,n,r){return e.state.superC.getLeaves(t.properties&&t.properties.cluster_id,n||1/0,r).map((function(t){return e.featureClusterMap.get(t)}))},e.zoomToClusterBounds=function(t){var n=Array.prototype.slice.call(t.currentTarget.children),r=e.findMarkerElement(t.currentTarget,t.target),i=n.indexOf(r),o=e.state.clusterPoints[i];if(o.properties&&o.properties.cluster_id){var a=e.state.superC.getLeaves(o.properties&&o.properties.cluster_id,1/0),s=sj()((0,lj.featureCollection)(a));e.props.map.fitBounds(fB.LngLatBounds.convert(s),{padding:e.props.zoomOnClickPadding})}},e}return cj(e,t),e.prototype.componentDidMount=function(){var t=this.props,e=t.children,n=t.map;e&&this.childrenChange(e),n.on("move",this.mapChange),n.on("zoom",this.mapChange),this.mapChange()},e.prototype.componentWillUnmount=function(){var t=this.props.map;t.off("move",this.mapChange),t.off("zoom",this.mapChange)},e.prototype.componentDidUpdate=function(t){t.children!==this.props.children&&this.props.children&&(this.childrenChange(this.props.children),this.mapChange(!0))},e.prototype.feature=function(t){return{type:"Feature",geometry:{type:"Point",coordinates:t},properties:{}}},e.prototype.findMarkerElement=function(t,e){return e.parentElement===t?e:this.findMarkerElement(t,e.parentElement)},e.prototype.render=function(){var t=this,e=this.props,n=e.ClusterMarkerFactory,r=e.style,i=e.className,o=e.tabIndex,a=this.state.clusterPoints;return m.createElement("div",{style:r,className:i,tabIndex:o,onClick:this.props.zoomOnClick?this.zoomToClusterBounds:void 0},a.map((function(e){return e.properties&&e.properties.cluster?n(e.geometry.coordinates,e.properties.point_count,t.getLeaves.bind(t,e)):t.featureClusterMap.get(e)})))},e.defaultProps={radius:60,minZoom:0,maxZoom:16,extent:512,nodeSize:64,log:!1,zoomOnClick:!1,zoomOnClickPadding:20},e}(m.Component),hj=(bB(uj),function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),pj=function(){return pj=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},pj.apply(this,arguments)},dj={position:"absolute",zIndex:10,display:"flex",flexDirection:"column",boxShadow:"0px 1px 4px rgba(0, 0, 0, .3)",border:"1px solid rgba(0, 0, 0, 0.1)"},fj={"top-right":{top:62,right:10,bottom:"auto",left:"auto"},"top-left":{top:62,left:10,bottom:"auto",right:"auto"},"bottom-right":{bottom:63,right:10,top:"auto",left:"auto"},"bottom-left":{bottom:63,left:10,top:"auto",right:"auto"}},gj={backgroundColor:"#f9f9f9",opacity:.95,transition:"background-color 0.16s ease-out",cursor:"pointer",border:0,height:26,width:26,outline:0,padding:3},mj={backgroundColor:"#fff",opacity:1},yj={borderBottom:"1px solid rgba(0, 0, 0, 0.1)",borderTopLeftRadius:2,borderTopRightRadius:2,borderBottomLeftRadius:2,borderBottomRightRadius:2},vj=function(){return m.createElement("svg",{viewBox:"0 0 20 20"},m.createElement("polygon",{fill:"#333333",points:"6,9 10,1 14,9"}),m.createElement("polygon",{fill:"#CCCCCC",points:"6,11 10,19 14,11"}))},xj={width:20,height:20,display:"inline-block"},_j=Object.keys(fj),bj=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={hover:void 0},e.compassIcon=null,e.onMouseOut=function(){e.state.hover||e.setState({hover:void 0})},e.onMouseIn=function(){0!==e.state.hover&&e.setState({hover:0})},e.onClickCompass=function(){e.props.map.resetNorth()},e.onMapRotate=function(){var t="rotate("+e.props.map.transform.angle*(180/Math.PI)+"deg)";e.compassIcon&&(e.compassIcon.style.transform=t)},e.assignRef=function(t){e.compassIcon=t},e}return hj(e,t),e.prototype.componentDidMount=function(){this.props.map.on("rotate",this.onMapRotate)},e.prototype.componentWillUnmount=function(){this.props.map.off("rotate",this.onMapRotate)},e.prototype.render=function(){var t=this.props,e=t.position,n=t.style,r=t.className,i=t.tabIndex,o=this.state.hover,a=pj({},gj,yj,0===o?mj:{});return m.createElement("div",{className:r,tabIndex:i,style:pj({},dj,fj[e],n)},m.createElement("button",{style:a,onMouseOver:this.onMouseIn,onMouseOut:this.onMouseOut,onClick:this.onClickCompass},m.createElement("span",{ref:this.assignRef,style:xj},m.createElement(vj,null))))},e.defaultProps={position:_j[0]},e}(m.Component),wj=(bB(bj),function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),Sj=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wj(e,t),e.prototype.componentDidMount=function(){this.loadImage(this.props)},e.prototype.componentWillUnmount=function(){e.removeImage(this.props)},e.prototype.componentDidUpdate=function(t){var n=t.id;t.map!==this.props.map&&e.removeImage(this.props),this.props.map&&!this.props.map.hasImage(n)&&this.loadImage(this.props)},e.prototype.render=function(){return null},e.prototype.loadImage=function(t){var e=this,n=t.map,r=t.id,i=t.url,o=t.data,a=t.options,s=t.onError;o?(n.addImage(r,o,a),this.loaded()):i&&n.loadImage(i,(function(t,i){t?s&&s(t):(n.addImage(r,i,a),e.loaded())}))},e.removeImage=function(t){var e=t.id,n=t.map;n&&n.getStyle()&&n.removeImage(e)},e.prototype.loaded=function(){var t=this.props.onLoaded;t&&t()},e}(m.Component),Cj=(bB(Sj),bB($B(LB)),TB);const Ej=Cj({accessToken:"pk.eyJ1IjoiYWhtYWQtYXNsYW0iLCJhIjoiY2xpaW5iYXI1MXJlNzNmcWY4Y3pxenlsYyJ9.Ua15JiMsRNy3GOcz9cn4dw"});var kj=t=>{let{markers:e,totalCount:n,retrievedNodes:r,onCornersChange:i}=t;const[o,a]=(0,m.useState)(null),[s,l]=(0,m.useState)([-122.11,37.99]),[c,u]=(0,m.useState)([10]),h=(0,m.useRef)([]),[p,d]=(0,m.useState)("0"),[f,g]=(0,m.useState)("0");(0,m.useEffect)((()=>{void 0!==n&&d(n.toString()),void 0!==r&&g(r.toString())}),[n,r]),(0,m.useEffect)((()=>{const t=()=>{if(o){const t=o.getBounds();i([t.getNorthEast(),t.getSouthEast(),t.getSouthWest(),t.getNorthWest()]),h.current.forEach((t=>{t.getPopup().remove(),t.remove()})),h.current=[],e.forEach((t=>{const e=new(gB().Popup)({offset:25}).setText(t.description),n=new(gB().Marker)({color:"#000000"}).setLngLat([t.long,t.lat]).setPopup(e).addTo(o);h.current.push(n)}))}};return o&&o.on("moveend",t),()=>{o&&o.off("moveend",t)}}),[o,e]);return(0,m.useEffect)((()=>{o&&(h.current.forEach((t=>{t.getPopup().remove(),t.remove()})),h.current=[],e.forEach((t=>{const e=new(gB().Popup)({offset:25}).setText(t.description),n=new(gB().Marker)({color:"#000000"}).setLngLat([t.long,t.lat]).setPopup(e).addTo(o);h.current.push(n)})))}),[o,e]),(0,lr.jsxs)("div",{className:"map-display-container",children:[" ",(0,lr.jsxs)("div",{className:"counts-display",children:["Total Count: ",p,(0,lr.jsx)("br",{}),"Retrieved Nodes: ",f]}),(0,lr.jsx)(Ej,{style:"mapbox://styles/mapbox/outdoors-v12",center:s,zoom:c,onStyleLoad:t=>{a(t),t.on("zoom",(e=>((t,e)=>{const n=t.getZoom();u([n])})(t))),t.on("move",(e=>((t,e)=>{const n=t.getCenter();l([n.lng,n.lat])})(t)))},containerStyle:{height:"100vh"}})]})};var Mj=function(){const t=ht(),[e,n]=(0,m.useState)([]),[r,i]=(0,m.useState)(),[o,a]=(0,m.useState)();return(0,m.useEffect)((()=>{(async()=>{try{const e=await Pn.get("/api/v1/admin/check-login",{headers:{Cookies:jt.get("admin_cookie")}});if(200===e.status){const{alreadyLoggedIn:n}=e.data;n||t("/")}}catch(e){console.error(e)}})()}),[]),(0,lr.jsx)("div",{className:"map-container-wrapper",children:(0,lr.jsx)(kj,{markers:e,totalCount:r,retrievedNodes:o,onCornersChange:async t=>{try{const e=await Pn.get(`/api/v1/nodes/display?corners=${t}`,{headers:{Cookies:jt.get("admin_cookie")}});200===e.status&&(console.log(e.data.nodesData),n(e.data.nodesData),i(e.data.totalCount),a(e.data.retrievedNodes))}catch(e){console.error(e)}}})})},Tj={"aria-busy":!0,role:"status"},Ij=n(7441),Pj=n(9613),Oj=n.n(Pj);var Aj=function(t){function e(t,r,l,c,p){for(var d,f,g,m,_,w=0,S=0,C=0,E=0,k=0,A=0,R=g=d=0,N=0,F=0,z=0,B=0,$=l.length,j=$-1,U="",V="",H="",G="";N<$;){if(f=l.charCodeAt(N),N===j&&0!==S+E+C+w&&(0!==S&&(f=47===S?10:47),E=C=w=0,$++,j++),0===S+E+C+w){if(N===j&&(0<F&&(U=U.replace(h,"")),0<U.trim().length)){switch(f){case 32:case 9:case 59:case 13:case 10:break;default:U+=l.charAt(N)}f=59}switch(f){case 123:for(d=(U=U.trim()).charCodeAt(0),g=1,B=++N;N<$;){switch(f=l.charCodeAt(N)){case 123:g++;break;case 125:g--;break;case 47:switch(f=l.charCodeAt(N+1)){case 42:case 47:t:{for(R=N+1;R<j;++R)switch(l.charCodeAt(R)){case 47:if(42===f&&42===l.charCodeAt(R-1)&&N+2!==R){N=R+1;break t}break;case 10:if(47===f){N=R+1;break t}}N=R}}break;case 91:f++;case 40:f++;case 34:case 39:for(;N++<j&&l.charCodeAt(N)!==f;);}if(0===g)break;N++}if(g=l.substring(B,N),0===d&&(d=(U=U.replace(u,"").trim()).charCodeAt(0)),64===d){switch(0<F&&(U=U.replace(h,"")),f=U.charCodeAt(1)){case 100:case 109:case 115:case 45:F=r;break;default:F=O}if(B=(g=e(r,F,g,f,p+1)).length,0<D&&(_=s(3,g,F=n(O,U,z),r,T,M,B,f,p,c),U=F.join(""),void 0!==_&&0===(B=(g=_.trim()).length)&&(f=0,g="")),0<B)switch(f){case 115:U=U.replace(b,a);case 100:case 109:case 45:g=U+"{"+g+"}";break;case 107:g=(U=U.replace(y,"$1 $2"))+"{"+g+"}",g=1===P||2===P&&o("@"+g,3)?"@-webkit-"+g+"@"+g:"@"+g;break;default:g=U+g,112===c&&(V+=g,g="")}else g=""}else g=e(r,n(r,U,z),g,c,p+1);H+=g,g=z=F=R=d=0,U="",f=l.charCodeAt(++N);break;case 125:case 59:if(1<(B=(U=(0<F?U.replace(h,""):U).trim()).length))switch(0===R&&(d=U.charCodeAt(0),45===d||96<d&&123>d)&&(B=(U=U.replace(" ",":")).length),0<D&&void 0!==(_=s(1,U,r,t,T,M,V.length,c,p,c))&&0===(B=(U=_.trim()).length)&&(U="\0\0"),d=U.charCodeAt(0),f=U.charCodeAt(1),d){case 0:break;case 64:if(105===f||99===f){G+=U+l.charAt(N);break}default:58!==U.charCodeAt(B-1)&&(V+=i(U,d,f,U.charCodeAt(2)))}z=F=R=d=0,U="",f=l.charCodeAt(++N)}}switch(f){case 13:case 10:47===S?S=0:0===1+d&&107!==c&&0<U.length&&(F=1,U+="\0"),0<D*L&&s(0,U,r,t,T,M,V.length,c,p,c),M=1,T++;break;case 59:case 125:if(0===S+E+C+w){M++;break}default:switch(M++,m=l.charAt(N),f){case 9:case 32:if(0===E+w+S)switch(k){case 44:case 58:case 9:case 32:m="";break;default:32!==f&&(m=" ")}break;case 0:m="\\0";break;case 12:m="\\f";break;case 11:m="\\v";break;case 38:0===E+S+w&&(F=z=1,m="\f"+m);break;case 108:if(0===E+S+w+I&&0<R)switch(N-R){case 2:112===k&&58===l.charCodeAt(N-3)&&(I=k);case 8:111===A&&(I=A)}break;case 58:0===E+S+w&&(R=N);break;case 44:0===S+C+E+w&&(F=1,m+="\r");break;case 34:case 39:0===S&&(E=E===f?0:0===E?f:E);break;case 91:0===E+S+C&&w++;break;case 93:0===E+S+C&&w--;break;case 41:0===E+S+w&&C--;break;case 40:if(0===E+S+w){if(0===d)if(2*k+3*A===533);else d=1;C++}break;case 64:0===S+C+E+w+R+g&&(g=1);break;case 42:case 47:if(!(0<E+w+C))switch(S){case 0:switch(2*f+3*l.charCodeAt(N+1)){case 235:S=47;break;case 220:B=N,S=42}break;case 42:47===f&&42===k&&B+2!==N&&(33===l.charCodeAt(B+2)&&(V+=l.substring(B,N+1)),m="",S=0)}}0===S&&(U+=m)}A=k,k=f,N++}if(0<(B=V.length)){if(F=r,0<D&&(void 0!==(_=s(2,V,F,t,T,M,B,c,p,c))&&0===(V=_).length))return G+V+H;if(V=F.join(",")+"{"+V+"}",0!==P*I){switch(2!==P||o(V,2)||(I=0),I){case 111:V=V.replace(x,":-moz-$1")+V;break;case 112:V=V.replace(v,"::-webkit-input-$1")+V.replace(v,"::-moz-$1")+V.replace(v,":-ms-input-$1")+V}I=0}}return G+V+H}function n(t,e,n){var i=e.trim().split(g);e=i;var o=i.length,a=t.length;switch(a){case 0:case 1:var s=0;for(t=0===a?"":t[0]+" ";s<o;++s)e[s]=r(t,e[s],n).trim();break;default:var l=s=0;for(e=[];s<o;++s)for(var c=0;c<a;++c)e[l++]=r(t[c]+" ",i[s],n).trim()}return e}function r(t,e,n){var r=e.charCodeAt(0);switch(33>r&&(r=(e=e.trim()).charCodeAt(0)),r){case 38:return e.replace(m,"$1"+t.trim());case 58:return t.trim()+e.replace(m,"$1"+t.trim());default:if(0<1*n&&0<e.indexOf("\f"))return e.replace(m,(58===t.charCodeAt(0)?"":"$1")+t.trim())}return t+e}function i(t,e,n,r){var a=t+";",s=2*e+3*n+4*r;if(944===s){t=a.indexOf(":",9)+1;var l=a.substring(t,a.length-1).trim();return l=a.substring(0,t).trim()+l+";",1===P||2===P&&o(l,1)?"-webkit-"+l+l:l}if(0===P||2===P&&!o(a,1))return a;switch(s){case 1015:return 97===a.charCodeAt(10)?"-webkit-"+a+a:a;case 951:return 116===a.charCodeAt(3)?"-webkit-"+a+a:a;case 963:return 110===a.charCodeAt(5)?"-webkit-"+a+a:a;case 1009:if(100!==a.charCodeAt(4))break;case 969:case 942:return"-webkit-"+a+a;case 978:return"-webkit-"+a+"-moz-"+a+a;case 1019:case 983:return"-webkit-"+a+"-moz-"+a+"-ms-"+a+a;case 883:if(45===a.charCodeAt(8))return"-webkit-"+a+a;if(0<a.indexOf("image-set(",11))return a.replace(k,"$1-webkit-$2")+a;break;case 932:if(45===a.charCodeAt(4))switch(a.charCodeAt(5)){case 103:return"-webkit-box-"+a.replace("-grow","")+"-webkit-"+a+"-ms-"+a.replace("grow","positive")+a;case 115:return"-webkit-"+a+"-ms-"+a.replace("shrink","negative")+a;case 98:return"-webkit-"+a+"-ms-"+a.replace("basis","preferred-size")+a}return"-webkit-"+a+"-ms-"+a+a;case 964:return"-webkit-"+a+"-ms-flex-"+a+a;case 1023:if(99!==a.charCodeAt(8))break;return"-webkit-box-pack"+(l=a.substring(a.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+a+"-ms-flex-pack"+l+a;case 1005:return d.test(a)?a.replace(p,":-webkit-")+a.replace(p,":-moz-")+a:a;case 1e3:switch(e=(l=a.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(e)){case 226:l=a.replace(_,"tb");break;case 232:l=a.replace(_,"tb-rl");break;case 220:l=a.replace(_,"lr");break;default:return a}return"-webkit-"+a+"-ms-"+l+a;case 1017:if(-1===a.indexOf("sticky",9))break;case 975:switch(e=(a=t).length-10,s=(l=(33===a.charCodeAt(e)?a.substring(0,e):a).substring(t.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:a=a.replace(l,"-webkit-"+l)+";"+a;break;case 207:case 102:a=a.replace(l,"-webkit-"+(102<s?"inline-":"")+"box")+";"+a.replace(l,"-webkit-"+l)+";"+a.replace(l,"-ms-"+l+"box")+";"+a}return a+";";case 938:if(45===a.charCodeAt(5))switch(a.charCodeAt(6)){case 105:return l=a.replace("-items",""),"-webkit-"+a+"-webkit-box-"+l+"-ms-flex-"+l+a;case 115:return"-webkit-"+a+"-ms-flex-item-"+a.replace(S,"")+a;default:return"-webkit-"+a+"-ms-flex-line-pack"+a.replace("align-content","").replace(S,"")+a}break;case 973:case 989:if(45!==a.charCodeAt(3)||122===a.charCodeAt(4))break;case 931:case 953:if(!0===E.test(t))return 115===(l=t.substring(t.indexOf(":")+1)).charCodeAt(0)?i(t.replace("stretch","fill-available"),e,n,r).replace(":fill-available",":stretch"):a.replace(l,"-webkit-"+l)+a.replace(l,"-moz-"+l.replace("fill-",""))+a;break;case 962:if(a="-webkit-"+a+(102===a.charCodeAt(5)?"-ms-"+a:"")+a,211===n+r&&105===a.charCodeAt(13)&&0<a.indexOf("transform",10))return a.substring(0,a.indexOf(";",27)+1).replace(f,"$1-webkit-$2")+a}return a}function o(t,e){var n=t.indexOf(1===e?":":"{"),r=t.substring(0,3!==e?n:10);return n=t.substring(n+1,t.length-1),R(2!==e?r:r.replace(C,"$1"),n,e)}function a(t,e){var n=i(e,e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2));return n!==e+";"?n.replace(w," or ($1)").substring(4):"("+e+")"}function s(t,e,n,r,i,o,a,s,l,u){for(var h,p=0,d=e;p<D;++p)switch(h=A[p].call(c,t,d,n,r,i,o,a,s,l,u)){case void 0:case!1:case!0:case null:break;default:d=h}if(d!==e)return d}function l(t){return void 0!==(t=t.prefix)&&(R=null,t?"function"!==typeof t?P=1:(P=2,R=t):P=0),l}function c(t,n){var r=t;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<D){var i=s(-1,n,r,r,T,M,0,0,0,0);void 0!==i&&"string"===typeof i&&(n=i)}var o=e(O,r,n,0,0);return 0<D&&(void 0!==(i=s(-2,o,r,r,T,M,o.length,0,0,0))&&(o=i)),"",I=0,M=T=1,o}var u=/^\0+/g,h=/[\0\r\f]/g,p=/: */g,d=/zoo|gra/,f=/([,: ])(transform)/g,g=/,\r+?/g,m=/([\t\r\n ])*\f?&/g,y=/@(k\w+)\s*(\S*)\s*/,v=/::(place)/g,x=/:(read-only)/g,_=/[svh]\w+-[tblr]{2}/,b=/\(\s*(.*)\s*\)/g,w=/([\s\S]*?);/g,S=/-self|flex-/g,C=/[^]*?(:[rp][el]a[\w-]+)[^]*/,E=/stretch|:\s*\w+\-(?:conte|avail)/,k=/([^-])(image-set\()/,M=1,T=1,I=0,P=1,O=[],A=[],D=0,R=null,L=0;return c.use=function t(e){switch(e){case void 0:case null:D=A.length=0;break;default:if("function"===typeof e)A[D++]=e;else if("object"===typeof e)for(var n=0,r=e.length;n<r;++n)t(e[n]);else L=0|!!e}return t},c.set=l,void 0!==t&&l(t),c};function Dj(t){var e=Object.create(null);return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}var Rj=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Lj=Dj((function(t){return Rj.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91})),Nj=n(2110),Fj=n.n(Nj);function zj(){return(zj=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var Bj=function(t,e){for(var n=[t[0]],r=0,i=e.length;r<i;r+=1)n.push(e[r],t[r+1]);return n},$j=function(t){return null!==t&&"object"==typeof t&&"[object Object]"===(t.toString?t.toString():Object.prototype.toString.call(t))&&!(0,Ij.typeOf)(t)},jj=Object.freeze([]),Uj=Object.freeze({});function Vj(t){return"function"==typeof t}function Hj(t){return t.displayName||t.name||"Component"}function Gj(t){return t&&"string"==typeof t.styledComponentId}var Wj="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",Xj="undefined"!=typeof window&&"HTMLElement"in window,qj=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&(void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY)));function Yj(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+t+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var Zj=function(){function t(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}var e=t.prototype;return e.indexOfGroup=function(t){for(var e=0,n=0;n<t;n++)e+=this.groupSizes[n];return e},e.insertRules=function(t,e){if(t>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;t>=i;)(i<<=1)<0&&Yj(16,""+t);this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var o=r;o<i;o++)this.groupSizes[o]=0}for(var a=this.indexOfGroup(t+1),s=0,l=e.length;s<l;s++)this.tag.insertRule(a,e[s])&&(this.groupSizes[t]++,a++)},e.clearGroup=function(t){if(t<this.length){var e=this.groupSizes[t],n=this.indexOfGroup(t),r=n+e;this.groupSizes[t]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},e.getGroup=function(t){var e="";if(t>=this.length||0===this.groupSizes[t])return e;for(var n=this.groupSizes[t],r=this.indexOfGroup(t),i=r+n,o=r;o<i;o++)e+=this.tag.getRule(o)+"/*!sc*/\n";return e},t}(),Kj=new Map,Jj=new Map,Qj=1,tU=function(t){if(Kj.has(t))return Kj.get(t);for(;Jj.has(Qj);)Qj++;var e=Qj++;return Kj.set(t,e),Jj.set(e,t),e},eU=function(t){return Jj.get(t)},nU=function(t,e){e>=Qj&&(Qj=e+1),Kj.set(t,e),Jj.set(e,t)},rU="style["+Wj+'][data-styled-version="5.3.11"]',iU=new RegExp("^"+Wj+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),oU=function(t,e,n){for(var r,i=n.split(","),o=0,a=i.length;o<a;o++)(r=i[o])&&t.registerName(e,r)},aU=function(t,e){for(var n=(e.textContent||"").split("/*!sc*/\n"),r=[],i=0,o=n.length;i<o;i++){var a=n[i].trim();if(a){var s=a.match(iU);if(s){var l=0|parseInt(s[1],10),c=s[2];0!==l&&(nU(c,l),oU(t,c,s[3]),t.getTag().insertRules(l,r)),r.length=0}else r.push(a)}}},sU=function(){return n.nc},lU=function(t){var e=document.head,n=t||e,r=document.createElement("style"),i=function(t){for(var e=t.childNodes,n=e.length;n>=0;n--){var r=e[n];if(r&&1===r.nodeType&&r.hasAttribute(Wj))return r}}(n),o=void 0!==i?i.nextSibling:null;r.setAttribute(Wj,"active"),r.setAttribute("data-styled-version","5.3.11");var a=sU();return a&&r.setAttribute("nonce",a),n.insertBefore(r,o),r},cU=function(){function t(t){var e=this.element=lU(t);e.appendChild(document.createTextNode("")),this.sheet=function(t){if(t.sheet)return t.sheet;for(var e=document.styleSheets,n=0,r=e.length;n<r;n++){var i=e[n];if(i.ownerNode===t)return i}Yj(17)}(e),this.length=0}var e=t.prototype;return e.insertRule=function(t,e){try{return this.sheet.insertRule(e,t),this.length++,!0}catch(t){return!1}},e.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},e.getRule=function(t){var e=this.sheet.cssRules[t];return void 0!==e&&"string"==typeof e.cssText?e.cssText:""},t}(),uU=function(){function t(t){var e=this.element=lU(t);this.nodes=e.childNodes,this.length=0}var e=t.prototype;return e.insertRule=function(t,e){if(t<=this.length&&t>=0){var n=document.createTextNode(e),r=this.nodes[t];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},e.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},e.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},t}(),hU=function(){function t(t){this.rules=[],this.length=0}var e=t.prototype;return e.insertRule=function(t,e){return t<=this.length&&(this.rules.splice(t,0,e),this.length++,!0)},e.deleteRule=function(t){this.rules.splice(t,1),this.length--},e.getRule=function(t){return t<this.length?this.rules[t]:""},t}(),pU=Xj,dU={isServer:!Xj,useCSSOMInjection:!qj},fU=function(){function t(t,e,n){void 0===t&&(t=Uj),void 0===e&&(e={}),this.options=zj({},dU,{},t),this.gs=e,this.names=new Map(n),this.server=!!t.isServer,!this.server&&Xj&&pU&&(pU=!1,function(t){for(var e=document.querySelectorAll(rU),n=0,r=e.length;n<r;n++){var i=e[n];i&&"active"!==i.getAttribute(Wj)&&(aU(t,i),i.parentNode&&i.parentNode.removeChild(i))}}(this))}t.registerId=function(t){return tU(t)};var e=t.prototype;return e.reconstructWithOptions=function(e,n){return void 0===n&&(n=!0),new t(zj({},this.options,{},e),this.gs,n&&this.names||void 0)},e.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},e.getTag=function(){return this.tag||(this.tag=(n=(e=this.options).isServer,r=e.useCSSOMInjection,i=e.target,t=n?new hU(i):r?new cU(i):new uU(i),new Zj(t)));var t,e,n,r,i},e.hasNameForId=function(t,e){return this.names.has(t)&&this.names.get(t).has(e)},e.registerName=function(t,e){if(tU(t),this.names.has(t))this.names.get(t).add(e);else{var n=new Set;n.add(e),this.names.set(t,n)}},e.insertRules=function(t,e,n){this.registerName(t,e),this.getTag().insertRules(tU(t),n)},e.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},e.clearRules=function(t){this.getTag().clearGroup(tU(t)),this.clearNames(t)},e.clearTag=function(){this.tag=void 0},e.toString=function(){return function(t){for(var e=t.getTag(),n=e.length,r="",i=0;i<n;i++){var o=eU(i);if(void 0!==o){var a=t.names.get(o),s=e.getGroup(i);if(a&&s&&a.size){var l=Wj+".g"+i+'[id="'+o+'"]',c="";void 0!==a&&a.forEach((function(t){t.length>0&&(c+=t+",")})),r+=""+s+l+'{content:"'+c+'"}/*!sc*/\n'}}}return r}(this)},t}(),gU=/(a)(d)/gi,mU=function(t){return String.fromCharCode(t+(t>25?39:97))};function yU(t){var e,n="";for(e=Math.abs(t);e>52;e=e/52|0)n=mU(e%52)+n;return(mU(e%52)+n).replace(gU,"$1-$2")}var vU=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},xU=function(t){return vU(5381,t)};function _U(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(Vj(n)&&!Gj(n))return!1}return!0}var bU=xU("5.3.11"),wU=function(){function t(t,e,n){this.rules=t,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&_U(t),this.componentId=e,this.baseHash=vU(bU,e),this.baseStyle=n,fU.registerId(e)}return t.prototype.generateAndInjectStyles=function(t,e,n){var r=this.componentId,i=[];if(this.baseStyle&&i.push(this.baseStyle.generateAndInjectStyles(t,e,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&e.hasNameForId(r,this.staticRulesId))i.push(this.staticRulesId);else{var o=$U(this.rules,t,e,n).join(""),a=yU(vU(this.baseHash,o)>>>0);if(!e.hasNameForId(r,a)){var s=n(o,"."+a,void 0,r);e.insertRules(r,a,s)}i.push(a),this.staticRulesId=a}else{for(var l=this.rules.length,c=vU(this.baseHash,n.hash),u="",h=0;h<l;h++){var p=this.rules[h];if("string"==typeof p)u+=p;else if(p){var d=$U(p,t,e,n),f=Array.isArray(d)?d.join(""):d;c=vU(c,f+h),u+=f}}if(u){var g=yU(c>>>0);if(!e.hasNameForId(r,g)){var m=n(u,"."+g,void 0,r);e.insertRules(r,g,m)}i.push(g)}}return i.join(" ")},t}(),SU=/^\s*\/\/.*$/gm,CU=[":","[",".","#"];function EU(t){var e,n,r,i,o=void 0===t?Uj:t,a=o.options,s=void 0===a?Uj:a,l=o.plugins,c=void 0===l?jj:l,u=new Aj(s),h=[],p=function(t){function e(e){if(e)try{t(e+"}")}catch(t){}}return function(n,r,i,o,a,s,l,c,u,h){switch(n){case 1:if(0===u&&64===r.charCodeAt(0))return t(r+";"),"";break;case 2:if(0===c)return r+"/*|*/";break;case 3:switch(c){case 102:case 112:return t(i[0]+r),"";default:return r+(0===h?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(e)}}}((function(t){h.push(t)})),d=function(t,r,o){return 0===r&&-1!==CU.indexOf(o[n.length])||o.match(i)?t:"."+e};function f(t,o,a,s){void 0===s&&(s="&");var l=t.replace(SU,""),c=o&&a?a+" "+o+" { "+l+" }":l;return e=s,n=o,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),u(a||!o?"":o,c)}return u.use([].concat(c,[function(t,e,i){2===t&&i.length&&i[0].lastIndexOf(n)>0&&(i[0]=i[0].replace(r,d))},p,function(t){if(-2===t){var e=h;return h=[],e}}])),f.hash=c.length?c.reduce((function(t,e){return e.name||Yj(15),vU(t,e.name)}),5381).toString():"",f}var kU=m.createContext(),MU=(kU.Consumer,m.createContext()),TU=(MU.Consumer,new fU),IU=EU();function PU(){return(0,m.useContext)(kU)||TU}function OU(){return(0,m.useContext)(MU)||IU}function AU(t){var e=(0,m.useState)(t.stylisPlugins),n=e[0],r=e[1],i=PU(),o=(0,m.useMemo)((function(){var e=i;return t.sheet?e=t.sheet:t.target&&(e=e.reconstructWithOptions({target:t.target},!1)),t.disableCSSOMInjection&&(e=e.reconstructWithOptions({useCSSOMInjection:!1})),e}),[t.disableCSSOMInjection,t.sheet,t.target]),a=(0,m.useMemo)((function(){return EU({options:{prefix:!t.disableVendorPrefixes},plugins:n})}),[t.disableVendorPrefixes,n]);return(0,m.useEffect)((function(){Oj()(n,t.stylisPlugins)||r(t.stylisPlugins)}),[t.stylisPlugins]),m.createElement(kU.Provider,{value:o},m.createElement(MU.Provider,{value:a},t.children))}var DU=function(){function t(t,e){var n=this;this.inject=function(t,e){void 0===e&&(e=IU);var r=n.name+e.hash;t.hasNameForId(n.id,r)||t.insertRules(n.id,r,e(n.rules,r,"@keyframes"))},this.toString=function(){return Yj(12,String(n.name))},this.name=t,this.id="sc-keyframes-"+t,this.rules=e}return t.prototype.getName=function(t){return void 0===t&&(t=IU),this.name+t.hash},t}(),RU=/([A-Z])/,LU=/([A-Z])/g,NU=/^ms-/,FU=function(t){return"-"+t.toLowerCase()};function zU(t){return RU.test(t)?t.replace(LU,FU).replace(NU,"-ms-"):t}var BU=function(t){return null==t||!1===t||""===t};function $U(t,e,n,r){if(Array.isArray(t)){for(var i,o=[],a=0,s=t.length;a<s;a+=1)""!==(i=$U(t[a],e,n,r))&&(Array.isArray(i)?o.push.apply(o,i):o.push(i));return o}return BU(t)?"":Gj(t)?"."+t.styledComponentId:Vj(t)?"function"!=typeof(l=t)||l.prototype&&l.prototype.isReactComponent||!e?t:$U(t(e),e,n,r):t instanceof DU?n?(t.inject(n,r),t.getName(r)):t:$j(t)?function t(e,n){var r,i,o=[];for(var a in e)e.hasOwnProperty(a)&&!BU(e[a])&&(Array.isArray(e[a])&&e[a].isCss||Vj(e[a])?o.push(zU(a)+":",e[a],";"):$j(e[a])?o.push.apply(o,t(e[a],a)):o.push(zU(a)+": "+(r=a,(null==(i=e[a])||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||r in Vi||r.startsWith("--")?String(i).trim():i+"px")+";")));return n?[n+" {"].concat(o,["}"]):o}(t):t.toString();var l}var jU=function(t){return Array.isArray(t)&&(t.isCss=!0),t};function UU(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Vj(t)||$j(t)?jU($U(Bj(jj,[t].concat(n)))):0===n.length&&1===t.length&&"string"==typeof t[0]?t:jU($U(Bj(t,n)))}new Set;var VU=function(t,e,n){return void 0===n&&(n=Uj),t.theme!==n.theme&&t.theme||e||n.theme},HU=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,GU=/(^-|-$)/g;function WU(t){return t.replace(HU,"-").replace(GU,"")}var XU=function(t){return yU(xU(t)>>>0)};function qU(t){return"string"==typeof t&&!0}var YU=function(t){return"function"==typeof t||"object"==typeof t&&null!==t&&!Array.isArray(t)},ZU=function(t){return"__proto__"!==t&&"constructor"!==t&&"prototype"!==t};function KU(t,e,n){var r=t[n];YU(e)&&YU(r)?JU(r,e):t[n]=e}function JU(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];if(YU(a))for(var s in a)ZU(s)&&KU(t,a[s],s)}return t}var QU=m.createContext();QU.Consumer;var tV={};function eV(t,e,n){var r=Gj(t),i=!qU(t),o=e.attrs,a=void 0===o?jj:o,s=e.componentId,l=void 0===s?function(t,e){var n="string"!=typeof t?"sc":WU(t);tV[n]=(tV[n]||0)+1;var r=n+"-"+XU("5.3.11"+n+tV[n]);return e?e+"-"+r:r}(e.displayName,e.parentComponentId):s,c=e.displayName,u=void 0===c?function(t){return qU(t)?"styled."+t:"Styled("+Hj(t)+")"}(t):c,h=e.displayName&&e.componentId?WU(e.displayName)+"-"+e.componentId:e.componentId||l,p=r&&t.attrs?Array.prototype.concat(t.attrs,a).filter(Boolean):a,d=e.shouldForwardProp;r&&t.shouldForwardProp&&(d=e.shouldForwardProp?function(n,r,i){return t.shouldForwardProp(n,r,i)&&e.shouldForwardProp(n,r,i)}:t.shouldForwardProp);var f,g=new wU(n,h,r?t.componentStyle:void 0),y=g.isStatic&&0===a.length,v=function(t,e){return function(t,e,n,r){var i=t.attrs,o=t.componentStyle,a=t.defaultProps,s=t.foldedComponentIds,l=t.shouldForwardProp,c=t.styledComponentId,u=t.target,h=function(t,e,n){void 0===t&&(t=Uj);var r=zj({},e,{theme:t}),i={};return n.forEach((function(t){var e,n,o,a=t;for(e in Vj(a)&&(a=a(r)),a)r[e]=i[e]="className"===e?(n=i[e],o=a[e],n&&o?n+" "+o:n||o):a[e]})),[r,i]}(VU(e,(0,m.useContext)(QU),a)||Uj,e,i),p=h[0],d=h[1],f=function(t,e,n,r){var i=PU(),o=OU();return e?t.generateAndInjectStyles(Uj,i,o):t.generateAndInjectStyles(n,i,o)}(o,r,p),g=n,y=d.$as||e.$as||d.as||e.as||u,v=qU(y),x=d!==e?zj({},e,{},d):e,_={};for(var b in x)"$"!==b[0]&&"as"!==b&&("forwardedAs"===b?_.as=x[b]:(l?l(b,Lj,y):!v||Lj(b))&&(_[b]=x[b]));return e.style&&d.style!==e.style&&(_.style=zj({},e.style,{},d.style)),_.className=Array.prototype.concat(s,c,f!==c?f:null,e.className,d.className).filter(Boolean).join(" "),_.ref=g,(0,m.createElement)(y,_)}(f,t,e,y)};return v.displayName=u,(f=m.forwardRef(v)).attrs=p,f.componentStyle=g,f.displayName=u,f.shouldForwardProp=d,f.foldedComponentIds=r?Array.prototype.concat(t.foldedComponentIds,t.styledComponentId):jj,f.styledComponentId=h,f.target=r?t.target:t,f.withComponent=function(t){var r=e.componentId,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(e,["componentId"]),o=r&&r+"-"+(qU(t)?t:WU(Hj(t)));return eV(t,zj({},i,{attrs:p,componentId:o}),n)},Object.defineProperty(f,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=r?JU({},t.defaultProps,e):e}}),Object.defineProperty(f,"toString",{value:function(){return"."+f.styledComponentId}}),i&&Fj()(f,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),f}var nV=function(t){return function t(e,n,r){if(void 0===r&&(r=Uj),!(0,Ij.isValidElementType)(n))return Yj(1,String(n));var i=function(){return e(n,r,UU.apply(void 0,arguments))};return i.withConfig=function(i){return t(e,n,zj({},r,{},i))},i.attrs=function(i){return t(e,n,zj({},r,{attrs:Array.prototype.concat(r.attrs,i).filter(Boolean)}))},i}(eV,t)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(t){nV[t]=nV(t)}));!function(){function t(t,e){this.rules=t,this.componentId=e,this.isStatic=_U(t),fU.registerId(this.componentId+1)}var e=t.prototype;e.createStyles=function(t,e,n,r){var i=r($U(this.rules,e,n,r).join(""),""),o=this.componentId+t;n.insertRules(o,o,i)},e.removeStyles=function(t,e){e.clearRules(this.componentId+t)},e.renderStyles=function(t,e,n,r){t>2&&fU.registerId(this.componentId+t),this.removeStyles(t,n),this.createStyles(t,e,n,r)}}();function rV(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=UU.apply(void 0,[t].concat(n)).join(""),o=XU(i);return new DU(o,i)}!function(){function t(){var t=this;this._emitSheetCSS=function(){var e=t.instance.toString();if(!e)return"";var n=sU();return"<style "+[n&&'nonce="'+n+'"',Wj+'="true"','data-styled-version="5.3.11"'].filter(Boolean).join(" ")+">"+e+"</style>"},this.getStyleTags=function(){return t.sealed?Yj(2):t._emitSheetCSS()},this.getStyleElement=function(){var e;if(t.sealed)return Yj(2);var n=((e={})[Wj]="",e["data-styled-version"]="5.3.11",e.dangerouslySetInnerHTML={__html:t.instance.toString()},e),r=sU();return r&&(n.nonce=r),[m.createElement("style",zj({},n,{key:"sc-0-0"}))]},this.seal=function(){t.sealed=!0},this.instance=new fU({isServer:!0}),this.sealed=!1}var e=t.prototype;e.collectStyles=function(t){return this.sealed?Yj(2):m.createElement(AU,{sheet:this.instance},t)},e.interleaveWithNodeStream=function(t){return Yj(3)}}();var iV,oV,aV=nV,sV=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},lV=242.776657104492,cV=rV(iV||(iV=sV(["\n  12.5% {\n    stroke-dasharray: ","px, ","px;\n    stroke-dashoffset: -","px;\n  }\n  43.75% {\n    stroke-dasharray: ","px, ","px;\n    stroke-dashoffset: -","px;\n  }\n  100% {\n    stroke-dasharray: ","px, ","px;\n    stroke-dashoffset: -","px;\n  }\n"],["\n  12.5% {\n    stroke-dasharray: ","px, ","px;\n    stroke-dashoffset: -","px;\n  }\n  43.75% {\n    stroke-dasharray: ","px, ","px;\n    stroke-dashoffset: -","px;\n  }\n  100% {\n    stroke-dasharray: ","px, ","px;\n    stroke-dashoffset: -","px;\n  }\n"])),.14*lV,lV,.11*lV,.35*lV,lV,.35*lV,.01*lV,lV,.99*lV),uV=(aV.path(oV||(oV=sV(["\n  stroke-dasharray: ","px, ",";\n  stroke-dashoffset: 0;\n  animation: "," ","s linear infinite;\n"],["\n  stroke-dasharray: ","px, ",";\n  stroke-dashoffset: 0;\n  animation: "," ","s linear infinite;\n"])),.01*lV,lV,cV,1.6),function(t,e){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("undefined"!==typeof n[t])return n[t];if(t&&t.indexOf(".")>0){for(var r=t.split("."),i=r.length,o=n[r[0]],a=1;null!=o&&a<i;)o=o[r[a]],a+=1;if("undefined"!==typeof o)return o}return e}});var hV,pV,dV,fV=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},gV=rV(hV||(hV=fV(["\n to {\n    transform: rotate(360deg);\n  }\n"],["\n to {\n    transform: rotate(360deg);\n  }\n"])));aV.svg(pV||(pV=fV(["\n  animation: "," 0.75s steps(12, end) infinite;\n  animation-duration: ","s;\n"],["\n  animation: "," 0.75s steps(12, end) infinite;\n  animation-duration: ","s;\n"])),gV,uV("speed","0.75")),aV.polyline(dV||(dV=fV(["\n  stroke-width: ","px;\n  stroke-linecap: round;\n\n  &:nth-child(12n + 0) {\n    stroke-opacity: 0.08;\n  }\n\n  &:nth-child(12n + 1) {\n    stroke-opacity: 0.17;\n  }\n\n  &:nth-child(12n + 2) {\n    stroke-opacity: 0.25;\n  }\n\n  &:nth-child(12n + 3) {\n    stroke-opacity: 0.33;\n  }\n\n  &:nth-child(12n + 4) {\n    stroke-opacity: 0.42;\n  }\n\n  &:nth-child(12n + 5) {\n    stroke-opacity: 0.5;\n  }\n\n  &:nth-child(12n + 6) {\n    stroke-opacity: 0.58;\n  }\n\n  &:nth-child(12n + 7) {\n    stroke-opacity: 0.66;\n  }\n\n  &:nth-child(12n + 8) {\n    stroke-opacity: 0.75;\n  }\n\n  &:nth-child(12n + 9) {\n    stroke-opacity: 0.83;\n  }\n\n  &:nth-child(12n + 11) {\n    stroke-opacity: 0.92;\n  }\n"],["\n  stroke-width: ","px;\n  stroke-linecap: round;\n\n  &:nth-child(12n + 0) {\n    stroke-opacity: 0.08;\n  }\n\n  &:nth-child(12n + 1) {\n    stroke-opacity: 0.17;\n  }\n\n  &:nth-child(12n + 2) {\n    stroke-opacity: 0.25;\n  }\n\n  &:nth-child(12n + 3) {\n    stroke-opacity: 0.33;\n  }\n\n  &:nth-child(12n + 4) {\n    stroke-opacity: 0.42;\n  }\n\n  &:nth-child(12n + 5) {\n    stroke-opacity: 0.5;\n  }\n\n  &:nth-child(12n + 6) {\n    stroke-opacity: 0.58;\n  }\n\n  &:nth-child(12n + 7) {\n    stroke-opacity: 0.66;\n  }\n\n  &:nth-child(12n + 8) {\n    stroke-opacity: 0.75;\n  }\n\n  &:nth-child(12n + 9) {\n    stroke-opacity: 0.83;\n  }\n\n  &:nth-child(12n + 11) {\n    stroke-opacity: 0.92;\n  }\n"])),(function(t){return t.width}));var mV,yV,vV,xV=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},_V=rV(mV||(mV=xV(["\n to {\n    stroke-dashoffset: 136;\n  }\n"],["\n to {\n    stroke-dashoffset: 136;\n  }\n"])));aV.polygon(yV||(yV=xV(["\n  stroke-dasharray: 17;\n  animation: "," 2.5s cubic-bezier(0.35, 0.04, 0.63, 0.95) infinite;\n"],["\n  stroke-dasharray: 17;\n  animation: "," 2.5s cubic-bezier(0.35, 0.04, 0.63, 0.95) infinite;\n"])),_V),aV.svg(vV||(vV=xV(["\n  transform-origin: 50% 65%;\n"],["\n  transform-origin: 50% 65%;\n"])));var bV=function(){return bV=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},bV.apply(this,arguments)};function wV(t){var e=t.visible,n=void 0===e||e,r=t.height,i=void 0===r?"80":r,o=t.width,a=void 0===o?"80":o,s=t.wrapperClass,l=void 0===s?"":s,c=t.wrapperStyle,u=void 0===c?{}:c,h=t.ariaLabel,p=void 0===h?"magnifying-glass-loading":h,d=t.glassColor,f=void 0===d?"#c0efff":d,g=t.color,y=void 0===g?"#e15b64":g;return n?m.createElement("svg",bV({width:a,height:i,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",className:l,style:u,"aria-label":p,"data-testid":"magnifying-glass-svg"},Tj),m.createElement("g",{transform:"translate(50,50)"},m.createElement("g",{"ng-attr-transform":"scale({{config.scale}})",transform:"scale(0.82)"},m.createElement("g",{transform:"translate(-50,-50)"},m.createElement("g",{transform:"translate(16.3636 -20)"},m.createElement("animateTransform",{attributeName:"transform",type:"translate",calcMode:"linear",values:"-20 -20;20 -20;0 20;-20 -20",keyTimes:"0;0.33;0.66;1",dur:"1s",begin:"0s",repeatCount:"indefinite"}),m.createElement("path",{"ng-attr-fill":"{{config.glass}}",d:"M44.19,26.158c-4.817,0-9.345,1.876-12.751,5.282c-3.406,3.406-5.282,7.934-5.282,12.751 c0,4.817,1.876,9.345,5.282,12.751c3.406,3.406,7.934,5.282,12.751,5.282s9.345-1.876,12.751-5.282 c3.406-3.406,5.282-7.934,5.282-12.751c0-4.817-1.876-9.345-5.282-12.751C53.536,28.033,49.007,26.158,44.19,26.158z",fill:f}),m.createElement("path",{"ng-attr-fill":"{{config.frame}}",d:"M78.712,72.492L67.593,61.373l-3.475-3.475c1.621-2.352,2.779-4.926,3.475-7.596c1.044-4.008,1.044-8.23,0-12.238 c-1.048-4.022-3.146-7.827-6.297-10.979C56.572,22.362,50.381,20,44.19,20C38,20,31.809,22.362,27.085,27.085 c-9.447,9.447-9.447,24.763,0,34.21C31.809,66.019,38,68.381,44.19,68.381c4.798,0,9.593-1.425,13.708-4.262l9.695,9.695 l4.899,4.899C73.351,79.571,74.476,80,75.602,80s2.251-0.429,3.11-1.288C80.429,76.994,80.429,74.209,78.712,72.492z M56.942,56.942 c-3.406,3.406-7.934,5.282-12.751,5.282s-9.345-1.876-12.751-5.282c-3.406-3.406-5.282-7.934-5.282-12.751 c0-4.817,1.876-9.345,5.282-12.751c3.406-3.406,7.934-5.282,12.751-5.282c4.817,0,9.345,1.876,12.751,5.282 c3.406,3.406,5.282,7.934,5.282,12.751C62.223,49.007,60.347,53.536,56.942,56.942z",fill:y})))))):null}function SV(t,e,n){if(null!==t)for(var r,i,o,a,s,l,c,u,h=0,p=0,d=t.type,f="FeatureCollection"===d,g="Feature"===d,m=f?t.features.length:1,y=0;y<m;y++){s=(u=!!(c=f?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<s;v++){var x=0,_=0;if(null!==(a=u?c.geometries[v]:c)){l=a.coordinates;var b=a.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,x,_))return!1;p++,x++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],p,y,x,_))return!1;p++,"MultiPoint"===b&&x++}"LineString"===b&&x++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(!1===e(l[r][i],p,y,x,_))return!1;p++}"MultiLineString"===b&&x++,"Polygon"===b&&_++}"Polygon"===b&&x++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(_=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-h;o++){if(!1===e(l[r][i][o],p,y,x,_))return!1;p++}_++}x++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===SV(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function CV(t){var e=[1/0,1/0,-1/0,-1/0];return SV(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}CV.default=CV;function EV(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}n(1725);n(4161);function kV(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r,i=EV(t),o="Feature"===(r=e).type?r.geometry:r,a=o.type,s=e.bbox,l=o.coordinates;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(i,s))return!1;"Polygon"===a&&(l=[l]);for(var c=!1,u=0;u<l.length&&!c;u++)if(MV(i,l[u][0],n.ignoreBoundary)){for(var h=!1,p=1;p<l[u].length&&!h;)MV(i,l[u][p],!n.ignoreBoundary)&&(h=!0),p++;h||(c=!0)}return c}function MV(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var a=e[i][0],s=e[i][1],l=e[o][0],c=e[o][1];if(t[1]*(a-l)+s*(l-t[0])+c*(t[0]-a)===0&&(a-t[0])*(l-t[0])<=0&&(s-t[1])*(c-t[1])<=0)return!n;s>t[1]!==c>t[1]&&t[0]<(l-a)*(t[1]-s)/(c-s)+a&&(r=!r)}return r}Object.prototype.hasOwnProperty;var TV=new ArrayBuffer(16);new Float64Array(TV),new Uint32Array(TV);function IV(t,e,n){if(null!==t)for(var r,i,o,a,s,l,c,u,h=0,p=0,d=t.type,f="FeatureCollection"===d,g="Feature"===d,m=f?t.features.length:1,y=0;y<m;y++){s=(u=!!(c=f?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<s;v++){var x=0,_=0;if(null!==(a=u?c.geometries[v]:c)){l=a.coordinates;var b=a.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,x,_))return!1;p++,x++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],p,y,x,_))return!1;p++,"MultiPoint"===b&&x++}"LineString"===b&&x++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(!1===e(l[r][i],p,y,x,_))return!1;p++}"MultiLineString"===b&&x++,"Polygon"===b&&_++}"Polygon"===b&&x++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(_=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-h;o++){if(!1===e(l[r][i][o],p,y,x,_))return!1;p++}_++}x++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===IV(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function PV(t){var e=[1/0,1/0,-1/0,-1/0];return IV(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}PV.default=PV;n(1977);!function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(e=0;e<this.centers.length-1;e++){var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,a=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+a)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}t.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(t,e,n,r,i){var o=function(t){var e=t*t,n=e*t;return[n,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t),a={x:i.x*o[0]+r.x*o[1]+n.x*o[2]+e.x*o[3],y:i.y*o[0]+r.y*o[1]+n.y*o[2]+e.y*o[3],z:i.z*o[0]+r.z*o[1]+n.z*o[2]+e.z*o[3]};return a}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])}}();function OV(t,e,n){if(null!==t)for(var r,i,o,a,s,l,c,u,h=0,p=0,d=t.type,f="FeatureCollection"===d,g="Feature"===d,m=f?t.features.length:1,y=0;y<m;y++){s=(u=!!(c=f?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<s;v++){var x=0,_=0;if(null!==(a=u?c.geometries[v]:c)){l=a.coordinates;var b=a.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,x,_))return!1;p++,x++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],p,y,x,_))return!1;p++,"MultiPoint"===b&&x++}"LineString"===b&&x++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(!1===e(l[r][i],p,y,x,_))return!1;p++}"MultiLineString"===b&&x++,"Polygon"===b&&_++}"Polygon"===b&&x++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(_=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-h;o++){if(!1===e(l[r][i][o],p,y,x,_))return!1;p++}_++}x++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===OV(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function AV(t){var e=[1/0,1/0,-1/0,-1/0];return OV(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}AV.default=AV;var DV=AV;function RV(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function LV(t,e,n){void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return RV({type:"Polygon",coordinates:t},e,n)}var NV=function(t){return function(t,e){void 0===e&&(e={});var n=Number(t[0]),r=Number(t[1]),i=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[n,r];return LV([[a,[i,r],[i,o],[n,o],a]],e.properties,{bbox:t,id:e.id})}(DV(t))};var FV=6371008.8,zV={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:250826616.45599997,kilometers:6371.0088,kilometres:6371.0088,meters:FV,metres:FV,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:3440.069546436285,radians:1,yards:6967335.223679999};function BV(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function $V(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!HV(t[0])||!HV(t[1]))throw new Error("coordinates must contain numbers");return BV({type:"Point",coordinates:t},e,n)}function jV(t,e){void 0===e&&(e="kilometers");var n=zV[e];if(!n)throw new Error(e+" units is invalid");return t/n}function UV(t){return 180*(t%(2*Math.PI))/Math.PI}function VV(t){return t%360*Math.PI/180}function HV(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function GV(t,e,n,r){void 0===r&&(r={});var i=EV(t),o=VV(i[0]),a=VV(i[1]),s=VV(n),l=jV(e,r.units),c=Math.asin(Math.sin(a)*Math.cos(l)+Math.cos(a)*Math.sin(l)*Math.cos(s));return $V([UV(o+Math.atan2(Math.sin(s)*Math.sin(l)*Math.cos(a),Math.cos(l)-Math.sin(a)*Math.sin(c))),UV(c)],r.properties)}function WV(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function XV(t,e,n){void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return WV({type:"Polygon",coordinates:t},e,n)}var qV=function(t,e,n){void 0===n&&(n={});for(var r=n.steps||64,i=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},o=[],a=0;a<r;a++)o.push(GV(t,e,-360*a/r,n).geometry.coordinates);return o.push(o[0]),XV([o],i)};function YV(t,e,n){if(null!==t)for(var r,i,o,a,s,l,c,u,h=0,p=0,d=t.type,f="FeatureCollection"===d,g="Feature"===d,m=f?t.features.length:1,y=0;y<m;y++){s=(u=!!(c=f?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<s;v++){var x=0,_=0;if(null!==(a=u?c.geometries[v]:c)){l=a.coordinates;var b=a.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,x,_))return!1;p++,x++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],p,y,x,_))return!1;p++,"MultiPoint"===b&&x++}"LineString"===b&&x++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(!1===e(l[r][i],p,y,x,_))return!1;p++}"MultiLineString"===b&&x++,"Polygon"===b&&_++}"Polygon"===b&&x++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(_=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-h;o++){if(!1===e(l[r][i][o],p,y,x,_))return!1;p++}_++}x++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===YV(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function ZV(t){var e=[1/0,1/0,-1/0,-1/0];return YV(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}ZV.default=ZV;function KV(t,e,n){if(null!==t)for(var r,i,o,a,s,l,c,u,h=0,p=0,d=t.type,f="FeatureCollection"===d,g="Feature"===d,m=f?t.features.length:1,y=0;y<m;y++){s=(u=!!(c=f?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<s;v++){var x=0,_=0;if(null!==(a=u?c.geometries[v]:c)){l=a.coordinates;var b=a.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,x,_))return!1;p++,x++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],p,y,x,_))return!1;p++,"MultiPoint"===b&&x++}"LineString"===b&&x++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(!1===e(l[r][i],p,y,x,_))return!1;p++}"MultiLineString"===b&&x++,"Polygon"===b&&_++}"Polygon"===b&&x++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(_=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-h;o++){if(!1===e(l[r][i][o],p,y,x,_))return!1;p++}_++}x++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===KV(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function JV(t){var e=[1/0,1/0,-1/0,-1/0];return KV(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}JV.default=JV;n(7089);n(9234);function QV(t,e,n){if(null!==t)for(var r,i,o,a,s,l,c,u,h=0,p=0,d=t.type,f="FeatureCollection"===d,g="Feature"===d,m=f?t.features.length:1,y=0;y<m;y++){s=(u=!!(c=f?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<s;v++){var x=0,_=0;if(null!==(a=u?c.geometries[v]:c)){l=a.coordinates;var b=a.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,x,_))return!1;p++,x++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],p,y,x,_))return!1;p++,"MultiPoint"===b&&x++}"LineString"===b&&x++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(!1===e(l[r][i],p,y,x,_))return!1;p++}"MultiLineString"===b&&x++,"Polygon"===b&&_++}"Polygon"===b&&x++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(_=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-h;o++){if(!1===e(l[r][i][o],p,y,x,_))return!1;p++}_++}x++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===QV(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function tH(t){var e=[1/0,1/0,-1/0,-1/0];return QV(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}tH.default=tH;var eH=Math.PI/180,nH=180/Math.PI,rH=function(t,e){this.lon=t,this.lat=e,this.x=eH*t,this.y=eH*e};rH.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},rH.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new rH(e,t)};var iH=function(){this.coords=[],this.length=0};iH.prototype.move_to=function(t){this.length++,this.coords.push(t)};var oH=function(t){this.properties=t||{},this.geometries=[]};oH.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},oH.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var aH=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new rH(t.x,t.y),this.end=new rH(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};aH.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),a=nH*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[nH*Math.atan2(i,r),a]},aH.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=r*i,a=this.interpolate(o);n.push(a)}for(var s=!1,l=0,c=e&&e.offset?e.offset:10,u=180-c,h=-180+c,p=360-c,d=1;d<n.length;++d){var f=n[d-1][0],g=n[d][0],m=Math.abs(g-f);m>p&&(g>u&&f<h||f>u&&g<h)?s=!0:m>l&&(l=m)}var y=[];if(s&&l<c){var v=[];y.push(v);for(var x=0;x<n.length;++x){var _=parseFloat(n[x][0]);if(x>0&&Math.abs(_-n[x-1][0])>p){var b=parseFloat(n[x-1][0]),w=parseFloat(n[x-1][1]),S=parseFloat(n[x][0]),C=parseFloat(n[x][1]);if(b>-180&&b<h&&180===S&&x+1<n.length&&n[x-1][0]>-180&&n[x-1][0]<h){v.push([-180,n[x][1]]),x++,v.push([n[x][0],n[x][1]]);continue}if(b>u&&b<180&&-180===S&&x+1<n.length&&n[x-1][0]>u&&n[x-1][0]<180){v.push([180,n[x][1]]),x++,v.push([n[x][0],n[x][1]]);continue}if(b<h&&S>u){var E=b;b=S,S=E;var k=w;w=C,C=k}if(b>u&&S<h&&(S+=360),b<=180&&S>=180&&b<S){var M=(180-b)/(S-b),T=M*C+(1-M)*w;v.push([n[x-1][0]>u?180:-180,T]),(v=[]).push([n[x-1][0]>u?-180:180,T]),y.push(v)}else v=[],y.push(v);v.push([_,n[x][1]])}else v.push([n[x][0],n[x][1]])}}else{var I=[];y.push(I);for(var P=0;P<n.length;++P)I.push([n[P][0],n[P][1]])}for(var O=new oH(this.properties),A=0;A<y.length;++A){var D=new iH;O.geometries.push(D);for(var R=y[A],L=0;L<R.length;++L)D.move_to(R[L])}return O};function sH(t,e,n){if(null!==t)for(var r,i,o,a,s,l,c,u,h=0,p=0,d=t.type,f="FeatureCollection"===d,g="Feature"===d,m=f?t.features.length:1,y=0;y<m;y++){s=(u=!!(c=f?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<s;v++){var x=0,_=0;if(null!==(a=u?c.geometries[v]:c)){l=a.coordinates;var b=a.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,x,_))return!1;p++,x++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],p,y,x,_))return!1;p++,"MultiPoint"===b&&x++}"LineString"===b&&x++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(!1===e(l[r][i],p,y,x,_))return!1;p++}"MultiLineString"===b&&x++,"Polygon"===b&&_++}"Polygon"===b&&x++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(_=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-h;o++){if(!1===e(l[r][i][o],p,y,x,_))return!1;p++}_++}x++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===sH(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function lH(t){var e=[1/0,1/0,-1/0,-1/0];return sH(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}lH.default=lH;function cH(t,e,n){if(null!==t)for(var r,i,o,a,s,l,c,u,h=0,p=0,d=t.type,f="FeatureCollection"===d,g="Feature"===d,m=f?t.features.length:1,y=0;y<m;y++){s=(u=!!(c=f?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<s;v++){var x=0,_=0;if(null!==(a=u?c.geometries[v]:c)){l=a.coordinates;var b=a.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,x,_))return!1;p++,x++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],p,y,x,_))return!1;p++,"MultiPoint"===b&&x++}"LineString"===b&&x++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(!1===e(l[r][i],p,y,x,_))return!1;p++}"MultiLineString"===b&&x++,"Polygon"===b&&_++}"Polygon"===b&&x++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(_=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-h;o++){if(!1===e(l[r][i][o],p,y,x,_))return!1;p++}_++}x++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===cH(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function uH(t){var e=[1/0,1/0,-1/0,-1/0];return cH(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}uH.default=uH;n(3663);function hH(t,e,n){if(null!==t)for(var r,i,o,a,s,l,c,u,h=0,p=0,d=t.type,f="FeatureCollection"===d,g="Feature"===d,m=f?t.features.length:1,y=0;y<m;y++){s=(u=!!(c=f?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<s;v++){var x=0,_=0;if(null!==(a=u?c.geometries[v]:c)){l=a.coordinates;var b=a.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,x,_))return!1;p++,x++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],p,y,x,_))return!1;p++,"MultiPoint"===b&&x++}"LineString"===b&&x++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(!1===e(l[r][i],p,y,x,_))return!1;p++}"MultiLineString"===b&&x++,"Polygon"===b&&_++}"Polygon"===b&&x++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(_=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-h;o++){if(!1===e(l[r][i][o],p,y,x,_))return!1;p++}_++}x++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===hH(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function pH(t){var e=[1/0,1/0,-1/0,-1/0];return hH(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}pH.default=pH;function dH(t,e,n){if(null!==t)for(var r,i,o,a,s,l,c,u,h=0,p=0,d=t.type,f="FeatureCollection"===d,g="Feature"===d,m=f?t.features.length:1,y=0;y<m;y++){s=(u=!!(c=f?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<s;v++){var x=0,_=0;if(null!==(a=u?c.geometries[v]:c)){l=a.coordinates;var b=a.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,x,_))return!1;p++,x++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],p,y,x,_))return!1;p++,"MultiPoint"===b&&x++}"LineString"===b&&x++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(!1===e(l[r][i],p,y,x,_))return!1;p++}"MultiLineString"===b&&x++,"Polygon"===b&&_++}"Polygon"===b&&x++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(_=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-h;o++){if(!1===e(l[r][i][o],p,y,x,_))return!1;p++}_++}x++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===dH(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function fH(t){var e=[1/0,1/0,-1/0,-1/0];return dH(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}fH.default=fH;var gH=[],mH=[],yH=[],vH=[],xH=[],_H=[],bH=[],wH=[],SH=[],CH=[],EH=[],kH=[],MH=[],TH=[],IH=[],PH=[],OH=[],AH=[],DH=[],RH=[],LH=[],NH=[],FH=[],zH=[];bH[85]=CH[85]=-1,wH[85]=EH[85]=0,SH[85]=kH[85]=1,DH[85]=NH[85]=1,RH[85]=FH[85]=0,LH[85]=zH[85]=1,gH[85]=vH[85]=0,mH[85]=xH[85]=-1,yH[85]=IH[85]=0,PH[85]=MH[85]=0,OH[85]=TH[85]=1,_H[85]=AH[85]=1,NH[1]=NH[169]=0,FH[1]=FH[169]=-1,zH[1]=zH[169]=0,MH[1]=MH[169]=-1,TH[1]=TH[169]=0,IH[1]=IH[169]=0,CH[4]=CH[166]=0,EH[4]=EH[166]=-1,kH[4]=kH[166]=1,PH[4]=PH[166]=1,OH[4]=OH[166]=0,AH[4]=AH[166]=0,bH[16]=bH[154]=0,wH[16]=wH[154]=1,SH[16]=SH[154]=1,vH[16]=vH[154]=1,xH[16]=xH[154]=0,_H[16]=_H[154]=1,DH[64]=DH[106]=0,RH[64]=RH[106]=1,LH[64]=LH[106]=0,gH[64]=gH[106]=-1,mH[64]=mH[106]=0,yH[64]=yH[106]=1,DH[2]=DH[168]=0,RH[2]=RH[168]=-1,LH[2]=LH[168]=1,NH[2]=NH[168]=0,FH[2]=FH[168]=-1,zH[2]=zH[168]=0,MH[2]=MH[168]=-1,TH[2]=TH[168]=0,IH[2]=IH[168]=0,PH[2]=PH[168]=-1,OH[2]=OH[168]=0,AH[2]=AH[168]=1,bH[8]=bH[162]=0,wH[8]=wH[162]=-1,SH[8]=SH[162]=0,CH[8]=CH[162]=0,EH[8]=EH[162]=-1,kH[8]=kH[162]=1,MH[8]=MH[162]=1,TH[8]=TH[162]=0,IH[8]=IH[162]=1,PH[8]=PH[162]=1,OH[8]=OH[162]=0,AH[8]=AH[162]=0,bH[32]=bH[138]=0,wH[32]=wH[138]=1,SH[32]=SH[138]=1,CH[32]=CH[138]=0,EH[32]=EH[138]=1,kH[32]=kH[138]=0,gH[32]=gH[138]=1,mH[32]=mH[138]=0,yH[32]=yH[138]=0,vH[32]=vH[138]=1,xH[32]=xH[138]=0,_H[32]=_H[138]=1,NH[128]=NH[42]=0,FH[128]=FH[42]=1,zH[128]=zH[42]=1,DH[128]=DH[42]=0,RH[128]=RH[42]=1,LH[128]=LH[42]=0,gH[128]=gH[42]=-1,mH[128]=mH[42]=0,yH[128]=yH[42]=1,vH[128]=vH[42]=-1,xH[128]=xH[42]=0,_H[128]=_H[42]=0,CH[5]=CH[165]=-1,EH[5]=EH[165]=0,kH[5]=kH[165]=0,NH[5]=NH[165]=1,FH[5]=FH[165]=0,zH[5]=zH[165]=0,PH[20]=PH[150]=0,OH[20]=OH[150]=1,AH[20]=AH[150]=1,vH[20]=vH[150]=0,xH[20]=xH[150]=-1,_H[20]=_H[150]=1,bH[80]=bH[90]=-1,wH[80]=wH[90]=0,SH[80]=SH[90]=1,DH[80]=DH[90]=1,RH[80]=RH[90]=0,LH[80]=LH[90]=1,MH[65]=MH[105]=0,TH[65]=TH[105]=1,IH[65]=IH[105]=0,gH[65]=gH[105]=0,mH[65]=mH[105]=-1,yH[65]=yH[105]=0,bH[160]=bH[10]=-1,wH[160]=wH[10]=0,SH[160]=SH[10]=1,CH[160]=CH[10]=-1,EH[160]=EH[10]=0,kH[160]=kH[10]=0,NH[160]=NH[10]=1,FH[160]=FH[10]=0,zH[160]=zH[10]=0,DH[160]=DH[10]=1,RH[160]=RH[10]=0,LH[160]=LH[10]=1,PH[130]=PH[40]=0,OH[130]=OH[40]=1,AH[130]=AH[40]=1,MH[130]=MH[40]=0,TH[130]=TH[40]=1,IH[130]=IH[40]=0,gH[130]=gH[40]=0,mH[130]=mH[40]=-1,yH[130]=yH[40]=0,vH[130]=vH[40]=0,xH[130]=xH[40]=-1,_H[130]=_H[40]=1,CH[37]=CH[133]=0,EH[37]=EH[133]=1,kH[37]=kH[133]=1,NH[37]=NH[133]=0,FH[37]=FH[133]=1,zH[37]=zH[133]=0,gH[37]=gH[133]=-1,mH[37]=mH[133]=0,yH[37]=yH[133]=0,vH[37]=vH[133]=1,xH[37]=xH[133]=0,_H[37]=_H[133]=0,PH[148]=PH[22]=-1,OH[148]=OH[22]=0,AH[148]=AH[22]=0,NH[148]=NH[22]=0,FH[148]=FH[22]=-1,zH[148]=zH[22]=1,DH[148]=DH[22]=0,RH[148]=RH[22]=1,LH[148]=LH[22]=1,vH[148]=vH[22]=-1,xH[148]=xH[22]=0,_H[148]=_H[22]=1,bH[82]=bH[88]=0,wH[82]=wH[88]=-1,SH[82]=SH[88]=1,PH[82]=PH[88]=1,OH[82]=OH[88]=0,AH[82]=AH[88]=1,MH[82]=MH[88]=-1,TH[82]=TH[88]=0,IH[82]=IH[88]=1,DH[82]=DH[88]=0,RH[82]=RH[88]=-1,LH[82]=LH[88]=0,bH[73]=bH[97]=0,wH[73]=wH[97]=1,SH[73]=SH[97]=0,CH[73]=CH[97]=0,EH[73]=EH[97]=-1,kH[73]=kH[97]=0,MH[73]=MH[97]=1,TH[73]=TH[97]=0,IH[73]=IH[97]=0,gH[73]=gH[97]=1,mH[73]=mH[97]=0,yH[73]=yH[97]=1,bH[145]=bH[25]=0,wH[145]=wH[25]=-1,SH[145]=SH[25]=0,MH[145]=MH[25]=1,TH[145]=TH[25]=0,IH[145]=IH[25]=1,NH[145]=NH[25]=0,FH[145]=FH[25]=1,zH[145]=zH[25]=1,vH[145]=vH[25]=-1,xH[145]=xH[25]=0,_H[145]=_H[25]=0,CH[70]=CH[100]=0,EH[70]=EH[100]=1,kH[70]=kH[100]=0,PH[70]=PH[100]=-1,OH[70]=OH[100]=0,AH[70]=AH[100]=1,DH[70]=DH[100]=0,RH[70]=RH[100]=-1,LH[70]=LH[100]=1,gH[70]=gH[100]=1,mH[70]=mH[100]=0,yH[70]=yH[100]=0,CH[101]=CH[69]=0,EH[101]=EH[69]=1,kH[101]=kH[69]=0,gH[101]=gH[69]=1,mH[101]=mH[69]=0,yH[101]=yH[69]=0,NH[149]=NH[21]=0,FH[149]=FH[21]=1,zH[149]=zH[21]=1,vH[149]=vH[21]=-1,xH[149]=xH[21]=0,_H[149]=_H[21]=0,PH[86]=PH[84]=-1,OH[86]=OH[84]=0,AH[86]=AH[84]=1,DH[86]=DH[84]=0,RH[86]=RH[84]=-1,LH[86]=LH[84]=1,bH[89]=bH[81]=0,wH[89]=wH[81]=-1,SH[89]=SH[81]=0,MH[89]=MH[81]=1,TH[89]=TH[81]=0,IH[89]=IH[81]=1,bH[96]=bH[74]=0,wH[96]=wH[74]=1,SH[96]=SH[74]=0,CH[96]=CH[74]=-1,EH[96]=EH[74]=0,kH[96]=kH[74]=1,DH[96]=DH[74]=1,RH[96]=RH[74]=0,LH[96]=LH[74]=0,gH[96]=gH[74]=1,mH[96]=mH[74]=0,yH[96]=yH[74]=1,bH[24]=bH[146]=0,wH[24]=wH[146]=-1,SH[24]=SH[146]=1,PH[24]=PH[146]=1,OH[24]=OH[146]=0,AH[24]=AH[146]=1,MH[24]=MH[146]=0,TH[24]=TH[146]=1,IH[24]=IH[146]=1,vH[24]=vH[146]=0,xH[24]=xH[146]=-1,_H[24]=_H[146]=0,CH[6]=CH[164]=-1,EH[6]=EH[164]=0,kH[6]=kH[164]=1,PH[6]=PH[164]=-1,OH[6]=OH[164]=0,AH[6]=AH[164]=0,NH[6]=NH[164]=0,FH[6]=FH[164]=-1,zH[6]=zH[164]=1,DH[6]=DH[164]=1,RH[6]=RH[164]=0,LH[6]=LH[164]=0,MH[129]=MH[41]=0,TH[129]=TH[41]=1,IH[129]=IH[41]=1,NH[129]=NH[41]=0,FH[129]=FH[41]=1,zH[129]=zH[41]=0,gH[129]=gH[41]=-1,mH[129]=mH[41]=0,yH[129]=yH[41]=0,vH[129]=vH[41]=0,xH[129]=xH[41]=-1,_H[129]=_H[41]=0,PH[66]=PH[104]=0,OH[66]=OH[104]=1,AH[66]=AH[104]=0,MH[66]=MH[104]=-1,TH[66]=TH[104]=0,IH[66]=IH[104]=1,DH[66]=DH[104]=0,RH[66]=RH[104]=-1,LH[66]=LH[104]=0,gH[66]=gH[104]=0,mH[66]=mH[104]=-1,yH[66]=yH[104]=1,bH[144]=bH[26]=-1,wH[144]=wH[26]=0,SH[144]=SH[26]=0,NH[144]=NH[26]=1,FH[144]=FH[26]=0,zH[144]=zH[26]=1,DH[144]=DH[26]=0,RH[144]=RH[26]=1,LH[144]=LH[26]=1,vH[144]=vH[26]=-1,xH[144]=xH[26]=0,_H[144]=_H[26]=1,CH[36]=CH[134]=0,EH[36]=EH[134]=1,kH[36]=kH[134]=1,PH[36]=PH[134]=0,OH[36]=OH[134]=1,AH[36]=AH[134]=0,gH[36]=gH[134]=0,mH[36]=mH[134]=-1,yH[36]=yH[134]=1,vH[36]=vH[134]=1,xH[36]=xH[134]=0,_H[36]=_H[134]=0,bH[9]=bH[161]=-1,wH[9]=wH[161]=0,SH[9]=SH[161]=0,CH[9]=CH[161]=0,EH[9]=EH[161]=-1,kH[9]=kH[161]=0,MH[9]=MH[161]=1,TH[9]=TH[161]=0,IH[9]=IH[161]=0,NH[9]=NH[161]=1,FH[9]=FH[161]=0,zH[9]=zH[161]=1,bH[136]=0,wH[136]=1,SH[136]=1,CH[136]=0,EH[136]=1,kH[136]=0,PH[136]=-1,OH[136]=0,AH[136]=1,MH[136]=-1,TH[136]=0,IH[136]=0,NH[136]=0,FH[136]=-1,zH[136]=0,DH[136]=0,RH[136]=-1,LH[136]=1,gH[136]=1,mH[136]=0,yH[136]=0,vH[136]=1,xH[136]=0,_H[136]=1,bH[34]=0,wH[34]=-1,SH[34]=0,CH[34]=0,EH[34]=-1,kH[34]=1,PH[34]=1,OH[34]=0,AH[34]=0,MH[34]=1,TH[34]=0,IH[34]=1,NH[34]=0,FH[34]=1,zH[34]=1,DH[34]=0,RH[34]=1,LH[34]=0,gH[34]=-1,mH[34]=0,yH[34]=1,vH[34]=-1,xH[34]=0,_H[34]=0,bH[35]=0,wH[35]=1,SH[35]=1,CH[35]=0,EH[35]=-1,kH[35]=1,PH[35]=1,OH[35]=0,AH[35]=0,MH[35]=-1,TH[35]=0,IH[35]=0,NH[35]=0,FH[35]=-1,zH[35]=0,DH[35]=0,RH[35]=1,LH[35]=0,gH[35]=-1,mH[35]=0,yH[35]=1,vH[35]=1,xH[35]=0,_H[35]=1,bH[153]=0,wH[153]=1,SH[153]=1,MH[153]=-1,TH[153]=0,IH[153]=0,NH[153]=0,FH[153]=-1,zH[153]=0,vH[153]=1,xH[153]=0,_H[153]=1,CH[102]=0,EH[102]=-1,kH[102]=1,PH[102]=1,OH[102]=0,AH[102]=0,DH[102]=0,RH[102]=1,LH[102]=0,gH[102]=-1,mH[102]=0,yH[102]=1,bH[155]=0,wH[155]=-1,SH[155]=0,MH[155]=1,TH[155]=0,IH[155]=1,NH[155]=0,FH[155]=1,zH[155]=1,vH[155]=-1,xH[155]=0,_H[155]=0,CH[103]=0,EH[103]=1,kH[103]=0,PH[103]=-1,OH[103]=0,AH[103]=1,DH[103]=0,RH[103]=-1,LH[103]=1,gH[103]=1,mH[103]=0,yH[103]=0,bH[152]=0,wH[152]=1,SH[152]=1,PH[152]=-1,OH[152]=0,AH[152]=1,MH[152]=-1,TH[152]=0,IH[152]=0,NH[152]=0,FH[152]=-1,zH[152]=0,DH[152]=0,RH[152]=-1,LH[152]=1,vH[152]=1,xH[152]=0,_H[152]=1,bH[156]=0,wH[156]=-1,SH[156]=1,PH[156]=1,OH[156]=0,AH[156]=1,MH[156]=-1,TH[156]=0,IH[156]=0,NH[156]=0,FH[156]=-1,zH[156]=0,DH[156]=0,RH[156]=1,LH[156]=1,vH[156]=-1,xH[156]=0,_H[156]=1,bH[137]=0,wH[137]=1,SH[137]=1,CH[137]=0,EH[137]=1,kH[137]=0,MH[137]=-1,TH[137]=0,IH[137]=0,NH[137]=0,FH[137]=-1,zH[137]=0,gH[137]=1,mH[137]=0,yH[137]=0,vH[137]=1,xH[137]=0,_H[137]=1,bH[139]=0,wH[139]=1,SH[139]=1,CH[139]=0,EH[139]=-1,kH[139]=0,MH[139]=1,TH[139]=0,IH[139]=0,NH[139]=0,FH[139]=1,zH[139]=0,gH[139]=-1,mH[139]=0,yH[139]=0,vH[139]=1,xH[139]=0,_H[139]=1,bH[98]=0,wH[98]=-1,SH[98]=0,CH[98]=0,EH[98]=-1,kH[98]=1,PH[98]=1,OH[98]=0,AH[98]=0,MH[98]=1,TH[98]=0,IH[98]=1,DH[98]=0,RH[98]=1,LH[98]=0,gH[98]=-1,mH[98]=0,yH[98]=1,bH[99]=0,wH[99]=1,SH[99]=0,CH[99]=0,EH[99]=-1,kH[99]=1,PH[99]=1,OH[99]=0,AH[99]=0,MH[99]=-1,TH[99]=0,IH[99]=1,DH[99]=0,RH[99]=-1,LH[99]=0,gH[99]=1,mH[99]=0,yH[99]=1,CH[38]=0,EH[38]=-1,kH[38]=1,PH[38]=1,OH[38]=0,AH[38]=0,NH[38]=0,FH[38]=1,zH[38]=1,DH[38]=0,RH[38]=1,LH[38]=0,gH[38]=-1,mH[38]=0,yH[38]=1,vH[38]=-1,xH[38]=0,_H[38]=0,CH[39]=0,EH[39]=1,kH[39]=1,PH[39]=-1,OH[39]=0,AH[39]=0,NH[39]=0,FH[39]=-1,zH[39]=1,DH[39]=0,RH[39]=1,LH[39]=0,gH[39]=-1,mH[39]=0,yH[39]=1,vH[39]=1,xH[39]=0,_H[39]=0;var BH=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},$H=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},jH=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},UH=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},VH=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},HH=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},GH=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},WH=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},XH=[],qH=[],YH=[],ZH=[],KH=[],JH=[],QH=[],tG=[];ZH[1]=KH[1]=18,ZH[169]=KH[169]=18,YH[4]=qH[4]=12,YH[166]=qH[166]=12,XH[16]=tG[16]=4,XH[154]=tG[154]=4,JH[64]=QH[64]=22,JH[106]=QH[106]=22,YH[2]=JH[2]=17,ZH[2]=KH[2]=18,YH[168]=JH[168]=17,ZH[168]=KH[168]=18,XH[8]=ZH[8]=9,qH[8]=YH[8]=12,XH[162]=ZH[162]=9,qH[162]=YH[162]=12,XH[32]=tG[32]=4,qH[32]=QH[32]=1,XH[138]=tG[138]=4,qH[138]=QH[138]=1,KH[128]=tG[128]=21,JH[128]=QH[128]=22,KH[42]=tG[42]=21,JH[42]=QH[42]=22,qH[5]=KH[5]=14,qH[165]=KH[165]=14,YH[20]=tG[20]=6,YH[150]=tG[150]=6,XH[80]=JH[80]=11,XH[90]=JH[90]=11,ZH[65]=QH[65]=3,ZH[105]=QH[105]=3,XH[160]=JH[160]=11,qH[160]=KH[160]=14,XH[10]=JH[10]=11,qH[10]=KH[10]=14,YH[130]=tG[130]=6,ZH[130]=QH[130]=3,YH[40]=tG[40]=6,ZH[40]=QH[40]=3,qH[101]=QH[101]=1,qH[69]=QH[69]=1,KH[149]=tG[149]=21,KH[21]=tG[21]=21,YH[86]=JH[86]=17,YH[84]=JH[84]=17,XH[89]=ZH[89]=9,XH[81]=ZH[81]=9,XH[96]=QH[96]=0,qH[96]=JH[96]=15,XH[74]=QH[74]=0,qH[74]=JH[74]=15,XH[24]=YH[24]=8,ZH[24]=tG[24]=7,XH[146]=YH[146]=8,ZH[146]=tG[146]=7,qH[6]=JH[6]=15,YH[6]=KH[6]=16,qH[164]=JH[164]=15,YH[164]=KH[164]=16,ZH[129]=tG[129]=7,KH[129]=QH[129]=20,ZH[41]=tG[41]=7,KH[41]=QH[41]=20,YH[66]=QH[66]=2,ZH[66]=JH[66]=19,YH[104]=QH[104]=2,ZH[104]=JH[104]=19,XH[144]=KH[144]=10,JH[144]=tG[144]=23,XH[26]=KH[26]=10,JH[26]=tG[26]=23,qH[36]=tG[36]=5,YH[36]=QH[36]=2,qH[134]=tG[134]=5,YH[134]=QH[134]=2,XH[9]=KH[9]=10,qH[9]=ZH[9]=13,XH[161]=KH[161]=10,qH[161]=ZH[161]=13,qH[37]=tG[37]=5,KH[37]=QH[37]=20,qH[133]=tG[133]=5,KH[133]=QH[133]=20,YH[148]=KH[148]=16,JH[148]=tG[148]=23,YH[22]=KH[22]=16,JH[22]=tG[22]=23,XH[82]=YH[82]=8,ZH[82]=JH[82]=19,XH[88]=YH[88]=8,ZH[88]=JH[88]=19,XH[73]=QH[73]=0,qH[73]=ZH[73]=13,XH[97]=QH[97]=0,qH[97]=ZH[97]=13,XH[145]=ZH[145]=9,KH[145]=tG[145]=21,XH[25]=ZH[25]=9,KH[25]=tG[25]=21,qH[70]=QH[70]=1,YH[70]=JH[70]=17,qH[100]=QH[100]=1,YH[100]=JH[100]=17,XH[34]=ZH[34]=9,qH[34]=YH[34]=12,KH[34]=tG[34]=21,JH[34]=QH[34]=22,XH[136]=tG[136]=4,qH[136]=QH[136]=1,YH[136]=JH[136]=17,ZH[136]=KH[136]=18,XH[35]=tG[35]=4,qH[35]=YH[35]=12,ZH[35]=KH[35]=18,JH[35]=QH[35]=22,XH[153]=tG[153]=4,ZH[153]=KH[153]=18,qH[102]=YH[102]=12,JH[102]=QH[102]=22,XH[155]=ZH[155]=9,KH[155]=tG[155]=23,qH[103]=QH[103]=1,YH[103]=JH[103]=17,XH[152]=tG[152]=4,YH[152]=JH[152]=17,ZH[152]=KH[152]=18,XH[156]=YH[156]=8,ZH[156]=KH[156]=18,JH[156]=tG[156]=23,XH[137]=tG[137]=4,qH[137]=QH[137]=1,ZH[137]=KH[137]=18,XH[139]=tG[139]=4,qH[139]=ZH[139]=13,KH[139]=QH[139]=20,XH[98]=ZH[98]=9,qH[98]=YH[98]=12,JH[98]=QH[98]=22,XH[99]=QH[99]=0,qH[99]=YH[99]=12,ZH[99]=JH[99]=19,qH[38]=YH[38]=12,KH[38]=tG[38]=21,JH[38]=QH[38]=22,qH[39]=tG[39]=5,YH[39]=KH[39]=16,JH[39]=QH[39]=22;var eG=[];eG[1]=eG[169]=BH,eG[4]=eG[166]=$H,eG[16]=eG[154]=jH,eG[64]=eG[106]=UH,eG[168]=eG[2]=VH,eG[162]=eG[8]=HH,eG[138]=eG[32]=GH,eG[42]=eG[128]=WH,eG[5]=eG[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},eG[20]=eG[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},eG[80]=eG[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},eG[65]=eG[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},eG[160]=eG[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},eG[130]=eG[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},eG[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},eG[101]=eG[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},eG[149]=eG[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},eG[86]=eG[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},eG[89]=eG[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},eG[96]=eG[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},eG[24]=eG[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},eG[6]=eG[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},eG[129]=eG[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},eG[66]=eG[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},eG[144]=eG[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},eG[36]=eG[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},eG[9]=eG[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},eG[37]=eG[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},eG[148]=eG[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},eG[82]=eG[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},eG[73]=eG[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},eG[145]=eG[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},eG[70]=eG[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},eG[34]=function(t){return[WH(t),HH(t)]},eG[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},eG[136]=function(t){return[GH(t),VH(t)]},eG[153]=function(t){return[jH(t),BH(t)]},eG[102]=function(t){return[$H(t),UH(t)]},eG[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},eG[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},eG[152]=function(t){return[jH(t),VH(t)]},eG[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},eG[137]=function(t){return[GH(t),BH(t)]},eG[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},eG[98]=function(t){return[HH(t),UH(t)]},eG[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},eG[38]=function(t){return[$H(t),WH(t)]},eG[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};function nG(t,e,n){if(null!==t)for(var r,i,o,a,s,l,c,u,h=0,p=0,d=t.type,f="FeatureCollection"===d,g="Feature"===d,m=f?t.features.length:1,y=0;y<m;y++){s=(u=!!(c=f?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<s;v++){var x=0,_=0;if(null!==(a=u?c.geometries[v]:c)){l=a.coordinates;var b=a.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,x,_))return!1;p++,x++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],p,y,x,_))return!1;p++,"MultiPoint"===b&&x++}"LineString"===b&&x++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(!1===e(l[r][i],p,y,x,_))return!1;p++}"MultiLineString"===b&&x++,"Polygon"===b&&_++}"Polygon"===b&&x++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(_=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-h;o++){if(!1===e(l[r][i][o],p,y,x,_))return!1;p++}_++}x++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===nG(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function rG(t){var e=[1/0,1/0,-1/0,-1/0];return nG(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}rG.default=rG;function iG(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function oG(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!cG(t[0])||!cG(t[1]))throw new Error("coordinates must contain numbers");return iG({type:"Point",coordinates:t},e,n)}function aG(t,e,n){void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return iG({type:"Polygon",coordinates:t},e,n)}function sG(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return iG({type:"LineString",coordinates:t},e,n)}function lG(t,e,n){return void 0===n&&(n={}),iG({type:"MultiPoint",coordinates:t},e,n)}function cG(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function uG(t,e,n){var r=e[0]-t[0],i=e[1]-t[1],o=n[0]-e[0];return function(t){return(t>0)-(t<0)||+t}(r*(n[1]-e[1])-o*i)}function hG(t,e){return e.geometry.coordinates[0].every((function(e){return kV(oG(e),t)}))}var pG=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort((function(e,n){var r=e.to,i=n.to;if(r.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]===0&&i.coordinates[0]-t.coordinates[0]===0)return r.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-i.coordinates[1]:i.coordinates[1]-r.coordinates[1];var o=uG(t.coordinates,r.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}(),dG=pG,fG=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return sG([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return uG(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}(),gG=fG,mG=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce((function(e,n,r){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e}),0),n=(0===e?this.length:e)-1,r=(e+1)%this.length,i=uG(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===i?this.edges[n].from.coordinates[0]>this.edges[r].from.coordinates[0]:i>0},t.prototype.toMultiPoint=function(){return lG(this.edges.map((function(t){return t.from.coordinates})))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map((function(t){return t.from.coordinates}));return t.push(this.edges[0].from.coordinates),this.polygon=aG([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=NV(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var n,r,i=t.getEnvelope();return e.forEach((function(e){var o=e.getEnvelope();if(r&&(n=r.getEnvelope()),!function(t,e){var n=t.geometry.coordinates[0].map((function(t){return t[0]})),r=t.geometry.coordinates[0].map((function(t){return t[1]})),i=e.geometry.coordinates[0].map((function(t){return t[0]})),o=e.geometry.coordinates[0].map((function(t){return t[1]}));return Math.max.apply(null,n)===Math.max.apply(null,i)&&Math.max.apply(null,r)===Math.max.apply(null,o)&&Math.min.apply(null,n)===Math.min.apply(null,i)&&Math.min.apply(null,r)===Math.min.apply(null,o)}(o,i)&&hG(o,i)){for(var a=t.map((function(t){return t.from.coordinates})),s=void 0,l=function(t){e.some((function(e){return n=t,r=e.from.coordinates,n[0]===r[0]&&n[1]===r[1];var n,r}))||(s=t)},c=0,u=a;c<u.length;c++){l(u[c])}s&&e.inside(oG(s))&&(r&&!hG(n,o)||(r=e))}})),r},t.prototype.inside=function(t){return kV(t,this.toPolygon())},t}(),yG=mG;function vG(t,e,n){if(null!==t)for(var r,i,o,a,s,l,c,u,h=0,p=0,d=t.type,f="FeatureCollection"===d,g="Feature"===d,m=f?t.features.length:1,y=0;y<m;y++){s=(u=!!(c=f?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<s;v++){var x=0,_=0;if(null!==(a=u?c.geometries[v]:c)){l=a.coordinates;var b=a.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,x,_))return!1;p++,x++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],p,y,x,_))return!1;p++,"MultiPoint"===b&&x++}"LineString"===b&&x++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(!1===e(l[r][i],p,y,x,_))return!1;p++}"MultiLineString"===b&&x++,"Polygon"===b&&_++}"Polygon"===b&&x++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(_=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-h;o++){if(!1===e(l[r][i][o],p,y,x,_))return!1;p++}_++}x++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===vG(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function xG(t,e){var n,r,i,o,a,s,l,c,u,h,p=0,d="FeatureCollection"===t.type,f="Feature"===t.type,g=d?t.features.length:1;for(n=0;n<g;n++){for(s=d?t.features[n].geometry:f?t.geometry:t,c=d?t.features[n].properties:f?t.properties:{},u=d?t.features[n].bbox:f?t.bbox:void 0,h=d?t.features[n].id:f?t.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=l?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,c,u,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],p,c,u,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,c,u,h))return!1;p++}}function _G(t,e){xG(t,(function(t,n,r,i,o){var a,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==e(iG(t,r,{bbox:i,id:o}),n,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<t.coordinates.length;l++){var c=t.coordinates[l];if(!1===e(iG({type:a,coordinates:c},r),n,l))return!1}}))}!function(){function t(){this.edges=[],this.nodes={}}t.fromGeoJson=function(e){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var n=new t;return _G(e,(function(t){!function(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}(t,"LineString","Graph::fromGeoJson"),function(t,e,n,r){var i=n;vG(t,(function(t,r,o,a,s){i=0===r&&void 0===n?t:e(i,t,r,o,a,s)}),r)}(t,(function(t,e){if(t){var r=n.getNode(t),i=n.getNode(e);n.addEdge(r,i)}return e}))})),n},t.prototype.getNode=function(t){var e=dG.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new dG(t)),n},t.prototype.addEdge=function(t,e){var n=new gG(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},t.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))},t.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map((function(t){return t.to}));this.removeNode(t),n.forEach((function(t){return e._removeIfDangle(t)}))}},t.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))},t.prototype._computeNextCWEdges=function(t){var e=this;"undefined"===typeof t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e}))},t.prototype._computeNextCCWEdges=function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var a=i[o],s=a.symetric,l=void 0,c=void 0;a.label===e&&(l=a),s.label===e&&(c=s),l&&c&&(c&&(r=c),l&&(r&&(r.next=l,r=void 0),n||(n=l)))}r&&(r.next=n)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach((function(n){if(!(n.label>=0)){t.push(n);var r=n;do{r.label=e,r=r.next}while(!n.isEqual(r));e++}})),t},t.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(n){t._computeNextCCWEdges(n,e.label)}))}));var e=[];return this.edges.forEach((function(n){n.ring||e.push(t._findEdgeRing(n))})),e},t.prototype._findIntersectionNodes=function(t){var e=[],n=t,r=function(){var r=0;n.from.getOuterEdges().forEach((function(e){e.label===t.label&&++r})),r>1&&e.push(n.from),n=n.next};do{r()}while(!t.isEqual(n));return e},t.prototype._findEdgeRing=function(t){var e=t,n=new yG;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},t.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()}}();function bG(t,e,n){if(null!==t)for(var r,i,o,a,s,l,c,u,h=0,p=0,d=t.type,f="FeatureCollection"===d,g="Feature"===d,m=f?t.features.length:1,y=0;y<m;y++){s=(u=!!(c=f?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<s;v++){var x=0,_=0;if(null!==(a=u?c.geometries[v]:c)){l=a.coordinates;var b=a.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,x,_))return!1;p++,x++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],p,y,x,_))return!1;p++,"MultiPoint"===b&&x++}"LineString"===b&&x++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(!1===e(l[r][i],p,y,x,_))return!1;p++}"MultiLineString"===b&&x++,"Polygon"===b&&_++}"Polygon"===b&&x++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(_=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-h;o++){if(!1===e(l[r][i][o],p,y,x,_))return!1;p++}_++}x++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===bG(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function wG(t){var e=[1/0,1/0,-1/0,-1/0];return bG(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}wG.default=wG;n(4042);n(5107);n(6530);function SG(t,e,n){if(null!==t)for(var r,i,o,a,s,l,c,u,h=0,p=0,d=t.type,f="FeatureCollection"===d,g="Feature"===d,m=f?t.features.length:1,y=0;y<m;y++){s=(u=!!(c=f?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<s;v++){var x=0,_=0;if(null!==(a=u?c.geometries[v]:c)){l=a.coordinates;var b=a.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,x,_))return!1;p++,x++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],p,y,x,_))return!1;p++,"MultiPoint"===b&&x++}"LineString"===b&&x++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(!1===e(l[r][i],p,y,x,_))return!1;p++}"MultiLineString"===b&&x++,"Polygon"===b&&_++}"Polygon"===b&&x++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(_=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-h;o++){if(!1===e(l[r][i][o],p,y,x,_))return!1;p++}_++}x++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===SG(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function CG(t){var e=[1/0,1/0,-1/0,-1/0];return SG(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}CG.default=CG;function EG(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}var kG={search:function(t,e,n,r){t.cleanDirty();var i=(r=r||{}).heuristic||kG.heuristics.manhattan,o=r.closest||!1,a=new IG((function(t){return t.f})),s=e;for(e.h=i(e,n),a.push(e);a.size()>0;){var l=a.pop();if(l===n)return EG(l);l.closed=!0;for(var c=t.neighbors(l),u=0,h=c.length;u<h;++u){var p=c[u];if(!p.closed&&!p.isWall()){var d=l.g+p.getCost(l),f=p.visited;(!f||d<p.g)&&(p.visited=!0,p.parent=l,p.h=p.h||i(p,n),p.g=d,p.f=p.g+p.h,t.markDirty(p),o&&(p.h<s.h||p.h===s.h&&p.g<s.g)&&(s=p),f?a.rescoreElement(p):a.push(p))}}}return o?EG(s):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function MG(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new TG(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function TG(t,e,n){this.x=t,this.y=e,this.weight=n}function IG(t){this.content=[],this.scoreFunction=t}MG.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)kG.cleanNode(this.nodes[t])},MG.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)kG.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},MG.prototype.markDirty=function(t){this.dirtyNodes.push(t)},MG.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},MG.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,a=0,s=o.length;a<s;a++){for(t=[],n=0,r=(e=o[a]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},TG.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},TG.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},TG.prototype.isWall=function(){return 0===this.weight},IG.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,a=o-1,s=null;if(a<e){var l=this.content[a];(i=this.scoreFunction(l))<r&&(s=a)}if(o<e){var c=this.content[o];this.scoreFunction(c)<(null===s?r:i)&&(s=o)}if(null===s)break;this.content[t]=this.content[s],this.content[s]=n,t=s}}};function PG(){this._=null}function OG(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function AG(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function DG(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function RG(t){for(;t.L;)t=t.L;return t}PG.prototype={constructor:PG,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=RG(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(AG(this,n),n=(t=n).U),n.C=!1,r.C=!0,DG(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(DG(this,n),n=(t=n).U),n.C=!1,r.C=!0,AG(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?RG(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,AG(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,DG(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,AG(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,DG(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,AG(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,DG(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var LG=PG;function NG(t,e,n,r){var i=[null,null],o=aW.push(i)-1;return i.left=t,i.right=e,n&&zG(i,t,e,n),r&&zG(i,e,t,r),iW[t.index].halfedges.push(o),iW[e.index].halfedges.push(o),i}function FG(t,e,n){var r=[e,n];return r.left=t,r}function zG(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function BG(t,e,n,r,i){var o,a=t[0],s=t[1],l=a[0],c=a[1],u=0,h=1,p=s[0]-l,d=s[1]-c;if(o=e-l,p||!(o>0)){if(o/=p,p<0){if(o<u)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>u&&(u=o)}if(o=r-l,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>u&&(u=o)}else if(p>0){if(o<u)return;o<h&&(h=o)}if(o=n-c,d||!(o>0)){if(o/=d,d<0){if(o<u)return;o<h&&(h=o)}else if(d>0){if(o>h)return;o>u&&(u=o)}if(o=i-c,d||!(o<0)){if(o/=d,d<0){if(o>h)return;o>u&&(u=o)}else if(d>0){if(o<u)return;o<h&&(h=o)}return!(u>0||h<1)||(u>0&&(t[0]=[l+u*p,c+u*d]),h<1&&(t[1]=[l+h*p,c+h*d]),!0)}}}}}function $G(t,e,n,r,i){var o=t[1];if(o)return!0;var a,s,l=t[0],c=t.left,u=t.right,h=c[0],p=c[1],d=u[0],f=u[1],g=(h+d)/2,m=(p+f)/2;if(f===p){if(g<e||g>=r)return;if(h>d){if(l){if(l[1]>=i)return}else l=[g,n];o=[g,i]}else{if(l){if(l[1]<n)return}else l=[g,i];o=[g,n]}}else if(s=m-(a=(h-d)/(f-p))*g,a<-1||a>1)if(h>d){if(l){if(l[1]>=i)return}else l=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(l){if(l[1]<n)return}else l=[(i-s)/a,i];o=[(n-s)/a,n]}else if(p<f){if(l){if(l[0]>=r)return}else l=[e,a*e+s];o=[r,a*r+s]}else{if(l){if(l[0]<e)return}else l=[r,a*r+s];o=[e,a*e+s]}return t[0]=l,t[1]=o,!0}function jG(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function UG(t,e){return e[+(e.left!==t.site)]}function VG(t,e){return e[+(e.left===t.site)]}var HG,GG=[];function WG(){OG(this),this.x=this.y=this.arc=this.site=this.cy=null}function XG(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i[0],s=i[1],l=r[0]-a,c=r[1]-s,u=o[0]-a,h=o[1]-s,p=2*(l*h-c*u);if(!(p>=-lW)){var d=l*l+c*c,f=u*u+h*h,g=(h*d-c*f)/p,m=(l*f-u*d)/p,y=GG.pop()||new WG;y.arc=t,y.site=i,y.x=g+a,y.y=(y.cy=m+s)+Math.sqrt(g*g+m*m),t.circle=y;for(var v=null,x=oW._;x;)if(y.y<x.y||y.y===x.y&&y.x<=x.x){if(!x.L){v=x.P;break}x=x.L}else{if(!x.R){v=x;break}x=x.R}oW.insert(v,y),v||(HG=y)}}}}function qG(t){var e=t.circle;e&&(e.P||(HG=e.N),oW.remove(e),GG.push(e),OG(e),t.circle=null)}var YG=[];function ZG(){OG(this),this.edge=this.site=this.circle=null}function KG(t){var e=YG.pop()||new ZG;return e.site=t,e}function JG(t){qG(t),rW.remove(t),YG.push(t),OG(t)}function QG(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,s=[t];JG(t);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<sW&&Math.abs(r-l.circle.cy)<sW;)o=l.P,s.unshift(l),JG(l),l=o;s.unshift(l),qG(l);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<sW&&Math.abs(r-c.circle.cy)<sW;)a=c.N,s.push(c),JG(c),c=a;s.push(c),qG(c);var u,h=s.length;for(u=1;u<h;++u)c=s[u],l=s[u-1],zG(c.edge,l.site,c.site,i);l=s[0],(c=s[h-1]).edge=NG(l.site,c.site,null,i),XG(l),XG(c)}function tW(t){for(var e,n,r,i,o=t[0],a=t[1],s=rW._;s;)if((r=eW(s,a)-o)>sW)s=s.L;else{if(!((i=o-nW(s,a))>sW)){r>-sW?(e=s.P,n=s):i>-sW?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){iW[t.index]={site:t,halfedges:[]}}(t);var l=KG(t);if(rW.insert(e,l),e||n){if(e===n)return qG(e),n=KG(e.site),rW.insert(l,n),l.edge=n.edge=NG(e.site,l.site),XG(e),void XG(n);if(n){qG(e),qG(n);var c=e.site,u=c[0],h=c[1],p=t[0]-u,d=t[1]-h,f=n.site,g=f[0]-u,m=f[1]-h,y=2*(p*m-d*g),v=p*p+d*d,x=g*g+m*m,_=[(m*v-d*x)/y+u,(p*x-g*v)/y+h];zG(n.edge,c,f,_),l.edge=NG(c,t,null,_),n.edge=NG(t,f,null,_),XG(e),XG(n)}else l.edge=NG(e.site,l.site)}}function eW(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(n=a.site)[0],l=n[1],c=l-e;if(!c)return s;var u=s-r,h=1/o-1/c,p=u/c;return h?(-p+Math.sqrt(p*p-2*h*(u*u/(-2*c)-l+c/2+i-o/2)))/h+r:(r+s)/2}function nW(t,e){var n=t.N;if(n)return eW(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var rW,iW,oW,aW,sW=1e-6,lW=1e-12;function cW(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function uW(t,e){return e[1]-t[1]||e[0]-t[0]}function hW(t,e){var n,r,i,o=t.sort(uW).pop();for(aW=[],iW=new Array(t.length),rW=new LG,oW=new LG;;)if(i=HG,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(tW(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;QG(i.arc)}if(function(){for(var t,e,n,r,i=0,o=iW.length;i<o;++i)if((t=iW[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=jG(t,aW[e[n]]);for(a.sort((function(t,e){return s[e]-s[t]})),n=0;n<r;++n)s[n]=e[a[n]];for(n=0;n<r;++n)e[n]=s[n]}}(),e){var a=+e[0][0],s=+e[0][1],l=+e[1][0],c=+e[1][1];!function(t,e,n,r){for(var i,o=aW.length;o--;)$G(i=aW[o],t,e,n,r)&&BG(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>sW||Math.abs(i[0][1]-i[1][1])>sW)||delete aW[o]}(a,s,l,c),function(t,e,n,r){var i,o,a,s,l,c,u,h,p,d,f,g,m=iW.length,y=!0;for(i=0;i<m;++i)if(o=iW[i]){for(a=o.site,s=(l=o.halfedges).length;s--;)aW[l[s]]||l.splice(s,1);for(s=0,c=l.length;s<c;)f=(d=VG(o,aW[l[s]]))[0],g=d[1],h=(u=UG(o,aW[l[++s%c]]))[0],p=u[1],(Math.abs(f-h)>sW||Math.abs(g-p)>sW)&&(l.splice(s,0,aW.push(FG(a,d,Math.abs(f-t)<sW&&r-g>sW?[t,Math.abs(h-t)<sW?p:r]:Math.abs(g-r)<sW&&n-f>sW?[Math.abs(p-r)<sW?h:n,r]:Math.abs(f-n)<sW&&g-e>sW?[n,Math.abs(h-n)<sW?p:e]:Math.abs(g-e)<sW&&f-t>sW?[Math.abs(p-e)<sW?h:t,e]:null))-1),++c);c&&(y=!1)}if(y){var v,x,_,b=1/0;for(i=0,y=null;i<m;++i)(o=iW[i])&&(_=(v=(a=o.site)[0]-t)*v+(x=a[1]-e)*x)<b&&(b=_,y=o);if(y){var w=[t,e],S=[t,r],C=[n,r],E=[n,e];y.halfedges.push(aW.push(FG(a=y.site,w,S))-1,aW.push(FG(a,S,C))-1,aW.push(FG(a,C,E))-1,aW.push(FG(a,E,w))-1)}}for(i=0;i<m;++i)(o=iW[i])&&(o.halfedges.length||delete iW[i])}(a,s,l,c)}this.edges=aW,this.cells=iW,rW=oW=aW=iW=null}hW.prototype={constructor:hW,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return UG(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,s=n.site,l=-1,c=e[i[o-1]],u=c.left===s?c.right:c.left;++l<o;)a=u,u=(c=e[i[l]]).left===s?c.right:c.left,a&&u&&r<a.index&&r<u.index&&cW(s,a,u)<0&&t.push([s.data,a.data,u.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,o=this,a=o._found||0,s=o.cells.length;!(i=o.cells[a]);)if(++a>=s)return null;var l=t-i.site[0],c=e-i.site[1],u=l*l+c*c;do{i=o.cells[r=a],a=null,i.halfedges.forEach((function(n){var r=o.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var l=t-s[0],c=e-s[1],h=l*l+c*c;h<u&&(u=h,a=s.index)}}))}while(null!==a);return o._found=r,null==n||u<=n*n?i.site:null}};n(9056);n(4035);function pW(){return new dW}function dW(){this.reset()}dW.prototype={constructor:dW,reset:function(){this.s=this.t=0},add:function(t){gW(fW,t,this.t),gW(this,fW.s,this.s),this.s?this.t+=fW.t:this.s=fW.t},valueOf:function(){return this.s}};var fW=new dW;function gW(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var mW=1e-6,yW=Math.PI,vW=yW/2,xW=yW/4,_W=2*yW,bW=yW/180,wW=Math.abs,SW=Math.atan,CW=Math.atan2,EW=Math.cos,kW=(Math.ceil,Math.exp),MW=(Math.floor,Math.log),TW=(Math.pow,Math.sin),IW=(Math.sign,Math.sqrt),PW=Math.tan;function OW(t){return t>1?vW:t<-1?-vW:Math.asin(t)}function AW(){}pW(),pW();function DW(t){var e=t[0],n=t[1],r=EW(n);return[r*EW(e),r*TW(e),TW(n)]}function RW(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function LW(t){var e=IW(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}pW();function NW(t,e){return[t>yW?t-_W:t<-yW?t+_W:t,e]}function FW(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function zW(t,e,n,r,i){var o,a,s=[],l=[];if(t.forEach((function(t){if(!(t.length-1<=0)){var e,n,r=t[0],a=t[e];if(function(t,e){return wW(t[0]-e[0])<mW&&wW(t[1]-e[1])<mW}(r,a)){for(i.lineStart(),0;o<e;++o)i.point(t[o][0],r[1]);i.lineEnd()}else s.push(new FW(r,t,null,!0)),l.push(n.o=new FW(r,null,n,!1)),s.push(new FW(a,t,null,!1)),l.push(n.o=new FW(a,null,n,!0))}})),s.length){for(l.sort(e),BW(s),BW(l),0,l.length;o<a;++o)l[o].e=!n;for(var c,u,h=s[0];;){for(var p=h,d=!0;p.v;)if(p.n===h)return;p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(0,c.length;o<a;++o)i.point(c[o][0],u[1]);else r(p.x,p.n.x,1,i);p.n}else{if(d)for(p.p.z,c.length-1;o>=0;--o)i.point(c[o][0],u[1]);else r(p.x,p.p.x,-1,i);p.p}p.o.z,!d}while(!p.v);i.lineEnd()}}}function BW(t){if(t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=t[r],n.p=i,n;i.n=t[0],n.p=i}}function $W(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}NW.invert=NW;var jW=function(t){return 1===t.length&&(t=function(t){return function(e,n){return $W(t(e),n)}}(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}($W),UW=(jW.right,jW.left,Array.prototype);UW.slice,UW.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var VW=pW();function HW(t,e){var n=e[0],r=e[1],i=[TW(n),-EW(n),0],o=0,a=0;VW.reset();for(var s=0,l=t.length;s<l;++s)if(t[s].length)for(var c,u,h=c[u-1],p=h[0],d=h[1]/2+xW,f=TW(d),g=EW(d),m=0;m<u;v,_,b,y){var y=c[m],v=y[0],x=y[1]/2+xW,_=TW(x),b=EW(x),w=v-p,S=w>=0?1:-1,C=S*w,E=C>yW,k=f*_;if(VW.add(CW(k*S*TW(C),g*b+k*EW(C))),E?w+S*_W:w,E^p>=n^v>=n){var M=RW(DW(h),DW(y));LW(M);var T=RW(i,M);LW(T);var I=(E^w>=0?-1:1)*OW(T[2]);(r>I||r===I&&(M[0]||M[1]))&&(E^w>=0?1:-1)}}return(o<-mW||o<mW&&VW<-mW)^1&a}pW();pW(),pW();pW();function GW(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function WW(t){return t.length>1}function XW(t,e){return(t.x[0]<0?t[1]-vW-mW:vW-t[1])-(e.x[0]<0?e[1]-vW-mW:vW-e[1])}GW(4.5);function qW(t){return function(e){var n=new YW;for(var r in t)n[r]=t[r];return n.stream=e,n}}function YW(){}YW.prototype={constructor:YW,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};EW(30*bW);qW({point:function(t,e){this.stream.point(t*bW,e*bW)}});function ZW(t){return function(e,n){var r=EW(e),i=EW(n),o=t(r*i);return[o*i*TW(e),o*TW(n)]}}function KW(t){return function(e,n){var r=IW(e*e+n*n),i=t(r),o=TW(i),a=EW(i);return[CW(e*o,r*a),OW(r&&n*o/r)]}}var JW=ZW((function(t){return IW(2/(1+t))}));JW.invert=KW((function(t){return 2*OW(t/2)}));var QW=ZW((function(t){return(t=function(t){return t>1?0:t<-1?yW:Math.acos(t)}(t))&&t/TW(t)}));function tX(t,e){return[t,MW(PW((vW+e)/2))]}function eX(t,e){return[t,e]}function nX(t,e){var n=EW(e),r=EW(t)*n;return[n*TW(t)/r,TW(e)/r]}function rX(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function iX(t,e){return[EW(e)*TW(t),TW(e)]}function oX(t,e){var n=EW(e),r=1+EW(t)*n;return[n*TW(t)/r,TW(e)/r]}function aX(t,e){return[MW(PW((vW+e)/2)),-t]}QW.invert=KW((function(t){return t})),tX.invert=function(t,e){return[t,2*SW(kW(e))-vW]},eX.invert=eX,nX.invert=KW(SW),rX.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(wW(n)>mW&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},iX.invert=KW(OW),oX.invert=KW((function(t){return 2*SW(t)})),aX.invert=function(t,e){return[-e,2*SW(kW(t))-vW]};function sX(t,e,n){if(null!==t)for(var r,i,o,a,s,l,c,u,h=0,p=0,d=t.type,f="FeatureCollection"===d,g="Feature"===d,m=f?t.features.length:1,y=0;y<m;y++){s=(u=!!(c=f?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<s;v++){var x=0,_=0;if(null!==(a=u?c.geometries[v]:c)){l=a.coordinates;var b=a.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,y,x,_))return!1;p++,x++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],p,y,x,_))return!1;p++,"MultiPoint"===b&&x++}"LineString"===b&&x++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(!1===e(l[r][i],p,y,x,_))return!1;p++}"MultiLineString"===b&&x++,"Polygon"===b&&_++}"Polygon"===b&&x++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(_=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-h;o++){if(!1===e(l[r][i][o],p,y,x,_))return!1;p++}_++}x++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===sX(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function lX(t){var e=[1/0,1/0,-1/0,-1/0];return sX(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}lX.default=lX;const{Option:cX}=Ik;var uX=t=>{let{setDist:e,getDist:n}=t;const[r,i]=(0,m.useState)(1),[o,a]=(0,m.useState)("Miles");(0,m.useEffect)((()=>{i(n/1609.34),a("Miles")}),[n]);const s=(0,lr.jsxs)(Ik,{className:"blue-select",defaultValue:"Miles",onChange:t=>{let e;"Miles"===o?"KiloMeters"===t?e=1.60934*r:"Meters"===t&&(e=1609.34*r):"KiloMeters"===o?"Miles"===t?e=r/1.60934:"Meters"===t&&(e=1e3*r):"Meters"===o&&("Miles"===t?e=r/1609.34:"KiloMeters"===t&&(e=r/1e3)),i(e||1),a(t)},children:[(0,lr.jsx)(cX,{value:"Miles",children:"Miles"}),(0,lr.jsx)(cX,{value:"KiloMeters",children:"KiloMeters"}),(0,lr.jsx)(cX,{value:"Meters",children:"Meters"})]});return(0,lr.jsx)(pO,{direction:"vertical",children:(0,lr.jsxs)(pO,{wrap:!0,children:[(0,lr.jsx)(zb,{min:1,value:r.toFixed(2),onChange:t=>{i(t||1)},addonAfter:s}),(0,lr.jsx)(id,{type:"primary",onClick:()=>{let t=r;"Meters"!==o&&("Miles"===o?t=1609.34*r:"KiloMeters"===o&&(t=1e3*r)),console.log("Converted distance:",t,"Meters"),e(t)},children:"Set distance"})]})})};n(763);gB().accessToken="pk.eyJ1IjoiYWhtYWQtYXNsYW0iLCJhIjoiY2xpaW5iYXI1MXJlNzNmcWY4Y3pxenlsYyJ9.Ua15JiMsRNy3GOcz9cn4dw";var hX=t=>{let{route:e,totalDistance:n,onMarkersPlaced:r}=t;const i=(0,m.useRef)(null),o=(0,m.useRef)(null),a=(0,m.useRef)(null),s=(0,m.useRef)(null),l=(0,m.useRef)([]),c=(0,m.useRef)([]),u=(0,m.useRef)([]),[h,p]=(0,m.useState)(n),[d,f]=(0,m.useState)(),[g,y]=(0,m.useState)(),v=((0,m.useRef)(null),(0,m.useRef)(null),()=>{l.current.forEach((t=>{if(t.marker.remove(),o.current)try{o.current.getLayer(t.layerId)&&o.current.removeLayer(t.layerId),o.current.getSource(t.sourceId)&&o.current.removeSource(t.sourceId)}catch{console.log("Layer err")}})),l.current=[]}),x=(t,e,n)=>"max"===e?t.reduce(((t,e)=>e[n]>t?e[n]:t),-1/0):t.reduce(((t,e)=>e[n]<t?e[n]:t),1/0),_=()=>{const t=[{id:"tenerife-1",latitude:a.current._lngLat.lat,longitude:a.current._lngLat.lng},{id:"tenerife-2",latitude:s.current._lngLat.lat,longitude:s.current._lngLat.lng}];y((t=>{const e=x(t,"max","latitude"),n=x(t,"min","latitude"),r=x(t,"max","longitude");return[[x(t,"min","longitude"),n],[r,e]]})(t))};(0,m.useEffect)((()=>{o.current&&g&&o.current.fitBounds(g,{padding:50,maxZoom:15})}),[g]),(0,m.useEffect)((()=>{o.current=new(gB().Map)({container:i.current,style:"mapbox://styles/mapbox/outdoors-v12",center:[-122.11,37.99],zoom:10});const t=document.createElement("div");t.className="marker-label",t.innerHTML="Start";const e=document.createElement("div");return e.className="marker-label",e.innerHTML="End",o.current.on("click",(function(n){a.current?s.current||(s.current=new(gB().Marker)({color:"green"}).setLngLat([n.lngLat.lng,n.lngLat.lat]).addTo(o.current),s.current.getElement().appendChild(e),r({originNode:a.current.getLngLat().toArray(),destinationNode:s.current.getLngLat().toArray()}),_()):(a.current=new(gB().Marker)({color:"blue"}).setLngLat([n.lngLat.lng,n.lngLat.lat]).addTo(o.current),a.current.getElement().appendChild(t))})),b(),o.current.addControl(new(gB().NavigationControl),"top-right"),()=>{o.current.remove(),v()}}),[]),(0,m.useEffect)((()=>{let t,e;try{t=JSON.parse(localStorage.getItem("marker1"))}catch(l){console.error("Error parsing marker1 from localStorage:",l)}try{e=JSON.parse(localStorage.getItem("marker2"))}catch(l){console.error("Error parsing marker2 from localStorage:",l)}const n=document.createElement("div");n.className="marker-label",n.innerHTML="Start";const i=document.createElement("div");i.className="marker-label",i.innerHTML="End",t&&(a.current=new(gB().Marker)({color:"blue"}).setLngLat(t).addTo(o.current),a.current.getElement().appendChild(n)),e&&(s.current=new(gB().Marker)({color:"green"}).setLngLat(e).addTo(o.current),s.current.getElement().appendChild(i)),(t||e)&&(localStorage.removeItem("marker1"),localStorage.removeItem("marker2"),r({originNode:a.current?a.current.getLngLat().toArray():null,destinationNode:s.current?s.current.getLngLat().toArray():null}),_())}),[]),(0,m.useEffect)((()=>{if(o.current&&e&&o.current.getLayer("route")&&(o.current.removeLayer("route"),o.current.removeSource("route")),e&&e.osrmRoute&&e.osrmRoute.routes[0]&&e.osrmRoute.routes[0].geometry&&(o.current.getSource("route")&&o.current.removeSource("route"),o.current.addSource("route",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:e.osrmRoute.routes[0].geometry.coordinates}}}),o.current.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#888","line-width":8}})),v(),e&&e.intermediateNodes&&e.intermediateNodes.forEach((t=>{const e=`${t.lat}-${t.long}-layer`,n=`${t.lat}-${t.long}-source`,r=new(gB().Marker)({color:"red"}).setLngLat([t.long,t.lat]).addTo(o.current);if(l.current.push({layerId:e,sourceId:n,marker:r}),t.isWaypoint){o.current.getSource(n)&&(o.current.removeLayer(e),o.current.removeSource(n));const r=qV([t.long,t.lat],t.distance,{units:"meters"});o.current.addSource(n,{type:"geojson",data:r}),o.current.addLayer({id:e,type:"fill",source:n,paint:{"fill-color":"#6E70FF","fill-opacity":.3}})}})),e&&e.GISWaypoints){const t=e.GISWaypoints.flatMap((t=>[t.waypointStart,t.waypointEnd])),n=new Map;t.forEach((t=>{const e=JSON.stringify(t),r=n.get(e)||0;n.set(e,r+1)}));const r=new Set,i=[];t.forEach((t=>{const e=JSON.stringify(t);r.has(e)||(r.add(e),i.push(t))})),c.current=i,i.forEach((t=>{const e=document.createElement("div");e.style.width="0",e.style.height="0",e.style.borderLeft="10px solid transparent",e.style.borderRight="10px solid transparent",e.style.borderBottom="20px solid blue";const n=new(gB().Marker)(e).setLngLat(t).addTo(o.current);u.current.push(n)}))}p(n)}),[e]);const b=async()=>{try{const t=await Pn.get("/api/v1/nodes/waypointdistance",{headers:{Cookies:jt.get("admin_cookie")}});200===t.status&&f(t.data.waypointDistance)}catch(t){console.error(t)}};return(0,lr.jsxs)("div",{style:{position:"relative"},children:[(0,lr.jsx)("button",{style:{position:"absolute",zIndex:1,backgroundColor:a.current||s.current?"red":"white",color:a.current||s.current?"white":"black",pointerEvents:a.current||s.current?"auto":"none",top:"10px",left:"10px",height:"30px"},onClick:()=>{(a.current||s.current)&&(a.current&&a.current.remove(),s.current&&s.current.remove(),a.current=null,s.current=null,o.current&&(o.current.getLayer("route")&&o.current.removeLayer("route"),o.current.getSource("route")&&o.current.removeSource("route")),v(),u.current.forEach((t=>{t.remove()})),u.current=[],c.current=[],p("NA"))},children:"Refresh"}),(0,lr.jsx)("div",{style:{position:"absolute",zIndex:1,top:"10px",left:"80px"},children:(0,lr.jsx)(uX,{setDist:async t=>{try{200===(await Pn.post("/api/v1/nodes/waypointdistance",{waypointDistance:t},{headers:{Cookies:jt.get("admin_cookie")}})).status&&(a.current&&s.current&&(localStorage.setItem("marker1",JSON.stringify(a.current.getLngLat().toArray())),localStorage.setItem("marker2",JSON.stringify(s.current.getLngLat().toArray()))),window.location.reload())}catch(e){console.error(e)}},getDist:d})}),(0,lr.jsx)("div",{style:{position:"absolute",zIndex:1,top:"10px",left:"470px"}}),(0,lr.jsxs)("div",{className:"counts-display",children:["Total Distance: ",h+" miles",(0,lr.jsx)("br",{})]}),(0,lr.jsx)("div",{ref:i,style:{height:"100vh"}})]})};var pX,dX,fX,gX=function(){const t=ht(),[e,n]=(0,m.useState)(),[r,i]=(0,m.useState)("NA"),[o,a]=(0,m.useState)(!1);return(0,m.useEffect)((()=>{const e=()=>{t("/summary")};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}}),[t]),(0,m.useEffect)((()=>{(async()=>{try{const e=await Pn.get("/api/v1/admin/check-login",{headers:{Cookies:jt.get("admin_cookie")}});if(200===e.status){const{alreadyLoggedIn:n}=e.data;n||t("/")}}catch(e){console.error(e)}})()}),[]),(0,lr.jsxs)("div",{className:"map-container-wrapper",children:[(0,lr.jsx)(hX,{route:e,totalDistance:r,onMarkersPlaced:async t=>{try{a(!0),console.log(o);const e=t.originNode[0]+","+t.originNode[1],r=t.destinationNode[0]+","+t.destinationNode[1],s=await Pn.get("/api/v1/nodes/display/two-point",{headers:{Cookies:jt.get("admin_cookie")},params:{originNode:e,destinationNode:r}});200===s.status&&(n(s.data),i((62137e-8*s.data.osrmRoute.routes[0].distance).toFixed(1)),a(!1),console.log(o))}catch(e){a(!1),console.error(e)}}}),(0,lr.jsx)("div",{className:"loader-overlay",children:(0,lr.jsx)(wV,{visible:o,height:"150",width:"150",ariaLabel:"MagnifyingGlass-loading",wrapperStyle:{},wrapperClass:"MagnifyingGlass-wrapper",glassColor:"#c0efff",color:"#e15b64"})})]})},mX=n(9388),yX=n(3415);!function(t){t.FORE="fore",t.MID="mid",t.BG="bg"}(pX||(pX={})),function(t){t.TOP="top",t.TOP_LEFT="top-left",t.TOP_RIGHT="top-right",t.RIGHT="right",t.RIGHT_TOP="right-top",t.RIGHT_BOTTOM="right-bottom",t.LEFT="left",t.LEFT_TOP="left-top",t.LEFT_BOTTOM="left-bottom",t.BOTTOM="bottom",t.BOTTOM_LEFT="bottom-left",t.BOTTOM_RIGHT="bottom-right",t.RADIUS="radius",t.CIRCLE="circle",t.NONE="none"}(dX||(dX={})),function(t){t.AXIS="axis",t.GRID="grid",t.LEGEND="legend",t.TOOLTIP="tooltip",t.ANNOTATION="annotation",t.SLIDER="slider",t.SCROLLBAR="scrollbar",t.OTHER="other"}(fX||(fX={}));var vX,xX,_X,bX,wX=3,SX=2,CX=1;!function(t){t.BEFORE_RENDER="beforerender",t.AFTER_RENDER="afterrender",t.BEFORE_PAINT="beforepaint",t.AFTER_PAINT="afterpaint",t.BEFORE_CHANGE_DATA="beforechangedata",t.AFTER_CHANGE_DATA="afterchangedata",t.BEFORE_CLEAR="beforeclear",t.AFTER_CLEAR="afterclear",t.BEFORE_DESTROY="beforedestroy",t.BEFORE_CHANGE_SIZE="beforechangesize",t.AFTER_CHANGE_SIZE="afterchangesize"}(vX||(vX={})),function(t){t.BEFORE_DRAW_ANIMATE="beforeanimate",t.AFTER_DRAW_ANIMATE="afteranimate",t.BEFORE_RENDER_LABEL="beforerenderlabel",t.AFTER_RENDER_LABEL="afterrenderlabel"}(xX||(xX={})),function(t){t.MOUSE_ENTER="plot:mouseenter",t.MOUSE_DOWN="plot:mousedown",t.MOUSE_MOVE="plot:mousemove",t.MOUSE_UP="plot:mouseup",t.MOUSE_LEAVE="plot:mouseleave",t.TOUCH_START="plot:touchstart",t.TOUCH_MOVE="plot:touchmove",t.TOUCH_END="plot:touchend",t.TOUCH_CANCEL="plot:touchcancel",t.CLICK="plot:click",t.DBLCLICK="plot:dblclick",t.CONTEXTMENU="plot:contextmenu",t.LEAVE="plot:leave",t.ENTER="plot:enter"}(_X||(_X={})),function(t){t.ACTIVE="active",t.INACTIVE="inactive",t.SELECTED="selected",t.DEFAULT="default"}(bX||(bX={}));var EX,kX,MX,TX,IX=["color","shape","size"],PX="_origin",OX={};function AX(t,e){OX[t]=e}function DX(t){EX||(EX=document.createElement("table"),kX=document.createElement("tr"),MX=/^\s*<(\w+|!)[^>]*>/,TX={tr:document.createElement("tbody"),tbody:EX,thead:EX,tfoot:EX,td:kX,th:kX,"*":document.createElement("div")});var e=MX.test(t)&&RegExp.$1;e&&e in TX||(e="*");var n=TX[e];t="string"===typeof t?t.replace(/(^\s*)|(\s*$)/g,""):t,n.innerHTML=""+t;var r=n.childNodes[0];return r&&n.contains(r)&&n.removeChild(r),r}function RX(t,e){if(t)for(var n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n]);return t}function LX(t){return"number"===typeof t&&!isNaN(t)}function NX(t,e,n,r){var i=n,o=r;if(e){var a=function(t){var e=getComputedStyle(t);return{width:(t.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10),height:(t.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)}}(t);i=a.width?a.width:i,o=a.height?a.height:o}return{width:Math.max(LX(i)?i:1,1),height:Math.max(LX(o)?o:1,1)}}var FX=n(2469),zX=function(t){function e(e){var n=t.call(this)||this;n.destroyed=!1;var r=e.visible,i=void 0===r||r;return n.visible=i,n}return(0,mX.ZT)(e,t),e.prototype.show=function(){this.visible||this.changeVisible(!0)},e.prototype.hide=function(){this.visible&&this.changeVisible(!1)},e.prototype.destroy=function(){this.off(),this.destroyed=!0},e.prototype.changeVisible=function(t){this.visible!==t&&(this.visible=t)},e}(FX.Z),BX=zX,$X=n(4494),jX=function(){function t(t){var e=t.xField,n=t.yField,r=t.adjustNames,i=void 0===r?["x","y"]:r,o=t.dimValuesMap;this.adjustNames=i,this.xField=e,this.yField=n,this.dimValuesMap=o}return t.prototype.isAdjust=function(t){return this.adjustNames.indexOf(t)>=0},t.prototype.getAdjustRange=function(t,e,n){var r,i,o=this.yField,a=n.indexOf(e),s=n.length;return!o&&this.isAdjust("y")?(r=0,i=1):s>1?(r=n[0===a?0:a-1],i=n[a===s-1?s-1:a+1],0!==a?r+=(e-r)/2:r-=(i-e)/2,a!==s-1?i-=(i-e)/2:i+=(e-n[s-2])/2):(r=0===e?0:e-.5,i=0===e?1:e+.5),{pre:r,next:i}},t.prototype.adjustData=function(t,e){var n=this,r=this.getDimValues(e);yX.S6(t,(function(t,e){yX.S6(r,(function(r,i){n.adjustDim(i,r,t,e)}))}))},t.prototype.groupData=function(t,e){return yX.S6(t,(function(t){void 0===t[e]&&(t[e]=0)})),yX.vM(t,e)},t.prototype.adjustDim=function(t,e,n,r){},t.prototype.getDimValues=function(t){var e=this.xField,n=this.yField,r=yX.f0({},this.dimValuesMap),i=[];if(e&&this.isAdjust("x")&&i.push(e),n&&this.isAdjust("y")&&i.push(n),i.forEach((function(e){r&&r[e]||(r[e]=yX.I(t,e).sort((function(t,e){return t-e})))})),!n&&this.isAdjust("y")){r.y=[0,1]}return r},t}(),UX=jX,VX={},HX=function(t){return VX[t.toLowerCase()]},GX=function(t,e){if(HX(t))throw new Error("Adjust type '"+t+"' existed.");VX[t.toLowerCase()]=e},WX=function(t,e){return WX=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},WX(t,e)};function XX(t,e){function n(){this.constructor=t}WX(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var qX=function(){return qX=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},qX.apply(this,arguments)};var YX=function(t){function e(e){var n=t.call(this,e)||this;n.cacheMap={},n.adjustDataArray=[],n.mergeData=[];var r=e.marginRatio,i=void 0===r?.5:r,o=e.dodgeRatio,a=void 0===o?.5:o,s=e.dodgeBy,l=e.intervalPadding,c=e.dodgePadding,u=e.xDimensionLength,h=e.groupNum,p=e.defaultSize,d=e.maxColumnWidth,f=e.minColumnWidth,g=e.columnWidthRatio,m=e.customOffset;return n.marginRatio=i,n.dodgeRatio=a,n.dodgeBy=s,n.intervalPadding=l,n.dodgePadding=c,n.xDimensionLegenth=u,n.groupNum=h,n.defaultSize=p,n.maxColumnWidth=d,n.minColumnWidth=f,n.columnWidthRatio=g,n.customOffset=m,n}return XX(e,t),e.prototype.process=function(t){var e=yX.d9(t),n=yX.xH(e),r=this.dodgeBy,i=r?yX.ru(n,r):e;return this.cacheMap={},this.adjustDataArray=i,this.mergeData=n,this.adjustData(i,n),this.adjustDataArray=[],this.mergeData=[],e},e.prototype.adjustDim=function(t,e,n,r){var i=this,o=this.customOffset,a=this.getDistribution(t),s=this.groupData(n,t);return yX.S6(s,(function(n,s){var l;l=1===e.length?{pre:e[0]-1,next:e[0]+1}:i.getAdjustRange(t,parseFloat(s),e),yX.S6(n,(function(e){var n=e[t],s=a[n],c=s.indexOf(r);if(yX.UM(o))e[t]=i.getDodgeOffset(l,c,s.length);else{var u=l.pre,h=l.next;e[t]=yX.mf(o)?o(e,l):(u+h)/2+o}}))})),[]},e.prototype.getDodgeOffset=function(t,e,n){var r,i=this,o=i.dodgeRatio,a=i.marginRatio,s=i.intervalPadding,l=i.dodgePadding,c=t.pre,u=t.next,h=u-c;if(!yX.UM(s)&&yX.UM(l)&&s>=0)r=c+this.getIntervalOnlyOffset(n,e);else if(!yX.UM(l)&&yX.UM(s)&&l>=0){r=c+this.getDodgeOnlyOffset(n,e)}else if(!yX.UM(s)&&!yX.UM(l)&&s>=0&&l>=0){r=c+this.getIntervalAndDodgeOffset(n,e)}else{var p=h*o/n,d=a*p;r=(c+u)/2+(.5*(h-n*p-(n-1)*d)+((e+1)*p+e*d)-.5*p-.5*h)}return r},e.prototype.getIntervalOnlyOffset=function(t,e){var n=this,r=n.defaultSize,i=n.intervalPadding,o=n.xDimensionLegenth,a=n.groupNum,s=n.dodgeRatio,l=n.maxColumnWidth,c=n.minColumnWidth,u=n.columnWidthRatio,h=i/o,p=(1-(a-1)*h)/a*s/(t-1),d=((1-h*(a-1))/a-p*(t-1))/t;if(d=yX.UM(u)?d:1/a/t*u,!yX.UM(l)){var f=l/o;d=Math.min(d,f)}if(!yX.UM(c)){var g=c/o;d=Math.max(d,g)}return((.5+e)*(d=r?r/o:d)+e*(p=((1-(a-1)*h)/a-t*d)/(t-1))+.5*h)*a-h/2},e.prototype.getDodgeOnlyOffset=function(t,e){var n=this,r=n.defaultSize,i=n.dodgePadding,o=n.xDimensionLegenth,a=n.groupNum,s=n.marginRatio,l=n.maxColumnWidth,c=n.minColumnWidth,u=n.columnWidthRatio,h=i/o,p=1*s/(a-1),d=((1-p*(a-1))/a-h*(t-1))/t;if(d=u?1/a/t*u:d,!yX.UM(l)){var f=l/o;d=Math.min(d,f)}if(!yX.UM(c)){var g=c/o;d=Math.max(d,g)}return((.5+e)*(d=r?r/o:d)+e*h+.5*(p=(1-(d*t+h*(t-1))*a)/(a-1)))*a-p/2},e.prototype.getIntervalAndDodgeOffset=function(t,e){var n=this,r=n.intervalPadding,i=n.dodgePadding,o=n.xDimensionLegenth,a=n.groupNum,s=r/o,l=i/o;return((.5+e)*(((1-s*(a-1))/a-l*(t-1))/t)+e*l+.5*s)*a-s/2},e.prototype.getDistribution=function(t){var e=this.adjustDataArray,n=this.cacheMap,r=n[t];return r||(r={},yX.S6(e,(function(e,n){var i=yX.I(e,t);i.length||i.push(0),yX.S6(i,(function(t){r[t]||(r[t]=[]),r[t].push(n)}))})),n[t]=r),r},e}(UX),ZX=YX;var KX=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return XX(e,t),e.prototype.process=function(t){var e=yX.d9(t),n=yX.xH(e);return this.adjustData(e,n),e},e.prototype.adjustDim=function(t,e,n){var r=this,i=this.groupData(n,t);return yX.S6(i,(function(n,i){return r.adjustGroup(n,t,parseFloat(i),e)}))},e.prototype.getAdjustOffset=function(t){var e=t.pre,n=t.next,r=.05*(n-e);return function(t,e){return(e-t)*Math.random()+t}(e+r,n-r)},e.prototype.adjustGroup=function(t,e,n,r){var i=this,o=this.getAdjustRange(e,n,r);return yX.S6(t,(function(t){t[e]=i.getAdjustOffset(o)})),t},e}(UX),JX=KX,QX=yX.Ct,tq=function(t){function e(e){var n=t.call(this,e)||this,r=e.adjustNames,i=void 0===r?["y"]:r,o=e.height,a=void 0===o?NaN:o,s=e.size,l=void 0===s?10:s,c=e.reverseOrder,u=void 0!==c&&c;return n.adjustNames=i,n.height=a,n.size=l,n.reverseOrder=u,n}return XX(e,t),e.prototype.process=function(t){var e=this.yField,n=this.reverseOrder,r=e?this.processStack(t):this.processOneDimStack(t);return n?this.reverse(r):r},e.prototype.reverse=function(t){return t.slice(0).reverse()},e.prototype.processStack=function(t){var e=this,n=e.xField,r=e.yField,i=e.reverseOrder?this.reverse(t):t,o=new QX,a=new QX;return i.map((function(t){return t.map((function(t){var e,i=yX.U2(t,n,0),s=yX.U2(t,[r]),l=i.toString();if(s=yX.kJ(s)?s[1]:s,!yX.UM(s)){var c=s>=0?o:a;c.has(l)||c.set(l,0);var u=c.get(l),h=s+u;return c.set(l,h),qX(qX({},t),((e={})[r]=[u,h],e))}return t}))}))},e.prototype.processOneDimStack=function(t){var e=this,n=this,r=n.xField,i=n.height,o=n.reverseOrder,a=o?this.reverse(t):t,s=new QX;return a.map((function(t){return t.map((function(t){var n,o=e.size,a=t[r],l=2*o/i;s.has(a)||s.set(a,l/2);var c=s.get(a);return s.set(a,c+l),qX(qX({},t),((n={}).y=c,n))}))}))},e}(UX),eq=tq,nq=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return XX(e,t),e.prototype.process=function(t){var e=yX.xH(t),n=this.xField,r=this.yField,i=this.getXValuesMaxMap(e),o=Math.max.apply(Math,Object.keys(i).map((function(t){return i[t]})));return yX.UI(t,(function(t){return yX.UI(t,(function(t){var e,a,s=t[r],l=t[n];if(yX.kJ(s)){var c=(o-i[l])/2;return qX(qX({},t),((e={})[r]=yX.UI(s,(function(t){return c+t})),e))}var u=(o-s)/2;return qX(qX({},t),((a={})[r]=[u,s+u],a))}))}))},e.prototype.getXValuesMaxMap=function(t){var e=this,n=this.xField,r=this.yField,i=yX.vM(t,(function(t){return t[n]}));return yX.Q8(i,(function(t){return e.getDimMaxValue(t,r)}))},e.prototype.getDimMaxValue=function(t,e){var n=yX.UI(t,(function(t){return yX.U2(t,e,[])})),r=yX.xH(n);return Math.max.apply(Math,r)},e}(UX),rq=nq;GX("Dodge",ZX),GX("Jitter",JX),GX("Stack",eq),GX("Symmetric",rq);var iq=function(t,e){return(0,yX.HD)(e)?e:t.invert(t.scale(e))},oq=function(){function t(t){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(t)}return t.prototype.mapping=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.map((function(e,n){return t._toOriginParam(e,t.scales[n])}));return this.callback.apply(this,r)},t.prototype.getLinearValue=function(t){var e=this.values.length-1,n=Math.floor(e*t),r=e*t-n,i=this.values[n];return i+((n===e?i:this.values[n+1])-i)*r},t.prototype.getNames=function(){for(var t=this.scales,e=this.names,n=Math.min(t.length,e.length),r=[],i=0;i<n;i+=1)r.push(e[i]);return r},t.prototype.getFields=function(){return this.scales.map((function(t){return t.field}))},t.prototype.getScale=function(t){return this.scales[this.names.indexOf(t)]},t.prototype.defaultCallback=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 0===e.length?this.values:e.map((function(e,n){var r=t.scales[n];return"identity"===r.type?r.values[0]:t._getAttributeValue(r,e)}))},t.prototype._parseCfg=function(t){var e=this,n=t.type,r=void 0===n?"base":n,i=t.names,o=void 0===i?[]:i,a=t.scales,s=void 0===a?[]:a,l=t.values,c=void 0===l?[]:l,u=t.callback;this.type=r,this.scales=s,this.values=c,this.names=o,this.callback=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(u){var r=u.apply(void 0,t);if(!(0,yX.UM)(r))return[r]}return e.defaultCallback.apply(e,t)}},t.prototype._getAttributeValue=function(t,e){if(t.isCategory&&!this.linear){var n=t.translate(e);return this.values[n%this.values.length]}var r=t.scale(e);return this.getLinearValue(r)},t.prototype._toOriginParam=function(t,e){return e.isLinear?t:(0,yX.kJ)(t)?t.map((function(t){return iq(e,t)})):iq(e,t)},t}(),aq=oq,sq=/rgba?\(([\s.,0-9]+)\)/,lq=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,cq=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,uq=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,hq=function(t,e,n,r){return t[r]+(e[r]-t[r])*n};function pq(t){return"#"+gq(t[0])+gq(t[1])+gq(t[2])}var dq,fq=function(t){return[parseInt(t.substr(1,2),16),parseInt(t.substr(3,2),16),parseInt(t.substr(5,2),16)]},gq=function(t){var e=Math.round(t).toString(16);return 1===e.length?"0"+e:e},mq=function(t){if("#"===t[0]&&7===t.length)return t;dq||(dq=function(){var t=document.createElement("i");return t.title="Web Colour Picker",t.style.display="none",document.body.appendChild(t),t}()),dq.style.color=t;var e=document.defaultView.getComputedStyle(dq,"").getPropertyValue("color");return e=pq(sq.exec(e)[1].split(/\s*,\s*/).map((function(t){return Number(t)})))},yq={rgb2arr:fq,gradient:function(t){var e=(0,yX.HD)(t)?t.split("-"):t,n=(0,yX.UI)(e,(function(t){return fq(-1===t.indexOf("#")?mq(t):t)}));return function(t){return function(t,e){var n=isNaN(Number(e))||e<0?0:e>1?1:Number(e),r=t.length-1,i=Math.floor(r*n),o=r*n-i,a=t[i],s=i===r?a:t[i+1];return pq([hq(a,s,o,0),hq(a,s,o,1),hq(a,s,o,2)])}(n,t)}},toRGB:(0,yX.HP)(mq),toCSSGradient:function(t){if(/^[r,R,L,l]{1}[\s]*\(/.test(t)){var e,n=void 0;if("l"===t[0]){var r=+(i=lq.exec(t))[1]+90;n=i[2],e="linear-gradient("+r+"deg, "}else if("r"===t[0]){var i;e="radial-gradient(",n=(i=cq.exec(t))[4]}var o=n.match(uq);return(0,yX.S6)(o,(function(t,n){var r=t.split(":");e+=r[1]+" "+100*r[0]+"%",n!==o.length-1&&(e+=", ")})),e+=")"}return t}},vq=function(t){function e(e){var n=t.call(this,e)||this;return n.type="color",n.names=["color"],(0,yX.HD)(n.values)&&(n.linear=!0),n.gradient=yq.gradient(n.values),n}return(0,mX.ZT)(e,t),e.prototype.getLinearValue=function(t){return this.gradient(t)},e}(aq),xq=vq,_q=function(t){function e(e){var n=t.call(this,e)||this;return n.type="opacity",n.names=["opacity"],n}return(0,mX.ZT)(e,t),e}(aq),bq=function(t){function e(e){var n=t.call(this,e)||this;return n.names=["x","y"],n.type="position",n}return(0,mX.ZT)(e,t),e.prototype.mapping=function(t,e){var n=this.scales,r=n[0],i=n[1];return(0,yX.UM)(t)||(0,yX.UM)(e)?[]:[(0,yX.kJ)(t)?t.map((function(t){return r.scale(t)})):r.scale(t),(0,yX.kJ)(e)?e.map((function(t){return i.scale(t)})):i.scale(e)]},e}(aq),wq=bq,Sq=function(t){function e(e){var n=t.call(this,e)||this;return n.type="shape",n.names=["shape"],n}return(0,mX.ZT)(e,t),e.prototype.getLinearValue=function(t){var e=Math.round((this.values.length-1)*t);return this.values[e]},e}(aq),Cq=Sq,Eq=function(t){function e(e){var n=t.call(this,e)||this;return n.type="size",n.names=["size"],n}return(0,mX.ZT)(e,t),e}(aq),kq={};function Mq(t,e){kq[t]=e}var Tq=function(){function t(t){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=t,this.initCfg(),this.init()}return t.prototype.translate=function(t){return t},t.prototype.change=function(t){(0,yX.f0)(this.__cfg__,t),this.init()},t.prototype.clone=function(){return this.constructor(this.__cfg__)},t.prototype.getTicks=function(){var t=this;return(0,yX.UI)(this.ticks,(function(e,n){return(0,yX.Kn)(e)?e:{text:t.getText(e,n),tickValue:e,value:t.scale(e)}}))},t.prototype.getText=function(t,e){var n=this.formatter,r=n?n(t,e):t;return(0,yX.UM)(r)||!(0,yX.mf)(r.toString)?"":r.toString()},t.prototype.getConfig=function(t){return this.__cfg__[t]},t.prototype.init=function(){(0,yX.f0)(this,this.__cfg__),this.setDomain(),(0,yX.xb)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},t.prototype.initCfg=function(){},t.prototype.setDomain=function(){},t.prototype.calculateTicks=function(){var t=this.tickMethod,e=[];if((0,yX.HD)(t)){var n=kq[t];if(!n)throw new Error("There is no method to to calculate ticks!");e=n(this)}else(0,yX.mf)(t)&&(e=t(this));return e},t.prototype.rangeMin=function(){return this.range[0]},t.prototype.rangeMax=function(){return this.range[1]},t.prototype.calcPercent=function(t,e,n){return(0,yX.hj)(t)?(t-e)/(n-e):NaN},t.prototype.calcValue=function(t,e,n){return e+t*(n-e)},t}(),Iq=Tq,Pq=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="cat",e.isCategory=!0,e}return(0,mX.ZT)(e,t),e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},e.prototype.translate=function(t){this.buildIndexMap();var e=this.translateIndexMap.get(t);return void 0===e&&(e=(0,yX.hj)(t)?t:NaN),e},e.prototype.scale=function(t){var e=this.translate(t),n=this.calcPercent(e,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var e=this.max-this.min,n=this.calcPercent(t,this.rangeMin(),this.rangeMax()),r=Math.round(e*n)+this.min;return r<this.min||r>this.max?NaN:this.values[r]},e.prototype.getText=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=e;return(0,yX.hj)(e)&&!this.values.includes(e)&&(i=this.values[i]),t.prototype.getText.apply(this,(0,mX.pr)([i],n))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if((0,yX.UM)(this.getConfig("min"))&&(this.min=0),(0,yX.UM)(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(Iq),Oq=Pq,Aq=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,Dq="\\d\\d?",Rq="\\d\\d",Lq="[^\\s]+",Nq=/\[([^]*?)\]/gm;function Fq(t,e){for(var n=[],r=0,i=t.length;r<i;r++)n.push(t[r].substr(0,e));return n}var zq=function(t){return function(e,n){var r=n[t].map((function(t){return t.toLowerCase()})),i=r.indexOf(e.toLowerCase());return i>-1?i:null}};function Bq(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];for(var a in o)t[a]=o[a]}return t}var $q=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],jq=["January","February","March","April","May","June","July","August","September","October","November","December"],Uq=Fq(jq,3),Vq={dayNamesShort:Fq($q,3),dayNames:$q,monthNamesShort:Uq,monthNames:jq,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!==10?1:0)*t%10]}},Hq=Bq({},Vq),Gq=function(t){return Hq=Bq(Hq,t)},Wq=function(t){return t.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Xq=function(t,e){for(void 0===e&&(e=2),t=String(t);t.length<e;)t="0"+t;return t},qq={D:function(t){return String(t.getDate())},DD:function(t){return Xq(t.getDate())},Do:function(t,e){return e.DoFn(t.getDate())},d:function(t){return String(t.getDay())},dd:function(t){return Xq(t.getDay())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return String(t.getMonth()+1)},MM:function(t){return Xq(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},YY:function(t){return Xq(String(t.getFullYear()),4).substr(2)},YYYY:function(t){return Xq(t.getFullYear(),4)},h:function(t){return String(t.getHours()%12||12)},hh:function(t){return Xq(t.getHours()%12||12)},H:function(t){return String(t.getHours())},HH:function(t){return Xq(t.getHours())},m:function(t){return String(t.getMinutes())},mm:function(t){return Xq(t.getMinutes())},s:function(t){return String(t.getSeconds())},ss:function(t){return Xq(t.getSeconds())},S:function(t){return String(Math.round(t.getMilliseconds()/100))},SS:function(t){return Xq(Math.round(t.getMilliseconds()/10),2)},SSS:function(t){return Xq(t.getMilliseconds(),3)},a:function(t,e){return t.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(t,e){return t.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+Xq(100*Math.floor(Math.abs(e)/60)+Math.abs(e)%60,4)},Z:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+Xq(Math.floor(Math.abs(e)/60),2)+":"+Xq(Math.abs(e)%60,2)}},Yq=function(t){return+t-1},Zq=[null,Dq],Kq=[null,Lq],Jq=["isPm",Lq,function(t,e){var n=t.toLowerCase();return n===e.amPm[0]?0:n===e.amPm[1]?1:null}],Qq=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(t){var e=(t+"").match(/([+-]|\d\d)/gi);if(e){var n=60*+e[1]+parseInt(e[2],10);return"+"===e[0]?n:-n}return 0}],tY={D:["day",Dq],DD:["day",Rq],Do:["day",Dq+Lq,function(t){return parseInt(t,10)}],M:["month",Dq,Yq],MM:["month",Rq,Yq],YY:["year",Rq,function(t){var e=+(""+(new Date).getFullYear()).substr(0,2);return+(""+(+t>68?e-1:e)+t)}],h:["hour",Dq,void 0,"isPm"],hh:["hour",Rq,void 0,"isPm"],H:["hour",Dq],HH:["hour",Rq],m:["minute",Dq],mm:["minute",Rq],s:["second",Dq],ss:["second",Rq],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(t){return 100*+t}],SS:["millisecond",Rq,function(t){return 10*+t}],SSS:["millisecond","\\d{3}"],d:Zq,dd:Zq,ddd:Kq,dddd:Kq,MMM:["month",Lq,zq("monthNamesShort")],MMMM:["month",Lq,zq("monthNames")],a:Jq,A:Jq,ZZ:Qq,Z:Qq},eY={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},nY=function(t){return Bq(eY,t)},rY=function(t,e,n){if(void 0===e&&(e=eY.default),void 0===n&&(n={}),"number"===typeof t&&(t=new Date(t)),"[object Date]"!==Object.prototype.toString.call(t)||isNaN(t.getTime()))throw new Error("Invalid Date pass to format");e=eY[e]||e;var r=[];e=e.replace(Nq,(function(t,e){return r.push(e),"@@@"}));var i=Bq(Bq({},Hq),n);return(e=e.replace(Aq,(function(e){return qq[e](t,i)}))).replace(/@@@/g,(function(){return r.shift()}))};function iY(t,e,n){if(void 0===n&&(n={}),"string"!==typeof e)throw new Error("Invalid format in fecha parse");if(e=eY[e]||e,t.length>1e3)return null;var r={year:(new Date).getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},i=[],o=[],a=e.replace(Nq,(function(t,e){return o.push(Wq(e)),"@@@"})),s={},l={};a=Wq(a).replace(Aq,(function(t){var e=tY[t],n=e[0],r=e[1],o=e[3];if(s[n])throw new Error("Invalid format. "+n+" specified twice in format");return s[n]=!0,o&&(l[o]=!0),i.push(e),"("+r+")"})),Object.keys(l).forEach((function(t){if(!s[t])throw new Error("Invalid format. "+t+" is required in specified format")})),a=a.replace(/@@@/g,(function(){return o.shift()}));var c=t.match(new RegExp(a,"i"));if(!c)return null;for(var u,h=Bq(Bq({},Hq),n),p=1;p<c.length;p++){var d=i[p-1],f=d[0],g=d[2],m=g?g(c[p],h):+c[p];if(null==m)return null;r[f]=m}if(1===r.isPm&&null!=r.hour&&12!==+r.hour?r.hour=+r.hour+12:0===r.isPm&&12===+r.hour&&(r.hour=0),null==r.timezoneOffset){u=new Date(r.year,r.month,r.day,r.hour,r.minute,r.second,r.millisecond);for(var y=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],v=(p=0,y.length);p<v;p++)if(s[y[p][0]]&&r[y[p][0]]!==u[y[p][1]]())return null}else if(u=new Date(Date.UTC(r.year,r.month,r.day,r.hour,r.minute-r.timezoneOffset,r.second,r.millisecond)),r.month>11||r.month<0||r.day>31||r.day<1||r.hour>23||r.hour<0||r.minute>59||r.minute<0||r.second>59||r.second<0)return null;return u}var oY={format:rY,parse:iY,defaultI18n:Vq,setGlobalDateI18n:Gq,setGlobalDateMasks:nY};var aY="format";function sY(t,n){return(e[aY]||oY[aY])(t,n)}function lY(t){return(0,yX.HD)(t)&&(t=t.indexOf("T")>0?new Date(t).getTime():new Date(t.replace(/-/gi,"/")).getTime()),(0,yX.J_)(t)&&(t=t.getTime()),t}var cY=1e3,uY=6e4,hY=36e5,pY=24*hY,dY=31*pY,fY=365*pY,gY=[["HH:mm:ss",cY],["HH:mm:ss",1e4],["HH:mm:ss",3e4],["HH:mm",uY],["HH:mm",6e5],["HH:mm",18e5],["HH",hY],["HH",6*hY],["HH",12*hY],["YYYY-MM-DD",pY],["YYYY-MM-DD",4*pY],["YYYY-WW",7*pY],["YYYY-MM",dY],["YYYY-MM",4*dY],["YYYY-MM",6*dY],["YYYY",380*pY]];function mY(t,e,n){var r,i=(r=function(t){return t[1]},function(t,e,n,i){for(var o=(0,yX.UM)(n)?0:n,a=(0,yX.UM)(i)?t.length:i;o<a;){var s=o+a>>>1;r(t[s])>e?a=s:o=s+1}return o})(gY,(e-t)/n)-1,o=gY[i];return i<0?o=gY[0]:i>=gY.length&&(o=(0,yX.Z$)(gY)),o}var yY=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="timeCat",e}return(0,mX.ZT)(e,t),e.prototype.translate=function(t){t=lY(t);var e=this.values.indexOf(t);return-1===e&&(e=(0,yX.hj)(t)&&t<this.values.length?t:NaN),e},e.prototype.getText=function(t,e){var n=this.translate(t);if(n>-1){var r=this.values[n],i=this.formatter;return r=i?i(r,e):sY(r,this.mask)}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var e=this.values;(0,yX.S6)(e,(function(t,n){e[n]=lY(t)})),e.sort((function(t,e){return t-e})),t.prototype.setDomain.call(this)},e}(Oq),vY=yY,xY=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isContinuous=!0,e}return(0,mX.ZT)(e,t),e.prototype.scale=function(t){if((0,yX.UM)(t))return NaN;var e=this.rangeMin(),n=this.rangeMax();return this.max===this.min?e:e+this.getScalePercent(t)*(n-e)},e.prototype.init=function(){t.prototype.init.call(this);var e=this.ticks,n=(0,yX.YM)(e),r=(0,yX.Z$)(e);n<this.min&&(this.min=n),r>this.max&&(this.max=r),(0,yX.UM)(this.minLimit)||(this.min=n),(0,yX.UM)(this.maxLimit)||(this.max=r)},e.prototype.setDomain=function(){var t=(0,yX.rx)(this.values),e=t.min,n=t.max;(0,yX.UM)(this.min)&&(this.min=e),(0,yX.UM)(this.max)&&(this.max=n),this.min>this.max&&(this.min=e,this.max=n)},e.prototype.calculateTicks=function(){var e=this,n=t.prototype.calculateTicks.call(this);return this.nice||(n=(0,yX.hX)(n,(function(t){return t>=e.min&&t<=e.max}))),n},e.prototype.getScalePercent=function(t){var e=this.max,n=this.min;return(t-n)/(e-n)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(Iq),_Y=xY,bY=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="linear",e.isLinear=!0,e}return(0,mX.ZT)(e,t),e.prototype.invert=function(t){var e=this.getInvertPercent(t);return this.min+e*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(_Y),wY=bY;function SY(t,e){var n=Math.E;return e>=0?Math.pow(n,Math.log(e)/t):-1*Math.pow(n,Math.log(-e)/t)}function CY(t,e){return 1===t?1:Math.log(e)/Math.log(t)}function EY(t,e,n){(0,yX.UM)(n)&&(n=Math.max.apply(null,t));var r=n;return(0,yX.S6)(t,(function(t){t>0&&t<r&&(r=t)})),r===n&&(r=n/e),r>1&&(r=1),r}var kY=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="log",e}return(0,mX.ZT)(e,t),e.prototype.invert=function(t){var e,n=this.base,r=CY(n,this.max),i=this.rangeMin(),o=this.rangeMax()-i,a=this.positiveMin;if(a){if(0===t)return 0;var s=1/(r-(e=CY(n,a/n)))*o;if(t<s)return t/s*a}else e=CY(n,this.min);var l=(t-i)/o*(r-e)+e;return Math.pow(n,l)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){t.prototype.setDomain.call(this);var e=this.min;if(e<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");0===e&&(this.positiveMin=EY(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var e=this.max,n=this.min;if(e===n)return 0;if(t<=0)return 0;var r=this.base,i=this.positiveMin;return i&&(n=1*i/r),t<i?t/i/(CY(r,e)-CY(r,n)):(CY(r,t)-CY(r,n))/(CY(r,e)-CY(r,n))},e}(_Y),MY=kY,TY=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="pow",e}return(0,mX.ZT)(e,t),e.prototype.invert=function(t){var e=this.getInvertPercent(t),n=this.exponent,r=SY(n,this.max),i=SY(n,this.min),o=e*(r-i)+i,a=o>=0?1:-1;return Math.pow(o,n)*a},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var e=this.max,n=this.min;if(e===n)return 0;var r=this.exponent;return(SY(r,t)-SY(r,n))/(SY(r,e)-SY(r,n))},e}(_Y),IY=TY,PY=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="time",e}return(0,mX.ZT)(e,t),e.prototype.getText=function(t,e){var n=this.translate(t),r=this.formatter;return r?r(n,e):sY(n,this.mask)},e.prototype.scale=function(e){var n=e;return((0,yX.HD)(n)||(0,yX.J_)(n))&&(n=this.translate(n)),t.prototype.scale.call(this,n)},e.prototype.translate=function(t){return lY(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,e=this.getConfig("min"),n=this.getConfig("max");if((0,yX.UM)(e)&&(0,yX.hj)(e)||(this.min=this.translate(this.min)),(0,yX.UM)(n)&&(0,yX.hj)(n)||(this.max=this.translate(this.max)),t&&t.length){var r=[],i=1/0,o=i,a=0;(0,yX.S6)(t,(function(t){var e=lY(t);if(isNaN(e))throw new TypeError("Invalid Time: "+t+" in time scale!");i>e?(o=i,i=e):o>e&&(o=e),a<e&&(a=e),r.push(e)})),t.length>1&&(this.minTickInterval=o-i),(0,yX.UM)(e)&&(this.min=i),(0,yX.UM)(n)&&(this.max=a)}},e}(wY),OY=PY,AY=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="quantize",e}return(0,mX.ZT)(e,t),e.prototype.invert=function(t){var e=this.ticks,n=e.length,r=this.getInvertPercent(t),i=Math.floor(r*(n-1));if(i>=n-1)return(0,yX.Z$)(e);if(i<0)return(0,yX.YM)(e);var o=e[i],a=i/(n-1);return o+(r-a)/((i+1)/(n-1)-a)*(e[i+1]-o)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var e=t.prototype.calculateTicks.call(this);return this.nice||((0,yX.Z$)(e)!==this.max&&e.push(this.max),(0,yX.YM)(e)!==this.min&&e.unshift(this.min)),e},e.prototype.getScalePercent=function(t){var e=this.ticks;if(t<(0,yX.YM)(e))return 0;if(t>(0,yX.Z$)(e))return 1;var n=0;return(0,yX.S6)(e,(function(e,r){if(!(t>=e))return!1;n=r})),n/(e.length-1)},e}(_Y),DY=AY,RY=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="quantile",e}return(0,mX.ZT)(e,t),e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(DY),LY=RY,NY={};function FY(t){return NY[t]}function zY(t,e){if(FY(t))throw new Error("type '"+t+"' existed.");NY[t]=e}var BY=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="identity",e.isIdentity=!0,e}return(0,mX.ZT)(e,t),e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&(0,yX.hj)(t)?t:this.range[0]},e.prototype.invert=function(t){var e=this.range;return t<e[0]||t>e[1]?NaN:this.values[0]},e}(Iq),$Y=BY;function jY(t){var e=t.values,n=t.tickInterval,r=t.tickCount,i=t.showLast;if((0,yX.hj)(n)){var o=(0,yX.hX)(e,(function(t,e){return e%n===0})),a=(0,yX.Z$)(e);return i&&(0,yX.Z$)(o)!==a&&o.push(a),o}var s=e.length,l=t.min,c=t.max;if((0,yX.UM)(l)&&(l=0),(0,yX.UM)(c)&&(c=e.length-1),!(0,yX.hj)(r)||r>=s)return e.slice(l,c+1);if(r<=0||c<=0)return[];for(var u=1===r?s:Math.floor(s/(r-1)),h=[],p=l,d=0;d<r&&!(p>=c);d++)p=Math.min(l+d*u,c),d===r-1&&i?h.push(e[c]):h.push(e[p]);return h}var UY=Math.sqrt(50),VY=Math.sqrt(10),HY=Math.sqrt(2),GY=function(){function t(){this._domain=[0,1]}return t.prototype.domain=function(t){return t?(this._domain=Array.from(t,Number),this):this._domain.slice()},t.prototype.nice=function(t){var e,n;void 0===t&&(t=5);var r,i=this._domain.slice(),o=0,a=this._domain.length-1,s=this._domain[o],l=this._domain[a];return l<s&&(s=(e=[l,s])[0],l=e[1],o=(n=[a,o])[0],a=n[1]),(r=WY(s,l,t))>0?r=WY(s=Math.floor(s/r)*r,l=Math.ceil(l/r)*r,t):r<0&&(r=WY(s=Math.ceil(s*r)/r,l=Math.floor(l*r)/r,t)),r>0?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(l/r)*r,this.domain(i)):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(l*r)/r,this.domain(i)),this},t.prototype.ticks=function(t){return void 0===t&&(t=5),function(t,e,n){var r,i,o,a,s=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];(r=e<t)&&(i=t,t=e,e=i);if(0===(a=WY(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(t+s)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(t-s)/a;r&&o.reverse();return o}(this._domain[0],this._domain[this._domain.length-1],t||5)},t}();function WY(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=UY?10:o>=VY?5:o>=HY?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=UY?10:o>=VY?5:o>=HY?2:1)}function XY(t,e,n){return("ceil"===n?Math.ceil(t/e):"floor"===n?Math.floor(t/e):Math.round(t/e))*e}function qY(t,e,n){var r=XY(t,n,"floor"),i=XY(e,n,"ceil");r=(0,yX.ri)(r,n),i=(0,yX.ri)(i,n);for(var o=[],a=Math.max((i-r)/(Math.pow(2,12)-1),n),s=r;s<=i;s+=a){var l=(0,yX.ri)(s,a);o.push(l)}return{min:r,max:i,ticks:o}}function YY(t,e,n){var r,i=t.minLimit,o=t.maxLimit,a=t.min,s=t.max,l=t.tickCount,c=void 0===l?5:l,u=(0,yX.UM)(i)?(0,yX.UM)(e)?a:e:i,h=(0,yX.UM)(o)?(0,yX.UM)(n)?s:n:o;if(u>h&&(h=(r=[u,h])[0],u=r[1]),c<=2)return[u,h];for(var p=(h-u)/(c-1),d=[],f=0;f<c;f++)d.push(u+p*f);return d}function ZY(t){return Math.abs(t)<1e-15?t:parseFloat(t.toFixed(15))}var KY=[1,5,2,2.5,4,3],JY=100*Number.EPSILON;function QY(t,e,n,r,i,o){var a=(0,yX.dp)(e),s=(0,yX.cq)(e,t),l=0,c=function(t,e){return(t%e+e)%e}(r,o);return(c<JY||o-c<JY)&&r<=0&&i>=0&&(l=1),1-s/(a-1)-n+l}function tZ(t,e,n){var r=(0,yX.dp)(e);return 1-(0,yX.cq)(e,t)/(r-1)-n+1}function eZ(t,e,n,r,i,o){var a=(t-1)/(o-i),s=(e-1)/(Math.max(o,r)-Math.min(n,i));return 2-Math.max(a/s,s/a)}function nZ(t,e){return t>=e?2-(t-1)/(e-1):1}function rZ(t,e,n,r){var i=e-t;return 1-.5*(Math.pow(e-r,2)+Math.pow(t-n,2))/Math.pow(.1*i,2)}function iZ(t,e,n){var r=e-t;if(n>r){var i=(n-r)/2;return 1-Math.pow(i,2)/Math.pow(.1*r,2)}return 1}function oZ(t,e,n,r,i,o){void 0===n&&(n=5),void 0===r&&(r=!0),void 0===i&&(i=KY),void 0===o&&(o=[.25,.2,.5,.05]);var a=n<0?0:Math.round(n);if(Number.isNaN(t)||Number.isNaN(e)||"number"!==typeof t||"number"!==typeof e||!a)return{min:0,max:0,ticks:[]};if(e-t<1e-15||1===a)return{min:t,max:e,ticks:[t]};if(e-t>1e148){var s=(e-t)/(b=n||5);return{min:t,max:e,ticks:Array(b).fill(null).map((function(e,n){return ZY(t+s*n)}))}}for(var l={score:-2,lmin:0,lmax:0,lstep:0},c=1;c<1/0;){for(var u=0;u<i.length;u+=1){var h=i[u],p=tZ(h,i,c);if(o[0]*p+o[1]+o[2]+o[3]<l.score){c=1/0;break}for(var d=2;d<1/0;){var f=nZ(d,a);if(o[0]*p+o[1]+o[2]*f+o[3]<l.score)break;for(var g=(e-t)/(d+1)/c/h,m=Math.ceil(Math.log10(g));m<1/0;){var y=c*h*Math.pow(10,m),v=iZ(t,e,y*(d-1));if(o[0]*p+o[1]*v+o[2]*f+o[3]<l.score)break;var x=Math.floor(e/y)*c-(d-1)*c,_=Math.ceil(t/y)*c;if(x<=_)for(var b=_-x,w=0;w<=b;w+=1){var S=(x+w)*(y/c),C=S+y*(d-1),E=y,k=QY(h,i,c,S,C,E),M=rZ(t,e,S,C),T=eZ(d,a,t,e,S,C),I=o[0]*k+o[1]*M+o[2]*T+1*o[3];I>l.score&&(!r||S<=t&&C>=e)&&(l.lmin=S,l.lmax=C,l.lstep=E,l.score=I)}m+=1}d+=1}}c+=1}var P=ZY(l.lmax),O=ZY(l.lmin),A=ZY(l.lstep),D=Math.floor(function(t){return Math.round(1e12*t)/1e12}((P-O)/A))+1,R=new Array(D);R[0]=ZY(O);for(u=1;u<D;u++)R[u]=ZY(R[u-1]+A);return{min:Math.min(t,(0,yX.YM)(R)),max:Math.max(e,(0,yX.Z$)(R)),ticks:R}}function aZ(t,e,n){if(void 0===n&&(n=5),t===e)return{max:e,min:t,ticks:[t]};var r=n<0?0:Math.round(n);if(0===r)return{max:e,min:t,ticks:[]};var i=(e-t)/r,o=Math.pow(10,Math.floor(Math.log10(i))),a=o;2*o-i<1.5*(i-a)&&5*o-i<2.75*(i-(a=2*o))&&10*o-i<1.5*(i-(a=5*o))&&(a=10*o);for(var s=Math.ceil(e/a),l=Math.floor(t/a),c=Math.max(s*a,e),u=Math.min(l*a,t),h=Math.floor((c-u)/a)+1,p=new Array(h),d=0;d<h;d++)p[d]=ZY(u+d*a);return{min:u,max:c,ticks:p}}function sZ(t,e){var n=t.length*e;return 1===e?t[t.length-1]:0===e?t[0]:n%1!==0?t[Math.ceil(n)-1]:t.length%2===0?(t[n-1]+t[n])/2:t[n]}function lZ(t){return new Date(t).getFullYear()}function cZ(t){return new Date(t,0,1).getTime()}function uZ(t){return new Date(t).getMonth()}function hZ(t,e){return new Date(t,e,1).getTime()}Mq("cat",jY),Mq("time-cat",(function(t){return jY((0,mX.pi)({showLast:!0},t))})),Mq("wilkinson-extended",(function(t){var e=t.min,n=t.max,r=t.tickCount,i=t.nice,o=t.tickInterval,a=t.minLimit,s=t.maxLimit,l=oZ(e,n,r,i).ticks;return(0,yX.UM)(a)&&(0,yX.UM)(s)?o?qY(e,n,o).ticks:l:YY(t,(0,yX.YM)(l),(0,yX.Z$)(l))})),Mq("r-pretty",(function(t){var e=t.min,n=t.max,r=t.tickCount,i=t.tickInterval,o=t.minLimit,a=t.maxLimit,s=aZ(e,n,r).ticks;return(0,yX.UM)(o)&&(0,yX.UM)(a)?i?qY(e,n,i).ticks:s:YY(t,(0,yX.YM)(s),(0,yX.Z$)(s))})),Mq("time",(function(t){var e=t.min,n=t.max,r=t.minTickInterval,i=t.tickInterval,o=t.tickCount;if(i)o=Math.ceil((n-e)/i);else{var a=(n-e)/(i=mY(e,n,o)[1])/o;a>1&&(i*=Math.ceil(a)),r&&i<r&&(i=r)}i=Math.max(Math.floor((n-e)/(Math.pow(2,12)-1)),i);for(var s=[],l=e;l<n+i;l+=i)s.push(l);return s})),Mq("time-pretty",(function(t){var e=t.min,n=t.max,r=t.minTickInterval,i=t.tickCount,o=t.tickInterval,a=[];o||(o=(n-e)/i,r&&o<r&&(o=r)),o=Math.max(Math.floor((n-e)/(Math.pow(2,12)-1)),o);var s=lZ(e);if(o>fY)for(var l=lZ(n),c=Math.ceil(o/fY),u=s;u<=l+c;u+=c)a.push(cZ(u));else if(o>dY){var h=Math.ceil(o/dY),p=uZ(e),d=function(t,e){var n=lZ(t),r=lZ(e),i=uZ(t);return 12*(r-n)+(uZ(e)-i)%12}(e,n);for(u=0;u<=d+h;u+=h)a.push(hZ(s,u+p))}else if(o>pY){var f=(x=new Date(e)).getFullYear(),g=x.getMonth(),m=x.getDate(),y=Math.ceil(o/pY),v=function(t,e){return Math.ceil((e-t)/pY)}(e,n);for(u=0;u<v+y;u+=y)a.push(new Date(f,g,m+u).getTime())}else if(o>hY){f=(x=new Date(e)).getFullYear(),g=x.getMonth(),y=x.getDate();var x,_=x.getHours(),b=Math.ceil(o/hY),w=function(t,e){return Math.ceil((e-t)/hY)}(e,n);for(u=0;u<=w+b;u+=b)a.push(new Date(f,g,y,_+u).getTime())}else if(o>uY){var S=function(t,e){return Math.ceil((e-t)/6e4)}(e,n),C=Math.ceil(o/uY);for(u=0;u<=S+C;u+=C)a.push(e+u*uY)}else{var E=o;E<cY&&(E=cY);var k=Math.floor(e/cY)*cY,M=Math.ceil((n-e)/cY),T=Math.ceil(E/cY);for(u=0;u<M+T;u+=T)a.push(k+u*cY)}return a.length>=512&&console.warn("Notice: current ticks length("+a.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+o+") is too small, increase the value to solve the problem!"),a})),Mq("log",(function(t){var e,n=t.base,r=t.tickCount,i=t.min,o=t.max,a=t.values,s=CY(n,o);if(i>0)e=Math.floor(CY(n,i));else{var l=EY(a,n,o);e=Math.floor(CY(n,l))}for(var c=s-e,u=Math.ceil(c/r),h=[],p=e;p<s+u;p+=u)h.push(Math.pow(n,p));return i<=0&&h.unshift(0),h})),Mq("pow",(function(t){var e=t.exponent,n=t.tickCount,r=Math.ceil(SY(e,t.max));return aZ(Math.floor(SY(e,t.min)),r,n).ticks.map((function(t){var n=t>=0?1:-1;return Math.pow(t,e)*n}))})),Mq("quantile",(function(t){var e=t.tickCount,n=t.values;if(!n||!n.length)return[];for(var r=n.slice().sort((function(t,e){return t-e})),i=[],o=0;o<e;o++){var a=o/(e-1);i.push(sZ(r,a))}return i})),Mq("d3-linear",(function(t){var e=t.min,n=t.max,r=t.tickInterval,i=t.minLimit,o=t.maxLimit,a=function(t){var e=t.min,n=t.max,r=t.nice,i=t.tickCount,o=new GY;return o.domain([e,n]),r&&o.nice(i),o.ticks(i)}(t);return(0,yX.UM)(i)&&(0,yX.UM)(o)?r?qY(e,n,r).ticks:a:YY(t,(0,yX.YM)(a),(0,yX.Z$)(a))})),zY("cat",Oq),zY("category",Oq),zY("identity",$Y),zY("linear",wY),zY("log",MY),zY("pow",IY),zY("time",OY),zY("timeCat",vY),zY("quantize",DY),zY("quantile",LY);var pZ={},dZ=function(t){return pZ[t.toLowerCase()]},fZ=function(t,e){if(dZ(t))throw new Error("Attribute type '".concat(t,"' existed."));pZ[t.toLowerCase()]=e};fZ("Color",xq),fZ("Opacity",_q),fZ("Position",wq),fZ("Shape",Cq),fZ("Size",Eq);var gZ=n(907);function mZ(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}!function(){var t=function(){var t=new gZ.WT(3);return gZ.WT!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}()}();var yZ=n(5742),vZ=n(6403),xZ=function(){function t(t){this.type="coordinate",this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var e=t.start,n=t.end,r=t.matrix,i=void 0===r?[1,0,0,0,1,0,0,0,1]:r,o=t.isTransposed,a=void 0!==o&&o;this.start=e,this.end=n,this.matrix=i,this.originalMatrix=(0,mX.ev)([],i),this.isTransposed=a}return t.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},t.prototype.update=function(t){(0,yX.f0)(this,t),this.initial()},t.prototype.convertDim=function(t,e){var n,r=this[e],i=r.start,o=r.end;return this.isReflect(e)&&(i=(n=[o,i])[0],o=n[1]),i+t*(o-i)},t.prototype.invertDim=function(t,e){var n,r=this[e],i=r.start,o=r.end;return this.isReflect(e)&&(i=(n=[o,i])[0],o=n[1]),(t-i)/(o-i)},t.prototype.applyMatrix=function(t,e,n){void 0===n&&(n=0);var r=[t,e,n];return mZ(r,r,this.matrix),r},t.prototype.invertMatrix=function(t,e,n){void 0===n&&(n=0);var r=this.matrix,i=yZ.U_([0,0,0,0,0,0,0,0,0],r),o=[t,e,n];return i&&mZ(o,o,i),o},t.prototype.convert=function(t){var e=this.convertPoint(t),n=e.x,r=e.y,i=this.applyMatrix(n,r,1);return{x:i[0],y:i[1]}},t.prototype.invert=function(t){var e=this.invertMatrix(t.x,t.y,1);return this.invertPoint({x:e[0],y:e[1]})},t.prototype.rotate=function(t){var e=this.matrix,n=this.center;return vZ.m$(e,e,[-n.x,-n.y]),vZ.zu(e,e,t),vZ.m$(e,e,[n.x,n.y]),this},t.prototype.reflect=function(t){return"x"===t?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},t.prototype.scale=function(t,e){var n=this.matrix,r=this.center;return vZ.m$(n,n,[-r.x,-r.y]),vZ.lh(n,n,[t,e]),vZ.m$(n,n,[r.x,r.y]),this},t.prototype.translate=function(t,e){var n=this.matrix;return vZ.m$(n,n,[t,e]),this},t.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},t.prototype.getCenter=function(){return this.center},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRadius=function(){return this.radius},t.prototype.isReflect=function(t){return"x"===t?this.isReflectX:this.isReflectY},t.prototype.resetMatrix=function(t){this.matrix=t||(0,mX.ev)([],this.originalMatrix)},t}(),_Z=xZ,bZ=function(t){function e(e){var n=t.call(this,e)||this;return n.isRect=!0,n.type="cartesian",n.initial(),n}return(0,mX.ZT)(e,t),e.prototype.initial=function(){t.prototype.initial.call(this);var e=this.start,n=this.end;this.x={start:e.x,end:n.x},this.y={start:e.y,end:n.y}},e.prototype.convertPoint=function(t){var e,n=t.x,r=t.y;return this.isTransposed&&(n=(e=[r,n])[0],r=e[1]),{x:this.convertDim(n,"x"),y:this.convertDim(r,"y")}},e.prototype.invertPoint=function(t){var e,n=this.invertDim(t.x,"x"),r=this.invertDim(t.y,"y");return this.isTransposed&&(n=(e=[r,n])[0],r=e[1]),{x:n,y:r}},e}(_Z),wZ=bZ,SZ=n(9874),CZ=function(t){function e(e){var n=t.call(this,e)||this;n.isHelix=!0,n.type="helix";var r=e.startAngle,i=void 0===r?1.25*Math.PI:r,o=e.endAngle,a=void 0===o?7.25*Math.PI:o,s=e.innerRadius,l=void 0===s?0:s,c=e.radius;return n.startAngle=i,n.endAngle=a,n.innerRadius=l,n.radius=c,n.initial(),n}return(0,mX.ZT)(e,t),e.prototype.initial=function(){t.prototype.initial.call(this);var e=(this.endAngle-this.startAngle)/(2*Math.PI)+1,n=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(n*=this.radius),this.d=Math.floor(n*(1-this.innerRadius)/e),this.a=this.d/(2*Math.PI),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*n,end:this.innerRadius*n+.99*this.d}},e.prototype.convertPoint=function(t){var e,n=t.x,r=t.y;this.isTransposed&&(n=(e=[r,n])[0],r=e[1]);var i=this.convertDim(n,"x"),o=this.a*i,a=this.convertDim(r,"y");return{x:this.center.x+Math.cos(i)*(o+a),y:this.center.y+Math.sin(i)*(o+a)}},e.prototype.invertPoint=function(t){var e,n=this.d+this.y.start,r=SZ.$X([0,0],[t.x,t.y],[this.center.x,this.center.y]),i=vZ.Dg(r,[1,0],!0),o=i*this.a;SZ.kE(r)<o&&(o=SZ.kE(r)),i=2*Math.floor((SZ.kE(r)-o)/n)*Math.PI+i;var a=this.a*i,s=SZ.kE(r)-a;s=(0,yX.vQ)(s,0)?0:s;var l=this.invertDim(i,"x"),c=this.invertDim(s,"y");return l=(0,yX.vQ)(l,0)?0:l,c=(0,yX.vQ)(c,0)?0:c,this.isTransposed&&(l=(e=[c,l])[0],c=e[1]),{x:l,y:c}},e}(_Z),EZ=CZ,kZ=function(t){function e(e){var n=t.call(this,e)||this;n.isPolar=!0,n.type="polar";var r=e.startAngle,i=void 0===r?-Math.PI/2:r,o=e.endAngle,a=void 0===o?3*Math.PI/2:o,s=e.innerRadius,l=void 0===s?0:s,c=e.radius;return n.startAngle=i,n.endAngle=a,n.innerRadius=l,n.radius=c,n.initial(),n}return(0,mX.ZT)(e,t),e.prototype.initial=function(){for(t.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=2*Math.PI;var e,n=this.getOneBox(),r=n.maxX-n.minX,i=n.maxY-n.minY,o=Math.abs(n.minX)/r,a=Math.abs(n.minY)/i;this.height/i>this.width/r?(e=this.width/r,this.circleCenter={x:this.center.x-(.5-o)*this.width,y:this.center.y-(.5-a)*e*i}):(e=this.height/i,this.circleCenter={x:this.center.x-(.5-o)*e*r,y:this.center.y-(.5-a)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=e*this.radius:(this.radius<=0||this.radius>e)&&(this.polarRadius=e):this.polarRadius=e,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},e.prototype.getRadius=function(){return this.polarRadius},e.prototype.convertPoint=function(t){var e,n=this.getCenter(),r=t.x,i=t.y;return this.isTransposed&&(r=(e=[i,r])[0],i=e[1]),r=this.convertDim(r,"x"),i=this.convertDim(i,"y"),{x:n.x+Math.cos(r)*i,y:n.y+Math.sin(r)*i}},e.prototype.invertPoint=function(t){var e,n=this.getCenter(),r=[t.x-n.x,t.y-n.y],i=this.startAngle,o=this.endAngle;this.isReflect("x")&&(i=(e=[o,i])[0],o=e[1]);var a=[1,0,0,0,1,0,0,0,1];vZ.zu(a,a,i);var s=[1,0,0];mZ(s,s,a);var l=[s[0],s[1]],c=vZ.Dg(l,r,o<i);(0,yX.vQ)(c,2*Math.PI)&&(c=0);var u=SZ.kE(r),h=c/(o-i);h=o-i>0?h:-h;var p=this.invertDim(u,"y"),d={x:0,y:0};return d.x=this.isTransposed?p:h,d.y=this.isTransposed?h:p,d},e.prototype.getCenter=function(){return this.circleCenter},e.prototype.getOneBox=function(){var t=this.startAngle,e=this.endAngle;if(Math.abs(e-t)>=2*Math.PI)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var n=[0,Math.cos(t),Math.cos(e)],r=[0,Math.sin(t),Math.sin(e)],i=Math.min(t,e);i<Math.max(t,e);i+=Math.PI/18)n.push(Math.cos(i)),r.push(Math.sin(i));return{minX:Math.min.apply(Math,n),maxX:Math.max.apply(Math,n),minY:Math.min.apply(Math,r),maxY:Math.max.apply(Math,r)}},e}(_Z),MZ=kZ,TZ={},IZ=function(t,e){TZ[t.toLowerCase()]=e};function PZ(t,e,n){var r=new $X.Event(e,n);r.target=t,r.propagationPath.push(t),t.emitDelegation(e,r);for(var i=t.getParent();i;)i.emitDelegation(e,r),r.propagationPath.push(i),i=i.getParent()}IZ("rect",wZ),IZ("cartesian",wZ),IZ("polar",MZ),IZ("helix",EZ);var OZ=[1,0,0,0,1,0,0,0,1];function AZ(t,e,n){return void 0===n&&(n=OZ),e?vZ.vs(n,[["t",-t.x,-t.y],["r",e],["t",t.x,t.y]]):null}function DZ(t,e){return t.x||t.y?vZ.vs(e||OZ,[["t",t.x,t.y]]):null}function RZ(t,e){var n=[0,0];return SZ.kK(n,e,t),n}function LZ(t,e,n,r){if(e){var i=AZ({x:n,y:r},e,t.getMatrix());t.setMatrix(i)}}function NZ(t,e,n){var r=DZ({x:e,y:n});t.attr("matrix",r)}function FZ(t){var e=0,n=0,r=0,i=0;return(0,yX.hj)(t)?e=n=r=i=t:(0,yX.kJ)(t)&&(e=t[0],r=(0,yX.UM)(t[1])?t[0]:t[1],i=(0,yX.UM)(t[2])?t[0]:t[2],n=(0,yX.UM)(t[3])?r:t[3]),[e,r,i,n]}function zZ(t){for(var e=t.childNodes,n=e.length-1;n>=0;n--)t.removeChild(e[n])}function BZ(t){var e=t.start,n=t.end,r=Math.min(e.x,n.x),i=Math.min(e.y,n.y),o=Math.max(e.x,n.x),a=Math.max(e.y,n.y);return{x:r,y:i,minX:r,minY:i,maxX:o,maxY:a,width:o-r,height:a-i}}function $Z(t,e,n,r){var i=t+n,o=e+r;return{x:t,y:e,width:n,height:r,minX:t,minY:e,maxX:isNaN(i)?0:i,maxY:isNaN(o)?0:o}}function jZ(t,e,n){return(1-n)*t+e*n}function UZ(t,e,n){return{x:t.x+Math.cos(n)*e,y:t.y+Math.sin(n)*e}}var VZ=function(t,e,n){return void 0===n&&(n=Math.pow(Number.EPSILON,.5)),[t,e].includes(1/0)?Math.abs(t)===Math.abs(e):Math.abs(t-e)<n};function HZ(t){var e,n=t.getClip(),r=n&&n.getBBox();if(t.isGroup()){var i=1/0,o=-1/0,a=1/0,s=-1/0,l=t.getChildren();l.length>0?(0,yX.S6)(l,(function(t){if(t.get("visible")){if(t.isGroup()&&0===t.get("children").length)return!0;var e=HZ(t),n=t.applyToMatrix([e.minX,e.minY,1]),r=t.applyToMatrix([e.minX,e.maxY,1]),l=t.applyToMatrix([e.maxX,e.minY,1]),c=t.applyToMatrix([e.maxX,e.maxY,1]),u=Math.min(n[0],r[0],l[0],c[0]),h=Math.max(n[0],r[0],l[0],c[0]),p=Math.min(n[1],r[1],l[1],c[1]),d=Math.max(n[1],r[1],l[1],c[1]);u<i&&(i=u),h>o&&(o=h),p<a&&(a=p),d>s&&(s=d)}})):(i=0,o=0,a=0,s=0),e=$Z(i,a,o-i,s-a)}else e=t.getBBox();return r?function(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY);return $Z(n,r,Math.min(t.maxX,e.maxX)-n,Math.min(t.maxY,e.maxY)-r)}(e,r):e}function GZ(t){return t+"px"}function WZ(t,e,n,r){var i=r/function(t,e){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}(t,e),o=0;return"start"===n?o=0-i:"end"===n&&(o=1+i),{x:jZ(t.x,e.x,o),y:jZ(t.y,e.y,o)}}var XZ={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},qZ=function(t){function e(e){var n=t.call(this,e)||this;return n.initCfg(),n}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},e.prototype.clear=function(){},e.prototype.update=function(t){var e=this,n=this.get("defaultCfg")||{};(0,yX.S6)(t,(function(t,r){var i=t;e.get(r)!==t&&((0,yX.Kn)(t)&&n[r]&&(i=(0,yX.b$)({},n[r],t)),e.set(r,i))})),this.updateInner(t),this.afterUpdate(t)},e.prototype.updateInner=function(t){},e.prototype.afterUpdate=function(t){(0,yX.wH)(t,"visible")&&(t.visible?this.show():this.hide()),(0,yX.wH)(t,"capture")&&this.setCapture(t.capture)},e.prototype.getLayoutBBox=function(){return this.getBBox()},e.prototype.getLocationType=function(){return this.get("locationType")},e.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},e.prototype.setOffset=function(t,e){this.update({offsetX:t,offsetY:e})},e.prototype.setLocation=function(t){var e=(0,mX.pi)({},t);this.update(e)},e.prototype.getLocation=function(){var t=this,e={},n=this.get("locationType"),r=XZ[n];return(0,yX.S6)(r,(function(n){e[n]=t.get(n)})),e},e.prototype.isList=function(){return!1},e.prototype.isSlider=function(){return!1},e.prototype.init=function(){},e.prototype.initCfg=function(){var t=this,e=this.get("defaultCfg");(0,yX.S6)(e,(function(e,n){var r=t.get(n);if((0,yX.Kn)(r)){var i=(0,yX.b$)({},e,r);t.set(n,i)}}))},e}($X.Base),YZ=qZ,ZZ="update_status",KZ=["visible","tip","delegateObject"],JZ=["container","group","shapesMap","isRegister","isUpdating","destroyed"],QZ=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,mX.pi)((0,mX.pi)({},e),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},e.prototype.remove=function(){this.clear(),this.get("group").remove()},e.prototype.clear=function(){this.get("group").clear(),this.set("shapesMap",{}),this.clearOffScreenCache(),this.set("isInit",!0)},e.prototype.getChildComponentById=function(t){var e=this.getElementById(t);return e&&e.get("component")},e.prototype.getElementById=function(t){return this.get("shapesMap")[t]},e.prototype.getElementByLocalId=function(t){var e=this.getElementId(t);return this.getElementById(e)},e.prototype.getElementsByName=function(t){var e=[];return(0,yX.S6)(this.get("shapesMap"),(function(n){n.get("name")===t&&e.push(n)})),e},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateInner=function(t){this.offScreenRender(),this.get("updateAutoRender")&&this.render()},e.prototype.render=function(){var t=this.get("offScreenGroup");t||(t=this.offScreenRender());var e=this.get("group");this.updateElements(t,e),this.deleteElements(),this.applyOffset(),this.get("eventInitted")||(this.initEvent(),this.set("eventInitted",!0)),this.set("isInit",!1)},e.prototype.show=function(){this.get("group").show(),this.set("visible",!0)},e.prototype.hide=function(){this.get("group").hide(),this.set("visible",!1)},e.prototype.setCapture=function(t){this.get("group").set("capture",t),this.set("capture",t)},e.prototype.destroy=function(){this.removeEvent(),this.remove(),t.prototype.destroy.call(this)},e.prototype.getBBox=function(){return this.get("group").getCanvasBBox()},e.prototype.getLayoutBBox=function(){var t=this.get("group"),e=this.getInnerLayoutBBox(),n=t.getTotalMatrix();return n&&(e=function(t,e){var n=RZ(t,[e.minX,e.minY]),r=RZ(t,[e.maxX,e.minY]),i=RZ(t,[e.minX,e.maxY]),o=RZ(t,[e.maxX,e.maxY]),a=Math.min(n[0],r[0],i[0],o[0]),s=Math.max(n[0],r[0],i[0],o[0]),l=Math.min(n[1],r[1],i[1],o[1]),c=Math.max(n[1],r[1],i[1],o[1]);return{x:a,y:l,minX:a,minY:l,maxX:s,maxY:c,width:s-a,height:c-l}}(n,e)),e},e.prototype.on=function(t,e,n){return this.get("group").on(t,e,n),this},e.prototype.off=function(t,e){var n=this.get("group");return n&&n.off(t,e),this},e.prototype.emit=function(t,e){this.get("group").emit(t,e)},e.prototype.init=function(){t.prototype.init.call(this),this.get("group")||this.initGroup(),this.offScreenRender()},e.prototype.getInnerLayoutBBox=function(){return this.get("offScreenBBox")||this.get("group").getBBox()},e.prototype.delegateEmit=function(t,e){var n=this.get("group");e.target=n,n.emit(t,e),PZ(n,t,e)},e.prototype.createOffScreenGroup=function(){return new(this.get("group").getGroupBase())({delegateObject:this.getDelegateObject()})},e.prototype.applyOffset=function(){var t=this.get("offsetX"),e=this.get("offsetY");this.moveElementTo(this.get("group"),{x:t,y:e})},e.prototype.initGroup=function(){var t=this.get("container");this.set("group",t.addGroup({id:this.get("id"),name:this.get("name"),capture:this.get("capture"),visible:this.get("visible"),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},e.prototype.offScreenRender=function(){this.clearOffScreenCache();var t=this.createOffScreenGroup();return this.renderInner(t),this.set("offScreenGroup",t),this.set("offScreenBBox",HZ(t)),t},e.prototype.addGroup=function(t,e){this.appendDelegateObject(t,e);var n=t.addGroup(e);return this.get("isRegister")&&this.registerElement(n),n},e.prototype.addShape=function(t,e){this.appendDelegateObject(t,e);var n=t.addShape(e);return this.get("isRegister")&&this.registerElement(n),n},e.prototype.addComponent=function(t,e){var n=e.id,r=e.component,i=(0,mX._T)(e,["id","component"]),o=new r((0,mX.pi)((0,mX.pi)({},i),{id:n,container:t,updateAutoRender:this.get("updateAutoRender")}));return o.init(),o.render(),this.get("isRegister")&&this.registerElement(o.get("group")),o},e.prototype.initEvent=function(){},e.prototype.removeEvent=function(){this.get("group").off()},e.prototype.getElementId=function(t){return this.get("id")+"-"+this.get("name")+"-"+t},e.prototype.registerElement=function(t){var e=t.get("id");this.get("shapesMap")[e]=t},e.prototype.unregisterElement=function(t){var e=t.get("id");delete this.get("shapesMap")[e]},e.prototype.moveElementTo=function(t,e){var n=DZ(e);t.attr("matrix",n)},e.prototype.addAnimation=function(t,e,n){var r=e.attr("opacity");(0,yX.UM)(r)&&(r=1),e.attr("opacity",0),e.animate({opacity:r},n)},e.prototype.removeAnimation=function(t,e,n){e.animate({opacity:0},n)},e.prototype.updateAnimation=function(t,e,n,r){e.animate(n,r)},e.prototype.updateElements=function(t,e){var n,r=this,i=this.get("animate"),o=this.get("animateOption"),a=t.getChildren().slice(0);(0,yX.S6)(a,(function(t){var a=t.get("id"),s=r.getElementById(a),l=t.get("name");if(s)if(t.get("isComponent")){var c=t.get("component"),u=s.get("component"),h=(0,yX.ei)(c.cfg,(0,yX.e5)((0,yX.XP)(c.cfg),JZ));u.update(h),s.set(ZZ,"update")}else{var p=r.getReplaceAttrs(s,t);i&&o.update?r.updateAnimation(l,s,p,o.update):s.attr(p),t.isGroup()&&r.updateElements(t,s),(0,yX.S6)(KZ,(function(e){s.set(e,t.get(e))})),function(t,e){if(t.getClip()||e.getClip()){var n=e.getClip();if(n){var r={type:n.get("type"),attrs:n.attr()};t.setClip(r)}else t.setClip(null)}}(s,t),n=s,s.set(ZZ,"update")}else{e.add(t);var d=e.getChildren();if(d.splice(d.length-1,1),n){var f=d.indexOf(n);d.splice(f+1,0,t)}else d.unshift(t);if(r.registerElement(t),t.set(ZZ,"add"),t.get("isComponent"))(c=t.get("component")).set("container",e);else t.isGroup()&&r.registerNewGroup(t);if(n=t,i){var g=r.get("isInit")?o.appear:o.enter;g&&r.addAnimation(l,t,g)}}}))},e.prototype.clearUpdateStatus=function(t){var e=t.getChildren();(0,yX.S6)(e,(function(t){t.set(ZZ,null)}))},e.prototype.clearOffScreenCache=function(){var t=this.get("offScreenGroup");t&&t.destroy(),this.set("offScreenGroup",null),this.set("offScreenBBox",null)},e.prototype.getDelegateObject=function(){var t;return(t={})[this.get("name")]=this,t.component=this,t},e.prototype.appendDelegateObject=function(t,e){var n=t.get("delegateObject");e.delegateObject||(e.delegateObject={}),(0,yX.CD)(e.delegateObject,n)},e.prototype.getReplaceAttrs=function(t,e){var n=t.attr(),r=e.attr();return(0,yX.S6)(n,(function(t,e){void 0===r[e]&&(r[e]=void 0)})),r},e.prototype.registerNewGroup=function(t){var e=this,n=t.getChildren();(0,yX.S6)(n,(function(t){e.registerElement(t),t.set(ZZ,"add"),t.isGroup()&&e.registerNewGroup(t)}))},e.prototype.deleteElements=function(){var t=this,e=this.get("shapesMap"),n=[];(0,yX.S6)(e,(function(t,e){!t.get(ZZ)||t.destroyed?n.push([e,t]):t.set(ZZ,null)}));var r=this.get("animate"),i=this.get("animateOption");(0,yX.S6)(n,(function(n){var o=n[0],a=n[1];if(!a.destroyed){var s=a.get("name");if(r&&i.leave){var l=(0,yX.CD)({callback:function(){t.removeElement(a)}},i.leave);t.removeAnimation(s,a,l)}else t.removeElement(a)}delete e[o]}))},e.prototype.removeElement=function(t){if(t.get("isGroup")){var e=t.get("component");e&&e.destroy()}t.remove()},e}(YZ),tK=QZ,eK="\u2026";function nK(t,e){return t.charCodeAt(e)>0&&t.charCodeAt(e)<128?1:2}var rK="\u2026",iK=2,oK=400;function aK(t){if(t.length>oK)return function(t){for(var e=t.map((function(t){var e=t.attr("text");return(0,yX.UM)(e)?"":""+e})),n=0,r=0,i=0;i<e.length;i+=1){for(var o=0,a=0;a<=e[i].length;a+=1){var s=e[i].charCodeAt(a);o+=s>=19968&&s<=40869?2:1}o>n&&(n=o,r=i)}return t[r].getBBox().width}(t);var e=0;return(0,yX.S6)(t,(function(t){var n=t.getBBox().width;e<n&&(e=n)})),e}function sK(t,e,n,r){var i;void 0===r&&(r="tail");var o=null!==(i=e.attr("text"))&&void 0!==i?i:"";if("tail"===r){var a=(0,yX.ei)(e.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),s=(0,yX.Lo)(o,n,a,"\u2026");return o!==s?(e.attr("text",s),e.set("tip",o),!0):(e.set("tip",null),!1)}var l=function(t,e){var n=e.getCanvasBBox();return t?n.width:n.height}(t,e),c=function(t){for(var e=0,n=0;n<t.length;n++)e+=nK(t,n);return e}(o),u=!1;if(n<l){var h=Math.floor(n/l*c)-iK,p=void 0;p=h>=0?function(t,e,n){void 0===n&&(n="tail");var r=t.length,i="";if("tail"===n){for(var o=0,a=0;o<e&&o+nK(t,a)<=e;)i+=t[a],o+=nK(t,a),a++;i+=eK}else if("head"===n){for(o=0,a=r-1;o<e&&o+nK(t,a)<=e;)i+=t[a],o+=nK(t,a),a--;i=eK+i}else{for(var s="",l="",c=(o=0,0),u=r-1;o<e;){var h=nK(t,c),p=!1;h+o<=e&&(s+=t[c],c++,o+=h,p=!0);var d=nK(t,u);if(d+o<=e&&(l=t[u]+l,o+=d,u--,p=!0),!p)break}i=s+eK+l}return i}(o,h,r):rK,p&&(e.attr("text",p),u=!0)}return u?e.set("tip",o):e.set("tip",null),u}function lK(t,e){var n=e.x,r=e.y,i=e.content,o=e.style,a=e.id,s=e.name,l=e.rotate,c=e.maxLength,u=e.autoEllipsis,h=e.isVertical,p=e.ellipsisPosition,d=e.background,f=t.addGroup({id:a+"-group",name:s+"-group",attrs:{x:n,y:r}}),g=f.addShape({type:"text",id:a,name:s,attrs:(0,mX.pi)({x:0,y:0,text:i},o)}),m=FZ((0,yX.U2)(d,"padding",0));c&&u&&sK(!h,g,c-(m[1]+m[3]),p);if(d){var y=(0,yX.U2)(d,"style",{}),v=g.getCanvasBBox(),x=v.minX,_=v.minY,b=v.width,w=v.height;f.addShape("rect",{id:a+"-bg",name:a+"-bg",attrs:(0,mX.pi)({x:x-m[3],y:_-m[0],width:b+m[1]+m[3],height:w+m[0]+m[2]},y)}).toBack()}NZ(f,n,r),LZ(f,l,n,r)}var cK={fontFamily:'\n  BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",\n  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",\n  SimSun, "sans-serif"',textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4,descriptionIconStroke:"#fff",descriptionIconFill:"rgba(58, 73, 101, .25)"},uK=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,mX.pi)((0,mX.pi)({},e),{name:"annotation",type:"line",locationType:"region",start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:cK.textColor,fontSize:12,textAlign:"center",textBaseline:"bottom",fontFamily:cK.fontFamily},text:{position:"center",autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:cK.lineColor,lineWidth:1}}}})},e.prototype.renderInner=function(t){this.renderLine(t),this.get("text")&&this.renderLabel(t)},e.prototype.renderLine=function(t){var e=this.get("start"),n=this.get("end"),r=this.get("style");this.addShape(t,{type:"line",id:this.getElementId("line"),name:"annotation-line",attrs:(0,mX.pi)({x1:e.x,y1:e.y,x2:n.x,y2:n.y},r)})},e.prototype.getLabelPoint=function(t,e,n){var r;return((r="start"===n?0:"center"===n?.5:(0,yX.HD)(n)&&-1!==n.indexOf("%")?parseInt(n,10)/100:(0,yX.hj)(n)?n:1)>1||r<0)&&(r=1),{x:jZ(t.x,e.x,r),y:jZ(t.y,e.y,r)}},e.prototype.renderLabel=function(t){var e=this.get("text"),n=this.get("start"),r=this.get("end"),i=e.position,o=e.content,a=e.style,s=e.offsetX,l=e.offsetY,c=e.autoRotate,u=e.maxLength,h=e.autoEllipsis,p=e.ellipsisPosition,d=e.background,f=e.isVertical,g=void 0!==f&&f,m=this.getLabelPoint(n,r,i),y=m.x+s,v=m.y+l,x={id:this.getElementId("line-text"),name:"annotation-line-text",x:y,y:v,content:o,style:a,maxLength:u,autoEllipsis:h,ellipsisPosition:p,background:d,isVertical:g};if(c){var _=[r.x-n.x,r.y-n.y];x.rotate=Math.atan2(_[1],_[0])}lK(t,x)},e}(tK),hK=uK,pK=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,mX.pi)((0,mX.pi)({},e),{name:"annotation",type:"text",locationType:"point",x:0,y:0,content:"",rotate:null,style:{},background:null,maxLength:null,autoEllipsis:!0,isVertical:!1,ellipsisPosition:"tail",defaultCfg:{style:{fill:cK.textColor,fontSize:12,textAlign:"center",textBaseline:"middle",fontFamily:cK.fontFamily}}})},e.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetLocation()},e.prototype.renderInner=function(t){var e=this.getLocation(),n=e.x,r=e.y,i=this.get("content"),o=this.get("style");lK(t,{id:this.getElementId("text"),name:this.get("name")+"-text",x:n,y:r,content:i,style:o,maxLength:this.get("maxLength"),autoEllipsis:this.get("autoEllipsis"),isVertical:this.get("isVertical"),ellipsisPosition:this.get("ellipsisPosition"),background:this.get("background"),rotate:this.get("rotate")})},e.prototype.resetLocation=function(){var t=this.getElementByLocalId("text-group");if(t){var e=this.getLocation(),n=e.x,r=e.y,i=this.get("rotate");NZ(t,n,r),LZ(t,i,n,r)}},e}(tK),dK=pK,fK=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,mX.pi)((0,mX.pi)({},e),{name:"annotation",type:"arc",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:3*Math.PI/2,style:{stroke:"#999",lineWidth:1}})},e.prototype.renderInner=function(t){this.renderArc(t)},e.prototype.getArcPath=function(){var t=this.getLocation(),e=t.center,n=t.radius,r=t.startAngle,i=t.endAngle,o=UZ(e,n,r),a=UZ(e,n,i),s=i-r>Math.PI?1:0,l=[["M",o.x,o.y]];if(i-r===2*Math.PI){var c=UZ(e,n,r+Math.PI);l.push(["A",n,n,0,s,1,c.x,c.y]),l.push(["A",n,n,0,s,1,a.x,a.y])}else l.push(["A",n,n,0,s,1,a.x,a.y]);return l},e.prototype.renderArc=function(t){var e=this.getArcPath(),n=this.get("style");this.addShape(t,{type:"path",id:this.getElementId("arc"),name:"annotation-arc",attrs:(0,mX.pi)({path:e},n)})},e}(tK),gK=fK,mK=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,mX.pi)((0,mX.pi)({},e),{name:"annotation",type:"region",locationType:"region",start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:cK.regionColor,opacity:.4}}})},e.prototype.renderInner=function(t){this.renderRegion(t)},e.prototype.renderRegion=function(t){var e=this.get("start"),n=this.get("end"),r=this.get("style"),i=BZ({start:e,end:n});this.addShape(t,{type:"rect",id:this.getElementId("region"),name:"annotation-region",attrs:(0,mX.pi)({x:i.x,y:i.y,width:i.width,height:i.height},r)})},e}(tK),yK=mK,vK=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,mX.pi)((0,mX.pi)({},e),{name:"annotation",type:"image",locationType:"region",start:null,end:null,src:null,style:{}})},e.prototype.renderInner=function(t){this.renderImage(t)},e.prototype.getImageAttrs=function(){var t=this.get("start"),e=this.get("end"),n=this.get("style"),r=BZ({start:t,end:e}),i=this.get("src");return(0,mX.pi)({x:r.x,y:r.y,img:i,width:r.width,height:r.height},n)},e.prototype.renderImage=function(t){this.addShape(t,{type:"image",id:this.getElementId("image"),name:"annotation-image",attrs:this.getImageAttrs()})},e}(tK),xK=vK,_K=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,mX.pi)((0,mX.pi)({},e),{name:"annotation",type:"dataMarker",locationType:"point",x:0,y:0,point:{},line:{},text:{},direction:"upward",autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2}},line:{display:!0,length:20,style:{stroke:cK.lineColor,lineWidth:1}},text:{content:"",display:!0,style:{fill:cK.textColor,opacity:.65,fontSize:12,textAlign:"start",fontFamily:cK.fontFamily}}}})},e.prototype.renderInner=function(t){(0,yX.U2)(this.get("line"),"display")&&this.renderLine(t),(0,yX.U2)(this.get("text"),"display")&&this.renderText(t),(0,yX.U2)(this.get("point"),"display")&&this.renderPoint(t),this.get("autoAdjust")&&this.autoAdjust(t)},e.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x")+this.get("offsetX"),y:this.get("y")+this.get("offsetY")})},e.prototype.renderPoint=function(t){var e=this.getShapeAttrs().point;this.addShape(t,{type:"circle",id:this.getElementId("point"),name:"annotation-point",attrs:e})},e.prototype.renderLine=function(t){var e=this.getShapeAttrs().line;this.addShape(t,{type:"path",id:this.getElementId("line"),name:"annotation-line",attrs:e})},e.prototype.renderText=function(t){var e=this.getShapeAttrs().text,n=e.x,r=e.y,i=e.text,o=(0,mX._T)(e,["x","y","text"]),a=this.get("text"),s=a.background,l=a.maxLength,c=a.autoEllipsis,u=a.isVertival,h=a.ellipsisPosition;lK(t,{x:n,y:r,id:this.getElementId("text"),name:"annotation-text",content:i,style:o,background:s,maxLength:l,autoEllipsis:c,isVertival:u,ellipsisPosition:h})},e.prototype.autoAdjust=function(t){var e=this.get("direction"),n=this.get("x"),r=this.get("y"),i=(0,yX.U2)(this.get("line"),"length",0),o=this.get("coordinateBBox"),a=t.getBBox(),s=a.minX,l=a.maxX,c=a.minY,u=a.maxY,h=t.findById(this.getElementId("text-group")),p=t.findById(this.getElementId("text")),d=t.findById(this.getElementId("line"));if(o&&h){var f=h.attr("x"),g=h.attr("y"),m=p.getCanvasBBox(),y=m.width,v=m.height,x=0,_=0;if(n+s<=o.minX)if("leftward"===e)x=1;else{var b=o.minX-(n+s);f=h.attr("x")+b}else if(n+l>=o.maxX)if("rightward"===e)x=-1;else{b=n+l-o.maxX;f=h.attr("x")-b}if(x&&(d&&d.attr("path",[["M",0,0],["L",i*x,0]]),f=(i+2+y)*x),r+c<=o.minY)if("upward"===e)_=1;else{b=o.minY-(r+c);g=h.attr("y")+b}else if(r+u>=o.maxY)if("downward"===e)_=-1;else{b=r+u-o.maxY;g=h.attr("y")-b}_&&(d&&d.attr("path",[["M",0,0],["L",0,i*_]]),g=(i+2+v)*_),f===h.attr("x")&&g===h.attr("y")||NZ(h,f,g)}},e.prototype.getShapeAttrs=function(){var t=(0,yX.U2)(this.get("line"),"display"),e=(0,yX.U2)(this.get("point"),"style",{}),n=(0,yX.U2)(this.get("line"),"style",{}),r=(0,yX.U2)(this.get("text"),"style",{}),i=this.get("direction"),o=t?(0,yX.U2)(this.get("line"),"length",0):0,a=0,s=0,l="top",c="start";switch(i){case"upward":s=-1,l="bottom";break;case"downward":s=1,l="top";break;case"leftward":a=-1,c="end";break;case"rightward":a=1,c="start"}return{point:(0,mX.pi)({x:0,y:0},e),line:(0,mX.pi)({path:[["M",0,0],["L",o*a,o*s]]},n),text:(0,mX.pi)({x:(o+2)*a,y:(o+2)*s,text:(0,yX.U2)(this.get("text"),"content",""),textBaseline:l,textAlign:c},r)}},e}(tK),bK=_K,wK=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,mX.pi)((0,mX.pi)({},e),{name:"annotation",type:"dataRegion",locationType:"points",points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:cK.regionColor,opacity:.4}},text:{content:"",style:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:cK.textColor,fontFamily:cK.fontFamily}}}})},e.prototype.renderInner=function(t){var e=(0,yX.U2)(this.get("region"),"style",{}),n=((0,yX.U2)(this.get("text"),"style",{}),this.get("lineLength")||0),r=this.get("points");if(r.length){var i=function(t){var e=t.map((function(t){return t.x})),n=t.map((function(t){return t.y})),r=Math.min.apply(Math,e),i=Math.min.apply(Math,n),o=Math.max.apply(Math,e),a=Math.max.apply(Math,n);return{x:r,y:i,minX:r,minY:i,maxX:o,maxY:a,width:o-r,height:a-i}}(r),o=[];o.push(["M",r[0].x,i.minY-n]),r.forEach((function(t){o.push(["L",t.x,t.y])})),o.push(["L",r[r.length-1].x,r[r.length-1].y-n]),this.addShape(t,{type:"path",id:this.getElementId("region"),name:"annotation-region",attrs:(0,mX.pi)({path:o},e)}),lK(t,(0,mX.pi)({id:this.getElementId("text"),name:"annotation-text",x:(i.minX+i.maxX)/2,y:i.minY-n},this.get("text")))}},e}(tK),SK=wK,CK=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,mX.pi)((0,mX.pi)({},e),{name:"annotation",type:"regionFilter",locationType:"region",start:null,end:null,color:null,shape:[]})},e.prototype.renderInner=function(t){var e=this,n=this.get("start"),r=this.get("end"),i=this.addGroup(t,{id:this.getElementId("region-filter"),capture:!1});(0,yX.S6)(this.get("shapes"),(function(t,n){var r=t.get("type"),o=(0,yX.d9)(t.attr());e.adjustShapeAttrs(o),e.addShape(i,{id:e.getElementId("shape-"+r+"-"+n),capture:!1,type:r,attrs:o})}));var o=BZ({start:n,end:r});i.setClip({type:"rect",attrs:{x:o.minX,y:o.minY,width:o.width,height:o.height}})},e.prototype.adjustShapeAttrs=function(t){var e=this.get("color");t.fill&&(t.fill=t.fillStyle=e),t.stroke=t.strokeStyle=e},e}(tK),EK=CK,kK=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,mX.pi)((0,mX.pi)({},e),{name:"annotation",type:"shape",draw:yX.ZT})},e.prototype.renderInner=function(t){var e=this.get("render");(0,yX.mf)(e)&&e(t)},e}(tK),MK=kK;function TK(t,e,n){var r;try{r=window.getComputedStyle?window.getComputedStyle(t,null)[e]:t.style[e]}catch(kg){}finally{r=void 0===r?n:r}return r}function IK(t,e){var n=function(t,e){var n=TK(t,"width",e);return"auto"===n&&(n=t.offsetWidth),parseFloat(n)}(t,e),r=parseFloat(TK(t,"borderLeftWidth"))||0,i=parseFloat(TK(t,"paddingLeft"))||0,o=parseFloat(TK(t,"paddingRight"))||0,a=parseFloat(TK(t,"borderRightWidth"))||0,s=parseFloat(TK(t,"marginRight"))||0;return n+r+a+i+o+(parseFloat(TK(t,"marginLeft"))||0)+s}function PK(t,e){var n=function(t,e){var n=TK(t,"height",e);return"auto"===n&&(n=t.offsetHeight),parseFloat(n)}(t,e),r=parseFloat(TK(t,"borderTopWidth"))||0,i=parseFloat(TK(t,"paddingTop"))||0,o=parseFloat(TK(t,"paddingBottom"))||0;return n+r+(parseFloat(TK(t,"borderBottomWidth"))||0)+i+o+(parseFloat(TK(t,"marginTop"))||0)+(parseFloat(TK(t,"marginBottom"))||0)}var OK=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,mX.pi)((0,mX.pi)({},e),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.show=function(){this.get("container").style.display="",this.set("visible",!0)},e.prototype.hide=function(){this.get("container").style.display="none",this.set("visible",!1)},e.prototype.setCapture=function(t){var e=t?"auto":"none";this.getContainer().style.pointerEvents=e,this.set("capture",t)},e.prototype.getBBox=function(){var t=this.getContainer();return $Z(parseFloat(t.style.left)||0,parseFloat(t.style.top)||0,t.clientWidth,t.clientHeight)},e.prototype.clear=function(){zZ(this.get("container"))},e.prototype.destroy=function(){this.removeEvent(),this.removeDom(),t.prototype.destroy.call(this)},e.prototype.init=function(){t.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},e.prototype.initCapture=function(){this.setCapture(this.get("capture"))},e.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},e.prototype.initDom=function(){},e.prototype.initContainer=function(){var t=this.get("container");if((0,yX.UM)(t)){t=this.createDom();var e=this.get("parent");(0,yX.HD)(e)&&(e=document.getElementById(e),this.set("parent",e)),e.appendChild(t),this.get("containerId")&&t.setAttribute("id",this.get("containerId")),this.set("container",t)}else(0,yX.HD)(t)&&(t=document.getElementById(t),this.set("container",t));this.get("parent")||this.set("parent",t.parentNode)},e.prototype.resetStyles=function(){var t=this.get("domStyles"),e=this.get("defaultStyles");t=t?(0,yX.b$)({},e,t):e,this.set("domStyles",t)},e.prototype.applyStyles=function(){var t=this.get("domStyles");if(t){var e=this.getContainer();this.applyChildrenStyles(e,t);var n,r=this.get("containerClassName");if(r&&(n=r,e.className.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))))RX(e,t[r])}},e.prototype.applyChildrenStyles=function(t,e){(0,yX.S6)(e,(function(e,n){var r=t.getElementsByClassName(n);(0,yX.S6)(r,(function(t){RX(t,e)}))}))},e.prototype.applyStyle=function(t,e){RX(e,this.get("domStyles")[t])},e.prototype.createDom=function(){return DX(this.get("containerTpl"))},e.prototype.initEvent=function(){},e.prototype.removeDom=function(){var t=this.get("container");t&&t.parentNode&&t.parentNode.removeChild(t)},e.prototype.removeEvent=function(){},e.prototype.updateInner=function(t){(0,yX.wH)(t,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},e.prototype.resetPosition=function(){},e}(YZ),AK=OK,DK=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,mX.pi)((0,mX.pi)({},e),{name:"annotation",type:"html",locationType:"point",x:0,y:0,containerTpl:'<div class="g2-html-annotation" style="position:absolute"></div>',alignX:"left",alignY:"top",html:"",zIndex:7})},e.prototype.render=function(){var t=this.getContainer(),e=this.get("html");zZ(t);var n=(0,yX.mf)(e)?e(t):e;if((0,yX.kK)(n))t.appendChild(n);else if((0,yX.HD)(n)||(0,yX.hj)(n)){var r=DX(""+n);r&&t.appendChild(r)}this.resetPosition()},e.prototype.resetPosition=function(){var t=this.getContainer(),e=this.getLocation(),n=e.x,r=e.y,i=this.get("alignX"),o=this.get("alignY"),a=this.get("offsetX"),s=this.get("offsetY"),l=IK(t),c=PK(t),u={x:n,y:r};"middle"===i?u.x-=Math.round(l/2):"right"===i&&(u.x-=Math.round(l)),"middle"===o?u.y-=Math.round(c/2):"bottom"===o&&(u.y-=Math.round(c)),a&&(u.x+=a),s&&(u.y+=s),RX(t,{position:"absolute",left:u.x+"px",top:u.y+"px",zIndex:this.get("zIndex")})},e}(AK),RK=DK;function LK(t,e,n){var r=e+"Style",i=null;return(0,yX.S6)(n,(function(e,n){t[n]&&e[r]&&(i||(i={}),(0,yX.CD)(i,e[r]))})),i}var NK=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,mX.pi)((0,mX.pi)({},e),{name:"axis",ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:["autoRotate","autoEllipsis","autoHide"],tickStates:{},optimize:{},defaultCfg:{line:{style:{lineWidth:1,stroke:cK.lineColor}},tickLine:{style:{lineWidth:1,stroke:cK.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:cK.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:cK.textColor,fontFamily:cK.fontFamily,fontWeight:"normal"},offset:10,offsetX:0,offsetY:0},title:{autoRotate:!0,spacing:5,position:"center",style:{fontSize:12,fill:cK.textColor,textBaseline:"middle",fontFamily:cK.fontFamily,textAlign:"center"},iconStyle:{fill:cK.descriptionIconFill,stroke:cK.descriptionIconStroke},description:""},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:cK.uncheckedColor}}},optimize:{enable:!0,threshold:400}},theme:{}})},e.prototype.renderInner=function(t){this.get("line")&&this.drawLine(t),this.drawTicks(t),this.get("title")&&this.drawTitle(t)},e.prototype.isList=function(){return!0},e.prototype.getItems=function(){return this.get("ticks")},e.prototype.setItems=function(t){this.update({ticks:t})},e.prototype.updateItem=function(t,e){(0,yX.CD)(t,e),this.clear(),this.render()},e.prototype.clearItems=function(){var t=this.getElementByLocalId("label-group");t&&t.clear()},e.prototype.setItemState=function(t,e,n){t[e]=n,this.updateTickStates(t)},e.prototype.hasState=function(t,e){return!!t[e]},e.prototype.getItemStates=function(t){var e=this.get("tickStates"),n=[];return(0,yX.S6)(e,(function(e,r){t[r]&&n.push(r)})),n},e.prototype.clearItemsState=function(t){var e=this,n=this.getItemsByState(t);(0,yX.S6)(n,(function(n){e.setItemState(n,t,!1)}))},e.prototype.getItemsByState=function(t){var e=this,n=this.getItems();return(0,yX.hX)(n,(function(n){return e.hasState(n,t)}))},e.prototype.getSidePoint=function(t,e){var n=this.getSideVector(e,t);return{x:t.x+n[0],y:t.y+n[1]}},e.prototype.getTextAnchor=function(t){var e;return(0,yX.vQ)(t[0],0)?e="center":t[0]>0?e="start":t[0]<0&&(e="end"),e},e.prototype.getTextBaseline=function(t){var e;return(0,yX.vQ)(t[1],0)?e="middle":t[1]>0?e="top":t[1]<0&&(e="bottom"),e},e.prototype.processOverlap=function(t){},e.prototype.drawLine=function(t){var e=this.getLinePath(),n=this.get("line");this.addShape(t,{type:"path",id:this.getElementId("line"),name:"axis-line",attrs:(0,yX.CD)({path:e},n.style)})},e.prototype.getTickLineItems=function(t){var e=this,n=[],r=this.get("tickLine"),i=r.alignTick,o=r.length,a=1;return t.length>=2&&(a=t[1].value-t[0].value),(0,yX.S6)(t,(function(t){var r=t.point;i||(r=e.getTickPoint(t.value-a/2));var s=e.getSidePoint(r,o);n.push({startPoint:r,tickValue:t.value,endPoint:s,tickId:t.id,id:"tickline-"+t.id})})),n},e.prototype.getSubTickLineItems=function(t){var e=[],n=this.get("subTickLine"),r=n.count,i=t.length;if(i>=2)for(var o=0;o<i-1;o++)for(var a=t[o],s=t[o+1],l=0;l<r;l++){var c=(l+1)/(r+1),u=(1-c)*a.tickValue+c*s.tickValue,h=this.getTickPoint(u),p=this.getSidePoint(h,n.length);e.push({startPoint:h,endPoint:p,tickValue:u,id:"sub-"+a.id+"-"+l})}return e},e.prototype.getTickLineAttrs=function(t,e,n,r){var i=this.get(e).style,o={points:[t.startPoint,t.endPoint]},a=(0,yX.U2)(this.get("theme"),["tickLine","style"],{});i=(0,yX.mf)(i)?(0,yX.CD)({},a,i(o,n,r)):i;var s=t.startPoint,l=t.endPoint;return(0,mX.pi)({x1:s.x,y1:s.y,x2:l.x,y2:l.y},i)},e.prototype.drawTick=function(t,e,n,r,i){this.addShape(e,{type:"line",id:this.getElementId(t.id),name:"axis-"+n,attrs:this.getTickLineAttrs(t,n,r,i)})},e.prototype.drawTickLines=function(t){var e=this,n=this.get("ticks"),r=this.get("subTickLine"),i=this.getTickLineItems(n),o=this.addGroup(t,{name:"axis-tickline-group",id:this.getElementId("tickline-group")}),a=this.get("tickLine");if((0,yX.S6)(i,(function(n,r){if(a.displayWithLabel){var s=e.getElementId("label-"+n.tickId);t.findById(s)&&e.drawTick(n,o,"tickLine",r,i)}else e.drawTick(n,o,"tickLine",r,i)})),r){var s=this.getSubTickLineItems(i);(0,yX.S6)(s,(function(t,n){e.drawTick(t,o,"subTickLine",n,s)}))}},e.prototype.processTicks=function(){var t=this,e=this.get("ticks");(0,yX.S6)(e,(function(e){e.point=t.getTickPoint(e.value),(0,yX.UM)(e.id)&&(e.id=e.name)}))},e.prototype.drawTicks=function(t){var e=this;this.optimizeTicks(),this.processTicks(),this.get("label")&&this.drawLabels(t),this.get("tickLine")&&this.drawTickLines(t);var n=this.get("ticks");(0,yX.S6)(n,(function(n){e.applyTickStates(n,t)}))},e.prototype.optimizeTicks=function(){var t=this.get("optimize"),e=this.get("ticks");if(t&&t.enable&&t.threshold>0){var n=(0,yX.dp)(e);if(n>t.threshold){var r=Math.ceil(n/t.threshold),i=e.filter((function(t,e){return e%r===0}));this.set("ticks",i),this.set("originalTicks",e)}}},e.prototype.getLabelAttrs=function(t,e,n){var r=this.get("label"),i=r.offset,o=r.offsetX,a=r.offsetY,s=r.rotate,l=r.formatter,c=this.getSidePoint(t.point,i),u=this.getSideVector(i,c),h=l?l(t.name,t,e):t.name,p=r.style;p=(0,yX.mf)(p)?(0,yX.U2)(this.get("theme"),["label","style"],{}):p;var d=(0,yX.CD)({x:c.x+o,y:c.y+a,text:h,textAlign:this.getTextAnchor(u),textBaseline:this.getTextBaseline(u)},p);return s&&(d.matrix=AZ(c,s)),d},e.prototype.drawLabels=function(t){var e=this,n=this.get("ticks"),r=this.addGroup(t,{name:"axis-label-group",id:this.getElementId("label-group")});(0,yX.S6)(n,(function(t,i){e.addShape(r,{type:"text",name:"axis-label",id:e.getElementId("label-"+t.id),attrs:e.getLabelAttrs(t,i,n),delegateObject:{tick:t,item:t,index:i}})})),this.processOverlap(r);var i=r.getChildren(),o=(0,yX.U2)(this.get("theme"),["label","style"],{}),a=this.get("label"),s=a.style,l=a.formatter;if((0,yX.mf)(s)){var c=i.map((function(t){return(0,yX.U2)(t.get("delegateObject"),"tick")}));(0,yX.S6)(i,(function(t,e){var n=t.get("delegateObject").tick,r=l?l(n.name,n,e):n.name,i=(0,yX.CD)({},o,s(r,e,c));t.attr(i)}))}},e.prototype.getTitleAttrs=function(){var t=this.get("title"),e=t.style,n=t.position,r=t.offset,i=t.spacing,o=void 0===i?0:i,a=t.autoRotate,s=e.fontSize,l=.5;"start"===n?l=0:"end"===n&&(l=1);var c=this.getTickPoint(l),u=this.getSidePoint(c,r||o+s/2),h=(0,yX.CD)({x:u.x,y:u.y,text:t.text},e),p=t.rotate,d=p;if((0,yX.UM)(p)&&a){var f=this.getAxisVector(c);d=vZ.Dg(f,[1,0],!0)}if(d){var g=AZ(u,d);h.matrix=g}return h},e.prototype.drawTitle=function(t){var e,n=this.getTitleAttrs(),r=this.addShape(t,{type:"text",id:this.getElementId("title"),name:"axis-title",attrs:n});(null===(e=this.get("title"))||void 0===e?void 0:e.description)&&this.drawDescriptionIcon(t,r,n.matrix)},e.prototype.drawDescriptionIcon=function(t,e,n){var r=this.addGroup(t,{name:"axis-description",id:this.getElementById("description")}),i=e.getBBox(),o=i.maxX,a=i.maxY,s=i.height,l=this.get("title").iconStyle,c=s/2,u=c/6,h=o+4,p=a-s/2,d=[h+c,p-c],f=d[0],g=d[1],m=[f+c,g+c],y=m[0],v=m[1],x=[f,v+c],_=x[0],b=x[1],w=[h,g+c],S=w[0],C=w[1],E=[h+c,p-s/4],k=E[0],M=E[1],T=[k,M+u],I=T[0],P=T[1],O=[I,P+u],A=O[0],D=O[1],R=[A,D+3*c/4],L=R[0],N=R[1];this.addShape(r,{type:"path",id:this.getElementId("title-description-icon"),name:"axis-title-description-icon",attrs:(0,mX.pi)({path:[["M",f,g],["A",c,c,0,0,1,y,v],["A",c,c,0,0,1,_,b],["A",c,c,0,0,1,S,C],["A",c,c,0,0,1,f,g],["M",k,M],["L",I,P],["M",A,D],["L",L,N]],lineWidth:u,matrix:n},l)}),this.addShape(r,{type:"rect",id:this.getElementId("title-description-rect"),name:"axis-title-description-rect",attrs:{x:h,y:p-s/2,width:s,height:s,stroke:"#000",fill:"#000",opacity:0,matrix:n,cursor:"pointer"}})},e.prototype.applyTickStates=function(t,e){if(this.getItemStates(t).length){var n=this.get("tickStates"),r=this.getElementId("label-"+t.id),i=e.findById(r);if(i){var o=LK(t,"label",n);o&&i.attr(o)}var a=this.getElementId("tickline-"+t.id),s=e.findById(a);if(s){var l=LK(t,"tickLine",n);l&&s.attr(l)}}},e.prototype.updateTickStates=function(t){var e=this.getItemStates(t),n=this.get("tickStates"),r=this.get("label"),i=this.getElementByLocalId("label-"+t.id),o=this.get("tickLine"),a=this.getElementByLocalId("tickline-"+t.id);if(e.length){if(i){var s=LK(t,"label",n);s&&i.attr(s)}if(a){var l=LK(t,"tickLine",n);l&&a.attr(l)}}else i&&i.attr(r.style),a&&a.attr(o.style)},e}(tK),FK=NK;function zK(t,e,n,r){var i=e.getChildren(),o=!1;return(0,yX.S6)(i,(function(e){var i=sK(t,e,n,r);o=o||i})),o}function BK(){return jK}function $K(t,e,n){return zK(t,e,n,"head")}function jK(t,e,n){return zK(t,e,n,"tail")}function UK(t,e,n){return zK(t,e,n,"middle")}function VK(t){var e=function(t){var e=t.attr("matrix");return e&&1!==e[0]}(t)?function(t){var e=[0,0,0];return mZ(e,[1,0,0],t),Math.atan2(e[1],e[0])}(t.attr("matrix")):0;return e%360}function HK(t,e,n,r){var i=!1,o=VK(e),a=t?Math.abs(n.attr("y")-e.attr("y")):Math.abs(n.attr("x")-e.attr("x")),s=(t?n.attr("y")>e.attr("y"):n.attr("x")>e.attr("x"))?e.getBBox():n.getBBox();if(t){var l=Math.abs(Math.cos(o));i=VZ(l,0,Math.PI/180)?s.width+r>a:s.height/l+r>a}else{l=Math.abs(Math.sin(o));i=VZ(l,0,Math.PI/180)?s.width+r>a:s.height/l+r>a}return i}function GK(t,e,n,r){var i=(null===r||void 0===r?void 0:r.minGap)||0,o=e.getChildren().slice().filter((function(t){return t.get("visible")}));if(!o.length)return!1;var a=!1;n&&o.reverse();for(var s=o.length,l=o[0],c=1;c<s;c++){var u=o[c];u.getBBox();HK(t,l,u,i)?(u.hide(),a=!0):l=u}return a}function WK(t,e,n){var r=(null===n||void 0===n?void 0:n.minGap)||0,i=e.getChildren().slice();if(i.length<2)return!1;var o=!1,a=i[0],s=a.getBBox(),l=i[1],c=i.length,u=VK(a),h=t?Math.abs(l.attr("y")-a.attr("y")):Math.abs(l.attr("x")-a.attr("x")),p=0;if(t){var d=Math.abs(Math.cos(u));if(VZ(d,0,Math.PI/180))p=(aK(i)+r)/h;else p=(s.height/d+r)/h}else{d=Math.abs(Math.sin(u));if(VZ(d,0,Math.PI/180))p=(aK(i)+r)/h;else p=(s.height/d+r)/h}if(p>1){p=Math.ceil(p);for(var f=0;f<c;f++)f%p!==0&&(i[f].hide(),o=!0)}return o}function XK(){return KK}function qK(t,e,n,r){return GK(t,e,!1,r)}function YK(t,e,n,r){return GK(t,e,!0,r)}function ZK(t,e,n,r){var i=(null===r||void 0===r?void 0:r.minGap)||0,o=e.getChildren().slice();if(o.length<=2)return!1;for(var a=!1,s=o.length,l=o[0],c=o[s-1],u=l,h=1;h<s-1;h++){var p=o[h];p.getBBox();HK(t,u,p,i)?(p.hide(),a=!0):u=p}return HK(t,u,c,i)&&(u.hide(),a=!0),a}function KK(t,e,n,r){var i=WK(t,e,r);return GK(t,e,!1)&&(i=!0),i}function JK(t,e,n,r){var i=e.getChildren().slice(),o=WK(t,e,r);if(i.length>2){var a=i[0],s=i[i.length-1];a.get("visible")||(a.show(),GK(t,e,!1,r)&&(o=!0)),s.get("visible")||(s.show(),GK(t,e,!0,r)&&(o=!0))}return o}function QK(t,e,n,r){var i=e.getChildren();if(!i.length)return!1;if(!t&&i.length<2)return!1;var o=aK(i),a=!1;t?a=!!n&&o>n:a=o>Math.abs(i[1].attr("x")-i[0].attr("x"));a&&function(t,e){(0,yX.S6)(t,(function(t){var n=AZ({x:t.attr("x"),y:t.attr("y")},e);t.attr("matrix",n)}))}(i,r(n,o));return a}function tJ(){return eJ}function eJ(t,e,n,r){return QK(t,e,n,(function(){return(0,yX.hj)(r)?r:t?cK.verticalAxisRotate:cK.horizontalAxisRotate}))}function nJ(t,e,n){return QK(t,e,n,(function(e,n){if(!e)return t?cK.verticalAxisRotate:cK.horizontalAxisRotate;if(t)return-Math.acos(e/n);var r=0;return(e>n||(r=Math.asin(e/n))>Math.PI/4)&&(r=Math.PI/4),r}))}var rJ,iJ=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,mX.pi)((0,mX.pi)({},e),{type:"line",locationType:"region",start:null,end:null})},e.prototype.getLinePath=function(){var t=this.get("start"),e=this.get("end"),n=[];return n.push(["M",t.x,t.y]),n.push(["L",e.x,e.y]),n},e.prototype.getInnerLayoutBBox=function(){var e=this.get("start"),n=this.get("end"),r=t.prototype.getInnerLayoutBBox.call(this),i=Math.min(e.x,n.x,r.x),o=Math.min(e.y,n.y,r.y),a=Math.max(e.x,n.x,r.maxX),s=Math.max(e.y,n.y,r.maxY);return{x:i,y:o,minX:i,minY:o,maxX:a,maxY:s,width:a-i,height:s-o}},e.prototype.isVertical=function(){var t=this.get("start"),e=this.get("end");return(0,yX.vQ)(t.x,e.x)},e.prototype.isHorizontal=function(){var t=this.get("start"),e=this.get("end");return(0,yX.vQ)(t.y,e.y)},e.prototype.getTickPoint=function(t){var e=this.get("start"),n=this.get("end"),r=n.x-e.x,i=n.y-e.y;return{x:e.x+r*t,y:e.y+i*t}},e.prototype.getSideVector=function(t){var e=this.getAxisVector(),n=SZ.Fv([0,0],e),r=this.get("verticalFactor"),i=[n[1],-1*n[0]];return SZ.bA([0,0],i,t*r)},e.prototype.getAxisVector=function(){var t=this.get("start"),e=this.get("end");return[e.x-t.x,e.y-t.y]},e.prototype.processOverlap=function(t){var e=this,n=this.isVertical(),r=this.isHorizontal();if(n||r){var i=this.get("label"),o=this.get("title"),a=this.get("verticalLimitLength"),s=i.offset,l=a,c=0,u=0;o&&(c=o.style.fontSize,u=o.spacing),l&&(l=l-s-u-c);var h=this.get("overlapOrder");if((0,yX.S6)(h,(function(n){i[n]&&e.canProcessOverlap(n)&&e.autoProcessOverlap(n,i[n],t,l)})),o&&(0,yX.UM)(o.offset)){var p=t.getCanvasBBox(),d=n?p.width:p.height;o.offset=s+d+u+c/2}}},e.prototype.canProcessOverlap=function(t){var e=this.get("label");return"autoRotate"!==t||(0,yX.UM)(e.rotate)},e.prototype.autoProcessOverlap=function(t,e,n,r){var i=this,o=this.isVertical(),a=!1,l=s[t];if(!0===e){this.get("label");a=l.getDefault()(o,n,r)}else if((0,yX.mf)(e))a=e(o,n,r);else if((0,yX.Kn)(e)){var c=e;l[c.type]&&(a=l[c.type](o,n,r,c.cfg))}else l[e]&&(a=l[e](o,n,r));if("autoRotate"===t){if(a){var u=n.getChildren(),h=this.get("verticalFactor");(0,yX.S6)(u,(function(t){if("center"===t.attr("textAlign")){var e=h>0?"end":"start";t.attr("textAlign",e)}}))}}else if("autoHide"===t){var p=n.getChildren().slice(0);(0,yX.S6)(p,(function(t){t.get("visible")||(i.get("isRegister")&&i.unregisterElement(t),t.remove())}))}},e}(FK),oJ=iJ,aJ=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,mX.pi)((0,mX.pi)({},e),{type:"circle",locationType:"circle",center:null,radius:null,startAngle:-Math.PI/2,endAngle:3*Math.PI/2})},e.prototype.getLinePath=function(){var t=this.get("center"),e=t.x,n=t.y,r=this.get("radius"),i=r,o=this.get("startAngle"),a=this.get("endAngle"),s=[];if(Math.abs(a-o)===2*Math.PI)s=[["M",e,n-i],["A",r,i,0,1,1,e,n+i],["A",r,i,0,1,1,e,n-i],["Z"]];else{var l=this.getCirclePoint(o),c=this.getCirclePoint(a),u=Math.abs(a-o)>Math.PI?1:0,h=o>a?0:1;s=[["M",e,n],["L",l.x,l.y],["A",r,i,0,u,h,c.x,c.y],["L",e,n]]}return s},e.prototype.getTickPoint=function(t){var e=this.get("startAngle"),n=e+(this.get("endAngle")-e)*t;return this.getCirclePoint(n)},e.prototype.getSideVector=function(t,e){var n=this.get("center"),r=[e.x-n.x,e.y-n.y],i=this.get("verticalFactor"),o=SZ.kE(r);return SZ.bA(r,r,i*t/o),r},e.prototype.getAxisVector=function(t){var e=this.get("center"),n=[t.x-e.x,t.y-e.y];return[n[1],-1*n[0]]},e.prototype.getCirclePoint=function(t,e){var n=this.get("center");return e=e||this.get("radius"),{x:n.x+Math.cos(t)*e,y:n.y+Math.sin(t)*e}},e.prototype.canProcessOverlap=function(t){var e=this.get("label");return"autoRotate"!==t||(0,yX.UM)(e.rotate)},e.prototype.processOverlap=function(t){var e=this,n=this.get("label"),r=this.get("title"),i=this.get("verticalLimitLength"),o=n.offset,a=i,s=0,l=0;r&&(s=r.style.fontSize,l=r.spacing),a&&(a=a-o-l-s);var c=this.get("overlapOrder");if((0,yX.S6)(c,(function(r){n[r]&&e.canProcessOverlap(r)&&e.autoProcessOverlap(r,n[r],t,a)})),r&&(0,yX.UM)(r.offset)){var u=t.getCanvasBBox().height;r.offset=o+u+l+s/2}},e.prototype.autoProcessOverlap=function(t,e,n,r){var i=this,o=!1,a=s[t];if(r>0)if(!0===e)o=a.getDefault()(!1,n,r);else if((0,yX.mf)(e))o=e(!1,n,r);else if((0,yX.Kn)(e)){var l=e;a[l.type]&&(o=a[l.type](!1,n,r,l.cfg))}else a[e]&&(o=a[e](!1,n,r));if("autoRotate"===t){if(o){var c=n.getChildren(),u=this.get("verticalFactor");(0,yX.S6)(c,(function(t){if("center"===t.attr("textAlign")){var e=u>0?"end":"start";t.attr("textAlign",e)}}))}}else if("autoHide"===t){var h=n.getChildren().slice(0);(0,yX.S6)(h,(function(t){t.get("visible")||(i.get("isRegister")&&i.unregisterElement(t),t.remove())}))}},e}(FK),sJ=aJ,lJ=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,mX.pi)((0,mX.pi)({},e),{name:"crosshair",type:"base",line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:cK.lineColor}},text:{position:"start",offset:10,autoRotate:!1,content:null,style:{fill:cK.textColor,textAlign:"center",textBaseline:"middle",fontFamily:cK.fontFamily}},textBackground:{padding:5,style:{stroke:cK.lineColor}}}})},e.prototype.renderInner=function(t){this.get("line")&&this.renderLine(t),this.get("text")&&(this.renderText(t),this.renderBackground(t))},e.prototype.renderText=function(t){var e=this.get("text"),n=e.style,r=e.autoRotate,i=e.content;if(!(0,yX.UM)(i)){var o=this.getTextPoint(),a=null;if(r)a=AZ(o,this.getRotateAngle());this.addShape(t,{type:"text",name:"crosshair-text",id:this.getElementId("text"),attrs:(0,mX.pi)((0,mX.pi)((0,mX.pi)({},o),{text:i,matrix:a}),n)})}},e.prototype.renderLine=function(t){var e=this.getLinePath(),n=this.get("line").style;this.addShape(t,{type:"path",name:"crosshair-line",id:this.getElementId("line"),attrs:(0,mX.pi)({path:e},n)})},e.prototype.renderBackground=function(t){var e=this.getElementId("text"),n=t.findById(e),r=this.get("textBackground");if(r&&n){var i=n.getBBox(),o=FZ(r.padding),a=r.style;this.addShape(t,{type:"rect",name:"crosshair-text-background",id:this.getElementId("text-background"),attrs:(0,mX.pi)({x:i.x-o[3],y:i.y-o[0],width:i.width+o[1]+o[3],height:i.height+o[0]+o[2],matrix:n.attr("matrix")},a)}).toBack()}},e}(tK),cJ=lJ,uJ=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,mX.pi)((0,mX.pi)({},e),{type:"line",locationType:"region",start:null,end:null})},e.prototype.getRotateAngle=function(){var t=this.getLocation(),e=t.start,n=t.end,r=this.get("text").position,i=Math.atan2(n.y-e.y,n.x-e.x);return"start"===r?i-Math.PI/2:i+Math.PI/2},e.prototype.getTextPoint=function(){var t=this.getLocation(),e=t.start,n=t.end,r=this.get("text");return WZ(e,n,r.position,r.offset)},e.prototype.getLinePath=function(){var t=this.getLocation(),e=t.start,n=t.end;return[["M",e.x,e.y],["L",n.x,n.y]]},e}(cJ),hJ=uJ,pJ=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,mX.pi)((0,mX.pi)({},e),{type:"circle",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:3*Math.PI/2})},e.prototype.getRotateAngle=function(){var t=this.getLocation(),e=t.startAngle,n=t.endAngle;return"start"===this.get("text").position?e+Math.PI/2:n-Math.PI/2},e.prototype.getTextPoint=function(){var t=this.get("text"),e=t.position,n=t.offset,r=this.getLocation(),i=r.center,o=r.radius,a=r.startAngle,s=r.endAngle,l="start"===e?a:s,c=this.getRotateAngle()-Math.PI,u=UZ(i,o,l),h=Math.cos(c)*n,p=Math.sin(c)*n;return{x:u.x+h,y:u.y+p}},e.prototype.getLinePath=function(){var t=this.getLocation(),e=t.center,n=t.radius,r=t.startAngle,i=t.endAngle,o=null;if(i-r===2*Math.PI){var a=e.x,s=e.y;o=[["M",a,s-n],["A",n,n,0,1,1,a,s+n],["A",n,n,0,1,1,a,s-n],["Z"]]}else{var l=UZ(e,n,r),c=UZ(e,n,i),u=Math.abs(i-r)>Math.PI?1:0,h=r>i?0:1;o=[["M",l.x,l.y],["A",n,n,0,u,h,c.x,c.y]]}return o},e}(cJ),dJ=pJ,fJ="g2-crosshair",gJ=fJ+"-line",mJ=fJ+"-text",yJ=((rJ={})[""+fJ]={position:"relative"},rJ[""+gJ]={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)"},rJ[""+mJ]={position:"absolute",color:cK.textColor,fontFamily:cK.fontFamily},rJ),vJ=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,mX.pi)((0,mX.pi)({},e),{name:"crosshair",type:"html",locationType:"region",start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:'<div class="'+fJ+'"></div>',crosshairTpl:'<div class="'+gJ+'"></div>',textTpl:'<span class="'+mJ+'">{content}</span>',domStyles:null,containerClassName:fJ,defaultStyles:yJ,defaultCfg:{text:{position:"start",content:null,align:"center",offset:10}}})},e.prototype.render=function(){this.resetText(),this.resetPosition()},e.prototype.initCrossHair=function(){var t=this.getContainer(),e=DX(this.get("crosshairTpl"));t.appendChild(e),this.applyStyle(gJ,e),this.set("crosshairEl",e)},e.prototype.getTextPoint=function(){var t=this.getLocation(),e=t.start,n=t.end,r=this.get("text");return WZ(e,n,r.position,r.offset)},e.prototype.resetText=function(){var t=this.get("text"),e=this.get("textEl");if(t){var n=t.content;if(!e){var r=this.getContainer();e=DX((0,yX.ng)(this.get("textTpl"),t)),r.appendChild(e),this.applyStyle(mJ,e),this.set("textEl",e)}e.innerHTML=n}else e&&e.remove()},e.prototype.isVertical=function(t,e){return t.x===e.x},e.prototype.resetPosition=function(){var t=this.get("crosshairEl");t||(this.initCrossHair(),t=this.get("crosshairEl"));var e=this.get("start"),n=this.get("end"),r=Math.min(e.x,n.x),i=Math.min(e.y,n.y);this.isVertical(e,n)?RX(t,{width:"1px",height:GZ(Math.abs(n.y-e.y))}):RX(t,{height:"1px",width:GZ(Math.abs(n.x-e.x))}),RX(t,{top:GZ(i),left:GZ(r)}),this.alignText()},e.prototype.alignText=function(){var t=this.get("textEl");if(t){var e=this.get("text").align,n=t.clientWidth,r=this.getTextPoint();switch(e){case"center":r.x=r.x-n/2;break;case"right":r.x=r.x-n}RX(t,{top:GZ(r.y),left:GZ(r.x)})}},e.prototype.updateInner=function(e){(0,yX.wH)(e,"text")&&this.resetText(),t.prototype.updateInner.call(this,e)},e}(AK),xJ=vJ,_J=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,mX.pi)((0,mX.pi)({},e),{name:"grid",line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:"line",style:{lineWidth:1,stroke:cK.lineColor}}}})},e.prototype.getLineType=function(){return(this.get("line")||this.get("defaultCfg").line).type},e.prototype.renderInner=function(t){this.drawGrid(t)},e.prototype.getAlternatePath=function(t,e){var n=this.getGridPath(t),r=e.slice(0).reverse(),i=this.getGridPath(r,!0);return this.get("closed")?n=n.concat(i):(i[0][0]="L",(n=n.concat(i)).push(["Z"])),n},e.prototype.getPathStyle=function(){return this.get("line").style},e.prototype.drawGrid=function(t){var e=this,n=this.get("line"),r=this.get("items"),i=this.get("alternateColor"),o=null;(0,yX.S6)(r,(function(a,s){var l=a.id||s;if(n){var c=e.getPathStyle();c=(0,yX.mf)(c)?c(a,s,r):c;var u=e.getElementId("line-"+l),h=e.getGridPath(a.points);e.addShape(t,{type:"path",name:"grid-line",id:u,attrs:(0,yX.CD)({path:h},c)})}if(i&&s>0){var p=e.getElementId("region-"+l),d=s%2===0;if((0,yX.HD)(i))d&&e.drawAlternateRegion(p,t,o.points,a.points,i);else{var f=d?i[1]:i[0];e.drawAlternateRegion(p,t,o.points,a.points,f)}}o=a}))},e.prototype.drawAlternateRegion=function(t,e,n,r,i){var o=this.getAlternatePath(n,r);this.addShape(e,{type:"path",id:t,name:"grid-region",attrs:{path:o,fill:i}})},e}(tK),bJ=_J;var wJ,SJ=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,mX.pi)((0,mX.pi)({},e),{type:"circle",center:null,closed:!0})},e.prototype.getGridPath=function(t,e){var n=this.getLineType(),r=this.get("closed"),i=[];if(t.length)if("circle"===n){var o=this.get("center"),a=t[0],s=function(t,e,n,r){var i=n-t,o=r-e;return Math.sqrt(i*i+o*o)}(o.x,o.y,a.x,a.y),l=e?0:1;r?(i.push(["M",o.x,o.y-s]),i.push(["A",s,s,0,0,l,o.x,o.y+s]),i.push(["A",s,s,0,0,l,o.x,o.y-s]),i.push(["Z"])):(0,yX.S6)(t,(function(t,e){0===e?i.push(["M",t.x,t.y]):i.push(["A",s,s,0,0,l,t.x,t.y])}))}else(0,yX.S6)(t,(function(t,e){0===e?i.push(["M",t.x,t.y]):i.push(["L",t.x,t.y])})),r&&i.push(["Z"]);return i},e}(bJ),CJ=SJ,EJ=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,mX.pi)((0,mX.pi)({},e),{type:"line"})},e.prototype.getGridPath=function(t){var e=[];return(0,yX.S6)(t,(function(t,n){0===n?e.push(["M",t.x,t.y]):e.push(["L",t.x,t.y])})),e},e}(bJ),kJ=EJ,MJ=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,mX.pi)((0,mX.pi)({},e),{name:"legend",layout:"horizontal",locationType:"point",x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},e.prototype.getLayoutBBox=function(){var e=t.prototype.getLayoutBBox.call(this),n=this.get("maxWidth"),r=this.get("maxHeight"),i=e.width,o=e.height;return n&&(i=Math.min(i,n)),r&&(o=Math.min(o,r)),$Z(e.minX,e.minY,i,o)},e.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetLocation()},e.prototype.resetLocation=function(){var t=this.get("x"),e=this.get("y"),n=this.get("offsetX"),r=this.get("offsetY");this.moveElementTo(this.get("group"),{x:t+n,y:e+r})},e.prototype.applyOffset=function(){this.resetLocation()},e.prototype.getDrawPoint=function(){return this.get("currentPoint")},e.prototype.setDrawPoint=function(t){return this.set("currentPoint",t)},e.prototype.renderInner=function(t){this.resetDraw(),this.get("title")&&this.drawTitle(t),this.drawLegendContent(t),this.get("background")&&this.drawBackground(t)},e.prototype.drawBackground=function(t){var e=this.get("background"),n=t.getBBox(),r=FZ(e.padding),i=(0,mX.pi)({x:0,y:0,width:n.width+r[1]+r[3],height:n.height+r[0]+r[2]},e.style);this.addShape(t,{type:"rect",id:this.getElementId("background"),name:"legend-background",attrs:i}).toBack()},e.prototype.drawTitle=function(t){var e=this.get("currentPoint"),n=this.get("title"),r=n.spacing,i=n.style,o=n.text,a=this.addShape(t,{type:"text",id:this.getElementId("title"),name:"legend-title",attrs:(0,mX.pi)({text:o,x:e.x,y:e.y},i)}).getBBox();this.set("currentPoint",{x:e.x,y:a.maxY+r})},e.prototype.resetDraw=function(){var t=this.get("background"),e={x:0,y:0};if(t){var n=FZ(t.padding);e.x=n[3],e.y=n[0]}this.set("currentPoint",e)},e}(tK),TJ=MJ,IJ={marker:{style:{inactiveFill:"#000",inactiveOpacity:.45,fill:"#000",opacity:1,size:12}},text:{style:{fill:"#ccc",fontSize:12}}},PJ={fill:cK.textColor,fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:cK.fontFamily,fontWeight:"normal",lineHeight:12},OJ="navigation-arrow-right",AJ="navigation-arrow-left",DJ={right:90*Math.PI/180,left:270*Math.PI/180,up:0,down:180*Math.PI/180},RJ=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentPageIndex=1,e.totalPagesCnt=1,e.pageWidth=0,e.pageHeight=0,e.startX=0,e.startY=0,e.onNavigationBack=function(){var t=e.getElementByLocalId("item-group");if(e.currentPageIndex>1){e.currentPageIndex-=1,e.updateNavigation();var n=e.getCurrentNavigationMatrix();e.get("animate")?t.animate({matrix:n},100):t.attr({matrix:n})}},e.onNavigationAfter=function(){var t=e.getElementByLocalId("item-group");if(e.currentPageIndex<e.totalPagesCnt){e.currentPageIndex+=1,e.updateNavigation();var n=e.getCurrentNavigationMatrix();e.get("animate")?t.animate({matrix:n},100):t.attr({matrix:n})}},e}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,mX.pi)((0,mX.pi)({},e),{name:"legend",type:"category",itemSpacing:24,itemMarginBottom:8,maxItemWidth:null,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},radio:null,items:[],itemStates:{},itemBackground:{},pageNavigator:{},defaultCfg:{title:{spacing:5,style:{fill:cK.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}},background:{padding:5,style:{stroke:cK.lineColor}},itemBackground:{style:{opacity:0,fill:"#fff"}},pageNavigator:IJ,itemName:{spacing:16,style:PJ},marker:{spacing:8,style:{r:6,symbol:"circle"}},itemValue:{alignRight:!1,formatter:null,style:PJ,spacing:6},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:cK.uncheckedColor},markerStyle:{fill:cK.uncheckedColor,stroke:cK.uncheckedColor}},inactive:{nameStyle:{fill:cK.uncheckedColor},markerStyle:{opacity:.2}}}}})},e.prototype.isList=function(){return!0},e.prototype.getItems=function(){return this.get("items")},e.prototype.setItems=function(t){this.update({items:t})},e.prototype.updateItem=function(t,e){(0,yX.CD)(t,e),this.clear(),this.render()},e.prototype.clearItems=function(){var t=this.getElementByLocalId("item-group");t&&t.clear()},e.prototype.setItemState=function(t,e,n){t[e]=n;var r=this.getElementByLocalId("item-"+t.id);if(r){var i=this.getItems().indexOf(t),o=this.createOffScreenGroup(),a=this.drawItem(t,i,this.getItemHeight(),o);this.updateElements(a,r),this.clearUpdateStatus(r)}},e.prototype.hasState=function(t,e){return!!t[e]},e.prototype.getItemStates=function(t){var e=this.get("itemStates"),n=[];return(0,yX.S6)(e,(function(e,r){t[r]&&n.push(r)})),n},e.prototype.clearItemsState=function(t){var e=this,n=this.getItemsByState(t);(0,yX.S6)(n,(function(n){e.setItemState(n,t,!1)}))},e.prototype.getItemsByState=function(t){var e=this,n=this.getItems();return(0,yX.hX)(n,(function(n){return e.hasState(n,t)}))},e.prototype.drawLegendContent=function(t){this.processItems(),this.drawItems(t)},e.prototype.processItems=function(){var t=this.get("items");(0,yX.S6)(t,(function(t){t.id||(t.id=t.name)}))},e.prototype.drawItems=function(t){var e=this,n=this.addGroup(t,{id:this.getElementId("item-container-group"),name:"legend-item-container-group"}),r=this.addGroup(n,{id:this.getElementId("item-group"),name:"legend-item-group"}),i=this.getItemHeight(),o=this.get("itemWidth"),a=this.get("itemSpacing"),s=this.get("itemMarginBottom"),l=this.get("currentPoint"),c=l.x,u=l.y,h=this.get("layout"),p=this.get("items"),d=!1,f=0,g=this.get("maxWidth"),m=this.get("maxHeight");(0,yX.S6)(p,(function(t,n){var p=e.drawItem(t,n,i,r),y=p.getBBox(),v=o||y.width;v>f&&(f=v),"horizontal"===h?(g&&g<l.x+v-c&&(d=!0,l.x=c,l.y+=i+s),e.moveElementTo(p,l),l.x+=v+a):(m&&m<l.y+i+s-u&&(d=!0,l.x+=f+a,l.y=u,f=0),e.moveElementTo(p,l),l.y+=i+s)})),d&&this.get("flipPage")&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=c,this.startY=u,this.adjustNavigation(t,r))},e.prototype.getItemHeight=function(){var t=this.get("itemHeight");if(!t){var e=(this.get("itemName")||{}).style;if((0,yX.mf)(e)){var n=this.getItems();n.forEach((function(r,i){var o=(0,mX.pi)((0,mX.pi)({},PJ),e(r,i,n)).fontSize;t<o&&(t=o)}))}else e&&(t=e.fontSize)}return t},e.prototype.drawMarker=function(t,e,n,r){var i=(0,mX.pi)((0,mX.pi)((0,mX.pi)({x:0,y:r/2},e.style),{symbol:(0,yX.U2)(n.marker,"symbol","circle")}),(0,yX.U2)(n.marker,"style",{})),o=this.addShape(t,{type:"marker",id:this.getElementId("item-"+n.id+"-marker"),name:"legend-item-marker",attrs:i}),a=o.getBBox();o.attr("x",a.width/2);var s=o.attr(),l=s.stroke,c=s.fill;return l&&o.set("isStroke",!0),c&&o.set("isFill",!0),o},e.prototype.drawItemText=function(t,e,n,r,i,o,a){var s=n.formatter,l=n.style,c=(0,mX.pi)((0,mX.pi)({x:o,y:i/2,text:s?s(r[e],r,a):r[e]},PJ),(0,yX.mf)(l)?l(r,a,this.getItems()):l);return this.addShape(t,{type:"text",id:this.getElementId("item-"+r.id+"-"+e),name:"legend-item-"+e,attrs:c})},e.prototype.drawRadio=function(t,e,n,r,i){var o,a,s=e.style||{},l=null!==(o=s.r)&&void 0!==o?o:r/2,c=3.6*l/8,u=[i+l,r/2-l],h=u[0],p=u[1],d=[h+l,p+l],f=d[0],g=d[1],m=[h,g+l],y=m[0],v=m[1],x=[i,p+l],_=x[0],b=x[1],w=n.showRadio,S=(0,mX.pi)((0,mX.pi)({path:[["M",h,p],["A",l,l,0,0,1,f,g],["L",f-c,g],["L",f,g],["A",l,l,0,0,1,y,v],["L",y,v-c],["L",y,v],["A",l,l,0,0,1,_,b],["L",_+c,b],["L",_,b],["A",l,l,0,0,1,h,p],["L",h,p+c]],stroke:"#000000",fill:"#ffffff"},s),{opacity:w?null!==(a=null===s||void 0===s?void 0:s.opacity)&&void 0!==a?a:.45:0}),C=this.addShape(t,{type:"path",id:this.getElementId("item-"+n.id+"-radio"),name:"legend-item-radio",attrs:S});return C.set("tip",e.tip),C},e.prototype.drawItem=function(t,e,n,r){var i="item-"+t.id,o=this.addGroup(r,{name:"legend-item-container",id:this.getElementId("item-container-"+i),delegateObject:{item:t,index:e}}),a=this.addGroup(o,{name:"legend-item",id:this.getElementId(i),delegateObject:{item:t,index:e}}),s=this.get("marker"),l=this.get("itemName"),c=this.get("itemValue"),u=this.get("itemBackground"),h=this.get("radio"),p=this.getLimitItemWidth(),d=0;if(s){var f=this.drawMarker(a,s,t,n),g=s.spacing,m=(0,yX.U2)(t,["marker","spacing"]);(0,yX.hj)(m)&&(g=m),d=f.getBBox().maxX+g}if(l){var y=this.drawItemText(a,"name",l,t,n,d,e);p&&sK(!0,y,(0,yX.uZ)(p-d,0,p)),d=y.getBBox().maxX+l.spacing}if(c){var v=this.drawItemText(a,"value",c,t,n,d,e);p&&(c.alignRight?(v.attr({textAlign:"right",x:p}),sK(!0,v,(0,yX.uZ)(p-d,0,p),"head")):sK(!0,v,(0,yX.uZ)(p-d,0,p))),d=v.getBBox().maxX+c.spacing}if(h&&this.drawRadio(a,h,t,n,d),u){var x=a.getBBox();this.addShape(a,{type:"rect",name:"legend-item-background",id:this.getElementId(i+"-background"),attrs:(0,mX.pi)({x:0,y:0,width:x.width,height:n},u.style)}).toBack()}return this.applyItemStates(t,a),a},e.prototype.adjustNavigation=function(t,e){var n=this,r=this.startX,i=this.startY,o=this.get("layout"),a=e.findAll((function(t){return"legend-item"===t.get("name")})),s=this.get("maxWidth"),l=this.get("maxHeight"),c=this.get("itemWidth"),u=this.get("itemSpacing"),h=this.getItemHeight(),p=(0,yX.b$)({},IJ,this.get("pageNavigator")),d=this.drawNavigation(t,o,"00/00",p),f=d.getBBox(),g={x:r,y:i},m=1,y=0,v=0,x=0,_=this.get("itemMarginBottom");if("horizontal"===o){var b=this.get("maxRow")||1,w=h+(1===b?0:_),S=s-u-f.width-f.minX;this.pageHeight=w*b,this.pageWidth=S,(0,yX.S6)(a,(function(t){var e=t.getBBox(),i=c||e.width;(y&&y<g.x+i+u||function(t,e){var n=t.getBBox(),r=c||n.width;return e.x+r+u+f.width>s}(t,g))&&(1===m&&(y=g.x+u,n.moveElementTo(d,{x:S,y:g.y+h/2-f.height/2-f.minY})),m+=1,g.x=r,g.y+=w),n.moveElementTo(t,g),t.getParent().setClip({type:"rect",attrs:{x:g.x,y:g.y,width:i+u,height:h}}),g.x+=i+u}))}else{(0,yX.S6)(a,(function(t){var e=t.getBBox();e.width>v&&(v=e.width)})),x=v,v+=u,s&&(v=Math.min(s,v),x=Math.min(s,x)),this.pageWidth=v,this.pageHeight=l-Math.max(f.height,h+_);var C=Math.floor(this.pageHeight/(h+_));(0,yX.S6)(a,(function(t,e){0!==e&&e%C===0&&(m+=1,g.x+=v,g.y=i),n.moveElementTo(t,g),t.getParent().setClip({type:"rect",attrs:{x:g.x,y:g.y,width:v,height:h}}),g.y+=h+_})),this.totalPagesCnt=m,this.moveElementTo(d,{x:r+x/2-f.width/2-f.minX,y:l-f.height-f.minY})}this.pageHeight&&this.pageWidth&&e.getParent().setClip({type:"rect",attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),"horizontal"===o&&this.get("maxRow")?this.totalPagesCnt=Math.ceil(m/this.get("maxRow")):this.totalPagesCnt=m,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(d),e.attr("matrix",this.getCurrentNavigationMatrix())},e.prototype.drawNavigation=function(t,e,n,r){var i={x:0,y:0},o=this.addGroup(t,{id:this.getElementId("navigation-group"),name:"legend-navigation"}),a=(0,yX.U2)(r.marker,"style",{}),s=a.size,l=void 0===s?12:s,c=(0,mX._T)(a,["size"]),u=this.drawArrow(o,i,AJ,"horizontal"===e?"up":"left",l,c);u.on("click",this.onNavigationBack);var h=u.getBBox();i.x+=h.width+2;var p=this.addShape(o,{type:"text",id:this.getElementId("navigation-text"),name:"navigation-text",attrs:(0,mX.pi)({x:i.x,y:i.y+l/2,text:n,textBaseline:"middle"},(0,yX.U2)(r.text,"style"))}).getBBox();return i.x+=p.width+2,this.drawArrow(o,i,OJ,"horizontal"===e?"down":"right",l,c).on("click",this.onNavigationAfter),o},e.prototype.updateNavigation=function(t){var e=(0,yX.b$)({},IJ,this.get("pageNavigator")).marker.style,n=e.fill,r=e.opacity,i=e.inactiveFill,o=e.inactiveOpacity,a=this.currentPageIndex+"/"+this.totalPagesCnt,s=t?t.getChildren()[1]:this.getElementByLocalId("navigation-text"),l=t?t.findById(this.getElementId(AJ)):this.getElementByLocalId(AJ),c=t?t.findById(this.getElementId(OJ)):this.getElementByLocalId(OJ);s.attr("text",a),l.attr("opacity",1===this.currentPageIndex?o:r),l.attr("fill",1===this.currentPageIndex?i:n),l.attr("cursor",1===this.currentPageIndex?"not-allowed":"pointer"),c.attr("opacity",this.currentPageIndex===this.totalPagesCnt?o:r),c.attr("fill",this.currentPageIndex===this.totalPagesCnt?i:n),c.attr("cursor",this.currentPageIndex===this.totalPagesCnt?"not-allowed":"pointer");var u=l.getBBox().maxX+2;s.attr("x",u),u+=s.getBBox().width+2,this.updateArrowPath(c,{x:u,y:0})},e.prototype.drawArrow=function(t,e,n,r,i,o){var a=e.x,s=e.y,l=this.addShape(t,{type:"path",id:this.getElementId(n),name:n,attrs:(0,mX.pi)({size:i,direction:r,path:[["M",a+i/2,s],["L",a,s+i],["L",a+i,s+i],["Z"]],cursor:"pointer"},o)});return l.attr("matrix",AZ({x:a+i/2,y:s+i/2},DJ[r])),l},e.prototype.updateArrowPath=function(t,e){var n=e.x,r=e.y,i=t.attr(),o=i.size,a=i.direction,s=AZ({x:n+o/2,y:r+o/2},DJ[a]);t.attr("path",[["M",n+o/2,r],["L",n,r+o],["L",n+o,r+o],["Z"]]),t.attr("matrix",s)},e.prototype.getCurrentNavigationMatrix=function(){var t=this,e=t.currentPageIndex,n=t.pageWidth,r=t.pageHeight;return DZ("horizontal"===this.get("layout")?{x:0,y:r*(1-e)}:{x:n*(1-e),y:0})},e.prototype.applyItemStates=function(t,e){if(this.getItemStates(t).length>0){var n=e.getChildren(),r=this.get("itemStates");(0,yX.S6)(n,(function(e){var n=e.get("name").split("-")[2],i=LK(t,n,r);i&&(e.attr(i),"marker"!==n||e.get("isStroke")&&e.get("isFill")||(e.get("isStroke")&&e.attr("fill",null),e.get("isFill")&&e.attr("stroke",null)))}))}},e.prototype.getLimitItemWidth=function(){var t=this.get("itemWidth"),e=this.get("maxItemWidth");return e?t&&(e=t<=e?t:e):t&&(e=t),e},e}(TJ),LJ=RJ,NJ=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,mX.pi)((0,mX.pi)({},e),{type:"continue",min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:"rail",spacing:5,formatter:null,style:{fontSize:12,fill:cK.textColor,textBaseline:"middle",fontFamily:cK.fontFamily}},handler:{size:10,style:{fill:"#fff",stroke:"#333"}},track:{},rail:{type:"color",size:20,defaultLength:100,style:{fill:"#DCDEE2"}},title:{spacing:5,style:{fill:cK.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}}}})},e.prototype.isSlider=function(){return!0},e.prototype.getValue=function(){return this.getCurrentValue()},e.prototype.getRange=function(){return{min:this.get("min"),max:this.get("max")}},e.prototype.setRange=function(t,e){this.update({min:t,max:e})},e.prototype.setValue=function(t){var e=this.getValue();this.set("value",t);var n=this.get("group");this.resetTrackClip(),this.get("slidable")&&this.resetHandlers(n),this.delegateEmit("valuechanged",{originValue:e,value:t})},e.prototype.initEvent=function(){var t=this.get("group");this.bindSliderEvent(t),this.bindRailEvent(t),this.bindTrackEvent(t)},e.prototype.drawLegendContent=function(t){this.drawRail(t),this.drawLabels(t),this.fixedElements(t),this.resetTrack(t),this.resetTrackClip(t),this.get("slidable")&&this.resetHandlers(t)},e.prototype.bindSliderEvent=function(t){this.bindHandlersEvent(t)},e.prototype.bindHandlersEvent=function(t){var e=this;t.on("legend-handler-min:drag",(function(t){var n=e.getValueByCanvasPoint(t.x,t.y),r=e.getCurrentValue()[1];r<n&&(r=n),e.setValue([n,r])})),t.on("legend-handler-max:drag",(function(t){var n=e.getValueByCanvasPoint(t.x,t.y),r=e.getCurrentValue()[0];r>n&&(r=n),e.setValue([r,n])}))},e.prototype.bindRailEvent=function(t){},e.prototype.bindTrackEvent=function(t){var e=this,n=null;t.on("legend-track:dragstart",(function(t){n={x:t.x,y:t.y}})),t.on("legend-track:drag",(function(t){if(n){var r=e.getValueByCanvasPoint(n.x,n.y),i=e.getValueByCanvasPoint(t.x,t.y),o=e.getCurrentValue(),a=o[1]-o[0],s=e.getRange(),l=i-r;l<0?o[0]+l>s.min?e.setValue([o[0]+l,o[1]+l]):e.setValue([s.min,s.min+a]):l>0&&(l>0&&o[1]+l<s.max?e.setValue([o[0]+l,o[1]+l]):e.setValue([s.max-a,s.max])),n={x:t.x,y:t.y}}})),t.on("legend-track:dragend",(function(t){n=null}))},e.prototype.drawLabels=function(t){this.drawLabel("min",t),this.drawLabel("max",t)},e.prototype.drawLabel=function(t,e){var n=this.get("label"),r=n.style,i=n.align,o=n.formatter,a=this.get(t),s=this.getLabelAlignAttrs(t,i),l="label-"+t;this.addShape(e,{type:"text",id:this.getElementId(l),name:"legend-label-"+t,attrs:(0,mX.pi)((0,mX.pi)({x:0,y:0,text:(0,yX.mf)(o)?o(a):a},r),s)})},e.prototype.getLabelAlignAttrs=function(t,e){var n="center",r="middle";return this.isVertical()?(n="start",r="rail"!==e?"min"===t?"top":"bottom":"top"):"rail"!==e?(r="top",n="min"===t?"start":"end"):(n="start",r="middle"),{textAlign:n,textBaseline:r}},e.prototype.getRailPath=function(t,e,n,r){var i=this.get("rail"),o=i.size,a=i.defaultLength,s=i.type,l=this.isVertical(),c=n,u=r;c||(c=l?o:a),u||(u=l?a:o);var h=[];return"color"===s?(h.push(["M",t,e]),h.push(["L",t+c,e]),h.push(["L",t+c,e+u]),h.push(["L",t,e+u]),h.push(["Z"])):(h.push(["M",t+c,e]),h.push(["L",t+c,e+u]),h.push(["L",t,e+u]),h.push(["Z"])),h},e.prototype.drawRail=function(t){var e=this.get("rail").style;this.addShape(t,{type:"path",id:this.getElementId("rail"),name:"legend-rail",attrs:(0,mX.pi)({path:this.getRailPath(0,0)},e)})},e.prototype.getTrackColor=function(t){var e,n=t.length;if(!n)return null;if(1===n)return t[0];e=this.isVertical()?"l(90)":"l(0)";for(var r=0;r<n;r++){e+=" "+r/(n-1)+":"+t[r]}return e},e.prototype.getTrackPath=function(t){var e=this.getRailShape(t).attr("path");return(0,yX.d9)(e)},e.prototype.getClipTrackAttrs=function(t){var e,n,r,i,o=this.getCurrentValue(),a=o[0],s=o[1],l=this.getRailBBox(t),c=this.getPointByValue(a,t),u=this.getPointByValue(s,t);return this.isVertical()?(e=l.minX,n=c.y,r=l.width,i=u.y-c.y):(e=c.x,n=l.minY,r=u.x-c.x,i=l.height),{x:e,y:n,width:r,height:i}},e.prototype.getTrackAttrs=function(t){var e=this.get("track"),n=this.get("colors"),r=this.getTrackPath(t);return(0,yX.CD)({path:r,fill:this.getTrackColor(n)},e.style)},e.prototype.resetTrackClip=function(t){var e=t||this.get("group"),n=this.getElementId("track"),r=e.findById(n),i=r.getClip(),o=this.getClipTrackAttrs(t);i?i.attr(o):r.setClip({type:"rect",attrs:o})},e.prototype.resetTrack=function(t){var e=this.getElementId("track"),n=t.findById(e),r=this.getTrackAttrs(t);n?n.attr(r):this.addShape(t,{type:"path",id:e,draggable:this.get("slidable"),name:"legend-track",attrs:r})},e.prototype.getPointByValue=function(t,e){var n=this.getRange(),r=n.min,i=(t-r)/(n.max-r),o=this.getRailBBox(e),a={x:0,y:0};return this.isVertical()?(a.x=o.minX+o.width/2,a.y=jZ(o.minY,o.maxY,i)):(a.x=jZ(o.minX,o.maxX,i),a.y=o.minY+o.height/2),a},e.prototype.getRailShape=function(t){return(t||this.get("group")).findById(this.getElementId("rail"))},e.prototype.getRailBBox=function(t){return this.getRailShape(t).getBBox()},e.prototype.getRailCanvasBBox=function(){return this.get("group").findById(this.getElementId("rail")).getCanvasBBox()},e.prototype.isVertical=function(){return"vertical"===this.get("layout")},e.prototype.getValueByCanvasPoint=function(t,e){var n=this.getRange(),r=n.min,i=n.max,o=this.getRailCanvasBBox(),a=this.isVertical(),s=this.get("step"),l=jZ(r,i,a?(e-o.minY)/o.height:(t-o.minX)/o.width);s&&(l=r+Math.round((l-r)/s)*s);return l>i&&(l=i),l<r&&(l=r),l},e.prototype.getCurrentValue=function(){var t=this.get("value");if(!t){var e=this.get("values");return e?[Math.max(Math.min.apply(Math,(0,mX.pr)(e,[this.get("max")])),this.get("min")),Math.min(Math.max.apply(Math,(0,mX.pr)(e,[this.get("min")])),this.get("max"))]:[this.get("min"),this.get("max")]}return t},e.prototype.resetHandlers=function(t){var e=this.getCurrentValue(),n=e[0],r=e[1];this.resetHandler(t,"min",n),this.resetHandler(t,"max",r)},e.prototype.getHandlerPath=function(t,e){var n=this.isVertical(),r=[],i=t.size,o=e.x,a=e.y,s=1.4*i,l=i/2,c=i/6;if(n){var u=o+.4*s;r.push(["M",o,a]),r.push(["L",u,a+l]),r.push(["L",o+s,a+l]),r.push(["L",o+s,a-l]),r.push(["L",u,a-l]),r.push(["Z"]),r.push(["M",u,a+c]),r.push(["L",o+s-2,a+c]),r.push(["M",u,a-c]),r.push(["L",o+s-2,a-c])}else{var h=a+.4*s;r.push(["M",o,a]),r.push(["L",o-l,h]),r.push(["L",o-l,a+s]),r.push(["L",o+l,a+s]),r.push(["L",o+l,h]),r.push(["Z"]),r.push(["M",o-c,h]),r.push(["L",o-c,a+s-2]),r.push(["M",o+c,h]),r.push(["L",o+c,a+s-2])}return r},e.prototype.resetHandler=function(t,e,n){var r=this.getPointByValue(n,t),i=this.get("handler"),o=this.getHandlerPath(i,r),a=this.getElementId("handler-"+e),s=t.findById(a),l=this.isVertical();s?s.attr("path",o):this.addShape(t,{type:"path",name:"legend-handler-"+e,draggable:!0,id:a,attrs:(0,mX.pi)((0,mX.pi)({path:o},i.style),{cursor:l?"ns-resize":"ew-resize"})})},e.prototype.fixedElements=function(t){var e=t.findById(this.getElementId("rail")),n=t.findById(this.getElementId("label-min")),r=t.findById(this.getElementId("label-max")),i=this.getDrawPoint();this.isVertical()?this.fixedVertail(n,r,e,i):this.fixedHorizontal(n,r,e,i)},e.prototype.fitRailLength=function(t,e,n,r){var i=this.isVertical()?"height":"width",o=this.get("label"),a=o.align,s=o.spacing,l=this.get("max"+(0,yX.jC)(i));if(l){var c=("rail"===a?n[i]+t[i]+e[i]+2*s:n[i])-l;c>0&&this.changeRailLength(r,i,n[i]-c)}},e.prototype.changeRailLength=function(t,e,n){var r,i=t.getBBox();r="height"===e?this.getRailPath(i.x,i.y,i.width,n):this.getRailPath(i.x,i.y,n,i.height),t.attr("path",r)},e.prototype.changeRailPosition=function(t,e,n){var r=t.getBBox(),i=this.getRailPath(e,n,r.width,r.height);t.attr("path",i)},e.prototype.fixedHorizontal=function(t,e,n,r){var i=this.get("label"),o=i.align,a=i.spacing,s=n.getBBox(),l=t.getBBox(),c=e.getBBox(),u=s.height;this.fitRailLength(l,c,s,n),s=n.getBBox(),"rail"===o?(t.attr({x:r.x,y:r.y+u/2}),this.changeRailPosition(n,r.x+l.width+a,r.y),e.attr({x:r.x+l.width+s.width+2*a,y:r.y+u/2})):"top"===o?(t.attr({x:r.x,y:r.y}),e.attr({x:r.x+s.width,y:r.y}),this.changeRailPosition(n,r.x,r.y+l.height+a)):(this.changeRailPosition(n,r.x,r.y),t.attr({x:r.x,y:r.y+s.height+a}),e.attr({x:r.x+s.width,y:r.y+s.height+a}))},e.prototype.fixedVertail=function(t,e,n,r){var i=this.get("label"),o=i.align,a=i.spacing,s=n.getBBox(),l=t.getBBox(),c=e.getBBox();if(this.fitRailLength(l,c,s,n),s=n.getBBox(),"rail"===o)t.attr({x:r.x,y:r.y}),this.changeRailPosition(n,r.x,r.y+l.height+a),e.attr({x:r.x,y:r.y+l.height+s.height+2*a});else if("right"===o)t.attr({x:r.x+s.width+a,y:r.y}),this.changeRailPosition(n,r.x,r.y),e.attr({x:r.x+s.width+a,y:r.y+s.height});else{var u=Math.max(l.width,c.width);t.attr({x:r.x,y:r.y}),this.changeRailPosition(n,r.x+u+a,r.y),e.attr({x:r.x,y:r.y+s.height})}},e}(TJ),FJ=NJ,zJ="g2-tooltip",BJ="g2-tooltip-title",$J="g2-tooltip-list",jJ="g2-tooltip-list-item",UJ="g2-tooltip-marker",VJ="g2-tooltip-value",HJ="g2-tooltip-name",GJ="g2-tooltip-crosshair-x",WJ="g2-tooltip-crosshair-y",XJ=((wJ={})[""+zJ]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:cK.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},wJ[""+BJ]={marginBottom:"4px"},wJ[""+$J]={margin:"0px",listStyleType:"none",padding:"0px"},wJ[""+jJ]={listStyleType:"none",marginBottom:"4px"},wJ[""+UJ]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},wJ[""+VJ]={display:"inline-block",float:"right",marginLeft:"30px"},wJ[""+GJ]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},wJ[""+WJ]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},wJ);var qJ=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,mX.pi)((0,mX.pi)({},e),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="'+zJ+'"><div class="'+BJ+'"></div><ul class="'+$J+'"></ul></div>',itemTpl:'<li class="'+jJ+'" data-index={index}>\n          <span class="'+UJ+'" style="background:{color}"></span>\n          <span class="'+HJ+'">{name}</span>:\n          <span class="'+VJ+'">{value}</span>\n        </li>',xCrosshairTpl:'<div class="'+GJ+'"></div>',yCrosshairTpl:'<div class="'+WJ+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:zJ,crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:XJ})},e.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},e.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},e.prototype.show=function(){var t=this.getContainer();t&&!this.destroyed&&(this.set("visible",!0),RX(t,{visibility:"visible"}),this.setCrossHairsVisible(!0))},e.prototype.hide=function(){var t=this.getContainer();t&&!this.destroyed&&(this.set("visible",!1),RX(t,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},e.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},e.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetPosition()},e.prototype.setCrossHairsVisible=function(t){var e=t?"":"none",n=this.get("xCrosshairDom"),r=this.get("yCrosshairDom");n&&RX(n,{display:e}),r&&RX(r,{display:e})},e.prototype.initContainer=function(){if(t.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var e=this.getHtmlContentNode();this.get("parent").appendChild(e),this.set("container",e),this.resetStyles(),this.applyStyles()}},e.prototype.updateInner=function(e){this.get("customContent")?this.renderCustomContent():(function(t,e){var n=!1;return(0,yX.S6)(e,(function(e){if((0,yX.wH)(t,e))return n=!0,!1})),n}(e,["title","showTitle"])&&this.resetTitle(),(0,yX.wH)(e,"items")&&this.renderItems()),t.prototype.updateInner.call(this,e)},e.prototype.initDom=function(){this.cacheDoms()},e.prototype.removeDom=function(){t.prototype.removeDom.call(this),this.clearCrosshairs()},e.prototype.resetPosition=function(){var t,e=this.get("x"),n=this.get("y"),r=this.get("offset"),i=this.getOffset(),o=i.offsetX,a=i.offsetY,s=this.get("position"),l=this.get("region"),c=this.getContainer(),u=this.getBBox(),h=u.width,p=u.height;l&&(t=BZ(l));var d=function(t,e,n,r,i,o,a){var s=function(t,e,n,r,i,o){var a=t,s=e;switch(o){case"left":a=t-r-n,s=e-i/2;break;case"right":a=t+n,s=e-i/2;break;case"top":a=t-r/2,s=e-i-n;break;case"bottom":a=t-r/2,s=e+n;break;default:a=t+n,s=e-i-n}return{x:a,y:s}}(t,e,n,r,i,o);if(a){var l=function(t,e,n,r,i){return{left:t<i.x,right:t+n>i.x+i.width,top:e<i.y,bottom:e+r>i.y+i.height}}(s.x,s.y,r,i,a);"auto"===o?(l.right&&(s.x=Math.max(0,t-r-n)),l.top&&(s.y=Math.max(0,e-i-n))):"top"===o||"bottom"===o?(l.left&&(s.x=a.x),l.right&&(s.x=a.x+a.width-r),"top"===o&&l.top&&(s.y=e+n),"bottom"===o&&l.bottom&&(s.y=e-i-n)):(l.top&&(s.y=a.y),l.bottom&&(s.y=a.y+a.height-i),"left"===o&&l.left&&(s.x=t+n),"right"===o&&l.right&&(s.x=t-r-n))}return s}(e,n,r,h,p,s,t);RX(c,{left:GZ(d.x+o),top:GZ(d.y+a)}),this.resetCrosshairs()},e.prototype.renderCustomContent=function(){var t=this.getHtmlContentNode(),e=this.get("parent"),n=this.get("container");n&&n.parentNode===e?e.replaceChild(t,n):e.appendChild(t),this.set("container",t),this.resetStyles(),this.applyStyles()},e.prototype.getHtmlContentNode=function(){var t,e=this.get("customContent");if(e){var n=e(this.get("title"),this.get("items"));t=(0,yX.kK)(n)?n:DX(n)}return t},e.prototype.cacheDoms=function(){var t=this.getContainer(),e=t.getElementsByClassName(BJ)[0],n=t.getElementsByClassName($J)[0];this.set("titleDom",e),this.set("listDom",n)},e.prototype.resetTitle=function(){var t=this.get("title");this.get("showTitle")&&t?this.setTitle(t):this.setTitle("")},e.prototype.setTitle=function(t){var e=this.get("titleDom");e&&(e.innerText=t)},e.prototype.resetCrosshairs=function(){var t=this.get("crosshairsRegion"),e=this.get("crosshairs");if(t&&e){var n=BZ(t),r=this.get("xCrosshairDom"),i=this.get("yCrosshairDom");"x"===e?(this.resetCrosshair("x",n),i&&(i.remove(),this.set("yCrosshairDom",null))):"y"===e?(this.resetCrosshair("y",n),r&&(r.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",n),this.resetCrosshair("y",n)),this.setCrossHairsVisible(this.get("visible"))}else this.clearCrosshairs()},e.prototype.resetCrosshair=function(t,e){var n=this.checkCrosshair(t),r=this.get(t);RX(n,"x"===t?{left:GZ(r),top:GZ(e.y),height:GZ(e.height)}:{top:GZ(r),left:GZ(e.x),width:GZ(e.width)})},e.prototype.checkCrosshair=function(t){var e=t+"CrosshairDom",n=t+"CrosshairTpl",r="CROSSHAIR_"+t.toUpperCase(),i=c[r],o=this.get(e),a=this.get("parent");return o||(o=DX(this.get(n)),this.applyStyle(i,o),a.appendChild(o),this.set(e,o)),o},e.prototype.renderItems=function(){this.clearItemDoms();var t=this.get("items"),e=this.get("itemTpl"),n=this.get("listDom");n&&((0,yX.S6)(t,(function(t){var r=yq.toCSSGradient(t.color),i=(0,mX.pi)((0,mX.pi)({},t),{color:r}),o=DX((0,yX.ng)(e,i));n.appendChild(o)})),this.applyChildrenStyles(n,this.get("domStyles")))},e.prototype.clearItemDoms=function(){this.get("listDom")&&zZ(this.get("listDom"))},e.prototype.clearCrosshairs=function(){var t=this.get("xCrosshairDom"),e=this.get("yCrosshairDom");t&&t.remove(),e&&e.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},e}(AK),YJ=qJ,ZJ={opacity:0},KJ={stroke:"#C5C5C5",strokeOpacity:.85},JJ={fill:"#CACED4",opacity:.85};var QJ=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=[[0,0],[1,1]]);for(var r=!!e,i=[],o=0,a=t.length;o<a;o+=2)i.push([t[o],t[o+1]]);var s,l,c,u=function(t,e,n,r){var i,o,a,s,l,c,u,h=[],p=!!r;if(p){a=r[0],s=r[1];for(var d=0,f=t.length;d<f;d+=1){var g=t[d];a=SZ.VV([0,0],a,g),s=SZ.Fp([0,0],s,g)}}d=0;for(var m=t.length;d<m;d+=1)if(g=t[d],0!==d||n)if(d!==m-1||n){i=t[[d?d-1:m-1,d-1][n?0:1]],o=t[n?(d+1)%m:d+1];var y=[0,0];y=SZ.lu(y,o,i),y=SZ.bA(y,y,e);var v=SZ.TE(g,i),x=SZ.TE(g,o),_=v+x;0!==_&&(v/=_,x/=_);var b=SZ.bA([0,0],y,-v),w=SZ.bA([0,0],y,x);c=SZ.IH([0,0],g,b),l=SZ.IH([0,0],g,w),l=SZ.VV([0,0],l,SZ.Fp([0,0],o,g)),l=SZ.Fp([0,0],l,SZ.VV([0,0],o,g)),b=SZ.lu([0,0],l,g),b=SZ.bA([0,0],b,-v/x),c=SZ.IH([0,0],g,b),c=SZ.VV([0,0],c,SZ.Fp([0,0],i,g)),c=SZ.Fp([0,0],c,SZ.VV([0,0],i,g)),w=SZ.lu([0,0],g,c),w=SZ.bA([0,0],w,x/v),l=SZ.IH([0,0],g,w),p&&(c=SZ.Fp([0,0],c,a),c=SZ.VV([0,0],c,s),l=SZ.Fp([0,0],l,a),l=SZ.VV([0,0],l,s)),h.push(u),h.push(c),u=l}else c=g,h.push(u),h.push(c);else u=g;return n&&h.push(h.shift()),h}(i,.4,r,n),h=i.length,p=[];for(o=0;o<h-1;o+=1)s=u[2*o],l=u[2*o+1],c=i[o+1],p.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]]);return r&&(s=u[h],l=u[h+1],c=i[0],p.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]])),p};var tQ="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029";new RegExp("([a-z])["+tQ+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+tQ+"]*,?["+tQ+"]*)+)","ig"),new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+tQ+"]*,?["+tQ+"]*","ig");Math.PI;function eQ(t){return function(t){return(0,yX.UI)(t,(function(t,e){return[0===e?"M":"L",t[0],t[1]]}))}(t)}function nQ(t,e,n,r){void 0===r&&(r=!0);var i=new wY({values:t}),o=new Oq({values:(0,yX.UI)(t,(function(t,e){return e}))}),a=(0,yX.UI)(t,(function(t,r){return[o.scale(r)*e,n-i.scale(t)*n]}));return r?function(t){if(t.length<=2)return eQ(t);var e=[];(0,yX.S6)(t,(function(t){(0,yX.Xy)(t,e.slice(e.length-2))||e.push(t[0],t[1])}));var n=QJ(e,!1),r=(0,yX.YM)(t),i=r[0],o=r[1];return n.unshift(["M",i,o]),n}(a):eQ(a)}function rQ(t,e,n,r){var i=(0,mX.pr)(t),o=function(t,e){var n=new wY({values:t}),r=n.max<0?n.max:Math.max(0,n.min);return e-n.scale(r)*e}(r,n);return i.push(["L",e,o]),i.push(["L",0,o]),i.push(["Z"]),i}var iQ=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,mX.pi)((0,mX.pi)({},e),{name:"trend",x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:ZJ,lineStyle:KJ,areaStyle:JJ})},e.prototype.renderInner=function(t){var e=this.cfg,n=e.width,r=e.height,i=e.data,o=e.smooth,a=e.isArea,s=e.backgroundStyle,l=e.lineStyle,c=e.areaStyle;this.addShape(t,{id:this.getElementId("background"),type:"rect",attrs:(0,mX.pi)({x:0,y:0,width:n,height:r},s)});var u=nQ(i,n,r,o);if(this.addShape(t,{id:this.getElementId("line"),type:"path",attrs:(0,mX.pi)({path:u},l)}),a){var h=rQ(u,n,r,i);this.addShape(t,{id:this.getElementId("area"),type:"path",attrs:(0,mX.pi)({path:h},c)})}},e.prototype.applyOffset=function(){var t=this.cfg,e=t.x,n=t.y;this.moveElementTo(this.get("group"),{x:e,y:n})},e}(tK),oQ={fill:"#F7F7F7",stroke:"#BFBFBF",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#FFF"},aQ=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,mX.pi)((0,mX.pi)({},e),{name:"handler",x:0,y:0,width:10,height:24,style:oQ})},e.prototype.renderInner=function(t){var e=this.cfg,n=e.width,r=e.height,i=e.style,o=i.fill,a=i.stroke,s=i.radius,l=i.opacity,c=i.cursor;this.addShape(t,{type:"rect",id:this.getElementId("background"),attrs:{x:0,y:0,width:n,height:r,fill:o,stroke:a,radius:s,opacity:l,cursor:c}});var u=1/3*n,h=2/3*n,p=1/4*r,d=3/4*r;this.addShape(t,{id:this.getElementId("line-left"),type:"line",attrs:{x1:u,y1:p,x2:u,y2:d,stroke:a,cursor:c}}),this.addShape(t,{id:this.getElementId("line-right"),type:"line",attrs:{x1:h,y1:p,x2:h,y2:d,stroke:a,cursor:c}})},e.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},e.prototype.initEvent=function(){this.bindEvents()},e.prototype.bindEvents=function(){var t=this;this.get("group").on("mouseenter",(function(){var e=t.get("style").highLightFill;t.getElementByLocalId("background").attr("fill",e),t.draw()})),this.get("group").on("mouseleave",(function(){var e=t.get("style").fill;t.getElementByLocalId("background").attr("fill",e),t.draw()}))},e.prototype.draw=function(){var t=this.get("container").get("canvas");t&&t.draw()},e}(tK),sQ={fill:"#416180",opacity:.05},lQ={fill:"#5B8FF9",opacity:.15,cursor:"move"},cQ={width:10,height:24},uQ={textBaseline:"middle",fill:"#000",opacity:.45},hQ=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onMouseDown=function(t){return function(n){e.currentTarget=t;var r=n.originalEvent;r.stopPropagation(),r.preventDefault(),e.prevX=(0,yX.U2)(r,"touches.0.pageX",r.pageX),e.prevY=(0,yX.U2)(r,"touches.0.pageY",r.pageY);var i=e.getContainerDOM();i.addEventListener("mousemove",e.onMouseMove),i.addEventListener("mouseup",e.onMouseUp),i.addEventListener("mouseleave",e.onMouseUp),i.addEventListener("touchmove",e.onMouseMove),i.addEventListener("touchend",e.onMouseUp),i.addEventListener("touchcancel",e.onMouseUp)}},e.onMouseMove=function(t){var n=e.cfg.width,r=[e.get("start"),e.get("end")];t.stopPropagation(),t.preventDefault();var i=(0,yX.U2)(t,"touches.0.pageX",t.pageX),o=(0,yX.U2)(t,"touches.0.pageY",t.pageY),a=i-e.prevX,s=e.adjustOffsetRange(a/n);e.updateStartEnd(s),e.updateUI(e.getElementByLocalId("foreground"),e.getElementByLocalId("minText"),e.getElementByLocalId("maxText")),e.prevX=i,e.prevY=o,e.draw(),e.emit("sliderchange",[e.get("start"),e.get("end")].sort()),e.delegateEmit("valuechanged",{originValue:r,value:[e.get("start"),e.get("end")]})},e.onMouseUp=function(){e.currentTarget&&(e.currentTarget=void 0);var t=e.getContainerDOM();t&&(t.removeEventListener("mousemove",e.onMouseMove),t.removeEventListener("mouseup",e.onMouseUp),t.removeEventListener("mouseleave",e.onMouseUp),t.removeEventListener("touchmove",e.onMouseMove),t.removeEventListener("touchend",e.onMouseUp),t.removeEventListener("touchcancel",e.onMouseUp))},e}return(0,mX.ZT)(e,t),e.prototype.setRange=function(t,e){this.set("minLimit",t),this.set("maxLimit",e);var n=this.get("start"),r=this.get("end"),i=(0,yX.uZ)(n,t,e),o=(0,yX.uZ)(r,t,e);this.get("isInit")||n===i&&r===o||this.setValue([i,o])},e.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},e.prototype.setValue=function(t){var e=this.getRange();if((0,yX.kJ)(t)&&2===t.length){var n=[this.get("start"),this.get("end")];this.update({start:(0,yX.uZ)(t[0],e.min,e.max),end:(0,yX.uZ)(t[1],e.min,e.max)}),this.get("updateAutoRender")||this.render(),this.delegateEmit("valuechanged",{originValue:n,value:t})}},e.prototype.getValue=function(){return[this.get("start"),this.get("end")]},e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,mX.pi)((0,mX.pi)({},e),{name:"slider",x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:sQ,foregroundStyle:lQ,handlerStyle:cQ,textStyle:uQ}})},e.prototype.update=function(e){var n=e.start,r=e.end,i=(0,mX.pi)({},e);(0,yX.UM)(n)||(i.start=(0,yX.uZ)(n,0,1)),(0,yX.UM)(r)||(i.end=(0,yX.uZ)(r,0,1)),t.prototype.update.call(this,i),this.minHandler=this.getChildComponentById(this.getElementId("minHandler")),this.maxHandler=this.getChildComponentById(this.getElementId("maxHandler")),this.trend=this.getChildComponentById(this.getElementId("trend"))},e.prototype.init=function(){this.set("start",(0,yX.uZ)(this.get("start"),0,1)),this.set("end",(0,yX.uZ)(this.get("end"),0,1)),t.prototype.init.call(this)},e.prototype.render=function(){t.prototype.render.call(this),this.updateUI(this.getElementByLocalId("foreground"),this.getElementByLocalId("minText"),this.getElementByLocalId("maxText"))},e.prototype.renderInner=function(t){var e=this.cfg,n=(e.start,e.end,e.width),r=e.height,i=e.trendCfg,o=void 0===i?{}:i,a=e.minText,s=e.maxText,l=e.backgroundStyle,c=void 0===l?{}:l,u=e.foregroundStyle,h=void 0===u?{}:u,p=e.textStyle,d=void 0===p?{}:p,f=(0,yX.b$)({},oQ,this.cfg.handlerStyle);(0,yX.dp)((0,yX.U2)(o,"data"))&&(this.trend=this.addComponent(t,(0,mX.pi)({component:iQ,id:this.getElementId("trend"),x:0,y:0,width:n,height:r},o))),this.addShape(t,{id:this.getElementId("background"),type:"rect",attrs:(0,mX.pi)({x:0,y:0,width:n,height:r},c)});this.addShape(t,{id:this.getElementId("minText"),type:"text",attrs:(0,mX.pi)({y:r/2,textAlign:"right",text:a,silent:!1},d)}),this.addShape(t,{id:this.getElementId("maxText"),type:"text",attrs:(0,mX.pi)({y:r/2,textAlign:"left",text:s,silent:!1},d)}),this.addShape(t,{id:this.getElementId("foreground"),name:"foreground",type:"rect",attrs:(0,mX.pi)({y:0,height:r},h)});var g=(0,yX.U2)(f,"width",10),m=(0,yX.U2)(f,"height",24);this.minHandler=this.addComponent(t,{component:aQ,id:this.getElementId("minHandler"),name:"handler-min",x:0,y:(r-m)/2,width:g,height:m,cursor:"ew-resize",style:f}),this.maxHandler=this.addComponent(t,{component:aQ,id:this.getElementId("maxHandler"),name:"handler-max",x:0,y:(r-m)/2,width:g,height:m,cursor:"ew-resize",style:f})},e.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},e.prototype.initEvent=function(){this.bindEvents()},e.prototype.updateUI=function(t,e,n){var r=this.cfg,i=r.start,o=r.end,a=r.width,s=r.minText,l=r.maxText,c=r.handlerStyle,u=r.height,h=i*a,p=o*a;this.trend&&(this.trend.update({width:a,height:u}),this.get("updateAutoRender")||this.trend.render()),t.attr("x",h),t.attr("width",p-h);var d=(0,yX.U2)(c,"width",10);e.attr("text",s),n.attr("text",l);var f=this._dodgeText([h,p],e,n),g=f[0],m=f[1];this.minHandler&&(this.minHandler.update({x:h-d/2}),this.get("updateAutoRender")||this.minHandler.render()),(0,yX.S6)(g,(function(t,n){return e.attr(n,t)})),this.maxHandler&&(this.maxHandler.update({x:p-d/2}),this.get("updateAutoRender")||this.maxHandler.render()),(0,yX.S6)(m,(function(t,e){return n.attr(e,t)}))},e.prototype.bindEvents=function(){var t=this.get("group");t.on("handler-min:mousedown",this.onMouseDown("minHandler")),t.on("handler-min:touchstart",this.onMouseDown("minHandler")),t.on("handler-max:mousedown",this.onMouseDown("maxHandler")),t.on("handler-max:touchstart",this.onMouseDown("maxHandler"));var e=t.findById(this.getElementId("foreground"));e.on("mousedown",this.onMouseDown("foreground")),e.on("touchstart",this.onMouseDown("foreground"))},e.prototype.adjustOffsetRange=function(t){var e=this.cfg,n=e.start,r=e.end;switch(this.currentTarget){case"minHandler":var i=0-n,o=1-n;return Math.min(o,Math.max(i,t));case"maxHandler":i=0-r,o=1-r;return Math.min(o,Math.max(i,t));case"foreground":i=0-n,o=1-r;return Math.min(o,Math.max(i,t))}},e.prototype.updateStartEnd=function(t){var e=this.cfg,n=e.start,r=e.end;switch(this.currentTarget){case"minHandler":n+=t;break;case"maxHandler":r+=t;break;case"foreground":n+=t,r+=t}this.set("start",n),this.set("end",r)},e.prototype._dodgeText=function(t,e,n){var r,i,o=this.cfg,a=o.handlerStyle,s=o.width,l=(0,yX.U2)(a,"width",10),c=t[0],u=t[1],h=!1;c>u&&(c=(r=[u,c])[0],u=r[1],e=(i=[n,e])[0],n=i[1],h=!0);var p=e.getBBox(),d=n.getBBox(),f=p.width>c-2?{x:c+l/2+2,textAlign:"left"}:{x:c-l/2-2,textAlign:"right"},g=d.width>s-u-2?{x:u-l/2-2,textAlign:"right"}:{x:u+l/2+2,textAlign:"left"};return h?[g,f]:[f,g]},e.prototype.draw=function(){var t=this.get("container"),e=t&&t.get("canvas");e&&e.draw()},e.prototype.getContainerDOM=function(){var t=this.get("container"),e=t&&t.get("canvas");return e&&e.get("container")},e}(tK);function pQ(t,e,n){if(t){if("function"===typeof t.addEventListener)return t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}};if("function"===typeof t.attachEvent)return t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}}}var dQ={default:{trackColor:"rgba(0,0,0,0)",thumbColor:"rgba(0,0,0,0.15)",size:8,lineCap:"round"},hover:{thumbColor:"rgba(0,0,0,0.2)"}},fQ=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clearEvents=yX.ZT,e.onStartEvent=function(t){return function(n){e.isMobile=t,n.originalEvent.preventDefault();var r=t?(0,yX.U2)(n.originalEvent,"touches.0.clientX"):n.clientX,i=t?(0,yX.U2)(n.originalEvent,"touches.0.clientY"):n.clientY;e.startPos=e.cfg.isHorizontal?r:i,e.bindLaterEvent()}},e.bindLaterEvent=function(){var t=e.getContainerDOM(),n=[];n=e.isMobile?[pQ(t,"touchmove",e.onMouseMove),pQ(t,"touchend",e.onMouseUp),pQ(t,"touchcancel",e.onMouseUp)]:[pQ(t,"mousemove",e.onMouseMove),pQ(t,"mouseup",e.onMouseUp),pQ(t,"mouseleave",e.onMouseUp)],e.clearEvents=function(){n.forEach((function(t){t.remove()}))}},e.onMouseMove=function(t){var n=e.cfg,r=n.isHorizontal,i=n.thumbOffset;t.preventDefault();var o=e.isMobile?(0,yX.U2)(t,"touches.0.clientX"):t.clientX,a=e.isMobile?(0,yX.U2)(t,"touches.0.clientY"):t.clientY,s=r?o:a,l=s-e.startPos;e.startPos=s,e.updateThumbOffset(i+l)},e.onMouseUp=function(t){t.preventDefault(),e.clearEvents()},e.onTrackClick=function(t){var n=e.cfg,r=n.isHorizontal,i=n.x,o=n.y,a=n.thumbLen,s=e.getContainerDOM().getBoundingClientRect(),l=t.clientX,c=t.clientY,u=r?l-s.left-i-a/2:c-s.top-o-a/2,h=e.validateRange(u);e.updateThumbOffset(h)},e.onThumbMouseOver=function(){var t=e.cfg.theme.hover.thumbColor;e.getElementByLocalId("thumb").attr("stroke",t),e.draw()},e.onThumbMouseOut=function(){var t=e.cfg.theme.default.thumbColor;e.getElementByLocalId("thumb").attr("stroke",t),e.draw()},e}return(0,mX.ZT)(e,t),e.prototype.setRange=function(t,e){this.set("minLimit",t),this.set("maxLimit",e);var n=this.getValue(),r=(0,yX.uZ)(n,t,e);n===r||this.get("isInit")||this.setValue(r)},e.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},e.prototype.setValue=function(t){var e=this.getRange(),n=this.getValue();this.update({thumbOffset:(this.get("trackLen")-this.get("thumbLen"))*(0,yX.uZ)(t,e.min,e.max)}),this.delegateEmit("valuechange",{originalValue:n,value:this.getValue()})},e.prototype.getValue=function(){return(0,yX.uZ)(this.get("thumbOffset")/(this.get("trackLen")-this.get("thumbLen")),0,1)},e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return(0,mX.pi)((0,mX.pi)({},e),{name:"scrollbar",isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:dQ})},e.prototype.renderInner=function(t){this.renderTrackShape(t),this.renderThumbShape(t)},e.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},e.prototype.initEvent=function(){this.bindEvents()},e.prototype.renderTrackShape=function(t){var e=this.cfg,n=e.trackLen,r=e.theme,i=void 0===r?{default:{}}:r,o=(0,yX.b$)({},dQ,i).default,a=o.lineCap,s=o.trackColor,l=o.size,c=(0,yX.U2)(this.cfg,"size",l),u=this.get("isHorizontal")?{x1:0+c/2,y1:c/2,x2:n-c/2,y2:c/2,lineWidth:c,stroke:s,lineCap:a}:{x1:c/2,y1:0+c/2,x2:c/2,y2:n-c/2,lineWidth:c,stroke:s,lineCap:a};return this.addShape(t,{id:this.getElementId("track"),name:"track",type:"line",attrs:u})},e.prototype.renderThumbShape=function(t){var e=this.cfg,n=e.thumbOffset,r=e.thumbLen,i=e.theme,o=(0,yX.b$)({},dQ,i).default,a=o.size,s=o.lineCap,l=o.thumbColor,c=(0,yX.U2)(this.cfg,"size",a),u=this.get("isHorizontal")?{x1:n+c/2,y1:c/2,x2:n+r-c/2,y2:c/2,lineWidth:c,stroke:l,lineCap:s,cursor:"default"}:{x1:c/2,y1:n+c/2,x2:c/2,y2:n+r-c/2,lineWidth:c,stroke:l,lineCap:s,cursor:"default"};return this.addShape(t,{id:this.getElementId("thumb"),name:"thumb",type:"line",attrs:u})},e.prototype.bindEvents=function(){var t=this.get("group");t.on("mousedown",this.onStartEvent(!1)),t.on("mouseup",this.onMouseUp),t.on("touchstart",this.onStartEvent(!0)),t.on("touchend",this.onMouseUp),t.findById(this.getElementId("track")).on("click",this.onTrackClick);var e=t.findById(this.getElementId("thumb"));e.on("mouseover",this.onThumbMouseOver),e.on("mouseout",this.onThumbMouseOut)},e.prototype.getContainerDOM=function(){var t=this.get("container"),e=t&&t.get("canvas");return e&&e.get("container")},e.prototype.validateRange=function(t){var e=this.cfg,n=e.thumbLen,r=e.trackLen,i=t;return t+n>r?i=r-n:t+n<n&&(i=0),i},e.prototype.draw=function(){var t=this.get("container"),e=t&&t.get("canvas");e&&e.draw()},e.prototype.updateThumbOffset=function(t){var e=this.cfg,n=e.thumbOffset,r=e.isHorizontal,i=e.thumbLen,o=e.size,a=this.validateRange(t);if(a!==n){var s=this.getElementByLocalId("thumb");r?s.attr({x1:a+o/2,x2:a+i-o/2}):s.attr({y1:a+o/2,y2:a+i-o/2}),this.emitOffsetChange(a)}},e.prototype.emitOffsetChange=function(t){var e=this.cfg,n=e.thumbOffset,r=e.trackLen,i=e.thumbLen;this.cfg.thumbOffset=t,this.emit("scrollchange",{thumbOffset:t,ratio:(0,yX.uZ)(t/(r-i),0,1)}),this.delegateEmit("valuechange",{originalValue:n,value:t})},e}(tK),gQ=oJ,mQ=sJ,yQ=kJ,vQ=CJ,xQ=LJ,_Q=FJ,bQ=YJ;function wQ(t){return 1===Array.from(new Set(t)).length}function SQ(t){return((0,yX.VV)(t)+(0,yX.Fp)(t))/2}function CQ(t,e,n,r){return{x:t+n*Math.cos(r),y:e+n*Math.sin(r)}}function EQ(t,e,n,r,i,o){void 0===o&&(o=0);var a=CQ(t,e,n,r),s=CQ(t,e,n,i),l=CQ(t,e,o,r),c=CQ(t,e,o,i);if(i-r===2*Math.PI){var u=CQ(t,e,n,r+Math.PI),h=CQ(t,e,o,r+Math.PI),p=[["M",a.x,a.y],["A",n,n,0,1,1,u.x,u.y],["A",n,n,0,1,1,s.x,s.y],["M",l.x,l.y]];return o&&(p.push(["A",o,o,0,1,0,h.x,h.y]),p.push(["A",o,o,0,1,0,c.x,c.y])),p.push(["M",a.x,a.y]),p.push(["Z"]),p}var d=i-r<=Math.PI?0:1,f=[["M",a.x,a.y],["A",n,n,0,d,1,s.x,s.y],["L",c.x,c.y]];return o&&f.push(["A",o,o,0,d,0,l.x,l.y]),f.push(["L",a.x,a.y]),f.push(["Z"]),f}function kQ(t,e,n,r,i){var o=CQ(t,e,n,r),a=CQ(t,e,n,i);if((0,yX.vQ)(i-r,2*Math.PI)){var s=CQ(t,e,n,r+Math.PI);return[["M",o.x,o.y],["A",n,n,0,1,1,s.x,s.y],["A",n,n,0,1,1,o.x,o.y],["A",n,n,0,1,0,s.x,s.y],["A",n,n,0,1,0,o.x,o.y],["Z"]]}var l=i-r<=Math.PI?0:1;return[["M",o.x,o.y],["A",n,n,0,l,1,a.x,a.y]]}function MQ(t,e){var n,r,i=function(t){if((0,yX.xb)(t))return null;var e=t[0].x,n=t[0].x,r=t[0].y,i=t[0].y;return(0,yX.S6)(t,(function(t){e=e>t.x?t.x:e,n=n<t.x?t.x:n,r=r>t.y?t.y:r,i=i<t.y?t.y:i})),{minX:e,maxX:n,minY:r,maxY:i,centerX:(e+n)/2,centerY:(r+i)/2}}(t.points),o=e.startAngle,a=e.endAngle-o;return e.isTransposed?(n=i.maxY*a,r=i.minY*a):(n=i.maxX*a,r=i.minX*a),{startAngle:r+=o,endAngle:n+=o}}function TQ(t,e){var n=t.attr(),r=e.attr();return(0,yX.S6)(n,(function(t,e){void 0===r[e]&&(r[e]=void 0)})),r}function IQ(t,e,n){var r=Math.min(e,n),i=Math.max(e,n);return t>=r&&t<=i}function PQ(t,e){return"object"===typeof t&&e.forEach((function(e){delete t[e]})),t}function OQ(t,e,n){var r,i;void 0===e&&(e=[]),void 0===n&&(n=new Map);try{for(var o=(0,mX.XA)(t),a=o.next();!a.done;a=o.next()){var s=a.value;n.has(s)||(e.push(s),n.set(s,!0))}}catch(l){r={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return e}var AQ=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=t,this.y=e,this.height=r,this.width=n}return t.fromRange=function(e,n,r,i){return new t(e,n,r-e,i-n)},t.fromObject=function(e){return new t(e.minX,e.minY,e.width,e.height)},Object.defineProperty(t.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},t.prototype.contains=function(t){return t.minX>=this.minX&&t.maxX<=this.maxX&&t.minY>=this.minY&&t.maxY<=this.maxY},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.add=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.clone();return(0,yX.S6)(t,(function(t){n.x=Math.min(t.x,n.x),n.y=Math.min(t.y,n.y),n.width=Math.max(t.maxX,n.maxX)-n.x,n.height=Math.max(t.maxY,n.maxY)-n.y})),n},t.prototype.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.clone();return(0,yX.S6)(t,(function(t){n.x=Math.max(t.x,n.x),n.y=Math.max(t.y,n.y),n.width=Math.min(t.maxX,n.maxX)-n.x,n.height=Math.min(t.maxY,n.maxY)-n.y})),n},t.prototype.cut=function(e,n){var r=e.width,i=e.height;switch(n){case dX.TOP:case dX.TOP_LEFT:case dX.TOP_RIGHT:return t.fromRange(this.minX,this.minY+i,this.maxX,this.maxY);case dX.RIGHT:case dX.RIGHT_TOP:case dX.RIGHT_BOTTOM:return t.fromRange(this.minX,this.minY,this.maxX-r,this.maxY);case dX.BOTTOM:case dX.BOTTOM_LEFT:case dX.BOTTOM_RIGHT:return t.fromRange(this.minX,this.minY,this.maxX,this.maxY-i);case dX.LEFT:case dX.LEFT_TOP:case dX.LEFT_BOTTOM:return t.fromRange(this.minX+r,this.minY,this.maxX,this.maxY);default:return this}},t.prototype.shrink=function(e){var n=(0,mX.CR)(e,4),r=n[0],i=n[1],o=n[2],a=n[3];return new t(this.x+a,this.y+r,this.width-a-i,this.height-r-o)},t.prototype.expand=function(e){var n=(0,mX.CR)(e,4),r=n[0],i=n[1],o=n[2],a=n[3];return new t(this.x-a,this.y-r,this.width+a+i,this.height+r+o)},t.prototype.exceed=function(t){return[Math.max(-this.minY+t.minY,0),Math.max(this.maxX-t.maxX,0),Math.max(this.maxY-t.maxY,0),Math.max(-this.minX+t.minX,0)]},t.prototype.collide=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},t.prototype.size=function(){return this.width*this.height},t.prototype.isPointIn=function(t){return t.x>=this.minX&&t.x<=this.maxX&&t.y>=this.minY&&t.y<=this.maxY},t}();function DQ(t){if(t.isPolar&&!t.isTransposed)return(t.endAngle-t.startAngle)*t.getRadius();var e=t.convert({x:0,y:0}),n=t.convert({x:1,y:0});return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function RQ(t,e){var n=t.getCenter();return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function LQ(t,e){var n=t.getCenter();return Math.atan2(e.y-n.y,e.x-n.x)}function NQ(t,e){void 0===e&&(e=0);var n,r=t.start,i=t.end,o=t.getWidth(),a=t.getHeight();if(t.isPolar){var s=t.startAngle,l=t.endAngle,c=t.getCenter(),u=t.getRadius();return{type:"path",startState:{path:EQ(c.x,c.y,u+e,s,s)},endState:function(t){var n=(l-s)*t+s;return{path:EQ(c.x,c.y,u+e,s,n)}},attrs:{path:EQ(c.x,c.y,u+e,s,l)}}}return n=t.isTransposed?{height:a+2*e}:{width:o+2*e},{type:"rect",startState:{x:r.x-e,y:i.y-e,width:t.isTransposed?o+2*e:0,height:t.isTransposed?0:a+2*e},endState:n,attrs:{x:r.x-e,y:i.y-e,width:o+2*e,height:a+2*e}}}var FQ=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function zQ(t,e,n,r){return void 0===e&&(e={}),e.type?e.type:"identity"!==t.type&&IX.includes(n)&&["interval"].includes(r)||t.isCategory?"cat":t.type}function BQ(t,e,n){var r=e||[];if((0,yX.hj)(t)||(0,yX.UM)((0,yX.Wx)(r,t))&&(0,yX.xb)(n))return new(FY("identity"))({field:t.toString(),values:[t]});var i=(0,yX.I)(r,t),o=(0,yX.U2)(n,"type",function(t){var e="linear";return FQ.test(t)?e="timeCat":(0,yX.HD)(t)&&(e="cat"),e}(i[0]));return new(FY(o))((0,mX.pi)({field:t,values:i},n))}function $Q(t){return t.alias||t.field}function jQ(t,e,n){var r,i=t.values.length;if(1===i)r=[.5,1];else{var o=0;r=function(t){if(t.isPolar){var e=t.startAngle;return t.endAngle-e===2*Math.PI}return!1}(e)?e.isTransposed?[(o=1/i*(0,yX.U2)(n,"widthRatio.multiplePie",1/1.3))/2,1-o/2]:[0,1-1/i]:[o=1/i/2,1-o]}return r}function UQ(t){var e=t.values.filter((function(t){return!(0,yX.UM)(t)&&!isNaN(t)}));return Math.max.apply(Math,(0,mX.ev)((0,mX.ev)([],(0,mX.CR)(e),!1),[(0,yX.UM)(t.max)?-1/0:t.max],!1))}function VQ(t,e){var n={start:{x:0,y:0},end:{x:0,y:0}};t.isRect?n=function(t){var e,n;switch(t){case dX.TOP:e={x:0,y:1},n={x:1,y:1};break;case dX.RIGHT:e={x:1,y:0},n={x:1,y:1};break;case dX.BOTTOM:e={x:0,y:0},n={x:1,y:0};break;case dX.LEFT:e={x:0,y:0},n={x:0,y:1};break;default:e=n={x:0,y:0}}return{start:e,end:n}}(e):t.isPolar&&(n=function(t){var e,n;return t.isTransposed?(e={x:0,y:0},n={x:1,y:0}):(e={x:0,y:0},n={x:0,y:1}),{start:e,end:n}}(t));var r=n.start,i=n.end;return{start:t.convert(r),end:t.convert(i)}}function HQ(t){var e=t.start,n=t.end;return e.x===n.x}function GQ(t,e){var n=t.start,r=t.end;return HQ(t)?(n.y-r.y)*(e.x-n.x)>0?1:-1:(r.x-n.x)*(n.y-e.y)>0?-1:1}function WQ(t,e){var n=(0,yX.U2)(t,["components","axis"],{});return(0,yX.b$)({},(0,yX.U2)(n,["common"],{}),(0,yX.b$)({},(0,yX.U2)(n,[e],{})))}function XQ(t,e,n){var r=(0,yX.U2)(t,["components","axis"],{});return(0,yX.b$)({},(0,yX.U2)(r,["common","title"],{}),(0,yX.b$)({},(0,yX.U2)(r,[e,"title"],{})),n)}function qQ(t){var e=t.x,n=t.y,r=t.circleCenter,i=n.start>n.end,o=t.isTransposed?t.convert({x:i?0:1,y:0}):t.convert({x:0,y:i?0:1}),a=[o.x-r.x,o.y-r.y],s=[1,0],l=o.y>r.y?SZ.EU(a,s):-1*SZ.EU(a,s),c=l+(e.end-e.start);return{center:r,radius:Math.sqrt(Math.pow(o.x-r.x,2)+Math.pow(o.y-r.y,2)),startAngle:l,endAngle:c}}function YQ(t,e){return(0,yX.jn)(t)?!1!==t&&{}:(0,yX.U2)(t,[e])}function ZQ(t,e){return(0,yX.U2)(t,"position",e)}function KQ(t,e){return(0,yX.U2)(e,["title","text"],$Q(t))}var JQ=function(){function t(t,e){this.destroyed=!1,this.facets=[],this.view=t,this.cfg=(0,yX.b$)({},this.getDefaultCfg(),e)}return t.prototype.init=function(){this.container||(this.container=this.createContainer());var t=this.view.getData();this.facets=this.generateFacets(t)},t.prototype.render=function(){this.renderViews()},t.prototype.update=function(){},t.prototype.clear=function(){this.clearFacetViews()},t.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},t.prototype.facetToView=function(t){var e=t.region,n=t.data,r=t.padding,i=void 0===r?this.cfg.padding:r,o=this.view.createView({region:e,padding:i});o.data(n||[]),t.view=o,this.beforeEachView(o,t);var a=this.cfg.eachView;return a&&a(o,t),this.afterEachView(o,t),o},t.prototype.createContainer=function(){return this.view.getLayer(pX.FORE).addGroup()},t.prototype.renderViews=function(){this.createFacetViews()},t.prototype.createFacetViews=function(){var t=this;return this.facets.map((function(e){return t.facetToView(e)}))},t.prototype.clearFacetViews=function(){var t=this;(0,yX.S6)(this.facets,(function(e){e.view&&(t.view.removeView(e.view),e.view=void 0)}))},t.prototype.parseSpacing=function(){var t=this.view.viewBBox,e=t.width,n=t.height;return this.cfg.spacing.map((function(t,r){return(0,yX.hj)(t)?t/(0===r?e:n):parseFloat(t)/100}))},t.prototype.getFieldValues=function(t,e){var n=[],r={};return(0,yX.S6)(t,(function(t){var i=t[e];(0,yX.UM)(i)||r[i]||(n.push(i),r[i]=!0)})),n},t.prototype.getRegion=function(t,e,n,r){var i=(0,mX.CR)(this.parseSpacing(),2),o=i[0],a=i[1],s=(1+o)/(0===e?1:e)-o,l=(1+a)/(0===t?1:t)-a,c={x:(s+o)*n,y:(l+a)*r};return{start:c,end:{x:c.x+s,y:c.y+l}}},t.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,spacing:[0,0],padding:10,fields:[]}},t.prototype.getDefaultTitleCfg=function(){return{style:{fontSize:14,fill:"#666",fontFamily:this.view.getTheme().fontFamily}}},t.prototype.processAxis=function(t,e){var n=t.getOptions(),r=n.coordinate,i=t.geometries;if("rect"===(0,yX.U2)(r,"type","rect")&&i.length){(0,yX.UM)(n.axes)&&(n.axes={});var o=n.axes,a=(0,mX.CR)(i[0].getXYFields(),2),s=a[0],l=a[1],c=YQ(o,s),u=YQ(o,l);!1!==c&&(n.axes[s]=this.getXAxisOption(s,o,c,e)),!1!==u&&(n.axes[l]=this.getYAxisOption(l,o,u,e))}},t.prototype.getFacetDataFilter=function(t){return function(e){return(0,yX.yW)(t,(function(t){var n=t.field,r=t.value;return!(!(0,yX.UM)(r)&&n)||e[n]===r}))}},t}(),QQ={},t0=function(t,e){QQ[(0,yX.vl)(t)]=e},e0=function(){function t(t,e){this.context=t,this.cfg=e,t.addAction(this)}return t.prototype.applyCfg=function(t){(0,yX.f0)(this,t)},t.prototype.init=function(){this.applyCfg(this.cfg)},t.prototype.destroy=function(){this.context.removeAction(this),this.context=null},t}(),n0=e0,r0=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.execute=function(){this.callback&&this.callback(this.context)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.callback=null},e}(n0),i0=r0,o0={};function a0(t){var e=o0[t];return(0,yX.U2)(e,"ActionClass")}function s0(t,e,n){o0[t]={ActionClass:e,cfg:n}}function l0(t,e){var n=new i0(e);return n.callback=t,n.name="callback",n}function c0(t,e){for(var n=[t[0]],r=1,i=t.length;r<i;r+=2){var o=e.convert({x:t[r],y:t[r+1]});n.push(o.x,o.y)}return n}function u0(t,e){var n=e.isTransposed,r=t[1],i=t[6],o=t[7],a=e.convert({x:i,y:o});return["A",r,r,0,0,n?0:1,a.x,a.y]}var h0=function(t,e,n,r){var i,o,a,s,l,c,u,h,p=[],d=!!r;if(d){s=(i=(0,mX.CR)(r,2))[0],l=i[1];for(var f=0,g=t.length;f<g;f++){var m=t[f];s=SZ.VV([0,0],s,m),l=SZ.Fp([0,0],l,m)}}f=0;for(var y=t.length;f<y;f++){m=t[f];if(0!==f||n)if(f!==y-1||n){o=t[n?f?f-1:y-1:f-1],a=t[n?(f+1)%y:f+1];var v=[0,0];v=SZ.lu(v,a,o),v=SZ.bA(v,v,e);var x=SZ.TE(m,o),_=SZ.TE(m,a),b=x+_;0!==b&&(x/=b,_/=b);var w=SZ.bA([0,0],v,-x),S=SZ.bA([0,0],v,_);u=SZ.IH([0,0],m,w),c=SZ.IH([0,0],m,S),c=SZ.VV([0,0],c,SZ.Fp([0,0],a,m)),c=SZ.Fp([0,0],c,SZ.VV([0,0],a,m)),w=SZ.lu([0,0],c,m),w=SZ.bA([0,0],w,-x/_),u=SZ.IH([0,0],m,w),u=SZ.VV([0,0],u,SZ.Fp([0,0],o,m)),u=SZ.Fp([0,0],u,SZ.VV([0,0],o,m)),S=SZ.lu([0,0],m,u),S=SZ.bA([0,0],S,_/x),c=SZ.IH([0,0],m,S),d&&(u=SZ.Fp([0,0],u,s),u=SZ.VV([0,0],u,l),c=SZ.Fp([0,0],c,s),c=SZ.VV([0,0],c,l)),p.push(h),p.push(u),h=c}else u=m,p.push(h),p.push(u);else h=m}return n&&p.push(p.shift()),p};function p0(t,e,n){for(var r=!!e,i=[],o=0,a=t.length;o<a;o+=2)i.push([t[o],t[o+1]]);var s,l,c,u=h0(i,.4,r,n),h=i.length,p=[];for(o=0;o<h-1;o++)s=u[2*o],l=u[2*o+1],c=i[o+1],p.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]]);return r&&(s=u[h],l=u[h+1],c=i[0],p.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]])),p}function d0(t,e){return function(t,e){var n=[];if(t.length){n.push(["M",t[0].x,t[0].y]);for(var r=1,i=t.length;r<i;r+=1){var o=t[r];n.push(["L",o.x,o.y])}e&&n.push(["Z"])}return n}(t,e)}function f0(t,e,n){var r=[],i=t[0],o=null;if(t.length<=2)return d0(t,e);for(var a=0,s=t.length;a<s;a++){var l=t[a];o&&o.x===l.x&&o.y===l.y||(r.push(l.x),r.push(l.y),o=l)}var c=p0(r,e,n||[[0,0],[1,1]]);return c.unshift(["M",i.x,i.y]),c}function g0(t,e){var n,r,i,o=[];return(0,yX.S6)(e,(function(a,s){switch(a[0].toLowerCase()){case"m":case"c":case"q":o.push(c0(a,t));break;case"l":n=e[s-1],r=a,i=t.isTransposed,(i?n[n.length-2]===r[1]:n[n.length-1]===r[2])?o=o.concat(function(t,e,n){var r=n.isTransposed,i=n.startAngle,o=n.endAngle,a="a"===t[0].toLowerCase()?{x:t[6],y:t[7]}:{x:t[1],y:t[2]},s={x:e[1],y:e[2]},l=[],c=r?"y":"x",u=Math.abs(s[c]-a[c])*(o-i),h=s[c]>=a[c]?1:0,p=u>Math.PI?1:0,d=n.convert(s),f=RQ(n,d);if(f>=.5)if(u===2*Math.PI){var g={x:(s.x+a.x)/2,y:(s.y+a.y)/2},m=n.convert(g);l.push(["A",f,f,0,p,h,m.x,m.y]),l.push(["A",f,f,0,p,h,d.x,d.y])}else l.push(["A",f,f,0,p,h,d.x,d.y]);return l}(n,r,t)):o.push(c0(a,t));break;case"a":o.push(u0(a,t));break;default:o.push(a)}})),function(t){(0,yX.S6)(t,(function(e,n){if("a"===e[0].toLowerCase()){var r=t[n-1],i=t[n+1];i&&"a"===i[0].toLowerCase()?r&&"l"===r[0].toLowerCase()&&(r[0]="M"):r&&"a"===r[0].toLowerCase()&&i&&"l"===i[0].toLowerCase()&&(i[0]="M")}}))}(o),o}var m0="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",y0=new RegExp("([a-z])["+m0+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+m0+"]*,?["+m0+"]*)+)","ig"),v0=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+m0+"]*,?["+m0+"]*","ig");Math.PI;var x0=1e-6;function _0(t){return Math.abs(t)<x0?0:t<0?-1:1}function b0(t,e,n){return(n[0]-t[0])*(e[1]-t[1])===(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}function w0(t,e,n){var r=!1,i=t.length;if(i<=2)return!1;for(var o=0;o<i;o++){var a=t[o],s=t[(o+1)%i];if(b0(a,s,[e,n]))return!0;_0(a[1]-n)>0!==_0(s[1]-n)>0&&_0(e-(n-a[1])*(a[0]-s[0])/(a[1]-s[1])-a[0])<0&&(r=!r)}return r}var S0=function(t,e,n){return t>=e&&t<=n};function C0(t){for(var e=[],n=t.length,r=0;r<n-1;r++){var i=t[r],o=t[r+1];e.push({from:{x:i[0],y:i[1]},to:{x:o[0],y:o[1]}})}if(e.length>1){var a=t[0],s=t[n-1];e.push({from:{x:s[0],y:s[1]},to:{x:a[0],y:a[1]}})}return e}function E0(t,e){var n=!1;return(0,yX.S6)(t,(function(t){if(function(t,e,n,r){var i=n.x-t.x,o=n.y-t.y,a=e.x-t.x,s=e.y-t.y,l=r.x-n.x,c=r.y-n.y,u=a*c-s*l,h=null;if(u*u>.001*(a*a+s*s)*(l*l+c*c)){var p=(i*c-o*l)/u,d=(i*s-o*a)/u;S0(p,0,1)&&S0(d,0,1)&&(h={x:t.x+p*a,y:t.y+p*s})}return h}(t.from,t.to,e.from,e.to))return n=!0,!1})),n}function k0(t){var e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]}));return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,n),maxY:Math.max.apply(null,n)}}function M0(t,e){return I0(t.event.target,e)}function T0(t,e){var n=t.getCanvasBBox(),r=n.width,i=n.height;return r>0&&i>0&&(r>=e||i>=e)}function I0(t,e){var n=t.getCanvasBBox();return T0(t,e)?n:null}function P0(t,e){return t.event.maskShapes.map((function(t){return I0(t,e)})).filter((function(t){return!!t}))}function O0(t,e){return T0(t,e)?t.attr("path"):null}function A0(t){var e,n=t.event.target;return n&&(e=n.get("element")),e}function D0(t){var e,n=t.event.target;return n&&(e=n.get("delegateObject")),e}function R0(t){var e=t.event.gEvent;return!(e&&e.fromShape&&e.toShape&&e.fromShape.get("element")===e.toShape.get("element"))}function L0(t){return t&&t.component&&t.component.isList()}function N0(t){return t&&t.component&&t.component.isSlider()}function F0(t){var e=t.event.target;return e&&"mask"===(null===e||void 0===e?void 0:e.get("name"))||z0(t)}function z0(t){var e;return"multi-mask"===(null===(e=t.event.target)||void 0===e?void 0:e.get("name"))}function B0(t,e){var n=t.event.target;if(z0(t))return function(t,e){var n=t.event.target;if("path"===n.get("type")){var r=function(t,e){return t.event.maskShapes.map((function(t){return O0(t,e)}))}(t,e);return r.length>0?r.flatMap((function(e){return X0(t.view,e)})):null}var i=P0(t,e);if(i.length>0)return i.flatMap((function(e){return G0(t.view,e)}));return null}(t,e);if("path"===n.get("type")){var r=function(t,e){return O0(t.event.target,e)}(t,e);if(!r)return;return X0(t.view,r)}var i=M0(t,e);return i?G0(t.view,i):null}function $0(t,e,n){if(z0(t))return function(t,e,n){var r=P0(t,n);if(r.length>0)return r.flatMap((function(n){return j0(n,t,e)}));return null}(t,e,n);var r=M0(t,n);return r?j0(r,t,e):null}function j0(t,e,n){var r=e.view,i=J0(r,n,{x:t.x,y:t.y}),o=J0(r,n,{x:t.maxX,y:t.maxY});return G0(n,{minX:i.x,minY:i.y,maxX:o.x,maxY:o.y})}function U0(t){var e=t.geometries,n=[];return(0,yX.S6)(e,(function(t){var e=t.elements;n=n.concat(e)})),t.views&&t.views.length&&(0,yX.S6)(t.views,(function(t){n=n.concat(U0(t))})),n}function V0(t,e){var n=t.geometries,r=[];return(0,yX.S6)(n,(function(t){var n=t.getElementsBy((function(t){return t.hasState(e)}));r=r.concat(n)})),r}function H0(t,e){var n=t.getModel().data;return(0,yX.kJ)(n)?n[0][e]:n[e]}function G0(t,e){var n=U0(t),r=[];return(0,yX.S6)(n,(function(t){var n,i,o=t.shape.getCanvasBBox();n=e,(i=o).minX>n.maxX||i.maxX<n.minX||i.minY>n.maxY||i.maxY<n.minY||r.push(t)})),r}function W0(t){var e=[];return(0,yX.S6)(t,(function(t){if("A"!==t[0])for(var n=1;n<t.length;n+=2)e.push([t[n],t[n+1]]);else{var r=t.length;e.push([t[r-2],t[r-1]])}})),e}function X0(t,e){var n=U0(t),r=W0(e),i=n.filter((function(t){var e,n=t.shape;"path"===n.get("type")?e=W0(n.attr("path")):e=function(t){return[[t.minX,t.minY],[t.maxX,t.minY],[t.maxX,t.maxY],[t.minX,t.maxY]]}(n.getCanvasBBox());return function(t,e){if(t.length<2||e.length<2)return!1;var n,r,i=k0(t),o=k0(e);if(n=i,(r=o).minX>n.maxX||r.maxX<n.minX||r.minY>n.maxY||r.maxY<n.minY)return!1;var a=!1;if((0,yX.S6)(e,(function(e){if(w0(t,e[0],e[1]))return a=!0,!1})),a)return!0;if((0,yX.S6)(t,(function(t){if(w0(e,t[0],t[1]))return a=!0,!1})),a)return!0;var s=C0(t),l=C0(e),c=!1;return(0,yX.S6)(l,(function(t){if(E0(s,t))return c=!0,!1})),c}(r,e)}));return i}function q0(t){return t.getComponents().map((function(t){return t.component}))}function Y0(t,e){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}function Z0(t,e){return t.x<=e.x&&t.maxX>=e.x&&t.y<=e.y&&t.maxY>e.y}function K0(t){var e=t.parent,n=null;return e&&(n=e.views.filter((function(e){return e!==t}))),n}function J0(t,e,n){var r=function(t,e){return t.getCoordinate().invert(e)}(t,n);return e.getCoordinate().convert(r)}function Q0(t,e,n,r){var i=!1;return(0,yX.S6)(t,(function(t){if(t[n]===e[n]&&t[r]===e[r])return i=!0,!1})),i}function t1(t,e){var n=t.getScaleByField(e);return!n&&t.views&&(0,yX.S6)(t.views,(function(t){if(n=t1(t,e))return!1})),n}var e1=function(){function t(t){this.actions=[],this.event=null,this.cacheMap={},this.view=t}return t.prototype.cache=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length)return this.cacheMap[t[0]];2===t.length&&(this.cacheMap[t[0]]=t[1])},t.prototype.getAction=function(t){return this.actions.find((function(e){return e.name===t}))},t.prototype.addAction=function(t){this.actions.push(t)},t.prototype.removeAction=function(t){var e=this.actions,n=this.actions.indexOf(t);n>=0&&e.splice(n,1)},t.prototype.getCurrentPoint=function(){var t=this.event;return t?t.target instanceof HTMLElement?this.view.getCanvas().getPointByClient(t.clientX,t.clientY):{x:t.x,y:t.y}:null},t.prototype.getCurrentShape=function(){return(0,yX.U2)(this.event,["gEvent","shape"])},t.prototype.isInPlot=function(){var t=this.getCurrentPoint();return!!t&&this.view.isPointInPlot(t)},t.prototype.isInShape=function(t){var e=this.getCurrentShape();return!!e&&e.get("name")===t},t.prototype.isInComponent=function(t){var e=q0(this.view),n=this.getCurrentPoint();return!!n&&!!e.find((function(e){var r=e.getBBox();return t?e.get("name")===t&&Z0(r,n):Z0(r,n)}))},t.prototype.destroy=function(){(0,yX.S6)(this.actions.slice(),(function(t){t.destroy()})),this.view=null,this.event=null,this.actions=null,this.cacheMap=null},t}(),n1=e1,r1=function(){function t(t,e){this.view=t,this.cfg=e}return t.prototype.init=function(){this.initEvents()},t.prototype.initEvents=function(){},t.prototype.clearEvents=function(){},t.prototype.destroy=function(){this.clearEvents()},t}();function i1(t,e,n){var r=t.split(":"),i=r[0],o=e.getAction(i)||function(t,e){var n=o0[t],r=null;return n&&((r=new(0,n.ActionClass)(e,n.cfg)).name=t,r.init()),r}(i,e);if(!o)throw new Error("There is no action named ".concat(i));return{action:o,methodName:r[1],arg:n}}function o1(t){var e=t.action,n=t.methodName,r=t.arg;if(!e[n])throw new Error("Action(".concat(e.name,") doesn't have a method called ").concat(n));e[n](r)}var a1="start",s1="showEnable",l1="end",c1="rollback",u1="processing",h1=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.callbackCaches={},r.emitCaches={},r.steps=n,r}return(0,mX.ZT)(e,t),e.prototype.init=function(){this.initContext(),t.prototype.init.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},e.prototype.initEvents=function(){var t=this;(0,yX.S6)(this.steps,(function(e,n){(0,yX.S6)(e,(function(e){var r=t.getActionCallback(n,e);r&&t.bindEvent(e.trigger,r)}))}))},e.prototype.clearEvents=function(){var t=this;(0,yX.S6)(this.steps,(function(e,n){(0,yX.S6)(e,(function(e){var r=t.getActionCallback(n,e);r&&t.offEvent(e.trigger,r)}))}))},e.prototype.initContext=function(){var t=this.view,e=new n1(t);this.context=e;var n=this.steps;(0,yX.S6)(n,(function(t){(0,yX.S6)(t,(function(t){if((0,yX.mf)(t.action))t.actionObject={action:l0(t.action,e),methodName:"execute"};else if((0,yX.HD)(t.action))t.actionObject=i1(t.action,e,t.arg);else if((0,yX.kJ)(t.action)){var n=t.action,r=(0,yX.kJ)(t.arg)?t.arg:[t.arg];t.actionObject=[],(0,yX.S6)(n,(function(n,i){t.actionObject.push(i1(n,e,r[i]))}))}}))}))},e.prototype.isAllowStep=function(t){var e=this.currentStepName,n=this.steps;if(e===t)return!0;if(t===s1)return!0;if(t===u1)return e===a1;if(t===a1)return e!==u1;if(t===l1)return e===u1||e===a1;if(t===c1){if(n[l1])return e===l1;if(e===a1)return!0}return!1},e.prototype.isAllowExecute=function(t,e){if(this.isAllowStep(t)){var n=this.getKey(t,e);return(!e.once||!this.emitCaches[n])&&(!e.isEnable||e.isEnable(this.context))}return!1},e.prototype.enterStep=function(t){this.currentStepName=t,this.emitCaches={}},e.prototype.afterExecute=function(t,e){t!==s1&&this.currentStepName!==t&&this.enterStep(t);var n=this.getKey(t,e);this.emitCaches[n]=!0},e.prototype.getKey=function(t,e){return t+e.trigger+e.action},e.prototype.getActionCallback=function(t,e){var n=this,r=this.context,i=this.callbackCaches,o=e.actionObject;if(e.action&&o){var a=this.getKey(t,e);if(!i[a]){var s=function(i){r.event=i,n.isAllowExecute(t,e)?((0,yX.kJ)(o)?(0,yX.S6)(o,(function(t){r.event=i,o1(t)})):(r.event=i,o1(o)),n.afterExecute(t,e),e.callback&&(r.event=i,e.callback(r))):r.event=null};e.debounce?i[a]=(0,yX.Ds)(s,e.debounce.wait,e.debounce.immediate):e.throttle?i[a]=(0,yX.P2)(s,e.throttle.wait,{leading:e.throttle.leading,trailing:e.throttle.trailing}):i[a]=s}return i[a]}return null},e.prototype.bindEvent=function(t,e){var n=t.split(":");"window"===n[0]?window.addEventListener(n[1],e):"document"===n[0]?document.addEventListener(n[1],e):this.view.on(t,e)},e.prototype.offEvent=function(t,e){var n=t.split(":");"window"===n[0]?window.removeEventListener(n[1],e):"document"===n[0]?document.removeEventListener(n[1],e):this.view.off(t,e)},e}(r1),p1=h1,d1={};function f1(t,e){d1[(0,yX.vl)(t)]=e}function g1(t,e,n){var r=function(t){return d1[(0,yX.vl)(t)]}(t);if(!r)return null;if((0,yX.PO)(r)){var i=(0,yX.CD)((0,yX.d9)(r),n);return new p1(e,i)}return new r(e,n)}function m1(t){var e,n={point:{default:{fill:t.pointFillColor,r:t.pointSize,stroke:t.pointBorderColor,lineWidth:t.pointBorder,fillOpacity:t.pointFillOpacity},active:{stroke:t.pointActiveBorderColor,lineWidth:t.pointActiveBorder},selected:{stroke:t.pointSelectedBorderColor,lineWidth:t.pointSelectedBorder},inactive:{fillOpacity:t.pointInactiveFillOpacity,strokeOpacity:t.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:t.hollowPointFillColor,lineWidth:t.hollowPointBorder,stroke:t.hollowPointBorderColor,strokeOpacity:t.hollowPointBorderOpacity,r:t.hollowPointSize},active:{stroke:t.hollowPointActiveBorderColor,strokeOpacity:t.hollowPointActiveBorderOpacity},selected:{lineWidth:t.hollowPointSelectedBorder,stroke:t.hollowPointSelectedBorderColor,strokeOpacity:t.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:t.hollowPointInactiveBorderOpacity}},area:{default:{fill:t.areaFillColor,fillOpacity:t.areaFillOpacity,stroke:null},active:{fillOpacity:t.areaActiveFillOpacity},selected:{fillOpacity:t.areaSelectedFillOpacity},inactive:{fillOpacity:t.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:t.hollowAreaBorderColor,lineWidth:t.hollowAreaBorder,strokeOpacity:t.hollowAreaBorderOpacity},active:{fill:null,lineWidth:t.hollowAreaActiveBorder},selected:{fill:null,lineWidth:t.hollowAreaSelectedBorder},inactive:{strokeOpacity:t.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:t.intervalFillColor,fillOpacity:t.intervalFillOpacity},active:{stroke:t.intervalActiveBorderColor,lineWidth:t.intervalActiveBorder},selected:{stroke:t.intervalSelectedBorderColor,lineWidth:t.intervalSelectedBorder},inactive:{fillOpacity:t.intervalInactiveFillOpacity,strokeOpacity:t.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:t.hollowIntervalFillColor,stroke:t.hollowIntervalBorderColor,lineWidth:t.hollowIntervalBorder,strokeOpacity:t.hollowIntervalBorderOpacity},active:{stroke:t.hollowIntervalActiveBorderColor,lineWidth:t.hollowIntervalActiveBorder,strokeOpacity:t.hollowIntervalActiveBorderOpacity},selected:{stroke:t.hollowIntervalSelectedBorderColor,lineWidth:t.hollowIntervalSelectedBorder,strokeOpacity:t.hollowIntervalSelectedBorderOpacity},inactive:{stroke:t.hollowIntervalInactiveBorderColor,lineWidth:t.hollowIntervalInactiveBorder,strokeOpacity:t.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:t.lineBorderColor,lineWidth:t.lineBorder,strokeOpacity:t.lineBorderOpacity,fill:null,lineAppendWidth:10,lineCap:"round",lineJoin:"round"},active:{lineWidth:t.lineActiveBorder},selected:{lineWidth:t.lineSelectedBorder},inactive:{strokeOpacity:t.lineInactiveBorderOpacity}}},r=function(t){return{title:{autoRotate:!0,position:"center",spacing:t.axisTitleSpacing,style:{fill:t.axisTitleTextFillColor,fontSize:t.axisTitleTextFontSize,lineHeight:t.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:t.fontFamily},iconStyle:{fill:t.axisDescriptionIconFillColor}},label:{autoRotate:!1,autoEllipsis:!1,autoHide:{type:"equidistance",cfg:{minGap:6}},offset:t.axisLabelOffset,style:{fill:t.axisLabelFillColor,fontSize:t.axisLabelFontSize,lineHeight:t.axisLabelLineHeight,fontFamily:t.fontFamily}},line:{style:{lineWidth:t.axisLineBorder,stroke:t.axisLineBorderColor}},grid:{line:{type:"line",style:{stroke:t.axisGridBorderColor,lineWidth:t.axisGridBorder,lineDash:t.axisGridLineDash}},alignTick:!0,animate:!0},tickLine:{style:{lineWidth:t.axisTickLineBorder,stroke:t.axisTickLineBorderColor},alignTick:!0,length:t.axisTickLineLength},subTickLine:null,animate:!0}}(t),i=function(t){return{title:null,marker:{symbol:"circle",spacing:t.legendMarkerSpacing,style:{r:t.legendCircleMarkerSize,fill:t.legendMarkerColor}},itemName:{spacing:5,style:{fill:t.legendItemNameFillColor,fontFamily:t.fontFamily,fontSize:t.legendItemNameFontSize,lineHeight:t.legendItemNameLineHeight,fontWeight:t.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:"#D8D8D8"},markerStyle:{fill:"#D8D8D8",stroke:"#D8D8D8"}},inactive:{nameStyle:{fill:"#D8D8D8"},markerStyle:{opacity:.2}}},flipPage:!0,pageNavigator:{marker:{style:{size:t.legendPageNavigatorMarkerSize,inactiveFill:t.legendPageNavigatorMarkerInactiveFillColor,inactiveOpacity:t.legendPageNavigatorMarkerInactiveFillOpacity,fill:t.legendPageNavigatorMarkerFillColor,opacity:t.legendPageNavigatorMarkerFillOpacity}},text:{style:{fill:t.legendPageNavigatorTextFillColor,fontSize:t.legendPageNavigatorTextFontSize}}},animate:!1,maxItemWidth:200,itemSpacing:t.legendItemSpacing,itemMarginBottom:t.legendItemMarginBottom,padding:t.legendPadding}}(t);return{background:t.backgroundColor,defaultColor:t.brandColor,subColor:t.subColor,semanticRed:t.paletteSemanticRed,semanticGreen:t.paletteSemanticGreen,padding:"auto",fontFamily:t.fontFamily,columnWidthRatio:.5,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:t.paletteQualitative10,colors20:t.paletteQualitative20,sequenceColors:t.paletteSequence,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:function(t){var e=t.geometry.coordinate;if(e.isPolar&&e.isTransposed){var r=MQ(t.getModel(),e),i=(r.startAngle+r.endAngle)/2,o=7.5*Math.cos(i),a=7.5*Math.sin(i);return{matrix:vZ.vs(null,[["t",o,a]])}}return n.interval.selected}}},"hollow-rect":{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},line:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},tick:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},funnel:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:n.interval.selected}},pyramid:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:n.interval.selected}}},line:{line:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},dot:{default:{style:(0,mX.pi)((0,mX.pi)({},n.line.default),{lineCap:null,lineDash:[1,1]})},active:{style:(0,mX.pi)((0,mX.pi)({},n.line.active),{lineCap:null,lineDash:[1,1]})},inactive:{style:(0,mX.pi)((0,mX.pi)({},n.line.inactive),{lineCap:null,lineDash:[1,1]})},selected:{style:(0,mX.pi)((0,mX.pi)({},n.line.selected),{lineCap:null,lineDash:[1,1]})}},dash:{default:{style:(0,mX.pi)((0,mX.pi)({},n.line.default),{lineCap:null,lineDash:[5.5,1]})},active:{style:(0,mX.pi)((0,mX.pi)({},n.line.active),{lineCap:null,lineDash:[5.5,1]})},inactive:{style:(0,mX.pi)((0,mX.pi)({},n.line.inactive),{lineCap:null,lineDash:[5.5,1]})},selected:{style:(0,mX.pi)((0,mX.pi)({},n.line.selected),{lineCap:null,lineDash:[5.5,1]})}},smooth:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},hv:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},vh:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},hvh:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},vhv:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}}},polygon:{polygon:{default:{style:n.interval.default},active:{style:n.interval.active},inactive:{style:n.interval.inactive},selected:{style:n.interval.selected}}},point:{circle:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},square:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},bowtie:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},diamond:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},hexagon:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},triangle:{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},"triangle-down":{default:{style:n.point.default},active:{style:n.point.active},inactive:{style:n.point.inactive},selected:{style:n.point.selected}},"hollow-circle":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-square":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-bowtie":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-diamond":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-hexagon":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-triangle":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},"hollow-triangle-down":{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},cross:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},tick:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},plus:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},hyphen:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}},line:{default:{style:n.hollowPoint.default},active:{style:n.hollowPoint.active},inactive:{style:n.hollowPoint.inactive},selected:{style:n.hollowPoint.selected}}},area:{area:{default:{style:n.area.default},active:{style:n.area.active},inactive:{style:n.area.inactive},selected:{style:n.area.selected}},smooth:{default:{style:n.area.default},active:{style:n.area.active},inactive:{style:n.area.inactive},selected:{style:n.area.selected}},line:{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}},"smooth-line":{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}}},schema:{candle:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}},box:{default:{style:n.hollowInterval.default},active:{style:n.hollowInterval.active},inactive:{style:n.hollowInterval.inactive},selected:{style:n.hollowInterval.selected}}},edge:{line:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},vhv:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},smooth:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},arc:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}}},violin:{violin:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},smooth:{default:{style:n.line.default},active:{style:n.line.active},inactive:{style:n.line.inactive},selected:{style:n.line.selected}},hollow:{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}},"hollow-smooth":{default:{style:n.hollowArea.default},active:{style:n.hollowArea.active},inactive:{style:n.hollowArea.inactive},selected:{style:n.hollowArea.selected}}}},components:{axis:{common:r,top:{position:"top",grid:null,title:null,verticalLimitLength:.5},bottom:{position:"bottom",grid:null,title:null,verticalLimitLength:.5},left:{position:"left",title:null,line:null,tickLine:null,verticalLimitLength:1/3},right:{position:"right",title:null,line:null,tickLine:null,verticalLimitLength:1/3},circle:{title:null,grid:(0,yX.b$)({},r.grid,{line:{type:"line"}})},radius:{title:null,grid:(0,yX.b$)({},r.grid,{line:{type:"circle"}})}},legend:{common:i,right:{layout:"vertical",padding:t.legendVerticalPadding},left:{layout:"vertical",padding:t.legendVerticalPadding},top:{layout:"horizontal",padding:t.legendHorizontalPadding},bottom:{layout:"horizontal",padding:t.legendHorizontalPadding},continuous:{title:null,background:null,track:{},rail:{type:"color",size:t.sliderRailHeight,defaultLength:t.sliderRailWidth,style:{fill:t.sliderRailFillColor,stroke:t.sliderRailBorderColor,lineWidth:t.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:t.sliderLabelTextFillColor,fontSize:t.sliderLabelTextFontSize,lineHeight:t.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:t.fontFamily}},handler:{size:t.sliderHandlerWidth,style:{fill:t.sliderHandlerFillColor,stroke:t.sliderHandlerBorderColor}},slidable:!0,padding:i.padding}},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:t.tooltipCrosshairsBorderColor,lineWidth:t.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(e={},e["".concat(zJ)]={position:"absolute",visibility:"hidden",zIndex:8,transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:t.tooltipContainerFillColor,opacity:t.tooltipContainerFillOpacity,boxShadow:t.tooltipContainerShadow,borderRadius:"".concat(t.tooltipContainerBorderRadius,"px"),color:t.tooltipTextFillColor,fontSize:"".concat(t.tooltipTextFontSize,"px"),fontFamily:t.fontFamily,lineHeight:"".concat(t.tooltipTextLineHeight,"px"),padding:"0 12px 0 12px"},e["".concat(BJ)]={marginBottom:"12px",marginTop:"12px"},e["".concat($J)]={margin:0,listStyleType:"none",padding:0},e["".concat(jJ)]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},e["".concat(UJ)]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},e["".concat(VJ)]={display:"inline-block",float:"right",marginLeft:"30px"},e)},annotation:{arc:{style:{stroke:t.annotationArcBorderColor,lineWidth:t.annotationArcBorder},animate:!0},line:{style:{stroke:t.annotationLineBorderColor,lineDash:t.annotationLineDash,lineWidth:t.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:t.annotationTextFillColor,stroke:t.annotationTextBorderColor,lineWidth:t.annotationTextBorder,fontSize:t.annotationTextFontSize,textAlign:"start",fontFamily:t.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:t.annotationTextFillColor,stroke:t.annotationTextBorderColor,lineWidth:t.annotationTextBorder,fontSize:t.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:t.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:t.annotationRegionBorder,stroke:t.annotationRegionBorderColor,fill:t.annotationRegionFillColor,fillOpacity:t.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:t.brandColor,lineWidth:2}},line:{style:{stroke:t.annotationLineBorderColor,lineWidth:t.annotationLineBorder},length:t.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:t.annotationTextFillColor,stroke:t.annotationTextBorderColor,lineWidth:t.annotationTextBorder,fontSize:t.annotationTextFontSize,fontFamily:t.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:t.annotationRegionFillColor,fillOpacity:t.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:t.annotationTextFillColor,stroke:t.annotationTextBorderColor,lineWidth:t.annotationTextBorder,fontSize:t.annotationTextFontSize,fontFamily:t.fontFamily}},animate:!0}},slider:{common:{padding:[8,8,8,8],backgroundStyle:{fill:t.cSliderBackgroundFillColor,opacity:t.cSliderBackgroundFillOpacity},foregroundStyle:{fill:t.cSliderForegroundFillColor,opacity:t.cSliderForegroundFillOpacity},handlerStyle:{width:t.cSliderHandlerWidth,height:t.cSliderHandlerHeight,fill:t.cSliderHandlerFillColor,opacity:t.cSliderHandlerFillOpacity,stroke:t.cSliderHandlerBorderColor,lineWidth:t.cSliderHandlerBorder,radius:t.cSliderHandlerBorderRadius,highLightFill:t.cSliderHandlerHighlightFillColor},textStyle:{fill:t.cSliderTextFillColor,opacity:t.cSliderTextFillOpacity,fontSize:t.cSliderTextFontSize,lineHeight:t.cSliderTextLineHeight,fontWeight:t.cSliderTextFontWeight,stroke:t.cSliderTextBorderColor,lineWidth:t.cSliderTextBorder}}},scrollbar:{common:{padding:[8,8,8,8]},default:{style:{trackColor:t.scrollbarTrackFillColor,thumbColor:t.scrollbarThumbFillColor}},hover:{style:{thumbColor:t.scrollbarThumbHighlightFillColor}}}},labels:{offset:12,style:{fill:t.labelFillColor,fontSize:t.labelFontSize,fontFamily:t.fontFamily,stroke:t.labelBorderColor,lineWidth:t.labelBorder},fillColorDark:t.labelFillColorDark,fillColorLight:t.labelFillColorLight,autoRotate:!0},innerLabels:{style:{fill:t.innerLabelFillColor,fontSize:t.innerLabelFontSize,fontFamily:t.fontFamily,stroke:t.innerLabelBorderColor,lineWidth:t.innerLabelBorder},autoRotate:!0},overflowLabels:{style:{fill:t.overflowLabelFillColor,fontSize:t.overflowLabelFontSize,fontFamily:t.fontFamily,stroke:t.overflowLabelBorderColor,lineWidth:t.overflowLabelBorder}},pieLabels:{labelHeight:14,offset:10,labelLine:{style:{lineWidth:t.labelLineBorder}},autoRotate:!0}}}var y1="#000",v1="#595959",x1="#8C8C8C",_1="#BFBFBF",b1="#D9D9D9",w1="#F0F0F0",S1="#FFFFFF",C1="#D9D9D9",E1=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],k1=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],M1=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],T1=function(t){void 0===t&&(t={});var e=t.paletteQualitative10,n=void 0===e?E1:e,r=t.paletteQualitative20,i=void 0===r?k1:r,o=t.brandColor,a=void 0===o?n[0]:o,s={backgroundColor:"transparent",brandColor:a,subColor:"rgba(0,0,0,0.05)",paletteQualitative10:n,paletteQualitative20:i,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",paletteSequence:M1,fontFamily:'"Segoe UI", Roboto, "Helvetica Neue", Arial,\n    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",\n    "Noto Color Emoji"',axisLineBorderColor:_1,axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:v1,axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisDescriptionIconFillColor:C1,axisTickLineBorderColor:_1,axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:b1,axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:x1,axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:b1,axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:x1,legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:a,legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:v1,legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:y1,legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:y1,legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:x1,legendPageNavigatorTextFontSize:12,sliderRailFillColor:b1,sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:x1,sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:w1,sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:_1,annotationArcBorderColor:b1,annotationArcBorder:1,annotationLineBorderColor:_1,annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:v1,annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:y1,annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:_1,tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:v1,tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:v1,labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:S1,innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:v1,overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:S1,overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:_1,cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#000",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(0,0,0,0)",scrollbarThumbFillColor:"rgba(0,0,0,0.15)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.2)",pointFillColor:a,pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:S1,pointBorderOpacity:1,pointActiveBorderColor:y1,pointSelectedBorder:2,pointSelectedBorderColor:y1,pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:a,hollowPointBorderOpacity:.95,hollowPointFillColor:S1,hollowPointActiveBorder:1,hollowPointActiveBorderColor:y1,hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:y1,hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:a,lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:a,areaFillOpacity:.25,areaActiveFillColor:a,areaActiveFillOpacity:.5,areaSelectedFillColor:a,areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:a,hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:y1,hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:y1,hollowAreaInactiveBorderOpacity:.3,intervalFillColor:a,intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:y1,intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:y1,intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:a,hollowIntervalBorderOpacity:1,hollowIntervalFillColor:S1,hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:y1,hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:y1,hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3};return(0,mX.pi)((0,mX.pi)({},s),t)};T1();function I1(t){var e=t.styleSheet,n=void 0===e?{}:e,r=(0,mX._T)(t,["styleSheet"]),i=T1(n);return(0,yX.b$)({},m1(i),r)}var P1={default:I1({})};function O1(t){return(0,yX.U2)(P1,(0,yX.vl)(t),P1.default)}function A1(t,e,n){var r=n.translate(t),i=n.translate(e);return(0,yX.vQ)(r,i)}function D1(t,e,n){var r=n.coordinate,i=n.getYScale(),o=i.field,a=r.invert(e),s=i.invert(a.y);return(0,yX.sE)(t,(function(t){var e=t[PX];return e[o][0]<=s&&e[o][1]>=s}))||t[t.length-1]}var R1=(0,yX.HP)((function(t){if(t.isCategory)return 1;for(var e=t.values,n=e.length,r=t.translate(e[0]),i=r,o=0;o<n;o++){var a=e[o],s=t.translate(a);s<r&&(r=s),s>i&&(i=s)}return(i-r)/(n-1)}));function L1(t){var e,n,r,i=function(t){var e=(0,yX.VO)(t.attributes);return(0,yX.hX)(e,(function(t){return(0,yX.FX)(IX,t.type)}))}(t);try{for(var o=(0,mX.XA)(i),a=o.next();!a.done;a=o.next()){var s=a.value,l=s.getScale(s.type);if(l&&l.isLinear)if("cat"!==zQ(l,(0,yX.U2)(t.scaleDefs,l.field),s.type,t.type)){r=l;break}}}catch(h){e={error:h}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}var c=t.getXScale(),u=t.getYScale();return r||u||c}function N1(t,e,n){if(0===e.length)return null;var r=n.type,i=n.getXScale(),o=n.getYScale(),a=i.field,s=o.field,l=null;if("heatmap"===r||"point"===r){for(var c=n.coordinate.invert(t),u=i.invert(c.x),h=o.invert(c.y),p=1/0,d=0;d<e.length;d++){var f=e[d],g=f[PX],m=Math.pow(g[a]-u,2)+Math.pow(g[s]-h,2);m<p&&(p=m,l=f)}return l}var y=e[0],v=e[e.length-1],x=function(t,e){var n=e.coordinate,r=e.getXScale(),i=r.range,o=i[i.length-1],a=i[0],s=n.invert(t).x;return n.isPolar&&s>(1+o)/2&&(s=a),r.translate(r.invert(s))}(t,n),_=y[PX][a],b=y[PX][s],w=v[PX][a],S=o.isLinear&&(0,yX.kJ)(b);if((0,yX.kJ)(_)){for(d=0;d<e.length;d++){g=(I=e[d])[PX];if(i.translate(g[a][0])<=x&&i.translate(g[a][1])>=x){if(!S){l=I;break}(0,yX.kJ)(l)||(l=[]),l.push(I)}}(0,yX.kJ)(l)&&(l=D1(l,t,n))}else{var C=void 0;if(i.isLinear||"timeCat"===i.type){if((x>i.translate(w)||x<i.translate(_))&&(x>i.max||x<i.min))return null;for(var E=0,k=e.length-1,M=void 0;E<=k;){var T=e[M=Math.floor((E+k)/2)][PX][a];if(A1(T,x,i))return e[M];i.translate(T)<=i.translate(x)?(E=M+1,v=e[M],C=e[M+1]):(0===k&&(v=e[0]),k=M-1)}}else{for(d=0;d<e.length;d++){var I;if(A1((g=(I=e[d])[PX])[a],x,i)){if(!S){l=I;break}(0,yX.kJ)(l)||(l=[]),l.push(I)}else i.translate(g[a])<=x&&(v=I,C=e[d+1])}(0,yX.kJ)(l)&&(l=D1(l,t,n))}v&&C&&Math.abs(i.translate(v[PX][a])-x)>Math.abs(i.translate(C[PX][a])-x)&&(v=C)}var P=R1(n.getXScale());return!l&&Math.abs(i.translate(v[PX][a])-x)<=P/2&&(l=v),l}function F1(t,e,n,r){var i,o;void 0===n&&(n=""),void 0===r&&(r=!1);var a,s,l=t[PX],c=function(t,e,n){var r=e.getAttribute("position").getFields(),i=e.scales,o=(0,yX.mf)(n)||!n?r[0]:n,a=i[o],s=a?a.getText(t[o]):t[o]||o;return(0,yX.mf)(n)?n(s,t):s}(l,e,n),u=e.tooltipOption,h=e.theme.defaultColor,p=[];function d(e,n){if(r||!(0,yX.UM)(n)&&""!==n){var i={title:c,data:l,mappingData:t,name:e,value:n,color:t.color||h,marker:!0};p.push(i)}}if((0,yX.Kn)(u)){var f=u.fields,g=u.callback;if(g){var m=f.map((function(e){return t[PX][e]})),y=g.apply(void 0,(0,mX.ev)([],(0,mX.CR)(m),!1)),v=(0,mX.pi)({data:t[PX],mappingData:t,title:c,color:t.color||h,marker:!0},y);p.push(v)}else{var x=e.scales;try{for(var _=(0,mX.XA)(f),b=_.next();!b.done;b=_.next()){var w=b.value;if(!(0,yX.UM)(l[w])){var S=x[w];d(a=$Q(S),s=S.getText(l[w]))}}}catch(E){i={error:E}}finally{try{b&&!b.done&&(o=_.return)&&o.call(_)}finally{if(i)throw i.error}}}}else{var C=L1(e);s=function(t,e){var n=t[e.field];return(0,yX.kJ)(n)?n.map((function(t){return e.getText(t)})).join("-"):e.getText(n)}(l,C),a=function(t,e){var n,r=e.getGroupScales();if(r.length&&(n=r[0]),n){var i=n.field;return n.getText(t[i])}return $Q(L1(e))}(l,e),d(a,s)}return p}function z1(t,e,n,r){var i,o,a=r.showNil,s=[],l=t.dataArray;if(!(0,yX.xb)(l)){t.sort(l);try{for(var c=(0,mX.XA)(l),u=c.next();!u.done;u=c.next()){var h=N1(e,u.value,t);if(h){var p=t.getElementId(h),d=t.elementsMap[p];if("heatmap"===t.type||d.visible){var f=F1(h,t,n,a);f.length&&s.push(f)}}}}catch(g){i={error:g}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}}return s}function B1(t,e,n,r){var i=r.showNil,o=[],a=t.container.getShape(e.x,e.y);if(a&&a.get("visible")&&a.get("origin")){var s=F1(a.get("origin").mappingData,t,n,i);s.length&&o.push(s)}return o}function $1(t,e,n){var r,i,o=[],a=t.geometries,s=n.shared,l=n.title,c=n.reversed;try{for(var u=(0,mX.XA)(a),h=u.next();!h.done;h=u.next()){var p=h.value;if(p.visible&&!1!==p.tooltipOption){var d=p.type,f=void 0;(f=["point","edge","polygon"].includes(d)?B1(p,e,l,n):["area","line","path","heatmap"].includes(d)||!1!==s?z1(p,e,l,n):B1(p,e,l,n)).length&&(c&&f.reverse(),o.push(f))}}}catch(g){r={error:g}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return o}function j1(t){void 0===t&&(t=0);var e=(0,yX.kJ)(t)?t:[t];switch(e.length){case 0:e=[0,0,0,0];break;case 1:e=new Array(4).fill(e[0]);break;case 2:e=(0,mX.ev)((0,mX.ev)([],(0,mX.CR)(e),!1),(0,mX.CR)(e),!1);break;case 3:e=(0,mX.ev)((0,mX.ev)([],(0,mX.CR)(e),!1),[e[1]],!1);break;default:e=e.slice(0,4)}return e}var U1={};function V1(t,e){U1[t]=e}var H1=function(){function t(t){this.option=this.wrapperOption(t)}return t.prototype.update=function(t){return this.option=this.wrapperOption(t),this},t.prototype.hasAction=function(t){var e=this.option.actions;return(0,yX.G)(e,(function(e){return e[0]===t}))},t.prototype.create=function(t,e){var n=this.option,r=n.type,i=n.cfg,o="theta"===r,a=(0,mX.pi)({start:t,end:e},i),s=function(t){return TZ[t.toLowerCase()]}(o?"polar":r);return this.coordinate=new s(a),this.coordinate.type=r,o&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},t.prototype.adjust=function(t,e){return this.coordinate.update({start:t,end:e}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},t.prototype.rotate=function(t){return this.option.actions.push(["rotate",t]),this},t.prototype.reflect=function(t){return this.option.actions.push(["reflect",t]),this},t.prototype.scale=function(t,e){return this.option.actions.push(["scale",t,e]),this},t.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},t.prototype.getOption=function(){return this.option},t.prototype.getCoordinate=function(){return this.coordinate},t.prototype.wrapperOption=function(t){return(0,mX.pi)({type:"rect",actions:[],cfg:{}},t)},t.prototype.execActions=function(t){var e=this,n=this.option.actions;(0,yX.S6)(n,(function(n){var r,i=(0,mX.CR)(n),o=i[0],a=i.slice(1);(!!(0,yX.UM)(t)||t.includes(o))&&(r=e.coordinate)[o].apply(r,(0,mX.ev)([],(0,mX.CR)(a),!1))}))},t}(),G1=H1,W1=function(){function t(t,e,n){this.view=t,this.gEvent=e,this.data=n,this.type=e.type}return t.fromData=function(e,n,r){return new t(e,new $X.Event(n,{}),r)},Object.defineProperty(t.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[Event (type=".concat(this.type,")]")},t.prototype.clone=function(){return new t(this.view,this.gEvent,this.data)},t}(),X1=W1;function q1(t){var e=t.getController("axis"),n=t.getController("legend"),r=t.getController("annotation");[e,t.getController("slider"),t.getController("scrollbar"),n,r].forEach((function(t){t&&t.layout()}))}var Y1=function(){function t(){this.scales=new Map,this.syncScales=new Map}return t.prototype.createScale=function(t,e,n,r){var i=n,o=this.getScaleMeta(r);if(0===e.length&&o){var a=o.scale,s={type:a.type};a.isCategory&&(s.values=a.values),i=(0,yX.b$)(s,o.scaleDef,n)}var l=BQ(t,e,i);return this.cacheScale(l,n,r),l},t.prototype.sync=function(t,e){var n=this;this.syncScales.forEach((function(r,i){var o=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,s=[];(0,yX.S6)(r,(function(t){var e=n.getScale(t);a=(0,yX.hj)(e.max)?Math.max(a,e.max):a,o=(0,yX.hj)(e.min)?Math.min(o,e.min):o,(0,yX.S6)(e.values,(function(t){s.includes(t)||s.push(t)}))})),(0,yX.S6)(r,(function(r){var i=n.getScale(r);if(i.isContinuous)i.change({min:o,max:a,values:s});else if(i.isCategory){var l=i.range,c=n.getScaleMeta(r);s&&!(0,yX.U2)(c,["scaleDef","range"])&&(l=jQ((0,yX.b$)({},i,{values:s}),t,e)),i.change({values:s,range:l})}}))}))},t.prototype.cacheScale=function(t,e,n){var r=this.getScaleMeta(n);r&&r.scale.type===t.type?(!function(t,e){if("identity"!==t.type&&"identity"!==e.type){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);t.change(n)}}(r.scale,t),r.scaleDef=e):(r={key:n,scale:t,scaleDef:e},this.scales.set(n,r));var i=this.getSyncKey(r);if(r.syncKey=i,this.removeFromSyncScales(n),i){var o=this.syncScales.get(i);o||(o=[],this.syncScales.set(i,o)),o.push(n)}},t.prototype.getScale=function(t){var e=this.getScaleMeta(t);if(!e){var n=(0,yX.Z$)(t.split("-")),r=this.syncScales.get(n);r&&r.length&&(e=this.getScaleMeta(r[0]))}return e&&e.scale},t.prototype.deleteScale=function(t){var e=this.getScaleMeta(t);if(e){var n=e.syncKey,r=this.syncScales.get(n);if(r&&r.length){var i=r.indexOf(t);-1!==i&&r.splice(i,1)}}this.scales.delete(t)},t.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},t.prototype.removeFromSyncScales=function(t){var e=this;this.syncScales.forEach((function(n,r){var i=n.indexOf(t);if(-1!==i)return n.splice(i,1),0===n.length&&e.syncScales.delete(r),!1}))},t.prototype.getSyncKey=function(t){var e=t.scale,n=t.scaleDef,r=e.field,i=(0,yX.U2)(n,["sync"]);return!0===i?r:!1===i?void 0:i},t.prototype.getScaleMeta=function(t){return this.scales.get(t)},t}(),Z1=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.top=t,this.right=e,this.bottom=n,this.left=r}return t.instance=function(e,n,r,i){return void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),new t(e,n,r,i)},t.prototype.max=function(t){var e=(0,mX.CR)(t,4),n=e[0],r=e[1],i=e[2],o=e[3];return this.top=Math.max(this.top,n),this.right=Math.max(this.right,r),this.bottom=Math.max(this.bottom,i),this.left=Math.max(this.left,o),this},t.prototype.shrink=function(t){var e=(0,mX.CR)(t,4),n=e[0],r=e[1],i=e[2],o=e[3];return this.top+=n,this.right+=r,this.bottom+=i,this.left+=o,this},t.prototype.inc=function(t,e){var n=t.width,r=t.height;switch(e){case dX.TOP:case dX.TOP_LEFT:case dX.TOP_RIGHT:this.top+=r;break;case dX.RIGHT:case dX.RIGHT_TOP:case dX.RIGHT_BOTTOM:this.right+=n;break;case dX.BOTTOM:case dX.BOTTOM_LEFT:case dX.BOTTOM_RIGHT:this.bottom+=r;break;case dX.LEFT:case dX.LEFT_TOP:case dX.LEFT_BOTTOM:this.left+=n}return this},t.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},t.prototype.clone=function(){return new(t.bind.apply(t,(0,mX.ev)([void 0],(0,mX.CR)(this.getPadding()),!1)))},t}();function K1(t){var e=t.padding;if(!function(t){return!(0,yX.hj)(t)&&!(0,yX.kJ)(t)}(e))return new(Z1.bind.apply(Z1,(0,mX.ev)([void 0],(0,mX.CR)(j1(e)),!1)));var n=t.viewBBox,r=new Z1,i=[],o=[],a=[];return(0,yX.S6)(t.getComponents(),(function(t){var e=t.type;e===fX.AXIS?i.push(t):[fX.LEGEND,fX.SLIDER,fX.SCROLLBAR].includes(e)?o.push(t):e!==fX.GRID&&e!==fX.TOOLTIP&&a.push(t)})),(0,yX.S6)(i,(function(t){var e=t.component.getLayoutBBox(),i=new AQ(e.x,e.y,e.width,e.height).exceed(n);r.max(i)})),(0,yX.S6)(o,(function(t){var e=t.component,n=t.direction,i=e.getLayoutBBox(),o=e.get("padding"),a=new AQ(i.x,i.y,i.width,i.height).expand(o);r.inc(a,n)})),(0,yX.S6)(a,(function(t){var e=t.component,n=t.direction,i=e.getLayoutBBox(),o=new AQ(i.x,i.y,i.width,i.height);r.inc(o,n)})),r}function J1(t,e,n){var r=n.instance();e.forEach((function(t){t.autoPadding=r.max(t.autoPadding.getPadding())}))}var Q1=function(t){function e(e){var n=t.call(this,{visible:e.visible})||this;n.views=[],n.geometries=[],n.controllers=[],n.interactions={},n.limitInPlot=!1,n.options={data:[],animate:!0},n.usedControllers=Object.keys(U1),n.scalePool=new Y1,n.layoutFunc=q1,n.isPreMouseInPlot=!1,n.isDataChanged=!1,n.isCoordinateChanged=!1,n.createdScaleKeys=new Map,n.onCanvasEvent=function(t){var e=t.name;if(!e.includes(":")){var r=n.createViewEvent(t);n.doPlotEvent(r),n.emit(e,r)}},n.onDelegateEvents=function(t){var e=t.name;if(e.includes(":")){var r=n.createViewEvent(t);n.emit(e,r)}};var r=e.id,i=void 0===r?(0,yX.EL)("view"):r,o=e.parent,a=e.canvas,s=e.backgroundGroup,l=e.middleGroup,c=e.foregroundGroup,u=e.region,h=void 0===u?{start:{x:0,y:0},end:{x:1,y:1}}:u,p=e.padding,d=e.appendPadding,f=e.theme,g=e.options,m=e.limitInPlot,y=e.syncViewPadding;return n.parent=o,n.canvas=a,n.backgroundGroup=s,n.middleGroup=l,n.foregroundGroup=c,n.region=h,n.padding=p,n.appendPadding=d,n.options=(0,mX.pi)((0,mX.pi)({},n.options),g),n.limitInPlot=m,n.id=i,n.syncViewPadding=y,n.themeObject=(0,yX.Kn)(f)?(0,yX.b$)({},O1("default"),I1(f)):O1(f),n.init(),n}return(0,mX.ZT)(e,t),e.prototype.setLayout=function(t){this.layoutFunc=t},e.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.initOptions()},e.prototype.render=function(t,e){void 0===t&&(t=!1),this.emit(vX.BEFORE_RENDER,X1.fromData(this,vX.BEFORE_RENDER,e)),this.paint(t),this.emit(vX.AFTER_RENDER,X1.fromData(this,vX.AFTER_RENDER,e)),!1===this.visible&&this.changeVisible(!1)},e.prototype.clear=function(){var t=this;this.emit(vX.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var e=this.geometries,n=0;n<e.length;n++)e[n].clear(),e[n].container.remove(!0),e[n].labelsContainer.remove(!0);this.geometries=[];var r=this.controllers;for(n=0;n<r.length;n++)"annotation"===r[n].name?r[n].clear(!0):r[n].clear();this.createdScaleKeys.forEach((function(e,n){t.getRootView().scalePool.deleteScale(n)})),this.createdScaleKeys.clear();var i=this.views;for(n=0;n<i.length;n++)i[n].clear();this.emit(vX.AFTER_CLEAR)},e.prototype.destroy=function(){this.emit(vX.BEFORE_DESTROY);var e=this.interactions;(0,yX.S6)(e,(function(t){t&&t.destroy()})),this.clear();for(var n=this.controllers,r=0,i=n.length;r<i;r++){n[r].destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),t.prototype.destroy.call(this)},e.prototype.changeVisible=function(e){t.prototype.changeVisible.call(this,e);for(var n=this.geometries,r=0,i=n.length;r<i;r++){n[r].changeVisible(e)}var o=this.controllers;for(r=0,i=o.length;r<i;r++){o[r].changeVisible(e)}return this.foregroundGroup.set("visible",e),this.middleGroup.set("visible",e),this.backgroundGroup.set("visible",e),this.getCanvas().draw(),this},e.prototype.data=function(t){return(0,yX.t8)(this.options,"data",t),this.isDataChanged=!0,this},e.prototype.source=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(t)},e.prototype.filter=function(t,e){return(0,yX.mf)(e)?((0,yX.t8)(this.options,["filters",t],e),this):(!e&&(0,yX.U2)(this.options,["filters",t])&&delete this.options.filters[t],this)},e.prototype.axis=function(t,e){return(0,yX.jn)(t)?(0,yX.t8)(this.options,["axes"],t):(0,yX.t8)(this.options,["axes",t],e),this},e.prototype.legend=function(t,e){return(0,yX.jn)(t)?(0,yX.t8)(this.options,["legends"],t):(0,yX.HD)(t)?((0,yX.t8)(this.options,["legends",t],e),(0,yX.PO)(e)&&(null===e||void 0===e?void 0:e.selected)&&(0,yX.t8)(this.options,["filters",t],(function(t){var n;return null===(n=null===e||void 0===e?void 0:e.selected[t])||void 0===n||n}))):(0,yX.t8)(this.options,["legends"],t),this},e.prototype.scale=function(t,e){var n=this;return(0,yX.HD)(t)?(0,yX.t8)(this.options,["scales",t],e):(0,yX.Kn)(t)&&(0,yX.S6)(t,(function(t,e){(0,yX.t8)(n.options,["scales",e],t)})),this},e.prototype.tooltip=function(t){return(0,yX.t8)(this.options,"tooltip",t),this},e.prototype.annotation=function(){return this.getController("annotation")},e.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},e.prototype.coordinate=function(t,e){return(0,yX.HD)(t)?(0,yX.t8)(this.options,"coordinate",{type:t,cfg:e}):(0,yX.t8)(this.options,"coordinate",t),this.coordinateController.update(this.options.coordinate),this.coordinateController},e.prototype.coord=function(t,e){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(t,e)},e.prototype.facet=function(t,e){this.facetInstance&&this.facetInstance.destroy();var n=function(t){return QQ[(0,yX.vl)(t)]}(t);if(!n)throw new Error("facet '".concat(t,"' is not exist!"));return this.facetInstance=new n(this,(0,mX.pi)((0,mX.pi)({},e),{type:t})),this},e.prototype.animate=function(t){return(0,yX.t8)(this.options,"animate",t),this},e.prototype.updateOptions=function(t){return this.clear(),(0,yX.CD)(this.options,t),this.views.forEach((function(t){return t.destroy()})),this.views=[],this.initOptions(),this.coordinateBBox=this.viewBBox,this},e.prototype.option=function(t,n){if(e.prototype[t])throw new Error("Can't use built in variable name \"".concat(t,'", please change another one.'));return(0,yX.t8)(this.options,t,n),this},e.prototype.theme=function(t){return this.themeObject=(0,yX.Kn)(t)?(0,yX.b$)({},this.themeObject,I1(t)):O1(t),this},e.prototype.interaction=function(t,e){var n=this.interactions[t];n&&n.destroy();var r=g1(t,this,e);return r&&(r.init(),this.interactions[t]=r),this},e.prototype.removeInteraction=function(t){var e=this.interactions[t];e&&(e.destroy(),this.interactions[t]=void 0)},e.prototype.changeData=function(t){this.isDataChanged=!0,this.emit(vX.BEFORE_CHANGE_DATA,X1.fromData(this,vX.BEFORE_CHANGE_DATA,null)),this.data(t),this.paint(!0);for(var e=this.views,n=0,r=e.length;n<r;n++){e[n].changeData(t)}this.emit(vX.AFTER_CHANGE_DATA,X1.fromData(this,vX.AFTER_CHANGE_DATA,null))},e.prototype.createView=function(t){this.parent&&this.parent.parent&&console.warn("The view nesting recursive feature will be removed at G2 V4.1. Please avoid to use it.");var n={data:this.options.data,scales:(0,yX.d9)(this.options.scales),axes:(0,yX.d9)(this.options.axes),coordinate:(0,yX.d9)(this.coordinateController.getOption()),tooltip:(0,yX.d9)(this.options.tooltip),legends:(0,yX.d9)(this.options.legends),animate:this.options.animate,visible:this.visible},r=new e((0,mX.pi)((0,mX.pi)({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:CX}),middleGroup:this.middleGroup.addGroup({zIndex:SX}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:wX}),theme:this.themeObject,padding:this.padding},t),{options:(0,mX.pi)((0,mX.pi)({},n),(0,yX.U2)(t,"options",{}))}));return this.views.push(r),r},e.prototype.view=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(t)},e.prototype.removeView=function(t){var e=(0,yX.Od)(this.views,(function(e){return e===t}))[0];return e&&e.destroy(),e},e.prototype.getCoordinate=function(){return this.coordinateInstance},e.prototype.getTheme=function(){return this.themeObject},e.prototype.getXScale=function(){var t=this.geometries[0];return t?t.getXScale():null},e.prototype.getYScales=function(){var t={},e=[];return this.geometries.forEach((function(n){var r=n.getYScale(),i=r.field;t[i]||(t[i]=!0,e.push(r))})),e},e.prototype.getScalesByDim=function(t){for(var e=this.geometries,n={},r=0,i=e.length;r<i;r++){var o=e[r],a="x"===t?o.getXScale():o.getYScale();a&&!n[a.field]&&(n[a.field]=a)}return n},e.prototype.getScale=function(t,e){var n=e||this.getScaleKey(t);return this.getRootView().scalePool.getScale(n)},e.prototype.getScaleByField=function(t,e){return this.getScale(t,e)},e.prototype.getOptions=function(){return this.options},e.prototype.getData=function(){return this.filteredData},e.prototype.getOriginalData=function(){return this.options.data},e.prototype.getPadding=function(){return this.autoPadding.getPadding()},e.prototype.getGeometries=function(){return this.geometries},e.prototype.getElements=function(){return(0,yX.u4)(this.geometries,(function(t,e){return t.concat(e.getElements())}),[])},e.prototype.getElementsBy=function(t){return this.getElements().filter((function(e){return t(e)}))},e.prototype.getLayer=function(t){return t===pX.BG?this.backgroundGroup:t===pX.MID?this.middleGroup:(pX.FORE,this.foregroundGroup)},e.prototype.isPointInPlot=function(t){return function(t,e){var n=!1;if(t)if("theta"===t.type){var r=t.start,i=t.end;n=IQ(e.x,r.x,i.x)&&IQ(e.y,r.y,i.y)}else{var o=t.invert(e);n=IQ(o.x,0,1)&&IQ(o.y,0,1)}return n}(this.getCoordinate(),t)},e.prototype.getLegendAttributes=function(){return(0,yX.xH)(this.geometries.map((function(t){return t.getGroupAttributes()})))},e.prototype.getGroupScales=function(){var t=this.geometries.map((function(t){return t.getGroupScales()}));return OQ((0,yX.xH)(t))},e.prototype.getCanvas=function(){return this.getRootView().canvas},e.prototype.getRootView=function(){for(var t=this;t.parent;)t=t.parent;return t},e.prototype.getXY=function(t){var e,n,r=this.getCoordinate(),i=this.getScalesByDim("x"),o=this.getScalesByDim("y");if((0,yX.S6)(t,(function(t,r){i[r]&&(e=i[r].scale(t)),o[r]&&(n=o[r].scale(t))})),!(0,yX.UM)(e)&&!(0,yX.UM)(n))return r.convert({x:e,y:n})},e.prototype.getController=function(t){return(0,yX.sE)(this.controllers,(function(e){return e.name===t}))},e.prototype.showTooltip=function(t){var e=this.getController("tooltip");return e&&e.showTooltip(t),this},e.prototype.hideTooltip=function(){var t=this.getController("tooltip");return t&&t.hideTooltip(),this},e.prototype.lockTooltip=function(){var t=this.getController("tooltip");return t&&t.lockTooltip(),this},e.prototype.unlockTooltip=function(){var t=this.getController("tooltip");return t&&t.unlockTooltip(),this},e.prototype.isTooltipLocked=function(){var t=this.getController("tooltip");return t&&t.isTooltipLocked()},e.prototype.getTooltipItems=function(t){var e=this.getController("tooltip");return e?e.getTooltipItems(t):[]},e.prototype.getSnapRecords=function(t){for(var e=this.geometries,n=[],r=0,i=e.length;r<i;r++){var o=e[r],a=o.dataArray;o.sort(a);for(var s=void 0,l=0,c=a.length;l<c;l++){(s=N1(t,a[l],o))&&n.push(s)}}var u=this.views;for(r=0,i=u.length;r<i;r++){var h=u[r].getSnapRecords(t);n=n.concat(h)}return n},e.prototype.getComponents=function(){for(var t=[],e=this.controllers,n=0,r=e.length;n<r;n++){var i=e[n];t=t.concat(i.getComponents())}return t},e.prototype.filterData=function(t){var e=this.options.filters;return 0===(0,yX.dp)(e)?t:(0,yX.hX)(t,(function(t,n){return Object.keys(e).every((function(r){return(0,e[r])(t[r],t,n)}))}))},e.prototype.filterFieldData=function(t,e){var n=this.options.filters,r=(0,yX.U2)(n,t);return(0,yX.o8)(r)?e:e.filter((function(e,n){return r(e[t],e,n)}))},e.prototype.adjustCoordinate=function(){var t=this.getCoordinate(),e=t.start,n=t.end,r=this.coordinateBBox.bl,i=this.coordinateBBox.tr;(0,yX.Xy)(e,r)&&(0,yX.Xy)(n,i)?this.isCoordinateChanged=!1:(this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(r,i))},e.prototype.paint=function(t){this.renderDataRecursive(t),this.syncScale(),this.emit(vX.BEFORE_PAINT),this.renderPaddingRecursive(t),this.renderLayoutRecursive(t),this.renderBackgroundStyleShape(),this.renderPaintRecursive(t),this.emit(vX.AFTER_PAINT),this.isDataChanged=!1},e.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var t=(0,yX.U2)(this.themeObject,"background");if(t){this.backgroundStyleRectShape||(this.backgroundStyleRectShape=this.backgroundGroup.addShape("rect",{attrs:{},zIndex:-1,capture:!1}),this.backgroundStyleRectShape.toBack());var e=this.viewBBox,n=e.x,r=e.y,i=e.width,o=e.height;this.backgroundStyleRectShape.attr({fill:t,x:n,y:r,width:i,height:o})}else this.backgroundStyleRectShape&&(this.backgroundStyleRectShape.remove(!0),this.backgroundStyleRectShape=void 0)}},e.prototype.renderPaddingRecursive=function(t){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(t),this.autoPadding=K1(this).shrink(j1(this.appendPadding)),this.coordinateBBox=this.viewBBox.shrink(this.autoPadding.getPadding()),this.adjustCoordinate(),this.controllers.find((function(t){return"tooltip"===t.name})).update();for(var e=this.views,n=0,r=e.length;n<r;n++){e[n].renderPaddingRecursive(t)}},e.prototype.renderLayoutRecursive=function(t){var e=!0===this.syncViewPadding?J1:(0,yX.mf)(this.syncViewPadding)?this.syncViewPadding:void 0;e&&(e(this,this.views,Z1),this.views.forEach((function(t){t.coordinateBBox=t.viewBBox.shrink(t.autoPadding.getPadding()),t.adjustCoordinate()}))),this.doLayout();for(var n=this.views,r=0,i=n.length;r<i;r++){n[r].renderLayoutRecursive(t)}},e.prototype.renderPaintRecursive=function(t){var e=this.middleGroup;if(this.limitInPlot){var n=NQ(this.coordinateInstance),r=n.type,i=n.attrs;e.setClip({type:r,attrs:i})}else e.setClip(void 0);this.paintGeometries(t),this.renderComponents(t);for(var o=this.views,a=0,s=o.length;a<s;a++){o[a].renderPaintRecursive(t)}},e.prototype.createScale=function(t,e,n,r){var i=(0,yX.U2)(this.options.scales,[t]),o=(0,mX.pi)((0,mX.pi)({},i),n);return this.parent?this.parent.createScale(t,e,o,r):this.scalePool.createScale(t,e,o,r)},e.prototype.renderDataRecursive=function(t){this.doFilterData(),this.createCoordinate(),this.initGeometries(t),this.renderFacet(t);for(var e=this.views,n=0,r=e.length;n<r;n++){e[n].renderDataRecursive(t)}},e.prototype.calculateViewBBox=function(){var t,e,n,r;if(this.parent){var i=this.parent.coordinateBBox;t=i.x,e=i.y,n=i.width,r=i.height}else t=0,e=0,n=this.canvas.get("width"),r=this.canvas.get("height");var o=this.region,a=o.start,s=o.end,l=new AQ(t+n*a.x,e+r*a.y,n*(s.x-a.x),r*(s.y-a.y));this.viewBBox&&this.viewBBox.isEqual(l)||(this.viewBBox=new AQ(t+n*a.x,e+r*a.y,n*(s.x-a.x),r*(s.y-a.y))),this.coordinateBBox=this.viewBBox},e.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},e.prototype.initComponentController=function(){for(var t=this.usedControllers,e=0,n=t.length;e<n;e++){var r=t[e],i=U1[r];i&&this.controllers.push(new i(this))}},e.prototype.createViewEvent=function(t){var e=t.shape,n=t.name,r=e?e.get("origin"):null,i=new X1(this,t,r);return i.type=n,i},e.prototype.doPlotEvent=function(t){var e=t.type,n={x:t.x,y:t.y};if(["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"].includes(e)){var r=this.isPointInPlot(n),i=t.clone();if(r){var o="plot:".concat(e);i.type=o,this.emit(o,i),"mouseleave"!==e&&"touchend"!==e||(this.isPreMouseInPlot=!1)}"mousemove"===e||"touchmove"===e?(this.isPreMouseInPlot&&!r?("mousemove"===e&&(i.type=_X.MOUSE_LEAVE,this.emit(_X.MOUSE_LEAVE,i)),i.type=_X.LEAVE,this.emit(_X.LEAVE,i)):!this.isPreMouseInPlot&&r&&("mousemove"===e&&(i.type=_X.MOUSE_ENTER,this.emit(_X.MOUSE_ENTER,i)),i.type=_X.ENTER,this.emit(_X.ENTER,i)),this.isPreMouseInPlot=r):"mouseleave"!==e&&"touchend"!==e||this.isPreMouseInPlot&&("mouseleave"===e&&(i.type=_X.MOUSE_LEAVE,this.emit(_X.MOUSE_LEAVE,i)),i.type=_X.LEAVE,this.emit(_X.LEAVE,i),this.isPreMouseInPlot=!1)}},e.prototype.doFilterData=function(){var t=this.options.data;this.filteredData=this.filterData(t)},e.prototype.initGeometries=function(t){this.createOrUpdateScales();for(var e=this.getCoordinate(),n=(0,yX.U2)(this.options,"scales",{}),r=this.geometries,i=0,o=r.length;i<o;i++){var a=r[i];a.scales=this.getGeometryScales();var s={coordinate:e,scaleDefs:n,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};t?a.update(s):a.init(s)}this.adjustScales()},e.prototype.createOrUpdateScales=function(){for(var t=this.getScaleFields(),e=this.getGroupedFields(),n=this.getOptions(),r=n.data,i=n.scales,o=void 0===i?{}:i,a=this.filteredData,s=0,l=t.length;s<l;s++){var c=t[s],u=o[c],h=this.getScaleKey(c);this.createScale(c,e.includes(c)?r:a,u,h),this.createdScaleKeys.set(h,!0)}},e.prototype.syncScale=function(){this.getRootView().scalePool.sync(this.getCoordinate(),this.theme)},e.prototype.getGeometryScales=function(){for(var t=this.getScaleFields(),e={},n=0;n<t.length;n++){var r=t[n];e[r]=this.getScaleByField(r)}return e},e.prototype.getScaleFields=function(){for(var t=[],e=new Map,n=this.geometries,r=0;r<n.length;r++){OQ(n[r].getScaleFields(),t,e)}return t},e.prototype.getGroupedFields=function(){for(var t=[],e=new Map,n=this.geometries,r=0;r<n.length;r++){OQ(n[r].getGroupFields(),t,e)}return t},e.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},e.prototype.adjustCategoryScaleRange=function(){var t=this,e=(0,mX.ev)([this.getXScale()],(0,mX.CR)(this.getYScales()),!1).filter((function(t){return!!t})),n=this.getCoordinate(),r=this.options.scales;(0,yX.S6)(e,(function(e){var i=e.field,o=e.values,a=e.isCategory,s=e.isIdentity;(a||s)&&o&&!(0,yX.U2)(r,[i,"range"])&&(e.range=jQ(e,n,t.theme))}))},e.prototype.initComponents=function(t){for(var e=this.controllers,n=0;n<e.length;n++){var r=e[n];t?r.update():(r.clear(),r.render())}},e.prototype.doLayout=function(){this.layoutFunc(this)},e.prototype.createCoordinate=function(){var t=this.coordinateBBox.bl,e=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(t,e)},e.prototype.paintGeometries=function(t){for(var e=this.options.animate,n=this.getCoordinate(),r={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},i=this.geometries,o=0;o<i.length;o++){var a=i[o];a.coordinate=n,a.canvasRegion=r,e||a.animate(!1),a.paint(t)}},e.prototype.renderComponents=function(t){for(var e=this.getComponents(),n=0;n<e.length;n++){e[n].component.render()}},e.prototype.renderFacet=function(t){this.facetInstance&&(t?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},e.prototype.initOptions=function(){var t=this,e=this.options,n=e.geometries,r=void 0===n?[]:n,i=e.interactions,o=void 0===i?[]:i,a=e.views,s=void 0===a?[]:a,l=e.annotations,c=void 0===l?[]:l,u=e.coordinate,h=e.events,p=e.facets;this.coordinateController?u&&this.coordinateController.update(u):this.coordinateController=new G1(u);for(var d=0;d<r.length;d++){var f=r[d];this.createGeometry(f)}for(var g=0;g<o.length;g++){var m=o[g],y=m.type,v=m.cfg;this.interaction(y,v)}for(var x=0;x<s.length;x++){var _=s[x];this.createView(_)}for(var b=this.getController("annotation"),w=0;w<c.length;w++){var S=c[w];b.annotation(S)}h&&(0,yX.S6)(h,(function(e,n){t.on(n,e)})),p&&(0,yX.S6)(p,(function(e){var n=e.type,r=(0,mX._T)(e,["type"]);t.facet(n,r)}))},e.prototype.createGeometry=function(t){var e=t.type,n=t.cfg,r=void 0===n?{}:n;if(this[e]){var i=this[e](r);(0,yX.S6)(t,(function(t,e){(0,yX.mf)(i[e])&&i[e](t)}))}},e.prototype.getScaleKey=function(t){return"".concat(this.id,"-").concat(t)},e}(BX);function t2(t,e){Q1.prototype[t.toLowerCase()]=function(t){void 0===t&&(t={});var n=(0,mX.pi)({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},t),r=new e(n);return this.geometries.push(r),r}}var e2=function(t){function e(e){var n=this,r=e.container,i=e.width,o=e.height,a=e.autoFit,s=void 0!==a&&a,l=e.padding,c=e.appendPadding,u=e.renderer,h=void 0===u?"canvas":u,p=e.pixelRatio,d=e.localRefresh,f=void 0===d||d,g=e.visible,m=void 0===g||g,y=e.supportCSSTransform,v=void 0!==y&&y,x=e.defaultInteractions,_=void 0===x?["tooltip","legend-filter","legend-active","continuous-filter","ellipsis-text","axis-description"]:x,b=e.options,w=e.limitInPlot,S=e.theme,C=e.syncViewPadding,E=(0,yX.HD)(r)?document.getElementById(r):r,k=DX('<div style="position:relative;"></div>');E.appendChild(k);var M=NX(E,s,i,o),T=new(function(t){var e=OX[t];if(!e)throw new Error("G engine '".concat(t,"' is not exist, please register it at first."));return e}(h).Canvas)((0,mX.pi)({container:k,pixelRatio:p,localRefresh:f,supportCSSTransform:v},M));return(n=t.call(this,{parent:null,canvas:T,backgroundGroup:T.addGroup({zIndex:CX}),middleGroup:T.addGroup({zIndex:SX}),foregroundGroup:T.addGroup({zIndex:wX}),padding:l,appendPadding:c,visible:m,options:b,limitInPlot:w,theme:S,syncViewPadding:C})||this).onResize=(0,yX.Ds)((function(){n.forceFit()}),300),n.ele=E,n.canvas=T,n.width=M.width,n.height=M.height,n.autoFit=s,n.localRefresh=f,n.renderer=h,n.wrapperElement=k,n.updateCanvasStyle(),n.bindAutoFit(),n.initDefaultInteractions(_),n}return(0,mX.ZT)(e,t),e.prototype.initDefaultInteractions=function(t){var e=this;(0,yX.S6)(t,(function(t){e.interaction(t)}))},e.prototype.aria=function(t){var e="aria-label";!1===t?this.ele.removeAttribute(e):this.ele.setAttribute(e,t.label)},e.prototype.changeSize=function(t,e){return this.width===t&&this.height===e||(this.emit(vX.BEFORE_CHANGE_SIZE),this.width=t,this.height=e,this.canvas.changeSize(t,e),this.render(!0),this.emit(vX.AFTER_CHANGE_SIZE)),this},e.prototype.clear=function(){t.prototype.clear.call(this),this.aria(!1)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),function(t){var e=t.parentNode;e&&e.removeChild(t)}(this.wrapperElement),this.wrapperElement=null},e.prototype.changeVisible=function(e){return t.prototype.changeVisible.call(this,e),this.wrapperElement.style.display=e?"":"none",this},e.prototype.forceFit=function(){if(!this.destroyed){var t=NX(this.ele,!0,this.width,this.height),e=t.width,n=t.height;this.changeSize(e,n)}},e.prototype.updateCanvasStyle=function(){RX(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},e.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},e.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},e}(Q1),n2=e2,r2=function(){function t(t){this.visible=!0,this.components=[],this.view=t}return t.prototype.clear=function(t){(0,yX.S6)(this.components,(function(t){t.component.destroy()})),this.components=[]},t.prototype.destroy=function(){this.clear()},t.prototype.getComponents=function(){return this.components},t.prototype.changeVisible=function(t){this.visible!==t&&(this.components.forEach((function(e){t?e.component.show():e.component.hide()})),this.visible=t)},t}();var i2=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isLocked=!1,e}return(0,mX.ZT)(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.isVisible=function(){return!1!==this.view.getOptions().tooltip},e.prototype.render=function(){},e.prototype.showTooltip=function(t){if(this.point=t,this.isVisible()){var e=this.view,n=this.getTooltipItems(t);if(n.length){var r=this.getTitle(n),i={x:n[0].x,y:n[0].y};e.emit("tooltip:show",X1.fromData(e,"tooltip:show",(0,mX.pi)({items:n,title:r},t)));var o=this.getTooltipCfg(),a=o.follow,s=o.showMarkers,l=o.showCrosshairs,c=o.showContent,u=o.marker,h=this.items,p=this.title;if((0,yX.Xy)(p,r)&&(0,yX.Xy)(h,n)?(this.tooltip&&a&&(this.tooltip.update(t),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()):(e.emit("tooltip:change",X1.fromData(e,"tooltip:change",(0,mX.pi)({items:n,title:r},t))),((0,yX.mf)(c)?c(n):c)&&(this.tooltip||this.renderTooltip(),this.tooltip.update((0,yX.CD)({},o,{items:this.getItemsAfterProcess(n),title:r},a?t:{})),this.tooltip.show()),s&&this.renderTooltipMarkers(n,u)),this.items=n,this.title=r,l){var d=(0,yX.U2)(o,["crosshairs","follow"],!1);this.renderCrosshairs(d?t:i,o)}}else this.hideTooltip()}},e.prototype.hideTooltip=function(){if(this.getTooltipCfg().follow){var t=this.tooltipMarkersGroup;t&&t.hide();var e=this.xCrosshair,n=this.yCrosshair;e&&e.hide(),n&&n.hide();var r=this.tooltip;r&&r.hide(),this.view.emit("tooltip:hide",X1.fromData(this.view,"tooltip:hide",{})),this.point=null}else this.point=null},e.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},e.prototype.unlockTooltip=function(){this.isLocked=!1;var t=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(t.capture)},e.prototype.isTooltipLocked=function(){return this.isLocked},e.prototype.clear=function(){var t=this,e=t.tooltip,n=t.xCrosshair,r=t.yCrosshair,i=t.tooltipMarkersGroup;e&&(e.hide(),e.clear()),n&&n.clear(),r&&r.clear(),i&&i.clear(),(null===e||void 0===e?void 0:e.get("customContent"))&&(this.tooltip.destroy(),this.tooltip=null),this.title=null,this.items=null},e.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.reset()},e.prototype.reset=function(){this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},e.prototype.changeVisible=function(t){if(this.visible!==t){var e=this,n=e.tooltip,r=e.tooltipMarkersGroup,i=e.xCrosshair,o=e.yCrosshair;t?(n&&n.show(),r&&r.show(),i&&i.show(),o&&o.show()):(n&&n.hide(),r&&r.hide(),i&&i.hide(),o&&o.hide()),this.visible=t}},e.prototype.getTooltipItems=function(t){var e,n,r,i,o,a,s=this.findItemsFromView(this.view,t);if(s.length){s=(0,yX.xH)(s);try{for(var l=(0,mX.XA)(s),c=l.next();!c.done;c=l.next()){var u=c.value;try{for(var h=(r=void 0,(0,mX.XA)(u)),p=h.next();!p.done;p=h.next()){var d=p.value,f=d.mappingData,g=f.x,m=f.y;d.x=(0,yX.kJ)(g)?g[g.length-1]:g,d.y=(0,yX.kJ)(m)?m[m.length-1]:m}}catch(S){r={error:S}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}}}catch(C){e={error:C}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}if(!1===this.getTooltipCfg().shared&&s.length>1){var y=s[0],v=Math.abs(t.y-y[0].y);try{for(var x=(0,mX.XA)(s),_=x.next();!_.done;_=x.next()){var b=_.value,w=Math.abs(t.y-b[0].y);w<=v&&(y=b,v=w)}}catch(E){o={error:E}}finally{try{_&&!_.done&&(a=x.return)&&a.call(x)}finally{if(o)throw o.error}}s=[y]}return function(t){for(var e=[],n=function(n){var r=t[n];(0,yX.sE)(e,(function(t){return t.color===r.color&&t.name===r.name&&t.value===r.value&&t.title===r.title}))||e.push(r)},r=0;r<t.length;r++)n(r);return e}((0,yX.xH)(s))}return[]},e.prototype.layout=function(){},e.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var t=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}})}},e.prototype.isCursorEntered=function(t){if(this.tooltip){var e=this.tooltip.getContainer(),n=this.tooltip.get("capture");if(e&&n){var r=e.getBoundingClientRect(),i=r.x,o=r.y,a=r.width,s=r.height;return new AQ(i,o,a,s).isPointIn(t)}}return!1},e.prototype.getTooltipCfg=function(){var t=this.view,e=t.getOptions().tooltip,n=this.processCustomContent(e),r=t.getTheme(),i=(0,yX.U2)(r,["components","tooltip"],{}),o=(0,yX.U2)(n,"enterable",i.enterable);return(0,yX.b$)({},i,n,{capture:!(!o&&!this.isLocked)})},e.prototype.processCustomContent=function(t){if((0,yX.jn)(t)||!(0,yX.U2)(t,"customContent"))return t;var e=t.customContent;return(0,mX.pi)((0,mX.pi)({},t),{customContent:function(t,n){var r=e(t,n)||"";return(0,yX.HD)(r)?'<div class="g2-tooltip">'+r+"</div>":r}})},e.prototype.getTitle=function(t){var e=t[0].title||t[0].name;return this.title=e,e},e.prototype.renderTooltip=function(){var t=this.view.getCanvas(),e={start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}},n=this.getTooltipCfg(),r=new bQ((0,mX.pi)((0,mX.pi)({parent:t.get("el").parentNode,region:e},n),{visible:!1,crosshairs:null}));r.init(),this.tooltip=r},e.prototype.renderTooltipMarkers=function(t,e){var n,r,i=this.getTooltipMarkersGroup(),o=this.view.getRootView(),a=o.limitInPlot;try{for(var s=(0,mX.XA)(t),l=s.next();!l.done;l=s.next()){var c=l.value,u=c.x,h=c.y;if(a||(null===i||void 0===i?void 0:i.getClip())){var p=NQ(o.getCoordinate()),d=p.type,f=p.attrs;null===i||void 0===i||i.setClip({type:d,attrs:f})}else null===i||void 0===i||i.setClip(void 0);var g=this.view.getTheme(),m=(0,yX.U2)(g,["components","tooltip","marker"],{}),y=(0,mX.pi)((0,mX.pi)({fill:c.color,symbol:"circle",shadowColor:c.color},(0,yX.mf)(e)?(0,mX.pi)((0,mX.pi)({},m),e(c)):e),{x:u,y:h});i.addShape("marker",{attrs:y})}}catch(v){n={error:v}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},e.prototype.renderCrosshairs=function(t,e){var n=(0,yX.U2)(e,["crosshairs","type"],"x");"x"===n?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(t,e)):"y"===n?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(t,e)):"xy"===n&&(this.renderXCrosshairs(t,e),this.renderYCrosshairs(t,e))},e.prototype.renderXCrosshairs=function(t,e){var n,r,i=this.getViewWithGeometry(this.view).getCoordinate();if(i.isRect)i.isTransposed?(n={x:i.start.x,y:t.y},r={x:i.end.x,y:t.y}):(n={x:t.x,y:i.end.y},r={x:t.x,y:i.start.y});else{var o=LQ(i,t),a=i.getCenter(),s=i.getRadius();r=CQ(a.x,a.y,s,o),n=a}var l=(0,yX.b$)({start:n,end:r,container:this.getTooltipCrosshairsGroup()},(0,yX.U2)(e,"crosshairs",{}),this.getCrosshairsText("x",t,e));delete l.type;var c=this.xCrosshair;c?c.update(l):(c=new hJ(l)).init(),c.render(),c.show(),this.xCrosshair=c},e.prototype.renderYCrosshairs=function(t,e){var n,r,i=this.getViewWithGeometry(this.view).getCoordinate();if(i.isRect){var o=void 0,a=void 0;i.isTransposed?(o={x:t.x,y:i.end.y},a={x:t.x,y:i.start.y}):(o={x:i.start.x,y:t.y},a={x:i.end.x,y:t.y}),n={start:o,end:a},r="Line"}else n={center:i.getCenter(),radius:RQ(i,t),startAngle:i.startAngle,endAngle:i.endAngle},r="Circle";delete(n=(0,yX.b$)({container:this.getTooltipCrosshairsGroup()},n,(0,yX.U2)(e,"crosshairs",{}),this.getCrosshairsText("y",t,e))).type;var s=this.yCrosshair;s?i.isRect&&"circle"===s.get("type")||!i.isRect&&"line"===s.get("type")?(s=new l[r](n)).init():s.update(n):(s=new l[r](n)).init(),s.render(),s.show(),this.yCrosshair=s},e.prototype.getCrosshairsText=function(t,e,n){var r=(0,yX.U2)(n,["crosshairs","text"]),i=(0,yX.U2)(n,["crosshairs","follow"]),o=this.items;if(r){var a=this.getViewWithGeometry(this.view),s=o[0],l=a.getXScale(),c=a.getYScales()[0],u=void 0,h=void 0;if(i){var p=this.view.getCoordinate().invert(e);u=l.invert(p.x),h=c.invert(p.y)}else u=s.data[l.field],h=s.data[c.field];var d="x"===t?u:h;return(0,yX.mf)(r)?r=r(t,d,o,e):r.content=d,{text:r}}},e.prototype.getGuideGroup=function(){if(!this.guideGroup){var t=this.view.foregroundGroup;this.guideGroup=t.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},e.prototype.getTooltipMarkersGroup=function(){var t=this.tooltipMarkersGroup;return t&&!t.destroyed?(t.clear(),t.show()):((t=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"})).toFront(),this.tooltipMarkersGroup=t),t},e.prototype.getTooltipCrosshairsGroup=function(){var t=this.tooltipCrosshairsGroup;return t||((t=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1})).toBack(),this.tooltipCrosshairsGroup=t),t},e.prototype.findItemsFromView=function(t,e){var n,r;if(!1===t.getOptions().tooltip)return[];var i=$1(t,e,this.getTooltipCfg());try{for(var o=(0,mX.XA)(t.views),a=o.next();!a.done;a=o.next()){var s=a.value;i=i.concat(this.findItemsFromView(s,e))}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},e.prototype.getViewWithGeometry=function(t){var e=this;return t.geometries.length?t:(0,yX.sE)(t.views,(function(t){return e.getViewWithGeometry(t)}))},e.prototype.getItemsAfterProcess=function(t){var e=this.getTooltipCfg().customItems,n=e||function(t){return t};return n(t)},e}(r2),o2=i2,a2={};function s2(t){return a2[t.toLowerCase()]}function l2(t,e){a2[t.toLowerCase()]=e}var c2={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},u2={interval:function(t){return{enter:{animation:t.isRect?t.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:t.isPolar&&t.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},h2={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(t){var e;return t.isRect?e=t.isTransposed?"grow-in-x":"grow-in-y":(e="grow-in-xy",t.isPolar&&t.isTransposed&&(e="wave-in")),{animation:e}},schema:function(t){return{animation:t.isRect?t.isTransposed?"grow-in-x":"grow-in-y":"grow-in-xy"}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function p2(t,e,n){var r=u2[t];return r&&((0,yX.mf)(r)&&(r=r(e)),r=(0,yX.b$)({},c2,r),n)?r[n]:r}function d2(t,e,n){var r=(0,yX.U2)(t.get("origin"),"data",PX),i=e.animation,o=function(t,e){return{delay:(0,yX.mf)(t.delay)?t.delay(e):t.delay,easing:(0,yX.mf)(t.easing)?t.easing(e):t.easing,duration:(0,yX.mf)(t.duration)?t.duration(e):t.duration,callback:t.callback,repeat:t.repeat}}(e,r);if(i){var a=s2(i);a&&a(t,o,n)}else t.animate(n.toAttrs,o)}var f2="element-background",g2=function(t){function e(e){var n=t.call(this,e)||this;n.labelShape=[],n.states=[];var r=e.shapeFactory,i=e.container,o=e.offscreenGroup,a=e.elementIndex,s=e.visible,l=void 0===s||s;return n.shapeFactory=r,n.container=i,n.offscreenGroup=o,n.visible=l,n.elementIndex=a,n}return(0,mX.ZT)(e,t),e.prototype.draw=function(t,e){void 0===e&&(e=!1),this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.drawShape(t,e),!1===this.visible&&this.changeVisible(!1)},e.prototype.update=function(t){var e=this.shapeFactory,n=this.shape;if(n){this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.setShapeInfo(n,t);var r=this.getOffscreenGroup(),i=e.drawShape(this.shapeType,t,r);i.cfg.data=this.data,i.cfg.origin=t,i.cfg.element=this,this.syncShapeStyle(n,i,this.getStates(),this.getAnimateCfg("update"))}},e.prototype.destroy=function(){var e=this.shapeFactory,n=this.shape;if(n){var r=this.getAnimateCfg("leave");r?d2(n,r,{coordinate:e.coordinate,toAttrs:(0,mX.pi)({},n.attr())}):n.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=[],this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,t.prototype.destroy.call(this)},e.prototype.changeVisible=function(e){t.prototype.changeVisible.call(this,e),e?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach((function(t){t.show()}))):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach((function(t){t.hide()})))},e.prototype.setState=function(t,e){var n=this,r=n.states,i=n.shapeFactory,o=n.model,a=n.shape,s=n.shapeType,l=r.indexOf(t);if(e){if(l>-1)return;r.push(t),"active"!==t&&"selected"!==t||null===a||void 0===a||a.toFront()}else{if(-1===l)return;if(r.splice(l,1),"active"===t||"selected"===t){var c=this.geometry,u=c.sortZIndex,h=c.zIndexReversed?this.geometry.elements.length-this.elementIndex:this.elementIndex;u?a.setZIndex(h):a.set("zIndex",h)}}var p=i.drawShape(s,o,this.getOffscreenGroup());r.length?this.syncShapeStyle(a,p,r,null):this.syncShapeStyle(a,p,["reset"],null),p.remove(!0);var d={state:t,stateStatus:e,element:this,target:this.container};this.container.emit("statechange",d),PZ(this.shape,"statechange",d)},e.prototype.clearStates=function(){var t=this,e=this.states;(0,yX.S6)(e,(function(e){t.setState(e,!1)})),this.states=[]},e.prototype.hasState=function(t){return this.states.includes(t)},e.prototype.getStates=function(){return this.states},e.prototype.getData=function(){return this.data},e.prototype.getModel=function(){return this.model},e.prototype.getBBox=function(){var t=this.shape,e=this.labelShape,n={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return t&&(n=t.getCanvasBBox()),e&&e.forEach((function(t){var e=t.getCanvasBBox();n.x=Math.min(e.x,n.x),n.y=Math.min(e.y,n.y),n.minX=Math.min(e.minX,n.minX),n.minY=Math.min(e.minY,n.minY),n.maxX=Math.max(e.maxX,n.maxX),n.maxY=Math.max(e.maxY,n.maxY)})),n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n},e.prototype.getStatesStyle=function(){if(!this.statesStyle){var t=this,e=t.shapeType,n=t.geometry,r=t.shapeFactory,i=n.stateOption,o=r.defaultShapeType,a=r.theme[e]||r.theme[o];this.statesStyle=(0,yX.b$)({},a,i)}return this.statesStyle},e.prototype.getStateStyle=function(t,e){var n=this.getStatesStyle(),r=(0,yX.U2)(n,[t,"style"],{}),i=r[e]||r;return(0,yX.mf)(i)?i(this):i},e.prototype.getAnimateCfg=function(t){var e=this,n=this.animate;if(n){var r=n[t];return r?(0,mX.pi)((0,mX.pi)({},r),{callback:function(){var t;(0,yX.mf)(r.callback)&&r.callback(),null===(t=e.geometry)||void 0===t||t.emit(xX.AFTER_DRAW_ANIMATE)}}):r}return null},e.prototype.drawShape=function(t,e){var n;void 0===e&&(e=!1);var r=this,i=r.shapeFactory,o=r.container,a=r.shapeType;if(this.shape=i.drawShape(a,t,o),this.shape){this.setShapeInfo(this.shape,t);var s=this.shape.cfg.name;s?(0,yX.HD)(s)&&(this.shape.cfg.name=["element",s]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var l=e?"enter":"appear",c=this.getAnimateCfg(l);c&&(null===(n=this.geometry)||void 0===n||n.emit(xX.BEFORE_DRAW_ANIMATE),d2(this.shape,c,{coordinate:i.coordinate,toAttrs:(0,mX.pi)({},this.shape.attr())}))}},e.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},e.prototype.setShapeInfo=function(t,e){var n=this;(t.cfg.origin=e,t.cfg.element=this,t.isGroup())&&t.get("children").forEach((function(t){n.setShapeInfo(t,e)}))},e.prototype.syncShapeStyle=function(t,e,n,r,i){var o,a=this;if(void 0===n&&(n=[]),void 0===i&&(i=0),t&&e){var s=t.get("clipShape"),l=e.get("clipShape");if(this.syncShapeStyle(s,l,n,r),t.isGroup())for(var c=t.get("children"),u=e.get("children"),h=0;h<c.length;h++)this.syncShapeStyle(c[h],u[h],n,r,i+h);else{if(!(0,yX.xb)(n)&&!(0,yX.Xy)(n,["reset"])){var p=t.get("name");(0,yX.kJ)(p)&&(p=p[1]),(0,yX.S6)(n,(function(t){if(e.get("name")!==f2){var n=a.getStateStyle(t,p||i);e.attr(n)}}))}var d=TQ(t,e);this.animate?r?(null===(o=this.geometry)||void 0===o||o.emit(xX.BEFORE_DRAW_ANIMATE),d2(t,r,{coordinate:this.shapeFactory.coordinate,toAttrs:d,shapeModel:this.model})):(0,yX.xb)(n)?t.attr(d):(t.stopAnimate(),t.animate(d,{duration:300})):t.attr(d)}}},e.prototype.getShapeType=function(t){var e=(0,yX.U2)(t,"shape");return(0,yX.kJ)(e)?e[0]:e},e}(BX),m2=g2,y2={},v2={};function x2(t,e){y2[t.toLowerCase()]=e}function _2(t,e){v2[t.toLowerCase()]=e}var b2={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(t,e){var n=this.getShape(t);return n.getPoints?n.getPoints(e):this.getDefaultPoints(e)},getShape:function(t){var e=this[t]||this[this.defaultShapeType];return e.coordinate=this.coordinate,e},getDefaultPoints:function(){return[]},getDefaultStyle:function(t){return(0,yX.U2)(t,[this.defaultShapeType,"default","style"],{})},getMarker:function(t,e){var n=this.getShape(t);if(!n.getMarker){var r=this.defaultShapeType;n=this.getShape(r)}var i=this.theme,o=(0,yX.U2)(i,[t,"default"],{}),a=n.getMarker(e);return(0,yX.b$)({},o,a)},drawShape:function(t,e,n){return this.getShape(t).draw(e,n)}},w2={coordinate:null,parsePath:function(t){var e=this.coordinate,n=function(t){if(!t)return null;if((0,yX.kJ)(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(y0,(function(t,r,i){var o=[],a=r.toLowerCase();if(i.replace(v0,(function(t,e){e&&o.push(+e)})),"m"===a&&o.length>2&&(n.push([r].concat(o.splice(0,2))),a="l",r="m"===r?"l":"L"),"o"===a&&1===o.length&&n.push([r,o[0]]),"r"===a)n.push([r].concat(o));else for(;o.length>=e[a]&&(n.push([r].concat(o.splice(0,e[a]))),e[a]););return""})),n}(t);return n=e.isPolar?g0(e,n):function(t,e){var n=[];return(0,yX.S6)(e,(function(e){switch(e[0].toLowerCase()){case"m":case"l":case"c":n.push(c0(e,t));break;case"a":n.push(u0(e,t));break;default:n.push(e)}})),n}(e,n),n},parsePoint:function(t){return this.coordinate.convert(t)},parsePoints:function(t){var e=this.coordinate;return t.map((function(t){return e.convert(t)}))},draw:function(t,e){}},S2={};function C2(t,e){var n=(0,yX.jC)(t),r=(0,mX.pi)((0,mX.pi)((0,mX.pi)({},b2),e),{geometryType:t});return S2[n]=r,r}function E2(t,e,n){var r=(0,yX.jC)(t),i=S2[r],o=(0,mX.pi)((0,mX.pi)({},w2),n);return i[e]=o,o}function k2(t){var e=(0,yX.jC)(t);return S2[e]}function M2(t,e){return(0,yX.G)(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],(function(n){return!(0,yX.Xy)(t[n],e[n])}))}function T2(t){return(0,yX.kJ)(t)?t:t.split("*")}function I2(t,e){for(var n=[],r=[],i=[],o=new Map,a=0;a<e.length;a++){var s=e[a];t[s]?r.push(s):n.push(s),o.set(s,!0)}return Object.keys(t).forEach((function(t){o.has(t)||i.push(t)})),{added:n,updated:r,removed:i}}var P2=function(t){function e(e){var n=t.call(this,e)||this;n.type="base",n.attributes={},n.elements=[],n.elementsMap={},n.animateOption=!0,n.attributeOption={},n.lastElementsMap={},n.generatePoints=!1,n.beforeMappingData=null,n.adjusts={},n.idFields=[],n.hasSorted=!1,n.isCoordinateChanged=!1;var r=e.container,i=e.labelsContainer,o=e.coordinate,a=e.data,s=e.sortable,l=void 0!==s&&s,c=e.visible,u=void 0===c||c,h=e.theme,p=e.scales,d=void 0===p?{}:p,f=e.scaleDefs,g=void 0===f?{}:f,m=e.intervalPadding,y=e.dodgePadding,v=e.maxColumnWidth,x=e.minColumnWidth,_=e.columnWidthRatio,b=e.roseWidthRatio,w=e.multiplePieWidthRatio,S=e.zIndexReversed,C=e.sortZIndex,E=e.useDeferredLabel;return n.container=r,n.labelsContainer=i,n.coordinate=o,n.data=a,n.sortable=l,n.visible=u,n.userTheme=h,n.scales=d,n.scaleDefs=g,n.intervalPadding=m,n.dodgePadding=y,n.maxColumnWidth=v,n.minColumnWidth=x,n.columnWidthRatio=_,n.roseWidthRatio=b,n.multiplePieWidthRatio=w,n.zIndexReversed=S,n.sortZIndex=C,n.useDeferredLabel=E?"number"===typeof E?E:1/0:null,n}return(0,mX.ZT)(e,t),e.prototype.position=function(t){var e=t;(0,yX.PO)(t)||(e={fields:T2(t)});var n=(0,yX.U2)(e,"fields");return 1===n.length&&(n.unshift("1"),(0,yX.t8)(e,"fields",n)),(0,yX.t8)(this.attributeOption,"position",e),this},e.prototype.color=function(t,e){return this.createAttrOption("color",t,e),this},e.prototype.shape=function(t,e){return this.createAttrOption("shape",t,e),this},e.prototype.size=function(t,e){return this.createAttrOption("size",t,e),this},e.prototype.adjust=function(t){var e=t;return((0,yX.HD)(t)||(0,yX.PO)(t))&&(e=[t]),(0,yX.S6)(e,(function(t,n){(0,yX.Kn)(t)||(e[n]={type:t})})),this.adjustOption=e,this},e.prototype.style=function(t,e){if((0,yX.HD)(t)){var n=T2(t);this.styleOption={fields:n,callback:e}}else{var r=t,i=(n=r.fields,r.callback),o=r.cfg;this.styleOption=n||i||o?t:{cfg:t}}return this},e.prototype.tooltip=function(t,e){if((0,yX.HD)(t)){var n=T2(t);this.tooltipOption={fields:n,callback:e}}else this.tooltipOption=t;return this},e.prototype.animate=function(t){return this.animateOption=t,this},e.prototype.label=function(t,e,n){if((0,yX.HD)(t)){var r={},i=T2(t);r.fields=i,(0,yX.mf)(e)?r.callback=e:(0,yX.PO)(e)&&(r.cfg=e),n&&(r.cfg=n),this.labelOption=r}else this.labelOption=t;return this},e.prototype.state=function(t){return this.stateOption=t,this},e.prototype.customInfo=function(t){return this.customOption=t,this},e.prototype.init=function(t){void 0===t&&(t={}),this.setCfg(t),this.initAttributes(),this.processData(this.data),this.adjustScale()},e.prototype.update=function(t){void 0===t&&(t={});var e=t.data,n=t.isDataChanged,r=t.isCoordinateChanged,i=this.attributeOption,o=this.lastAttributeOption;(0,yX.Xy)(i,o)?!e||!n&&(0,yX.Xy)(e,this.data)?this.setCfg(t):(this.setCfg(t),this.initAttributes(),this.processData(e)):this.init(t),this.adjustScale(),this.isCoordinateChanged=r},e.prototype.paint=function(t){var e=this;void 0===t&&(t=!1),this.animateOption&&(this.animateOption=(0,yX.b$)({},p2(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elementsMap={},this.elements=[],this.getOffscreenGroup().clear();var n=this.beforeMappingData,r=this.beforeMapping(n);this.dataArray=new Array(r.length);for(var i=0;i<r.length;i++){var o=r[i];this.dataArray[i]=this.mapping(o)}if(this.updateElements(this.dataArray,t),this.lastElementsMap=this.elementsMap,this.canDoGroupAnimation(t)){var a=this.container,s=this.type,l=this.coordinate,c=(0,yX.U2)(this.animateOption,"appear"),u=this.getYScale(),h=l.convert({x:0,y:u.scale(this.getYMinValue())});!function(t,e,n,r,i){if(h2[n]){var o=h2[n](r),a=s2((0,yX.U2)(o,"animation",""));if(a){var s=(0,mX.pi)((0,mX.pi)((0,mX.pi)({},c2.appear),o),e);t.stopAnimate(),a(t,s,{coordinate:r,minYPoint:i,toAttrs:null})}}}(a,c,s,l,h)}if(this.labelOption){var p=this.useDeferredLabel,d=function(){return e.renderLabels((0,yX.xH)(e.dataArray),t)}.bind(this);if("number"===typeof p){var f="number"===typeof p&&p!==1/0?p:0;if(window.requestIdleCallback){var g=f&&f!==1/0?{timeout:f}:void 0;window.requestIdleCallback(d,g)}else setTimeout(d,f)}else d()}this.lastAttributeOption=(0,mX.pi)({},this.attributeOption),!1===this.visible&&this.changeVisible(!1)},e.prototype.clear=function(){var t=this,e=t.container,n=t.geometryLabel,r=t.offscreenGroup;e&&e.clear(),n&&n.clear(),r&&r.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},e.prototype.destroy=function(){this.clear(),this.container.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,t.prototype.destroy.call(this)},e.prototype.getGroupScales=function(){return this.groupScales},e.prototype.getAttribute=function(t){return this.attributes[t]},e.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},e.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},e.prototype.getGroupAttributes=function(){var t=[];return(0,yX.S6)(this.attributes,(function(e){IX.includes(e.type)&&t.push(e)})),t},e.prototype.getDefaultValue=function(t){var e,n=this.getAttribute(t);return n&&(0,yX.xb)(n.scales)&&(e=n.values[0]),e},e.prototype.getAttributeValues=function(t,e){for(var n=[],r=t.scales,i=0,o=r.length;i<o;i++){var a=r[i],s=a.field;a.isIdentity?n.push(a.values):n.push(e[s])}return t.mapping.apply(t,(0,mX.ev)([],(0,mX.CR)(n),!1))},e.prototype.getAdjust=function(t){return this.adjusts[t]},e.prototype.getCoordinate=function(){return this.coordinate},e.prototype.getData=function(){return this.data},e.prototype.getShapeMarker=function(t,e){return this.getShapeFactory().getMarker(t,e)},e.prototype.getElementsBy=function(t){return this.elements.filter((function(e){return t(e)}))},e.prototype.getElements=function(){return this.elements},e.prototype.getElementId=function(t){var e=(t=(0,yX.kJ)(t)?t[0]:t)[PX];if(this.idFields.length){for(var n=e[this.idFields[0]],r=1;r<this.idFields.length;r++)n+="-"+e[this.idFields[r]];return n}var i,o,a=this.type,s=this.getXScale(),l=this.getYScale(),c=s.field||"x",u=e[l.field||"y"];i="identity"===s.type?s.values[0]:e[c],o="interval"===a||"schema"===a?"".concat(i):"line"===a||"area"===a||"path"===a?a:"".concat(i,"-").concat(u);for(var h=this.groupScales,p=(r=0,h.length);r<p;r++){var d=h[r].field;o="".concat(o,"-").concat(e[d])}var f=this.getAdjust("dodge");if(f){var g=f.dodgeBy;g&&(o="".concat(o,"-").concat(e[g]))}return this.getAdjust("jitter")&&(o="".concat(o,"-").concat(t.x,"-").concat(t.y)),o},e.prototype.getScaleFields=function(){var t=[],e=new Map,n=this,r=n.attributeOption,i=n.labelOption,o=n.tooltipOption;for(var a in r)if(r.hasOwnProperty(a)){var s=r[a];s.fields?OQ(s.fields,t,e):s.values&&OQ(s.values,t,e)}return i&&i.fields&&OQ(i.fields,t,e),(0,yX.Kn)(o)&&o.fields&&OQ(o.fields,t,e),t},e.prototype.changeVisible=function(e){t.prototype.changeVisible.call(this,e);for(var n=this.elements,r=0,i=n.length;r<i;r++){n[r].changeVisible(e)}e?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},e.prototype.getFields=function(){var t=new Map,e=[];return Object.values(this.attributeOption).forEach((function(n){((null===n||void 0===n?void 0:n.fields)||[]).forEach((function(n){t.has(n)||e.push(n),t.set(n,!0)}))}),[]),e},e.prototype.getGroupFields=function(){for(var t=[],e=new Map,n=0,r=IX.length;n<r;n++){var i=IX[n],o=this.attributeOption[i];o&&o.fields&&OQ(o.fields,t,e)}return t},e.prototype.getXYFields=function(){var t=(0,mX.CR)(this.attributeOption.position.fields,2);return[t[0],t[1]]},e.prototype.getXField=function(){return(0,yX.U2)(this.getXYFields(),[0])},e.prototype.getYField=function(){return(0,yX.U2)(this.getXYFields(),[1])},e.prototype.getShapes=function(){return this.elements.map((function(t){return t.shape}))},e.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},e.prototype.sort=function(t){if(!this.hasSorted)for(var e=this.getXScale(),n=e.field,r=0;r<t.length;r++){t[r].sort((function(t,r){return e.translate(t[PX][n])-e.translate(r[PX][n])}))}this.hasSorted=!0},e.prototype.adjustScale=function(){var t=this.getYScale();t&&this.getAdjust("stack")&&this.updateStackRange(t,this.beforeMappingData)},e.prototype.getShapeFactory=function(){var t=this.shapeType;if(k2(t))return this.shapeFactory||(this.shapeFactory=(0,yX.d9)(k2(t))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[t]||{},this.shapeFactory},e.prototype.createShapePointsCfg=function(t){var e=this.getXScale(),n=this.getYScale();return{x:this.normalizeValues(t[e.field],e),y:n?this.normalizeValues(t[n.field],n):t.y?t.y:.1,y0:n?n.scale(this.getYMinValue()):void 0}},e.prototype.createElement=function(t,e,n){void 0===n&&(n=!1);var r=this.container,i=this.getDrawCfg(t),o=this.getShapeFactory(),a=new m2({shapeFactory:o,container:r,offscreenGroup:this.getOffscreenGroup(),elementIndex:e});return a.animate=this.animateOption,a.geometry=this,a.draw(i,n),a},e.prototype.getDrawCfg=function(t){var e=t[PX],n={mappingData:t,data:e,x:t.x,y:t.y,color:t.color,size:t.size,isInCircle:this.coordinate.isPolar,customInfo:this.customOption},r=t.shape;!r&&this.getShapeFactory()&&(r=this.getShapeFactory().defaultShapeType),n.shape=r;var i=this.theme.geometries[this.shapeType];n.defaultStyle=(0,yX.U2)(i,[r,"default"],{}).style,!n.defaultStyle&&this.getShapeFactory()&&(n.defaultStyle=this.getShapeFactory().getDefaultStyle(i));var o=this.styleOption;return o&&(n.style=this.getStyleCfg(o,e)),this.generatePoints&&(n.points=t.points,n.nextPoints=t.nextPoints),n},e.prototype.updateElements=function(t,e){var n,r,i,o,a,s;void 0===e&&(e=!1);for(var l=new Map,c=[],u=new Map,h=0,p=0;p<t.length;p++)for(var d=t[p],f=0;f<d.length;f++){var g=d[f],m=this.getElementId(g),y=l.has(m)?"".concat(m,"-").concat(p,"-").concat(f):m;c.push(y),l.set(y,g),u.set(y,h),h++}this.elements=new Array(h);var v=I2(this.lastElementsMap,c),x=v.added,_=v.updated,b=v.removed;try{for(var w=(0,mX.XA)(x),S=w.next();!S.done;S=w.next()){m=S.value,g=l.get(m),p=u.get(m);var C=this.createElement(g,p,e);this.elements[p]=C,this.elementsMap[m]=C,C.shape&&C.shape.set("zIndex",this.zIndexReversed?this.elements.length-p:p)}}catch(O){n={error:O}}finally{try{S&&!S.done&&(r=w.return)&&r.call(w)}finally{if(n)throw n.error}}try{for(var E=(0,mX.XA)(_),k=E.next();!k.done;k=E.next()){m=k.value,C=this.lastElementsMap[m],g=l.get(m);var M=this.getDrawCfg(g),T=C.getModel();p=u.get(m);(this.isCoordinateChanged||M2(M,T))&&(C.animate=this.animateOption,C.update(M)),this.elements[p]=C,this.elementsMap[m]=C,C.shape&&C.shape.set("zIndex",this.zIndexReversed?this.elements.length-p:p)}}catch(A){i={error:A}}finally{try{k&&!k.done&&(o=E.return)&&o.call(E)}finally{if(i)throw i.error}}this.container&&this.container.sort();try{for(var I=(0,mX.XA)(b),P=I.next();!P.done;P=I.next()){m=P.value;(C=this.lastElementsMap[m]).animate=this.animateOption,C.destroy()}}catch(D){a={error:D}}finally{try{P&&!P.done&&(s=I.return)&&s.call(I)}finally{if(a)throw a.error}}},e.prototype.getLabelType=function(){var t=this,e=t.labelOption,n=t.coordinate,r=t.type,i=n.type,o=n.isTransposed,a=(0,yX.U2)(e,["cfg","type"]);return a||(a="polar"===i?o?"pie":"polar":"theta"===i?"pie":"interval"===r||"polygon"===r?"interval":"base"),a},e.prototype.getYMinValue=function(){var t=this.getYScale(),e=t.min,n=t.max;return e>=0?e:n<=0?n:0},e.prototype.createAttrOption=function(t,e,n){if((0,yX.UM)(e)||(0,yX.Kn)(e))(0,yX.Kn)(e)&&(0,yX.Xy)(Object.keys(e),["values"])?(0,yX.t8)(this.attributeOption,t,{fields:e.values}):(0,yX.t8)(this.attributeOption,t,e);else{var r={};(0,yX.hj)(e)?r.values=[e]:r.fields=T2(e),n&&((0,yX.mf)(n)?r.callback=n:r.values=n),(0,yX.t8)(this.attributeOption,t,r)}},e.prototype.initAttributes=function(){var t=this,e=this,n=e.attributes,r=e.attributeOption,i=e.theme,o=e.shapeType;this.groupScales=[];var a={},s=function(e){if(r.hasOwnProperty(e)){var s=r[e];if(!s)return{value:void 0};var l=(0,mX.pi)({},s),c=l.callback,u=l.values,h=l.fields,p=(void 0===h?[]:h).map((function(n){var r=t.scales[n];!a[n]&&IX.includes(e)&&("cat"===zQ(r,(0,yX.U2)(t.scaleDefs,n),e,t.type)&&(t.groupScales.push(r),a[n]=!0));return r}));l.scales=p,"position"!==e&&1===p.length&&"identity"===p[0].type?l.values=p[0].values:c||u||("size"===e?l.values=i.sizes:"shape"===e?l.values=i.shapes[o]||[]:"color"===e&&(p.length?l.values=p[0].values.length<=10?i.colors10:i.colors20:l.values=i.colors10));var d=dZ(e);n[e]=new d(l)}};for(var l in r){var c=s(l);if("object"===typeof c)return c.value}},e.prototype.processData=function(t){var e,n;this.hasSorted=!1;for(var r=this.getAttribute("position").scales.filter((function(t){return t.isCategory})),i=this.groupData(t),o=[],a=0,s=i.length;a<s;a++){for(var l=i[a],c=[],u=0,h=l.length;u<h;u++){var p=l[u],d={};for(var f in p)d[f]=p[f];d[PX]=p;try{for(var g=(e=void 0,(0,mX.XA)(r)),m=g.next();!m.done;m=g.next()){var y=m.value,v=y.field;d[v]=y.translate(d[v])}}catch(_){e={error:_}}finally{try{m&&!m.done&&(n=g.return)&&n.call(g)}finally{if(e)throw e.error}}c.push(d)}o.push(c)}var x=this.adjustData(o);return this.beforeMappingData=x,x},e.prototype.adjustData=function(t){var e=this.adjustOption,n=this,r=n.intervalPadding,i=n.dodgePadding,o=n.theme,a=this.maxColumnWidth||o.maxColumnWidth,s=this.minColumnWidth||o.minColumnWidth,l=this.columnWidthRatio||o.columnWidthRatio,c=t;if(e){var u=this.getXScale(),h=this.getYScale(),p=u.field,d=h?h.field:null,f=DQ(this.coordinate),g=u.values.length,m=this.getAttribute("size"),y=void 0;m&&(y=m.values[0]);for(var v=0,x=e.length;v<x;v++){var _=e[v],b=(0,mX.pi)({xField:p,yField:d,intervalPadding:r,dodgePadding:i,xDimensionLength:f,groupNum:g,defaultSize:y,maxColumnWidth:a,minColumnWidth:s,columnWidthRatio:l},_),w=_.type;if("dodge"===w){var S=[];if(u.isCategory||"identity"===u.type)S.push("x");else{if(h)throw new Error("dodge is not support linear attribute, please use category attribute!");S.push("y")}b.adjustNames=S,b.dodgeRatio=l}else if("stack"===w){var C=this.coordinate;if(!h){b.height=C.getHeight();var E=this.getDefaultValue("size")||3;b.size=E}!C.isTransposed&&(0,yX.UM)(b.reverseOrder)&&(b.reverseOrder=!0)}var k=HX(w);b.dimValuesMap={},u&&u.values&&(b.dimValuesMap[u.field]=u.values.map((function(t){return u.translate(t)})));var M=new k(b);c=M.process(c),this.adjusts[w]=M}}return c},e.prototype.groupData=function(t){for(var e=this.getGroupScales(),n=this.scaleDefs,r={},i=[],o=0;o<e.length;o++){var a=e[o].field;i.push(a),(0,yX.U2)(n,[a,"values"])&&(r[a]=n[a].values)}return function(t,e,n){var r,i;if(void 0===n&&(n={}),!e)return[t];var o=(0,yX.Ms)(t,e),a=[];if(1===e.length&&n[e[0]]){var s=n[e[0]];try{for(var l=(0,mX.XA)(s),c=l.next();!c.done;c=l.next()){var u=c.value,h=o["_".concat(u)];h&&a.push(h)}}catch(f){r={error:f}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}}else for(var p in o)if(o.hasOwnProperty(p)){var d=o[p];a.push(d)}return a}(t,i,r)},e.prototype.updateStackRange=function(t,e){for(var n=(0,yX.xH)(e),r=t.field,i=t.min,o=t.max,a=0;a<n.length;a++){var s=n[a],l=Math.min.apply(null,s[r]),c=Math.max.apply(null,s[r]);l<i&&(i=l),c>o&&(o=c)}var u=this.scaleDefs,h={};i<t.min&&!(0,yX.U2)(u,[r,"min"])&&(h.min=i),o>t.max&&!(0,yX.U2)(u,[r,"max"])&&(h.max=o),t.change(h)},e.prototype.beforeMapping=function(t){var e=t;if(this.sortable&&this.sort(e),this.generatePoints)for(var n=0,r=e.length;n<r;n++){var i=e[n];this.generateShapePoints(i);var o=e[n+1];o&&(this.generateShapePoints(o),i[0].nextPoints=o[0].points)}return e},e.prototype.generateShapePoints=function(t){for(var e=this.getShapeFactory(),n=this.getAttribute("shape"),r=0;r<t.length;r++){var i=t[r],o=this.createShapePointsCfg(i),a=n?this.getAttributeValues(n,i):null,s=e.getShapePoints(a,o);i.points=s}},e.prototype.normalizeValues=function(t,e){var n=[];if((0,yX.kJ)(t))for(var r=0;r<t.length;r++){var i=t[r];n.push(e.scale(i))}else n=e.scale(t);return n},e.prototype.mapping=function(t){for(var e=this.attributes,n=[],r=0;r<t.length;r++){var i=t[r],o={_origin:i[PX],points:i.points,nextPoints:i.nextPoints};for(var a in e)if(e.hasOwnProperty(a)){var s=e[a],l=s.names,c=this.getAttributeValues(s,i);if(l.length>1)for(var u=0;u<c.length;u+=1){var h=c[u];o[l[u]]=(0,yX.kJ)(h)&&1===h.length?h[0]:h}else o[l[0]]=1===c.length?c[0]:c}this.convertPoint(o),n.push(o)}return n},e.prototype.convertPoint=function(t){var e,n,r,i=t.x,o=t.y,a=this.coordinate;if((0,yX.kJ)(i)&&(0,yX.kJ)(o)){e=[],n=[];for(var s=0,l=0,c=i.length,u=o.length;s<c&&l<u;s+=1,l+=1)r=a.convert({x:i[s],y:o[l]}),e.push(r.x),n.push(r.y)}else if((0,yX.kJ)(o)){n=[];for(var h=0;h<o.length;h++){var p=o[h];r=a.convert({x:i,y:p}),e&&e!==r.x?((0,yX.kJ)(e)||(e=[e]),e.push(r.x)):e=r.x,n.push(r.y)}}else if((0,yX.kJ)(i)){e=[];for(h=0;h<i.length;h++){var d=i[h];r=a.convert({x:d,y:o}),n&&n!==r.y?((0,yX.kJ)(n)||(n=[n]),n.push(r.y)):n=r.y,e.push(r.x)}}else{var f=a.convert({x:i,y:o});e=f.x,n=f.y}t.x=e,t.y=n},e.prototype.getStyleCfg=function(t,e){var n=t.fields,r=void 0===n?[]:n,i=t.callback,o=t.cfg;if(o)return o;var a=r.map((function(t){return e[t]}));return i.apply(void 0,(0,mX.ev)([],(0,mX.CR)(a),!1))},e.prototype.setCfg=function(t){var e=this,n=t.coordinate,r=t.data,i=t.theme,o=t.scaleDefs;n&&(this.coordinate=n),r&&(this.data=r),o&&(this.scaleDefs=o,this.idFields=[],(0,yX.S6)(o,(function(t,n){t&&t.key&&e.idFields.push(n)}))),i&&(this.theme=this.userTheme?(0,yX.b$)({},i,this.userTheme):i)},e.prototype.renderLabels=function(t,e){return void 0===e&&(e=!1),(0,mX.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,s,l,c,u,h,p,d,f=this;return(0,mX.Jh)(this,(function(g){switch(g.label){case 0:return n=this.geometryLabel,this.emit(xX.BEFORE_RENDER_LABEL),n||(r=this.getLabelType(),i=function(t){return y2[t.toLowerCase()]}(r),n=new i(this),this.geometryLabel=n),[4,n.render(t,e)];case 1:g.sent(),o=n.labelsRenderer.shapesMap,a=new Map,(0,yX.S6)(o,(function(t,e){for(var n=t.getChildren()||[],r=0;r<n.length;r++){var i=n[r],o=f.elementsMap[i.get("elementId")||e.split(" ")[0]];if(o){i.cfg.name=["element","label"],i.cfg.element=o;var s=a.get(o)||new Set;s.add(t),a.set(o,s)}}}));try{for(s=(0,mX.XA)(a.entries()),l=s.next();!l.done;l=s.next())c=(0,mX.CR)(l.value,2),u=c[0],h=c[1],u.labelShape=(0,mX.ev)([],(0,mX.CR)(h),!1)}catch(m){p={error:m}}finally{try{l&&!l.done&&(d=s.return)&&d.call(s)}finally{if(p)throw p.error}}return this.emit(xX.AFTER_RENDER_LABEL),[2]}}))}))},e.prototype.canDoGroupAnimation=function(t){return!t&&this.animateOption&&(void 0===(0,yX.U2)(this.animateOption,"appear")||(0,yX.U2)(this.animateOption,"appear")&&void 0===(0,yX.U2)(this.animateOption,["appear","animation"]))},e}(BX),O2=P2,A2=vZ.vs;function D2(t,e,n){var r=A2(t.getMatrix(),[["t",e,n]]);t.setMatrix(r)}function R2(t,e){var n=function(t,e){var n=t.attr(),r=n.x,i=n.y;return A2(t.getMatrix(),[["t",-r,-i],["r",e],["t",r,i]])}(t,e);t.setMatrix(n)}function L2(t){return t.find((function(t){return"text"===t.get("type")}))}function N2(t,e,n){void 0===n&&(n=[0,0,0,0]);var r=t&&t.getChildren()[0];if(r){var i=r.clone();(null===e||void 0===e?void 0:e.rotate)&&R2(i,-e.rotate);var o=i.getCanvasBBox(),a=o.x,s=o.y,l=o.width,c=o.height;i.destroy();var u=n;return(0,yX.UM)(u)?u=[2,2,2,2]:(0,yX.hj)(u)&&(u=new Array(4).fill(u)),{x:a-u[3],y:s-u[0],width:l+u[1]+u[3],height:c+u[0]+u[2],rotation:(null===e||void 0===e?void 0:e.rotate)||0}}return{x:0,y:0,width:0,height:0,rotation:0}}function F2(t,e){var n=t.getBBox();return(0,yX.G)(e,(function(t){var e=t.getBBox();return function(t,e,n){return void 0===n&&(n=0),Math.max(0,Math.min(t.x+t.width+n,e.x+e.width+n)-Math.max(t.x-n,e.x-n))*Math.max(0,Math.min(t.y+t.height+n,e.y+e.height+n)-Math.max(t.y-n,e.y-n))}(n,e,2)>0}))}function z2(t,e,n){var r=n.data,i=n.origin,o=n.animateCfg,a=n.coordinate,s=(0,yX.U2)(o,"update");t.set("data",r),t.set("origin",i),t.set("animateCfg",o),t.set("coordinate",a),t.set("visible",e.get("visible")),(t.getChildren()||[]).forEach((function(l,c){var u=e.getChildByIndex(c);if(u){l.set("data",r),l.set("origin",i),l.set("animateCfg",o),l.set("coordinate",a);var h=TQ(l,u);s?d2(l,s,{toAttrs:h,coordinate:a}):l.attr(h),u.isGroup()&&z2(l,u,n)}else t.removeChild(l),l.remove(!0)})),(0,yX.S6)(e.getChildren(),(function(e,n){n>=t.getCount()&&(e.destroyed||t.add(e))}))}var B2=function(){function t(t){this.shapesMap={};var e=t.layout,n=t.container;this.layout=e,this.container=n}return t.prototype.render=function(t,e,n){return void 0===n&&(n=!1),(0,mX.mG)(this,void 0,void 0,(function(){var r,i,o,a,s,l,c,u,h=this;return(0,mX.Jh)(this,(function(p){switch(p.label){case 0:if(r={},i=this.createOffscreenGroup(),!t.length)return[3,2];try{for(o=(0,mX.XA)(t),a=o.next();!a.done;a=o.next())(s=a.value)&&(r[s.id]=this.renderLabel(s,i))}catch(d){c={error:d}}finally{try{a&&!a.done&&(u=o.return)&&u.call(o)}finally{if(c)throw c.error}}return[4,this.doLayout(t,e,r)];case 1:p.sent(),this.renderLabelLine(t,r),this.renderLabelBackground(t,r),this.adjustLabel(t,r),p.label=2;case 2:return l=this.shapesMap,(0,yX.S6)(r,(function(t,e){if(t.destroyed)delete r[e];else{if(l[e]){var i=t.get("data"),o=t.get("origin"),a=t.get("coordinate"),s=t.get("animateCfg"),c=l[e];z2(c,r[e],{data:i,origin:o,animateCfg:s,coordinate:a}),r[e]=c}else{if(h.container.destroyed)return;h.container.add(t);var u=(0,yX.U2)(t.get("animateCfg"),n?"enter":"appear");u&&d2(t,u,{toAttrs:(0,mX.pi)({},t.attr()),coordinate:t.get("coordinate")})}delete l[e]}})),(0,yX.S6)(l,(function(t){var e=(0,yX.U2)(t.get("animateCfg"),"leave");e?d2(t,e,{toAttrs:null,coordinate:t.get("coordinate")}):t.remove(!0)})),this.shapesMap=r,i.destroy(),[2]}}))}))},t.prototype.clear=function(){this.container.clear(),this.shapesMap={}},t.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null},t.prototype.renderLabel=function(t,e){var n,r=t.id,i=t.elementId,o=t.data,a=t.mappingData,s=t.coordinate,l=t.animate,c=t.content,u={id:r,elementId:i,capture:t.capture,data:o,origin:(0,mX.pi)((0,mX.pi)({},a),{data:a[PX]}),coordinate:s},h=e.addGroup((0,mX.pi)({name:"label",animateCfg:!1!==this.animate&&null!==l&&!1!==l&&(0,yX.b$)({},this.animate,l)},u));if(c.isGroup&&c.isGroup()||c.isShape&&c.isShape()){var p=c.getCanvasBBox(),d=p.width,f=p.height,g=(0,yX.U2)(t,"textAlign","left"),m=t.x;"center"===g?m-=d/2:"right"!==g&&"end"!==g||(m-=d),D2(c,m,t.y-f/2),n=c,h.add(c)}else{var y=(0,yX.U2)(t,["style","fill"]);n=h.addShape("text",(0,mX.pi)({attrs:(0,mX.pi)((0,mX.pi)({x:t.x,y:t.y,textAlign:t.textAlign,textBaseline:(0,yX.U2)(t,"textBaseline","middle"),text:t.content},t.style),{fill:(0,yX.Ft)(y)?t.color:y})},u))}return t.rotate&&R2(n,t.rotate),h},t.prototype.doLayout=function(t,e,n){return(0,mX.mG)(this,void 0,void 0,(function(){var r,i=this;return(0,mX.Jh)(this,(function(o){switch(o.label){case 0:return this.layout?(r=(0,yX.kJ)(this.layout)?this.layout:[this.layout],[4,Promise.all(r.map((function(r){var o=function(t){return v2[t.toLowerCase()]}((0,yX.U2)(r,"type",""));if(o){var a=[],s=[];return(0,yX.S6)(n,(function(t,n){a.push(t),s.push(e[t.get("elementId")])})),o(t,a,s,i.region,r.cfg)}})))]):[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}}))}))},t.prototype.renderLabelLine=function(t,e){(0,yX.S6)(t,(function(t){var n=(0,yX.U2)(t,"coordinate");if(t&&n){var r=n.getCenter(),i=n.getRadius();if(t.labelLine){var o=(0,yX.U2)(t,"labelLine",{}),a=t.id,s=o.path;if(!s){var l=CQ(r.x,r.y,i,t.angle);s=[["M",l.x,l.y],["L",t.x,t.y]]}var c=e[a];c.destroyed||c.addShape("path",{capture:!1,attrs:(0,mX.pi)({path:s,stroke:t.color?t.color:(0,yX.U2)(t,["style","fill"],"#000"),fill:null},o.style),id:a,origin:t.mappingData,data:t.data,coordinate:t.coordinate})}}}))},t.prototype.renderLabelBackground=function(t,e){(0,yX.S6)(t,(function(t){var n=(0,yX.U2)(t,"coordinate"),r=(0,yX.U2)(t,"background");if(r&&n){var i=t.id,o=e[i];if(!o.destroyed){var a=o.getChildren()[0];if(a){var s=N2(o,t,r.padding),l=s.rotation,c=(0,mX._T)(s,["rotation"]),u=o.addShape("rect",{attrs:(0,mX.pi)((0,mX.pi)({},c),r.style||{}),id:i,origin:t.mappingData,data:t.data,coordinate:t.coordinate});if(u.setZIndex(-1),l){var h=a.getMatrix();u.setMatrix(h)}}}}}))},t.prototype.createOffscreenGroup=function(){return new(this.container.getGroupBase())({})},t.prototype.adjustLabel=function(t,e){(0,yX.S6)(t,(function(t){if(t){var n=t.id,r=e[n];if(!r.destroyed){var i=r.findAll((function(t){return"path"!==t.get("type")}));(0,yX.S6)(i,(function(e){e&&(t.offsetX&&e.attr("x",e.attr("x")+t.offsetX),t.offsetY&&e.attr("y",e.attr("y")+t.offsetY))}))}}}))},t}(),$2=B2;function j2(t){var e=0;return(0,yX.S6)(t,(function(t){e+=t})),e/t.length}var U2=function(){function t(t){this.geometry=t}return t.prototype.getLabelItems=function(t){var e=this,n=[],r=this.getLabelCfgs(t);return(0,yX.S6)(t,(function(t,i){var o=r[i];if(!o||(0,yX.UM)(t.x)||(0,yX.UM)(t.y))n.push(null);else{var a=(0,yX.kJ)(o.content)?o.content:[o.content];o.content=a;var s=a.length;(0,yX.S6)(a,(function(r,i){if((0,yX.UM)(r)||""===r)n.push(null);else{var a=(0,mX.pi)((0,mX.pi)({},o),e.getLabelPoint(o,t,i));a.textAlign||(a.textAlign=e.getLabelAlign(a,i,s)),a.offset<=0&&(a.labelLine=null),n.push(a)}}))}})),n},t.prototype.render=function(t,e){return void 0===e&&(e=!1),(0,mX.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,mX.Jh)(this,(function(o){switch(o.label){case 0:return n=this.getLabelItems(t),r=this.getLabelsRenderer(),i=this.getGeometryShapes(),[4,r.render(n,i,e)];case 1:return o.sent(),[2]}}))}))},t.prototype.clear=function(){var t=this.labelsRenderer;t&&t.clear()},t.prototype.destroy=function(){var t=this.labelsRenderer;t&&t.destroy(),this.labelsRenderer=null},t.prototype.getCoordinate=function(){return this.geometry.coordinate},t.prototype.getDefaultLabelCfg=function(t,e){var n=this.geometry,r=n.type,i=n.theme;return"polygon"===r||"interval"===r&&"middle"===e||t<0&&!["line","point","path"].includes(r)?(0,yX.U2)(i,"innerLabels",{}):(0,yX.U2)(i,"labels",{})},t.prototype.getThemedLabelCfg=function(t){var e=this.geometry,n=this.getDefaultLabelCfg(),r=e.type,i=e.theme;return"polygon"===r||t.offset<0&&!["line","point","path"].includes(r)?(0,yX.b$)({},n,i.innerLabels,t):(0,yX.b$)({},n,i.labels,t)},t.prototype.setLabelPosition=function(t,e,n,r){},t.prototype.getLabelOffset=function(t){var e=this.getCoordinate(),n=this.getOffsetVector(t);return e.isTransposed?n[0]:n[1]},t.prototype.getLabelOffsetPoint=function(t,e,n){var r=t.offset,i=this.getCoordinate().isTransposed,o=i?"x":"y",a=i?1:-1,s={x:0,y:0};return s[o]=e>0||1===n?r*a:r*a*-1,s},t.prototype.getLabelPoint=function(t,e,n){var r=this.getCoordinate(),i=t.content.length;function o(e,n,r){void 0===r&&(r=!1);var i=e;return(0,yX.kJ)(i)&&(i=1===t.content.length?r?j2(i):i.length<=2?i[e.length-1]:j2(i):i[n]),i}var a={content:t.content[n],x:0,y:0,start:{x:0,y:0},color:"#fff"},s=(0,yX.kJ)(e.shape)?e.shape[0]:e.shape,l="funnel"===s||"pyramid"===s;if("polygon"===this.geometry.type){var c=function(t,e){if((0,yX.hj)(t)&&(0,yX.hj)(e))return[t,e];if(wQ(t)||wQ(e))return[SQ(t),SQ(e)];for(var n,r,i=-1,o=0,a=0,s=t.length-1,l=0;++i<t.length;)n=s,s=i,l+=r=t[n]*e[s]-t[s]*e[n],o+=(t[n]+t[s])*r,a+=(e[n]+e[s])*r;return[o/(l*=3),a/l]}(e.x,e.y);a.x=c[0],a.y=c[1]}else"interval"!==this.geometry.type||l?(a.x=o(e.x,n),a.y=o(e.y,n)):(a.x=o(e.x,n,!0),a.y=o(e.y,n));if(l){var u=(0,yX.U2)(e,"nextPoints"),h=(0,yX.U2)(e,"points");if(u){var p=r.convert(h[1]),d=r.convert(u[1]);a.x=(p.x+d.x)/2,a.y=(p.y+d.y)/2}else if("pyramid"===s){p=r.convert(h[1]),d=r.convert(h[2]);a.x=(p.x+d.x)/2,a.y=(p.y+d.y)/2}}t.position&&this.setLabelPosition(a,e,n,t.position);var f=this.getLabelOffsetPoint(t,n,i);return a.start={x:a.x,y:a.y},a.x+=f.x,a.y+=f.y,a.color=e.color,a},t.prototype.getLabelAlign=function(t,e,n){var r="center";if(this.getCoordinate().isTransposed){var i=t.offset;r=i<0?"right":0===i?"center":"left",n>1&&0===e&&("right"===r?r="left":"left"===r&&(r="right"))}return r},t.prototype.getLabelId=function(t){var e=this.geometry,n=e.type,r=e.getXScale(),i=e.getYScale(),o=t[PX],a=e.getElementId(t);return"line"===n||"area"===n?a+=" ".concat(o[r.field]):"path"===n&&(a+=" ".concat(o[r.field],"-").concat(o[i.field])),a},t.prototype.getLabelsRenderer=function(){var t=this.geometry,e=t.labelsContainer,n=t.labelOption,r=t.canvasRegion,i=t.animateOption,o=this.geometry.coordinate,a=this.labelsRenderer;return a||(a=new $2({container:e,layout:(0,yX.U2)(n,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=a),a.region=r,a.animate=!!i&&p2("label",o),a},t.prototype.getLabelCfgs=function(t){var e=this,n=this.geometry,r=n.labelOption,i=n.scales,o=n.coordinate,a=r,s=a.fields,l=a.callback,c=a.cfg,u=s.map((function(t){return i[t]})),h=[];return(0,yX.S6)(t,(function(t,n){var r,i=t[PX],a=e.getLabelText(i,u);if(l){var p=s.map((function(t){return i[t]}));if(r=l.apply(void 0,(0,mX.ev)([],(0,mX.CR)(p),!1)),(0,yX.UM)(r))return void h.push(null)}var d=(0,mX.pi)((0,mX.pi)({id:e.getLabelId(t),elementId:e.geometry.getElementId(t),data:i,mappingData:t,coordinate:o},c),r);(0,yX.mf)(d.position)&&(d.position=d.position(i,t,n));var f=e.getLabelOffset(d.offset||0),g=e.getDefaultLabelCfg(f,d.position);(d=(0,yX.b$)({},g,d)).offset=e.getLabelOffset(d.offset||0);var m=d.content;(0,yX.mf)(m)?d.content=m(i,t,n):(0,yX.o8)(m)&&(d.content=a[0]),h.push(d)})),h},t.prototype.getLabelText=function(t,e){var n=[];return(0,yX.S6)(e,(function(e){var r=t[e.field];r=(0,yX.kJ)(r)?r.map((function(t){return e.getText(t)})):e.getText(r),(0,yX.UM)(r)||""===r?n.push(null):n.push(r)})),n},t.prototype.getOffsetVector=function(t){void 0===t&&(t=0);var e=this.getCoordinate(),n=0;return(0,yX.hj)(t)&&(n=t),e.isTransposed?e.applyMatrix(n,0):e.applyMatrix(0,n)},t.prototype.getGeometryShapes=function(){var t=this.geometry,e={};return(0,yX.S6)(t.elementsMap,(function(t,n){e[n]=t.shape})),(0,yX.S6)(t.getOffscreenGroup().getChildren(),(function(n){var r=t.getElementId(n.get("origin").mappingData);e[r]=n})),e},t}(),V2=U2;function H2(t,e,n){if(!t)return n;var r;if(t.callback&&t.callback.length>1){var i=Array(t.callback.length-1).fill("");r=t.mapping.apply(t,(0,mX.ev)([e],(0,mX.CR)(i),!1)).join("")}else r=t.mapping(e).join("");return r||n}var G2={hexagon:function(t,e,n){var r=n/2*Math.sqrt(3);return[["M",t,e-n],["L",t+r,e-n/2],["L",t+r,e+n/2],["L",t,e+n],["L",t-r,e+n/2],["L",t-r,e-n/2],["Z"]]},bowtie:function(t,e,n){var r=n-1.5;return[["M",t-n,e-r],["L",t+n,e+r],["L",t+n,e-r],["L",t-n,e+r],["Z"]]},cross:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e+n],["M",t+n,e-n],["L",t-n,e+n]]},tick:function(t,e,n){return[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]]},plus:function(t,e,n){return[["M",t-n,e],["L",t+n,e],["M",t,e-n],["L",t,e+n]]},hyphen:function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},line:function(t,e,n){return[["M",t,e-n],["L",t,e+n]]}},W2=["line","cross","tick","plus","hyphen"];function X2(t){var e=t.symbol;(0,yX.HD)(e)&&G2[e]&&(t.symbol=G2[e])}function q2(t){return t.startsWith(dX.LEFT)||t.startsWith(dX.RIGHT)?"vertical":"horizontal"}function Y2(t,e,n,r,i){var o=n.getScale(n.type);if(o.isCategory){var a=o.field,s=e.getAttribute("color"),l=e.getAttribute("shape"),c=t.getTheme().defaultColor,u=e.coordinate.isPolar;return o.getTicks().map((function(n,h){var p,d=n.text,f=n.value,g=d,m=o.invert(f),y=0===t.filterFieldData(a,[(p={},p[a]=m,p)]).length;(0,yX.S6)(t.views,(function(t){var e;t.filterFieldData(a,[(e={},e[a]=m,e)]).length||(y=!0)}));var v=H2(s,m,c),x=H2(l,m,"point"),_=e.getShapeMarker(x,{color:v,isInPolar:u}),b=i;return(0,yX.mf)(b)&&(b=b(g,h,(0,mX.pi)({name:g,value:m},(0,yX.b$)({},r,_)))),function(t,e){var n=t.symbol;if((0,yX.HD)(n)&&-1!==W2.indexOf(n)){var r=(0,yX.U2)(t,"style",{}),i=(0,yX.U2)(r,"lineWidth",1),o=r.stroke||r.fill||e;t.style=(0,yX.b$)({},t.style,{lineWidth:i,stroke:o,fill:null})}}(_=(0,yX.b$)({},r,_,PQ((0,mX.pi)({},b),["style"])),v),b&&b.style&&(_.style=function(t,e){return(0,yX.mf)(e)?e(t):(0,yX.b$)({},t,e)}(_.style,b.style)),X2(_),{id:m,name:g,value:m,marker:_,unchecked:y}}))}return[]}function Z2(t,e){var n=(0,yX.U2)(t,["components","legend"],{});return(0,yX.b$)({},(0,yX.U2)(n,["common"],{}),(0,yX.b$)({},(0,yX.U2)(n,[e],{})))}function K2(t){return!t&&(null===t||void 0===t||isNaN(t))}function J2(t){if((0,yX.kJ)(t))return K2(t[1].y);var e=t.y;return(0,yX.kJ)(e)?K2(e[0]):K2(e)}function Q2(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=!0),!t.length||1===t.length&&!n)return[];if(e){for(var r=[],i=0,o=t.length;i<o;i++){J2(l=t[i])||r.push(l)}return[r]}var a=[],s=[];for(i=0,o=t.length;i<o;i++){var l;J2(l=t[i])?s.length&&((1!==s.length||n)&&a.push(s),s=[]):s.push(l)}return s.length&&a.push(s),a}function t3(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(r){var i=0===n?"M":"L";e.push([i,r.x,r.y])}}var o=t[0];return o&&(e.push(["L",o.x,o.y]),e.push(["z"])),e}function e3(t){for(var e=t.length/2,n=[],r=[],i=0;i<t.length;i++)i<e?n.push(t[i]):r.push(t[i]);var o=f0(n,!1),a=f0(r,!1);r.length&&o.push(["L",r[0].x,r[0].y]),a.shift();var s=o.concat(a);return n.length&&s.push(["L",n[0].x,n[0].y]),s.push(["z"]),s}function n3(t,e,n,r){void 0===r&&(r="");var i=t.style,o=void 0===i?{}:i,a=t.defaultStyle,s=t.color,l=t.size,c=(0,mX.pi)((0,mX.pi)({},a),o);return s&&(e&&(o.stroke||(c.stroke=s)),n&&(o.fill||(c.fill=s))),r&&(0,yX.UM)(o[r])&&!(0,yX.UM)(l)&&(c[r]=l),c}function r3(t){return(0,yX.b$)({},{fill:"#CCD6EC",fillOpacity:.3},(0,yX.U2)(t,["background","style"]))}function i3(t){var e=t.x;return((0,yX.kJ)(t.y)?t.y:[t.y]).map((function(t,n){return{x:(0,yX.kJ)(e)?e[n]:e,y:t}}))}var o3={line:function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},dot:function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},dash:function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},smooth:function(t,e,n){return[["M",t-n,e],["A",n/2,n/2,0,1,1,t,e],["A",n/2,n/2,0,1,0,t+n,e]]},hv:function(t,e,n){return[["M",t-n-1,e-2.5],["L",t,e-2.5],["L",t,e+2.5],["L",t+n+1,e+2.5]]},vh:function(t,e,n){return[["M",t-n-1,e+2.5],["L",t,e+2.5],["L",t,e-2.5],["L",t+n+1,e-2.5]]},hvh:function(t,e,n){return[["M",t-(n+1),e+2.5],["L",t-n/2,e+2.5],["L",t-n/2,e-2.5],["L",t+n/2,e-2.5],["L",t+n/2,e+2.5],["L",t+n+1,e+2.5]]},vhv:function(t,e){return[["M",t-5,e+2.5],["L",t-5,e],["L",t,e],["L",t,e-3],["L",t,e+3],["L",t+6.5,e+3]]}};function a3(t,e){var n=t.color;return{symbol:o3[e],style:{lineWidth:2,r:6,stroke:n}}}function s3(t,e,n,r,i){return 1===t.length?[["M",t[0].x,t[0].y-i.lineWidth/2],["L",t[0].x,t[0].y],["L",t[0].x,t[0].y+i.lineWidth/2]]:(n?(e&&t.length&&t.push({x:t[0].x,y:t[0].y}),o=f0(t,!1,r)):(o=d0(t,!1),e&&o.push(["Z"])),o);var o}function l3(t,e,n,r,i,o){if(t.length){var a=t[0];return(0,yX.kJ)(a.y)?function(t,e,n,r,i,o){var a=[],s=[];(0,yX.S6)(t,(function(t){var e=i3(t);a.push(e[1]),s.push(e[0])}));var l=s3(a,e,r,i,o),c=s3(s,e,r,i,o);return n?l:l.concat(c)}(t,e,n,r,i,o):s3(t,e,r,i,o)}return[]}C2("line",{defaultShapeType:"line"});(0,yX.S6)(["line","dot","dash","smooth"],(function(t){E2("line",t,{draw:function(e,n){var r,i="smooth"===t;if(i){var o=this.coordinate,a=o.start,s=o.end;r=[[a.x,s.y],[s.x,a.y]]}var l=function(t,e,n){for(var r=t.isStack,i=t.connectNulls,o=t.isInCircle,a=t.showSinglePoint,s=n3(t,!0,!1,"lineWidth"),l=Q2(t.points,i,a),c=[],u=0,h=l.length;u<h;u++){var p=l[u];c=c.concat(l3(p,o,r,e,n,s))}return s.path=c,s}(e,i,r);return n.addShape({type:"path",attrs:l,name:"line",capture:!i})},getMarker:function(e){return a3(e,t)}})}));var c3={getLegendItems:Y2,translate:D2,rotate:R2,zoom:function(t,e){var n=t.getBBox(),r=(n.minX+n.maxX)/2,i=(n.minY+n.maxY)/2;t.applyToMatrix([r,i,1]);var o=A2(t.getMatrix(),[["t",-r,-i],["s",e,e],["t",r,i]]);t.setMatrix(o)},transform:A2,getAngle:MQ,getSectorPath:EQ,polarToCartesian:CQ,getDelegationObject:D0,getTooltipItems:F1,getMappingValue:H2,getPath:l3,getPathPoints:Q2},u3="#000",h3="#262626",p3="#BFBFBF",d3="#F0F0F0",f3="#FFFFFF",g3="#A6A6A6",m3="#737373",y3="#404040",v3="#262626",x3=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],_3=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],b3=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],w3=function(t){void 0===t&&(t={});var e=t.paletteQualitative10,n=void 0===e?x3:e,r=t.paletteQualitative20,i=void 0===r?_3:r,o=t.brandColor,a={backgroundColor:"#141414",brandColor:void 0===o?n[0]:o,subColor:"rgba(255,255,255,0.05)",paletteQualitative10:n,paletteQualitative20:i,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",paletteSequence:b3,fontFamily:'"Segoe UI", Roboto, "Helvetica Neue", Arial,\n    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",\n    "Noto Color Emoji"',axisLineBorderColor:y3,axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:g3,axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisDescriptionIconFillColor:h3,axisTickLineBorderColor:y3,axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:v3,axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:m3,axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:v3,axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:m3,legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:x3[0],legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:g3,legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendSpacing:16,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:m3,legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:m3,legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:g3,legendPageNavigatorTextFontSize:12,sliderRailFillColor:v3,sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:m3,sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:d3,sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:p3,annotationArcBorderColor:v3,annotationArcBorder:1,annotationLineBorderColor:y3,annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:g3,annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:f3,annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:y3,tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:g3,tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:g3,labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:u3,innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:g3,overflowLabelFillColorDark:"#2c3542",overflowLabelFillColorLight:"#ffffff",overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:u3,overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:y3,cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#fff",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(255,255,255,0.65)",scrollbarThumbFillColor:"rgba(0,0,0,0.35)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.45)",pointFillColor:x3[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:u3,pointBorderOpacity:1,pointActiveBorderColor:f3,pointSelectedBorder:2,pointSelectedBorderColor:f3,pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:x3[0],hollowPointBorderOpacity:.95,hollowPointFillColor:u3,hollowPointActiveBorder:1,hollowPointActiveBorderColor:f3,hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:f3,hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:x3[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:x3[0],areaFillOpacity:.25,areaActiveFillColor:x3[0],areaActiveFillOpacity:.5,areaSelectedFillColor:x3[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:x3[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:f3,hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:f3,hollowAreaInactiveBorderOpacity:.3,intervalFillColor:x3[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:f3,intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:f3,intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:x3[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:u3,hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:f3,hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:f3,hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3};return(0,mX.pi)((0,mX.pi)({},a),t)}();function S3(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function C3(t,e,n,r,i,o){return i>=t&&i<=t+n&&o>=e&&o<=e+r}function E3(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)}function k3(t,e){return t[0]===e[0]&&t[1]===e[1]}var M3=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,T3=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,I3=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,P3=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function O3(t,e){var n=t.match(P3);(0,yX.S6)(n,(function(t){var n=t.split(":");e.addColorStop(n[0],n[1])}))}function A3(t,e,n){var r=e.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return n;if((0,yX.HD)(n)){if("("===n[1]||"("===n[2]){if("l"===n[0])return function(t,e,n){var r,i,o=M3.exec(n),a=parseFloat(o[1])%360*(Math.PI/180),s=o[2],l=e.getBBox();a>=0&&a<.5*Math.PI?(r={x:l.minX,y:l.minY},i={x:l.maxX,y:l.maxY}):.5*Math.PI<=a&&a<Math.PI?(r={x:l.maxX,y:l.minY},i={x:l.minX,y:l.maxY}):Math.PI<=a&&a<1.5*Math.PI?(r={x:l.maxX,y:l.maxY},i={x:l.minX,y:l.minY}):(r={x:l.minX,y:l.maxY},i={x:l.maxX,y:l.minY});var c=Math.tan(a),u=c*c,h=(i.x-r.x+c*(i.y-r.y))/(u+1)+r.x,p=c*(i.x-r.x+c*(i.y-r.y))/(u+1)+r.y,d=t.createLinearGradient(r.x,r.y,h,p);return O3(s,d),d}(t,e,n);if("r"===n[0])return function(t,e,n){var r=T3.exec(n),i=parseFloat(r[1]),o=parseFloat(r[2]),a=parseFloat(r[3]),s=r[4];if(0===a){var l=s.match(P3);return l[l.length-1].split(":")[1]}var c=e.getBBox(),u=c.maxX-c.minX,h=c.maxY-c.minY,p=Math.sqrt(u*u+h*h)/2,d=t.createRadialGradient(c.minX+u*i,c.minY+h*o,0,c.minX+u/2,c.minY+h/2,a*p);return O3(s,d),d}(t,e,n);if("p"===n[0])return function(t,e,n){if(e.get("patternSource")&&e.get("patternSource")===n)return e.get("pattern");var r,i,o=I3.exec(n),a=o[1],s=o[2];function l(){r=t.createPattern(i,a),e.set("pattern",r),e.set("patternSource",n)}switch(a){case"a":a="repeat";break;case"x":a="repeat-x";break;case"y":a="repeat-y";break;default:a="no-repeat"}return i=new Image,s.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=s,i.complete?l():(i.onload=l,i.src=i.src),r}(t,e,n)}return n}return n instanceof CanvasPattern?n:void 0}function D3(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function R3(t,e){return D3(t)*D3(e)?(t[0]*e[0]+t[1]*e[1])/(D3(t)*D3(e)):1}function L3(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(R3(t,e))}function N3(t,e){var n=e[1],r=e[2],i=(0,yX.wQ)((0,yX.c$)(e[3]),2*Math.PI),o=e[4],a=e[5],s=t[0],l=t[1],c=e[6],u=e[7],h=Math.cos(i)*(s-c)/2+Math.sin(i)*(l-u)/2,p=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(l-u)/2,d=h*h/(n*n)+p*p/(r*r);d>1&&(n*=Math.sqrt(d),r*=Math.sqrt(d));var f=n*n*(p*p)+r*r*(h*h),g=f?Math.sqrt((n*n*(r*r)-f)/f):1;o===a&&(g*=-1),isNaN(g)&&(g=0);var m=r?g*n*p/r:0,y=n?g*-r*h/n:0,v=(s+c)/2+Math.cos(i)*m-Math.sin(i)*y,x=(l+u)/2+Math.sin(i)*m+Math.cos(i)*y,_=[(h-m)/n,(p-y)/r],b=[(-1*h-m)/n,(-1*p-y)/r],w=L3([1,0],_),S=L3(_,b);return R3(_,b)<=-1&&(S=Math.PI),R3(_,b)>=1&&(S=0),0===a&&S>0&&(S-=2*Math.PI),1===a&&S<0&&(S+=2*Math.PI),{cx:v,cy:x,rx:k3(t,[c,u])?0:n,ry:k3(t,[c,u])?0:r,startAngle:w,endAngle:w+S,xRotation:i,arcFlag:o,sweepFlag:a}}var F3=Math.sin,z3=Math.cos,B3=Math.atan2,$3=Math.PI;function j3(t,e,n,r,i,o,a){var s=e.stroke,l=e.lineWidth,c=B3(r-o,n-i),u=new X4({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*z3($3/6)+","+10*F3($3/6)+" L0,0 L"+10*z3($3/6)+",-"+10*F3($3/6),stroke:s,lineWidth:l}});u.translate(i,o),u.rotateAtPoint(i,o,c),t.set(a?"startArrowShape":"endArrowShape",u)}function U3(t,e,n,r,i,o,a){var s=e.startArrow,l=e.endArrow,c=e.stroke,u=e.lineWidth,h=a?s:l,p=h.d,d=h.fill,f=h.stroke,g=h.lineWidth,m=(0,mX._T)(h,["d","fill","stroke","lineWidth"]),y=B3(r-o,n-i);p&&(i-=z3(y)*p,o-=F3(y)*p);var v=new X4({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:(0,mX.pi)((0,mX.pi)({},m),{stroke:f||c,lineWidth:g||u,fill:d})});v.translate(i,o),v.rotateAtPoint(i,o,y),t.set(a?"startArrowShape":"endArrowShape",v)}function V3(t,e,n,r,i){var o=B3(r-e,n-t);return{dx:z3(o)*i,dy:F3(o)*i}}function H3(t,e,n,r,i,o){"object"===typeof e.startArrow?U3(t,e,n,r,i,o,!0):e.startArrow?j3(t,e,n,r,i,o,!0):t.set("startArrowShape",null)}function G3(t,e,n,r,i,o){"object"===typeof e.endArrow?U3(t,e,n,r,i,o,!1):e.endArrow?j3(t,e,n,r,i,o,!1):t.set("startArrowShape",null)}var W3={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function X3(t,e){var n=e.attr();for(var r in n){var i=n[r],o=W3[r]?W3[r]:r;"matrix"===o&&i?t.transform(i[0],i[1],i[3],i[4],i[6],i[7]):"lineDash"===o&&t.setLineDash?(0,yX.kJ)(i)&&t.setLineDash(i):("strokeStyle"===o||"fillStyle"===o?i=A3(t,e,i):"globalAlpha"===o&&(i*=t.globalAlpha),t[o]=i)}}function q3(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];i.cfg.visible?i.draw(t,n):i.skipDraw()}}function Y3(t,e,n){var r=t.get("refreshElements");(0,yX.S6)(r,(function(e){if(e!==t)for(var n=e.cfg.parent;n&&n!==t&&!n.cfg.refresh;)n.cfg.refresh=!0,n=n.cfg.parent})),r[0]===t?J3(e,n):Z3(e,n)}function Z3(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&J3(r.cfg.children,e);else if(r.cfg.refresh)r.isGroup()&&Z3(r.cfg.children,e);else{var i=Q3(r,e);r.cfg.refresh=i,i&&r.isGroup()&&Z3(r.cfg.children,e)}}}function K3(t){for(var e=0;e<t.length;e++){var n=t[e];n.cfg.hasChanged=!1,n.isGroup()&&!n.destroyed&&K3(n.cfg.children)}}function J3(t,e){for(var n=0;n<t.length;n++){var r=t[n];r.cfg.visible&&(r.cfg.refresh=!0,r.isGroup()&&J3(r.get("children"),e))}}function Q3(t,e){var n=t.cfg.cacheCanvasBBox;return t.cfg.isInView&&n&&E3(n,e)}function t4(t,e,n,r){var i=n.path,o=n.startArrow,a=n.endArrow;if(i){var s=[0,0],l=[0,0],c={dx:0,dy:0};e.beginPath();for(var u=0;u<i.length;u++){var h=i[u],p=h[0];if(0===u&&o&&o.d)c=V3((d=t.getStartTangent())[0][0],d[0][1],d[1][0],d[1][1],o.d);else if(u===i.length-2&&"Z"===i[u+1][0]&&a&&a.d){if("Z"===i[u+1][0])c=V3((d=t.getEndTangent())[0][0],d[0][1],d[1][0],d[1][1],a.d)}else if(u===i.length-1&&a&&a.d){var d;if("Z"!==i[0])c=V3((d=t.getEndTangent())[0][0],d[0][1],d[1][0],d[1][1],a.d)}var f=c.dx,g=c.dy;switch(p){case"M":e.moveTo(h[1]-f,h[2]-g),l=[h[1],h[2]];break;case"L":e.lineTo(h[1]-f,h[2]-g);break;case"Q":e.quadraticCurveTo(h[1],h[2],h[3]-f,h[4]-g);break;case"C":e.bezierCurveTo(h[1],h[2],h[3],h[4],h[5]-f,h[6]-g);break;case"A":var m=void 0;r?(m=r[u])||(m=N3(s,h),r[u]=m):m=N3(s,h);var y=m.cx,v=m.cy,x=m.rx,_=m.ry,b=m.startAngle,w=m.endAngle,S=m.xRotation,C=m.sweepFlag;if(e.ellipse)e.ellipse(y,v,x,_,S,b,w,1-C);else{var E=x>_?x:_,k=x>_?1:x/_,M=x>_?_/x:1;e.translate(y,v),e.rotate(S),e.scale(k,M),e.arc(0,0,E,b,w,1-C),e.scale(1/k,1/M),e.rotate(-S),e.translate(-y,-v)}break;case"Z":e.closePath()}if("Z"===p)s=l;else{var T=h.length;s=[h[T-2],h[T-1]]}}}}function e4(t,e){var n=t.get("canvas");n&&("remove"===e&&(t._cacheCanvasBBox=t.get("cacheCanvasBBox")),t.get("hasChanged")||(t.set("hasChanged",!0),t.cfg.parent&&t.cfg.parent.get("hasChanged")||(n.refreshElement(t,e,n),n.get("autoDraw")&&n.draw())))}function n4(t){var e,n,r;if(t.destroyed)e=t._cacheCanvasBBox;else{var i=t.get("cacheCanvasBBox"),o=i&&!(!i.width||!i.height),a=t.getCanvasBBox(),s=a&&!(!a.width||!a.height);o&&s?(r=a,e=(n=i)&&r?{minX:Math.min(n.minX,r.minX),minY:Math.min(n.minY,r.minY),maxX:Math.max(n.maxX,r.maxX),maxY:Math.max(n.maxY,r.maxY)}:n||r):o?e=i:s&&(e=a)}return e}var r4=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.onCanvasChange=function(t){e4(this,t)},e.prototype.getShapeBase=function(){return u},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,e){e&&(t.save(),X3(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,e=[],n=[];(0,yX.S6)(t,(function(t){var r=t.cfg.cacheCanvasBBox;r&&t.cfg.isInView&&(e.push(r.minX,r.maxX),n.push(r.minY,r.maxY))}));var r=null;if(e.length){var i=(0,yX.VV)(e),o=(0,yX.Fp)(e),a=(0,yX.VV)(n),s=(0,yX.Fp)(n);r={minX:i,minY:a,x:i,y:a,maxX:o,maxY:s,width:o-i,height:s-a};var l=this.cfg.canvas;if(l){var c=l.getViewRange();this.set("isInView",E3(r,c))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",r)},e.prototype.draw=function(t,e){var n=this.cfg.children,r=!e||this.cfg.refresh;n.length&&r&&(t.save(),X3(t,this),this._applyClip(t,this.getClip()),q3(t,n,e),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}($X.AbstractGroup),i4=r4,o4=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,mX.pi)((0,mX.pi)({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return u},e.prototype.getGroupBase=function(){return i4},e.prototype.onCanvasChange=function(t){e4(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),e=this.getHitLineWidth(),n=(0,$X.getBBoxMethod)(t)(this),r=e/2,i=n.x-r,o=n.y-r,a=n.x+n.width+r,s=n.y+n.height+r;return{x:i,minX:i,y:o,minY:o,width:n.width+e,height:n.height+e,maxX:a,maxY:s}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,e){e&&(t.save(),X3(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},e.prototype.draw=function(t,e){var n=this.cfg.clipShape;if(e){if(!1===this.cfg.refresh)return void this.set("hasChanged",!1);if(!E3(e,this.getCanvasBBox()))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}t.save(),X3(t,this),this._applyClip(t,n),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var e=this.getCanvasBBox(),n=E3(e,t);this.set("isInView",n),n?this.set("cacheCanvasBBox",e):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var e=this.attrs,n=e.lineWidth,r=e.opacity,i=e.strokeOpacity,o=e.fillOpacity;this.isFill()&&((0,yX.UM)(o)||1===o?this.fill(t):(t.globalAlpha=o,this.fill(t),t.globalAlpha=r)),this.isStroke()&&n>0&&((0,yX.UM)(i)||1===i||(t.globalAlpha=i),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,e){var n=this.isStroke(),r=this.isFill(),i=this.getHitLineWidth();return this.isInStrokeOrPath(t,e,n,r,i)},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}($X.AbstractShape),a4=o4,s4=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,mX.pi)((0,mX.pi)({},e),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr(),a=o.x,s=o.y,l=o.r,c=i/2,u=S3(a,s,t,e);return r&&n?u<=l+c:r?u<=l:!!n&&(u>=l-c&&u<=l+c)},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,r=e.y,i=e.r;t.beginPath(),t.arc(n,r,i,0,2*Math.PI,!1),t.closePath()},e}(a4),l4=s4;function c4(t,e,n,r){return t/(n*n)+e/(r*r)}var u4=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,mX.pi)((0,mX.pi)({},e),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr(),a=i/2,s=o.x,l=o.y,c=o.rx,u=o.ry,h=(t-s)*(t-s),p=(e-l)*(e-l);return r&&n?c4(h,p,c+a,u+a)<=1:r?c4(h,p,c,u)<=1:!!n&&(c4(h,p,c-a,u-a)>=1&&c4(h,p,c+a,u+a)<=1)},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,r=e.y,i=e.rx,o=e.ry;if(t.beginPath(),t.ellipse)t.ellipse(n,r,i,o,0,0,2*Math.PI,!1);else{var a=i>o?i:o,s=i>o?1:i/o,l=i>o?o/i:1;t.save(),t.translate(n,r),t.scale(s,l),t.arc(0,0,a,0,2*Math.PI),t.restore(),t.closePath()}},e}(a4),h4=u4;function p4(t){return t instanceof HTMLElement&&(0,yX.HD)(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase()}var d4=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,mX.pi)((0,mX.pi)({},e),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(!0===this.get("toDraw")){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var e=this,n=this.attrs;if((0,yX.HD)(t)){var r=new Image;r.onload=function(){if(e.destroyed)return!1;e.attr("img",r),e.set("loading",!1),e._afterLoading();var t=e.get("callback");t&&t.call(e)},r.crossOrigin="Anonymous",r.src=t,this.set("loading",!0)}else t instanceof Image?(n.width||(n.width=t.width),n.height||(n.height=t.height)):p4(t)&&(n.width||(n.width=Number(t.getAttribute("width"))),n.height||(n.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),"img"===e&&this._setImage(n)},e.prototype.createPath=function(t){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",t);var e=this.attr(),n=e.x,r=e.y,i=e.width,o=e.height,a=e.sx,s=e.sy,l=e.swidth,c=e.sheight,u=e.img;(u instanceof Image||p4(u))&&((0,yX.UM)(a)||(0,yX.UM)(s)||(0,yX.UM)(l)||(0,yX.UM)(c)?t.drawImage(u,n,r,i,o):t.drawImage(u,a,s,l,c,n,r,i,o))},e}(a4),f4=d4,g4=n(1622);function m4(t,e,n,r,i,o,a){var s=Math.min(t,n),l=Math.max(t,n),c=Math.min(e,r),u=Math.max(e,r),h=i/2;return o>=s-h&&o<=l+h&&a>=c-h&&a<=u+h&&g4.x1.pointToLine(t,e,n,r,o,a)<=i/2}var y4=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,mX.pi)((0,mX.pi)({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),e=t.x1,n=t.y1,r=t.x2,i=t.y2,o=t.startArrow,a=t.endArrow;o&&H3(this,t,r,i,e,n),a&&G3(this,t,e,n,r,i)},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){if(!n||!i)return!1;var o=this.attr();return m4(o.x1,o.y1,o.x2,o.y2,i,t,e)},e.prototype.createPath=function(t){var e=this.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2,a=e.startArrow,s=e.endArrow,l={dx:0,dy:0},c={dx:0,dy:0};a&&a.d&&(l=V3(n,r,i,o,e.startArrow.d)),s&&s.d&&(c=V3(n,r,i,o,e.endArrow.d)),t.beginPath(),t.moveTo(n+l.dx,r+l.dy),t.lineTo(i-c.dx,o-c.dy)},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,n=t.y1,r=t.x2,i=t.y2;return g4.x1.length(e,n,r,i)},e.prototype.getPoint=function(t){var e=this.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2;return g4.x1.pointAt(n,r,i,o,t)},e}(a4),v4=y4,x4=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,_4=/[^\s\,]+/gi;var b4=function(t){var e=t||[];return(0,yX.kJ)(e)?e:(0,yX.HD)(e)?(e=e.match(x4),(0,yX.S6)(e,(function(t,n){if((t=t.match(_4))[0].length>1){var r=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=r}(0,yX.S6)(t,(function(e,n){isNaN(e)||(t[n]=+e)})),e[n]=t})),e):void 0};var w4="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",S4=new RegExp("([a-z])["+w4+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+w4+"]*,?["+w4+"]*)+)","ig"),C4=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+w4+"]*,?["+w4+"]*","ig");var E4=/[a-z]/;function k4(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function M4(t){var e=function(t){if(!t)return null;if((0,yX.kJ)(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(S4,(function(t,r,i){var o=[],a=r.toLowerCase();if(i.replace(C4,(function(t,e){e&&o.push(+e)})),"m"===a&&o.length>2&&(n.push([r].concat(o.splice(0,2))),a="l",r="m"===r?"l":"L"),"o"===a&&1===o.length&&n.push([r,o[0]]),"r"===a)n.push([r].concat(o));else for(;o.length>=e[a]&&(n.push([r].concat(o.splice(0,e[a]))),e[a]););return""})),n}(t);if(!e||!e.length)return[["M",0,0]];for(var n=!1,r=0;r<e.length;r++){var i=e[r][0];if(E4.test(i)||["V","H","T","S"].indexOf(i)>=0){n=!0;break}}if(!n)return e;var o=[],a=0,s=0,l=0,c=0,u=0,h=e[0];"M"!==h[0]&&"m"!==h[0]||(l=a=+h[1],c=s=+h[2],u++,o[0]=["M",a,s]);r=u;for(var p=e.length;r<p;r++){var d=e[r],f=o[r-1],g=[],m=(i=d[0]).toUpperCase();if(i!==m)switch(g[0]=m,m){case"A":g[1]=d[1],g[2]=d[2],g[3]=d[3],g[4]=d[4],g[5]=d[5],g[6]=+d[6]+a,g[7]=+d[7]+s;break;case"V":g[1]=+d[1]+s;break;case"H":g[1]=+d[1]+a;break;case"M":l=+d[1]+a,c=+d[2]+s,g[1]=l,g[2]=c;break;default:for(var y=1,v=d.length;y<v;y++)g[y]=+d[y]+(y%2?a:s)}else g=e[r];switch(m){case"Z":a=+l,s=+c;break;case"H":g=["L",a=g[1],s];break;case"V":g=["L",a,s=g[1]];break;case"T":a=g[1],s=g[2];var x=k4([f[1],f[2]],[f[3],f[4]]);g=["Q",x[0],x[1],a,s];break;case"S":a=g[g.length-2],s=g[g.length-1];var _=f.length,b=k4([f[_-4],f[_-3]],[f[_-2],f[_-1]]);g=["C",b[0],b[1],g[1],g[2],a,s];break;case"M":l=g[g.length-2],c=g[g.length-1];break;default:a=g[g.length-2],s=g[g.length-1]}o.push(g)}return o}Math.PI;function T4(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function I4(t,e){return T4(t)*T4(e)?(t[0]*e[0]+t[1]*e[1])/(T4(t)*T4(e)):1}function P4(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(I4(t,e))}function O4(t,e){return t[0]===e[0]&&t[1]===e[1]}function A4(t,e){var n=e[1],r=e[2],i=(0,yX.wQ)((0,yX.c$)(e[3]),2*Math.PI),o=e[4],a=e[5],s=t[0],l=t[1],c=e[6],u=e[7],h=Math.cos(i)*(s-c)/2+Math.sin(i)*(l-u)/2,p=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(l-u)/2,d=h*h/(n*n)+p*p/(r*r);d>1&&(n*=Math.sqrt(d),r*=Math.sqrt(d));var f=n*n*(p*p)+r*r*(h*h),g=f?Math.sqrt((n*n*(r*r)-f)/f):1;o===a&&(g*=-1),isNaN(g)&&(g=0);var m=r?g*n*p/r:0,y=n?g*-r*h/n:0,v=(s+c)/2+Math.cos(i)*m-Math.sin(i)*y,x=(l+u)/2+Math.sin(i)*m+Math.cos(i)*y,_=[(h-m)/n,(p-y)/r],b=[(-1*h-m)/n,(-1*p-y)/r],w=P4([1,0],_),S=P4(_,b);return I4(_,b)<=-1&&(S=Math.PI),I4(_,b)>=1&&(S=0),0===a&&S>0&&(S-=2*Math.PI),1===a&&S<0&&(S+=2*Math.PI),{cx:v,cy:x,rx:O4(t,[c,u])?0:n,ry:O4(t,[c,u])?0:r,startAngle:w,endAngle:w+S,xRotation:i,arcFlag:o,sweepFlag:a}}function D4(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}var R4={circle:function(t,e,n){return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e]]},square:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},diamond:function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},triangle:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]},"triangle-down":function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]}},L4=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),-1!==["symbol","x","y","r","radius"].indexOf(e)&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return(0,yX.UM)(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t,n,r=this.attr(),i=r.x,o=r.y,a=r.symbol||"circle",s=this._getR(r);if((0,yX.mf)(a))n=M4(n=(t=a)(i,o,s));else{if(!(t=e.Symbols[a]))return console.warn(a+" marker is not supported."),null;n=t(i,o,s)}return n},e.prototype.createPath=function(t){t4(this,t,{path:this._getPath()},this.get("paramsCache"))},e.Symbols=R4,e}(a4),N4=L4;function F4(t,e,n){var r=(0,$X.getOffScreenContext)();return t.createPath(r),r.isPointInPath(e,n)}var z4=1e-6;function B4(t){return Math.abs(t)<z4?0:t<0?-1:1}function $4(t,e,n){return(n[0]-t[0])*(e[1]-t[1])===(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}function j4(t,e,n){var r=!1,i=t.length;if(i<=2)return!1;for(var o=0;o<i;o++){var a=t[o],s=t[(o+1)%i];if($4(a,s,[e,n]))return!0;B4(a[1]-n)>0!==B4(s[1]-n)>0&&B4(e-(n-a[1])*(a[0]-s[0])/(a[1]-s[1])-a[0])<0&&(r=!r)}return r}function U4(t,e,n,r,i,o,a,s){var l=(Math.atan2(s-e,a-t)+2*Math.PI)%(2*Math.PI);if(l<r||l>i)return!1;var c={x:t+n*Math.cos(l),y:e+n*Math.sin(l)};return S3(c.x,c.y,a,s)<=o/2}var V4=vZ.vs;var H4=(0,mX.pi)({hasArc:function(t){for(var e=!1,n=t.length,r=0;r<n;r++){var i=t[r][0];if("C"===i||"A"===i||"Q"===i){e=!0;break}}return e},extractPolygons:function(t){for(var e=t.length,n=[],r=[],i=[],o=0;o<e;o++){var a=t[o],s=a[0];"M"===s?(i.length&&(r.push(i),i=[]),i.push([a[1],a[2]])):"Z"===s?i.length&&(n.push(i),i=[]):i.push([a[1],a[2]])}return i.length>0&&r.push(i),{polygons:n,polylines:r}},isPointInStroke:function(t,e,n,r,i){for(var o=!1,a=e/2,s=0;s<t.length;s++){var l=t[s],c=l.currentPoint,u=l.params,h=l.prePoint,p=l.box;if(!p||C3(p.x-a,p.y-a,p.width+e,p.height+e,n,r)){switch(l.command){case"L":case"Z":o=m4(h[0],h[1],c[0],c[1],e,n,r);break;case"Q":o=g4.lD.pointDistance(h[0],h[1],u[1],u[2],u[3],u[4],n,r)<=e/2;break;case"C":o=g4.Ll.pointDistance(h[0],h[1],u[1],u[2],u[3],u[4],u[5],u[6],n,r,i)<=e/2;break;case"A":var d=l.arcParams,f=d.cx,g=d.cy,m=d.rx,y=d.ry,v=d.startAngle,x=d.endAngle,_=d.xRotation,b=[n,r,1],w=m>y?m:y;mZ(b,b,V4(null,[["t",-f,-g],["r",-_],["s",1/(m>y?1:m/y),1/(m>y?y/m:1)]])),o=U4(0,0,w,v,x,e,b[0],b[1])}if(o)break}}return o}},$X.PathUtil);function G4(t,e,n){for(var r=!1,i=0;i<t.length;i++){if(r=j4(t[i],e,n))break}return r}var W4=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,mX.pi)((0,mX.pi)({},e),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),"path"===e&&this._setPathArr(n),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=M4(t);var e=H4.hasArc(t);this.set("hasArc",e),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=function(t){for(var e=[],n=null,r=null,i=null,o=0,a=(t=b4(t)).length,s=0;s<a;s++){var l=t[s];r=t[s+1];var c=l[0],u={command:c,prePoint:n,params:l,startTangent:null,endTangent:null};switch(c){case"M":i=[l[1],l[2]],o=s;break;case"A":var h=A4(n,l);u.arcParams=h}if("Z"===c)n=i,r=t[o+1];else{var p=l.length;n=[l[p-2],l[p-1]]}r&&"Z"===r[0]&&(r=t[o],e[o]&&(e[o].prePoint=n)),u.currentPoint=n,e[o]&&O4(n,e[o].currentPoint)&&(e[o].prePoint=u.prePoint);var d=r?[r[r.length-2],r[r.length-1]]:null;u.nextPoint=d;var f=u.prePoint;if(["L","H","V"].includes(c))u.startTangent=[f[0]-n[0],f[1]-n[1]],u.endTangent=[n[0]-f[0],n[1]-f[1]];else if("Q"===c){var g=[l[1],l[2]];u.startTangent=[f[0]-g[0],f[1]-g[1]],u.endTangent=[n[0]-g[0],n[1]-g[1]]}else if("T"===c)g=D4((v=e[s-1]).currentPoint,f),"Q"===v.command?(u.command="Q",u.startTangent=[f[0]-g[0],f[1]-g[1]],u.endTangent=[n[0]-g[0],n[1]-g[1]]):(u.command="TL",u.startTangent=[f[0]-n[0],f[1]-n[1]],u.endTangent=[n[0]-f[0],n[1]-f[1]]);else if("C"===c){var m=[l[1],l[2]],y=[l[3],l[4]];u.startTangent=[f[0]-m[0],f[1]-m[1]],u.endTangent=[n[0]-y[0],n[1]-y[1]],0===u.startTangent[0]&&0===u.startTangent[1]&&(u.startTangent=[m[0]-y[0],m[1]-y[1]]),0===u.endTangent[0]&&0===u.endTangent[1]&&(u.endTangent=[y[0]-m[0],y[1]-m[1]])}else if("S"===c){var v;m=D4((v=e[s-1]).currentPoint,f),y=[l[1],l[2]],"C"===v.command?(u.command="C",u.startTangent=[f[0]-m[0],f[1]-m[1]],u.endTangent=[n[0]-y[0],n[1]-y[1]]):(u.command="SQ",u.startTangent=[f[0]-y[0],f[1]-y[1]],u.endTangent=[n[0]-y[0],n[1]-y[1]])}else if("A"===c){var x=.001,_=u.arcParams||{},b=_.cx,w=void 0===b?0:b,S=_.cy,C=void 0===S?0:S,E=_.rx,k=void 0===E?0:E,M=_.ry,T=void 0===M?0:M,I=_.sweepFlag,P=void 0===I?0:I,O=_.startAngle,A=void 0===O?0:O,D=_.endAngle,R=void 0===D?0:D;0===P&&(x*=-1);var L=k*Math.cos(A-x)+w,N=T*Math.sin(A-x)+C;u.startTangent=[L-i[0],N-i[1]];var F=k*Math.cos(A+R+x)+w,z=T*Math.sin(A+R-x)+C;u.endTangent=[f[0]-F,f[1]-z]}e.push(u)}return e}(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t,e=this.attr(),n=e.startArrow,r=e.endArrow;n&&H3(this,e,(t=this.getStartTangent())[0][0],t[0][1],t[1][0],t[1][1]);r&&G3(this,e,(t=this.getEndTangent())[0][0],t[0][1],t[1][0],t[1][1])},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.getSegments(),a=this.get("hasArc"),s=!1;if(n){var l=this.getTotalLength();s=H4.isPointInStroke(o,i,t,e,l)}if(!s&&r)if(a)s=F4(this,t,e);else{var c=this.attr("path"),u=H4.extractPolygons(c);s=G4(u.polygons,t,e)||G4(u.polylines,t,e)}return s},e.prototype.createPath=function(t){t4(this,t,this.attr(),this.get("paramsCache"))},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,yX.UM)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var e,n,r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var i=this.get("curve");if(!r||0===r.length)return i?{x:i[0][1],y:i[0][2]}:null;(0,yX.S6)(r,(function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)}));var o=i[n];if((0,yX.UM)(o)||(0,yX.UM)(n))return null;var a=o.length,s=i[n+1];return g4.Ll.pointAt(o[a-2],o[a-1],s[1],s[2],s[3],s[4],s[5],s[6],e)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",H4.pathToCurve(t))},e.prototype._setTcache=function(){var t,e,n,r,i=0,o=0,a=[],s=this.get("curve");s&&((0,yX.S6)(s,(function(t,e){n=s[e+1],r=t.length,n&&(i+=g4.Ll.length(t[r-2],t[r-1],n[1],n[2],n[3],n[4],n[5],n[6])||0)})),this.set("totalLength",i),0!==i?((0,yX.S6)(s,(function(l,c){n=s[c+1],r=l.length,n&&((t=[])[0]=o/i,e=g4.Ll.length(l[r-2],l[r-1],n[1],n[2],n[3],n[4],n[5],n[6]),o+=e||0,t[1]=o/i,a.push(t))})),this.set("tCache",a)):this.set("tCache",[]))},e.prototype.getStartTangent=function(){var t,e=this.getSegments();if(e.length>1){var n=e[0].currentPoint,r=e[1].currentPoint,i=e[1].startTangent;t=[],i?(t.push([n[0]-i[0],n[1]-i[1]]),t.push([n[0],n[1]])):(t.push([r[0],r[1]]),t.push([n[0],n[1]]))}return t},e.prototype.getEndTangent=function(){var t,e=this.getSegments(),n=e.length;if(n>1){var r=e[n-2].currentPoint,i=e[n-1].currentPoint,o=e[n-1].endTangent;t=[],o?(t.push([i[0]-o[0],i[1]-o[1]]),t.push([i[0],i[1]])):(t.push([r[0],r[1]]),t.push([i[0],i[1]]))}return t},e}(a4),X4=W4;function q4(t,e,n,r,i){var o=t.length;if(o<2)return!1;for(var a=0;a<o-1;a++){if(m4(t[a][0],t[a][1],t[a+1][0],t[a+1][1],e,n,r))return!0}if(i){var s=t[0],l=t[o-1];if(m4(s[0],s[1],l[0],l[1],e,n,r))return!0}return!1}var Y4=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr().points,a=!1;return n&&(a=q4(o,i,t,e,!0)),!a&&r&&(a=j4(o,t,e)),a},e.prototype.createPath=function(t){var e=this.attr().points;if(!(e.length<2)){t.beginPath();for(var n=0;n<e.length;n++){var r=e[n];0===n?t.moveTo(r[0],r[1]):t.lineTo(r[0],r[1])}t.closePath()}},e}(a4),Z4=Y4,K4=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,mX.pi)((0,mX.pi)({},e),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),this.setArrow(),-1!==["points"].indexOf(e)&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),e=this.attrs,n=e.points,r=e.startArrow,i=e.endArrow,o=n.length,a=n[0][0],s=n[0][1],l=n[o-1][0],c=n[o-1][1];r&&H3(this,t,n[1][0],n[1][1],a,s),i&&G3(this,t,n[o-2][0],n[o-2][1],l,c)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){return!(!n||!i)&&q4(this.attr().points,i,t,e,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var e=this.attr(),n=e.points,r=e.startArrow,i=e.endArrow,o=n.length;if(!(n.length<2)){var a,s=n[0][0],l=n[0][1],c=n[o-1][0],u=n[o-1][1];if(r&&r.d)s+=(a=V3(s,l,n[1][0],n[1][1],r.d)).dx,l+=a.dy;if(i&&i.d)c-=(a=V3(n[o-2][0],n[o-2][1],c,u,i.d)).dx,u-=a.dy;t.beginPath(),t.moveTo(s,l);for(var h=0;h<o-1;h++){var p=n[h];t.lineTo(p[0],p[1])}t.lineTo(c,u)}},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return(0,yX.UM)(e)?(this.set("totalLength",g4.aH.length(t)),this.get("totalLength")):e},e.prototype.getPoint=function(t){var e,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),(0,yX.S6)(i,(function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)})),g4.x1.pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],e)},e.prototype._setTcache=function(){var t=this.attr().points;if(t&&0!==t.length){var e=this.getTotalLength();if(!(e<=0)){var n,r,i=0,o=[];(0,yX.S6)(t,(function(a,s){t[s+1]&&((n=[])[0]=i/e,r=g4.x1.length(a[0],a[1],t[s+1][0],t[s+1][1]),i+=r,n[1]=i/e,o.push(n))})),this.set("tCache",o)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},e.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},e}(a4),J4=K4;var Q4=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,mX.pi)((0,mX.pi)({},e),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr(),a=o.x,s=o.y,l=o.width,c=o.height,u=o.radius;if(u){var h=!1;return n&&(h=function(t,e,n,r,i,o,a,s){return m4(t+i,e,t+n-i,e,o,a,s)||m4(t+n,e+i,t+n,e+r-i,o,a,s)||m4(t+n-i,e+r,t+i,e+r,o,a,s)||m4(t,e+r-i,t,e+i,o,a,s)||U4(t+n-i,e+i,i,1.5*Math.PI,2*Math.PI,o,a,s)||U4(t+n-i,e+r-i,i,0,.5*Math.PI,o,a,s)||U4(t+i,e+r-i,i,.5*Math.PI,Math.PI,o,a,s)||U4(t+i,e+i,i,Math.PI,1.5*Math.PI,o,a,s)}(a,s,l,c,u,i,t,e)),!h&&r&&(h=F4(this,t,e)),h}var p=i/2;return r&&n?C3(a-p,s-p,l+p,c+p,t,e):r?C3(a,s,l,c,t,e):n?function(t,e,n,r,i,o,a){var s=i/2;return C3(t-s,e-s,n,i,o,a)||C3(t+n-s,e-s,i,r,o,a)||C3(t+s,e+r-s,n,i,o,a)||C3(t-s,e+s,i,r,o,a)}(a,s,l,c,i,t,e):void 0},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,r=e.y,i=e.width,o=e.height,a=e.radius;if(t.beginPath(),0===a)t.rect(n,r,i,o);else{var s=function(t){var e=0,n=0,r=0,i=0;return(0,yX.kJ)(t)?1===t.length?e=n=r=i=t[0]:2===t.length?(e=r=t[0],n=i=t[1]):3===t.length?(e=t[0],n=i=t[1],r=t[2]):(e=t[0],n=t[1],r=t[2],i=t[3]):e=n=r=i=t,[e,n,r,i]}(a),l=s[0],c=s[1],u=s[2],h=s[3];t.moveTo(n+l,r),t.lineTo(n+i-c,r),0!==c&&t.arc(n+i-c,r+c,c,-Math.PI/2,0),t.lineTo(n+i,r+o-u),0!==u&&t.arc(n+i-u,r+o-u,u,0,Math.PI/2),t.lineTo(n+h,r+o),0!==h&&t.arc(n+h,r+o-h,h,Math.PI/2,Math.PI),t.lineTo(n,r+l),0!==l&&t.arc(n+l,r+l,l,Math.PI,1.5*Math.PI),t.closePath()}},e}(a4),t5=Q4,e5=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,mX.pi)((0,mX.pi)({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=(0,$X.assembleFont)(t)},e.prototype._setText=function(t){var e=null;(0,yX.HD)(t)&&-1!==t.indexOf("\n")&&(e=t.split("\n")),this.set("textArr",e)},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),e.startsWith("font")&&this._assembleFont(),"text"===e&&this._setText(n)},e.prototype._getSpaceingY=function(){var t=this.attrs,e=t.lineHeight,n=1*t.fontSize;return e?e-n:.14*n},e.prototype._drawTextArr=function(t,e,n){var r,i=this.attrs,o=i.textBaseline,a=i.x,s=i.y,l=1*i.fontSize,c=this._getSpaceingY(),u=(0,$X.getTextHeight)(i.text,i.fontSize,i.lineHeight);(0,yX.S6)(e,(function(e,i){r=s+i*(c+l)-u+l,"middle"===o&&(r+=u-l-(u-l)/2),"top"===o&&(r+=u-l),(0,yX.UM)(e)||(n?t.fillText(e,a,r):t.strokeText(e,a,r))}))},e.prototype._drawText=function(t,e){var n=this.attr(),r=n.x,i=n.y,o=this.get("textArr");if(o)this._drawTextArr(t,o,e);else{var a=n.text;(0,yX.UM)(a)||(e?t.fillText(a,r,i):t.strokeText(a,r,i))}},e.prototype.strokeAndFill=function(t){var e=this.attrs,n=e.lineWidth,r=e.opacity,i=e.strokeOpacity,o=e.fillOpacity;this.isStroke()&&n>0&&((0,yX.UM)(i)||1===i||(t.globalAlpha=r),this.stroke(t)),this.isFill()&&((0,yX.UM)(o)||1===o?this.fill(t):(t.globalAlpha=o,this.fill(t),t.globalAlpha=r)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(a4),n5=e5;function r5(t,e,n){var r=t.getTotalMatrix();if(r){var i=function(t,e){if(e){var n=(0,$X.invert)(e);return(0,$X.multiplyVec2)(n,t)}return t}([e,n,1],r);return[i[0],i[1]]}return[e,n]}function i5(t,e,n){if(t.isCanvas&&t.isCanvas())return!0;if(!(0,$X.isAllowCapture)(t)||!1===t.cfg.isInView)return!1;if(t.cfg.clipShape){var r=r5(t,e,n),i=r[0],o=r[1];if(t.isClipped(i,o))return!1}var a=t.cfg.cacheCanvasBBox||t.getCanvasBBox();return e>=a.minX&&e<=a.maxX&&n>=a.minY&&n<=a.maxY}function o5(t,e,n){if(!i5(t,e,n))return null;for(var r=null,i=t.getChildren(),o=i.length-1;o>=0;o--){var a=i[o];if(a.isGroup())r=o5(a,e,n);else if(i5(a,e,n)){var s=a,l=r5(a,e,n),c=l[0],u=l[1];s.isInShape(c,u)&&(r=a)}if(r)break}return r}var a5=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.renderer="canvas",e.autoDraw=!0,e.localRefresh=!0,e.refreshElements=[],e.clipView=!0,e.quickHit=!1,e},e.prototype.onCanvasChange=function(t){"attr"!==t&&"sort"!==t&&"changeSize"!==t||(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return u},e.prototype.getGroupBase=function(){return i4},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||(window?window.devicePixelRatio:1);return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return this.set("context",e),t},e.prototype.setDOMSize=function(e,n){t.prototype.setDOMSize.call(this,e,n);var r=this.get("context"),i=this.get("el"),o=this.getPixelRatio();i.width=o*e,i.height=o*n,o>1&&r.scale(o,o)},e.prototype.clear=function(){t.prototype.clear.call(this),this._clearFrame();var e=this.get("context"),n=this.get("el");e.clearRect(0,0,n.width,n.height)},e.prototype.getShape=function(e,n){return this.get("quickHit")?o5(this,e,n):t.prototype.getShape.call(this,e,n,null)},e.prototype._getRefreshRegion=function(){var t,e=this.get("refreshElements"),n=this.getViewRange();e.length&&e[0]===this?t=n:(t=function(t){if(!t.length)return null;var e=[],n=[],r=[],i=[];return(0,yX.S6)(t,(function(t){var o=n4(t);o&&(e.push(o.minX),n.push(o.minY),r.push(o.maxX),i.push(o.maxY))})),{minX:(0,yX.VV)(e),minY:(0,yX.VV)(n),maxX:(0,yX.Fp)(r),maxY:(0,yX.Fp)(i)}}(e),t&&(t.minX=Math.floor(t.minX),t.minY=Math.floor(t.minY),t.maxX=Math.ceil(t.maxX),t.maxY=Math.ceil(t.maxY),t.maxY+=1,this.get("clipView")&&(t=function(t,e){return t&&e&&E3(t,e)?{minX:Math.max(t.minX,e.minX),minY:Math.max(t.minY,e.minY),maxX:Math.min(t.maxX,e.maxX),maxY:Math.min(t.maxY,e.maxY)}:null}(t,n))));return t},e.prototype.refreshElement=function(t){this.get("refreshElements").push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,yX.VS)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),e=this.get("el"),n=this.getChildren();t.clearRect(0,0,e.width,e.height),X3(t,this),q3(t,n),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),e=this.get("refreshElements"),n=this.getChildren(),r=this._getRefreshRegion();r?(t.clearRect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),t.save(),t.beginPath(),t.rect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),t.clip(),X3(t,this),Y3(this,n,r),q3(t,n,r),t.restore()):e.length&&K3(e),(0,yX.S6)(e,(function(t){t.get("hasChanged")&&t.set("hasChanged",!1)})),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,e=this.get("drawFrame");e||(e=(0,yX.U7)((function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)})),this.set("drawFrame",e))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}($X.AbstractCanvas),s5=a5,l5="0.5.12",c5={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},u5={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"};function h5(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function p5(t){var e=c5[t.type],n=t.getParent();if(!e)throw new Error("the type "+t.type+" is not supported by svg");var r=h5(e);if(t.get("id")&&(r.id=t.get("id")),t.set("el",r),t.set("attrs",{}),n){var i=n.get("el");i||(i=n.createDom(),n.set("el",i)),i.appendChild(r)}return r}function d5(t,e){var n=t.get("el"),r=(0,yX.qo)(n.children).sort(e),i=document.createDocumentFragment();r.forEach((function(t){i.appendChild(t)})),n.appendChild(i)}function f5(t){var e=t.attr().matrix;if(e){for(var n=t.cfg.el,r=[],i=0;i<9;i+=3)r.push(e[i]+","+e[i+1]);-1===(r=r.join(",")).indexOf("NaN")?n.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",e)}}function g5(t,e){var n=t.getClip(),r=t.get("el");if(n){if(n&&!r.hasAttribute("clip-path")){p5(n),n.createPath(e);var i=e.addClip(n);r.setAttribute("clip-path","url(#"+i+")")}}else r.removeAttribute("clip-path")}function m5(t,e){e.forEach((function(e){e.draw(t)}))}function y5(t,e){var n=t.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context"),i=t.getParent(),o=i?i.getChildren():[n],a=t.get("el");if("remove"===e)if(t.get("isClipShape")){var s=a&&a.parentNode,l=s&&s.parentNode;s&&l&&l.removeChild(s)}else a&&a.parentNode&&a.parentNode.removeChild(a);else if("show"===e)a.setAttribute("visibility","visible");else if("hide"===e)a.setAttribute("visibility","hidden");else if("zIndex"===e)!function(t,e){var n=t.parentNode,r=Array.from(n.childNodes).filter((function(t){return 1===t.nodeType&&"defs"!==t.nodeName.toLowerCase()})),i=r[e],o=r.indexOf(t);if(i){if(o>e)n.insertBefore(t,i);else if(o<e){var a=r[e+1];a?n.insertBefore(t,a):n.appendChild(t)}}else n.appendChild(t)}(a,o.indexOf(t));else if("sort"===e){var c=t.get("children");c&&c.length&&d5(t,(function(t,e){return c.indexOf(t)-c.indexOf(e)?1:0}))}else"clear"===e?a&&(a.innerHTML=""):"matrix"===e?f5(t):"clip"===e?g5(t,r):"attr"===e||"add"===e&&t.draw(r)}}var v5=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=h5("g");this.set("el",t);var e=this.getParent();if(e){var n=e.get("el");n||(n=e.createDom(),e.set("el",n)),n.appendChild(t)}return t},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e);var n=this.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context");this.createPath(r,e)}},e.prototype.onCanvasChange=function(t){y5(this,t)},e.prototype.getShapeBase=function(){return p},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var e=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),g5(this,t),this.createPath(t),e.length&&m5(t,e))},e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");(0,yX.S6)(e||n,(function(t,e){u5[e]&&r.setAttribute(u5[e],t)})),f5(this)},e}($X.AbstractGroup),x5=v5,_5=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="svg",e.canFill=!1,e.canStroke=!1,e}return(0,mX.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,mX.pi)((0,mX.pi)({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e);var n=this.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context");this.draw(r,e)}},e.prototype.getShapeBase=function(){return p},e.prototype.getGroupBase=function(){return x5},e.prototype.onCanvasChange=function(t){y5(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),e=null;if(t)e=t.getBBox();else{var n=(0,$X.getBBoxMethod)(this.get("type"));n&&(e=n(this))}if(e){var r=e.x,i=e.y,o=e.width,a=e.height,s=this.getHitLineWidth(),l=s/2,c=r-l,u=i-l;return{x:c,y:u,minX:c,minY:u,maxX:r+o+l,maxY:i+a+l,width:o+s,height:a+s}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr(),e=t.fill,n=t.fillStyle;return(e||n||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr(),e=t.stroke,n=t.strokeStyle;return(e||n)&&this.canStroke},e.prototype.draw=function(t,e){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||p5(this),g5(this,t),this.createPath(t,e),this.shadow(t,e),this.strokeAndFill(t,e),this.transform(e))},e.prototype.createPath=function(t,e){},e.prototype.strokeAndFill=function(t,e){var n=e||this.attr(),r=n.fill,i=n.fillStyle,o=n.stroke,a=n.strokeStyle,s=n.fillOpacity,l=n.strokeOpacity,c=n.lineWidth,u=this.get("el");this.canFill&&(e?"fill"in n?this._setColor(t,"fill",r):"fillStyle"in n&&this._setColor(t,"fill",i):this._setColor(t,"fill",r||i),s&&u.setAttribute(u5.fillOpacity,s)),this.canStroke&&c>0&&(e?"stroke"in n?this._setColor(t,"stroke",o):"strokeStyle"in n&&this._setColor(t,"stroke",a):this._setColor(t,"stroke",o||a),l&&u.setAttribute(u5.strokeOpacity,l),c&&u.setAttribute(u5.lineWidth,c))},e.prototype._setColor=function(t,e,n){var r=this.get("el");if(n)if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n))(i=t.find("gradient",n))||(i=t.addGradient(n)),r.setAttribute(u5[e],"url(#"+i+")");else if(/^[p,P]{1}[\s]*\(/.test(n)){var i;(i=t.find("pattern",n))||(i=t.addPattern(n)),r.setAttribute(u5[e],"url(#"+i+")")}else r.setAttribute(u5[e],n);else r.setAttribute(u5[e],"none")},e.prototype.shadow=function(t,e){var n=this.attr(),r=e||n,i=r.shadowOffsetX,o=r.shadowOffsetY,a=r.shadowBlur,s=r.shadowColor;(i||o||a||s)&&function(t,e){var n=t.cfg.el,r=t.attr(),i={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(i.dx||i.dy||i.blur||i.color){var o=e.find("filter",i);o||(o=e.addShadow(i)),n.setAttribute("filter","url(#"+o+")")}else n.removeAttribute("filter")}(this,t)},e.prototype.transform=function(t){var e=this.attr();(t||e).matrix&&f5(this)},e.prototype.isInShape=function(t,e){return this.isPointInPath(t,e)},e.prototype.isPointInPath=function(t,e){var n=this.get("el"),r=this.get("canvas").get("el").getBoundingClientRect(),i=t+r.left,o=e+r.top,a=document.elementFromPoint(i,o);return!(!a||!a.isEqualNode(n))},e.prototype.getHitLineWidth=function(){var t=this.attrs,e=t.lineWidth,n=t.lineAppendWidth;return this.isStroke()?e+n:0},e}($X.AbstractShape),b5=_5,w5=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="circle",e.canFill=!0,e.canStroke=!0,e}return(0,mX.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,mX.pi)((0,mX.pi)({},e),{x:0,y:0,r:0})},e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");(0,yX.S6)(e||n,(function(t,e){"x"===e||"y"===e?r.setAttribute("c"+e,t):u5[e]&&r.setAttribute(u5[e],t)}))},e}(b5),S5=w5,C5=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dom",e.canFill=!1,e.canStroke=!1,e}return(0,mX.ZT)(e,t),e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");if((0,yX.S6)(e||n,(function(t,e){u5[e]&&r.setAttribute(u5[e],t)})),"function"===typeof n.html){var i=n.html.call(this,n);if(i instanceof Element||i instanceof HTMLDocument){for(var o=r.childNodes,a=o.length-1;a>=0;a--)r.removeChild(o[a]);r.appendChild(i)}else r.innerHTML=i}else r.innerHTML=n.html},e}(b5),E5=C5,k5=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="ellipse",e.canFill=!0,e.canStroke=!0,e}return(0,mX.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,mX.pi)((0,mX.pi)({},e),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");(0,yX.S6)(e||n,(function(t,e){"x"===e||"y"===e?r.setAttribute("c"+e,t):u5[e]&&r.setAttribute(u5[e],t)}))},e}(b5),M5=k5,T5=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="image",e.canFill=!1,e.canStroke=!1,e}return(0,mX.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,mX.pi)((0,mX.pi)({},e),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,e){var n=this,r=this.attr(),i=this.get("el");(0,yX.S6)(e||r,(function(t,e){"img"===e?n._setImage(r.img):u5[e]&&i.setAttribute(u5[e],t)}))},e.prototype.setAttr=function(t,e){this.attrs[t]=e,"img"===t&&this._setImage(e)},e.prototype._setImage=function(t){var e=this.attr(),n=this.get("el");if((0,yX.HD)(t))n.setAttribute("href",t);else if(t instanceof window.Image)e.width||(n.setAttribute("width",t.width),this.attr("width",t.width)),e.height||(n.setAttribute("height",t.height),this.attr("height",t.height)),n.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,yX.HD)(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase())n.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var r=document.createElement("canvas");r.setAttribute("width",""+t.width),r.setAttribute("height",""+t.height),r.getContext("2d").putImageData(t,0,0),e.width||(n.setAttribute("width",""+t.width),this.attr("width",t.width)),e.height||(n.setAttribute("height",""+t.height),this.attr("height",t.height)),n.setAttribute("href",r.toDataURL())}},e}(b5),I5=T5,P5=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="line",e.canFill=!1,e.canStroke=!0,e}return(0,mX.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,mX.pi)((0,mX.pi)({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");(0,yX.S6)(e||n,(function(e,i){if("startArrow"===i||"endArrow"===i)if(e){var o=(0,yX.Kn)(e)?t.addArrow(n,u5[i]):t.getDefaultArrow(n,u5[i]);r.setAttribute(u5[i],"url(#"+o+")")}else r.removeAttribute(u5[i]);else u5[i]&&r.setAttribute(u5[i],e)}))},e.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,n=t.y1,r=t.x2,i=t.y2;return g4.x1.length(e,n,r,i)},e.prototype.getPoint=function(t){var e=this.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2;return g4.x1.pointAt(n,r,i,o,t)},e}(b5),O5=P5,A5={circle:function(t,e,n){return[["M",t,e],["m",-n,0],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0]]},square:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},diamond:function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},triangle:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["z"]]},triangleDown:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]}},D5={get:function(t){return A5[t]},register:function(t,e){A5[t]=e},remove:function(t){delete A5[t]},getAll:function(){return A5}},R5=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="marker",e.canFill=!0,e.canStroke=!0,e}return(0,mX.ZT)(e,t),e.prototype.createPath=function(t){this.get("el").setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return(0,yX.kJ)(t)?t.map((function(t){return t.join(" ")})).join(""):t},e.prototype._getPath=function(){var t,e=this.attr(),n=e.x,r=e.y,i=e.r||e.radius,o=e.symbol||"circle";return(t=(0,yX.mf)(o)?o:D5.get(o))?t(n,r,i):(console.warn(t+" symbol is not exist."),null)},e.symbolsFactory=D5,e}(b5),L5=R5,N5=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="path",e.canFill=!0,e.canStroke=!0,e}return(0,mX.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,mX.pi)((0,mX.pi)({},e),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,e){var n=this,r=this.attr(),i=this.get("el");(0,yX.S6)(e||r,(function(e,o){if("path"===o&&(0,yX.kJ)(e))i.setAttribute("d",n._formatPath(e));else if("startArrow"===o||"endArrow"===o)if(e){var a=(0,yX.Kn)(e)?t.addArrow(r,u5[o]):t.getDefaultArrow(r,u5[o]);i.setAttribute(u5[o],"url(#"+a+")")}else i.removeAttribute(u5[o]);else u5[o]&&i.setAttribute(u5[o],e)}))},e.prototype._formatPath=function(t){var e=t.map((function(t){return t.join(" ")})).join("");return~e.indexOf("NaN")?"":e},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var e=this.get("el"),n=this.getTotalLength();if(0===n)return null;var r=e?e.getPointAtLength(t*n):null;return r?{x:r.x,y:r.y}:null},e}(b5),F5=N5,z5=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="polygon",e.canFill=!0,e.canStroke=!0,e}return(0,mX.ZT)(e,t),e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");(0,yX.S6)(e||n,(function(t,e){"points"===e&&(0,yX.kJ)(t)&&t.length>=2?r.setAttribute("points",t.map((function(t){return t[0]+","+t[1]})).join(" ")):u5[e]&&r.setAttribute(u5[e],t)}))},e}(b5),B5=z5,$5=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="polyline",e.canFill=!0,e.canStroke=!0,e}return(0,mX.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,mX.pi)((0,mX.pi)({},e),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),-1!==["points"].indexOf(e)&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,e){var n=this.attr(),r=this.get("el");(0,yX.S6)(e||n,(function(t,e){"points"===e&&(0,yX.kJ)(t)&&t.length>=2?r.setAttribute("points",t.map((function(t){return t[0]+","+t[1]})).join(" ")):u5[e]&&r.setAttribute(u5[e],t)}))},e.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return(0,yX.UM)(e)?(this.set("totalLength",g4.aH.length(t)),this.get("totalLength")):e},e.prototype.getPoint=function(t){var e,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),(0,yX.S6)(i,(function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)})),g4.x1.pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],e)},e.prototype._setTcache=function(){var t=this.attr().points;if(t&&0!==t.length){var e=this.getTotalLength();if(!(e<=0)){var n,r,i=0,o=[];(0,yX.S6)(t,(function(a,s){t[s+1]&&((n=[])[0]=i/e,r=g4.x1.length(a[0],a[1],t[s+1][0],t[s+1][1]),i+=r,n[1]=i/e,o.push(n))})),this.set("tCache",o)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},e.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},e}(b5),j5=$5;var U5=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="rect",e.canFill=!0,e.canStroke=!0,e}return(0,mX.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,mX.pi)((0,mX.pi)({},e),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,e){var n=this,r=this.attr(),i=this.get("el"),o=!1,a=["x","y","width","height","radius"];(0,yX.S6)(e||r,(function(t,e){-1===a.indexOf(e)||o?-1===a.indexOf(e)&&u5[e]&&i.setAttribute(u5[e],t):(i.setAttribute("d",n._assembleRect(r)),o=!0)}))},e.prototype._assembleRect=function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=t.radius;if(!o)return"M "+e+","+n+" l "+r+",0 l 0,"+i+" l"+-r+" 0 z";var a=function(t){var e=0,n=0,r=0,i=0;return(0,yX.kJ)(t)?1===t.length?e=n=r=i=t[0]:2===t.length?(e=r=t[0],n=i=t[1]):3===t.length?(e=t[0],n=i=t[1],r=t[2]):(e=t[0],n=t[1],r=t[2],i=t[3]):e=n=r=i=t,{r1:e,r2:n,r3:r,r4:i}}(o);return(0,yX.kJ)(o)?1===o.length?a.r1=a.r2=a.r3=a.r4=o[0]:2===o.length?(a.r1=a.r3=o[0],a.r2=a.r4=o[1]):3===o.length?(a.r1=o[0],a.r2=a.r4=o[1],a.r3=o[2]):(a.r1=o[0],a.r2=o[1],a.r3=o[2],a.r4=o[3]):a.r1=a.r2=a.r3=a.r4=o,[["M "+(e+a.r1)+","+n],["l "+(r-a.r1-a.r2)+",0"],["a "+a.r2+","+a.r2+",0,0,1,"+a.r2+","+a.r2],["l 0,"+(i-a.r2-a.r3)],["a "+a.r3+","+a.r3+",0,0,1,"+-a.r3+","+a.r3],["l "+(a.r3+a.r4-r)+",0"],["a "+a.r4+","+a.r4+",0,0,1,"+-a.r4+","+-a.r4],["l 0,"+(a.r4+a.r1-i)],["a "+a.r1+","+a.r1+",0,0,1,"+a.r1+","+-a.r1],["z"]].join(" ")},e}(b5),V5=U5,H5=n(9761),G5={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},W5={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},X5={left:"left",start:"left",center:"middle",right:"end",end:"end"},q5=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="text",e.canFill=!0,e.canStroke=!0,e}return(0,mX.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,mX.pi)((0,mX.pi)({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,e){var n=this,r=this.attr(),i=this.get("el");this._setFont(),(0,yX.S6)(e||r,(function(t,e){"text"===e?n._setText(""+t):"matrix"===e&&t?f5(n):u5[e]&&i.setAttribute(u5[e],t)})),i.setAttribute("paint-order","stroke"),i.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),e=this.attr(),n=e.textBaseline,r=e.textAlign,i=(0,H5.qY)();i&&"firefox"===i.name?t.setAttribute("dominant-baseline",W5[n]||"alphabetic"):t.setAttribute("alignment-baseline",G5[n]||"baseline"),t.setAttribute("text-anchor",X5[r]||"left")},e.prototype._setText=function(t){var e=this.get("el"),n=this.attr(),r=n.x,i=n.textBaseline,o=void 0===i?"bottom":i;if(t)if(~t.indexOf("\n")){var a=t.split("\n"),s=a.length-1,l="";(0,yX.S6)(a,(function(t,e){0===e?"alphabetic"===o?l+='<tspan x="'+r+'" dy="'+-s+'em">'+t+"</tspan>":"top"===o?l+='<tspan x="'+r+'" dy="0.9em">'+t+"</tspan>":"middle"===o?l+='<tspan x="'+r+'" dy="'+-(s-1)/2+'em">'+t+"</tspan>":"bottom"===o?l+='<tspan x="'+r+'" dy="-'+(s+.3)+'em">'+t+"</tspan>":"hanging"===o&&(l+='<tspan x="'+r+'" dy="'+(-(s-1)-.3)+'em">'+t+"</tspan>"):l+='<tspan x="'+r+'" dy="1em">'+t+"</tspan>"})),e.innerHTML=l}else e.innerHTML=t;else e.innerHTML=""},e}(b5),Y5=q5,Z5=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,K5=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,J5=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function Q5(t){var e=t.match(J5);if(!e)return"";var n="";return e.sort((function(t,e){return t=t.split(":"),e=e.split(":"),Number(t[0])-Number(e[0])})),(0,yX.S6)(e,(function(t){t=t.split(":"),n+='<stop offset="'+t[0]+'" stop-color="'+t[1]+'"></stop>'})),n}var t6=function(){function t(t){this.cfg={};var e=null,n=(0,yX.EL)("gradient_");return"l"===t.toLowerCase()[0]?function(t,e){var n,r,i=Z5.exec(t),o=(0,yX.wQ)((0,yX.c$)(parseFloat(i[1])),2*Math.PI),a=i[2];o>=0&&o<.5*Math.PI?(n={x:0,y:0},r={x:1,y:1}):.5*Math.PI<=o&&o<Math.PI?(n={x:1,y:0},r={x:0,y:1}):Math.PI<=o&&o<1.5*Math.PI?(n={x:1,y:1},r={x:0,y:0}):(n={x:0,y:1},r={x:1,y:0});var s=Math.tan(o),l=s*s,c=(r.x-n.x+s*(r.y-n.y))/(l+1)+n.x,u=s*(r.x-n.x+s*(r.y-n.y))/(l+1)+n.y;e.setAttribute("x1",n.x),e.setAttribute("y1",n.y),e.setAttribute("x2",c),e.setAttribute("y2",u),e.innerHTML=Q5(a)}(t,e=h5("linearGradient")):function(t,e){var n=K5.exec(t),r=parseFloat(n[1]),i=parseFloat(n[2]),o=parseFloat(n[3]),a=n[4];e.setAttribute("cx",r),e.setAttribute("cy",i),e.setAttribute("r",o),e.innerHTML=Q5(a)}(t,e=h5("radialGradient")),e.setAttribute("id",n),this.el=e,this.id=n,this.cfg=t,this}return t.prototype.match=function(t,e){return this.cfg===e},t}(),e6=t6,n6={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},r6={x:"-40%",y:"-40%",width:"200%",height:"200%"},i6=function(){function t(t){this.type="filter",this.cfg={},this.type="filter";var e=h5("filter");return(0,yX.S6)(r6,(function(t,n){e.setAttribute(n,t)})),this.el=e,this.id=(0,yX.EL)("filter_"),this.el.id=this.id,this.cfg=t,this._parseShadow(t,e),this}return t.prototype.match=function(t,e){if(this.type!==t)return!1;var n=!0,r=this.cfg;return(0,yX.S6)(Object.keys(r),(function(t){if(r[t]!==e[t])return n=!1,!1})),n},t.prototype.update=function(t,e){var n=this.cfg;return n[n6[t]]=e,this._parseShadow(n,this.el),this},t.prototype._parseShadow=function(t,e){var n='<feDropShadow\n      dx="'+(t.dx||0)+'"\n      dy="'+(t.dy||0)+'"\n      stdDeviation="'+(t.blur?t.blur/10:0)+'"\n      flood-color="'+(t.color?t.color:"#000")+'"\n      flood-opacity="'+(t.opacity?t.opacity:1)+'"\n      />';e.innerHTML=n},t}(),o6=i6,a6=function(){function t(t,e){this.cfg={};var n=h5("marker"),r=(0,yX.EL)("marker_");n.setAttribute("id",r);var i=h5("path");i.setAttribute("stroke",t.stroke||"none"),i.setAttribute("fill",t.fill||"none"),n.appendChild(i),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=i,this.id=r;var o=t["marker-start"===e?"startArrow":"endArrow"];return this.stroke=t.stroke||"#000",!0===o?this._setDefaultPath(e,i):(this.cfg=o,this._setMarker(t.lineWidth,i)),this}return t.prototype.match=function(){return!1},t.prototype._setDefaultPath=function(t,e){var n=this.el;e.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),n.setAttribute("refX",""+10*Math.cos(Math.PI/6)),n.setAttribute("refY","5")},t.prototype._setMarker=function(t,e){var n=this.el,r=this.cfg.path,i=this.cfg.d;(0,yX.kJ)(r)&&(r=r.map((function(t){return t.join(" ")})).join("")),e.setAttribute("d",r),n.appendChild(e),i&&n.setAttribute("refX",""+i/t)},t.prototype.update=function(t){var e=this.child;e.attr?e.attr("fill",t):e.setAttribute("fill",t)},t}(),s6=a6,l6=function(){function t(t){this.type="clip",this.cfg={};var e=h5("clipPath");this.el=e,this.id=(0,yX.EL)("clip_"),e.id=this.id;var n=t.cfg.el;return e.appendChild(n),this.cfg=t,this}return t.prototype.match=function(){return!1},t.prototype.remove=function(){var t=this.el;t.parentNode.removeChild(t)},t}(),c6=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,u6=function(){function t(t){this.cfg={};var e=h5("pattern");e.setAttribute("patternUnits","userSpaceOnUse");var n=h5("image");e.appendChild(n);var r=(0,yX.EL)("pattern_");e.id=r,this.el=e,this.id=r,this.cfg=t;var i=c6.exec(t)[2];n.setAttribute("href",i);var o=new Image;function a(){e.setAttribute("width",""+o.width),e.setAttribute("height",""+o.height)}return i.match(/^data:/i)||(o.crossOrigin="Anonymous"),o.src=i,o.complete?a():(o.onload=a,o.src=o.src),this}return t.prototype.match=function(t,e){return this.cfg===e},t}(),h6=u6,p6=function(){function t(t){var e=h5("defs"),n=(0,yX.EL)("defs_");e.id=n,t.appendChild(e),this.children=[],this.defaultArrow={},this.el=e,this.canvas=t}return t.prototype.find=function(t,e){for(var n=this.children,r=null,i=0;i<n.length;i++)if(n[i].match(t,e)){r=n[i].id;break}return r},t.prototype.findById=function(t){for(var e=this.children,n=null,r=0;r<e.length;r++)if(e[r].id===t){n=e[r];break}return n},t.prototype.add=function(t){this.children.push(t),t.canvas=this.canvas,t.parent=this},t.prototype.getDefaultArrow=function(t,e){var n=t.stroke||t.strokeStyle;if(this.defaultArrow[n])return this.defaultArrow[n].id;var r=new s6(t,e);return this.defaultArrow[n]=r,this.el.appendChild(r.el),this.add(r),r.id},t.prototype.addGradient=function(t){var e=new e6(t);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addArrow=function(t,e){var n=new s6(t,e);return this.el.appendChild(n.el),this.add(n),n.id},t.prototype.addShadow=function(t){var e=new o6(t);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addPattern=function(t){var e=new h6(t);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addClip=function(t){var e=new l6(t);return this.el.appendChild(e.el),this.add(e),e.id},t}(),d6=p6,f6=function(t){function e(e){return t.call(this,(0,mX.pi)((0,mX.pi)({},e),{autoDraw:!0,renderer:"svg"}))||this}return(0,mX.ZT)(e,t),e.prototype.getShapeBase=function(){return p},e.prototype.getGroupBase=function(){return x5},e.prototype.getShape=function(t,e,n){var r=n.target||n.srcElement;if(!c5[r.tagName]){for(var i=r.parentNode;i&&!c5[i.tagName];)i=i.parentNode;r=i}return this.find((function(t){return t.get("el")===r}))},e.prototype.createDom=function(){var t=h5("svg"),e=new d6(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",e),t},e.prototype.onCanvasChange=function(t){var e=this.get("context"),n=this.get("el");if("sort"===t){var r=this.get("children");r&&r.length&&d5(this,(function(t,e){return r.indexOf(t)-r.indexOf(e)?1:0}))}else if("clear"===t){if(n){n.innerHTML="";var i=e.el;i.innerHTML="",n.appendChild(i)}}else"matrix"===t?f5(this):"clip"===t?g5(this,e):"changeSize"===t&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),e=this.getChildren();g5(this,t),e.length&&m5(t,e)},e}($X.AbstractCanvas),g6=f6,m6="0.5.6",y6=function(t){function e(e){var n=t.call(this,e)||this;n.type="path",n.shapeType="line";var r=e.connectNulls,i=void 0!==r&&r,o=e.showSinglePoint,a=void 0===o||o;return n.connectNulls=i,n.showSinglePoint=a,n}return(0,mX.ZT)(e,t),e.prototype.updateElements=function(t,e){var n,r,i,o,a,s;void 0===e&&(e=!1);for(var l=new Map,c=new Map,u=[],h=0,p=0;p<t.length;p++){var d=t[p],f=this.getElementId(d);u.push(f),l.set(f,d),c.set(f,h),h++}this.elements=new Array(h);var g=I2(this.lastElementsMap,u),m=g.added,y=g.updated,v=g.removed;try{for(var x=(0,mX.XA)(m),_=x.next();!_.done;_=x.next()){f=_.value,d=l.get(f);var b=this.getShapeFactory(),w=this.getShapeInfo(d);p=c.get(f);(E=new m2({shapeFactory:b,container:this.container,offscreenGroup:this.getOffscreenGroup(),elementIndex:p})).geometry=this,E.animate=this.animateOption,E.draw(w,e),this.elementsMap[f]=E,this.elements[p]=E}}catch(I){n={error:I}}finally{try{_&&!_.done&&(r=x.return)&&r.call(x)}finally{if(n)throw n.error}}try{for(var S=(0,mX.XA)(y),C=S.next();!C.done;C=S.next()){f=C.value,d=l.get(f);var E=this.lastElementsMap[f],k=(p=c.get(f),w=this.getShapeInfo(d),E.getModel());(this.isCoordinateChanged||M2(k,w))&&(E.animate=this.animateOption,E.update(w)),this.elementsMap[f]=E,this.elements[p]=E}}catch(P){i={error:P}}finally{try{C&&!C.done&&(o=S.return)&&o.call(S)}finally{if(i)throw i.error}}try{for(var M=(0,mX.XA)(v),T=M.next();!T.done;T=M.next()){f=T.value;(E=this.lastElementsMap[f]).animate=this.animateOption,E.destroy()}}catch(O){a={error:O}}finally{try{T&&!T.done&&(s=M.return)&&s.call(M)}finally{if(a)throw a.error}}},e.prototype.getPointsAndData=function(t){for(var e=[],n=[],r=0,i=t.length;r<i;r++){var o=t[r];e.push({x:o.x,y:o.y}),n.push(o[PX])}return{points:e,data:n}},e.prototype.getShapeInfo=function(t){var e=this.getDrawCfg(t[0]),n=this.getPointsAndData(t),r=n.points,i=n.data;return e.mappingData=t,e.data=i,e.isStack=!!this.getAdjust("stack"),e.points=r,e.connectNulls=this.connectNulls,e.showSinglePoint=this.showSinglePoint,e},e}(O2),v6=y6;function x6(t,e,n,r,i){var o=[];if(t.length){for(var a=[],s=[],l=0,c=t.length;l<c;l++){var u=t[l];a.push(u[1]),s.push(u[0])}s=s.reverse(),(0,yX.S6)([a,s],(function(t,l){var c=[],u=r.parsePoints(t),h=u[0];1===a.length&&1===s.length?c=0===l?[["M",h.x-.5,h.y],["L",h.x+.5,h.y]]:[["L",h.x+.5,h.y],["L",h.x-.5,h.y]]:(e&&u.push({x:h.x,y:h.y}),c=n?f0(u,!1,i):d0(u,!1),l>0&&(c[0][0]="L")),o=o.concat(c)})),o.push(["Z"])}return o}function _6(t,e,n,r,i){for(var o=n3(t,e,!e,"lineWidth"),a=t.connectNulls,s=t.isInCircle,l=Q2(t.points,a,t.showSinglePoint),c=[],u=0,h=l.length;u<h;u++){var p=l[u];c=c.concat(x6(p,s,n,r,i))}return o.path=c,o}function b6(t){var e=t.start,n=t.end;return[[e.x,n.y],[n.x,e.y]]}C2("area",{defaultShapeType:"area",getDefaultPoints:function(t){var e=t.x,n=t.y0;return((0,yX.kJ)(t.y)?t.y:[n,t.y]).map((function(t){return{x:e,y:t}}))}});E2("area","area",{draw:function(t,e){var n=_6(t,!1,!1,this);return e.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(t){return{symbol:function(t,e,n){return void 0===n&&(n=5.5),[["M",t-n,e-4],["L",t+n,e-4],["L",t+n,e+4],["L",t-n,e+4],["Z"]]},style:{r:5,fill:t.color,fillOpacity:1}}}});var w6=function(t){function e(e){var n=t.call(this,e)||this;n.type="area",n.shapeType="area",n.generatePoints=!0,n.startOnZero=!0;var r=e.startOnZero,i=void 0===r||r,o=e.sortable,a=void 0!==o&&o,s=e.showSinglePoint,l=void 0!==s&&s;return n.startOnZero=i,n.sortable=a,n.showSinglePoint=l,n}return(0,mX.ZT)(e,t),e.prototype.getPointsAndData=function(t){for(var e=[],n=[],r=0,i=t.length;r<i;r++){var o=t[r];e.push(o.points),n.push(o[PX])}return{points:e,data:n}},e.prototype.getYMinValue=function(){return this.startOnZero?t.prototype.getYMinValue.call(this):this.getYScale().min},e}(v6),S6=w6;C2("edge",{defaultShapeType:"line",getDefaultPoints:function(t){return i3(t)}});E2("edge","line",{draw:function(t,e){var n=n3(t,!0,!1,"lineWidth"),r=d0(this.parsePoints(t.points),this.coordinate.isPolar);return e.addShape("path",{attrs:(0,mX.pi)((0,mX.pi)({},n),{path:r})})},getMarker:function(t){return{symbol:"circle",style:{r:4.5,fill:t.color}}}});var C6=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="edge",e.shapeType="edge",e.generatePoints=!0,e}return(0,mX.ZT)(e,t),e}(O2),E6=C6,k6=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="heatmap",e.paletteCache={},e}return(0,mX.ZT)(e,t),e.prototype.updateElements=function(t,e){void 0===e&&(e=!1);for(var n=0;n<t.length;n++){var r=t[n],i=this.prepareRange(r),o=this.prepareSize(),a=(0,yX.U2)(this.styleOption,["cfg","shadowBlur"]);(0,yX.hj)(a)||(a=o/2),this.prepareGreyScaleBlurredCircle(o,a),this.drawWithRange(r,i,o,a)}},e.prototype.color=function(t,e){return this.createAttrOption("color",t,"function"!==typeof e?e:""),this},e.prototype.clear=function(){t.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},e.prototype.prepareRange=function(t){var e=this.getAttribute("color").getFields()[0],n=1/0,r=-1/0;return t.forEach((function(t){var i=t[PX][e];i>r&&(r=i),i<n&&(n=i)})),n===r&&(n=r-1),[n,r]},e.prototype.prepareSize=function(){var t=this.getDefaultValue("size");return(0,yX.hj)(t)||(t=this.getDefaultSize()),t},e.prototype.prepareGreyScaleBlurredCircle=function(t,e){var n=this.getGrayScaleBlurredCanvas(),r=t+e,i=n.getContext("2d");n.width=n.height=2*r,i.clearRect(0,0,n.width,n.height),i.shadowOffsetX=i.shadowOffsetY=2*r,i.shadowBlur=e,i.shadowColor="black",i.beginPath(),i.arc(-r,-r,t,0,2*Math.PI,!0),i.closePath(),i.fill()},e.prototype.drawWithRange=function(t,e,n,r){var i,o,a=this.coordinate,s=a.start,l=a.end,c=this.coordinate.getWidth(),u=this.coordinate.getHeight(),h=this.getAttribute("color").getFields()[0];this.clearShadowCanvasCtx();var p=this.getShadowCanvasCtx();e&&(t=t.filter((function(t){return t[PX][h]<=e[1]&&t[PX][h]>=e[0]})));var d=this.scales[h];try{for(var f=(0,mX.XA)(t),g=f.next();!g.done;g=f.next()){var m=g.value,y=this.getDrawCfg(m),v=y.x,x=y.y,_=d.scale(m[PX][h]);this.drawGrayScaleBlurredCircle(v-s.x,x-l.y,n+r,_,p)}}catch(S){i={error:S}}finally{try{g&&!g.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}var b=p.getImageData(0,0,c,u);this.clearShadowCanvasCtx(),this.colorize(b),p.putImageData(b,0,0);var w=this.getImageShape();w.attr("x",s.x),w.attr("y",l.y),w.attr("width",c),w.attr("height",u),w.attr("img",p.canvas),w.set("origin",this.getShapeInfo(t))},e.prototype.getDefaultSize=function(){var t=this.getAttribute("position"),e=this.coordinate;return Math.min(e.getWidth()/(4*t.scales[0].ticks.length),e.getHeight()/(4*t.scales[1].ticks.length))},e.prototype.clearShadowCanvasCtx=function(){var t=this.getShadowCanvasCtx();t.clearRect(0,0,t.canvas.width,t.canvas.height)},e.prototype.getShadowCanvasCtx=function(){var t=this.shadowCanvas;return t||(t=document.createElement("canvas"),this.shadowCanvas=t),t.width=this.coordinate.getWidth(),t.height=this.coordinate.getHeight(),t.getContext("2d")},e.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},e.prototype.drawGrayScaleBlurredCircle=function(t,e,n,r,i){var o=this.getGrayScaleBlurredCanvas();i.globalAlpha=r,i.drawImage(o,t-n,e-n)},e.prototype.colorize=function(t){for(var e=this.getAttribute("color"),n=t.data,r=this.paletteCache,i=3;i<n.length;i+=4){var o=n[i];if((0,yX.hj)(o)){var a=r[o]?r[o]:yq.rgb2arr(e.gradient(o/256));n[i-3]=a[0],n[i-2]=a[1],n[i-1]=a[2],n[i]=o}}},e.prototype.getImageShape=function(){var t=this.imageShape;return t||(t=this.container.addShape({type:"image",attrs:{}}),this.imageShape=t,t)},e.prototype.getShapeInfo=function(t){var e=this.getDrawCfg(t[0]),n=t.map((function(t){return t[PX]}));return(0,mX.pi)((0,mX.pi)({},e),{mappingData:t,data:n})},e}(O2),M6=k6;function T6(t){var e,n,r,i,o,a,s=t.x,l=t.y,c=t.y0,u=t.size;(0,yX.kJ)(l)?(r=(e=(0,mX.CR)(l,2))[0],i=e[1]):(r=c,i=l),(0,yX.kJ)(s)?(o=(n=(0,mX.CR)(s,2))[0],a=n[1]):(o=s-u/2,a=s+u/2);var h=[{x:o,y:r},{x:o,y:i}];return h.push({x:a,y:i},{x:a,y:r}),h}function I6(t,e){void 0===e&&(e=!0);var n=[],r=t[0];n.push(["M",r.x,r.y]);for(var i=1,o=t.length;i<o;i++)n.push(["L",t[i].x,t[i].y]);return e&&(n.push(["L",r.x,r.y]),n.push(["z"])),n}function P6(t,e){var n=0,r=0,i=0,o=0;return(0,yX.kJ)(t)?1===t.length?n=r=i=o=t[0]:2===t.length?(n=i=t[0],r=o=t[1]):3===t.length?(n=t[0],r=o=t[1],i=t[2]):(n=t[0],r=t[1],i=t[2],o=t[3]):n=r=i=o=t,n+r>e&&(r=e-(n=n?e/(1+r/n):0)),i+o>e&&(o=e-(i=i?e/(1+o/i):0)),[n||0,r||0,i||0,o||0]}function O6(t,e,n){var r=[];if(n.isRect){var i=n.isTransposed?{x:n.start.x,y:e[0].y}:{x:e[0].x,y:n.start.y},o=n.isTransposed?{x:n.end.x,y:e[2].y}:{x:e[3].x,y:n.end.y},a=(0,yX.U2)(t,["background","style","radius"]);if(a){var s=n.isTransposed?Math.abs(e[0].y-e[2].y):e[2].x-e[1].x,l=n.isTransposed?n.getWidth():n.getHeight(),c=(0,mX.CR)(P6(a,Math.min(s,l)),4),u=c[0],h=c[1],p=c[2],d=c[3],f=n.isTransposed&&n.isReflect("y"),g=f?0:1,m=function(t){return f?-t:t};r.push(["M",i.x,o.y+m(u)]),0!==u&&r.push(["A",u,u,0,0,g,i.x+u,o.y]),r.push(["L",o.x-h,o.y]),0!==h&&r.push(["A",h,h,0,0,g,o.x,o.y+m(h)]),r.push(["L",o.x,i.y-m(p)]),0!==p&&r.push(["A",p,p,0,0,g,o.x-p,i.y]),r.push(["L",i.x+d,i.y]),0!==d&&r.push(["A",d,d,0,0,g,i.x,i.y-m(d)])}else r.push(["M",i.x,i.y]),r.push(["L",o.x,i.y]),r.push(["L",o.x,o.y]),r.push(["L",i.x,o.y]),r.push(["L",i.x,i.y]);r.push(["z"])}if(n.isPolar){var y=n.getCenter(),v=MQ(t,n),x=v.startAngle,_=v.endAngle;if("theta"===n.type||n.isTransposed){var b=function(t){return Math.pow(t,2)};u=Math.sqrt(b(y.x-e[0].x)+b(y.y-e[0].y)),h=Math.sqrt(b(y.x-e[2].x)+b(y.y-e[2].y));r=EQ(y.x,y.y,u,n.startAngle,n.endAngle,h)}else r=EQ(y.x,y.y,n.getRadius(),x,_)}return r}function A6(t,e,n){var r=[];return(0,yX.UM)(e)?n?r.push(["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["L",(t[2].x+t[3].x)/2,(t[2].y+t[3].y)/2],["Z"]):r.push(["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["L",t[2].x,t[2].y],["L",t[3].x,t[3].y],["Z"]):r.push(["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["L",e[1].x,e[1].y],["L",e[0].x,e[0].y],["Z"]),r}function D6(t,e){return[e,t]}C2("interval",{defaultShapeType:"rect",getDefaultPoints:function(t){return T6(t)}});E2("interval","rect",{draw:function(t,e){var n,r=n3(t,!1,!0),i=e,o=null===t||void 0===t?void 0:t.background;if(o){i=e.addGroup({name:"interval-group"});var a=r3(t),s=O6(t,this.parsePoints(t.points),this.coordinate);i.addShape("path",{attrs:(0,mX.pi)((0,mX.pi)({},a),{path:s}),capture:!1,zIndex:-1,name:f2})}n=r.radius&&this.coordinate.isRect?function(t,e,n){var r,i,o,a,s,l,c,u=(0,mX.CR)((0,mX.ev)([],(0,mX.CR)(t),!1),4),h=u[0],p=u[1],d=u[2],f=u[3],g=(0,mX.CR)("number"===typeof n?Array(4).fill(n):n,4),m=g[0],y=g[1],v=g[2],x=g[3];e.isTransposed&&(p=(r=(0,mX.CR)(D6(p,f),2))[0],f=r[1]),e.isReflect("y")&&(h=(i=(0,mX.CR)(D6(h,p),2))[0],p=i[1],d=(o=(0,mX.CR)(D6(d,f),2))[0],f=o[1]),e.isReflect("x")&&(h=(a=(0,mX.CR)(D6(h,f),2))[0],f=a[1],p=(s=(0,mX.CR)(D6(p,d),2))[0],d=s[1]);var _=[],b=function(t){return Math.abs(t)};return l=(0,mX.CR)(P6([m,y,v,x],Math.min(b(f.x-h.x),b(p.y-h.y))).map((function(t){return b(t)})),4),m=l[0],y=l[1],v=l[2],x=l[3],e.isTransposed&&(m=(c=(0,mX.CR)([x,m,y,v],4))[0],y=c[1],v=c[2],x=c[3]),h.y<p.y?(_.push(["M",f.x,f.y+v]),0!==v&&_.push(["A",v,v,0,0,0,f.x-v,f.y]),_.push(["L",h.x+x,h.y]),0!==x&&_.push(["A",x,x,0,0,0,h.x,h.y+x]),_.push(["L",p.x,p.y-m]),0!==m&&_.push(["A",m,m,0,0,0,p.x+m,p.y]),_.push(["L",d.x-y,d.y]),0!==y&&_.push(["A",y,y,0,0,0,d.x,d.y-y]),_.push(["L",f.x,f.y+v]),_.push(["z"])):f.x<h.x?(_.push(["M",d.x+y,d.y]),0!==y&&_.push(["A",y,y,0,0,0,d.x,d.y+y]),_.push(["L",f.x,f.y-v]),0!==v&&_.push(["A",v,v,0,0,0,f.x+v,f.y]),_.push(["L",h.x-x,h.y]),0!==x&&_.push(["A",x,x,0,0,0,h.x,h.y-x]),_.push(["L",p.x,p.y+m]),0!==m&&_.push(["A",m,m,0,0,0,p.x-m,p.y]),_.push(["L",d.x+y,d.y]),_.push(["z"])):(_.push(["M",p.x,p.y+m]),0!==m&&_.push(["A",m,m,0,0,1,p.x+m,p.y]),_.push(["L",d.x-y,d.y]),0!==y&&_.push(["A",y,y,0,0,1,d.x,d.y+y]),_.push(["L",f.x,f.y-v]),0!==v&&_.push(["A",v,v,0,0,1,f.x-v,f.y]),_.push(["L",h.x+x,h.y]),0!==x&&_.push(["A",x,x,0,0,1,h.x,h.y-x]),_.push(["L",p.x,p.y+m]),_.push(["z"])),_}(this.parsePoints(t.points),this.coordinate,r.radius):this.parsePath(function(t,e,n){var r=n.getWidth(),i=n.getHeight(),o="rect"===n.type,a=[],s=(t[2].x-t[1].x)/2,l=n.isTransposed?s*i/r:s*r/i;return"round"===e?(o?(a.push(["M",t[0].x,t[0].y+l]),a.push(["L",t[1].x,t[1].y-l]),a.push(["A",s,s,0,0,1,t[2].x,t[2].y-l]),a.push(["L",t[3].x,t[3].y+l]),a.push(["A",s,s,0,0,1,t[0].x,t[0].y+l])):(a.push(["M",t[0].x,t[0].y]),a.push(["L",t[1].x,t[1].y]),a.push(["A",s,s,0,0,1,t[2].x,t[2].y]),a.push(["L",t[3].x,t[3].y]),a.push(["A",s,s,0,0,1,t[0].x,t[0].y])),a.push(["z"])):a=I6(t),a}(t.points,r.lineCap,this.coordinate));var l=i.addShape("path",{attrs:(0,mX.pi)((0,mX.pi)({},r),{path:n}),name:"interval"});return o?i:l},getMarker:function(t){var e=t.color;return t.isInPolar?{symbol:"circle",style:{r:4.5,fill:e}}:{symbol:"square",style:{r:4,fill:e}}}});function R6(t){var e=t.theme,n=t.coordinate,r=t.getXScale(),i=r.values,o=t.beforeMappingData,a=i.length,s=DQ(t.coordinate),l=t.intervalPadding,c=t.dodgePadding,u=t.maxColumnWidth||e.maxColumnWidth,h=t.minColumnWidth||e.minColumnWidth,p=t.columnWidthRatio||e.columnWidthRatio,d=t.multiplePieWidthRatio||e.multiplePieWidthRatio,f=t.roseWidthRatio||e.roseWidthRatio;if(r.isLinear&&i.length>1){i.sort();var g=function(t,e){var n=t.length,r=t;(0,yX.HD)(r[0])&&(r=t.map((function(t){return e.translate(t)})));for(var i=r[1]-r[0],o=2;o<n;o++){var a=r[o]-r[o-1];i>a&&(i=a)}return i}(i,r);a=(r.max-r.min)/g,i.length>a&&(a=i.length)}var m=r.range,y=1/a,v=1;(n.isPolar?v=n.isTransposed&&a>1?d:f:(r.isLinear&&(y*=m[1]-m[0]),v=p),!(0,yX.UM)(l)&&l>=0)?y=(1-(a-1)*(l/s))/a:y*=v;if(t.getAdjust("dodge")){var x=function(t,e){if(e){var n=(0,yX.xH)(t);return(0,yX.I)(n,e).length}return t.length}(o,t.getAdjust("dodge").dodgeBy);if(!(0,yX.UM)(c)&&c>=0)y=(y-c/s*(x-1))/x;else!(0,yX.UM)(l)&&l>=0?(y*=v,y/=x):y/=x;y=y>=0?y:0}if(!(0,yX.UM)(u)&&u>=0){var _=u/s;y>_&&(y=_)}if(!(0,yX.UM)(h)&&h>=0){var b=h/s;y<b&&(y=b)}return y}var L6=function(t){function e(e){var n=t.call(this,e)||this;n.type="interval",n.shapeType="interval",n.generatePoints=!0;var r=e.background;return n.background=r,n}return(0,mX.ZT)(e,t),e.prototype.createShapePointsCfg=function(e){var n,r=t.prototype.createShapePointsCfg.call(this,e),i=this.getAttribute("size");i?(n=this.getAttributeValues(i,e)[0],n/=DQ(this.coordinate)):(this.defaultSize||(this.defaultSize=R6(this)),n=this.defaultSize);return r.size=n,r},e.prototype.adjustScale=function(){t.prototype.adjustScale.call(this);var e=this.getYScale();if("theta"===this.coordinate.type)e.change({nice:!1,min:0,max:UQ(e)});else{var n=this.scaleDefs,r=e.field,i=e.min,o=e.max;"time"!==e.type&&(i>0&&!(0,yX.U2)(n,[r,"min"])&&e.change({min:0}),o<=0&&!(0,yX.U2)(n,[r,"max"])&&e.change({max:0}))}},e.prototype.getDrawCfg=function(e){var n=t.prototype.getDrawCfg.call(this,e);return n.background=this.background,n},e}(O2),N6=L6,F6=function(t){function e(e){var n=t.call(this,e)||this;n.type="line";var r=e.sortable,i=void 0!==r&&r;return n.sortable=i,n}return(0,mX.ZT)(e,t),e}(v6),z6=F6,B6=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"];function $6(t,e,n,r,i){var o,a,s=n3(e,i,!i,"r"),l=t.parsePoints(e.points),c=l[0];if(e.isStack)c=l[1];else if(l.length>1){var u=n.addGroup();try{for(var h=(0,mX.XA)(l),p=h.next();!p.done;p=h.next()){var d=p.value;u.addShape({type:"marker",attrs:(0,mX.pi)((0,mX.pi)((0,mX.pi)({},s),{symbol:G2[r]||r}),d)})}}catch(f){o={error:f}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}return u}return n.addShape({type:"marker",attrs:(0,mX.pi)((0,mX.pi)((0,mX.pi)({},s),{symbol:G2[r]||r}),c)})}C2("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(t){return i3(t)}});(0,yX.S6)(B6,(function(t){E2("point","hollow-".concat(t),{draw:function(e,n){return $6(this,e,n,t,!0)},getMarker:function(e){var n=e.color;return{symbol:G2[t]||t,style:{r:4.5,stroke:n,fill:null}}}})}));var j6=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="point",e.shapeType="point",e.generatePoints=!0,e}return(0,mX.ZT)(e,t),e.prototype.getDrawCfg=function(e){var n=t.prototype.getDrawCfg.call(this,e);return(0,mX.pi)((0,mX.pi)({},n),{isStack:!!this.getAdjust("stack")})},e}(O2),U6=j6;C2("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(t){var e=[];return(0,yX.S6)(t.x,(function(n,r){var i=t.y[r];e.push({x:n,y:i})})),e}});E2("polygon","polygon",{draw:function(t,e){if(!(0,yX.xb)(t.points)){var n=n3(t,!0,!0),r=this.parsePath(function(t){for(var e=t[0],n=1,r=[["M",e.x,e.y]];n<t.length;){var i=t[n];i.x===t[n-1].x&&i.y===t[n-1].y||(r.push(["L",i.x,i.y]),i.x===e.x&&i.y===e.y&&n<t.length-1&&(e=t[n+1],r.push(["Z"]),r.push(["M",e.x,e.y]),n++)),n++}return(0,yX.Xy)((0,yX.Z$)(r),e)||r.push(["L",e.x,e.y]),r.push(["Z"]),r}(t.points));return e.addShape("path",{attrs:(0,mX.pi)((0,mX.pi)({},n),{path:r}),name:"polygon"})}},getMarker:function(t){return{symbol:"square",style:{r:4,fill:t.color}}}});var V6=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="polygon",e.shapeType="polygon",e.generatePoints=!0,e}return(0,mX.ZT)(e,t),e.prototype.createShapePointsCfg=function(e){var n,r=t.prototype.createShapePointsCfg.call(this,e),i=r.x,o=r.y;if(!(0,yX.kJ)(i)||!(0,yX.kJ)(o)){var a=this.getXScale(),s=this.getYScale(),l=.5/a.values.length,c=.5/s.values.length;a.isCategory&&s.isCategory?(i=[i-l,i-l,i+l,i+l],o=[o-c,o+c,o+c,o-c]):(0,yX.kJ)(i)?(i=[(n=i)[0],n[0],n[1],n[1]],o=[o-c/2,o+c/2,o+c/2,o-c/2]):(0,yX.kJ)(o)&&(o=[(n=o)[0],n[1],n[1],n[0]],i=[i-l/2,i-l/2,i+l/2,i+l/2]),r.x=i,r.y=o}return r},e}(O2),H6=V6,G6=(C2("schema",{defaultShapeType:""}),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="schema",e.shapeType="schema",e.generatePoints=!0,e}return(0,mX.ZT)(e,t),e.prototype.createShapePointsCfg=function(e){var n,r=t.prototype.createShapePointsCfg.call(this,e),i=this.getAttribute("size");i?(n=this.getAttributeValues(i,e)[0],n/=DQ(this.coordinate)):(this.defaultSize||(this.defaultSize=R6(this)),n=this.defaultSize);return r.size=n,r},e}(O2)),W6=G6;C2("violin",{defaultShapeType:"violin",getDefaultPoints:function(t){var e=t.size/2,n=[],r=function(t){if(!(0,yX.kJ)(t))return[];var e=(0,yX.Fp)(t);return(0,yX.UI)(t,(function(t){return t/e}))}(t._size);return(0,yX.S6)(t.y,(function(i,o){var a=r[o]*e,s=0===o,l=o===t.y.length-1;n.push({isMin:s,isMax:l,x:t.x-a,y:i}),n.unshift({isMin:s,isMax:l,x:t.x+a,y:i})})),n}});E2("violin","violin",{draw:function(t,e){var n=n3(t,!0,!0),r=this.parsePath(t3(t.points));return e.addShape("path",{attrs:(0,mX.pi)((0,mX.pi)({},n),{path:r}),name:"violin"})},getMarker:function(t){return{symbol:"circle",style:{r:4,fill:t.color}}}});var X6=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="violin",e.shapeType="violin",e.generatePoints=!0,e}return(0,mX.ZT)(e,t),e.prototype.createShapePointsCfg=function(e){var n,r=t.prototype.createShapePointsCfg.call(this,e),i=this.getAttribute("size");i?(n=this.getAttributeValues(i,e)[0],n/=DQ(this.coordinate)):(this.defaultSize||(this.defaultSize=R6(this)),n=this.defaultSize);return r.size=n,r._size=(0,yX.U2)(e[PX],[this._sizeField]),r},e.prototype.initAttributes=function(){var e=this.attributeOption,n=e.size?e.size.fields[0]:this._sizeField?this._sizeField:"size";this._sizeField=n,delete e.size,t.prototype.initAttributes.call(this)},e}(O2),q6=X6;function Y6(t,e){return["C",1*t.x/2+1*e.x/2,t.y,1*t.x/2+1*e.x/2,e.y,e.x,e.y]}function Z6(t,e){var n=[];n.push({x:e.x,y:e.y}),n.push(t);var r=["Q"];return(0,yX.S6)(n,(function(t){r.push(t.x,t.y)})),r}E2("area","line",{draw:function(t,e){var n=_6(t,!0,!1,this);return e.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(t){return{symbol:function(t,e,n){return void 0===n&&(n=5.5),[["M",t-n,e-4],["L",t+n,e-4],["L",t+n,e+4],["L",t-n,e+4],["Z"]]},style:{r:5,stroke:t.color,fill:null}}}}),E2("area","smooth",{draw:function(t,e){var n=_6(t,!1,!0,this,b6(this.coordinate));return e.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(t){return{symbol:function(t,e,n){return void 0===n&&(n=5.5),[["M",t-n,e-4],["L",t+n,e-4],["L",t+n,e+4],["L",t-n,e+4],["Z"]]},style:{r:5,fill:t.color,fillOpacity:1}}}}),E2("area","smooth-line",{draw:function(t,e){var n=_6(t,!0,!0,this,b6(this.coordinate));return e.addShape({type:"path",attrs:n,name:"area"})},getMarker:function(t){return{symbol:function(t,e,n){return void 0===n&&(n=5.5),[["M",t-n,e-4],["L",t+n,e-4],["L",t+n,e+4],["L",t-n,e+4],["Z"]]},style:{r:5,stroke:t.color,fill:null}}}}),E2("edge","arc",{draw:function(t,e){var n,r=n3(t,!0,!1,"lineWidth"),i=t.points,o=i.length>2?"weight":"normal";if(t.isInCircle){var a={x:0,y:1};return"normal"===o?n=function(t,e,n){var r=Z6(e,n),i=[["M",t.x,t.y]];return i.push(r),i}(i[0],i[1],a):(r.fill=r.stroke,n=function(t,e){var n=Z6(t[1],e),r=Z6(t[3],e),i=[["M",t[0].x,t[0].y]];return i.push(r),i.push(["L",t[3].x,t[3].y]),i.push(["L",t[2].x,t[2].y]),i.push(n),i.push(["L",t[1].x,t[1].y]),i.push(["L",t[0].x,t[0].y]),i.push(["Z"]),i}(i,a)),n=this.parsePath(n),e.addShape("path",{attrs:(0,mX.pi)((0,mX.pi)({},r),{path:n})})}if("normal"===o)return n=kQ(((i=this.parsePoints(i))[1].x+i[0].x)/2,i[0].y,Math.abs(i[1].x-i[0].x)/2,Math.PI,2*Math.PI),e.addShape("path",{attrs:(0,mX.pi)((0,mX.pi)({},r),{path:n})});var s=Y6(i[1],i[3]),l=Y6(i[2],i[0]);return n=[["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],s,["L",i[3].x,i[3].y],["L",i[2].x,i[2].y],l,["Z"]],n=this.parsePath(n),r.fill=r.stroke,e.addShape("path",{attrs:(0,mX.pi)((0,mX.pi)({},r),{path:n})})},getMarker:function(t){return{symbol:"circle",style:{r:4.5,fill:t.color}}}}),E2("edge","smooth",{draw:function(t,e){var n=n3(t,!0,!1,"lineWidth"),r=t.points,i=this.parsePath(function(t,e){var n=Y6(t,e),r=[["M",t.x,t.y]];return r.push(n),r}(r[0],r[1]));return e.addShape("path",{attrs:(0,mX.pi)((0,mX.pi)({},n),{path:i})})},getMarker:function(t){return{symbol:"circle",style:{r:4.5,fill:t.color}}}});var K6=1/3;E2("edge","vhv",{draw:function(t,e){var n=n3(t,!0,!1,"lineWidth"),r=t.points,i=this.parsePath(function(t,e){var n=[];n.push({x:t.x,y:t.y*(1-K6)+e.y*K6}),n.push({x:e.x,y:t.y*(1-K6)+e.y*K6}),n.push(e);var r=[["M",t.x,t.y]];return(0,yX.S6)(n,(function(t){r.push(["L",t.x,t.y])})),r}(r[0],r[1]));return e.addShape("path",{attrs:(0,mX.pi)((0,mX.pi)({},n),{path:i})})},getMarker:function(t){return{symbol:"circle",style:{r:4.5,fill:t.color}}}}),E2("interval","funnel",{getPoints:function(t){return t.size=2*t.size,T6(t)},draw:function(t,e){var n=n3(t,!1,!0),r=this.parsePath(A6(t.points,t.nextPoints,!1));return e.addShape("path",{attrs:(0,mX.pi)((0,mX.pi)({},n),{path:r}),name:"interval"})},getMarker:function(t){return{symbol:"square",style:{r:4,fill:t.color}}}}),E2("interval","hollow-rect",{draw:function(t,e){var n=n3(t,!0,!1),r=e,i=null===t||void 0===t?void 0:t.background;if(i){r=e.addGroup();var o=r3(t),a=O6(t,this.parsePoints(t.points),this.coordinate);r.addShape("path",{attrs:(0,mX.pi)((0,mX.pi)({},o),{path:a}),capture:!1,zIndex:-1,name:f2})}var s=this.parsePath(I6(t.points)),l=r.addShape("path",{attrs:(0,mX.pi)((0,mX.pi)({},n),{path:s}),name:"interval"});return i?r:l},getMarker:function(t){var e=t.color;return t.isInPolar?{symbol:"circle",style:{r:4.5,stroke:e,fill:null}}:{symbol:"square",style:{r:4,stroke:e,fill:null}}}}),E2("interval","line",{getPoints:function(t){return function(t){var e=t.x,n=t.y,r=t.y0;return(0,yX.kJ)(n)?n.map((function(t,n){return{x:(0,yX.kJ)(e)?e[n]:e,y:t}})):[{x:e,y:r},{x:e,y:n}]}(t)},draw:function(t,e){var n=n3(t,!0,!1,"lineWidth"),r=PQ((0,mX.pi)({},n),["fill"]),i=this.parsePath(I6(t.points,!1));return e.addShape("path",{attrs:(0,mX.pi)((0,mX.pi)({},r),{path:i}),name:"interval"})},getMarker:function(t){return{symbol:function(t,e,n){return[["M",t,e-n],["L",t,e+n]]},style:{r:5,stroke:t.color}}}}),E2("interval","pyramid",{getPoints:function(t){return t.size=2*t.size,T6(t)},draw:function(t,e){var n=n3(t,!1,!0),r=this.parsePath(A6(t.points,t.nextPoints,!0));return e.addShape("path",{attrs:(0,mX.pi)((0,mX.pi)({},n),{path:r}),name:"interval"})},getMarker:function(t){return{symbol:"square",style:{r:4,fill:t.color}}}}),E2("interval","tick",{getPoints:function(t){return function(t){var e,n,r,i=t.x,o=t.y,a=t.y0,s=t.size;(0,yX.kJ)(o)?(n=(e=(0,mX.CR)(o,2))[0],r=e[1]):(n=a,r=o);var l=i+s/2,c=i-s/2;return[{x:i,y:n},{x:i,y:r},{x:c,y:n},{x:l,y:n},{x:c,y:r},{x:l,y:r}]}(t)},draw:function(t,e){var n=n3(t,!0,!1),r=this.parsePath(function(t){return[["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["M",t[2].x,t[2].y],["L",t[3].x,t[3].y],["M",t[4].x,t[4].y],["L",t[5].x,t[5].y]]}(t.points));return e.addShape("path",{attrs:(0,mX.pi)((0,mX.pi)({},n),{path:r}),name:"interval"})},getMarker:function(t){return{symbol:function(t,e,n){return[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]]},style:{r:5,stroke:t.color}}}});var J6=function(t,e,n){var r,i=t.x,o=t.y,a=e.x,s=e.y;switch(n){case"hv":r=[{x:a,y:o}];break;case"vh":r=[{x:i,y:s}];break;case"hvh":var l=(a+i)/2;r=[{x:l,y:o},{x:l,y:s}];break;case"vhv":var c=(o+s)/2;r=[{x:i,y:c},{x:a,y:c}]}return r};function Q6(t,e){var n=Q2(t.points,t.connectNulls,t.showSinglePoint),r=[];return(0,yX.S6)(n,(function(t){var n=function(t,e){var n=[];return(0,yX.S6)(t,(function(r,i){var o=t[i+1];if(n.push(r),o){var a=J6(r,o,e);n=n.concat(a)}})),n}(t,e);r=r.concat(function(t){return t.map((function(t,e){return 0===e?["M",t.x,t.y]:["L",t.x,t.y]}))}(n))})),(0,mX.pi)((0,mX.pi)({},n3(t,!0,!1,"lineWidth")),{path:r})}function t8(t){var e=(0,yX.kJ)(t)?t:[t],n=e[0],r=e[e.length-1],i=e.length>1?e[1]:n;return{min:n,max:r,min1:i,max1:e.length>3?e[3]:r,median:e.length>2?e[2]:i}}function e8(t,e,n){var r,i=n/2;if((0,yX.kJ)(e)){var o=t8(e),a=o.min,s=o.max,l=o.median,c=o.min1,u=t-i,h=t+i;r=[[u,s],[h,s],[t,s],[t,p=o.max1],[u,c],[u,p],[h,p],[h,c],[t,c],[t,a],[u,a],[h,a],[u,l],[h,l]]}else{e=(0,yX.UM)(e)?.5:e;var p,d=t8(t),f=(a=d.min,s=d.max,l=d.median,e-i),g=e+i;r=[[a,f],[a,g],[a,e],[c=d.min1,e],[c,f],[c,g],[p=d.max1,g],[p,f],[p,e],[s,e],[s,f],[s,g],[l,f],[l,g]]}return r.map((function(t){return{x:t[0],y:t[1]}}))}function n8(t){var e=((0,yX.kJ)(t)?t:[t]).sort((function(t,e){return e-t}));return function(t,e,n){if((0,yX.HD)(t))return t.padEnd(e,n);if((0,yX.kJ)(t)){var r=t.length;if(r<e)for(var i=e-r,o=0;o<i;o++)t.push(n)}return t}(e,4,e[e.length-1])}function r8(t,e,n){var r=n8(e);return[{x:t,y:r[0]},{x:t,y:r[1]},{x:t-n/2,y:r[2]},{x:t-n/2,y:r[1]},{x:t+n/2,y:r[1]},{x:t+n/2,y:r[2]},{x:t,y:r[2]},{x:t,y:r[3]}]}function i8(t,e){var n=Math.abs(t[0].x-t[2].x),r=Math.abs(t[0].y-t[2].y),i=Math.min(n,r);return e&&(i=(0,yX.uZ)(e,0,Math.min(n,r))),i/=2,{x:(t[0].x+t[2].x)/2-i,y:(t[0].y+t[2].y)/2-i,width:2*i,height:2*i}}(0,yX.S6)(["hv","vh","hvh","vhv"],(function(t){E2("line",t,{draw:function(e,n){var r=Q6(e,t);return n.addShape({type:"path",attrs:r,name:"line"})},getMarker:function(e){return a3(e,t)}})})),(0,yX.S6)(["cross","tick","plus","hyphen","line"],(function(t){E2("point",t,{draw:function(e,n){return $6(this,e,n,t,!0)},getMarker:function(e){var n=e.color;return{symbol:G2[t],style:{r:4.5,stroke:n,fill:null}}}})})),E2("point","image",{draw:function(t,e){var n,r,i=n3(t,!1,!1,"r").r,o=this.parsePoints(t.points),a=o[0];if(t.isStack)a=o[1];else if(o.length>1){var s=e.addGroup();try{for(var l=(0,mX.XA)(o),c=l.next();!c.done;c=l.next()){var u=c.value;s.addShape("image",{attrs:{x:u.x-i/2,y:u.y-i,width:i,height:i,img:t.shape[1]}})}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return s}return e.addShape("image",{attrs:{x:a.x-i/2,y:a.y-i,width:i,height:i,img:t.shape[1]}})},getMarker:function(t){return{symbol:"circle",style:{r:4.5,fill:t.color}}}}),(0,yX.S6)(B6,(function(t){E2("point",t,{draw:function(e,n){return $6(this,e,n,t,!1)},getMarker:function(e){var n=e.color;return{symbol:G2[t]||t,style:{r:4.5,fill:n}}}})})),E2("schema","box",{getPoints:function(t){return e8(t.x,t.y,t.size)},draw:function(t,e){var n=n3(t,!0,!1),r=this.parsePath(function(t){return[["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["M",t[2].x,t[2].y],["L",t[3].x,t[3].y],["M",t[4].x,t[4].y],["L",t[5].x,t[5].y],["L",t[6].x,t[6].y],["L",t[7].x,t[7].y],["L",t[4].x,t[4].y],["Z"],["M",t[8].x,t[8].y],["L",t[9].x,t[9].y],["M",t[10].x,t[10].y],["L",t[11].x,t[11].y],["M",t[12].x,t[12].y],["L",t[13].x,t[13].y]]}(t.points));return e.addShape("path",{attrs:(0,mX.pi)((0,mX.pi)({},n),{path:r,name:"schema"})})},getMarker:function(t){return{symbol:function(t,e,n){var r=e8(t,[e-6,e-3,e,e+3,e+6],n);return[["M",r[0].x+1,r[0].y],["L",r[1].x-1,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["M",r[4].x,r[4].y],["L",r[5].x,r[5].y],["L",r[6].x,r[6].y],["L",r[7].x,r[7].y],["L",r[4].x,r[4].y],["Z"],["M",r[8].x,r[8].y],["L",r[9].x,r[9].y],["M",r[10].x+1,r[10].y],["L",r[11].x-1,r[11].y],["M",r[12].x,r[12].y],["L",r[13].x,r[13].y]]},style:{r:6,lineWidth:1,stroke:t.color}}}}),E2("schema","candle",{getPoints:function(t){return r8(t.x,t.y,t.size)},draw:function(t,e){var n=n3(t,!0,!0),r=this.parsePath(function(t){return[["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["M",t[2].x,t[2].y],["L",t[3].x,t[3].y],["L",t[4].x,t[4].y],["L",t[5].x,t[5].y],["Z"],["M",t[6].x,t[6].y],["L",t[7].x,t[7].y]]}(t.points));return e.addShape("path",{attrs:(0,mX.pi)((0,mX.pi)({},n),{path:r,name:"schema"})})},getMarker:function(t){var e=t.color;return{symbol:function(t,e,n){var r=r8(t,[e+7.5,e+3,e-3,e-7.5],n);return[["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["L",r[4].x,r[4].y],["L",r[5].x,r[5].y],["Z"],["M",r[6].x,r[6].y],["L",r[7].x,r[7].y]]},style:{lineWidth:1,stroke:e,fill:e,r:6}}}}),E2("polygon","square",{draw:function(t,e){if(!(0,yX.xb)(t.points)){var n=n3(t,!0,!0),r=this.parsePoints(t.points);return e.addShape("rect",{attrs:(0,mX.pi)((0,mX.pi)({},n),i8(r,t.size)),name:"polygon"})}},getMarker:function(t){return{symbol:"square",style:{r:4,fill:t.color}}}}),E2("violin","smooth",{draw:function(t,e){var n=n3(t,!0,!0),r=this.parsePath(e3(t.points));return e.addShape("path",{attrs:(0,mX.pi)((0,mX.pi)({},n),{path:r})})},getMarker:function(t){return{symbol:"circle",style:{stroke:null,r:4,fill:t.color}}}}),E2("violin","hollow",{draw:function(t,e){var n=n3(t,!0,!1),r=this.parsePath(t3(t.points));return e.addShape("path",{attrs:(0,mX.pi)((0,mX.pi)({},n),{path:r})})},getMarker:function(t){return{symbol:"circle",style:{r:4,fill:null,stroke:t.color}}}}),E2("violin","hollow-smooth",{draw:function(t,e){var n=n3(t,!0,!1),r=this.parsePath(e3(t.points));return e.addShape("path",{attrs:(0,mX.pi)((0,mX.pi)({},n),{path:r})})},getMarker:function(t){return{symbol:"circle",style:{r:4,fill:null,stroke:t.color}}}});var o8=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getLabelValueDir=function(t){var e=t.points;return e[0].y<=e[2].y?1:-1},e.prototype.getLabelOffsetPoint=function(e,n,r,i){var o,a=t.prototype.getLabelOffsetPoint.call(this,e,n,r),s=this.getCoordinate(),l=s.isTransposed?"x":"y",c=this.getLabelValueDir(e.mappingData);return a=(0,mX.pi)((0,mX.pi)({},a),((o={})[l]=a[l]*c,o)),s.isReflect("x")&&(a=(0,mX.pi)((0,mX.pi)({},a),{x:-1*a.x})),s.isReflect("y")&&(a=(0,mX.pi)((0,mX.pi)({},a),{y:-1*a.y})),a},e.prototype.getThemedLabelCfg=function(t){var e=this.geometry,n=this.getDefaultLabelCfg(),r=e.theme;return(0,yX.b$)({},n,r.labels,"middle"===t.position?{offset:0}:{},t)},e.prototype.setLabelPosition=function(t,e,n,r){var i,o,a,s,l=this.getCoordinate(),c=l.isTransposed,u=e.points,h=l.convert(u[0]),p=l.convert(u[2]),d=this.getLabelValueDir(e),f=(0,yX.kJ)(e.shape)?e.shape[0]:e.shape;if("funnel"===f||"pyramid"===f){var g=(0,yX.U2)(e,"nextPoints"),m=(0,yX.U2)(e,"points");if(g){var y=l.convert(m[0]),v=l.convert(m[1]),x=l.convert(g[0]),_=l.convert(g[1]);c?(i=Math.min(x.y,y.y),a=Math.max(x.y,y.y),o=(v.x+_.x)/2,s=(y.x+x.x)/2):(i=Math.min((v.y+_.y)/2,(y.y+x.y)/2),a=Math.max((v.y+_.y)/2,(y.y+x.y)/2),o=_.x,s=y.x)}else i=Math.min(p.y,h.y),a=Math.max(p.y,h.y),o=p.x,s=h.x}else i=Math.min(p.y,h.y),a=Math.max(p.y,h.y),o=p.x,s=h.x;switch(r){case"right":t.x=o,t.y=(i+a)/2,t.textAlign=(0,yX.U2)(t,"textAlign",d>0?"left":"right");break;case"left":t.x=s,t.y=(i+a)/2,t.textAlign=(0,yX.U2)(t,"textAlign",d>0?"left":"right");break;case"bottom":c&&(t.x=(o+s)/2),t.y=a,t.textAlign=(0,yX.U2)(t,"textAlign","center"),t.textBaseline=(0,yX.U2)(t,"textBaseline",d>0?"bottom":"top");break;case"middle":c&&(t.x=(o+s)/2),t.y=(i+a)/2,t.textAlign=(0,yX.U2)(t,"textAlign","center"),t.textBaseline=(0,yX.U2)(t,"textBaseline","middle");break;case"top":c&&(t.x=(o+s)/2),t.y=i,t.textAlign=(0,yX.U2)(t,"textAlign","center"),t.textBaseline=(0,yX.U2)(t,"textBaseline",d>0?"bottom":"top")}},e}(V2),a8=o8,s8=Math.PI/2,l8=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getLabelOffset=function(t){var e=this.getCoordinate(),n=0;if((0,yX.hj)(t))n=t;else if((0,yX.HD)(t)&&-1!==t.indexOf("%")){var r=e.getRadius();e.innerRadius>0&&(r*=1-e.innerRadius),n=.01*parseFloat(t)*r}return n},e.prototype.getLabelItems=function(e){var n=t.prototype.getLabelItems.call(this,e),r=this.geometry.getYScale();return(0,yX.UI)(n,(function(t){if(t&&r){var e=r.scale((0,yX.U2)(t.data,r.field));return(0,mX.pi)((0,mX.pi)({},t),{percent:e})}return t}))},e.prototype.getLabelAlign=function(t){var e,n=this.getCoordinate();if(t.labelEmit)e=t.angle<=Math.PI/2&&t.angle>=-Math.PI/2?"left":"right";else if(n.isTransposed){var r=n.getCenter(),i=t.offset;e=Math.abs(t.x-r.x)<1?"center":t.angle>Math.PI||t.angle<=0?i>0?"left":"right":i>0?"right":"left"}else e="center";return e},e.prototype.getLabelPoint=function(t,e,n){var r,i=1,o=t.content[n];this.isToMiddle(e)?r=this.getMiddlePoint(e.points):(1===t.content.length&&0===n?n=1:0===n&&(i=-1),r=this.getArcPoint(e,n));var a=t.offset*i,s=this.getPointAngle(r),l=t.labelEmit,c=this.getCirclePoint(s,a,r,l);return 0===c.r?c.content="":(c.content=o,c.angle=s,c.color=e.color),c.rotate=t.autoRotate?this.getLabelRotate(s,a,l):t.rotate,c.start={x:r.x,y:r.y},c},e.prototype.getArcPoint=function(t,e){return void 0===e&&(e=0),(0,yX.kJ)(t.x)||(0,yX.kJ)(t.y)?{x:(0,yX.kJ)(t.x)?t.x[e]:t.x,y:(0,yX.kJ)(t.y)?t.y[e]:t.y}:{x:t.x,y:t.y}},e.prototype.getPointAngle=function(t){return LQ(this.getCoordinate(),t)},e.prototype.getCirclePoint=function(t,e,n,r){var i=this.getCoordinate(),o=i.getCenter(),a=RQ(i,n);if(0===a)return(0,mX.pi)((0,mX.pi)({},o),{r:a});var s=t;i.isTransposed&&a>e&&!r?s=t+2*Math.asin(e/(2*a)):a+=e;return{x:o.x+a*Math.cos(s),y:o.y+a*Math.sin(s),r:a}},e.prototype.getLabelRotate=function(t,e,n){var r=t+s8;return n&&(r-=s8),r&&(r>s8?r-=Math.PI:r<-s8&&(r+=Math.PI)),r},e.prototype.getMiddlePoint=function(t){var e=this.getCoordinate(),n=t.length,r={x:0,y:0};return(0,yX.S6)(t,(function(t){r.x+=t.x,r.y+=t.y})),r.x/=n,r.y/=n,r=e.convert(r)},e.prototype.isToMiddle=function(t){return t.x.length>2},e}(V2),c8=l8,u8=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultLayout="distribute",e}return(0,mX.ZT)(e,t),e.prototype.getDefaultLabelCfg=function(e,n){var r=t.prototype.getDefaultLabelCfg.call(this,e,n);return(0,yX.b$)({},r,(0,yX.U2)(this.geometry.theme,"pieLabels",{}))},e.prototype.getLabelOffset=function(e){return t.prototype.getLabelOffset.call(this,e)||0},e.prototype.getLabelRotate=function(t,e,n){var r;return e<0&&((r=t)>Math.PI/2&&(r-=Math.PI),r<-Math.PI/2&&(r+=Math.PI)),r},e.prototype.getLabelAlign=function(t){var e,n=this.getCoordinate().getCenter();return e=t.angle<=Math.PI/2&&t.x>=n.x?"left":"right",t.offset<=0&&(e="right"===e?"left":"right"),e},e.prototype.getArcPoint=function(t){return t},e.prototype.getPointAngle=function(t){var e,n=this.getCoordinate(),r={x:(0,yX.kJ)(t.x)?t.x[0]:t.x,y:t.y[0]},i={x:(0,yX.kJ)(t.x)?t.x[1]:t.x,y:t.y[1]},o=LQ(n,r);if(t.points&&t.points[0].y===t.points[1].y)e=o;else{var a=LQ(n,i);o>=a&&(a+=2*Math.PI),e=o+(a-o)/2}return e},e.prototype.getCirclePoint=function(t,e){var n=this.getCoordinate(),r=n.getCenter(),i=n.getRadius()+e;return(0,mX.pi)((0,mX.pi)({},CQ(r.x,r.y,i,t)),{angle:t,r:i})},e}(c8),h8=u8;function p8(t,e,n){var r=t.filter((function(t){return!t.invisible}));r.sort((function(t,e){return t.y-e.y}));var i,o=!0,a=n.minY,s=n.maxY,l=Math.abs(a-s),c=0,u=Number.MIN_VALUE,h=r.map((function(t){return t.y>c&&(c=t.y),t.y<u&&(u=t.y),{content:t.content,size:e,targets:[t.y-a],pos:null}}));for(u-=a,c-a>l&&(l=c-a);o;)for(h.forEach((function(t){var e=(Math.min.apply(u,t.targets)+Math.max.apply(u,t.targets))/2;t.pos=Math.min(Math.max(u,e-t.size/2),l-t.size),t.pos=Math.max(0,t.pos)})),o=!1,i=h.length;i--;)if(i>0){var p=h[i-1],d=h[i];p.pos+p.size>d.pos&&(p.size+=d.size,p.targets=p.targets.concat(d.targets),p.pos+p.size>l&&(p.pos=l-p.size),h.splice(i,1),o=!0)}i=0,h.forEach((function(t){var n=a+e/2;t.targets.forEach((function(){r[i].y=t.pos+n,n+=e,i++}))}))}var d8=4;var f8=4,g8=4;var m8=100,y8=function(){function t(t){void 0===t&&(t={}),this.bitmap={};var e=t.xGap,n=void 0===e?1:e,r=t.yGap,i=void 0===r?8:r;this.xGap=n,this.yGap=i}return t.prototype.hasGap=function(t){for(var e=!0,n=this.bitmap,r=Math.round(t.minX),i=Math.round(t.maxX),o=Math.round(t.minY),a=Math.round(t.maxY),s=r;s<=i;s+=1)if(n[s]){if(s===r||s===i){for(var l=o;l<=a;l++)if(n[s][l]){e=!1;break}}else if(n[s][o]||n[s][a]){e=!1;break}}else n[s]={};return e},t.prototype.fillGap=function(t){for(var e=this.bitmap,n=Math.round(t.minX),r=Math.round(t.maxX),i=Math.round(t.minY),o=Math.round(t.maxY),a=n;a<=r;a+=1)e[a]||(e[a]={});for(a=n;a<=r;a+=this.xGap){for(var s=i;s<=o;s+=this.yGap)e[a][s]=!0;e[a][o]=!0}if(1!==this.yGap)for(a=i;a<=o;a+=1)e[n][a]=!0,e[r][a]=!0;if(1!==this.xGap)for(a=n;a<=r;a+=1)e[a][i]=!0,e[a][o]=!0},t.prototype.destroy=function(){this.bitmap={}},t}();function v8(t,e,n,r){var i=t.getCanvasBBox(),o=i.width,a=i.height,s={x:e,y:n,textAlign:"center"};switch(r){case 0:s.y-=a+1,s.x+=1,s.textAlign="left";break;case 1:s.y-=a+1,s.x-=1,s.textAlign="right";break;case 2:s.y+=a+1,s.x-=1,s.textAlign="right";break;case 3:s.y+=a+1,s.x+=1,s.textAlign="left";break;case 5:s.y-=2*a+2;break;case 6:s.y+=2*a+2;break;case 7:s.x+=o+1,s.textAlign="left";break;case 8:s.x-=o+1,s.textAlign="right"}return t.attr(s),t.getCanvasBBox()}function x8(t){if(t.length>4)return[];var e=function(t,e){return[e.x-t.x,e.y-t.y]};return[e(t[0],t[1]),e(t[1],t[2])]}function _8(t,e,n){void 0===e&&(e=0),void 0===n&&(n={x:0,y:0});var r=t.x,i=t.y;return{x:(r-n.x)*Math.cos(-e)+(i-n.y)*Math.sin(-e)+n.x,y:(n.x-r)*Math.sin(-e)+(i-n.y)*Math.cos(-e)+n.y}}function b8(t){var e=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],n=t.rotation;return n?[_8(e[0],n,e[0]),_8(e[1],n,e[0]),_8(e[2],n,e[0]),_8(e[3],n,e[0])]:e}function w8(t,e){if(t.length>4)return{min:0,max:0};var n=[];return t.forEach((function(t){n.push(function(t,e){return(t[0]||0)*(e[0]||0)+(t[1]||0)*(e[1]||0)+(t[2]||0)*(e[2]||0)}([t.x,t.y],e))})),{min:Math.min.apply(Math,(0,mX.ev)([],(0,mX.CR)(n),!1)),max:Math.max.apply(Math,(0,mX.ev)([],(0,mX.CR)(n),!1))}}function S8(t,e){return t.max>e.min&&t.min<e.max}function C8(t){return["x","y","width","height"].every((function(e){return function(t){return"number"===typeof t&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0}(t[e])}))}function E8(t,e,n){if(void 0===n&&(n=0),!C8(t)||!C8(e))return!1;if(!t.rotation&&!e.rotation)return function(t,e,n){return void 0===n&&(n=0),!(e.x>t.x+t.width+n||e.x+e.width<t.x-n||e.y>t.y+t.height+n||e.y+e.height<t.y-n)}(t,e,n);for(var r=b8(t),i=b8(e),o=x8(r).concat(x8(i)),a=0;a<o.length;a++){var s=o[a];if(!S8(w8(r,s),w8(i,s)))return!1}return!0}var k8=function(){function t(t){var e=this;this.queue=[],this.worker=new Worker(t),this.worker.onmessage=function(t){var n;null===(n=e.queue.shift())||void 0===n||n.resolve(t)},this.worker.onmessageerror=function(t){var n;console.warn("[AntV G2] Web worker is not available"),null===(n=e.queue.shift())||void 0===n||n.reject(t)}}return t.prototype.post=function(t,e){var n=this;return new Promise((function(r,i){n.queue.push({resolve:r,reject:i});try{n.worker.postMessage(t)}catch(kg){console.warn("[AntV G2] Web worker is not available"),(0,yX.mf)(e)&&e()}}))},t.prototype.destroy=function(){this.worker.terminate()},t}();var M8="\n   self.onmessage = ".concat(function(t){var e=function(){function t(t){if(t.length>4)return[];var e=function(t,e){return[e.x-t.x,e.y-t.y]};return[e(t[0],t[1]),e(t[1],t[2])]}function e(t,e,n){void 0===e&&(e=0),void 0===n&&(n={x:0,y:0});var r=t.x,i=t.y;return{x:(r-n.x)*Math.cos(-e)+(i-n.y)*Math.sin(-e)+n.x,y:(n.x-r)*Math.sin(-e)+(i-n.y)*Math.cos(-e)+n.y}}function n(t){var n=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],r=t.rotation;return r?[e(n[0],r,n[0]),e(n[1],r,n[0]),e(n[2],r,n[0]),e(n[3],r,n[0])]:n}function r(t,e){if(t.length>4)return{min:0,max:0};var n=[];return t.forEach((function(t){n.push(function(t,e){return(t[0]||0)*(e[0]||0)+(t[1]||0)*(e[1]||0)+(t[2]||0)*(e[2]||0)}([t.x,t.y],e))})),{min:Math.min.apply(null,n),max:Math.max.apply(null,n)}}function i(t,e){return t.max>e.min&&t.min<e.max}function o(t){return["x","y","width","height"].every((function(e){return function(t){return"number"===typeof t&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0}(t[e])}))}return{intersect:function(e,a,s){if(void 0===s&&(s=0),!o(e)||!o(a))return!1;if(!e.rotation&&!a.rotation)return function(t,e,n){return void 0===n&&(n=0),!(e.x>t.x+t.width+n||e.x+e.width<t.x-n||e.y>t.y+t.height+n||e.y+e.height<t.y-n)}(e,a,s);for(var l=n(e),c=n(a),u=t(l).concat(t(c)),h=0;h<u.length;h++){var p=u[h];if(!i(r(l,p),r(c,p)))return!1}return!0}}}().intersect;var n={"hide-overlap":function(t){for(var n=t.slice(),r=0;r<n.length;r++){var i=n[r];if(i.visible)for(var o=r+1;o<n.length;o++){var a=n[o];i!==a&&a.visible&&e(i,a)&&(a.visible=!1)}}return n}};try{var r=JSON.parse(t.data);if(!r||!r.type||!n[r.type])return;var i=r.type,o=r.items,a=n[i](o);self.postMessage(a)}catch(t){throw t}}.toString(),"\n"),T8=function(t){for(var e=t.slice(),n=0;n<e.length;n++){var r=e[n];if(r.visible)for(var i=n+1;i<e.length;i++){var o=e[i];r!==o&&o.visible&&E8(r,o)&&(o.visible=!1)}}return e},I8=new Map,P8=function(t){if("undefined"!==typeof window){var e;try{e=new Blob([t.toString()],{type:"application/javascript"})}catch(kg){(e=new window.BlobBuilder).append(t.toString()),e=e.getBlob()}return new k8(URL.createObjectURL(e))}}(M8);var O8,A8={"#5B8FF9":!0};function D8(t,e,n){return!!t.getAdjust("stack")||e.every((function(e,r){var i=n[r];return function(t,e,n){var r=t.coordinate,i=L2(e),o=AQ.fromObject(i.getCanvasBBox()),a=AQ.fromObject(n.getBBox());return r.isTransposed?a.height>=o.height:a.width>=o.width}(t,e,i)}))}function R8(t,e,n){return t.some((function(t){return n(t,e)}))}function L8(t,e){return R8(t,e,(function(t,e){var n=L2(t),r=L2(e);return function(t,e,n){return void 0===n&&(n=0),Math.max(0,Math.min(t.x+t.width+n,e.x+e.width+n)-Math.max(t.x-n,e.x-n))*Math.max(0,Math.min(t.y+t.height+n,e.y+e.height+n)-Math.max(t.y-n,e.y-n))}(n.getCanvasBBox(),r.getCanvasBBox(),2)>0}))}function N8(t,e,n){return t.some((function(t){return n(t,e)}))}function F8(t,e){return N8(t,e,(function(t,e){var n=L2(t),r=L2(e);return function(t,e,n){return void 0===n&&(n=0),Math.max(0,Math.min(t.x+t.width+n,e.x+e.width+n)-Math.max(t.x-n,e.x-n))*Math.max(0,Math.min(t.y+t.height+n,e.y+e.height+n)-Math.max(t.y-n,e.y-n))}(n.getCanvasBBox(),r.getCanvasBBox(),2)>0}))}function z8(){return O8||(O8=document.createElement("canvas").getContext("2d")),O8}var B8=(0,yX.HP)((function(t,e){void 0===e&&(e={});var n=e.fontSize,r=e.fontFamily,i=e.fontWeight,o=e.fontStyle,a=e.fontVariant,s=z8();return s.font=[o,a,i,"".concat(n,"px"),r].join(" "),s.measureText((0,yX.HD)(t)?t:"").width}),(function(t,e){return void 0===e&&(e={}),(0,mX.ev)([t],(0,mX.CR)((0,yX.VO)(e)),!1).join("")}));function $8(t,e,n,r,i){var o,a,s=n.start,l=n.end,c=n.getWidth(),u=n.getHeight();"y"===i?(o=s.x+c/2,a=r.y<s.y?r.y:s.y):"x"===i?(o=r.x>s.x?r.x:s.x,a=s.y+u/2):"xy"===i&&(n.isPolar?(o=n.getCenter().x,a=n.getCenter().y):(o=(s.x+l.x)/2,a=(s.y+l.y)/2));var h=function(t,e,n){var r,i=(0,mX.CR)(e,2),o=i[0],a=i[1];return t.applyToMatrix([o,a,1]),"x"===n?(t.setMatrix(vZ.vs(t.getMatrix(),[["t",-o,-a],["s",.01,1],["t",o,a]])),r=vZ.vs(t.getMatrix(),[["t",-o,-a],["s",100,1],["t",o,a]])):"y"===n?(t.setMatrix(vZ.vs(t.getMatrix(),[["t",-o,-a],["s",1,.01],["t",o,a]])),r=vZ.vs(t.getMatrix(),[["t",-o,-a],["s",1,100],["t",o,a]])):"xy"===n&&(t.setMatrix(vZ.vs(t.getMatrix(),[["t",-o,-a],["s",.01,.01],["t",o,a]])),r=vZ.vs(t.getMatrix(),[["t",-o,-a],["s",100,100],["t",o,a]])),r}(t,[o,a],i);t.animate({matrix:h},e)}function j8(t,e){var n,r=N3(t,e),i=r.startAngle,o=r.endAngle;return!(0,yX.vQ)(i,.5*-Math.PI)&&i<.5*-Math.PI&&(i+=2*Math.PI),!(0,yX.vQ)(o,.5*-Math.PI)&&o<.5*-Math.PI&&(o+=2*Math.PI),0===e[5]&&(i=(n=(0,mX.CR)([o,i],2))[0],o=n[1]),(0,yX.vQ)(i,1.5*Math.PI)&&(i=-.5*Math.PI),(0,yX.vQ)(o,-.5*Math.PI)&&!(0,yX.vQ)(i,o)&&(o=1.5*Math.PI),{startAngle:i,endAngle:o}}function U8(t){var e;return"M"===t[0]||"L"===t[0]?e=[t[1],t[2]]:"a"!==t[0]&&"A"!==t[0]&&"C"!==t[0]||(e=[t[t.length-2],t[t.length-1]]),e}function V8(t){var e,n,r,i=t.filter((function(t){return"A"===t[0]||"a"===t[0]}));if(0===i.length)return{startAngle:0,endAngle:0,radius:0,innerRadius:0};var o=i[0],a=i.length>1?i[1]:i[0],s=t.indexOf(o),l=t.indexOf(a),c=U8(t[s-1]),u=U8(t[l-1]),h=j8(c,o),p=h.startAngle,d=h.endAngle,f=j8(u,a),g=f.startAngle,m=f.endAngle;(0,yX.vQ)(p,g)&&(0,yX.vQ)(d,m)?(n=p,r=d):(n=Math.min(p,g),r=Math.max(d,m));var y=o[1],v=i[i.length-1][1];return y<v?(y=(e=(0,mX.CR)([v,y],2))[0],v=e[1]):y===v&&(v=0),{startAngle:n,endAngle:r,radius:y,innerRadius:v}}function H8(t,e,n){if(t.isGroup())(0,yX.S6)(t.getChildren(),(function(t){H8(t,e,n)}));else{var r=t.getBBox(),i=(r.minX+r.maxX)/2,o=(r.minY+r.maxY)/2;if(t.applyToMatrix([i,o,1]),"zoomIn"===n){var a=vZ.vs(t.getMatrix(),[["t",-i,-o],["s",.01,.01],["t",i,o]]);t.setMatrix(a),t.animate({matrix:vZ.vs(t.getMatrix(),[["t",-i,-o],["s",100,100],["t",i,o]])},e)}else t.animate({matrix:vZ.vs(t.getMatrix(),[["t",-i,-o],["s",.01,.01],["t",i,o]])},(0,mX.pi)((0,mX.pi)({},e),{callback:function(){t.remove(!0),(0,yX.mf)(e.callback)&&e.callback()}}))}}function G8(t){return[dX.TOP,dX.BOTTOM].includes(t)?{offsetX:0,offsetY:t===dX.TOP?-8:8,style:{textAlign:"center",textBaseline:t===dX.TOP?"bottom":"top"}}:[dX.LEFT,dX.RIGHT].includes(t)?{offsetX:t===dX.LEFT?-8:8,offsetY:0,style:{textAlign:t===dX.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function W8(t,e,n){return{x:t.x+e*Math.cos(n),y:t.y+e*Math.sin(n)}}var X8=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){return(0,yX.b$)({},t.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:t.prototype.getDefaultTitleCfg.call(this)})},e.prototype.render=function(){t.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.getRegion=function(t,e){var n=2*Math.PI/t,r=-1*Math.PI/2+n*e,i=.5/(1+1/Math.sin(n/2)),o=W8({x:.5,y:.5},.5-i,r),a=5*Math.PI/4,s=1*Math.PI/4;return{start:W8(o,i,a),end:W8(o,i,s)}},e.prototype.afterEachView=function(t,e){this.processAxis(t,e)},e.prototype.beforeEachView=function(t,e){},e.prototype.generateFacets=function(t){var e=this,n=this.cfg,r=n.fields,i=n.type,o=(0,mX.CR)(r,1)[0];if(!o)throw new Error("No `fields` specified!");var a=this.getFieldValues(t,o),s=a.length,l=[];return a.forEach((function(n,r){var c=[{field:o,value:n,values:a}],u=(0,yX.hX)(t,e.getFacetDataFilter(c)),h={type:i,data:u,region:e.getRegion(s,r),columnValue:n,columnField:o,columnIndex:r,columnValuesLength:s,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};l.push(h)})),l},e.prototype.getXAxisOption=function(t,e,n,r){return n},e.prototype.getYAxisOption=function(t,e,n,r){return n},e.prototype.renderTitle=function(){var t=this;(0,yX.S6)(this.facets,(function(e){var n=e.columnValue,r=e.view,i=(0,yX.U2)(t.cfg.title,"formatter"),o=(0,yX.b$)({position:["50%","0%"],content:i?i(n):n},G8(dX.TOP),t.cfg.title);r.annotation().text(o)}))},e}(JQ),q8=X8,Y8=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){return(0,yX.b$)({},t.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:t.prototype.getDefaultTitleCfg.call(this)})},e.prototype.render=function(){t.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.afterEachView=function(t,e){this.processAxis(t,e)},e.prototype.beforeEachView=function(t,e){},e.prototype.generateFacets=function(t){var e=this,n=this.cfg.fields,r=this.cfg.cols,i=(0,mX.CR)(n,1)[0];if(!i)throw new Error("No `fields` specified!");var o=this.getFieldValues(t,i),a=o.length;r=r||a;var s=this.getPageCount(a,r),l=[];return o.forEach((function(n,c){var u=e.getRowCol(c,r),h=u.row,p=u.col,d=[{field:i,value:n,values:o}],f=(0,yX.hX)(t,e.getFacetDataFilter(d)),g={type:e.cfg.type,data:f,region:e.getRegion(s,r,p,h),columnValue:n,rowValue:n,columnField:i,rowField:null,columnIndex:p,rowIndex:h,columnValuesLength:r,rowValuesLength:s,total:a};l.push(g)})),l},e.prototype.getXAxisOption=function(t,e,n,r){return r.rowIndex!==r.rowValuesLength-1&&r.columnValuesLength*r.rowIndex+r.columnIndex+1+r.columnValuesLength<=r.total?(0,mX.pi)((0,mX.pi)({},n),{label:null,title:null}):n},e.prototype.getYAxisOption=function(t,e,n,r){return 0!==r.columnIndex?(0,mX.pi)((0,mX.pi)({},n),{title:null,label:null}):n},e.prototype.renderTitle=function(){var t=this;(0,yX.S6)(this.facets,(function(e){var n=e.columnValue,r=e.view,i=(0,yX.U2)(t.cfg.title,"formatter"),o=(0,yX.b$)({position:["50%","0%"],content:i?i(n):n},G8(dX.TOP),t.cfg.title);r.annotation().text(o)}))},e.prototype.getPageCount=function(t,e){return Math.floor((t+e-1)/e)},e.prototype.getRowCol=function(t,e){return{row:Math.floor(t/e),col:t%e}},e}(JQ),Z8=Y8,K8=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){return(0,yX.b$)({},t.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:(0,mX.pi)({},t.prototype.getDefaultTitleCfg.call(this)),rowTitle:(0,mX.pi)({},t.prototype.getDefaultTitleCfg.call(this))})},e.prototype.render=function(){t.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.afterEachView=function(t,e){this.processAxis(t,e)},e.prototype.beforeEachView=function(t,e){},e.prototype.generateFacets=function(t){for(var e=this.cfg,n=e.fields,r=e.type,i=n.length,o=i,a=[],s=0;s<o;s++)for(var l=n[s],c=0;c<i;c++){var u=n[c],h={type:r,data:t,region:this.getRegion(i,o,s,c),columnValue:l,rowValue:u,columnField:l,rowField:u,columnIndex:s,rowIndex:c,columnValuesLength:o,rowValuesLength:i};a.push(h)}return a},e.prototype.getXAxisOption=function(t,e,n,r){return r.rowIndex!==r.rowValuesLength-1?(0,mX.pi)((0,mX.pi)({},n),{label:null,title:null}):n},e.prototype.getYAxisOption=function(t,e,n,r){return 0!==r.columnIndex?(0,mX.pi)((0,mX.pi)({},n),{title:null,label:null}):n},e.prototype.renderTitle=function(){var t=this;(0,yX.S6)(this.facets,(function(e,n){var r=e.columnIndex,i=e.rowIndex,o=e.columnValuesLength,a=(e.rowValuesLength,e.columnValue),s=e.rowValue,l=e.view;if(0===i){var c=(0,yX.U2)(t.cfg.columnTitle,"formatter"),u=(0,yX.b$)({position:["50%","0%"],content:c?c(a):a},G8(dX.TOP),t.cfg.columnTitle);l.annotation().text(u)}if(r===o-1){c=(0,yX.U2)(t.cfg.rowTitle,"formatter"),u=(0,yX.b$)({position:["100%","50%"],content:c?c(s):s},G8(dX.RIGHT),t.cfg.rowTitle);l.annotation().text(u)}}))},e}(JQ),J8=K8,Q8=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getDefaultCfg=function(){return(0,yX.b$)({},t.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:t.prototype.getDefaultTitleCfg.call(this),transpose:!1})},e.prototype.render=function(){t.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.beforeEachView=function(t,e){this.cfg.transpose?e.columnIndex%2===0?t.coordinate().transpose().reflect("x"):t.coordinate().transpose():e.rowIndex%2!==0&&t.coordinate().reflect("y")},e.prototype.afterEachView=function(t,e){this.processAxis(t,e)},e.prototype.generateFacets=function(t){var e,n,r=this,i=(0,mX.CR)(this.cfg.fields,1)[0],o=[],a=1,s=1,l=[""],c=[""];return this.cfg.transpose?(e=i,l=this.getFieldValues(t,e).slice(0,2),a=l.length):(n=i,c=this.getFieldValues(t,n).slice(0,2),s=c.length),l.forEach((function(i,u){c.forEach((function(h,p){var d=[{field:e,value:i,values:l},{field:n,value:h,values:c}],f=(0,yX.hX)(t,r.getFacetDataFilter(d)),g={type:r.cfg.type,data:f,region:r.getRegion(s,a,u,p),columnValue:i,rowValue:h,columnField:e,rowField:n,columnIndex:u,rowIndex:p,columnValuesLength:a,rowValuesLength:s};o.push(g)}))})),o},e.prototype.getXAxisOption=function(t,e,n,r){return 1===r.columnIndex||1===r.rowIndex?(0,mX.pi)((0,mX.pi)({},n),{label:null,title:null}):n},e.prototype.getYAxisOption=function(t,e,n,r){return n},e.prototype.renderTitle=function(){var t=this;(0,yX.S6)(this.facets,(function(e,n){var r=e.columnValue,i=e.rowValue,o=e.view,a=(0,yX.U2)(t.cfg.title,"formatter");if(t.cfg.transpose){var s=(0,yX.b$)({position:["50%","0%"],content:a?a(r):r},G8(dX.TOP),t.cfg.title);o.annotation().text(s)}else{s=(0,yX.b$)({position:["100%","50%"],content:a?a(i):i},G8(dX.RIGHT),t.cfg.title);o.annotation().text(s)}}))},e}(JQ),t9=Q8,e9=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.afterEachView=function(t,e){this.processAxis(t,e)},e.prototype.beforeEachView=function(t,e){},e.prototype.getDefaultCfg=function(){return(0,yX.b$)({},t.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:(0,mX.pi)({},t.prototype.getDefaultTitleCfg.call(this)),rowTitle:(0,mX.pi)({},t.prototype.getDefaultTitleCfg.call(this))})},e.prototype.render=function(){t.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.generateFacets=function(t){var e=this,n=(0,mX.CR)(this.cfg.fields,2),r=n[0],i=n[1],o=[],a=1,s=1,l=[""],c=[""];return r&&(l=this.getFieldValues(t,r),a=l.length),i&&(c=this.getFieldValues(t,i),s=c.length),l.forEach((function(n,u){c.forEach((function(h,p){var d=[{field:r,value:n,values:l},{field:i,value:h,values:c}],f=(0,yX.hX)(t,e.getFacetDataFilter(d)),g={type:e.cfg.type,data:f,region:e.getRegion(s,a,u,p),columnValue:n,rowValue:h,columnField:r,rowField:i,columnIndex:u,rowIndex:p,columnValuesLength:a,rowValuesLength:s};o.push(g)}))})),o},e.prototype.renderTitle=function(){var t=this;(0,yX.S6)(this.facets,(function(e,n){var r=e.columnIndex,i=e.rowIndex,o=e.columnValuesLength,a=e.columnValue,s=e.rowValue,l=e.view;if(0===i){var c=(0,yX.U2)(t.cfg.columnTitle,"formatter"),u=(0,yX.b$)({position:["50%","0%"],content:c?c(a):a},G8(dX.TOP),t.cfg.columnTitle);l.annotation().text(u)}if(r===o-1){c=(0,yX.U2)(t.cfg.rowTitle,"formatter"),u=(0,yX.b$)({position:["100%","50%"],content:c?c(s):s},G8(dX.RIGHT),t.cfg.rowTitle);l.annotation().text(u)}}))},e.prototype.getXAxisOption=function(t,e,n,r){return r.rowIndex!==r.rowValuesLength-1?(0,mX.pi)((0,mX.pi)({},n),{title:null,label:null}):r.columnIndex!==Math.floor((r.columnValuesLength-1)/2)?(0,mX.pi)((0,mX.pi)({},n),{title:null}):n},e.prototype.getYAxisOption=function(t,e,n,r){return 0!==r.columnIndex?(0,mX.pi)((0,mX.pi)({},n),{title:null,label:null}):r.rowIndex!==Math.floor((r.rowValuesLength-1)/2)?(0,mX.pi)((0,mX.pi)({},n),{title:null}):n},e}(JQ),n9=e9,r9=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.afterChartRender=function(){e.facets&&e.cfg.line&&(e.container.clear(),e.drawLines(e.facets))},e}return(0,mX.ZT)(e,t),e.prototype.afterEachView=function(t,e){this.processAxis(t,e)},e.prototype.beforeEachView=function(t,e){},e.prototype.init=function(){t.prototype.init.call(this),this.view.on(vX.AFTER_RENDER,this.afterChartRender)},e.prototype.getDefaultCfg=function(){return(0,yX.b$)({},t.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:t.prototype.getDefaultTitleCfg.call(this)})},e.prototype.generateFacets=function(t){if(!this.cfg.fields.length)throw new Error("Please specify for the fields for rootFacet!");var e=[],n={type:this.cfg.type,data:t,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return e.push(n),n.children=this.getChildFacets(t,1,e),this.setRegion(e),e},e.prototype.setRegion=function(t){var e=this;this.forceColIndex(t),t.forEach((function(t){t.region=e.getRegion(t.rowValuesLength,t.columnValuesLength,t.columnIndex,t.rowIndex)}))},e.prototype.getRegion=function(t,e,n,r){var i=1/e,o=1/t,a={x:i*n,y:o*r};return{start:a,end:{x:a.x+i,y:a.y+2*o/3}}},e.prototype.forceColIndex=function(t){var e,n,r=this,i=[],o=0;t.forEach((function(t){r.isLeaf(t)&&(i.push(t),t.columnIndex=o,o++)})),i.forEach((function(t){t.columnValuesLength=i.length}));for(var a=this.cfg.fields.length-1;a>=0;a--){var s=this.getFacetsByLevel(t,a);try{for(var l=(e=void 0,(0,mX.XA)(s)),c=l.next();!c.done;c=l.next()){var u=c.value;this.isLeaf(u)||(u.originColIndex=u.columnIndex,u.columnIndex=this.getRegionIndex(u.children),u.columnValuesLength=i.length)}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}}},e.prototype.getFacetsByLevel=function(t,e){var n=[];return t.forEach((function(t){t.rowIndex===e&&n.push(t)})),n},e.prototype.getRegionIndex=function(t){var e=t[0];return(t[t.length-1].columnIndex-e.columnIndex)/2+e.columnIndex},e.prototype.isLeaf=function(t){return!t.children||!t.children.length},e.prototype.getRows=function(){return this.cfg.fields.length+1},e.prototype.getChildFacets=function(t,e,n){var r=this,i=this.cfg.fields;if(!(i.length<e)){var o=[],a=i[e-1],s=this.getFieldValues(t,a);return s.forEach((function(i,l){var c=[{field:a,value:i,values:s}],u=t.filter(r.getFacetDataFilter(c));if(u.length){var h={type:r.cfg.type,data:u,region:null,columnValue:i,rowValue:"",columnField:a,rowField:"",columnIndex:l,rowValuesLength:r.getRows(),columnValuesLength:1,rowIndex:e,children:r.getChildFacets(u,e+1,n)};o.push(h),n.push(h)}})),o}},e.prototype.render=function(){t.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},e.prototype.renderTitle=function(){var t=this;(0,yX.S6)(this.facets,(function(e){var n=e.columnValue,r=e.view,i=(0,yX.U2)(t.cfg.title,"formatter"),o=(0,yX.b$)({position:["50%","0%"],content:i?i(n):n},G8(dX.TOP),t.cfg.title);r.annotation().text(o)}))},e.prototype.drawLines=function(t){var e=this;t.forEach((function(t){if(!e.isLeaf(t)){var n=t.children;e.addFacetLines(t,n)}}))},e.prototype.addFacetLines=function(t,e){var n=this,r=t.view.coordinateBBox,i={x:r.x+r.width/2,y:r.y+r.height};e.forEach((function(t){var e=t.view.coordinateBBox,r={x:e.bl.x+(e.tr.x-e.bl.x)/2,y:e.tr.y},o={x:i.x,y:i.y+(r.y-i.y)/2},a={x:r.x,y:o.y};n.drawLine([i,o,a,r])}))},e.prototype.getPath=function(t){var e=[];return this.cfg.line.smooth?(e.push(["M",t[0].x,t[0].y]),e.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y])):t.forEach((function(t,n){0===n?e.push(["M",t.x,t.y]):e.push(["L",t.x,t.y])})),e},e.prototype.drawLine=function(t){var e=this.getPath(t),n=this.cfg.line.style;this.container.addShape("path",{attrs:(0,yX.f0)({path:e},n)})},e.prototype.getXAxisOption=function(t,e,n,r){return r.rowIndex!==r.rowValuesLength-1?(0,mX.pi)((0,mX.pi)({},n),{title:null,label:null}):n},e.prototype.getYAxisOption=function(t,e,n,r){return 0!==r.originColIndex&&0!==r.columnIndex?(0,mX.pi)((0,mX.pi)({},n),{title:null,label:null}):n},e}(JQ),i9=r9;function o9(t){var e=(0,mX.ev)([],(0,mX.CR)(t),!1);e.sort((function(t,e){return t-e}));var n=e.length;return 0===n?0:n%2===1?e[(n-1)/2]:(e[n/2]+e[n/2-1])/2}function a9(t,e){if(!e)return null;var n;switch(t){case"start":return 0;case"center":return.5;case"end":return 1;case"median":n=e.isCategory?o9(e.values.map((function(t,e){return e}))):o9(e.values);break;case"mean":n=e.isCategory?(e.values.length-1)/2:function(t){var e=(0,yX.u4)(t,(function(t,e){return t+(isNaN(e)||!(0,yX.hj)(e)?0:e)}),0);return 0===t.length?0:e/t.length}(e.values);break;case"min":n=e.isCategory?0:e[t];break;case"max":n=e.isCategory?e.values.length-1:e[t];break;default:n=t}return e.scale(n)}var s9=["regionFilter","shape"],l9=function(t){function e(e){var n=t.call(this,e)||this;return n.cache=new Map,n.foregroundContainer=n.view.getLayer(pX.FORE).addGroup(),n.backgroundContainer=n.view.getLayer(pX.BG).addGroup(),n.option=[],n}return(0,mX.ZT)(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.layout=function(){this.update()},e.prototype.render=function(){},e.prototype.update=function(){var t=this;this.onAfterRender((function(){var e=new Map;(0,yX.S6)(t.option,(function(n){if((0,yX.q9)(s9,n.type)){var r=t.updateOrCreate(n);r&&e.set(t.getCacheKey(n),r)}})),t.cache=t.syncCache(e)}));var e=new Map;(0,yX.S6)(this.option,(function(n){if(!(0,yX.q9)(s9,n.type)){var r=t.updateOrCreate(n);r&&e.set(t.getCacheKey(n),r)}})),this.cache=this.syncCache(e)},e.prototype.clear=function(e){void 0===e&&(e=!1),t.prototype.clear.call(this),this.clearComponents(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),e&&(this.option=[])},e.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},e.prototype.getComponents=function(){var t=[];return this.cache.forEach((function(e){t.push(e)})),t},e.prototype.clearComponents=function(){this.getComponents().forEach((function(t){t.component.destroy()})),this.cache.clear()},e.prototype.onAfterRender=function(t){var e=!1;this.view.getOptions().animate&&this.view.geometries.forEach((function(n){n.animateOption&&(n.once(xX.AFTER_DRAW_ANIMATE,(function(){t()})),e=!0)})),e||this.view.getRootView().once(vX.AFTER_RENDER,(function(){t()}))},e.prototype.createAnnotation=function(t){var e=t.type,n=r[(0,yX.jC)(e)];if(n){var i=this.getAnnotationTheme(e),o=this.getAnnotationCfg(e,t,i);return o?{component:new n(o),layer:this.isTop(o)?pX.FORE:pX.BG,direction:dX.NONE,type:fX.ANNOTATION,extra:t}:null}},e.prototype.annotation=function(t){this.option.push(t)},e.prototype.arc=function(t){return this.annotation((0,mX.pi)({type:"arc"},t)),this},e.prototype.image=function(t){return this.annotation((0,mX.pi)({type:"image"},t)),this},e.prototype.line=function(t){return this.annotation((0,mX.pi)({type:"line"},t)),this},e.prototype.region=function(t){return this.annotation((0,mX.pi)({type:"region"},t)),this},e.prototype.text=function(t){return this.annotation((0,mX.pi)({type:"text"},t)),this},e.prototype.dataMarker=function(t){return this.annotation((0,mX.pi)({type:"dataMarker"},t)),this},e.prototype.dataRegion=function(t){this.annotation((0,mX.pi)({type:"dataRegion"},t))},e.prototype.regionFilter=function(t){this.annotation((0,mX.pi)({type:"regionFilter"},t))},e.prototype.shape=function(t){this.annotation((0,mX.pi)({type:"shape"},t))},e.prototype.html=function(t){this.annotation((0,mX.pi)({type:"html"},t))},e.prototype.parsePosition=function(t){var e,n,r=this.view.getXScale(),i=this.view.getScalesByDim("y"),o=(0,yX.mf)(t)?t.call(null,r,i):t,a=0,s=0;if((0,yX.kJ)(o)){var l=(0,mX.CR)(o,2),c=l[0],u=l[1];if((0,yX.HD)(c)&&-1!==c.indexOf("%")&&!isNaN(c.slice(0,-1)))return this.parsePercentPosition(o);a=a9(c,r),s=a9(u,Object.values(i)[0])}else if(!(0,yX.UM)(o))try{for(var h=(0,mX.XA)((0,yX.XP)(o)),p=h.next();!p.done;p=h.next()){var d=p.value,f=o[d];d===r.field&&(a=a9(f,r)),i[d]&&(s=a9(f,i[d]))}}catch(g){e={error:g}}finally{try{p&&!p.done&&(n=h.return)&&n.call(h)}finally{if(e)throw e.error}}return isNaN(a)||isNaN(s)?null:this.view.getCoordinate().convert({x:a,y:s})},e.prototype.getRegionPoints=function(t,e){var n,r=this,i=this.view.getXScale(),o=this.view.getScalesByDim("y"),a=Object.values(o)[0],s=i.field,l=this.view.getData(),c=(0,yX.kJ)(t)?t[0]:t[s],u=(0,yX.kJ)(e)?e[0]:e[s],h=[];return(0,yX.S6)(l,(function(t,e){if(t[s]===c&&(n=e),e>=n){var i=r.parsePosition([t[s],t[a.field]]);i&&h.push(i)}if(t[s]===u)return!1})),h},e.prototype.parsePercentPosition=function(t){var e=parseFloat(t[0])/100,n=parseFloat(t[1])/100,r=this.view.getCoordinate(),i=r.start,o=r.end,a=Math.min(i.x,o.x),s=Math.min(i.y,o.y);return{x:r.getWidth()*e+a,y:r.getHeight()*n+s}},e.prototype.getCoordinateBBox=function(){var t=this.view.getCoordinate(),e=t.start,n=t.end,r=t.getWidth(),i=t.getHeight(),o={x:Math.min(e.x,n.x),y:Math.min(e.y,n.y)};return{x:o.x,y:o.y,minX:o.x,minY:o.y,maxX:o.x+r,maxY:o.y+i,width:r,height:i}},e.prototype.getAnnotationCfg=function(t,e,n){var r=this,i=this.view.getCoordinate(),o=this.view.getCanvas(),a={};if((0,yX.UM)(e))return null;var s=e.start,l=e.end,c=e.position,u=this.parsePosition(s),h=this.parsePosition(l),p=this.parsePosition(c);if(!(!["arc","image","line","region","regionFilter"].includes(t)||u&&h))return null;if(["text","dataMarker","html"].includes(t)&&!p)return null;if("arc"===t){var d=e,f=(d.start,d.end,(0,mX._T)(d,["start","end"])),g=LQ(i,u),m=LQ(i,h);g>m&&(m=2*Math.PI+m),a=(0,mX.pi)((0,mX.pi)({},f),{center:i.getCenter(),radius:RQ(i,u),startAngle:g,endAngle:m})}else if("image"===t){var y=e;y.start,y.end,f=(0,mX._T)(y,["start","end"]);a=(0,mX.pi)((0,mX.pi)({},f),{start:u,end:h,src:e.src})}else if("line"===t){var v=e;v.start,v.end,f=(0,mX._T)(v,["start","end"]);a=(0,mX.pi)((0,mX.pi)({},f),{start:u,end:h,text:(0,yX.U2)(e,"text",null)})}else if("region"===t){var x=e;x.start,x.end,f=(0,mX._T)(x,["start","end"]);a=(0,mX.pi)((0,mX.pi)({},f),{start:u,end:h})}else if("text"===t){var _=this.view.getData(),b=e,w=(b.position,b.content),S=(f=(0,mX._T)(b,["position","content"]),w);(0,yX.mf)(w)&&(S=w(_)),a=(0,mX.pi)((0,mX.pi)((0,mX.pi)({},p),f),{content:S})}else if("dataMarker"===t){var C=e,E=(C.position,C.point),k=C.line,M=C.text,T=C.autoAdjust,I=C.direction;f=(0,mX._T)(C,["position","point","line","text","autoAdjust","direction"]);a=(0,mX.pi)((0,mX.pi)((0,mX.pi)({},f),p),{coordinateBBox:this.getCoordinateBBox(),point:E,line:k,text:M,autoAdjust:T,direction:I})}else if("dataRegion"===t){var P=e,O=P.start,A=P.end,D=P.region,R=(M=P.text,P.lineLength);f=(0,mX._T)(P,["start","end","region","text","lineLength"]);a=(0,mX.pi)((0,mX.pi)({},f),{points:this.getRegionPoints(O,A),region:D,text:M,lineLength:R})}else if("regionFilter"===t){var L=e,N=(L.start,L.end,L.apply),F=L.color,z=(f=(0,mX._T)(L,["start","end","apply","color"]),this.view.geometries),B=[],$=function(t){t&&(t.isGroup()?t.getChildren().forEach((function(t){return $(t)})):B.push(t))};(0,yX.S6)(z,(function(t){N?(0,yX.FX)(N,t.type)&&(0,yX.S6)(t.elements,(function(t){$(t.shape)})):(0,yX.S6)(t.elements,(function(t){$(t.shape)}))})),a=(0,mX.pi)((0,mX.pi)({},f),{color:F,shapes:B,start:u,end:h})}else if("shape"===t){var j=e,U=j.render,V=(0,mX._T)(j,["render"]);a=(0,mX.pi)((0,mX.pi)({},V),{render:function(t){if((0,yX.mf)(e.render))return U(t,r.view,{parsePosition:r.parsePosition.bind(r)})}})}else if("html"===t){var H=e,G=H.html;H.position,V=(0,mX._T)(H,["html","position"]);a=(0,mX.pi)((0,mX.pi)((0,mX.pi)({},V),p),{parent:o.get("el").parentNode,html:function(t){return(0,yX.mf)(G)?G(t,r.view):G}})}var W=(0,yX.b$)({},n,(0,mX.pi)((0,mX.pi)({},a),{top:e.top,style:e.style,offsetX:e.offsetX,offsetY:e.offsetY}));return"html"!==t&&(W.container=this.getComponentContainer(W)),W.animate=this.view.getOptions().animate&&W.animate&&(0,yX.U2)(e,"animate",W.animate),W.animateOption=(0,yX.b$)({},c2,W.animateOption,e.animateOption),W},e.prototype.isTop=function(t){return(0,yX.U2)(t,"top",!0)},e.prototype.getComponentContainer=function(t){return this.isTop(t)?this.foregroundContainer:this.backgroundContainer},e.prototype.getAnnotationTheme=function(t){return(0,yX.U2)(this.view.getTheme(),["components","annotation",t],{})},e.prototype.updateOrCreate=function(t){var e=this.cache.get(this.getCacheKey(t));if(e){var n=t.type,r=this.getAnnotationTheme(n),i=this.getAnnotationCfg(n,t,r);i&&PQ(i,["container"]),e.component.update((0,mX.pi)((0,mX.pi)({},i||{}),{visible:!!i})),(0,yX.q9)(s9,t.type)&&e.component.render()}else(e=this.createAnnotation(t))&&(e.component.init(),(0,yX.q9)(s9,t.type)&&e.component.render());return e},e.prototype.syncCache=function(t){var e=this,n=new Map(this.cache);return t.forEach((function(t,e){n.set(e,t)})),n.forEach((function(t,r){(0,yX.sE)(e.option,(function(t){return r===e.getCacheKey(t)}))||(t.component.destroy(),n.delete(r))})),n},e.prototype.getCacheKey=function(t){return t},e}(r2),c9=l9;function u9(t,e){var n=(0,yX.b$)({},(0,yX.U2)(t,["components","axis","common"]),(0,yX.U2)(t,["components","axis",e]));return(0,yX.U2)(n,["grid"],{})}function h9(t,e,n,r){var i=[],o=e.getTicks();return t.isPolar&&o.push({value:1,text:"",tickValue:""}),o.reduce((function(e,o,a){var s=o.value;if(r)i.push({points:[t.convert("y"===n?{x:0,y:s}:{x:s,y:0}),t.convert("y"===n?{x:1,y:s}:{x:s,y:1})]});else if(a){var l=(e.value+s)/2;i.push({points:[t.convert("y"===n?{x:0,y:l}:{x:l,y:0}),t.convert("y"===n?{x:1,y:l}:{x:l,y:1})]})}return o}),o[0]),i}function p9(t,e,n,r,i){var o=e.values.length,a=[],s=n.getTicks();return s.reduce((function(e,n){var s=e?e.value:n.value,l=n.value,c=(s+l)/2;return"x"===i?a.push({points:[t.convert({x:r?l:c,y:0}),t.convert({x:r?l:c,y:1})]}):a.push({points:(0,yX.UI)(Array(o+1),(function(e,n){return t.convert({x:n/o,y:r?l:c})}))}),n}),s[0]),a}function d9(t,e){var n=(0,yX.U2)(e,"grid");if(null===n)return!1;var r=(0,yX.U2)(t,"grid");return!(void 0===n&&null===r)}var f9=["container"],g9=(0,mX.pi)((0,mX.pi)({},c2),{appear:null}),m9=function(t){function e(e){var n=t.call(this,e)||this;return n.cache=new Map,n.gridContainer=n.view.getLayer(pX.BG).addGroup(),n.gridForeContainer=n.view.getLayer(pX.FORE).addGroup(),n.axisContainer=n.view.getLayer(pX.BG).addGroup(),n.axisForeContainer=n.view.getLayer(pX.FORE).addGroup(),n}return(0,mX.ZT)(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"axis"},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.render=function(){this.update()},e.prototype.layout=function(){var t=this,e=this.view.getCoordinate();(0,yX.S6)(this.getComponents(),(function(n){var r,i=n.component,o=n.direction,a=n.type,s=n.extra,l=s.dim,c=s.scale,u=s.alignTick;if(a===fX.AXIS)e.isPolar?"x"===l?r=e.isTransposed?VQ(e,o):qQ(e):"y"===l&&(r=e.isTransposed?qQ(e):VQ(e,o)):r=VQ(e,o);else if(a===fX.GRID)if(e.isPolar){r={items:e.isTransposed?"x"===l?p9(e,t.view.getYScales()[0],c,u,l):h9(e,c,l,u):"x"===l?h9(e,c,l,u):p9(e,t.view.getXScale(),c,u,l),center:t.view.getCoordinate().getCenter()}}else r={items:h9(e,c,l,u)};i.update(r)}))},e.prototype.update=function(){this.option=this.view.getOptions().axes;var t=new Map;this.updateXAxes(t),this.updateYAxes(t);var e=new Map;this.cache.forEach((function(n,r){t.has(r)?e.set(r,n):n.component.destroy()})),this.cache=e},e.prototype.clear=function(){t.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.gridForeContainer.clear(),this.axisContainer.clear(),this.axisForeContainer.clear()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.gridContainer.remove(!0),this.gridForeContainer.remove(!0),this.axisContainer.remove(!0),this.axisForeContainer.remove(!0)},e.prototype.getComponents=function(){var t=[];return this.cache.forEach((function(e){t.push(e)})),t},e.prototype.updateXAxes=function(t){var e=this.view.getXScale();if(e&&!e.isIdentity){var n=YQ(this.option,e.field);if(!1!==n){var r=ZQ(n,dX.BOTTOM),i=pX.BG,o="x",a=this.view.getCoordinate(),s=this.getId("axis",e.field),l=this.getId("grid",e.field);if(a.isRect){if(c=this.cache.get(s))PQ(h=this.getLineAxisCfg(e,n,r),f9),c.component.update(h),t.set(s,c);else c=this.createLineAxis(e,n,i,r,o),this.cache.set(s,c),t.set(s,c);if(u=this.cache.get(l))PQ(h=this.getLineGridCfg(e,n,r,o),f9),u.component.update(h),t.set(l,u);else(u=this.createLineGrid(e,n,i,r,o))&&(this.cache.set(l,u),t.set(l,u))}else if(a.isPolar){var c,u;if(c=this.cache.get(s)){PQ(h=a.isTransposed?this.getLineAxisCfg(e,n,dX.RADIUS):this.getCircleAxisCfg(e,n,r),f9),c.component.update(h),t.set(s,c)}else{if(a.isTransposed){if((0,yX.o8)(n))return;c=this.createLineAxis(e,n,i,dX.RADIUS,o)}else c=this.createCircleAxis(e,n,i,r,o);this.cache.set(s,c),t.set(s,c)}if(u=this.cache.get(l)){var h;PQ(h=a.isTransposed?this.getCircleGridCfg(e,n,dX.RADIUS,o):this.getLineGridCfg(e,n,dX.CIRCLE,o),f9),u.component.update(h),t.set(l,u)}else{if(a.isTransposed){if((0,yX.o8)(n))return;u=this.createCircleGrid(e,n,i,dX.RADIUS,o)}else u=this.createLineGrid(e,n,i,dX.CIRCLE,o);u&&(this.cache.set(l,u),t.set(l,u))}}}}},e.prototype.updateYAxes=function(t){var e=this,n=this.view.getYScales();(0,yX.S6)(n,(function(n,r){if(n&&!n.isIdentity){var i=n.field,o=YQ(e.option,i);if(!1!==o){var a=pX.BG,s="y",l=e.getId("axis",i),c=e.getId("grid",i),u=e.view.getCoordinate();if(u.isRect){var h=ZQ(o,0===r?dX.LEFT:dX.RIGHT);if(p=e.cache.get(l))PQ(f=e.getLineAxisCfg(n,o,h),f9),p.component.update(f),t.set(l,p);else p=e.createLineAxis(n,o,a,h,s),e.cache.set(l,p),t.set(l,p);if(d=e.cache.get(c))PQ(f=e.getLineGridCfg(n,o,h,s),f9),d.component.update(f),t.set(c,d);else(d=e.createLineGrid(n,o,a,h,s))&&(e.cache.set(c,d),t.set(c,d))}else if(u.isPolar){var p,d;if(p=e.cache.get(l)){PQ(f=u.isTransposed?e.getCircleAxisCfg(n,o,dX.CIRCLE):e.getLineAxisCfg(n,o,dX.RADIUS),f9),p.component.update(f),t.set(l,p)}else{if(u.isTransposed){if((0,yX.o8)(o))return;p=e.createCircleAxis(n,o,a,dX.CIRCLE,s)}else p=e.createLineAxis(n,o,a,dX.RADIUS,s);e.cache.set(l,p),t.set(l,p)}if(d=e.cache.get(c)){var f;PQ(f=u.isTransposed?e.getLineGridCfg(n,o,dX.CIRCLE,s):e.getCircleGridCfg(n,o,dX.RADIUS,s),f9),d.component.update(f),t.set(c,d)}else{if(u.isTransposed){if((0,yX.o8)(o))return;d=e.createLineGrid(n,o,a,dX.CIRCLE,s)}else d=e.createCircleGrid(n,o,a,dX.RADIUS,s);d&&(e.cache.set(c,d),t.set(c,d))}}}}}))},e.prototype.createLineAxis=function(t,e,n,r,i){var o={component:new gQ(this.getLineAxisCfg(t,e,r)),layer:n,direction:r===dX.RADIUS?dX.NONE:r,type:fX.AXIS,extra:{dim:i,scale:t}};return o.component.set("field",t.field),o.component.init(),o},e.prototype.createLineGrid=function(t,e,n,r,i){var o=this.getLineGridCfg(t,e,r,i);if(o){var a={component:new yQ(o),layer:n,direction:dX.NONE,type:fX.GRID,extra:{dim:i,scale:t,alignTick:(0,yX.U2)(o,"alignTick",!0)}};return a.component.init(),a}},e.prototype.createCircleAxis=function(t,e,n,r,i){var o={component:new mQ(this.getCircleAxisCfg(t,e,r)),layer:n,direction:r,type:fX.AXIS,extra:{dim:i,scale:t}};return o.component.set("field",t.field),o.component.init(),o},e.prototype.createCircleGrid=function(t,e,n,r,i){var o=this.getCircleGridCfg(t,e,r,i);if(o){var a={component:new vQ(o),layer:n,direction:dX.NONE,type:fX.GRID,extra:{dim:i,scale:t,alignTick:(0,yX.U2)(o,"alignTick",!0)}};return a.component.init(),a}},e.prototype.getLineAxisCfg=function(t,e,n){var r=(0,yX.U2)(e,["top"])?this.axisForeContainer:this.axisContainer,i=this.view.getCoordinate(),o=VQ(i,n),a=KQ(t,e),s=WQ(this.view.getTheme(),n),l=(0,yX.U2)(e,["title"])?(0,yX.b$)({title:{style:{text:a}}},{title:XQ(this.view.getTheme(),n,e.title)},e):e,c=(0,yX.b$)((0,mX.pi)((0,mX.pi)({container:r},o),{ticks:t.getTicks().map((function(t){return{id:"".concat(t.tickValue),name:t.text,value:t.value}})),verticalFactor:i.isPolar?-1*GQ(o,i.getCenter()):GQ(o,i.getCenter()),theme:s}),s,l),u=this.getAnimateCfg(c),h=u.animate,p=u.animateOption;c.animateOption=p,c.animate=h;var d=HQ(o),f=(0,yX.U2)(c,"verticalLimitLength",d?1/3:.5);if(f<=1){var g=this.view.getCanvas().get("width"),m=this.view.getCanvas().get("height");c.verticalLimitLength=f*(d?g:m)}return c},e.prototype.getLineGridCfg=function(t,e,n,r){if(d9(WQ(this.view.getTheme(),n),e)){var i=u9(this.view.getTheme(),n),o=(0,yX.b$)({container:(0,yX.U2)(e,["top"])?this.gridForeContainer:this.gridContainer},i,(0,yX.U2)(e,"grid"),this.getAnimateCfg(e));return o.items=h9(this.view.getCoordinate(),t,r,(0,yX.U2)(o,"alignTick",!0)),o}},e.prototype.getCircleAxisCfg=function(t,e,n){var r=(0,yX.U2)(e,["top"])?this.axisForeContainer:this.axisContainer,i=this.view.getCoordinate(),o=t.getTicks().map((function(t){return{id:"".concat(t.tickValue),name:t.text,value:t.value}}));t.isCategory||Math.abs(i.endAngle-i.startAngle)!==2*Math.PI||o.length&&(o[o.length-1].name="");var a=KQ(t,e),s=WQ(this.view.getTheme(),dX.CIRCLE),l=(0,yX.U2)(e,["title"])?(0,yX.b$)({title:{style:{text:a}}},{title:XQ(this.view.getTheme(),n,e.title)},e):e,c=(0,yX.b$)((0,mX.pi)((0,mX.pi)({container:r},qQ(this.view.getCoordinate())),{ticks:o,verticalFactor:1,theme:s}),s,l),u=this.getAnimateCfg(c),h=u.animate,p=u.animateOption;return c.animate=h,c.animateOption=p,c},e.prototype.getCircleGridCfg=function(t,e,n,r){if(d9(WQ(this.view.getTheme(),n),e)){var i=u9(this.view.getTheme(),dX.RADIUS),o=(0,yX.b$)({container:(0,yX.U2)(e,["top"])?this.gridForeContainer:this.gridContainer,center:this.view.getCoordinate().getCenter()},i,(0,yX.U2)(e,"grid"),this.getAnimateCfg(e)),a=(0,yX.U2)(o,"alignTick",!0),s="x"===r?this.view.getYScales()[0]:this.view.getXScale();return o.items=p9(this.view.getCoordinate(),s,t,a,r),o}},e.prototype.getId=function(t,e){var n=this.view.getCoordinate();return"".concat(t,"-").concat(e,"-").concat(n.type)},e.prototype.getAnimateCfg=function(t){return{animate:this.view.getOptions().animate&&(0,yX.U2)(t,"animate"),animateOption:t&&t.animateOption?(0,yX.b$)({},g9,t.animateOption):g9}},e}(r2),y9=m9;function v9(t,e,n){return n===dX.TOP?[t.minX+t.width/2-e.width/2,t.minY]:n===dX.BOTTOM?[t.minX+t.width/2-e.width/2,t.maxY-e.height]:n===dX.LEFT?[t.minX,t.minY+t.height/2-e.height/2]:n===dX.RIGHT?[t.maxX-e.width,t.minY+t.height/2-e.height/2]:n===dX.TOP_LEFT||n===dX.LEFT_TOP?[t.tl.x,t.tl.y]:n===dX.TOP_RIGHT||n===dX.RIGHT_TOP?[t.tr.x-e.width,t.tr.y]:n===dX.BOTTOM_LEFT||n===dX.LEFT_BOTTOM?[t.bl.x,t.bl.y-e.height]:n===dX.BOTTOM_RIGHT||n===dX.RIGHT_BOTTOM?[t.br.x-e.width,t.br.y-e.height]:[0,0]}function x9(t,e){return(0,yX.jn)(t)?!1!==t&&{}:(0,yX.U2)(t,[e],t)}function _9(t){return(0,yX.U2)(t,"position",dX.BOTTOM)}var b9=function(t){function e(e){var n=t.call(this,e)||this;return n.container=n.view.getLayer(pX.FORE).addGroup(),n}return(0,mX.ZT)(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.render=function(){this.update()},e.prototype.layout=function(){var t=this;this.layoutBBox=this.view.viewBBox,(0,yX.S6)(this.components,(function(e){var n=e.component,r=e.direction,i=q2(r),o=n.get("maxWidthRatio"),a=n.get("maxHeightRatio"),s=t.getCategoryLegendSizeCfg(i,o,a),l=n.get("maxWidth"),c=n.get("maxHeight");n.update({maxWidth:Math.min(s.maxWidth,l||0),maxHeight:Math.min(s.maxHeight,c||0)});var u=n.get("padding"),h=n.getLayoutBBox(),p=new AQ(h.x,h.y,h.width,h.height).expand(u),d=(0,mX.CR)(v9(t.view.viewBBox,p,r),2),f=d[0],g=d[1],m=(0,mX.CR)(v9(t.layoutBBox,p,r),2),y=m[0],v=m[1],x=0,_=0;r.startsWith("top")||r.startsWith("bottom")?(x=f,_=v):(x=y,_=g),n.setLocation({x:x+u[3],y:_+u[0]}),t.layoutBBox=t.layoutBBox.cut(p,r)}))},e.prototype.update=function(){var t=this;this.option=this.view.getOptions().legends;var e={};if((0,yX.U2)(this.option,"custom")){var n="global-custom",r=this.getComponentById(n);if(r){var i=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);PQ(i,["container"]),r.component.update(i),e[n]=!0}else{var o=this.createCustomLegend(void 0,void 0,void 0,this.option);if(o){o.init();var a=pX.FORE,s=_9(this.option);this.components.push({id:n,component:o,layer:a,direction:s,type:fX.LEGEND,extra:void 0}),e[n]=!0}}}else this.loopLegends((function(n,r,i){var o=t.getId(i.field),a=t.getComponentById(o);if(a){var s=void 0,l=x9(t.option,i.field);!1!==l&&((0,yX.U2)(l,"custom")?s=t.getCategoryCfg(n,r,i,l,!0):i.isLinear?s=t.getContinuousCfg(n,r,i,l):i.isCategory&&(s=t.getCategoryCfg(n,r,i,l))),s&&(PQ(s,["container"]),a.direction=_9(l),a.component.update(s),e[o]=!0)}else{var c=t.createFieldLegend(n,r,i);c&&(c.component.init(),t.components.push(c),e[o]=!0)}}));var l=[];(0,yX.S6)(this.getComponents(),(function(t){e[t.id]?l.push(t):t.component.destroy()})),this.components=l},e.prototype.clear=function(){t.prototype.clear.call(this),this.container.clear()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.container.remove(!0)},e.prototype.getGeometries=function(t){var e=this,n=t.geometries;return(0,yX.S6)(t.views,(function(t){n=n.concat(e.getGeometries(t))})),n},e.prototype.loopLegends=function(t){if(this.view.getRootView()===this.view){var e=this.getGeometries(this.view),n={};(0,yX.S6)(e,(function(e){var r=e.getGroupAttributes();(0,yX.S6)(r,(function(r){var i=r.getScale(r.type);i&&"identity"!==i.type&&!n[i.field]&&(t(e,r,i),n[i.field]=!0)}))}))}},e.prototype.createFieldLegend=function(t,e,n){var r,i=x9(this.option,n.field),o=pX.FORE,a=_9(i);if(!1!==i&&((0,yX.U2)(i,"custom")?r=this.createCustomLegend(t,e,n,i):n.isLinear?r=this.createContinuousLegend(t,e,n,i):n.isCategory&&(r=this.createCategoryLegend(t,e,n,i))),r)return r.set("field",n.field),{id:this.getId(n.field),component:r,layer:o,direction:a,type:fX.LEGEND,extra:{scale:n}}},e.prototype.createCustomLegend=function(t,e,n,r){var i=this.getCategoryCfg(t,e,n,r,!0);return new xQ(i)},e.prototype.createContinuousLegend=function(t,e,n,r){var i=this.getContinuousCfg(t,e,n,PQ(r,["value"]));return new _Q(i)},e.prototype.createCategoryLegend=function(t,e,n,r){var i=this.getCategoryCfg(t,e,n,r);return new xQ(i)},e.prototype.getContinuousCfg=function(t,e,n,r){var i=n.getTicks(),o=(0,yX.sE)(i,(function(t){return 0===t.value})),a=(0,yX.sE)(i,(function(t){return 1===t.value})),s=i.map((function(t){var r=t.value,i=t.tickValue,o=e.mapping(n.invert(r)).join("");return{value:i,attrValue:o,color:o,scaleValue:r}}));o||s.push({value:n.min,attrValue:e.mapping(n.invert(0)).join(""),color:e.mapping(n.invert(0)).join(""),scaleValue:0}),a||s.push({value:n.max,attrValue:e.mapping(n.invert(1)).join(""),color:e.mapping(n.invert(1)).join(""),scaleValue:1}),s.sort((function(t,e){return t.value-e.value}));var l={min:(0,yX.YM)(s).value,max:(0,yX.Z$)(s).value,colors:[],rail:{type:e.type},track:{}};"size"===e.type&&(l.track={style:{fill:"size"===e.type?this.view.getTheme().defaultColor:void 0}}),"color"===e.type&&(l.colors=s.map((function(t){return t.attrValue})));var c=this.container,u=q2(_9(r)),h=(0,yX.U2)(r,"title");return h&&(h=(0,yX.b$)({text:$Q(n)},h)),l.container=c,l.layout=u,l.title=h,l.animateOption=c2,this.mergeLegendCfg(l,r,"continuous")},e.prototype.getCategoryCfg=function(t,e,n,r,i){var o=this.container,a=(0,yX.U2)(r,"position",dX.BOTTOM),s=Z2(this.view.getTheme(),a),l=(0,yX.U2)(s,["marker"]),c=(0,yX.U2)(r,"marker"),u=q2(a),h=(0,yX.U2)(s,["pageNavigator"]),p=(0,yX.U2)(r,"pageNavigator"),d=i?function(t,e,n){return n.map((function(n,r){var i=e;(0,yX.mf)(i)&&(i=i(n.name,r,(0,yX.b$)({},t,n)));var o=(0,yX.mf)(n.marker)?n.marker(n.name,r,(0,yX.b$)({},t,n)):n.marker,a=(0,yX.b$)({},t,i,o);return X2(a),n.marker=a,n}))}(l,c,r.items):Y2(this.view,t,e,l,c),f=(0,yX.U2)(r,"title");f&&(f=(0,yX.b$)({text:n?$Q(n):""},f));var g=(0,yX.U2)(r,"maxWidthRatio"),m=(0,yX.U2)(r,"maxHeightRatio"),y=this.getCategoryLegendSizeCfg(u,g,m);y.container=o,y.layout=u,y.items=d,y.title=f,y.animateOption=c2,y.pageNavigator=(0,yX.b$)({},h,p);var v=this.mergeLegendCfg(y,r,a);v.reversed&&v.items.reverse();var x=(0,yX.U2)(v,"maxItemWidth");return x&&x<=1&&(v.maxItemWidth=this.view.viewBBox.width*x),v},e.prototype.mergeLegendCfg=function(t,e,n){var r=n.split("-")[0],i=Z2(this.view.getTheme(),r);return(0,yX.b$)({},i,t,e)},e.prototype.getId=function(t){return"".concat(this.name,"-").concat(t)},e.prototype.getComponentById=function(t){return(0,yX.sE)(this.components,(function(e){return e.id===t}))},e.prototype.getCategoryLegendSizeCfg=function(t,e,n){void 0===e&&(e=.25),void 0===n&&(n=.25);var r=this.view.viewBBox,i=r.width,o=r.height;return"vertical"===t?{maxWidth:i*e,maxHeight:o}:{maxWidth:i,maxHeight:o*n}},e}(r2),w9=b9,S9=function(t){function e(e){var n=t.call(this,e)||this;return n.onChangeFn=yX.ZT,n.resetMeasure=function(){n.clear()},n.onValueChange=function(t){var e=(0,mX.CR)(t,2),r=e[0],i=e[1];n.start=r,n.end=i,n.changeViewData(r,i)},n.container=n.view.getLayer(pX.FORE).addGroup(),n.onChangeFn=(0,yX.P2)(n.onValueChange,20,{leading:!0}),n.width=0,n.view.on(vX.BEFORE_CHANGE_DATA,n.resetMeasure),n.view.on(vX.BEFORE_CHANGE_SIZE,n.resetMeasure),n}return(0,mX.ZT)(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.view.off(vX.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(vX.BEFORE_CHANGE_SIZE,this.resetMeasure)},e.prototype.init=function(){},e.prototype.render=function(){this.option=this.view.getOptions().slider;var t=this.getSliderCfg(),e=t.start,n=t.end;(0,yX.UM)(this.start)&&(this.start=e,this.end=n);var r=this.view.getOptions().data;this.option&&!(0,yX.xb)(r)?this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onChangeFn)):this.slider&&(this.slider.component.destroy(),this.slider=void 0)},e.prototype.layout=function(){var t=this;if(this.option&&!this.width&&(this.measureSlider(),setTimeout((function(){t.view.destroyed||t.changeViewData(t.start,t.end)}),0)),this.slider){var e=this.view.coordinateBBox.width,n=this.slider.component.get("padding"),r=(0,mX.CR)(n,4),i=r[0],o=(r[1],r[2],r[3]),a=this.slider.component.getLayoutBBox(),s=new AQ(a.x,a.y,Math.min(a.width,e),a.height).expand(n),l=this.getMinMaxText(this.start,this.end),c=l.minText,u=l.maxText,h=(0,mX.CR)(v9(this.view.viewBBox,s,dX.BOTTOM),2),p=(h[0],h[1]),d=(0,mX.CR)(v9(this.view.coordinateBBox,s,dX.BOTTOM),2),f=d[0];d[1];this.slider.component.update((0,mX.pi)((0,mX.pi)({},this.getSliderCfg()),{x:f+o,y:p+i,width:this.width,start:this.start,end:this.end,minText:c,maxText:u})),this.view.viewBBox=this.view.viewBBox.cut(s,dX.BOTTOM)}},e.prototype.update=function(){this.render()},e.prototype.createSlider=function(){var t=this.getSliderCfg(),e=new hQ((0,mX.pi)({container:this.container},t));return e.init(),{component:e,layer:pX.FORE,direction:dX.BOTTOM,type:fX.SLIDER}},e.prototype.updateSlider=function(){var t=this.getSliderCfg();if(this.width){var e=this.getMinMaxText(this.start,this.end),n=e.minText,r=e.maxText;t=(0,mX.pi)((0,mX.pi)({},t),{width:this.width,start:this.start,end:this.end,minText:n,maxText:r})}return this.slider.component.update(t),this.slider},e.prototype.measureSlider=function(){var t=this.getSliderCfg().width;this.width=t},e.prototype.getSliderCfg=function(){var t={height:16,start:0,end:1,minText:"",maxText:"",x:0,y:0,width:this.view.coordinateBBox.width};if((0,yX.Kn)(this.option)){var e=(0,mX.pi)({data:this.getData()},(0,yX.U2)(this.option,"trendCfg",{}));t=(0,yX.b$)({},t,this.getThemeOptions(),this.option),t=(0,mX.pi)((0,mX.pi)({},t),{trendCfg:e})}return t.start=(0,yX.uZ)(Math.min((0,yX.UM)(t.start)?0:t.start,(0,yX.UM)(t.end)?1:t.end),0,1),t.end=(0,yX.uZ)(Math.max((0,yX.UM)(t.start)?0:t.start,(0,yX.UM)(t.end)?1:t.end),0,1),t},e.prototype.getData=function(){var t=this.view.getOptions().data,e=(0,mX.CR)(this.view.getYScales(),1)[0],n=this.view.getGroupScales();if(n.length){var r=n[0],i=r.field,o=r.ticks;return t.reduce((function(t,n){return n[i]===o[0]&&t.push(n[e.field]),t}),[])}return t.map((function(t){return t[e.field]||0}))},e.prototype.getThemeOptions=function(){var t=this.view.getTheme();return(0,yX.U2)(t,["components","slider","common"],{})},e.prototype.getMinMaxText=function(t,e){var n=this.view.getOptions().data,r=this.view.getXScale(),i=(0,yX.I)(n,r.field);r.isLinear&&(i=i.sort());var o=i,a=(0,yX.dp)(n);if(!r||!a)return{};var s=(0,yX.dp)(o),l=Math.round(t*(s-1)),c=Math.round(e*(s-1)),u=(0,yX.U2)(o,[l]),h=(0,yX.U2)(o,[c]),p=this.getSliderCfg().formatter;return p&&(u=p(u,n[l],l),h=p(h,n[c],c)),{minText:u,maxText:h}},e.prototype.changeViewData=function(t,e){var n=this.view.getOptions().data,r=this.view.getXScale(),i=(0,yX.dp)(n);if(r&&i){var o=(0,yX.I)(n,r.field),a=this.view.getXScale().isLinear?o.sort((function(t,e){return Number(t)-Number(e)})):o,s=a,l=(0,yX.dp)(s),c=Math.round(t*(l-1)),u=Math.round(e*(l-1));this.view.filter(r.field,(function(t,e){var n=s.indexOf(t);return!(n>-1)||IQ(n,c,u)})),this.view.render(!0)}},e.prototype.getComponents=function(){return this.slider?[this.slider]:[]},e.prototype.clear=function(){this.slider&&(this.slider.component.destroy(),this.slider=void 0),this.width=0,this.start=void 0,this.end=void 0},e}(r2),C9=S9,E9=function(t){function e(e){var n=t.call(this,e)||this;return n.onChangeFn=yX.ZT,n.resetMeasure=function(){n.clear()},n.onValueChange=function(t){var e=t.ratio,r=n.getValidScrollbarCfg().animate;n.ratio=(0,yX.uZ)(e,0,1);var i=n.view.getOptions().animate;r||n.view.animate(!1),n.changeViewData(n.getScrollRange(),!0),n.view.animate(i)},n.container=n.view.getLayer(pX.FORE).addGroup(),n.onChangeFn=(0,yX.P2)(n.onValueChange,20,{leading:!0}),n.trackLen=0,n.thumbLen=0,n.ratio=0,n.view.on(vX.BEFORE_CHANGE_DATA,n.resetMeasure),n.view.on(vX.BEFORE_CHANGE_SIZE,n.resetMeasure),n}return(0,mX.ZT)(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"scrollbar"},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.view.off(vX.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(vX.BEFORE_CHANGE_SIZE,this.resetMeasure)},e.prototype.init=function(){},e.prototype.render=function(){this.option=this.view.getOptions().scrollbar,this.option?this.scrollbar?this.scrollbar=this.updateScrollbar():(this.scrollbar=this.createScrollbar(),this.scrollbar.component.on("scrollchange",this.onChangeFn)):this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0)},e.prototype.layout=function(){var t=this;if(this.option&&!this.trackLen&&(this.measureScrollbar(),setTimeout((function(){t.view.destroyed||t.changeViewData(t.getScrollRange(),!0)}))),this.scrollbar){var e=this.view.coordinateBBox.width,n=this.scrollbar.component.get("padding"),r=this.scrollbar.component.getLayoutBBox(),i=new AQ(r.x,r.y,Math.min(r.width,e),r.height).expand(n),o=this.getScrollbarComponentCfg(),a=void 0,s=void 0;if(o.isHorizontal){var l=(0,mX.CR)(v9(this.view.viewBBox,i,dX.BOTTOM),2),c=(l[0],l[1]),u=(0,mX.CR)(v9(this.view.coordinateBBox,i,dX.BOTTOM),2),h=u[0];u[1];a=h,s=c}else{var p=(0,mX.CR)(v9(this.view.viewBBox,i,dX.RIGHT),2),d=(p[0],c=p[1],(0,mX.CR)(v9(this.view.viewBBox,i,dX.RIGHT),2));h=d[0],d[1];a=h,s=c}a+=n[3],s+=n[0],this.trackLen?this.scrollbar.component.update((0,mX.pi)((0,mX.pi)({},o),{x:a,y:s,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio})):this.scrollbar.component.update((0,mX.pi)((0,mX.pi)({},o),{x:a,y:s})),this.view.viewBBox=this.view.viewBBox.cut(i,o.isHorizontal?dX.BOTTOM:dX.RIGHT)}},e.prototype.update=function(){this.render()},e.prototype.getComponents=function(){return this.scrollbar?[this.scrollbar]:[]},e.prototype.clear=function(){this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0),this.trackLen=0,this.thumbLen=0,this.ratio=0,this.cnt=0,this.step=0,this.data=void 0,this.xScaleCfg=void 0,this.yScalesCfg=[]},e.prototype.setValue=function(t){this.onValueChange({ratio:t})},e.prototype.getValue=function(){return this.ratio},e.prototype.getThemeOptions=function(){var t=this.view.getTheme();return(0,yX.U2)(t,["components","scrollbar","common"],{})},e.prototype.getScrollbarTheme=function(t){var e=(0,yX.U2)(this.view.getTheme(),["components","scrollbar"]),n=t||{},r=n.thumbHighlightColor,i=(0,mX._T)(n,["thumbHighlightColor"]);return{default:(0,yX.b$)({},(0,yX.U2)(e,["default","style"],{}),i),hover:(0,yX.b$)({},(0,yX.U2)(e,["hover","style"],{}),{thumbColor:r})}},e.prototype.measureScrollbar=function(){var t=this.view.getXScale(),e=this.view.getYScales().slice();this.data=this.getScrollbarData(),this.step=this.getStep(),this.cnt=this.getCnt();var n=this.getScrollbarComponentCfg(),r=n.trackLen,i=n.thumbLen;this.trackLen=r,this.thumbLen=i,this.xScaleCfg={field:t.field,values:t.values||[]},this.yScalesCfg=e},e.prototype.getScrollRange=function(){var t=Math.floor((this.cnt-this.step)*(0,yX.uZ)(this.ratio,0,1));return[t,Math.min(t+this.step-1,this.cnt-1)]},e.prototype.changeViewData=function(t,e){var n=this,r=(0,mX.CR)(t,2),i=r[0],o=r[1],a="vertical"!==this.getValidScrollbarCfg().type,s=(0,yX.I)(this.data,this.xScaleCfg.field),l=this.view.getXScale().isLinear?s.sort((function(t,e){return Number(t)-Number(e)})):s,c=a?l:l.reverse();this.yScalesCfg.forEach((function(t){n.view.scale(t.field,{formatter:t.formatter,type:t.type,min:t.min,max:t.max,tickMethod:t.tickMethod})})),this.view.filter(this.xScaleCfg.field,(function(t){var e=c.indexOf(t);return!(e>-1)||IQ(e,i,o)})),this.view.render(!0)},e.prototype.createScrollbar=function(){var t="vertical"!==this.getValidScrollbarCfg().type,e=new fQ((0,mX.pi)((0,mX.pi)({container:this.container},this.getScrollbarComponentCfg()),{x:0,y:0}));return e.init(),{component:e,layer:pX.FORE,direction:t?dX.BOTTOM:dX.RIGHT,type:fX.SCROLLBAR}},e.prototype.updateScrollbar=function(){var t=this.getScrollbarComponentCfg(),e=this.trackLen?(0,mX.pi)((0,mX.pi)({},t),{trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio}):(0,mX.pi)({},t);return this.scrollbar.component.update(e),this.scrollbar},e.prototype.getStep=function(){if(this.step)return this.step;var t=this.view.coordinateBBox,e=this.getValidScrollbarCfg(),n=e.type,r=e.categorySize,i="vertical"!==n;return Math.floor((i?t.width:t.height)/r)},e.prototype.getCnt=function(){if(this.cnt)return this.cnt;var t=this.view.getXScale(),e=this.getScrollbarData(),n=(0,yX.I)(e,t.field);return(0,yX.dp)(n)},e.prototype.getScrollbarComponentCfg=function(){var t=this.view,e=t.coordinateBBox,n=t.viewBBox,r=this.getValidScrollbarCfg(),i=r.type,o=r.padding,a=r.width,s=r.height,l=r.style,c="vertical"!==i,u=(0,mX.CR)(o,4),h=u[0],p=u[1],d=u[2],f=u[3],g=c?{x:e.minX+f,y:n.maxY-s-d}:{x:n.maxX-a-p,y:e.minY+h},m=this.getStep(),y=this.getCnt(),v=c?e.width-f-p:e.height-h-d,x=Math.max(v*(0,yX.uZ)(m/y,0,1),20);return(0,mX.pi)((0,mX.pi)({},this.getThemeOptions()),{x:g.x,y:g.y,size:c?s:a,isHorizontal:c,trackLen:v,thumbLen:x,thumbOffset:0,theme:this.getScrollbarTheme(l)})},e.prototype.getValidScrollbarCfg=function(){var t={type:"horizontal",categorySize:32,width:8,height:8,padding:[0,0,0,0],animate:!0,style:{}};return(0,yX.Kn)(this.option)&&(t=(0,mX.pi)((0,mX.pi)({},t),this.option)),(0,yX.Kn)(this.option)&&this.option.padding||(t.padding=(t.type,[0,0,0,0])),t},e.prototype.getScrollbarData=function(){var t=this.view.getCoordinate(),e=this.getValidScrollbarCfg(),n=this.view.getOptions().data||[];return t.isReflect("y")&&"vertical"===e.type&&(n=(0,mX.ev)([],(0,mX.CR)(n),!1).reverse()),n},e}(r2),k9=E9,M9={fill:"#CCD6EC",opacity:.3};function T9(t,e,n){var r,i,o,a,s,l,c=function(t,e,n){var r,i,o=$1(t,e,n);try{for(var a=(0,mX.XA)(t.views),s=a.next();!s.done;s=a.next()){var l=s.value;o=o.concat($1(l,e,n))}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o}(t,e,n);if(c.length){c=(0,yX.xH)(c);try{for(var u=(0,mX.XA)(c),h=u.next();!h.done;h=u.next()){var p=h.value;try{for(var d=(o=void 0,(0,mX.XA)(p)),f=d.next();!f.done;f=d.next()){var g=f.value,m=g.mappingData,y=m.x,v=m.y;g.x=(0,yX.kJ)(y)?y[y.length-1]:y,g.y=(0,yX.kJ)(v)?v[v.length-1]:v}}catch(E){o={error:E}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}}}catch(k){r={error:k}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}if(!1===n.shared&&c.length>1){var x=c[0],_=Math.abs(e.y-x[0].y);try{for(var b=(0,mX.XA)(c),w=b.next();!w.done;w=b.next()){var S=w.value,C=Math.abs(e.y-S[0].y);C<=_&&(x=S,_=C)}}catch(M){s={error:M}}finally{try{w&&!w.done&&(l=b.return)&&l.call(b)}finally{if(s)throw s.error}}c=[x]}return(0,yX.jj)((0,yX.xH)(c))}return[]}var I9=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.show=function(t){var e=this.context.view,n=this.context.event,r=e.getController("tooltip").getTooltipCfg(),i=T9(e,{x:n.x,y:n.y},r);if(!(0,yX.Xy)(i,this.items)&&(this.items=i,i.length)){var o=e.getXScale().field,a=i[0].data[o],s=[],l=e.geometries;if((0,yX.S6)(l,(function(t){if("interval"===t.type||"schema"===t.type){var e=t.getElementsBy((function(t){return t.getData()[o]===a}));s=s.concat(e)}})),s.length){var c=e.getCoordinate(),u=s[0].shape.getCanvasBBox(),h=s[0].shape.getCanvasBBox(),p=u;(0,yX.S6)(s,(function(t){var e=t.shape.getCanvasBBox();c.isTransposed?(e.minY<u.minY&&(u=e),e.maxY>h.maxY&&(h=e)):(e.minX<u.minX&&(u=e),e.maxX>h.maxX&&(h=e)),p.x=Math.min(e.minX,p.minX),p.y=Math.min(e.minY,p.minY),p.width=Math.max(e.maxX,p.maxX)-p.x,p.height=Math.max(e.maxY,p.maxY)-p.y}));var d=e.backgroundGroup,f=e.coordinateBBox,g=void 0;if(c.isRect){var m=e.getXScale(),y=t||{},v=y.appendRatio,x=y.appendWidth;(0,yX.UM)(x)&&(v=(0,yX.UM)(v)?m.isLinear?0:.25:v,x=c.isTransposed?v*h.height:v*u.width);var _=void 0,b=void 0,w=void 0,S=void 0;c.isTransposed?(_=f.minX,b=Math.min(h.minY,u.minY)-x,w=f.width,S=p.height+2*x):(_=Math.min(u.minX,h.minX)-x,b=f.minY,w=p.width+2*x,S=f.height),g=[["M",_,b],["L",_+w,b],["L",_+w,b+S],["L",_,b+S],["Z"]]}else{var C=(0,yX.YM)(s),E=(0,yX.Z$)(s),k=MQ(C.getModel(),c).startAngle,M=MQ(E.getModel(),c).endAngle,T=c.getCenter(),I=c.getRadius(),P=c.innerRadius*I;g=EQ(T.x,T.y,I,k,M,P)}if(this.regionPath)this.regionPath.attr("path",g),this.regionPath.show();else{var O=(0,yX.U2)(t,"style",M9);this.regionPath=d.addShape({type:"path",name:"active-region",capture:!1,attrs:(0,mX.pi)((0,mX.pi)({},O),{path:g})})}}}},e.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},e.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),t.prototype.destroy.call(this)},e}(n0),P9=I9,O9=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timeStamp=0,e}return(0,mX.ZT)(e,t),e.prototype.show=function(){var t=this.context,e=t.event,n=t.view;if(!n.isTooltipLocked()){var r=this.timeStamp,i=+new Date;if(i-r>(0,yX.U2)(t.view.getOptions(),"tooltip.showDelay",16)){var o=this.location,a={x:e.x,y:e.y};o&&(0,yX.Xy)(o,a)||this.showTooltip(n,a),this.timeStamp=i,this.location=a}}},e.prototype.hide=function(){var t=this.context.view,e=t.getController("tooltip"),n=this.context.event,r=n.clientX,i=n.clientY;e.isCursorEntered({x:r,y:i})||t.isTooltipLocked()||(this.hideTooltip(t),this.location=null)},e.prototype.showTooltip=function(t,e){t.showTooltip(e)},e.prototype.hideTooltip=function(t){t.hideTooltip()},e}(n0),A9=O9,D9=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.showTooltip=function(t,e){var n=K0(t);(0,yX.S6)(n,(function(n){var r=J0(t,n,e);n.showTooltip(r)}))},e.prototype.hideTooltip=function(t){var e=K0(t);(0,yX.S6)(e,(function(t){t.hideTooltip()}))},e}(A9),R9=D9,L9=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timeStamp=0,e}return(0,mX.ZT)(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},e.prototype.show=function(){var t=this.context.event,e=this.timeStamp,n=+new Date;if(n-e>16){var r=this.location,i={x:t.x,y:t.y};r&&(0,yX.Xy)(r,i)||this.showTooltip(i),this.timeStamp=n,this.location=i}},e.prototype.hide=function(){this.hideTooltip(),this.location=null},e.prototype.showTooltip=function(t){var e=this.context.event.target;if(e&&e.get("tip")){this.tooltip||this.renderTooltip();var n=e.get("tip");this.tooltip.update((0,mX.pi)({title:n},t)),this.tooltip.show()}},e.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},e.prototype.renderTooltip=function(){var t,e=this.context.view,n=e.canvas,r={start:{x:0,y:0},end:{x:n.get("width"),y:n.get("height")}},i=e.getTheme(),o=(0,yX.U2)(i,["components","tooltip","domStyles"],{}),a=new bQ({parent:n.get("el").parentNode,region:r,visible:!1,crosshairs:null,domStyles:(0,mX.pi)({},(0,yX.b$)({},o,(t={},t[zJ]={"max-width":"50%"},t[BJ]={"word-break":"break-all"},t)))});a.init(),a.setCapture(!1),this.tooltip=a},e}(n0),N9=L9,F9=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="",e}return(0,mX.ZT)(e,t),e.prototype.hasState=function(t){return t.hasState(this.stateName)},e.prototype.setElementState=function(t,e){t.setState(this.stateName,e)},e.prototype.setState=function(){this.setStateEnable(!0)},e.prototype.clear=function(){var t=this.context.view;this.clearViewState(t)},e.prototype.clearViewState=function(t){var e=this,n=V0(t,this.stateName);(0,yX.S6)(n,(function(t){e.setElementState(t,!1)}))},e}(n0),z9=F9;function B9(t){return(0,yX.U2)(t.get("delegateObject"),"item")}var $9=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ignoreListItemStates=["unchecked"],e}return(0,mX.ZT)(e,t),e.prototype.isItemIgnore=function(t,e){var n=this.ignoreListItemStates.filter((function(n){return e.hasState(t,n)}));return!!n.length},e.prototype.setStateByComponent=function(t,e,n){var r=this.context.view,i=t.get("field"),o=U0(r);this.setElementsStateByItem(o,i,e,n)},e.prototype.setStateByElement=function(t,e){this.setElementState(t,e)},e.prototype.isMathItem=function(t,e,n){var r=t1(this.context.view,e),i=H0(t,e);return!(0,yX.UM)(i)&&n.name===r.getText(i)},e.prototype.setElementsStateByItem=function(t,e,n,r){var i=this;(0,yX.S6)(t,(function(t){i.isMathItem(t,e,n)&&t.setState(i.stateName,r)}))},e.prototype.setStateEnable=function(t){var e=A0(this.context);if(e)R0(this.context)&&this.setStateByElement(e,t);else{var n=D0(this.context);if(L0(n)){var r=n.item,i=n.component;if(r&&i&&!this.isItemIgnore(r,i)){var o=this.context.event.gEvent;if(o&&o.fromShape&&o.toShape&&B9(o.fromShape)===B9(o.toShape))return;this.setStateByComponent(i,r,t)}}}},e.prototype.toggle=function(){var t=A0(this.context);if(t){var e=t.hasState(this.stateName);this.setElementState(t,!e)}},e.prototype.reset=function(){this.setStateEnable(!1)},e}(z9),j9=$9,U9=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="active",e}return(0,mX.ZT)(e,t),e.prototype.active=function(){this.setState()},e}(j9),V9=U9,H9=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cache={},e}return(0,mX.ZT)(e,t),e.prototype.getColorScale=function(t,e){var n=e.geometry.getAttribute("color");return n?t.getScaleByField(n.getFields()[0]):null},e.prototype.getLinkPath=function(t,e){var n=this.context.view.getCoordinate().isTransposed,r=t.shape.getCanvasBBox(),i=e.shape.getCanvasBBox();return n?[["M",r.minX,r.minY],["L",i.minX,i.maxY],["L",i.maxX,i.maxY],["L",r.maxX,r.minY],["Z"]]:[["M",r.maxX,r.minY],["L",i.minX,i.minY],["L",i.minX,i.maxY],["L",r.maxX,r.maxY],["Z"]]},e.prototype.addLinkShape=function(t,e,n,r){var i={opacity:.4,fill:e.shape.attr("fill")};t.addShape({type:"path",attrs:(0,mX.pi)((0,mX.pi)({},(0,yX.b$)({},i,(0,yX.mf)(r)?r(i,e):r)),{path:this.getLinkPath(e,n)})})},e.prototype.linkByElement=function(t,e){var n=this,r=this.context.view,i=this.getColorScale(r,t);if(i){var o=H0(t,i.field);if(!this.cache[o]){var a=function(t,e,n){return U0(t).filter((function(t){return H0(t,e)===n}))}(r,i.field,o),s=this.linkGroup.addGroup();this.cache[o]=s;var l=a.length;(0,yX.S6)(a,(function(t,r){if(r<l-1){var i=a[r+1];n.addLinkShape(s,t,i,e)}}))}}},e.prototype.removeLink=function(t){var e=this.getColorScale(this.context.view,t);if(e){var n=H0(t,e.field);this.cache[n]&&(this.cache[n].remove(),this.cache[n]=null)}},e.prototype.link=function(t){var e=this.context;this.linkGroup||(this.linkGroup=e.view.foregroundGroup.addGroup({id:"link-by-color-group",capture:!1}));var n=A0(e);n&&this.linkByElement(n,null===t||void 0===t?void 0:t.style)},e.prototype.unlink=function(){var t=A0(this.context);t&&this.removeLink(t)},e.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear(),this.cache={}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},e}(n0),G9=H9,W9=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startPoint=null,e.endPoint=null,e.isStarted=!1,e.effectSiblings=!1,e.effectByRecord=!1,e}return(0,mX.ZT)(e,t),e.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},e.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},e.prototype.getIntersectElements=function(){var t=null;if(F0(this.context))t=B0(this.context,10);else{var e=this.startPoint,n=this.isStarted?this.getCurrentPoint():this.endPoint;if(!e||!n)return;var r={minX:Math.min(e.x,n.x),minY:Math.min(e.y,n.y),maxX:Math.max(e.x,n.x),maxY:Math.max(e.y,n.y)};t=G0(this.context.view,r)}return t},e.prototype.setStateEnable=function(t){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(t);else{var e=U0(this.context.view),n=this.getIntersectElements();n&&n.length?this.effectByRecord?this.setSiblingsStateByRecord(n,t):this.setElementsState(n,t,e):this.clear()}},e.prototype.setSiblingsStateByRecord=function(t,e){var n=this,r=this.context.view,i=K0(r),o=t.map((function(t){return t.getModel().data})),a=r.getXScale().field,s=r.getYScales()[0].field;(0,yX.S6)(i,(function(t){var r=U0(t),i=r.filter((function(t){var e=t.getModel().data;return Q0(o,e,a,s)}));n.setElementsState(i,e,r)}))},e.prototype.setSiblingsState=function(t){var e=this,n=K0(this.context.view);F0(this.context)&&(0,yX.S6)(n,(function(n){var r=U0(n),i=$0(e.context,n,10);i&&i.length?e.setElementsState(i,t,r):e.clearViewState(n)}))},e.prototype.setElementsState=function(t,e,n){var r=this;(0,yX.S6)(n,(function(n){t.includes(n)?r.setElementState(n,e):r.setElementState(n,!1)}))},e.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},e.prototype.clear=function(){var t=this,e=this.context.view;if(this.effectSiblings){var n=K0(e);(0,yX.S6)(n,(function(e){t.clearViewState(e)}))}else this.clearViewState(e)},e}(z9),X9=W9,q9=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="active",e}return(0,mX.ZT)(e,t),e.prototype.active=function(){this.setState()},e}(X9),Y9=q9,Z9=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.setStateEnable=function(t){var e=A0(this.context);if(e){if(!R0(this.context))return;t?(this.clear(),this.setElementState(e,!0)):this.hasState(e)&&this.setElementState(e,!1)}},e.prototype.toggle=function(){var t=A0(this.context);if(t){var e=this.hasState(t);e||this.clear(),this.setElementState(t,!e)}},e.prototype.reset=function(){this.setStateEnable(!1)},e}(z9),K9=Z9,J9=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="active",e}return(0,mX.ZT)(e,t),e.prototype.active=function(){this.setState()},e}(K9),Q9=J9,t7="inactive",e7="active";function n7(t){var e=U0(t);(0,yX.S6)(e,(function(t){t.hasState(e7)&&t.setState(e7,!1),t.hasState(t7)&&t.setState(t7,!1)}))}function r7(t,e,n){(0,yX.S6)(t,(function(t){e(t)?(t.hasState(t7)&&t.setState(t7,!1),t.setState(e7,n)):(t.hasState(e7)&&t.setState(e7,!1),t.setState(t7,n))}))}var i7,o7=bX.INACTIVE,a7=bX.ACTIVE,s7=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName=a7,e}return(0,mX.ZT)(e,t),e.prototype.setElementsStateByItem=function(t,e,n,r){var i=this;this.setHighlightBy(t,(function(t){return i.isMathItem(t,e,n)}),r)},e.prototype.setElementHighlight=function(t,e){e(t)?(t.hasState(o7)&&t.setState(o7,!1),t.setState(a7,!0)):t.hasState(a7)||t.setState(o7,!0)},e.prototype.setHighlightBy=function(t,e,n){var r=this;if(n)(0,yX.S6)(t,(function(t){r.setElementHighlight(t,e)}));else{var i=V0(this.context.view,a7),o=!0;(0,yX.S6)(i,(function(t){if(!e(t))return o=!1,!1})),o?this.clear():(0,yX.S6)(t,(function(t){e(t)&&(t.hasState(a7)&&t.setState(a7,!1),t.setState(o7,!0))}))}},e.prototype.setElementState=function(t,e){var n=U0(this.context.view);this.setHighlightBy(n,(function(e){return t===e}),e)},e.prototype.highlight=function(){this.setState()},e.prototype.clear=function(){n7(this.context.view)},e}(j9),l7=s7,c7=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.setStateByElement=function(t,e){var n=this.context.view,r=t.geometry.getAttribute("color");if(r){var i=n.getScaleByField(r.getFields()[0]),o=H0(t,i.field),a=U0(n),s=a.filter((function(t){return H0(t,i.field)===o}));this.setHighlightBy(a,(function(t){return s.includes(t)}),e)}},e}(l7),u7=c7,h7=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.setElementHighlight=function(t,e){e(t)?(t.hasState(o7)&&t.setState(o7,!1),t.setState(a7,!0)):(t.setState(o7,!0),t.hasState(a7)&&t.setState(a7,!1))},e.prototype.setStateByElement=function(t,e){var n=this.context.view,r=n.getXScale(),i=H0(t,r.field),o=U0(n),a=o.filter((function(t){return H0(t,r.field)===i}));this.setHighlightBy(o,(function(t){return a.includes(t)}),e)},e.prototype.toggle=function(){var t=A0(this.context);if(t){var e=t.hasState(this.stateName);this.setStateByElement(t,!e)}},e}(l7),p7=h7;!function(t){t.BEFORE_HIGHLIGHT="element-range-highlight:beforehighlight",t.AFTER_HIGHLIGHT="element-range-highlight:afterhighlight",t.BEFORE_CLEAR="element-range-highlight:beforeclear",t.AFTER_CLEAR="element-range-highlight:afterclear"}(i7||(i7={}));var d7=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="active",e}return(0,mX.ZT)(e,t),e.prototype.clearViewState=function(t){n7(t)},e.prototype.highlight=function(){var t=this.context,e=t.view,n={view:e,event:t.event,highlightElements:this.getIntersectElements()};e.emit(i7.BEFORE_HIGHLIGHT,X1.fromData(e,i7.BEFORE_HIGHLIGHT,n)),this.setState(),e.emit(i7.AFTER_HIGHLIGHT,X1.fromData(e,i7.AFTER_HIGHLIGHT,n))},e.prototype.clear=function(){var e=this.context.view;e.emit(i7.BEFORE_CLEAR,X1.fromData(e,i7.BEFORE_CLEAR,{})),t.prototype.clear.call(this),e.emit(i7.AFTER_CLEAR,X1.fromData(e,i7.AFTER_CLEAR,{}))},e.prototype.setElementsState=function(t,e,n){r7(n,(function(e){return t.indexOf(e)>=0}),e)},e}(X9),f7=d7,g7=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="active",e}return(0,mX.ZT)(e,t),e.prototype.highlight=function(){this.setState()},e.prototype.setElementState=function(t,e){r7(U0(this.context.view),(function(e){return t===e}),e)},e.prototype.clear=function(){n7(this.context.view)},e}(K9),m7=g7,y7=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="selected",e}return(0,mX.ZT)(e,t),e.prototype.selected=function(){this.setState()},e}(X9),v7=y7,x7=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="selected",e}return(0,mX.ZT)(e,t),e.prototype.selected=function(){this.setState()},e}(j9),_7=x7,b7=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="selected",e}return(0,mX.ZT)(e,t),e.prototype.selected=function(){this.setState()},e}(K9),w7=b7,S7=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="",e.ignoreItemStates=[],e}return(0,mX.ZT)(e,t),e.prototype.getTriggerListInfo=function(){var t=D0(this.context),e=null;return L0(t)&&(e={item:t.item,list:t.component}),e},e.prototype.getAllowComponents=function(){var t=this,e=q0(this.context.view),n=[];return(0,yX.S6)(e,(function(e){e.isList()&&t.allowSetStateByElement(e)&&n.push(e)})),n},e.prototype.hasState=function(t,e){return t.hasState(e,this.stateName)},e.prototype.clearAllComponentsState=function(){var t=this,e=this.getAllowComponents();(0,yX.S6)(e,(function(e){e.clearItemsState(t.stateName)}))},e.prototype.allowSetStateByElement=function(t){var e=t.get("field");if(!e)return!1;if(this.cfg&&this.cfg.componentNames){var n=t.get("name");if(-1===this.cfg.componentNames.indexOf(n))return!1}var r=t1(this.context.view,e);return r&&r.isCategory},e.prototype.allowSetStateByItem=function(t,e){var n=this.ignoreItemStates;if(n.length){var r=n.filter((function(n){return e.hasState(t,n)}));return 0===r.length}return!0},e.prototype.setStateByElement=function(t,e,n){var r=t.get("field"),i=t1(this.context.view,r),o=H0(e,r),a=i.getText(o);this.setItemsState(t,a,n)},e.prototype.setStateEnable=function(t){var e=this,n=A0(this.context);if(n){var r=this.getAllowComponents();(0,yX.S6)(r,(function(r){e.setStateByElement(r,n,t)}))}else{var i=D0(this.context);if(L0(i)){var o=i.item,a=i.component;this.allowSetStateByElement(a)&&this.allowSetStateByItem(o,a)&&this.setItemState(a,o,t)}}},e.prototype.setItemsState=function(t,e,n){var r=this,i=t.getItems();(0,yX.S6)(i,(function(i){i.name===e&&r.setItemState(t,i,n)}))},e.prototype.setItemState=function(t,e,n){t.setItemState(e,this.stateName,n)},e.prototype.setState=function(){this.setStateEnable(!0)},e.prototype.reset=function(){this.setStateEnable(!1)},e.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var e=t.list,n=t.item,r=this.hasState(e,n);this.setItemState(e,n,!r)}},e.prototype.clear=function(){var t=this.getTriggerListInfo();t?t.list.clearItemsState(this.stateName):this.clearAllComponentsState()},e}(n0),C7=S7,E7=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="active",e}return(0,mX.ZT)(e,t),e.prototype.active=function(){this.setState()},e}(C7),k7=E7,M7="inactive",T7="active";var I7="inactive",P7="active",O7=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName=P7,e.ignoreItemStates=["unchecked"],e}return(0,mX.ZT)(e,t),e.prototype.setItemsState=function(t,e,n){this.setHighlightBy(t,(function(t){return t.name===e}),n)},e.prototype.setItemState=function(t,e,n){t.getItems();this.setHighlightBy(t,(function(t){return t===e}),n)},e.prototype.setHighlightBy=function(t,e,n){var r=t.getItems();if(n)(0,yX.S6)(r,(function(n){e(n)?(t.hasState(n,I7)&&t.setItemState(n,I7,!1),t.setItemState(n,P7,!0)):t.hasState(n,P7)||t.setItemState(n,I7,!0)}));else{var i=t.getItemsByState(P7),o=!0;(0,yX.S6)(i,(function(t){if(!e(t))return o=!1,!1})),o?this.clear():(0,yX.S6)(r,(function(n){e(n)&&(t.hasState(n,P7)&&t.setItemState(n,P7,!1),t.setItemState(n,I7,!0))}))}},e.prototype.highlight=function(){this.setState()},e.prototype.clear=function(){var t=this.getTriggerListInfo();if(t)!function(t){var e=t.getItems();(0,yX.S6)(e,(function(e){t.hasState(e,T7)&&t.setItemState(e,T7,!1),t.hasState(e,M7)&&t.setItemState(e,M7,!1)}))}(t.list);else{var e=this.getAllowComponents();(0,yX.S6)(e,(function(t){t.clearItemsState(P7),t.clearItemsState(I7)}))}},e}(C7),A7=O7,D7=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="selected",e}return(0,mX.ZT)(e,t),e.prototype.selected=function(){this.setState()},e}(C7),R7=D7,L7=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="unchecked",e}return(0,mX.ZT)(e,t),e.prototype.unchecked=function(){this.setState()},e}(C7),N7=L7,F7="unchecked",z7="checked",B7=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName=z7,e}return(0,mX.ZT)(e,t),e.prototype.setItemState=function(t,e,n){this.setCheckedBy(t,(function(t){return t===e}),n)},e.prototype.setCheckedBy=function(t,e,n){var r=t.getItems();n&&(0,yX.S6)(r,(function(n){e(n)?(t.hasState(n,F7)&&t.setItemState(n,F7,!1),t.setItemState(n,z7,!0)):t.hasState(n,z7)||t.setItemState(n,F7,!0)}))},e.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var e=t.list,n=t.item,r=!(0,yX.G)(e.getItems(),(function(t){return e.hasState(t,F7)}));r||e.hasState(n,F7)?this.setItemState(e,n,!0):this.reset()}},e.prototype.checked=function(){this.setState()},e.prototype.reset=function(){var t=this.getAllowComponents();(0,yX.S6)(t,(function(t){t.clearItemsState(z7),t.clearItemsState(F7)}))},e}(C7),$7=B7,j7="unchecked",U7=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.toggle=function(){var t,e,n,r,i,o,a,s,l=this.getTriggerListInfo();if(null===l||void 0===l?void 0:l.item){var c=l.list,u=l.item,h=c.getItems(),p=h.filter((function(t){return!c.hasState(t,j7)})),d=h.filter((function(t){return c.hasState(t,j7)})),f=p[0];if(h.length===p.length)try{for(var g=(0,mX.XA)(h),m=g.next();!m.done;m=g.next()){var y=m.value;c.setItemState(y,j7,y.id!==u.id)}}catch(C){t={error:C}}finally{try{m&&!m.done&&(e=g.return)&&e.call(g)}finally{if(t)throw t.error}}else if(h.length-d.length===1)if(f.id===u.id)try{for(var v=(0,mX.XA)(h),x=v.next();!x.done;x=v.next()){y=x.value;c.setItemState(y,j7,!1)}}catch(E){n={error:E}}finally{try{x&&!x.done&&(r=v.return)&&r.call(v)}finally{if(n)throw n.error}}else try{for(var _=(0,mX.XA)(h),b=_.next();!b.done;b=_.next()){y=b.value;c.setItemState(y,j7,y.id!==u.id)}}catch(k){i={error:k}}finally{try{b&&!b.done&&(o=_.return)&&o.call(_)}finally{if(i)throw i.error}}else try{for(var w=(0,mX.XA)(h),S=w.next();!S.done;S=w.next()){y=S.value;c.setItemState(y,j7,y.id!==u.id)}}catch(M){a={error:M}}finally{try{S&&!S.done&&(s=w.return)&&s.call(w)}finally{if(a)throw a.error}}}},e}(C7),V7=U7,H7="showRadio",G7="legend-radio-tip",W7=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timeStamp=0,e}return(0,mX.ZT)(e,t),e.prototype.show=function(){var t=this.getTriggerListInfo();if(null===t||void 0===t?void 0:t.item){var e=t.list,n=t.item;e.setItemState(n,H7,!0)}},e.prototype.hide=function(){var t=this.getTriggerListInfo();if(null===t||void 0===t?void 0:t.item){var e=t.list,n=t.item;e.setItemState(n,H7,!1)}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},e.prototype.showTip=function(){var t=this.context.event,e=this.timeStamp,n=+new Date,r=this.context.event.target;if(n-e>16&&"legend-item-radio"===r.get("name")){var i=this.location,o={x:t.x,y:t.y};this.timeStamp=n,this.location=o,i&&(0,yX.Xy)(i,o)||this.showTooltip(o)}},e.prototype.hideTip=function(){this.hideTooltip(),this.location=null},e.prototype.showTooltip=function(t){var e=this.context,n=e.event.target;if(n&&n.get("tip")){this.tooltip||this.renderTooltip();var r=e.view.getCanvas().get("el").getBoundingClientRect(),i=r.x,o=r.y;this.tooltip.update((0,mX.pi)((0,mX.pi)({title:n.get("tip")},t),{x:t.x+i,y:t.y+o})),this.tooltip.show()}},e.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},e.prototype.renderTooltip=function(){var t,e=((t={})[zJ]={padding:"6px 8px",transform:"translate(-50%, -80%)",background:"rgba(0,0,0,0.75)",color:"#fff","border-radius":"2px","z-index":100},t[BJ]={"font-size":"12px","line-height":"14px","margin-bottom":0,"word-break":"break-all"},t);document.getElementById(G7)&&document.body.removeChild(document.getElementById(G7));var n=new bQ({parent:document.body,region:null,visible:!1,crosshairs:null,domStyles:e,containerId:G7});n.init(),n.setCapture(!1),this.tooltip=n},e}(C7),X7=W7,q7=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maskShape=null,e.points=[],e.starting=!1,e.moving=!1,e.preMovePoint=null,e.shapeType="path",e}return(0,mX.ZT)(e,t),e.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},e.prototype.emitEvent=function(t){var e="mask:".concat(t),n=this.context.view,r=this.context.event;n.emit(e,{target:this.maskShape,shape:this.maskShape,points:this.points,x:r.x,y:r.y})},e.prototype.createMask=function(){var t=this.context.view,e=this.getMaskAttrs();return t.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:(0,mX.pi)({fill:"#C5D4EB",opacity:.3},e)})},e.prototype.getMaskPath=function(){return[]},e.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},e.prototype.start=function(t){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(null===t||void 0===t?void 0:t.maskStyle),this.emitEvent("start")},e.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},e.prototype.move=function(){if(this.moving&&this.maskShape){var t=this.getCurrentPoint(),e=this.preMovePoint,n=t.x-e.x,r=t.y-e.y,i=this.points;(0,yX.S6)(i,(function(t){t.x+=n,t.y+=r})),this.updateMask(),this.emitEvent("change"),this.preMovePoint=t}},e.prototype.updateMask=function(t){var e=(0,yX.b$)({},this.getMaskAttrs(),t);this.maskShape.attr(e)},e.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},e.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},e.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},e.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},e.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,t.prototype.destroy.call(this)},e}(n0),Y7=q7;function Z7(t){var e=(0,yX.Z$)(t),n=0,r=0,i=0;if(t.length){var o=t[0];n=Y0(o,e)/2,r=(e.x+o.x)/2,i=(e.y+o.y)/2}return{x:r,y:i,r:n}}var K7=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shapeType="circle",e}return(0,mX.ZT)(e,t),e.prototype.getMaskAttrs=function(){return Z7(this.points)},e}(Y7),J7=K7;function Q7(t){return{start:(0,yX.YM)(t),end:(0,yX.Z$)(t)}}function ttt(t,e){return{x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),width:Math.abs(e.x-t.x),height:Math.abs(e.y-t.y)}}var ett=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shapeType="rect",e}return(0,mX.ZT)(e,t),e.prototype.getRegion=function(){return Q7(this.points)},e.prototype.getMaskAttrs=function(){var t=this.getRegion();return ttt(t.start,t.end)},e}(Y7),ntt=ett;function rtt(t){t.x=(0,yX.uZ)(t.x,0,1),t.y=(0,yX.uZ)(t.y,0,1)}function itt(t,e,n,r){var i=null,o=null,a=r.invert((0,yX.YM)(t)),s=r.invert((0,yX.Z$)(t));return n&&(rtt(a),rtt(s)),"x"===e?(i=r.convert({x:a.x,y:0}),o=r.convert({x:s.x,y:1})):(i=r.convert({x:0,y:a.y}),o=r.convert({x:1,y:s.y})),{start:i,end:o}}var ott=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dim="x",e.inPlot=!0,e}return(0,mX.ZT)(e,t),e.prototype.getRegion=function(){var t=this.context.view.getCoordinate();return itt(this.points,this.dim,this.inPlot,t)},e}(ntt),att=ott;function stt(t){var e=[];return t.length&&((0,yX.S6)(t,(function(t,n){0===n?e.push(["M",t.x,t.y]):e.push(["L",t.x,t.y])})),e.push(["L",t[0].x,t[0].y])),e}function ltt(t){return{path:stt(t)}}var ctt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getMaskPath=function(){return stt(this.points)},e.prototype.getMaskAttrs=function(){return ltt(this.points)},e.prototype.addPoint=function(){this.resize()},e}(Y7),utt=ctt;function htt(t){return function(t,e){if(t.length<=2)return d0(t,!1);var n=t[0],r=[];(0,yX.S6)(t,(function(t){r.push(t.x),r.push(t.y)}));var i=p0(r,e,null);return i.unshift(["M",n.x,n.y]),i}(t,!0)}function ptt(t){return{path:htt(t)}}var dtt,ftt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getMaskPath=function(){return htt(this.points)},e.prototype.getMaskAttrs=function(){return ptt(this.points)},e}(utt),gtt=ftt,mtt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maskShapes=[],e.starting=!1,e.moving=!1,e.recordPoints=null,e.preMovePoint=null,e.shapeType="path",e.maskType="multi-mask",e}return(0,mX.ZT)(e,t),e.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},e.prototype.emitEvent=function(t){var e="".concat(this.maskType,":").concat(t),n=this.context.view,r=this.context.event,i={type:this.shapeType,name:this.maskType,get:function(t){return i.hasOwnProperty(t)?i[t]:void 0}};n.emit(e,{target:i,maskShapes:this.maskShapes,multiPoints:this.recordPoints,x:r.x,y:r.y})},e.prototype.createMask=function(t){var e=this.context.view,n=this.recordPoints[t],r=this.getMaskAttrs(n),i=e.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:(0,mX.pi)({fill:"#C5D4EB",opacity:.3},r)});this.maskShapes.push(i)},e.prototype.getMaskPath=function(t){return[]},e.prototype.show=function(){this.maskShapes.length>0&&(this.maskShapes.forEach((function(t){return t.show()})),this.emitEvent("show"))},e.prototype.start=function(t){this.recordPointStart(),this.starting=!0,this.moving=!1;var e=this.recordPoints.length-1;this.createMask(e),this.updateShapesCapture(!1),this.updateMask(null===t||void 0===t?void 0:t.maskStyle),this.emitEvent("start")},e.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint(),this.updateShapesCapture(!1)},e.prototype.move=function(){if(this.moving&&0!==this.maskShapes.length){var t=this.getCurrentPoint(),e=this.preMovePoint,n=t.x-e.x,r=t.y-e.y,i=this.getCurMaskShapeIndex();i>-1&&(this.recordPoints[i].forEach((function(t){t.x+=n,t.y+=r})),this.updateMask(),this.emitEvent("change"),this.preMovePoint=t)}},e.prototype.updateMask=function(t){var e=this;this.recordPoints.forEach((function(n,r){var i=(0,yX.b$)({},e.getMaskAttrs(n),t);e.maskShapes[r].attr(i)}))},e.prototype.resize=function(){this.starting&&this.maskShapes.length>0&&(this.recordPointContinue(),this.updateMask(),this.emitEvent("change"))},e.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null,this.updateShapesCapture(!0)},e.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.updateShapesCapture(!0)},e.prototype.hide=function(){this.maskShapes.length>0&&(this.maskShapes.forEach((function(t){return t.hide()})),this.emitEvent("hide"))},e.prototype.remove=function(){var t=this.getCurMaskShapeIndex();t>-1&&(this.recordPoints.splice(t,1),this.maskShapes[t].remove(),this.maskShapes.splice(t,1),this.preMovePoint=null,this.updateShapesCapture(!0),this.emitEvent("change"))},e.prototype.clearAll=function(){this.recordPointClear(),this.maskShapes.forEach((function(t){return t.remove()})),this.maskShapes=[],this.preMovePoint=null},e.prototype.clear=function(){var t=this.getCurMaskShapeIndex();-1===t?(this.recordPointClear(),this.maskShapes.forEach((function(t){return t.remove()})),this.maskShapes=[],this.emitEvent("clearAll")):(this.recordPoints.splice(t,1),this.maskShapes[t].remove(),this.maskShapes.splice(t,1),this.preMovePoint=null,this.emitEvent("clearSingle")),this.preMovePoint=null},e.prototype.destroy=function(){this.clear(),t.prototype.destroy.call(this)},e.prototype.getRecordPoints=function(){var t;return(0,mX.ev)([],(0,mX.CR)(null!==(t=this.recordPoints)&&void 0!==t?t:[]),!1)},e.prototype.recordPointStart=function(){var t=this.getRecordPoints(),e=this.getCurrentPoint();this.recordPoints=(0,mX.ev)((0,mX.ev)([],(0,mX.CR)(t),!1),[[e]],!1)},e.prototype.recordPointContinue=function(){var t=this.getRecordPoints(),e=this.getCurrentPoint(),n=t.splice(-1,1)[0]||[];n.push(e),this.recordPoints=(0,mX.ev)((0,mX.ev)([],(0,mX.CR)(t),!1),[n],!1)},e.prototype.recordPointClear=function(){this.recordPoints=[]},e.prototype.updateShapesCapture=function(t){this.maskShapes.forEach((function(e){return e.set("capture",t)}))},e.prototype.getCurMaskShapeIndex=function(){var t=this.getCurrentPoint();return this.maskShapes.findIndex((function(e){var n=e.attrs,r=n.width,i=n.height,o=n.r;return!(0===r||0===i||0===o)&&e.isHit(t.x,t.y)}))},e}(n0),ytt=mtt,vtt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shapeType="rect",e}return(0,mX.ZT)(e,t),e.prototype.getRegion=function(t){return Q7(t)},e.prototype.getMaskAttrs=function(t){var e=this.getRegion(t);return ttt(e.start,e.end)},e}(ytt),xtt=vtt,_tt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dim="x",e.inPlot=!0,e}return(0,mX.ZT)(e,t),e.prototype.getRegion=function(t){var e=this.context.view.getCoordinate();return itt(t,this.dim,this.inPlot,e)},e}(xtt),btt=_tt,wtt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shapeType="circle",e.getMaskAttrs=Z7,e}return(0,mX.ZT)(e,t),e}(ytt),Stt=wtt,Ctt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.getMaskPath=stt,e.getMaskAttrs=ltt,e}return(0,mX.ZT)(e,t),e.prototype.addPoint=function(){this.resize()},e}(ytt),Ett=Ctt,ktt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.getMaskPath=htt,e.getMaskAttrs=ptt,e}return(0,mX.ZT)(e,t),e}(Ett),Mtt=ktt,Ttt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.setCursor=function(t){this.context.view.getCanvas().setCursor(t)},e.prototype.default=function(){this.setCursor("default")},e.prototype.pointer=function(){this.setCursor("pointer")},e.prototype.move=function(){this.setCursor("move")},e.prototype.crosshair=function(){this.setCursor("crosshair")},e.prototype.wait=function(){this.setCursor("wait")},e.prototype.help=function(){this.setCursor("help")},e.prototype.text=function(){this.setCursor("text")},e.prototype.eResize=function(){this.setCursor("e-resize")},e.prototype.wResize=function(){this.setCursor("w-resize")},e.prototype.nResize=function(){this.setCursor("n-resize")},e.prototype.sResize=function(){this.setCursor("s-resize")},e.prototype.neResize=function(){this.setCursor("ne-resize")},e.prototype.nwResize=function(){this.setCursor("nw-resize")},e.prototype.seResize=function(){this.setCursor("se-resize")},e.prototype.swResize=function(){this.setCursor("sw-resize")},e.prototype.nsResize=function(){this.setCursor("ns-resize")},e.prototype.ewResize=function(){this.setCursor("ew-resize")},e.prototype.zoomIn=function(){this.setCursor("zoom-in")},e.prototype.zoomOut=function(){this.setCursor("zoom-out")},e}(n0),Itt=Ttt,Ptt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.filterView=function(t,e,n){var r=this;t.getScaleByField(e)&&t.filter(e,n),t.views&&t.views.length&&(0,yX.S6)(t.views,(function(t){r.filterView(t,e,n)}))},e.prototype.filter=function(){var t=D0(this.context);if(t){var e=this.context.view,n=t.component,r=n.get("field");if(L0(t)){if(r){var i=n.getItemsByState("unchecked"),o=t1(e,r),a=i.map((function(t){return t.name}));a.length?this.filterView(e,r,(function(t){var e=o.getText(t);return!a.includes(e)})):this.filterView(e,r,null),e.render(!0)}}else if(N0(t)){var s=n.getValue(),l=(0,mX.CR)(s,2),c=l[0],u=l[1];this.filterView(e,r,(function(t){return t>=c&&t<=u})),e.render(!0)}}},e}(n0),Ott=Ptt;function Att(t,e,n,r){var i=Math.min(n[e],r[e]),o=Math.max(n[e],r[e]),a=(0,mX.CR)(t.range,2),s=a[0],l=a[1];if(i<s&&(i=s),o>l&&(o=l),i===l&&o===l)return null;var c=t.invert(i),u=t.invert(o);if(t.isCategory){var h=t.values.indexOf(c),p=t.values.indexOf(u),d=t.values.slice(h,p+1);return function(t){return d.includes(t)}}return function(t){return t>=c&&t<=u}}!function(t){t.FILTER="brush-filter-processing",t.RESET="brush-filter-reset",t.BEFORE_FILTER="brush-filter:beforefilter",t.AFTER_FILTER="brush-filter:afterfilter",t.BEFORE_RESET="brush-filter:beforereset",t.AFTER_RESET="brush-filter:afterreset"}(dtt||(dtt={}));var Dtt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dims=["x","y"],e.startPoint=null,e.isStarted=!1,e}return(0,mX.ZT)(e,t),e.prototype.hasDim=function(t){return this.dims.includes(t)},e.prototype.start=function(){var t=this.context;this.isStarted=!0,this.startPoint=t.getCurrentPoint()},e.prototype.filter=function(){var t,e;if(F0(this.context)){var n=this.context.event.target.getCanvasBBox();t={x:n.x,y:n.y},e={x:n.maxX,y:n.maxY}}else{if(!this.isStarted)return;t=this.startPoint,e=this.context.getCurrentPoint()}if(!(Math.abs(t.x-e.x)<5||Math.abs(t.x-e.y)<5)){var r=this.context,i=r.view,o={view:i,event:r.event,dims:this.dims};i.emit(dtt.BEFORE_FILTER,X1.fromData(i,dtt.BEFORE_FILTER,o));var a=i.getCoordinate(),s=a.invert(e),l=a.invert(t);if(this.hasDim("x")){var c=i.getXScale(),u=Att(c,"x",s,l);this.filterView(i,c.field,u)}if(this.hasDim("y")){var h=i.getYScales()[0];u=Att(h,"y",s,l);this.filterView(i,h.field,u)}this.reRender(i,{source:dtt.FILTER}),i.emit(dtt.AFTER_FILTER,X1.fromData(i,dtt.AFTER_FILTER,o))}},e.prototype.end=function(){this.isStarted=!1},e.prototype.reset=function(){var t=this.context.view;if(t.emit(dtt.BEFORE_RESET,X1.fromData(t,dtt.BEFORE_RESET,{})),this.isStarted=!1,this.hasDim("x")){var e=t.getXScale();this.filterView(t,e.field,null)}if(this.hasDim("y")){var n=t.getYScales()[0];this.filterView(t,n.field,null)}this.reRender(t,{source:dtt.RESET}),t.emit(dtt.AFTER_RESET,X1.fromData(t,dtt.AFTER_RESET,{}))},e.prototype.filterView=function(t,e,n){t.filter(e,n)},e.prototype.reRender=function(t,e){t.render(!0,e)},e}(n0),Rtt=Dtt,Ltt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.filterView=function(t,e,n){var r=K0(t);(0,yX.S6)(r,(function(t){t.filter(e,n)}))},e.prototype.reRender=function(t){var e=K0(t);(0,yX.S6)(e,(function(t){t.render(!0)}))},e}(Rtt),Ntt=Ltt,Ftt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.filter=function(){var t=D0(this.context),e=this.context.view,n=U0(e);if(F0(this.context)){var r=B0(this.context,10);r&&(0,yX.S6)(n,(function(t){r.includes(t)?t.show():t.hide()}))}else if(t){var i=t.component,o=i.get("field");if(L0(t)){if(o){var a=i.getItemsByState("unchecked"),s=t1(e,o),l=a.map((function(t){return t.name}));(0,yX.S6)(n,(function(t){var e=H0(t,o),n=s.getText(e);l.indexOf(n)>=0?t.hide():t.show()}))}}else if(N0(t)){var c=i.getValue(),u=(0,mX.CR)(c,2),h=u[0],p=u[1];(0,yX.S6)(n,(function(t){var e=H0(t,o);e>=h&&e<=p?t.show():t.hide()}))}}},e.prototype.clear=function(){var t=U0(this.context.view);(0,yX.S6)(t,(function(t){t.show()}))},e.prototype.reset=function(){this.clear()},e}(n0),ztt=Ftt,Btt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.byRecord=!1,e}return(0,mX.ZT)(e,t),e.prototype.filter=function(){F0(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},e.prototype.filterByRecord=function(){var t=this.context.view,e=B0(this.context,10);if(e){var n=t.getXScale().field,r=t.getYScales()[0].field,i=e.map((function(t){return t.getModel().data})),o=K0(t);(0,yX.S6)(o,(function(t){var e=U0(t);(0,yX.S6)(e,(function(t){var e=t.getModel().data;Q0(i,e,n,r)?t.show():t.hide()}))}))}},e.prototype.filterByBBox=function(){var t=this,e=K0(this.context.view);(0,yX.S6)(e,(function(e){var n=$0(t.context,e,10),r=U0(e);n&&(0,yX.S6)(r,(function(t){n.includes(t)?t.show():t.hide()}))}))},e.prototype.reset=function(){var t=K0(this.context.view);(0,yX.S6)(t,(function(t){var e=U0(t);(0,yX.S6)(e,(function(t){t.show()}))}))},e}(n0),$tt=Btt,jtt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buttonGroup=null,e.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},e}return(0,mX.ZT)(e,t),e.prototype.getButtonCfg=function(){return(0,yX.b$)(this.buttonCfg,this.cfg)},e.prototype.drawButton=function(){var t=this.getButtonCfg(),e=this.context.view.foregroundGroup.addGroup({name:t.name}),n=e.addShape({type:"text",name:"button-text",attrs:(0,mX.pi)({text:t.text},t.textStyle)}).getBBox(),r=j1(t.padding),i=e.addShape({type:"rect",name:"button-rect",attrs:(0,mX.pi)({x:n.x-r[3],y:n.y-r[0],width:n.width+r[1]+r[3],height:n.height+r[0]+r[2]},t.style)});i.toBack(),e.on("mouseenter",(function(){i.attr(t.activeStyle)})),e.on("mouseleave",(function(){i.attr(t.style)})),this.buttonGroup=e},e.prototype.resetPosition=function(){var t=this.context.view.getCoordinate().convert({x:1,y:1}),e=this.buttonGroup,n=e.getBBox(),r=vZ.vs(null,[["t",t.x-n.width-10,t.y+n.height+5]]);e.setMatrix(r)},e.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},e.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},e.prototype.destroy=function(){var e=this.buttonGroup;e&&e.remove(),t.prototype.destroy.call(this)},e}(n0),Utt=jtt,Vtt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.starting=!1,e.dragStart=!1,e}return(0,mX.ZT)(e,t),e.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},e.prototype.drag=function(){if(this.startPoint){var t=this.context.getCurrentPoint(),e=this.context.view,n=this.context.event;this.dragStart?e.emit("drag",{target:n.target,x:n.x,y:n.y}):Y0(t,this.startPoint)>4&&(e.emit("dragstart",{target:n.target,x:n.x,y:n.y}),this.dragStart=!0)}},e.prototype.end=function(){if(this.dragStart){var t=this.context.view,e=this.context.event;t.emit("dragend",{target:e.target,x:e.x,y:e.y})}this.starting=!1,this.dragStart=!1},e}(n0),Htt=Vtt,Gtt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.starting=!1,e.isMoving=!1,e.startPoint=null,e.startMatrix=null,e}return(0,mX.ZT)(e,t),e.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},e.prototype.move=function(){if(this.starting){var t=this.startPoint,e=this.context.getCurrentPoint();if(Y0(t,e)>5&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var n=this.context.view,r=vZ.vs(this.startMatrix,[["t",e.x-t.x,e.y-t.y]]);n.backgroundGroup.setMatrix(r),n.foregroundGroup.setMatrix(r),n.middleGroup.setMatrix(r)}}},e.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},e.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var t=this.context.view;t.backgroundGroup.resetMatrix(),t.foregroundGroup.resetMatrix(),t.middleGroup.resetMatrix(),this.isMoving=!1},e}(n0),Wtt=Gtt,Xtt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dims=["x","y"],e.cfgFields=["dims"],e.cacheScaleDefs={},e}return(0,mX.ZT)(e,t),e.prototype.hasDim=function(t){return this.dims.includes(t)},e.prototype.getScale=function(t){var e=this.context.view;return"x"===t?e.getXScale():e.getYScales()[0]},e.prototype.resetDim=function(t){var e=this.context.view;if(this.hasDim(t)&&this.cacheScaleDefs[t]){var n=this.getScale(t);e.scale(n.field,this.cacheScaleDefs[t]),this.cacheScaleDefs[t]=null}},e.prototype.reset=function(){this.resetDim("x"),this.resetDim("y"),this.context.view.render(!0)},e}(n0),qtt=Xtt,Ytt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startPoint=null,e.starting=!1,e.startCache={},e}return(0,mX.ZT)(e,t),e.prototype.start=function(){var t=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0;var e=this.dims;(0,yX.S6)(e,(function(e){var n=t.getScale(e),r=n.min,i=n.max,o=n.values;t.startCache[e]={min:r,max:i,values:o}}))},e.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},e.prototype.translate=function(){var t=this;if(this.starting){var e=this.startPoint,n=this.context.view.getCoordinate(),r=this.context.getCurrentPoint(),i=n.invert(e),o=n.invert(r),a=o.x-i.x,s=o.y-i.y,l=this.context.view,c=this.dims;(0,yX.S6)(c,(function(e){t.translateDim(e,{x:-1*a,y:-1*s})})),l.render(!0)}},e.prototype.translateDim=function(t,e){if(this.hasDim(t)){var n=this.getScale(t);n.isLinear&&this.translateLinear(t,n,e)}},e.prototype.translateLinear=function(t,e,n){var r=this.context.view,i=this.startCache[t],o=i.min,a=i.max,s=a-o,l=n[t]*s;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:e.nice,min:o,max:a}),r.scale(e.field,{nice:!1,min:o+l,max:a+l})},e.prototype.reset=function(){t.prototype.reset.call(this),this.startPoint=null,this.starting=!1},e}(qtt),Ztt=Ytt,Ktt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.zoomRatio=.05,e}return(0,mX.ZT)(e,t),e.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},e.prototype.zoom=function(t){var e=this,n=this.dims;(0,yX.S6)(n,(function(n){e.zoomDim(n,t)})),this.context.view.render(!0)},e.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},e.prototype.zoomDim=function(t,e){if(this.hasDim(t)){var n=this.getScale(t);n.isLinear&&this.zoomLinear(t,n,e)}},e.prototype.zoomLinear=function(t,e,n){var r=this.context.view;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:e.nice,min:e.min,max:e.max});var i=this.cacheScaleDefs[t],o=i.max-i.min,a=e.min,s=e.max,l=n*o,c=a-l,u=s+l,h=(u-c)/o;u>c&&h<100&&h>.01&&r.scale(e.field,{nice:!1,min:a-l,max:s+l})},e}(qtt),Jtt=Ktt;var Qtt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.scroll=function(t){var e=this.context,n=e.view,r=e.event;if(n.getOptions().scrollbar){var i=(null===t||void 0===t?void 0:t.wheelDelta)||1,o=n.getController("scrollbar"),a=n.getXScale(),s=n.getOptions().data,l=(0,yX.dp)((0,yX.I)(s,a.field)),c=(0,yX.dp)(a.values),u=o.getValue(),h=Math.floor((l-c)*u)+(function(t){return t.gEvent.originalEvent.deltaY>0}(r)?i:-i),p=i/(l-c)/1e4,d=(0,yX.uZ)(h/(l-c)+p,0,1);o.setValue(d)}},e}(n0),tet=Qtt,eet=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.show=function(){var t=this.context,e=D0(t).axis.cfg.title,n=e.description,r=e.text,i=e.descriptionTooltipStyle,o=t.event,a=o.x,s=o.y;this.tooltip||this.renderTooltip(),this.tooltip.update({title:r||"",customContent:function(){return'\n          <div class="'.concat(zJ,'" style={').concat(i,'}>\n            <div class="').concat(BJ,'">\n              \u5b57\u6bb5\u8bf4\u660e\uff1a').concat(n,"\n            </div>\n          </div>\n        ")},x:a,y:s}),this.tooltip.show()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},e.prototype.hide=function(){this.tooltip&&this.tooltip.hide()},e.prototype.renderTooltip=function(){var t,e=this.context.view.canvas,n={start:{x:0,y:0},end:{x:e.get("width"),y:e.get("height")}},r=new bQ({parent:e.get("el").parentNode,region:n,visible:!1,containerId:"aixs-description-tooltip",domStyles:(0,mX.pi)({},(0,yX.b$)({},(t={},t[zJ]={"max-width":"50%",padding:"10px","line-height":"15px","font-size":"12px",color:"rgba(0, 0, 0, .65)"},t[BJ]={"word-break":"break-all","margin-bottom":"3px"},t)))});r.init(),r.setCapture(!1),this.tooltip=r},e}(n0),net=eet;function ret(t){return t.isInPlot()}function iet(t){return t.gEvent.preventDefault(),t.gEvent.originalEvent.deltaY>0}!function(t,e){P1[(0,yX.vl)(t)]=I1(e)}("dark",m1(w3)),AX("canvas",h),AX("svg",d),t2("Polygon",H6),t2("Interval",N6),t2("Schema",W6),t2("Path",v6),t2("Point",U6),t2("Line",z6),t2("Area",S6),t2("Edge",E6),t2("Heatmap",M6),t2("Violin",q6),x2("base",V2),x2("interval",a8),x2("pie",h8),x2("polar",c8),_2("overlap",(function(t,e,n,r){var i=new y8;(0,yX.S6)(e,(function(t){for(var e=t.find((function(t){return"text"===t.get("type")})),n=e.attr(),r=n.x,o=n.y,a=!1,s=0;s<=8;s++){var l=v8(e,r,o,s);if(i.hasGap(l)){i.fillGap(l),a=!0;break}}a||t.remove(!0)})),i.destroy()})),_2("distribute",(function(t,e,n,r){if(t.length&&e.length){var i=t[0]?t[0].offset:0,o=e[0].get("coordinate"),a=o.getRadius(),s=o.getCenter();if(i>0){var l=2*(a+i)+28,c={start:o.start,end:o.end},u=[[],[]];t.forEach((function(t){t&&("right"===t.textAlign?u[0].push(t):u[1].push(t))})),u.forEach((function(t,n){var r=l/14;t.length>r&&(t.sort((function(t,e){return e["..percent"]-t["..percent"]})),t.splice(r,t.length-r)),t.sort((function(t,e){return t.y-e.y})),function(t,e,n,r,i,o){var a,s,l,c=!0,u=r.start,h=r.end,p=Math.min(u.y,h.y),d=Math.abs(u.y-h.y),f=0,g=Number.MIN_VALUE,m=e.map((function(t){return t.y>f&&(f=t.y),t.y<g&&(g=t.y),{size:n,targets:[t.y-p]}}));for(g-=p,f-p>d&&(d=f-p);c;)for(m.forEach((function(t){var e=(Math.min.apply(g,t.targets)+Math.max.apply(g,t.targets))/2;t.pos=Math.min(Math.max(g,e-t.size/2),d-t.size)})),c=!1,l=m.length;l--;)if(l>0){var y=m[l-1],v=m[l];y.pos+y.size>v.pos&&(y.size+=v.size,y.targets=y.targets.concat(v.targets),y.pos+y.size>d&&(y.pos=d-y.size),m.splice(l,1),c=!0)}l=0,m.forEach((function(t){var r=p+n/2;t.targets.forEach((function(){e[l].y=t.pos+r,r+=n,l++}))}));var x={};try{for(var _=(0,mX.XA)(t),b=_.next();!b.done;b=_.next()){var w=b.value;x[w.get("id")]=w}}catch(S){a={error:S}}finally{try{b&&!b.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}e.forEach((function(t){var e=t.r*t.r,n=Math.pow(Math.abs(t.y-i.y),2);if(e<n)t.x=i.x;else{var r=Math.sqrt(e-n);t.x=o?i.x+r:i.x-r}var a=x[t.id];a.attr("x",t.x),a.attr("y",t.y);var s=(0,yX.sE)(a.getChildren(),(function(t){return"text"===t.get("type")}));s&&(s.attr("y",t.y),s.attr("x",t.x))}))}(e,t,14,c,s,n)}))}(0,yX.S6)(t,(function(t){if(t&&t.labelLine){var e=t.offset,n=t.angle,r=CQ(s.x,s.y,a,n),i=CQ(s.x,s.y,a+e/2,n),o=t.x+(0,yX.U2)(t,"offsetX",0),l=t.y+(0,yX.U2)(t,"offsetY",0),c={x:o-4*Math.cos(n),y:l-4*Math.sin(n)};(0,yX.Kn)(t.labelLine)||(t.labelLine={}),t.labelLine.path=["M ".concat(r.x),"".concat(r.y," Q").concat(i.x),"".concat(i.y," ").concat(c.x),c.y].join(",")}}))}})),_2("fixed-overlap",(function(t,e,n,r){var i=new y8;(0,yX.S6)(e,(function(t){var e=t.find((function(t){return"text"===t.get("type")}));(function(t,e,n){void 0===n&&(n=m8);var r,i=t.attr(),o=i.x,a=i.y,s=t.getCanvasBBox(),l=Math.sqrt(s.width*s.width+s.height*s.height),c=1,u=0,h=0,p=function(t){var e=.1*t;return[e*Math.cos(e),e*Math.sin(e)]};if(e.hasGap(s))return e.fillGap(s),!0;for(var d=!1,f=0,g={};Math.min(Math.abs(u),Math.abs(h))<l&&f<n;)if(u=~~(r=p(c+=-1))[0],h=~~r[1],(u||h)&&!g["".concat(u,"-").concat(h)]&&(t.attr({x:o+u,y:a+h}),u+h<0&&t.attr("textAlign","right"),f++,e.hasGap(t.getCanvasBBox()))){e.fillGap(t.getCanvasBBox()),d=!0,g["".concat(u,"-").concat(h)]=!0;break}return d})(e,i)||t.remove(!0)})),i.destroy()})),_2("hide-overlap",(function(t,e,n,r){return(0,mX.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return(0,mX.Jh)(this,(function(l){switch(l.label){case 0:return n=e.map((function(e,n){return(0,mX.pi)((0,mX.pi)({},N2(e,t[n],(0,yX.U2)(t[n],"background.padding"))),{visible:!0})})),r=JSON.stringify(n),i=function(t){return I8.set(r,t),(0,yX.S6)(t,(function(t,n){var r=t.visible,i=e[n];r?null===i||void 0===i||i.show():null===i||void 0===i||i.hide()})),t},I8.get(r)?(i(I8.get(r)),[3,7]):[3,1];case 1:if(!P8)return[3,6];l.label=2;case 2:return l.trys.push([2,4,,5]),o=JSON.stringify({type:"hide-overlap",items:n}),[4,P8.post(o,(function(){return i(T8(n))}))];case 3:return a=l.sent(),i(Array.isArray(a.data)?a.data:[]),[3,5];case 4:return s=l.sent(),console.error(s),i(T8(n)),[3,5];case 5:return[3,7];case 6:i(T8(n)),l.label=7;case 7:return[2]}}))}))})),_2("limit-in-shape",(function(t,e,n,r){(0,yX.S6)(e,(function(t,e){var r=t.getCanvasBBox(),i=n[e].getBBox();(r.minX<i.minX||r.minY<i.minY||r.maxX>i.maxX||r.maxY>i.maxY)&&t.remove(!0)}))})),_2("limit-in-canvas",(function(t,e,n,r){(0,yX.S6)(e,(function(t){var e=r.minX,n=r.minY,i=r.maxX,o=r.maxY,a=t.getCanvasBBox(),s=a.minX,l=a.minY,c=a.maxX,u=a.maxY,h=a.x,p=a.y,d=a.width,f=a.height,g=h,m=p;(s<e||c<e)&&(g=e),(l<n||u<n)&&(m=n),s>i?g=i-d:c>i&&(g-=c-i),l>o?m=o-f:u>o&&(m-=u-o),g===h&&m===p||D2(t,g-h,m-p)}))})),_2("limit-in-plot",(function(t,e,n,r,i){if(!(e.length<=0)){var o=(null===i||void 0===i?void 0:i.direction)||["top","right","bottom","left"],a=(null===i||void 0===i?void 0:i.action)||"translate",s=(null===i||void 0===i?void 0:i.margin)||0,l=e[0].get("coordinate");if(l){var c=function(t,e){void 0===e&&(e=0);var n=t.start,r=t.end,i=t.getWidth(),o=t.getHeight(),a=Math.min(n.x,r.x),s=Math.min(n.y,r.y);return AQ.fromRange(a-e,s-e,a+i+e,s+o+e)}(l,s),u=c.minX,h=c.minY,p=c.maxX,d=c.maxY;(0,yX.S6)(e,(function(t){var e=t.getCanvasBBox(),n=e.minX,r=e.minY,i=e.maxX,s=e.maxY,l=e.x,c=e.y,f=e.width,g=e.height,m=l,y=c;if(o.indexOf("left")>=0&&(n<u||i<u)&&(m=u),o.indexOf("top")>=0&&(r<h||s<h)&&(y=h),o.indexOf("right")>=0&&(n>p?m=p-f:i>p&&(m-=i-p)),o.indexOf("bottom")>=0&&(r>d?y=d-g:s>d&&(y-=s-d)),m!==l||y!==c){var v=m-l;if("translate"===a)D2(t,v,y-c);else if("ellipsis"===a){var x=t.findAll((function(t){return"text"===t.get("type")}));x.forEach((function(t){var e=(0,yX.ei)(t.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),n=t.getCanvasBBox(),r=function(t,e,n){var r,i=B8("...",n);r=(0,yX.HD)(t)?t:(0,yX.BB)(t);var o,a,s=e,l=[];if(B8(t,n)<=e)return t;for(;o=r.substr(0,16),!((a=B8(o,n))+i>s&&a>s);)if(l.push(o),s-=a,!(r=r.substr(16)))return l.join("");for(;o=r.substr(0,1),!((a=B8(o,n))+i>s);)if(l.push(o),s-=a,!(r=r.substr(1)))return l.join("");return"".concat(l.join(""),"...")}(t.attr("text"),n.width-Math.abs(v),e);t.attr("text",r)}))}else t.hide()}}))}}})),_2("pie-outer",(function(t,e,n,r){var i,o,a=(0,yX.hX)(t,(function(t){return!(0,yX.UM)(t)})),s=e[0]&&e[0].get("coordinate");if(s){var l=s.getCenter(),c=s.getRadius(),u={};try{for(var h=(0,mX.XA)(e),p=h.next();!p.done;p=h.next()){var d=p.value;u[d.get("id")]=d}}catch(S){i={error:S}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}var f=(0,yX.U2)(a[0],"labelHeight",14),g=(0,yX.U2)(a[0],"offset",0);if(!(g<=0)){var m="right",y=(0,yX.vM)(a,(function(t){return t.x<l.x?"left":m})),v=s.start,x=s.end,_=Math.min(2*(c+g+f),s.getHeight()),b=_/2,w={minX:v.x,maxX:x.x,minY:l.y-b,maxY:l.y+b};(0,yX.S6)(y,(function(t,e){var n=Math.floor(_/f);t.length>n&&(t.sort((function(t,e){return e.percent-t.percent})),(0,yX.S6)(t,(function(t,e){e+1>n&&(u[t.id].set("visible",!1),t.invisible=!0)}))),p8(t,f,w)})),(0,yX.S6)(y,(function(t,e){(0,yX.S6)(t,(function(t){var n=e===m,r=u[t.id].getChildByIndex(0);if(r){var i=c+g,o=t.y-l.y,a=Math.pow(i,2),h=Math.pow(o,2),p=a-h>0?a-h:0,d=Math.sqrt(p),f=Math.abs(Math.cos(t.angle)*i);t.x=n?l.x+Math.max(d,f):l.x-Math.max(d,f)}r&&(r.attr("y",t.y),r.attr("x",t.x)),function(t,e){var n=e.getCenter(),r=e.getRadius();if(t&&t.labelLine){var i=t.angle,o=t.offset,a=CQ(n.x,n.y,r,i),s=t.x+(0,yX.U2)(t,"offsetX",0)*(Math.cos(i)>0?1:-1),l=t.y+(0,yX.U2)(t,"offsetY",0)*(Math.sin(i)>0?1:-1),c={x:s-Math.cos(i)*d8,y:l-Math.sin(i)*d8},u=t.labelLine.smooth,h=[],p=c.x-n.x,d=c.y-n.y,f=Math.atan(d/p);if(p<0&&(f+=Math.PI),!1===u){(0,yX.Kn)(t.labelLine)||(t.labelLine={});var g=0;(i<0&&i>-Math.PI/2||i>1.5*Math.PI)&&c.y>a.y&&(g=1),i>=0&&i<Math.PI/2&&c.y>a.y&&(g=1),i>=Math.PI/2&&i<Math.PI&&a.y>c.y&&(g=1),(i<-Math.PI/2||i>=Math.PI&&i<1.5*Math.PI)&&a.y>c.y&&(g=1);var m=o/2>4?4:Math.max(o/2-1,0),y=CQ(n.x,n.y,r+m,i),v=CQ(n.x,n.y,r+o/2,f);h.push("M ".concat(a.x," ").concat(a.y)),h.push("L ".concat(y.x," ").concat(y.y)),h.push("A ".concat(n.x," ").concat(n.y," 0 ").concat(0," ").concat(g," ").concat(v.x," ").concat(v.y)),h.push("L ".concat(c.x," ").concat(c.y))}else{y=CQ(n.x,n.y,r+(o/2>4?4:Math.max(o/2-1,0)),i);var x=a.x<n.x?1:-1;h.push("M ".concat(c.x," ").concat(c.y));var _=(a.y-n.y)/(a.x-n.x),b=(c.y-n.y)/(c.x-n.x);Math.abs(_-b)>Math.pow(Math.E,-16)&&h.push.apply(h,["C",c.x+4*x,c.y,2*y.x-a.x,2*y.y-a.y,a.x,a.y]),h.push("L ".concat(a.x," ").concat(a.y))}t.labelLine.path=h.join(" ")}}(t,s)}))}))}}})),_2("adjust-color",(function(t,e,n){if(0!==n.length){var r=n[0].get("element").geometry.theme,i=r.labels||{},o=i.fillColorLight,a=i.fillColorDark;n.forEach((function(t,n){var i=e[n].find((function(t){return"text"===t.get("type")})),s=AQ.fromObject(t.getBBox()),l=AQ.fromObject(i.getCanvasBBox()),c=!s.contains(l),u=function(t){var e=yq.toRGB(t).toUpperCase();if(A8[e])return A8[e];var n=(0,mX.CR)(yq.rgb2arr(e),3);return(299*n[0]+587*n[1]+114*n[2])/1e3<128}(t.attr("fill"));c?i.attr(r.overflowLabels.style):u?o&&i.attr("fill",o):a&&i.attr("fill",a)}))}})),_2("interval-adjust-position",(function(t,e,n){var r;if(0!==n.length){var i=null===(r=n[0])||void 0===r?void 0:r.get("element"),o=null===i||void 0===i?void 0:i.geometry;if(o&&"interval"===o.type)D8(o,e,n)&&n.forEach((function(t,n){var r=e[n];!function(t,e,n){var r=t.coordinate,i=AQ.fromObject(n.getBBox()),o=L2(e);r.isTransposed?o.attr({x:i.minX+i.width/2,textAlign:"center"}):o.attr({y:i.minY+i.height/2,textBaseline:"middle"})}(o,r,t)}))}})),_2("interval-hide-overlap",(function(t,e,n){var r;if(0!==n.length){var i=null===(r=n[0])||void 0===r?void 0:r.get("element"),o=null===i||void 0===i?void 0:i.geometry;if(o&&"interval"===o.type){var a,s=function(t){var e=[],n=Math.max(Math.floor(t.length/500),1);return(0,yX.S6)(t,(function(t,r){r%n===0?e.push(t):t.set("visible",!1)})),e}(e),l=(0,mX.CR)(o.getXYFields(),1)[0],c=[],u=[],h=(0,yX.vM)(s,(function(t){return t.get("data")[l]})),p=(0,yX.jj)((0,yX.UI)(s,(function(t){return t.get("data")[l]})));s.forEach((function(t){t.set("visible",!0)}));var d=function(t){t&&(t.length&&u.push(t.pop()),u.push.apply(u,(0,mX.ev)([],(0,mX.CR)(t),!1)))};for((0,yX.dp)(p)>0&&(a=p.shift(),d(h[a])),(0,yX.dp)(p)>0&&(a=p.pop(),d(h[a])),(0,yX.S6)(p.reverse(),(function(t){d(h[t])}));u.length>0;){var f=u.shift();f.get("visible")&&(F2(f,c)?f.set("visible",!1):c.push(f))}}}})),_2("point-adjust-position",(function(t,e,n,r,i){var o,a;if(0!==n.length){var s=null===(o=n[0])||void 0===o?void 0:o.get("element"),l=null===s||void 0===s?void 0:s.geometry;if(l&&"point"===l.type){var c=(0,mX.CR)(l.getXYFields(),2),u=c[0],h=c[1],p=(0,yX.vM)(e,(function(t){return t.get("data")[u]})),d=[],f=i&&i.offset||(null===(a=t[0])||void 0===a?void 0:a.offset)||12;(0,yX.UI)((0,yX.XP)(p).reverse(),(function(t){for(var e=function(t,e){var n=t.getXYFields()[1],r=[],i=e.sort((function(t,e){return t.get("data")[n]-t.get("data")[n]}));return i.length>0&&r.push(i.shift()),i.length>0&&r.push(i.pop()),r.push.apply(r,(0,mX.ev)([],(0,mX.CR)(i),!1)),r}(l,p[t]);e.length;){var n=e.shift(),r=L2(n);if(R8(d,n,(function(t,e){return t.get("data")[u]===e.get("data")[u]&&t.get("data")[h]===e.get("data")[h]})))r.set("visible",!1);else{var i=!1;L8(d,n)&&(r.attr("y",r.attr("y")+2*f),i=L8(d,n)),i?r.set("visible",!1):d.push(n)}}}))}}})),_2("pie-spider",(function(t,e,n,r){var i,o,a=e[0]&&e[0].get("coordinate");if(a){var s=a.getCenter(),l=a.getRadius(),c={};try{for(var u=(0,mX.XA)(e),h=u.next();!h.done;h=u.next()){var p=h.value;c[p.get("id")]=p}}catch(S){i={error:S}}finally{try{h&&!h.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}var d=(0,yX.U2)(t[0],"labelHeight",14),f=Math.max((0,yX.U2)(t[0],"offset",0),f8);(0,yX.S6)(t,(function(t){if(t&&(0,yX.U2)(c,[t.id])){var e=t.x>s.x||t.x===s.x&&t.y>s.y,n=(0,yX.UM)(t.offsetX)?4:t.offsetX,r=CQ(s.x,s.y,l+f8,t.angle),i=f+n;t.x=s.x+(e?1:-1)*(l+i),t.y=r.y}}));var g=a.start,m=a.end,y="right",v=(0,yX.vM)(t,(function(t){return t.x<s.x?"left":y})),x=2*(l+f)+d;(0,yX.S6)(v,(function(t){var e=t.length*d;e>x&&(x=Math.min(e,Math.abs(g.y-m.y)))}));var _={minX:g.x,maxX:m.x,minY:s.y-x/2,maxY:s.y+x/2};(0,yX.S6)(v,(function(t,e){var n=x/d;t.length>n&&(t.sort((function(t,e){return e.percent-t.percent})),(0,yX.S6)(t,(function(t,e){e>n&&(c[t.id].set("visible",!1),t.invisible=!0)}))),p8(t,d,_)}));var b=_.minY,w=_.maxY;(0,yX.S6)(v,(function(t,e){var n=e===y;(0,yX.S6)(t,(function(t){var e=(0,yX.U2)(c,t&&[t.id]);if(e)if(t.y<b||t.y>w)e.set("visible",!1);else{var r=e.getChildByIndex(0),i=r.getCanvasBBox(),o=n?i.x:i.maxX,s=i.y+i.height/2;D2(r,t.x-o,t.y-s),t.labelLine&&function(t,e,n){var r,i=e.getCenter(),o=e.getRadius(),a={x:t.x-(n?g8:-g8),y:t.y},s=CQ(i.x,i.y,o+f8,t.angle),l={x:a.x,y:a.y},c={x:s.x,y:s.y},u=CQ(i.x,i.y,o,t.angle);if(a.y!==s.y){var h=n?4:-4;l.y=a.y,t.angle<0&&t.angle>=-Math.PI/2&&(l.x=Math.max(s.x,a.x-h),a.y<s.y?c.y=l.y:(c.y=s.y,c.x=Math.max(c.x,l.x-h))),t.angle>0&&t.angle<Math.PI/2&&(l.x=Math.max(s.x,a.x-h),a.y>s.y?c.y=l.y:(c.y=s.y,c.x=Math.max(c.x,l.x-h))),t.angle>Math.PI/2&&(l.x=Math.min(s.x,a.x-h),a.y>s.y?c.y=l.y:(c.y=s.y,c.x=Math.min(c.x,l.x-h))),t.angle<-Math.PI/2&&(l.x=Math.min(s.x,a.x-h),a.y<s.y?c.y=l.y:(c.y=s.y,c.x=Math.min(c.x,l.x-h)))}r=["M ".concat(a.x,",").concat(a.y),"L ".concat(l.x,",").concat(l.y),"L ".concat(c.x,",").concat(c.y),"L ".concat(s.x,",").concat(s.y),"L ".concat(u.x,",").concat(u.y)].join(" "),t.labelLine=(0,yX.b$)({},t.labelLine,{path:r})}(t,a,n)}}))}))}})),_2("path-adjust-position",(function(t,e,n,r,i){var o,a;if(0!==n.length){var s=null===(o=n[0])||void 0===o?void 0:o.get("element"),l=null===s||void 0===s?void 0:s.geometry;if(l&&!(["path","line","area"].indexOf(l.type)<0)){var c=(0,mX.CR)(l.getXYFields(),2),u=c[0],h=c[1],p=(0,yX.vM)(e,(function(t){return t.get("data")[u]})),d=[],f=i&&i.offset||(null===(a=t[0])||void 0===a?void 0:a.offset)||12;(0,yX.UI)((0,yX.XP)(p).reverse(),(function(t){for(var e=function(t,e){var n=t.getXYFields()[1],r=[],i=e.sort((function(t,e){return t.get("data")[n]-t.get("data")[n]}));return i.length>0&&r.push(i.shift()),i.length>0&&r.push(i.pop()),r.push.apply(r,(0,mX.ev)([],(0,mX.CR)(i),!1)),r}(l,p[t]);e.length;){var n=e.shift(),r=L2(n);if(N8(d,n,(function(t,e){return t.get("data")[u]===e.get("data")[u]&&t.get("data")[h]===e.get("data")[h]})))r.set("visible",!1);else{var i=!1;F8(d,n)&&(r.attr("y",r.attr("y")+2*f),i=F8(d,n)),i?r.set("visible",!1):d.push(n)}}}))}}})),l2("fade-in",(function(t,e,n){var r={fillOpacity:(0,yX.UM)(t.attr("fillOpacity"))?1:t.attr("fillOpacity"),strokeOpacity:(0,yX.UM)(t.attr("strokeOpacity"))?1:t.attr("strokeOpacity"),opacity:(0,yX.UM)(t.attr("opacity"))?1:t.attr("opacity")};t.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),t.animate(r,e)})),l2("fade-out",(function(t,e,n){var r=e.easing,i=e.duration,o=e.delay;t.animate({fillOpacity:0,strokeOpacity:0,opacity:0},i,r,(function(){t.remove(!0)}),o)})),l2("grow-in-x",(function(t,e,n){$8(t,e,n.coordinate,n.minYPoint,"x")})),l2("grow-in-xy",(function(t,e,n){$8(t,e,n.coordinate,n.minYPoint,"xy")})),l2("grow-in-y",(function(t,e,n){$8(t,e,n.coordinate,n.minYPoint,"y")})),l2("scale-in-x",(function(t,e,n){var r=t.getBBox(),i=t.get("origin").mappingData.points,o=i[0].y-i[1].y>0?r.maxX:r.minX,a=(r.minY+r.maxY)/2;t.applyToMatrix([o,a,1]);var s=vZ.vs(t.getMatrix(),[["t",-o,-a],["s",.01,1],["t",o,a]]);t.setMatrix(s),t.animate({matrix:vZ.vs(t.getMatrix(),[["t",-o,-a],["s",100,1],["t",o,a]])},e)})),l2("scale-in-y",(function(t,e,n){var r=t.getBBox(),i=t.get("origin").mappingData,o=(r.minX+r.maxX)/2,a=i.points,s=a[0].y-a[1].y<=0?r.maxY:r.minY;t.applyToMatrix([o,s,1]);var l=vZ.vs(t.getMatrix(),[["t",-o,-s],["s",1,.01],["t",o,s]]);t.setMatrix(l),t.animate({matrix:vZ.vs(t.getMatrix(),[["t",-o,-s],["s",1,100],["t",o,s]])},e)})),l2("wave-in",(function(t,e,n){var r=NQ(n.coordinate,20),i=r.type,o=r.startState,a=r.endState,s=t.setClip({type:i,attrs:o});n.toAttrs&&t.attr(n.toAttrs),s.animate(a,(0,mX.pi)((0,mX.pi)({},e),{callback:function(){t&&!t.get("destroyed")&&t.set("clipShape",null),s.remove(!0),(0,yX.mf)(e.callback)&&e.callback()}}))})),l2("zoom-in",(function(t,e,n){H8(t,e,"zoomIn")})),l2("zoom-out",(function(t,e,n){H8(t,e,"zoomOut")})),l2("position-update",(function(t,e,n){var r=n.toAttrs,i=r.x,o=r.y;delete r.x,delete r.y,t.attr(r),t.animate({x:i,y:o},e)})),l2("sector-path-update",(function(t,e,n){var r=n.toAttrs,i=n.coordinate,o=r.path||[],a=o.map((function(t){return t[0]}));if(!(o.length<1)){var s=V8(o),l=s.startAngle,c=s.endAngle,u=s.radius,h=s.innerRadius,p=V8(t.attr("path")),d=p.startAngle,f=p.endAngle,g=i.getCenter(),m=l-d,y=c-f;0!==m||0!==y?t.animate((function(t){var e=d+t*m,n=f+t*y;return(0,mX.pi)((0,mX.pi)({},r),{path:(0,yX.Xy)(a,["M","A","A","Z"])?kQ(g.x,g.y,u,e,n):EQ(g.x,g.y,u,e,n,h)})}),(0,mX.pi)((0,mX.pi)({},e),{callback:function(){t.attr("path",o),(0,yX.mf)(e.callback)&&e.callback()}})):t.attr("path",o)}})),l2("path-in",(function(t,e,n){var r=t.getTotalLength();t.attr("lineDash",[r]),t.animate((function(t){return{lineDashOffset:(1-t)*r}}),e)})),t0("rect",n9),t0("mirror",t9),t0("list",Z8),t0("matrix",J8),t0("circle",q8),t0("tree",i9),V1("axis",y9),V1("legend",w9),V1("tooltip",o2),V1("annotation",c9),V1("slider",C9),V1("scrollbar",k9),s0("tooltip",A9),s0("sibling-tooltip",R9),s0("ellipsis-text",N9),s0("element-active",V9),s0("element-single-active",Q9),s0("element-range-active",Y9),s0("element-highlight",l7),s0("element-highlight-by-x",p7),s0("element-highlight-by-color",u7),s0("element-single-highlight",m7),s0("element-range-highlight",f7),s0("element-sibling-highlight",f7,{effectSiblings:!0,effectByRecord:!0}),s0("element-selected",_7),s0("element-single-selected",w7),s0("element-range-selected",v7),s0("element-link-by-color",G9),s0("active-region",P9),s0("list-active",k7),s0("list-selected",R7),s0("list-highlight",A7),s0("list-unchecked",N7),s0("list-checked",$7),s0("list-focus",V7),s0("list-radio",X7),s0("legend-item-highlight",A7,{componentNames:["legend"]}),s0("axis-label-highlight",A7,{componentNames:["axis"]}),s0("axis-description",net),s0("rect-mask",ntt),s0("x-rect-mask",att,{dim:"x"}),s0("y-rect-mask",att,{dim:"y"}),s0("circle-mask",J7),s0("path-mask",utt),s0("smooth-path-mask",gtt),s0("rect-multi-mask",xtt),s0("x-rect-multi-mask",btt,{dim:"x"}),s0("y-rect-multi-mask",btt,{dim:"y"}),s0("circle-multi-mask",Stt),s0("path-multi-mask",Ett),s0("smooth-path-multi-mask",Mtt),s0("cursor",Itt),s0("data-filter",Ott),s0("brush",Rtt),s0("brush-x",Rtt,{dims:["x"]}),s0("brush-y",Rtt,{dims:["y"]}),s0("sibling-filter",Ntt),s0("sibling-x-filter",Ntt,{dims:"x"}),s0("sibling-y-filter",Ntt,{dims:"y"}),s0("element-filter",ztt),s0("element-sibling-filter",$tt),s0("element-sibling-filter-record",$tt,{byRecord:!0}),s0("view-drag",Htt),s0("view-move",Wtt),s0("scale-translate",Ztt),s0("scale-zoom",Jtt),s0("reset-button",Utt,{name:"reset-button",text:"reset"}),s0("mousewheel-scroll",tet),f1("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseleave",action:"tooltip:hide"},{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]}),f1("ellipsis-text",{start:[{trigger:"legend-item-name:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"legend-item-name:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"legend-item-name:mouseleave",action:"ellipsis-text:hide"},{trigger:"legend-item-name:touchend",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseleave",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseout",action:"ellipsis-text:hide"},{trigger:"axis-label:touchend",action:"ellipsis-text:hide"}]}),f1("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]}),f1("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]}),f1("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]}),f1("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]}),f1("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]}),f1("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]}),f1("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]}),f1("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]}),f1("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]}),f1("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(t){return!t.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(t){return!t.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]}),f1("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:ret,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:ret,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:ret,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]}),f1("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]}),f1("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:ret,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:ret,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:ret,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]}),f1("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:ret,action:"path-mask:start"},{trigger:"mousedown",isEnable:ret,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]}),f1("brush-x-multi",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"mousedown",isEnable:ret,action:["x-rect-multi-mask:start","x-rect-multi-mask:show"]},{trigger:"mask:dragstart",action:["x-rect-multi-mask:moveStart"]}],processing:[{trigger:"mousemove",isEnable:function(t){return!z0(t)},action:["x-rect-multi-mask:resize"]},{trigger:"multi-mask:change",action:"element-range-highlight:highlight"},{trigger:"mask:drag",action:["x-rect-multi-mask:move"]}],end:[{trigger:"mouseup",action:["x-rect-multi-mask:end"]},{trigger:"mask:dragend",action:["x-rect-multi-mask:moveEnd"]}],rollback:[{trigger:"dblclick",action:["x-rect-multi-mask:clear","cursor:crosshair"]},{trigger:"multi-mask:clearAll",action:["element-range-highlight:clear"]},{trigger:"multi-mask:clearSingle",action:["element-range-highlight:highlight"]}]}),f1("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]}),f1("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:["cursor:pointer","list-radio:show"]},{trigger:"legend-item:mouseleave",action:["cursor:default","list-radio:hide"]}],start:[{trigger:"legend-item:click",isEnable:function(t){return!t.isInShape("legend-item-radio")},action:["legend-item-highlight:reset","element-highlight:reset","list-unchecked:toggle","data-filter:filter","list-radio:show"]},{trigger:"legend-item-radio:mouseenter",action:["list-radio:showTip"]},{trigger:"legend-item-radio:mouseleave",action:["list-radio:hideTip"]},{trigger:"legend-item-radio:click",action:["list-focus:toggle","data-filter:filter","list-radio:show"]}]}),f1("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]}),f1("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]}),f1("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["legend-item-highlight:reset","element-highlight:reset","list-unchecked:toggle","element-filter:filter"]}]}),f1("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]}),f1("axis-description",{start:[{trigger:"axis-description:mousemove",action:"axis-description:show"}],end:[{trigger:"axis-description:mouseleave",action:"axis-description:hide"}]}),f1("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(t){return iet(t.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(t){return!iet(t.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]}),f1("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]}),f1("plot-mousewheel-scroll",{start:[{trigger:"plot:mousewheel",action:"mousewheel-scroll:scroll"}]});var oet,aet=["type","alias","tickCount","tickInterval","min","max","nice","minLimit","maxLimit","range","tickMethod","base","exponent","mask","sync"];!function(t){t.ERROR="error",t.WARN="warn",t.INFO="log"}(oet||(oet={}));var set="AntV/G2Plot";function cet(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=0;return"".concat(set,": ").concat(t.replace(/%s/g,(function(){return"".concat(e[r++])})))}function uet(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e||console[t](cet.apply(void 0,(0,mX.ev)([n],r,!1)))}function het(t,e){var n={};return null!==t&&"object"===typeof t&&e.forEach((function(e){var r=t[e];void 0!==r&&(n[e]=r)})),n}function pet(t,e){if(!t)return{};var n=t.filter((function(t){var n=(0,yX.U2)(t,[e]);return(0,yX.hj)(n)&&!isNaN(n)})),r=n.every((function(t){return(0,yX.U2)(t,[e])>=0})),i=n.every((function(t){return(0,yX.U2)(t,[e])<=0}));return r?{min:0}:i?{max:0}:{}}function det(t,e,n,r,i){if(void 0===i&&(i=[]),!Array.isArray(t))return{nodes:[],links:[]};var o=[],a={},s=-1;return t.forEach((function(t){var l=t[e],c=t[n],u=t[r],h=het(t,i);a[l]||(a[l]=(0,mX.pi)({id:++s,name:l},h)),a[c]||(a[c]=(0,mX.pi)({id:++s,name:c},h)),o.push((0,mX.pi)({source:a[l].id,target:a[c].id,value:u},h))})),{nodes:Object.values(a).sort((function(t,e){return t.id-e.id})),links:o}}function fet(t,e){var n=(0,yX.hX)(t,(function(t){var n=t[e];return null===n||"number"===typeof n&&!isNaN(n)}));return uet(oet.WARN,n.length===t.length,"illegal data existed in chart data."),n}var get,met={}.toString,yet=function(t,e){return met.call(t)==="[object "+e+"]"},vet=function(t){return yet(t,"Array")},xet=function(t){if(!function(t){return"object"===typeof t&&null!==t}(t)||!yet(t,"Object"))return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},_et=function(t,e,n,r){for(var i in n=n||0,r=r||5,e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=e[i];o?xet(o)?(xet(t[i])||(t[i]={}),n<r?_et(t[i],o,n+1,r):t[i]=e[i]):vet(o)?(t[i]=[],t[i]=t[i].concat(o)):t[i]=o:t[i]=o}},bet=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)_et(t,e[r]);return t};function wet(t){if(!t)return{width:0,height:0};var e=getComputedStyle(t);return{width:(t.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10),height:(t.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)}}function Cet(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return t.reduce((function(t,e){return e(t)}),e)}}function Eet(t,e){return t.geometries.find((function(t){return t.type===e}))}function ket(t){return(0,yX.u4)(t.geometries,(function(t,e){return t.concat(e.elements)}),[])}function Met(t){return(0,yX.U2)(t,["views","length"],0)<=0?ket(t):(0,yX.u4)(t.views,(function(t,e){return t.concat(Met(e))}),ket(t))}function Tet(t){if(!(0,yX.P9)(t,"Object"))return t;var e=(0,mX.pi)({},t);return e.formatter&&!e.content&&(e.content=e.formatter),e}(0,yX.HP)((function(t,e){void 0===e&&(e={});var n=e.fontSize,r=e.fontFamily,i=void 0===r?"sans-serif":r,o=e.fontWeight,a=e.fontStyle,s=e.fontVariant,l=(get||(get=document.createElement("canvas").getContext("2d")),get);return l.font=[a,o,s,"".concat(n,"px"),i].join(" "),l.measureText((0,yX.HD)(t)?t:"").width}),(function(t,e){return void 0===e&&(e={}),(0,mX.ev)([t],(0,yX.VO)(e),!0).join("")}));function Iet(t){return"number"===typeof t&&!isNaN(t)}function Pet(t){if((0,yX.hj)(t))return[t,t,t,t];if((0,yX.kJ)(t)){var e=t.length;if(1===e)return[t[0],t[0],t[0],t[0]];if(2===e)return[t[0],t[1],t[0],t[1]];if(3===e)return[t[0],t[1],t[2],t[1]];if(4===e)return t}return[0,0,0,0]}function Oet(t,e,n){void 0===e&&(e="bottom"),void 0===n&&(n=25);var r=Pet(t),i=[e.startsWith("top")?n:0,e.startsWith("right")?n:0,e.startsWith("bottom")?n:0,e.startsWith("left")?n:0];return[r[0]+i[0],r[1]+i[1],r[2]+i[2],r[3]+i[3]]}function Aet(t){var e=t.map((function(t){return Pet(t)})),n=[0,0,0,0];return e.length>0&&(n=n.map((function(t,n){return e.forEach((function(r,i){t+=e[i][n]})),t}))),n}var Det=function(t,e,n,r){var i,o,a,s,l=[],c=!!r;if(c){a=[1/0,1/0],s=[-1/0,-1/0];for(var u=0,h=t.length;u<h;u++){var p=t[u];a=SZ.VV([0,0],a,p),s=SZ.Fp([0,0],s,p)}a=SZ.VV([0,0],a,r[0]),s=SZ.Fp([0,0],s,r[1])}u=0;for(var d=t.length;u<d;u++){p=t[u];if(n)i=t[u?u-1:d-1],o=t[(u+1)%d];else{if(0===u||u===d-1){l.push(p);continue}i=t[u-1],o=t[u+1]}var f=[0,0];f=SZ.lu(f,o,i),f=SZ.bA(f,f,e);var g=SZ.TE(p,i),m=SZ.TE(p,o),y=g+m;0!==y&&(g/=y,m/=y);var v=SZ.bA([0,0],f,-g),x=SZ.bA([0,0],f,m),_=SZ.IH([0,0],p,v),b=SZ.IH([0,0],p,x);c&&(_=SZ.Fp([0,0],_,a),_=SZ.VV([0,0],_,s),b=SZ.Fp([0,0],b,a),b=SZ.VV([0,0],b,s)),l.push(_),l.push(b)}return n&&l.push(l.shift()),l};function Ret(t,e,n){var r=[],i=t[0],o=null;if(t.length<=2)return function(t,e){var n=[];if(t.length){n.push(["M",t[0].x,t[0].y]);for(var r=1,i=t.length;r<i;r+=1){var o=t[r];n.push(["L",o.x,o.y])}e&&n.push(["Z"])}return n}(t,e);for(var a=0,s=t.length;a<s;a++){var l=t[a];o&&o.x===l.x&&o.y===l.y||(r.push(l.x),r.push(l.y),o=l)}var c=function(t,e,n){for(var r=!!e,i=[],o=0,a=t.length;o<a;o+=2)i.push([t[o],t[o+1]]);var s,l,c,u=Det(i,.4,r,n),h=i.length,p=[];for(o=0;o<h-1;o++)s=u[2*o],l=u[2*o+1],c=i[o+1],p.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]]);return r&&(s=u[h],l=u[h+1],c=i[0],p.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]])),p}(r,e,n||[[0,0],[1,1]]);return c.unshift(["M",i.x,i.y]),c}function Let(t){return t?t.match(/(([A-Z]{0,1}[a-z]*[^A-Z])|([A-Z]{1}))/g).map((function(t){return t.toLowerCase()})).join("-"):t}function Net(t){var e={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",display:"flex",justifyContent:"center",alignItems:"center"},n=["stroke","lineWidth","shadowColor","strokeOpacity","shadowBlur","shadowOffsetX","shadowOffsetY","fill"];(0,yX.U2)(t,"fill")&&(e.color=t.fill);var r=het(t,n),i=r.shadowColor,o=r.shadowBlur,a=void 0===o?0:o,s=r.shadowOffsetX,l=void 0===s?0:s,c=r.shadowOffsetY,u=void 0===c?0:c;e["text-shadow"]="".concat([i,"".concat(l,"px"),"".concat(u,"px"),"".concat(a,"px")].join(" "));var h=het(t,n),p=h.stroke,d=h.lineWidth,f=void 0===d?0:d;return e["-webkit-text-stroke"]="".concat(["".concat(f,"px"),p].join(" ")),(0,yX.S6)(t,(function(t,r){["fontSize"].includes(r)&&(0,yX.hj)(t)?e[Let(r)]="".concat(t,"px"):r&&!n.includes(r)&&(e[Let(r)]="".concat(t))})),e}function Fet(t,e){t.style["pointer-events"]="none",(0,yX.S6)(e,(function(e,n){n&&e&&(t.style[n]=e)}))}var zet=function(t,e,n){var r=e.statistic,i=e.plotType,o=r.title,a=r.content;[o,a].forEach((function(e,r){if(e){var s="";s=0===r?a?"translate(-50%, -100%)":"translate(-50%, -50%)":o?"translate(-50%, 0)":"translate(-50%, -50%)";var l=(0,yX.mf)(e.style)?e.style(n):e.style;t.annotation().html((0,mX.pi)({position:["50%","50%"],html:function(t,r){var o=r.getCoordinate(),a=0;if("pie"===i||"ring-progress"===i)a=o.getRadius()*o.innerRadius*2;else if("liquid"===i){var c=(0,yX.U2)(r.geometries,[0,"elements",0,"shape"]);if(c){var u=c.find((function(t){return"wrap"===t.get("name")}));a=u.getCanvasBBox().width}}else a||(a=o.getWidth());Fet(t,(0,mX.pi)({width:"".concat(a,"px"),transform:s},Net(l)));var h=r.getData();if(e.customHtml)return e.customHtml(t,r,n,h);var p=e.content;return e.formatter&&(p=e.formatter(n,h)),p?(0,yX.HD)(p)?p:"".concat(p):"<div></div>"},key:"".concat(0===r?"top":"bottom","-statistic")},het(e,["offsetX","offsetY","rotate","style","formatter"])))}}))},Bet=function(t,e,n){var r=e.statistic;[r.title,r.content].forEach((function(e){if(e){var r=(0,yX.mf)(e.style)?e.style(n):e.style;t.annotation().html((0,mX.pi)({position:["50%","100%"],html:function(t,i){var o=i.getCoordinate(),a=i.views[0].getCoordinate(),s=a.getCenter(),l=a.getRadius(),c=Math.max(Math.sin(a.startAngle),Math.sin(a.endAngle))*l,u=s.y+c-o.y.start-parseFloat((0,yX.U2)(r,"fontSize",0)),h=o.getRadius()*o.innerRadius*2;Fet(t,(0,mX.pi)({width:"".concat(h,"px"),transform:"translate(-50%, ".concat(u,"px)")},Net(r)));var p=i.getData();if(e.customHtml)return e.customHtml(t,i,n,p);var d=e.content;return e.formatter&&(d=e.formatter(n,p)),d?(0,yX.HD)(d)?d:"".concat(d):"<div></div>"}},het(e,["offsetX","offsetY","rotate","style","formatter"])))}}))};function $et(t,e){return e?(0,yX.u4)(e,(function(t,e,n){return t.replace(new RegExp("{\\s*".concat(n,"\\s*}"),"g"),e)}),t):t}function jet(t,e){return t.views.find((function(t){return t.id===e}))}function Uet(t){var e=t.parent;return e?e.views:[]}function Vet(t){return Uet(t).filter((function(e){return e!==t}))}function Het(t,e,n){void 0===n&&(n=t.geometries),"boolean"===typeof e?t.animate(e):t.animate(!0),(0,yX.S6)(n,(function(t){var n;n=(0,yX.mf)(e)?e(t.type||t.shapeType,t)||!0:e,t.animate(n)}))}function Get(){return"object"===typeof window?null===window||void 0===window?void 0:window.devicePixelRatio:2}function Wet(t,e){void 0===e&&(e=t);var n=document.createElement("canvas"),r=Get();return n.width=t*r,n.height=e*r,n.style.width="".concat(t,"px"),n.style.height="".concat(e,"px"),n.getContext("2d").scale(r,r),n}function Xet(t,e,n,r){void 0===r&&(r=n);var i=e.backgroundColor,o=e.opacity;t.globalAlpha=o,t.fillStyle=i,t.beginPath(),t.fillRect(0,0,n,r),t.closePath()}function qet(t,e,n){var r=t+e;return n?2*r:r}function Yet(t,e){return e?[[t*(1/4),t*(1/4)],[t*(3/4),t*(3/4)]]:[[.5*t,.5*t]]}function Zet(t,e){var n=e*Math.PI/180;return{a:Math.cos(n)*(1/t),b:Math.sin(n)*(1/t),c:-Math.sin(n)*(1/t),d:Math.cos(n)*(1/t),e:0,f:0}}var Ket={size:6,padding:2,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0,isStagger:!0};function Jet(t,e,n,r){var i=e.size,o=e.fill,a=e.lineWidth,s=e.stroke,l=e.fillOpacity;t.beginPath(),t.globalAlpha=l,t.fillStyle=o,t.strokeStyle=s,t.lineWidth=a,t.arc(n,r,i/2,0,2*Math.PI,!1),t.fill(),a&&t.stroke(),t.closePath()}var Qet={rotation:45,spacing:5,opacity:1,backgroundColor:"transparent",strokeOpacity:.5,stroke:"#fff",lineWidth:2};function tnt(t){var e=bet({},Qet,t),n=e.spacing,r=e.rotation,i=e.lineWidth,o=n+i||1,a=n+i||1,s="\n            M 0 0 L ".concat(o," 0\n            M 0 ").concat(a," L ").concat(o," ").concat(a,"\n            "),l=Wet(o,a),c=l.getContext("2d");Xet(c,e,o,a),function(t,e,n){var r=e.stroke,i=e.lineWidth,o=e.strokeOpacity,a=new Path2D(n);t.globalAlpha=o,t.lineCap="square",t.strokeStyle=i?r:"transparent",t.lineWidth=i,t.stroke(a)}(c,e,s);var u=c.createPattern(l,"repeat");if(u){var h=Zet(Get(),r);u.setTransform(h)}return u}var ent={size:6,padding:1,isStagger:!0,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0};function nnt(t,e,n,r){var i=e.stroke,o=e.size,a=e.fill,s=e.lineWidth,l=e.fillOpacity;t.globalAlpha=l,t.strokeStyle=i,t.lineWidth=s,t.fillStyle=a,t.strokeRect(n-o/2,r-o/2,o,o),t.fillRect(n-o/2,r-o/2,o,o)}function rnt(t){var e,n=t.type,r=t.cfg;switch(n){case"dot":e=function(t){var e=bet({},Ket,t),n=e.size,r=e.padding,i=e.isStagger,o=e.rotation,a=qet(n,r,i),s=Yet(a,i),l=Wet(a,a),c=l.getContext("2d");Xet(c,e,a);for(var u=0,h=s;u<h.length;u++){var p=h[u];Jet(c,e,p[0],p[1])}var d=c.createPattern(l,"repeat");if(d){var f=Zet(Get(),o);d.setTransform(f)}return d}(r);break;case"line":e=tnt(r);break;case"square":e=function(t){var e=bet({},ent,t),n=e.size,r=e.padding,i=e.isStagger,o=e.rotation,a=qet(n,r,i),s=Yet(a,i),l=Wet(a,a),c=l.getContext("2d");Xet(c,e,a);for(var u=0,h=s;u<h.length;u++){var p=h[u];nnt(c,e,p[0],p[1])}var d=c.createPattern(l,"repeat");if(d){var f=Zet(Get(),o);d.setTransform(f)}return d}(r)}return e}function int(t){var e=this;return function(n){var r,i=n.options,o=n.chart,a=i.pattern;if(!a)return n;return bet({},n,{options:(r={},r[t]=function(n){for(var r,s,l,c=[],u=1;u<arguments.length;u++)c[u-1]=arguments[u];var h=o.getTheme().defaultColor,p=h,d=null===(s=null===(r=o.geometries)||void 0===r?void 0:r[0])||void 0===s?void 0:s.getAttribute("color");if(d){var f=d.getFields()[0],g=(0,yX.U2)(n,f);p=c3.getMappingValue(d,g,(null===(l=d.values)||void 0===l?void 0:l[0])||h)}var m=a;"function"===typeof a&&(m=a.call(e,n,p)),m instanceof CanvasPattern===!1&&(m=rnt(bet({},{cfg:{backgroundColor:p}},m)));var y=i[t];return(0,mX.pi)((0,mX.pi)({},"function"===typeof y?y.call.apply(y,(0,mX.ev)([e,n],c,!1)):y||{}),{fill:m||p})},r)})}}function ont(t){var e=t.chart,n=t.options,r=n.legend,i=n.colorField,o=n.seriesField;return!1===r?e.legend(!1):(i||o)&&e.legend(i||o,r),t}function ant(t){var e=t.chart,n=t.options.tooltip;return void 0!==n&&e.tooltip(n),t}function snt(t){var e=t.chart,n=t.options.interactions;return(0,yX.S6)(n,(function(t){!1===t.enable?e.removeInteraction(t.type):e.interaction(t.type,t.cfg||{})})),t}function lnt(t){return Het(t.chart,t.options.animation),t}function cnt(t){var e=t.chart,n=t.options.theme;return n&&e.theme(n),t}function unt(t){var e=t.chart,n=t.options.state;return n&&(0,yX.S6)(e.geometries,(function(t){t.state(n)})),t}function hnt(t){var e=t.chart,n=t.options.slider;return e.option("slider",n),t}function pnt(t){var e=t.chart,n=t.options.scrollbar;return e.option("scrollbar",n),t}function dnt(t,e){return function(n){var r=n.chart,i=n.options,o={};return(0,yX.S6)(t,(function(t,e){o[e]=het(t,aet)})),o=bet({},e,i.meta,o),r.scale(o),n}}function fnt(t){return function(e){var n=e.chart,r=e.options,i=n.getController("annotation");return(0,yX.S6)((0,mX.ev)((0,mX.ev)([],r.annotations||[],!0),t||[],!0),(function(t){i.annotation(t)})),e}}function gnt(t){var e=t.chart,n=t.options,r=n.yAxis,i=n.limitInPlot,o=i;return(0,yX.Kn)(r)&&(0,yX.UM)(i)&&(o=!!Object.values(het(r,["min","max","minLimit","maxLimit"])).some((function(t){return!(0,yX.UM)(t)}))),e.limitInPlot=o,t}function mnt(t){return void 0===t&&(t="rect"),function(e){var n=e.chart,r=e.options.coordinate,i=Array.from(r||[]).map((function(t){return"reflectX"===t.type?["reflect","x"]:"reflectY"===t.type?["reflect","y"]:"transpose"===t.type?["transpose"]:null})).filter((function(t){return!!t}));return 0!==i.length&&n.coordinate({type:t,actions:i}),e}}var ynt={locale:"en-US"};var vnt={};function xnt(t,e){vnt[t]=e}function _nt(t){return{get:function(e,n){return $et((0,yX.U2)(vnt[t],e)||(0,yX.U2)(vnt[ynt.locale],e)||(0,yX.U2)(vnt["en-US"],e)||e,n)}}}function bnt(t,e){if(!1===t)return{fields:!1};var n=(0,yX.U2)(t,"fields"),r=(0,yX.U2)(t,"formatter");return r&&!n&&(n=e),{fields:n,formatter:r}}function wnt(t,e){var n=t.type,r=t.xField,i=t.yField,o=t.colorField,a=t.shapeField,s=t.sizeField,l=t.styleField,c=t.rawFields,u=[];if(c=((0,yX.mf)(c)?c(n,e):c)||[],"color"===e)u=(0,mX.ev)([o||r],c,!0);else if("shape"===e)u=(0,mX.ev)([a||r],c,!0);else if("size"===e)u=(0,mX.ev)([s||r],c,!0);else{u=(0,mX.ev)([r,i,o,a,s,l],c,!0);var h=["x","y","color","shape","size","style"].indexOf(e),p=u[h];u.splice(h,1),u.unshift(p)}var d=(0,yX.jj)(u.filter((function(t){return!!t}))),f="line"===n&&[r,i].includes(d.join("*"))?"":d.join("*");return{mappingFields:d,tileMappingField:f}}function Snt(t,e){if(e)return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i={};return t.forEach((function(t,e){i[t]=n[e]})),delete i[void 0],e(i)}}function Cnt(t){var e=t.chart,n=t.options,r=n.type,i=n.args,o=n.mapping,a=n.xField,s=n.yField,l=n.colorField,c=n.shapeField,u=n.sizeField,h=n.tooltipFields,p=n.label,d=n.state,f=n.customInfo;if(!o)return t;var g=o.color,m=o.shape,y=o.size,v=o.style,x=o.tooltip,_=e[r](i).position("".concat(a,"*").concat(s));if((0,yX.HD)(g))l?_.color(l,g):_.color(g);else if((0,yX.mf)(g)){var b=wnt(n,"color"),w=b.mappingFields,S=b.tileMappingField;_.color(S,Snt(w,g))}else l&&_.color(l,g);if((0,yX.HD)(m))c?_.shape(c,[m]):_.shape(m);else if((0,yX.mf)(m)){var C=wnt(n,"shape");w=C.mappingFields,S=C.tileMappingField;_.shape(S,Snt(w,m))}else c&&_.shape(c,m);if((0,yX.hj)(y))u?_.size(u,y):_.size(y);else if((0,yX.mf)(y)){var E=wnt(n,"size");w=E.mappingFields,S=E.tileMappingField;_.size(S,Snt(w,y))}else u&&_.size(u,y);if((0,yX.mf)(v)){var k=wnt(n,"style");w=k.mappingFields,S=k.tileMappingField;_.style(S,Snt(w,v))}else(0,yX.Kn)(v)&&_.style(v);if(!1===h?_.tooltip(!1):(0,yX.xb)(h)||_.tooltip(h.join("*"),Snt(h,x)),!1===p)_.label(!1);else if(p){var M=p.callback,T=p.fields,I=(0,mX._T)(p,["callback","fields"]);_.label({fields:T||[s],callback:M,cfg:Tet(I)})}return d&&_.state(d),f&&_.customInfo(f),[a,s].filter((function(t){return t!==l})).forEach((function(t){e.legend(t,!1)})),(0,mX.pi)((0,mX.pi)({},t),{ext:{geometry:_}})}function Ent(t){var e=t.options,n=e.area,r=e.xField,i=e.yField,o=e.seriesField,a=e.smooth,s=e.tooltip,l=e.useDeferredLabel,c=bnt(s,[r,i,o]),u=c.fields,h=c.formatter;return n?Cnt(bet({},t,{options:{type:"area",colorField:o,tooltipFields:u,mapping:(0,yX.b$)({shape:a?"smooth":"area",tooltip:h},n),args:{useDeferredLabel:l}}})):t}function knt(t){var e=t.options,n=e.edge,r=e.xField,i=e.yField,o=e.seriesField,a=e.tooltip,s=e.useDeferredLabel,l=bnt(a,[r,i,o]),c=l.fields,u=l.formatter;return n?Cnt(bet({},t,{options:{type:"edge",colorField:o,tooltipFields:c,mapping:(0,mX.pi)({tooltip:u},n),args:{useDeferredLabel:s}}})):t}function Mnt(t){var e=t.options,n=e.xField,r=e.yField,i=e.interval,o=e.seriesField,a=e.tooltip,s=e.minColumnWidth,l=e.maxColumnWidth,c=e.columnBackground,u=e.dodgePadding,h=e.intervalPadding,p=e.useDeferredLabel,d=bnt(a,[n,r,o]),f=d.fields,g=d.formatter,m=(i?Cnt(bet({},t,{options:{type:"interval",colorField:o,tooltipFields:f,mapping:(0,mX.pi)({tooltip:g},i),args:{dodgePadding:u,intervalPadding:h,minColumnWidth:s,maxColumnWidth:l,background:c,useDeferredLabel:p}}})):t).ext;return function(t){var e=t.chart,n=t.options,r=t.ext,i=n.seriesField,o=n.isGroup,a=n.isStack,s=n.marginRatio,l=n.widthRatio,c=n.groupField,u=n.theme,h=[];return i&&(o&&h.push({type:"dodge",dodgeBy:c||i,marginRatio:s}),a&&h.push({type:"stack",marginRatio:s})),h.length&&(null===r||void 0===r?void 0:r.geometry)&&(null===r||void 0===r?void 0:r.geometry).adjust(h),(0,yX.UM)(l)||e.theme(bet({},(0,yX.Kn)(u)?u:O1(u),{columnWidthRatio:l})),t}((0,mX.pi)((0,mX.pi)({},t),{ext:m}))}function Tnt(t){var e=t.options,n=e.line,r=e.stepType,i=e.xField,o=e.yField,a=e.seriesField,s=e.smooth,l=e.connectNulls,c=e.tooltip,u=e.useDeferredLabel,h=bnt(c,[i,o,a]),p=h.fields,d=h.formatter;return n?Cnt(bet({},t,{options:{type:"line",colorField:a,tooltipFields:p,mapping:(0,yX.b$)({shape:r||(s?"smooth":"line"),tooltip:d},n),args:{connectNulls:l,useDeferredLabel:u}}})):t}function Int(t){var e=t.options,n=e.point,r=e.xField,i=e.yField,o=e.seriesField,a=e.sizeField,s=e.shapeField,l=e.tooltip,c=e.useDeferredLabel,u=bnt(l,[r,i,o,a,s]),h=u.fields,p=u.formatter;return n?Cnt(bet({},t,{options:{type:"point",colorField:o,shapeField:s,tooltipFields:h,mapping:(0,mX.pi)({tooltip:p},n),args:{useDeferredLabel:c}}})):t}function Pnt(t){var e=t.options,n=e.polygon,r=e.xField,i=e.yField,o=e.seriesField,a=e.tooltip,s=e.useDeferredLabel,l=bnt(a,[r,i,o]),c=l.fields,u=l.formatter;return n?Cnt(bet({},t,{options:{type:"polygon",colorField:o,tooltipFields:c,mapping:(0,mX.pi)({tooltip:u},n),args:{useDeferredLabel:s}}})):t}function Ont(t){var e=t.options,n=e.schema,r=e.xField,i=e.yField,o=e.seriesField,a=e.tooltip,s=e.useDeferredLabel,l=bnt(a,[r,i,o]),c=l.fields,u=l.formatter;return n?Cnt(bet({},t,{options:{type:"schema",colorField:o,tooltipFields:c,mapping:(0,mX.pi)({tooltip:u},n),args:{useDeferredLabel:s}}})):t}var Ant=n(315),Dnt="data-chart-source-type",Rnt=["padding","appendPadding","renderer","pixelRatio","syncViewPadding","supportCSSTransform","limitInPlot"],Lnt=function(t){function e(e,n){var r=t.call(this)||this;return r.container="string"===typeof e?document.getElementById(e):e,r.options=bet({},r.getDefaultOptions(),n),r.createG2(),r.bindEvents(),r}return(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return{renderer:"canvas",xAxis:{nice:!0,label:{autoRotate:!1,autoHide:{type:"equidistance",cfg:{minGap:6}}}},yAxis:{nice:!0,label:{autoHide:!0,autoRotate:!1}},animation:!0}},e.prototype.createG2=function(){var t=this.options,e=t.width,n=t.height,r=t.defaultInteractions;this.chart=new n2((0,mX.pi)((0,mX.pi)((0,mX.pi)((0,mX.pi)({container:this.container,autoFit:!1},this.getChartSize(e,n)),{localRefresh:!1}),het(this.options,Rnt)),{defaultInteractions:r})),this.container.setAttribute(Dnt,"G2Plot")},e.prototype.getChartSize=function(t,e){var n=wet(this.container);return{width:t||n.width||400,height:e||n.height||400}},e.prototype.bindEvents=function(){var t=this;this.chart&&this.chart.on("*",(function(e){(null===e||void 0===e?void 0:e.type)&&t.emit(e.type,e)}))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.render=function(){this.chart.clear(),this.chart.options={data:[],animate:!0},this.chart.views=[],this.execAdaptor(),this.chart.render(),this.bindSizeSensor()},e.prototype.update=function(t){this.updateOption(t),this.render()},e.prototype.updateOption=function(t){this.options=bet({},this.options,t)},e.prototype.setState=function(t,e,n){void 0===n&&(n=!0);var r=Met(this.chart);(0,yX.S6)(r,(function(r){e(r.getData())&&r.setState(t,n)}))},e.prototype.getStates=function(){var t=Met(this.chart),e=[];return(0,yX.S6)(t,(function(t){var n=t.getData(),r=t.getStates();(0,yX.S6)(r,(function(r){e.push({data:n,state:r,geometry:t.geometry,element:t})}))})),e},e.prototype.changeData=function(t){this.update({data:t})},e.prototype.changeSize=function(t,e){this.chart.changeSize(t,e)},e.prototype.addAnnotations=function(t,e){e=e||this.chart;var n=(0,mX.ev)([],t,!0),r=e.getController("annotation"),i=r.getComponents().map((function(t){return t.extra}));r.clear(!0);for(var o=function(t){var e=i[t],o=n.findIndex((function(t){return t.id&&t.id===e.id}));-1!==o&&(e=bet({},e,n[o]),n.splice(o,1)),r.annotation(e)},a=0;a<i.length;a++)o(a);n.forEach((function(t){return r.annotation(t)})),e.render(!0)},e.prototype.removeAnnotations=function(t){var e=this.chart.getController("annotation"),n=e.getComponents().map((function(t){return t.extra}));e.clear(!0);for(var r=function(r){var i=n[r];t.find((function(t){return t.id&&t.id===i.id}))||e.annotation(i)},i=0;i<n.length;i++)r(i);this.chart.render(!0)},e.prototype.destroy=function(){this.unbindSizeSensor(),this.chart.destroy(),this.off(),this.container.removeAttribute(Dnt)},e.prototype.execAdaptor=function(){var t=this.getSchemaAdaptor(),e=this.options,n=e.padding,r=e.appendPadding;this.chart.padding=n,this.chart.appendPadding=r,t({chart:this.chart,options:this.options})},e.prototype.triggerResize=function(){this.chart.forceFit()},e.prototype.bindSizeSensor=function(){var t=this;if(!this.unbind){var e=this.options.autoFit;(void 0===e||e)&&(this.unbind=(0,Ant.ak)(this.container,(function(){var e=wet(t.container),n=e.width,r=e.height;n===t.chart.width&&r===t.chart.height||t.triggerResize()})))}},e.prototype.unbindSizeSensor=function(){this.unbind&&(this.unbind(),this.unbind=void 0)},e}(FX.Z);function Nnt(t,e,n,r){var i=(0,yX.u4)(t,(function(t,r){var i=r[n],o=t.has(i)?t.get(i):0,a=r[e];return o=Iet(a)?o+a:o,t.set(i,o),t}),new Map);return(0,yX.UI)(t,(function(t){var o,a=t[e],s=t[n],l=Iet(a)&&0!==i.get(s)?a/i.get(s):0;return(0,mX.pi)((0,mX.pi)({},t),((o={})[r]=l,o))}))}function Fnt(t,e,n,r,i){return i?Nnt(t,e,n,r):t}function znt(t){var e=t.chart,n=t.options,r=n.data,i=n.color,o=n.lineStyle,a=n.lineShape,s=n.point,l=n.area,c=n.seriesField,u=null===s||void 0===s?void 0:s.state,h=null===l||void 0===l?void 0:l.state;e.data(r);var p=bet({},t,{options:{shapeField:c,line:{color:i,style:o,shape:a},point:s&&(0,mX.pi)({color:i,shape:"circle"},s),area:l&&(0,mX.pi)({color:i},l),label:void 0}}),d=bet({},p,{options:{tooltip:!1,state:u}}),f=bet({},p,{options:{tooltip:!1,state:h}});return Tnt(p),Int(d),Ent(f),t}function Bnt(t){var e,n,r=t.options,i=r.xAxis,o=r.yAxis,a=r.xField,s=r.yField,l=r.data;return Cet(dnt(((e={})[a]=i,e[s]=o,e),((n={})[a]={type:"cat"},n[s]=pet(l,s),n)))(t)}function $nt(t){var e=t.chart,n=t.options.reflect;if(n){var r=n;(0,yX.kJ)(r)||(r=[r]);var i=r.map((function(t){return["reflect",t]}));e.coordinate({type:"rect",actions:i})}return t}function jnt(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return!1===r?e.axis(o,!1):e.axis(o,r),!1===i?e.axis(a,!1):e.axis(a,i),t}function Unt(t){var e=t.chart,n=t.options,r=n.legend,i=n.seriesField;return r&&i?e.legend(i,r):!1===r&&e.legend(!1),t}function Vnt(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,o=Eet(e,"line");if(r){var a=r.callback,s=(0,mX._T)(r,["callback"]);o.label({fields:[i],callback:a,cfg:(0,mX.pi)({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Tet(s))})}else o.label(!1);return t}function Hnt(t){var e=t.chart;return t.options.isStack&&(0,yX.S6)(e.geometries,(function(t){t.adjust("stack")})),t}function Gnt(t){return Cet(znt,Bnt,Hnt,cnt,$nt,jnt,Unt,ant,Vnt,hnt,pnt,snt,lnt,fnt(),gnt)(t)}function Wnt(t){var e=t.chart,n=t.options,r=n.data,i=n.areaStyle,o=n.areaShape,a=n.color,s=n.point,l=n.line,c=n.isPercent,u=n.xField,h=n.yField,p=n.tooltip,d=n.seriesField,f=n.startOnZero,g=null===s||void 0===s?void 0:s.state,m=Fnt(r,h,u,h,c);e.data(m);var y=c?(0,mX.pi)({formatter:function(t){return{name:t[d]||t[u],value:(100*Number(t[h])).toFixed(2)+"%"}}},p):p,v=bet({},t,{options:{area:{color:a,style:i,shape:o},point:s&&(0,mX.pi)({color:a},s),tooltip:y,label:void 0,args:{startOnZero:f}}}),x={chart:e,options:bet({line:{size:2}},(0,yX.CE)(n,["state"]),{line:l&&(0,mX.pi)({color:a},l),sizeField:d,state:null===l||void 0===l?void 0:l.state,tooltip:!1,label:void 0,args:{startOnZero:f}})},_=bet({},v,{options:{tooltip:!1,state:g}});return Ent(v),Tnt(x),Int(_),t}function Xnt(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,o=Eet(e,"area");if(r){var a=r.callback,s=(0,mX._T)(r,["callback"]);o.label({fields:[i],callback:a,cfg:(0,mX.pi)({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Tet(s))})}else o.label(!1);return t}function qnt(t){var e=t.chart,n=t.options,r=n.isStack,i=n.isPercent,o=n.seriesField;return(i||r)&&o&&(0,yX.S6)(e.geometries,(function(t){t.adjust("stack")})),t}function Ynt(t){return Cet(cnt,int("areaStyle"),mnt("rect"),Wnt,Bnt,qnt,jnt,Unt,ant,Xnt,hnt,fnt(),snt,lnt,gnt)(t)}var Znt=bet({},Lnt.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},isStack:!0,line:{},legend:{position:"top-left",radio:{}}}),Knt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="area",e}return(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return Znt},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.options,n=e.isPercent,r=e.xField,i=e.yField;Bnt({chart:this.chart,options:this.options}),this.chart.changeData(Fnt(t,i,r,i,n))},e.prototype.getSchemaAdaptor=function(){return Ynt},e}(Lnt),Jnt={padding:[8,10],text:"reset",textStyle:{default:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"}},buttonStyle:{default:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},active:{fill:"#e6e6e6"}}},Qnt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buttonGroup=null,e.buttonCfg=(0,mX.pi)({name:"button"},Jnt),e}return(0,mX.ZT)(e,t),e.prototype.getButtonCfg=function(){var t=this.context.view,e=(0,yX.U2)(t,["interactions","filter-action","cfg","buttonConfig"]);return bet(this.buttonCfg,e,this.cfg)},e.prototype.drawButton=function(){var t=this.getButtonCfg(),e=this.context.view.foregroundGroup.addGroup({name:t.name}),n=this.drawText(e);this.drawBackground(e,n.getBBox()),this.buttonGroup=e},e.prototype.drawText=function(t){var e,n=this.getButtonCfg();return t.addShape({type:"text",name:"button-text",attrs:(0,mX.pi)({text:n.text},null===(e=n.textStyle)||void 0===e?void 0:e.default)})},e.prototype.drawBackground=function(t,e){var n,r=this.getButtonCfg(),i=Pet(r.padding),o=t.addShape({type:"rect",name:"button-rect",attrs:(0,mX.pi)({x:e.x-i[3],y:e.y-i[0],width:e.width+i[1]+i[3],height:e.height+i[0]+i[2]},null===(n=r.buttonStyle)||void 0===n?void 0:n.default)});return o.toBack(),t.on("mouseenter",(function(){var t;o.attr(null===(t=r.buttonStyle)||void 0===t?void 0:t.active)})),t.on("mouseleave",(function(){var t;o.attr(null===(t=r.buttonStyle)||void 0===t?void 0:t.default)})),o},e.prototype.resetPosition=function(){var t=this.context.view.getCoordinate().convert({x:1,y:1}),e=this.buttonGroup,n=e.getBBox(),r=c3.transform(null,[["t",t.x-n.width-10,t.y+n.height+5]]);e.setMatrix(r)},e.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},e.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},e.prototype.destroy=function(){var e=this.buttonGroup;e&&e.remove(),t.prototype.destroy.call(this)},e}(n0);function trt(t){return t.isInPlot()}function ert(t,e,n){var r=n||{},i=r.mask,o=r.isStartEnable,a=e||"rect";switch(t){case"brush":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:o||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:o||trt,action:["brush:start","".concat(a,"-mask:start"),"".concat(a,"-mask:show")],arg:[null,{maskStyle:null===i||void 0===i?void 0:i.style}]}],processing:[{trigger:"mousemove",isEnable:trt,action:["".concat(a,"-mask:resize")]}],end:[{trigger:"mouseup",isEnable:trt,action:["brush:filter","brush:end","".concat(a,"-mask:end"),"".concat(a,"-mask:hide"),"brush-reset-button:show"]}],rollback:[{trigger:"brush-reset-button:click",action:["brush:reset","brush-reset-button:hide","cursor:crosshair"]}]};case"brush-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:o||function(){return!0}},{trigger:"plot:mousemove",action:"cursor:crosshair",isEnable:o||function(){return!0}},{trigger:"plot:mousemove",action:"cursor:default",isEnable:function(t){return!!o&&!o(t)}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:o||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:o||function(t){return!t.isInShape("mask")},action:["".concat(a,"-mask:start"),"".concat(a,"-mask:show")],arg:[{maskStyle:null===i||void 0===i?void 0:i.style}]},{trigger:"mask:dragstart",action:["".concat(a,"-mask:moveStart")]}],processing:[{trigger:"plot:mousemove",action:["".concat(a,"-mask:resize")]},{trigger:"mask:drag",action:["".concat(a,"-mask:move")]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["".concat(a,"-mask:end")]},{trigger:"mask:dragend",action:["".concat(a,"-mask:moveEnd")]},{trigger:"document:mouseup",isEnable:function(t){return!t.isInPlot()},action:["element-range-highlight:clear","".concat(a,"-mask:end"),"".concat(a,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","".concat(a,"-mask:hide")]}]};case"brush-x":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:o||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:o||trt,action:["brush-x:start","".concat(a,"-mask:start"),"".concat(a,"-mask:show")],arg:[null,{maskStyle:null===i||void 0===i?void 0:i.style}]}],processing:[{trigger:"mousemove",isEnable:trt,action:["".concat(a,"-mask:resize")]}],end:[{trigger:"mouseup",isEnable:trt,action:["brush-x:filter","brush-x:end","".concat(a,"-mask:end"),"".concat(a,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]};case"brush-x-highlight":case"brush-y-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:o||function(){return!0}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:o||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:o||function(t){return!t.isInShape("mask")},action:["".concat(a,"-mask:start"),"".concat(a,"-mask:show")],arg:[{maskStyle:null===i||void 0===i?void 0:i.style}]},{trigger:"mask:dragstart",action:["".concat(a,"-mask:moveStart")]}],processing:[{trigger:"plot:mousemove",action:["".concat(a,"-mask:resize")]},{trigger:"mask:drag",action:["".concat(a,"-mask:move")]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["".concat(a,"-mask:end")]},{trigger:"mask:dragend",action:["".concat(a,"-mask:moveEnd")]},{trigger:"document:mouseup",isEnable:function(t){return!t.isInPlot()},action:["element-range-highlight:clear","".concat(a,"-mask:end"),"".concat(a,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","".concat(a,"-mask:hide")]}]};case"brush-y":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:o||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:o||trt,action:["brush-y:start","".concat(a,"-mask:start"),"".concat(a,"-mask:show")],arg:[null,{maskStyle:null===i||void 0===i?void 0:i.style}]}],processing:[{trigger:"mousemove",isEnable:trt,action:["".concat(a,"-mask:resize")]}],end:[{trigger:"mouseup",isEnable:trt,action:["brush-y:filter","brush-y:end","".concat(a,"-mask:end"),"".concat(a,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["brush-y:reset"]}]};default:return{}}}s0("brush-reset-button",Qnt,{name:"brush-reset-button"}),f1("filter-action",{}),f1("brush",ert("brush")),f1("brush-highlight",ert("brush-highlight")),f1("brush-x",ert("brush-x","x-rect")),f1("brush-y",ert("brush-y","y-rect")),f1("brush-x-highlight",ert("brush-x-highlight","x-rect")),f1("brush-y-highlight",ert("brush-y-highlight","y-rect"));var nrt=["brush","brush-x","brush-y","brush-highlight","brush-x-highlight","brush-y-highlight"];function rrt(t){var e=t.options,n=e.brush,r=(0,yX.hX)(e.interactions||[],(function(t){return-1===nrt.indexOf(t.type)}));return(null===n||void 0===n?void 0:n.enabled)&&(nrt.forEach((function(t){var e=!1;switch(n.type){case"x-rect":e=t===("highlight"===n.action?"brush-x-highlight":"brush-x");break;case"y-rect":e=t===("highlight"===n.action?"brush-y-highlight":"brush-y");break;default:e=t===("highlight"===n.action?"brush-highlight":"brush")}var i={type:t,enable:e};n&&(i.cfg=ert(t,n.type,n)),r.push(i)})),"highlight"!==(null===n||void 0===n?void 0:n.action)&&r.push({type:"filter-action",cfg:{buttonConfig:n.button}})),bet({},t,{options:{interactions:r}})}var irt={hover:"__interval-connected-area-hover__",click:"__interval-connected-area-click__"},ort=function(t,e){return"hover"===t?[{trigger:"interval:mouseenter",action:["element-highlight-by-color:highlight","element-link-by-color:link"],arg:[null,{style:e}]}]:[{trigger:"interval:click",action:["element-highlight-by-color:clear","element-highlight-by-color:highlight","element-link-by-color:clear","element-link-by-color:unlink","element-link-by-color:link"],arg:[null,null,null,null,{style:e}]}]};function art(t,e){return(0,yX.hj)(t)&&(0,yX.hj)(e)?0===t&&0===e?"-":t===e?"100%":0===t?"\u221e":"".concat((100*e/t).toFixed(2),"%"):"-"}function srt(t,e){return bet({size:e?32:80,spacing:e?8:12,offset:e?32:0,arrow:!1!==t.arrow&&{headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},text:!1!==t.text&&{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)",textAlign:"center",textBaseline:"middle"},formatter:art}},t)}function lrt(t,e){return(0,yX.UI)(e.getModel().points,(function(e){return t.convertPoint(e)}))}function crt(t,e,n){!function(t,e,n){var r=t.view,i=t.geometry,o=t.group,a=t.options,s=t.horizontal,l=a.offset,c=a.size,u=a.arrow,h=r.getCoordinate(),p=lrt(h,e)[3],d=lrt(h,n)[0],f=d.y-p.y,g=d.x-p.x;if("boolean"!==typeof u){var m,y=u.headSize,v=a.spacing;s?(g-y)/2<v?(v=Math.max(1,(g-y)/2),m=[[p.x+v,p.y-l],[p.x+v,p.y-l-c],[d.x-v,d.y-l-c/2]]):m=[[p.x+v,p.y-l],[p.x+v,p.y-l-c],[d.x-v-y,d.y-l-c],[d.x-v,d.y-l-c/2],[d.x-v-y,d.y-l]]:(f-y)/2<v?(v=Math.max(1,(f-y)/2),m=[[p.x+l,p.y+v],[p.x+l+c,p.y+v],[d.x+l+c/2,d.y-v]]):m=[[p.x+l,p.y+v],[p.x+l+c,p.y+v],[d.x+l+c,d.y-v-y],[d.x+l+c/2,d.y-v],[d.x+l,d.y-v-y]],o.addShape("polygon",{id:"".concat(r.id,"-conversion-tag-arrow-").concat(i.getElementId(e.getModel().mappingData)),name:"conversion-tag-arrow",origin:{element:e,nextElement:n},attrs:(0,mX.pi)((0,mX.pi)({},u.style||{}),{points:m})})}}(t,e,n),function(t,e,n){var r,i,o,a=t.view,s=t.geometry,l=t.group,c=t.options,u=t.field,h=t.horizontal,p=c.offset,d=c.size;if("boolean"!==typeof c.text){var f=a.getCoordinate(),g=(null===(r=c.text)||void 0===r?void 0:r.formatter)&&(null===(i=c.text)||void 0===i?void 0:i.formatter(e.getData()[u],n.getData()[u])),m=lrt(f,e)[h?3:0],y=lrt(f,n)[h?0:3],v=l.addShape("text",{id:"".concat(a.id,"-conversion-tag-text-").concat(s.getElementId(e.getModel().mappingData)),name:"conversion-tag-text",origin:{element:e,nextElement:n},attrs:(0,mX.pi)((0,mX.pi)({},(null===(o=c.text)||void 0===o?void 0:o.style)||{}),{text:g,x:h?(m.x+y.x)/2:m.x+p+d/2,y:h?m.y-p-d/2:(m.y+y.y)/2})});if(h){var x=y.x-m.x,_=v.getBBox().width;if(_>x){var b=_/g.length,w=Math.max(1,Math.ceil(x/b)-1),S="".concat(g.slice(0,w),"...");v.attr("text",S)}}}}(t,e,n)}function urt(t){var e=t.options,n=e.legend,r=e.seriesField,i=e.isStack;return r?!1!==n&&(n=(0,mX.pi)({position:i?"right-top":"top-left"},n)):n=!1,t.options.legend=n,t}function hrt(t){var e=t.chart,n=t.options,r=n.data,i=n.columnStyle,o=n.color,a=n.columnWidthRatio,s=n.isPercent,l=n.isGroup,c=n.isStack,u=n.xField,h=n.yField,p=n.seriesField,d=n.groupField,f=n.tooltip,g=n.shape,m=s&&l&&c?function(t,e,n,r){var i=(0,yX.u4)(t,(function(t,r){var i=(0,yX.u4)(n,(function(t,e){return"".concat(t).concat(r[e])}),""),o=t.has(i)?t.get(i):0,a=r[e];return o=Iet(a)?o+a:o,t.set(i,o),t}),new Map);return(0,yX.UI)(t,(function(t){var o,a=t[e],s=(0,yX.u4)(n,(function(e,n){return"".concat(e).concat(t[n])}),""),l=Iet(a)&&0!==i.get(s)?a/i.get(s):0;return(0,mX.pi)((0,mX.pi)({},t),((o={})[r]=l,o))}))}(r,h,[u,d],h):Fnt(r,h,u,h,s),y=[];c&&p&&!l?m.forEach((function(t){var e=y.find((function(e){return e[u]===t[u]&&e[p]===t[p]}));e?e[h]+=t[h]||0:y.push((0,mX.pi)({},t))})):y=m,e.data(y);var v=s?(0,mX.pi)({formatter:function(t){var e;return{name:l&&c?"".concat(t[p]," - ").concat(t[d]):null!==(e=t[p])&&void 0!==e?e:t[u],value:(100*Number(t[h])).toFixed(2)+"%"}}},f):f,x=bet({},t,{options:{data:y,widthRatio:a,tooltip:v,interval:{shape:g,style:i,color:o}}});return Mnt(x),x}function prt(t){var e,n,r=t.options,i=r.xAxis,o=r.yAxis,a=r.xField,s=r.yField,l=r.data,c=r.isPercent?{max:1,min:0,minLimit:0,maxLimit:1}:{};return Cet(dnt(((e={})[a]=i,e[s]=o,e),((n={})[a]={type:"cat"},n[s]=(0,mX.pi)((0,mX.pi)({},pet(l,s)),c),n)))(t)}function drt(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return!1===r?e.axis(o,!1):e.axis(o,r),!1===i?e.axis(a,!1):e.axis(a,i),t}function frt(t){var e=t.chart,n=t.options,r=n.legend,i=n.seriesField;return r&&i?e.legend(i,r):!1===r&&e.legend(!1),t}function grt(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,o=n.isRange,a=Eet(e,"interval");if(r){var s=r.callback,l=(0,mX._T)(r,["callback"]);a.label({fields:[i],callback:s,cfg:(0,mX.pi)({layout:(null===l||void 0===l?void 0:l.position)?void 0:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Tet(o?(0,mX.pi)({content:function(t){var e;return null===(e=t[i])||void 0===e?void 0:e.join("-")}},l):l))})}else a.label(!1);return t}function mrt(t){var e=t.chart,n=t.options,r=n.tooltip,i=n.isGroup,o=n.isStack,a=n.groupField,s=n.data,l=n.xField,c=n.yField,u=n.seriesField;if(!1===r)e.tooltip(!1);else{var h=r;if(i&&o){var p=h.customItems,d=(null===h||void 0===h?void 0:h.formatter)||function(t){return{name:"".concat(t[u]," - ").concat(t[a]),value:t[c]}};h=(0,mX.pi)((0,mX.pi)({},h),{customItems:function(t){var e=[];return(0,yX.S6)(t,(function(t){var n=(0,yX.hX)(s,(function(e){return(0,yX.BD)(e,het(t.data,[l,u]))}));n.forEach((function(n){e.push((0,mX.pi)((0,mX.pi)((0,mX.pi)({},t),{value:n[c],data:n,mappingData:{_origin:n}}),d(n)))}))})),p?p(e):e}})}e.tooltip(h)}return t}function yrt(t,e){void 0===e&&(e=!1);var n,r=t.options,i=r.seriesField;return Cet(urt,cnt,int("columnStyle"),unt,mnt("rect"),hrt,prt,drt,frt,mrt,hnt,pnt,grt,rrt,snt,lnt,fnt(),function(t,e,n){return void 0===e&&(e=!0),void 0===n&&(n=!1),function(r){var i=r.options,o=r.chart,a=i.conversionTag,s=i.theme;return a&&!n&&(o.theme(bet({},(0,yX.Kn)(s)?s:O1(s),{columnWidthRatio:1/3})),o.annotation().shape({render:function(n,r){var i=n.addGroup({id:"".concat(o.id,"-conversion-tag-group"),name:"conversion-tag-group"}),s=(0,yX.sE)(o.geometries,(function(t){return"interval"===t.type})),l={view:r,geometry:s,group:i,field:t,horizontal:e,options:srt(a,e)},c=s.elements;(0,yX.S6)(c,(function(t,e){e>0&&crt(l,c[e-1],t)}))}})),r}}(r.yField,!e,!!i),(void 0===(n=!r.isStack)&&(n=!1),function(t){var e=t.chart,r=t.options.connectedArea,i=function(){e.removeInteraction(irt.hover),e.removeInteraction(irt.click)};if(!n&&r){var o=r.trigger||"hover";i(),e.interaction(irt[o],{start:ort(o,r.style)})}else i();return t}),gnt)(t)}function vrt(t){var e=t.options,n=e.xField,r=e.yField,i=e.xAxis,o=e.yAxis,a={left:"bottom",right:"top",top:"left",bottom:"right"},s=!1!==o&&(0,mX.pi)({position:a[(null===o||void 0===o?void 0:o.position)||"left"]},o),l=!1!==i&&(0,mX.pi)({position:a[(null===i||void 0===i?void 0:i.position)||"bottom"]},i);return(0,mX.pi)((0,mX.pi)({},t),{options:(0,mX.pi)((0,mX.pi)({},e),{xField:r,yField:n,xAxis:s,yAxis:l})})}function xrt(t){var e=t.options.label;return e&&!e.position&&(e.position="left",e.layout||(e.layout=[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}])),bet({},t,{options:{label:e}})}function _rt(t){var e=t.options,n=e.seriesField,r=e.isStack,i=e.legend;return n?!1!==i&&(i=(0,mX.pi)({position:r?"top-left":"right-top"},i||{})):i=!1,bet({},t,{options:{legend:i}})}function brt(t){var e=t.options,n=[{type:"transpose"},{type:"reflectY"}].concat(e.coordinate||[]);return bet({},t,{options:{coordinate:n}})}function wrt(t){var e=t.chart,n=t.options,r=n.barStyle,i=n.barWidthRatio,o=n.minBarWidth,a=n.maxBarWidth,s=n.barBackground;return yrt({chart:e,options:(0,mX.pi)((0,mX.pi)({},n),{columnStyle:r,columnWidthRatio:i,minColumnWidth:o,maxColumnWidth:a,columnBackground:s})},!0)}function Srt(t){return Cet(vrt,xrt,_rt,ant,brt,wrt)(t)}f1(irt.hover,{start:ort(irt.hover),end:[{trigger:"interval:mouseleave",action:["element-highlight-by-color:reset","element-link-by-color:unlink"]}]}),f1(irt.click,{start:ort(irt.click),end:[{trigger:"document:mousedown",action:["element-highlight-by-color:clear","element-link-by-color:clear"]}]});var Crt,Ert=bet({},Lnt.getDefaultOptions(),{barWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},legend:{radio:{}},interactions:[{type:"active-region"}]}),krt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="bar",e}return(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return Ert},e.prototype.changeData=function(t){var e,n;this.updateOption({data:t});var r=this.chart,i=this.options,o=i.isPercent,a=i.xField,s=i.yField,l=i.xAxis,c=i.yAxis;a=(e=[s,a])[0],s=e[1],l=(n=[c,l])[0],c=n[1],prt({chart:r,options:(0,mX.pi)((0,mX.pi)({},i),{xField:a,yField:s,yAxis:c,xAxis:l})}),r.changeData(Fnt(t,a,s,a,o))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Srt},e}(Lnt),Mrt=bet({},Lnt.getDefaultOptions(),{columnWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},legend:{radio:{}},interactions:[{type:"active-region"}]}),Trt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="column",e}return(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return Mrt},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.options,n=e.yField,r=e.xField,i=e.isPercent;prt({chart:this.chart,options:this.options}),this.chart.changeData(Fnt(t,n,r,n,i))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return yrt},e}(Lnt),Irt="$$percentage$$",Prt="$$mappingValue$$",Ort="$$conversion$$",Art="$$totalPercentage$$",Drt="$$x$$",Rrt="$$y$$",Lrt={appendPadding:[0,80],minSize:0,maxSize:1,meta:(Crt={},Crt[Prt]={min:0,max:1,nice:!1},Crt),label:{style:{fill:"#fff",fontSize:12}},tooltip:{showTitle:!1,showMarkers:!1,shared:!1},conversionTag:{offsetX:10,offsetY:0,style:{fontSize:12,fill:"rgba(0,0,0,0.45)"}}},Nrt="CONVERSION_TAG_NAME";function Frt(t,e,n){var r,i=n.yField,o=n.maxSize,a=n.minSize,s=(0,yX.U2)((0,yX.UT)(e,i),[i]),l=(0,yX.hj)(o)?o:1,c=(0,yX.hj)(a)?a:0;return r=(0,yX.UI)(t,(function(e,n){var r=(e[i]||0)/s;return e[Irt]=r,e[Prt]=(l-c)*r+c,e[Ort]=[(0,yX.U2)(t,[n-1,i]),e[i]],e})),r}function zrt(t){return function(e){var n=e.chart,r=e.options,i=r.conversionTag,o=r.filteredData||n.getOptions().data;if(i){var a=i.formatter;o.forEach((function(e,r){if(!(r<=0||Number.isNaN(e[Prt]))){var s=t(e,r,o,{top:!0,name:Nrt,text:{content:(0,yX.mf)(a)?a(e,o):a,offsetX:i.offsetX,offsetY:i.offsetY,position:"end",autoRotate:!1,style:(0,mX.pi)({textAlign:"start",textBaseline:"middle"},i.style)}});n.annotation().line(s)}}))}return e}}function Brt(t){var e=t.chart,n=t.options,r=n.data,i=void 0===r?[]:r,o=Frt(i,i,{yField:n.yField,maxSize:n.maxSize,minSize:n.minSize});return e.data(o),t}function $rt(t){var e=t.chart,n=t.options,r=n.xField,i=n.yField,o=n.color,a=n.tooltip,s=n.label,l=n.shape,c=void 0===l?"funnel":l,u=n.funnelStyle,h=n.state,p=bnt(a,[r,i]),d=p.fields,f=p.formatter;return Cnt({chart:e,options:{type:"interval",xField:r,yField:Prt,colorField:r,tooltipFields:(0,yX.kJ)(d)&&d.concat([Irt,Ort]),mapping:{shape:c,tooltip:f,color:o,style:u},label:s,state:h}}),Eet(t.chart,"interval").adjust("symmetric"),t}function jrt(t){var e=t.chart,n=t.options.isTransposed;return e.coordinate({type:"rect",actions:n?[]:[["transpose"],["scale",1,-1]]}),t}function Urt(t){var e=t.options,n=t.chart,r=e.maxSize,i=(0,yX.U2)(n,["geometries","0","dataArray"],[]),o=(0,yX.U2)(n,["options","data","length"]),a=(0,yX.UI)(i,(function(t){return(0,yX.U2)(t,["0","nextPoints","0","x"])*o-.5}));return zrt((function(t,e,n,i){var o=r-(r-t[Prt])/2;return(0,mX.pi)((0,mX.pi)({},i),{start:[a[e-1]||e-.5,o],end:[a[e-1]||e-.5,o+.05]})}))(t),t}function Vrt(t){return Cet(Brt,$rt,jrt,Urt)(t)}function Hrt(t){var e,n=t.chart,r=t.options,i=r.data,o=void 0===i?[]:i,a=r.yField;return n.data(o),n.scale(((e={})[a]={sync:!0},e)),t}function Grt(t){var e=t.chart,n=t.options,r=n.data,i=n.xField,o=n.yField,a=n.color,s=n.compareField,l=n.isTransposed,c=n.tooltip,u=n.maxSize,h=n.minSize,p=n.label,d=n.funnelStyle,f=n.state,g=n.showFacetTitle;return e.facet("mirror",{fields:[s],transpose:!l,padding:l?0:[32,0,0,0],showTitle:g,eachView:function(t,e){var n=l?e.rowIndex:e.columnIndex;l||t.coordinate({type:"rect",actions:[["transpose"],["scale",0===n?-1:1,-1]]});var g=Frt(e.data,r,{yField:o,maxSize:u,minSize:h});t.data(g);var m=bnt(c,[i,o,s]),y=m.fields,v=m.formatter,x=l?{offset:0===n?10:-23,position:0===n?"bottom":"top"}:{offset:10,position:"left",style:{textAlign:0===n?"end":"start"}};Cnt({chart:t,options:{type:"interval",xField:i,yField:Prt,colorField:i,tooltipFields:(0,yX.kJ)(y)&&y.concat([Irt,Ort]),mapping:{shape:"funnel",tooltip:v,color:a,style:d},label:!1!==p&&bet({},x,p),state:f}})}}),t}function Wrt(t){var e=t.chart,n=t.index,r=t.options,i=r.conversionTag,o=r.isTransposed;((0,yX.hj)(n)?[e]:e.views).forEach((function(t,e){var a=(0,yX.U2)(t,["geometries","0","dataArray"],[]),s=(0,yX.U2)(t,["options","data","length"]),l=(0,yX.UI)(a,(function(t){return(0,yX.U2)(t,["0","nextPoints","0","x"])*s-.5}));zrt((function(t,r,a,s){var c=0===(n||e)?-1:1;return bet({},s,{start:[l[r-1]||r-.5,t[Prt]],end:[l[r-1]||r-.5,t[Prt]+.05],text:o?{style:{textAlign:"start"}}:{offsetX:!1!==i?c*i.offsetX:0,style:{textAlign:0===(n||e)?"end":"start"}}})}))(bet({},{chart:t,options:r}))}))}function Xrt(t){return t.chart.once("beforepaint",(function(){return Wrt(t)})),t}function qrt(t){var e=t.chart,n=t.options,r=n.data,i=void 0===r?[]:r,o=n.yField,a=(0,yX.u4)(i,(function(t,e){return t+(e[o]||0)}),0),s=(0,yX.UT)(i,o)[o],l=(0,yX.UI)(i,(function(t,e){var n=[],r=[];if(t[Art]=(t[o]||0)/a,e){var l=i[e-1][Drt],c=i[e-1][Rrt];n[0]=l[3],r[0]=c[3],n[1]=l[2],r[1]=c[2]}else n[0]=-.5,r[0]=1,n[1]=.5,r[1]=1;return r[2]=r[1]-t[Art],n[2]=(r[2]+1)/4,r[3]=r[2],n[3]=-n[2],t[Drt]=n,t[Rrt]=r,t[Irt]=(t[o]||0)/s,t[Ort]=[(0,yX.U2)(i,[e-1,o]),t[o]],t}));return e.data(l),t}function Yrt(t){var e=t.chart,n=t.options,r=n.xField,i=n.yField,o=n.color,a=n.tooltip,s=n.label,l=n.funnelStyle,c=n.state,u=bnt(a,[r,i]),h=u.fields,p=u.formatter;return Cnt({chart:e,options:{type:"polygon",xField:Drt,yField:Rrt,colorField:r,tooltipFields:(0,yX.kJ)(h)&&h.concat([Irt,Ort]),label:s,state:c,mapping:{tooltip:p,color:o,style:l}}}),t}function Zrt(t){var e=t.chart,n=t.options.isTransposed;return e.coordinate({type:"rect",actions:n?[["transpose"],["reflect","x"]]:[]}),t}function Krt(t){return zrt((function(t,e,n,r){return(0,mX.pi)((0,mX.pi)({},r),{start:[t[Drt][1],t[Rrt][1]],end:[t[Drt][1]+.05,t[Rrt][1]]})}))(t),t}function Jrt(t){var e,n=t.chart,r=t.options,i=r.data,o=void 0===i?[]:i,a=r.yField;return n.data(o),n.scale(((e={})[a]={sync:!0},e)),t}function Qrt(t){var e=t.chart,n=t.options,r=n.seriesField,i=n.isTransposed,o=n.showFacetTitle;return e.facet("rect",{fields:[r],padding:[i?0:32,10,0,10],showTitle:o,eachView:function(e,n){Vrt(bet({},t,{chart:e,options:{data:n.data}}))}}),t}var tit=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rendering=!1,e}return(0,mX.ZT)(e,t),e.prototype.change=function(t){var e=this;if(!this.rendering){var n=t.seriesField,r=t.compareField,i=r?Wrt:Urt,o=this.context.view,a=n||r?o.views:[o];(0,yX.UI)(a,(function(n,r){var o=n.getController("annotation"),a=(0,yX.hX)((0,yX.U2)(o,["option"],[]),(function(t){return t.name!==Nrt}));o.clear(!0),(0,yX.S6)(a,(function(t){"object"===typeof t&&n.annotation()[t.type](t)}));var s=(0,yX.U2)(n,["filteredData"],n.getOptions().data);i({chart:n,index:r,options:(0,mX.pi)((0,mX.pi)({},t),{filteredData:Frt(s,s,t)})}),n.filterData(s),e.rendering=!0,n.render(!0)}))}this.rendering=!1},e}(n0),eit="funnel-conversion-tag",nit="funnel-afterrender",rit={trigger:"afterrender",action:"".concat(eit,":change")};function iit(t){var e,n=t.options,r=n.compareField,i=n.xField,o=n.yField,a=n.locale,s=n.funnelStyle,l=n.data,c=_nt(a);return(r||s)&&(e=function(t){return bet({},r&&{lineWidth:1,stroke:"#fff"},(0,yX.mf)(s)?s(t):s)}),bet({options:{label:r?{fields:[i,o,r,Irt,Ort],formatter:function(t){return"".concat(t[o])}}:{fields:[i,o,Irt,Ort],offset:0,position:"middle",formatter:function(t){return"".concat(t[i]," ").concat(t[o])}},tooltip:{title:i,formatter:function(t){return{name:t[i],value:t[o]}}},conversionTag:{formatter:function(t){return"".concat(c.get(["conversionTag","label"]),": ").concat(art.apply(void 0,t[Ort]))}}}},t,{options:{funnelStyle:e,data:(0,yX.d9)(l)}})}function oit(t){var e=t.options,n=e.compareField,r=e.dynamicHeight;return e.seriesField?function(t){return Cet(Jrt,Qrt)(t)}(t):n?function(t){return Cet(Hrt,Grt,Xrt)(t)}(t):r?function(t){return Cet(qrt,Yrt,Zrt,Krt)(t)}(t):Vrt(t)}function ait(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return Cet(dnt(((e={})[o]=r,e[a]=i,e)))(t)}function sit(t){return t.chart.axis(!1),t}function lit(t){var e=t.chart,n=t.options.legend;return!1===n?e.legend(!1):e.legend(n),t}function cit(t){var e=t.chart,n=t.options,r=n.interactions,i=n.dynamicHeight;return(0,yX.S6)(r,(function(t){!1===t.enable?e.removeInteraction(t.type):e.interaction(t.type,t.cfg||{})})),i?e.removeInteraction(nit):e.interaction(nit,{start:[(0,mX.pi)((0,mX.pi)({},rit),{arg:n})]}),t}function uit(t){return Cet(iit,oit,ait,sit,ant,cit,lit,lnt,cnt,fnt())(t)}s0(eit,tit),f1(nit,{start:[rit]});var hit,pit=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="funnel",e}return(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return Lrt},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return uit},e.prototype.setState=function(t,e,n){void 0===n&&(n=!0);var r=Met(this.chart);(0,yX.S6)(r,(function(r){e(r.getData())&&r.setState(t,n)}))},e.prototype.getStates=function(){var t=Met(this.chart),e=[];return(0,yX.S6)(t,(function(t){var n=t.getData(),r=t.getStates();(0,yX.S6)(r,(function(r){e.push({data:n,state:r,geometry:t.geometry,element:t})}))})),e},e.CONVERSATION_FIELD=Ort,e.PERCENT_FIELD=Irt,e.TOTAL_PERCENT_FIELD=Art,e}(Lnt),dit="range",fit="type",git="percent",mit="#f0f0f0",yit="indicator-view",vit="range-view",xit={percent:0,range:{ticks:[]},innerRadius:.9,radius:.95,startAngle:-7/6*Math.PI,endAngle:1/6*Math.PI,syncViewPadding:!0,axis:{line:null,label:{offset:-24,style:{textAlign:"center",textBaseline:"middle"}},subTickLine:{length:-8},tickLine:{length:-12},grid:null},indicator:{pointer:{style:{lineWidth:5,lineCap:"round"}},pin:{style:{r:9.75,lineWidth:4.5,fill:"#fff"}}},statistic:{title:!1},meta:(hit={},hit[dit]={sync:"v"},hit[git]={sync:"v",tickCount:5,tickInterval:.2},hit),animation:!1};function _it(t){var e;return[(e={},e[git]=(0,yX.uZ)(t,0,1),e)]}function bit(t,e){var n=(0,yX.U2)(e,["ticks"],[]),r=(0,yX.dp)(n)?(0,yX.jj)(n):[0,(0,yX.uZ)(t,0,1),1];return r[0]||r.shift(),function(t,e){return t.map((function(n,r){var i;return(i={})[dit]=n-(t[r-1]||0),i[fit]="".concat(r),i[git]=e,i}))}(r,t)}function wit(t){var e=t.chart,n=t.options,r=n.percent,i=n.range,o=n.radius,a=n.innerRadius,s=n.startAngle,l=n.endAngle,c=n.axis,u=n.indicator,h=n.gaugeStyle,p=n.type,d=n.meter,f=i.color,g=i.width;if(u){var m=_it(r),y=e.createView({id:yit});y.data(m),y.point().position("".concat(git,"*1")).shape(u.shape||"gauge-indicator").customInfo({defaultColor:e.getTheme().defaultColor,indicator:u}),y.coordinate("polar",{startAngle:s,endAngle:l,radius:a*o}),y.axis(git,c),y.scale(git,het(c,aet))}var v=bit(r,n.range),x=e.createView({id:vit});x.data(v);var _=(0,yX.HD)(f)?[f,mit]:f;return Mnt({chart:x,options:{xField:"1",yField:dit,seriesField:fit,rawFields:[git],isStack:!0,interval:{color:_,style:h,shape:"meter"===p?"meter-gauge":null},args:{zIndexReversed:!0,sortZIndex:!0},minColumnWidth:g,maxColumnWidth:g}}).ext.geometry.customInfo({meter:d}),x.coordinate("polar",{innerRadius:a,radius:o,startAngle:s,endAngle:l}).transpose(),t}function Sit(t){var e;return Cet(dnt(((e={range:{min:0,max:1,maxLimit:1,minLimit:0}})[git]={},e)))(t)}function Cit(t,e){var n=t.chart,r=t.options,i=r.statistic,o=r.percent;if(n.getController("annotation").clear(!0),i){var a=i.content,s=void 0;a&&(s=bet({},{content:"".concat((100*o).toFixed(2),"%"),style:{opacity:.75,fontSize:"30px",lineHeight:1,textAlign:"center",color:"rgba(44,53,66,0.85)"}},a)),Bet(n,{statistic:(0,mX.pi)((0,mX.pi)({},i),{content:s})},{percent:o})}return e&&n.render(!0),t}function Eit(t){var e=t.chart,n=t.options.tooltip;return n?e.tooltip(bet({showTitle:!1,showMarkers:!1,containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',domStyles:{"g2-tooltip":{padding:"4px 8px",fontSize:"10px"}},customContent:function(t,e){var n=(0,yX.U2)(e,[0,"data",git],0);return"".concat((100*n).toFixed(2),"%")}},n)):e.tooltip(!1),t}function kit(t){return t.chart.legend(!1),t}function Mit(t){return Cet(cnt,lnt,wit,Sit,Eit,Cit,snt,fnt(),kit)(t)}E2("point","gauge-indicator",{draw:function(t,e){var n=t.customInfo,r=n.indicator,i=n.defaultColor,o=r,a=o.pointer,s=o.pin,l=e.addGroup(),c=this.parsePoint({x:0,y:0});return a&&l.addShape("line",{name:"pointer",attrs:(0,mX.pi)({x1:c.x,y1:c.y,x2:t.x,y2:t.y,stroke:i},a.style)}),s&&l.addShape("circle",{name:"pin",attrs:(0,mX.pi)({x:c.x,y:c.y,stroke:i},s.style)}),l}}),E2("interval","meter-gauge",{draw:function(t,e){var n=t.customInfo.meter,r=void 0===n?{}:n,i=r.steps,o=void 0===i?50:i,a=r.stepRatio,s=void 0===a?.5:a;o=o<1?1:o,s=(0,yX.uZ)(s,0,1);var l=this.coordinate,c=l.startAngle,u=l.endAngle,h=0;s>0&&s<1&&(h=(u-c)/o/(s/(1-s)+1-1/o));for(var p=h/(1-s)*s,d=e.addGroup(),f=this.coordinate.getCenter(),g=this.coordinate.getRadius(),m=c3.getAngle(t,this.coordinate),y=m.startAngle,v=m.endAngle,x=y;x<v;){var _=void 0,b=(x-c)%(p+h);_=b<p?x+(p-b):(x+=p+h-b)+p;var w=c3.getSectorPath(f.x,f.y,g,x,Math.min(_,v),g*this.coordinate.innerRadius);d.addShape("path",{name:"meter-gauge",attrs:{path:w,fill:t.color,stroke:t.color,lineWidth:.5}}),x=_+h}return d}});var Tit=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="gauge",e}return(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return xit},e.prototype.changeData=function(t){this.chart.emit(vX.BEFORE_CHANGE_DATA,X1.fromData(this.chart,vX.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:t});var e=this.chart.views.find((function(t){return t.id===yit}));e&&e.data(_it(t));var n=this.chart.views.find((function(t){return t.id===vit}));n&&n.data(bit(t,this.options.range)),Cit({chart:this.chart,options:this.options},!0),this.chart.emit(vX.AFTER_CHANGE_DATA,X1.fromData(this.chart,vX.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Mit},e}(Lnt);function Iit(t,e,n){if(1===n)return[0,e];var r=Math.floor(t/e);return[e*r,e*(r+1)]}function Pit(t,e,n,r,i){var o=(0,yX.d9)(t);(0,yX.MR)(o,e);var a=(0,yX.I)(o,e),s=(0,yX.rx)(a),l=s.max-s.min,c=n;if(!n&&r&&(c=r>1?l/(r-1):s.max),!n&&!r){var u=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}(a);c=l/u}var h={},p=(0,yX.vM)(o,i);(0,yX.xb)(p)?(0,yX.S6)(o,(function(t){var n=Iit(t[e],c,r),i="".concat(n[0],"-").concat(n[1]);(0,yX.wH)(h,i)||(h[i]={range:n,count:0}),h[i].count+=1})):Object.keys(p).forEach((function(t){(0,yX.S6)(p[t],(function(n){var o=Iit(n[e],c,r),a="".concat(o[0],"-").concat(o[1]),s="".concat(a,"-").concat(t);(0,yX.wH)(h,s)||(h[s]={range:o,count:0},h[s][i]=t),h[s].count+=1}))}));var d=[];return(0,yX.S6)(h,(function(t){d.push(t)})),d}var Oit="range",Ait="count",Dit=bet({},Lnt.getDefaultOptions(),{columnStyle:{stroke:"#FFFFFF"},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});function Rit(t){var e=t.chart,n=t.options,r=n.data,i=n.binField,o=n.binNumber,a=n.binWidth,s=n.color,l=n.stackField,c=n.legend,u=n.columnStyle,h=Pit(r,i,a,o,l);return e.data(h),Mnt(bet({},t,{options:{xField:Oit,yField:Ait,seriesField:l,isStack:!0,interval:{color:s,style:u}}})),c&&l?e.legend(l,c):e.legend(!1),t}function Lit(t){var e,n=t.options,r=n.xAxis,i=n.yAxis;return Cet(dnt(((e={})[Oit]=r,e[Ait]=i,e)))(t)}function Nit(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis;return!1===r?e.axis(Oit,!1):e.axis(Oit,r),!1===i?e.axis(Ait,!1):e.axis(Ait,i),t}function Fit(t){var e=t.chart,n=t.options.label,r=Eet(e,"interval");if(n){var i=n.callback,o=(0,mX._T)(n,["callback"]);r.label({fields:[Ait],callback:i,cfg:Tet(o)})}else r.label(!1);return t}function zit(t){return Cet(cnt,int("columnStyle"),Rit,Lit,Nit,unt,Fit,ant,snt,lnt)(t)}var Bit=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="histogram",e}return(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return Dit},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.options,n=e.binField,r=e.binNumber,i=e.binWidth,o=e.stackField;this.chart.changeData(Pit(t,n,i,r,o))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return zit},e}(Lnt),$it=bet({},Lnt.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},legend:{position:"top-left",radio:{}},isStack:!1}),jit=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.active=function(){var t=this.getView(),e=this.context.event;if(e.data){var n=e.data.items,r=t.geometries.filter((function(t){return"point"===t.type}));(0,yX.S6)(r,(function(t){(0,yX.S6)(t.elements,(function(t){var e=-1!==(0,yX.cx)(n,(function(e){return e.data===t.data}));t.setState("active",e)}))}))}},e.prototype.reset=function(){var t=this.getView().geometries.filter((function(t){return"point"===t.type}));(0,yX.S6)(t,(function(t){(0,yX.S6)(t.elements,(function(t){t.setState("active",!1)}))}))},e.prototype.getView=function(){return this.context.view},e}(n0);s0("marker-active",jit),f1("marker-active",{start:[{trigger:"tooltip:show",action:"marker-active:active"}],end:[{trigger:"tooltip:hide",action:"marker-active:reset"}]});var Uit=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="line",e}return(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return $it},e.prototype.changeData=function(t){this.updateOption({data:t});Bnt({chart:this.chart,options:this.options}),this.chart.changeData(t)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Gnt},e}(Lnt),Vit=bet({},Lnt.getDefaultOptions(),{legend:{position:"right",radio:{}},tooltip:{shared:!1,showTitle:!1,showMarkers:!1},label:{layout:{type:"limit-in-plot",cfg:{action:"ellipsis"}}},pieStyle:{stroke:"white",lineWidth:1},statistic:{title:{style:{fontWeight:300,color:"#4B535E",textAlign:"center",fontSize:"20px",lineHeight:1}},content:{style:{fontWeight:"bold",color:"rgba(44,53,66,0.85)",textAlign:"center",fontSize:"32px",lineHeight:1}}},theme:{components:{annotation:{text:{animate:!1}}}}}),Hit=[1,0,0,0,1,0,0,0,1];function Git(t,e){var n=e?(0,mX.ev)([],e,!0):(0,mX.ev)([],Hit,!0);return c3.transform(n,t)}var Wit=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getActiveElements=function(){var t=c3.getDelegationObject(this.context);if(t){var e=this.context.view,n=t.component,r=t.item,i=n.get("field");if(i)return e.geometries[0].elements.filter((function(t){return t.getModel().data[i]===r.value}))}return[]},e.prototype.getActiveElementLabels=function(){var t=this.context.view,e=this.getActiveElements();return t.geometries[0].labelsContainer.getChildren().filter((function(t){return e.find((function(e){return(0,yX.Xy)(e.getData(),t.get("data"))}))}))},e.prototype.transfrom=function(t){void 0===t&&(t=7.5);var e=this.getActiveElements(),n=this.getActiveElementLabels();e.forEach((function(e,r){var i=n[r],o=e.geometry.coordinate;if(o.isPolar&&o.isTransposed){var a=c3.getAngle(e.getModel(),o),s=(a.startAngle+a.endAngle)/2,l=t,c=l*Math.cos(s),u=l*Math.sin(s);e.shape.setMatrix(Git([["t",c,u]])),i.setMatrix(Git([["t",c,u]]))}}))},e.prototype.active=function(){this.transfrom()},e.prototype.reset=function(){this.transfrom(0)},e}(n0);var Xit=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getAnnotations=function(t){return(t||this.context.view).getController("annotation").option},e.prototype.getInitialAnnotation=function(){return this.initialAnnotation},e.prototype.init=function(){var t=this,e=this.context.view;e.removeInteraction("tooltip"),e.on("afterchangesize",(function(){var n=t.getAnnotations(e);t.initialAnnotation=n}))},e.prototype.change=function(t){var e=this.context,n=e.view,r=e.event;this.initialAnnotation||(this.initialAnnotation=this.getAnnotations());var i=(0,yX.U2)(r,["data","data"]);if(r.type.match("legend-item")){var o=c3.getDelegationObject(this.context),a=n.getGroupedFields()[0];if(o&&a){var s=o.item;i=n.getData().find((function(t){return t[a]===s.value}))}}if(i){var l=(0,yX.U2)(t,"annotations",[]),c=(0,yX.U2)(t,"statistic",{});n.getController("annotation").clear(!0),(0,yX.S6)(l,(function(t){"object"===typeof t&&n.annotation()[t.type](t)})),zet(n,{statistic:c,plotType:"pie"},i),n.render(!0)}var u=function(t){var e,n=t.event.target;return n&&(e=n.get("element")),e}(this.context);u&&u.shape.toFront()},e.prototype.reset=function(){var t=this.context.view;t.getController("annotation").clear(!0);var e=this.getInitialAnnotation();(0,yX.S6)(e,(function(e){t.annotation()[e.type](e)})),t.render(!0)},e}(n0),qit="pie-statistic";function Yit(t,e){var n;switch(t){case"inner":return n="-30%",(0,yX.HD)(e)&&e.endsWith("%")?.01*parseFloat(e)>0?n:e:e<0?e:n;case"outer":return n=12,(0,yX.HD)(e)&&e.endsWith("%")?.01*parseFloat(e)<0?n:e:e>0?e:n;default:return e}}function Zit(t,e){return(0,yX.yW)(fet(t,e),(function(t){return 0===t[e]}))}function Kit(t){var e=t.chart,n=t.options,r=n.data,i=n.angleField,o=n.colorField,a=n.color,s=n.pieStyle,l=n.shape,c=fet(r,i);if(Zit(c,i)){var u="$$percentage$$";c=c.map((function(t){var e;return(0,mX.pi)((0,mX.pi)({},t),((e={})[u]=1/c.length,e))})),e.data(c),Mnt(bet({},t,{options:{xField:"1",yField:u,seriesField:o,isStack:!0,interval:{color:a,shape:l,style:s},args:{zIndexReversed:!0,sortZIndex:!0}}}))}else{e.data(c),Mnt(bet({},t,{options:{xField:"1",yField:i,seriesField:o,isStack:!0,interval:{color:a,shape:l,style:s},args:{zIndexReversed:!0,sortZIndex:!0}}}))}return t}function Jit(t){var e,n=t.chart,r=t.options,i=r.meta,o=r.colorField,a=bet({},i);return n.scale(a,((e={})[o]={type:"cat"},e)),t}function Qit(t){var e=t.chart,n=t.options,r=n.radius,i=n.innerRadius,o=n.startAngle,a=n.endAngle;return e.coordinate({type:"theta",cfg:{radius:r,innerRadius:i,startAngle:o,endAngle:a}}),t}function tot(t){var e=t.chart,n=t.options,r=n.label,i=n.colorField,o=n.angleField,a=e.geometries[0];if(r){var s=r.callback,l=Tet((0,mX._T)(r,["callback"]));if(l.content){var c=l.content;l.content=function(t,n,r){var a=t[i],s=t[o],l=e.getScaleByField(o),u=null===l||void 0===l?void 0:l.scale(s);return(0,yX.mf)(c)?c((0,mX.pi)((0,mX.pi)({},t),{percent:u}),n,r):(0,yX.HD)(c)?$et(c,{value:s,name:a,percentage:(0,yX.hj)(u)&&!(0,yX.UM)(s)?"".concat((100*u).toFixed(2),"%"):null}):c}}var u=l.type?{inner:"",outer:"pie-outer",spider:"pie-spider"}[l.type]:"pie-outer",h=l.layout?(0,yX.kJ)(l.layout)?l.layout:[l.layout]:[];l.layout=(u?[{type:u}]:[]).concat(h),a.label({fields:i?[o,i]:[o],callback:s,cfg:(0,mX.pi)((0,mX.pi)({},l),{offset:Yit(l.type,l.offset),type:"pie"})})}else a.label(!1);return t}function eot(t){var e=t.innerRadius,n=t.statistic,r=t.angleField,i=t.colorField,o=t.meta,a=_nt(t.locale);if(e&&n){var s=bet({},Vit.statistic,n),l=s.title,c=s.content;return!1!==l&&(l=bet({},{formatter:function(t){var e=t?t[i]:(0,yX.UM)(l.content)?a.get(["statistic","total"]):l.content,n=(0,yX.U2)(o,[i,"formatter"])||function(t){return t};return n(e)}},l)),!1!==c&&(c=bet({},{formatter:function(t,e){var n=t?t[r]:function(t,e){var n=null;return(0,yX.S6)(t,(function(t){"number"===typeof t[e]&&(n+=t[e])})),n}(e,r),i=(0,yX.U2)(o,[r,"formatter"])||function(t){return t};return t||(0,yX.UM)(c.content)?i(n):c.content}},c)),bet({},{statistic:{title:l,content:c}},t)}return t}function not(t){var e=t.chart,n=eot(t.options),r=n.innerRadius,i=n.statistic;return e.getController("annotation").clear(!0),Cet(fnt())(t),r&&i&&zet(e,{statistic:i,plotType:"pie"}),t}function rot(t){var e=t.chart,n=t.options,r=n.tooltip,i=n.colorField,o=n.angleField,a=n.data;if(!1===r)e.tooltip(r);else if(e.tooltip(bet({},r,{shared:!1})),Zit(a,o)){var s=(0,yX.U2)(r,"fields"),l=(0,yX.U2)(r,"formatter");(0,yX.xb)((0,yX.U2)(r,"fields"))&&(s=[i,o],l=l||function(t){return{name:t[i],value:(0,yX.BB)(t[o])}}),e.geometries[0].tooltip(s.join("*"),Snt(s,l))}return t}function iot(t){var e=t.chart,n=eot(t.options),r=n.interactions,i=n.statistic,o=n.annotations;return(0,yX.S6)(r,(function(t){var n,r;if(!1===t.enable)e.removeInteraction(t.type);else if("pie-statistic-active"===t.type){var a=[];(null===(n=t.cfg)||void 0===n?void 0:n.start)||(a=[{trigger:"element:mouseenter",action:"".concat(qit,":change"),arg:{statistic:i,annotations:o}}]),(0,yX.S6)(null===(r=t.cfg)||void 0===r?void 0:r.start,(function(t){a.push((0,mX.pi)((0,mX.pi)({},t),{arg:{statistic:i,annotations:o}}))})),e.interaction(t.type,bet({},t.cfg,{start:a}))}else e.interaction(t.type,t.cfg||{})})),t}function oot(t){return Cet(int("pieStyle"),Kit,Jit,cnt,Qit,ont,rot,tot,unt,not,iot,lnt)(t)}s0(qit,Xit),f1("pie-statistic-active",{start:[{trigger:"element:mouseenter",action:"pie-statistic:change"}],end:[{trigger:"element:mouseleave",action:"pie-statistic:reset"}]}),s0("pie-legend",Wit),f1("pie-legend-active",{start:[{trigger:"legend-item:mouseenter",action:"pie-legend:active"}],end:[{trigger:"legend-item:mouseleave",action:"pie-legend:reset"}]});var aot=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="pie",e}return(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return Vit},e.prototype.changeData=function(t){this.chart.emit(vX.BEFORE_CHANGE_DATA,X1.fromData(this.chart,vX.BEFORE_CHANGE_DATA,null));var e=this.options,n=this.options.angleField,r=fet(e.data,n),i=fet(t,n);Zit(r,n)||Zit(i,n)?this.update({data:t}):(this.updateOption({data:t}),this.chart.data(i),not({chart:this.chart,options:this.options}),this.chart.render(!0)),this.chart.emit(vX.AFTER_CHANGE_DATA,X1.fromData(this.chart,vX.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return oot},e}(Lnt),sot=["#FAAD14","#E8EDF3"],lot={percent:.2,color:sot,animation:{}};function cot(t){var e=(0,yX.uZ)(Iet(t)?t:0,0,1);return[{current:"".concat(e),type:"current",percent:e},{current:"".concat(e),type:"target",percent:1}]}function uot(t){var e=t.chart,n=t.options,r=n.percent,i=n.progressStyle,o=n.color,a=n.barWidthRatio;return e.data(cot(r)),Mnt(bet({},t,{options:{xField:"current",yField:"percent",seriesField:"type",widthRatio:a,interval:{style:i,color:(0,yX.HD)(o)?[o,sot[1]]:o},args:{zIndexReversed:!0,sortZIndex:!0}}})),e.tooltip(!1),e.axis(!1),e.legend(!1),t}function hot(t){return t.chart.coordinate("rect").transpose(),t}function pot(t){return Cet(uot,dnt({}),hot,lnt,cnt,fnt())(t)}var dot=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="process",e}return(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return lot},e.prototype.changeData=function(t){this.updateOption({percent:t}),this.chart.changeData(cot(t))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return pot},e}(Lnt);function fot(t){var e=t.chart,n=t.options,r=n.innerRadius,i=n.radius;return e.coordinate("theta",{innerRadius:r,radius:i}),t}function got(t,e){var n=t.chart,r=t.options,i=r.innerRadius,o=r.statistic,a=r.percent,s=r.meta;if(n.getController("annotation").clear(!0),i&&o){var l=(0,yX.U2)(s,["percent","formatter"])||function(t){return"".concat((100*t).toFixed(2),"%")},c=o.content;c&&(c=bet({},c,{content:(0,yX.UM)(c.content)?l(a):c.content})),zet(n,{statistic:(0,mX.pi)((0,mX.pi)({},o),{content:c}),plotType:"ring-progress"},{percent:a})}return e&&n.render(!0),t}function mot(t){return Cet(uot,dnt({}),fot,got,lnt,cnt,fnt())(t)}var yot={percent:.2,innerRadius:.8,radius:.98,color:["#FAAD14","#E8EDF3"],statistic:{title:!1,content:{style:{fontSize:"14px",fontWeight:300,fill:"#4D4D4D",textAlign:"center",textBaseline:"middle"}}},animation:{}},vot=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="ring-process",e}return(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return yot},e.prototype.changeData=function(t){this.chart.emit(vX.BEFORE_CHANGE_DATA,X1.fromData(this.chart,vX.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:t}),this.chart.data(cot(t)),got({chart:this.chart,options:this.options},!0),this.chart.emit(vX.AFTER_CHANGE_DATA,X1.fromData(this.chart,vX.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return mot},e}(Lnt),xot=n(7046),_ot={exp:xot.regressionExp,linear:xot.regressionLinear,loess:xot.regressionLoess,log:xot.regressionLog,poly:xot.regressionPoly,pow:xot.regressionPow,quad:xot.regressionQuad};var bot=function(t,e){var n=e.view,r=e.options,i=r.xField,o=r.yField,a=n.getScaleByField(i),s=n.getScaleByField(o),l=t.map((function(t){return n.getCoordinate().convert({x:a.scale(t[0]),y:s.scale(t[1])})}));return Ret(l,!1)},wot=function(t){var e,n=t.options,r=n.xField,i=n.yField,o=n.data,a=n.regressionLine,s=a.type,l=void 0===s?"linear":s,c=a.algorithm,u=a.equation,h=null;if(c)e=(0,yX.kJ)(c)?c:c(o),h=u;else{var p=_ot[l]().x((function(t){return t[r]})).y((function(t){return t[i]}));h=function(t,e){var n,r,i,o=function(t,e){return void 0===e&&(e=4),Math.round(t*Math.pow(10,e))/Math.pow(10,e)},a=function(t){return Number.isFinite(t)?o(t):"?"};switch(t){case"linear":return"y = ".concat(a(e.a),"x + ").concat(a(e.b),", R^2 = ").concat(a(e.rSquared));case"exp":return"y = ".concat(a(e.a),"e^(").concat(a(e.b),"x), R^2 = ").concat(a(e.rSquared));case"log":return"y = ".concat(a(e.a),"ln(x) + ").concat(a(e.b),", R^2 = ").concat(a(e.rSquared));case"quad":return"y = ".concat(a(e.a),"x^2 + ").concat(a(e.b),"x + ").concat(a(e.c),", R^2 = ").concat(a(e.rSquared));case"poly":for(var s="y = ".concat(a(null===(n=e.coefficients)||void 0===n?void 0:n[0])," + ").concat(a(null===(r=e.coefficients)||void 0===r?void 0:r[1]),"x + ").concat(a(null===(i=e.coefficients)||void 0===i?void 0:i[2]),"x^2"),l=3;l<e.coefficients.length;++l)s+=" + ".concat(a(e.coefficients[l]),"x^").concat(l);return"".concat(s,", R^2 = ").concat(a(e.rSquared));case"pow":return"y = ".concat(a(e.a),"x^").concat(a(e.b),", R^2 = ").concat(a(e.rSquared))}return null}(l,e=p(o))}return[bot(e,t),h]},Sot=function(t){var e,n=t.meta,r=void 0===n?{}:n,i=t.xField,o=t.yField,a=t.data,s=a[0][i],l=a[0][o],c=s>0,u=l>0;function h(t,e){var n=(0,yX.U2)(r,[t]);function i(t){return(0,yX.U2)(n,t)}var o={};return"x"===e?((0,yX.hj)(s)&&((0,yX.hj)(i("min"))||(o.min=c?0:2*s),(0,yX.hj)(i("max"))||(o.max=c?2*s:0)),o):((0,yX.hj)(l)&&((0,yX.hj)(i("min"))||(o.min=u?0:2*l),(0,yX.hj)(i("max"))||(o.max=u?2*l:0)),o)}return(0,mX.pi)((0,mX.pi)({},r),((e={})[i]=(0,mX.pi)((0,mX.pi)({},r[i]),h(i,"x")),e[o]=(0,mX.pi)((0,mX.pi)({},r[o]),h(o,"y")),e))};function Cot(t){var e=t.data,n=void 0===e?[]:e,r=t.xField,i=t.yField;if(n.length){for(var o=!0,a=!0,s=n[0],l=void 0,c=1;c<n.length&&(l=n[c],s[r]!==l[r]&&(o=!1),s[i]!==l[i]&&(a=!1),o||a);c++)s=l;var u=[];o&&u.push(r),a&&u.push(i);var h=het(Sot(t),u);return bet({},t,{meta:h})}return t}function Eot(t){var e=t.chart,n=t.options,r=n.data,i=n.type,o=n.color,a=n.shape,s=n.pointStyle,l=n.shapeField,c=n.colorField,u=n.xField,h=n.yField,p=n.sizeField,d=n.size,f=n.tooltip;p&&(d||(d=[2,8]),(0,yX.hj)(d)&&(d=[d,d])),f&&!f.fields&&(f=(0,mX.pi)((0,mX.pi)({},f),{fields:[u,h,c,p,l]})),e.data(r),Int(bet({},t,{options:{seriesField:c,point:{color:o,shape:a,size:d,style:s},tooltip:f}}));var g=Eet(e,"point");return i&&g.adjust(i),t}function kot(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField,s=Cot(n);return Cet(dnt(((e={})[o]=r,e[a]=i,e)))(bet({},t,{options:s}))}function Mot(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return e.axis(o,r),e.axis(a,i),t}function Tot(t){var e=t.chart,n=t.options,r=n.legend,i=n.colorField,o=n.shapeField,a=n.sizeField,s=n.shapeLegend,l=n.sizeLegend,c=!1!==r;return i&&e.legend(i,!!c&&r),o&&(s?e.legend(o,s):e.legend(o,!1!==s&&r)),a&&e.legend(a,l||!1),c||s||l||e.legend(!1),t}function Iot(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,o=Eet(e,"point");if(r){var a=r.callback,s=(0,mX._T)(r,["callback"]);o.label({fields:[i],callback:a,cfg:Tet(s)})}else o.label(!1);return t}function Pot(t){var e=t.options.quadrant,n=[];if(e){var r=e.xBaseline,i=void 0===r?0:r,o=e.yBaseline,a=void 0===o?0:o,s=e.labels,l=e.regionStyle,c=e.lineStyle,u=function(t,e){var n=10;return{regionStyle:[{position:{start:[t,"max"],end:["max",e]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:["min","max"],end:[t,e]},style:{fill:"#a3dda1",opacity:.4}},{position:{start:["min",e],end:[t,"min"]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:[t,e],end:["max","min"]},style:{fill:"#a3dda1",opacity:.4}}],lineStyle:{stroke:"#9ba29a",lineWidth:1},labelStyle:[{position:["max",e],offsetX:-10,offsetY:-10,style:{textAlign:"right",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",e],offsetX:n,offsetY:-10,style:{textAlign:"left",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",e],offsetX:n,offsetY:n,style:{textAlign:"left",textBaseline:"top",fontSize:14,fill:"#ccc"}},{position:["max",e],offsetX:-10,offsetY:n,style:{textAlign:"right",textBaseline:"top",fontSize:14,fill:"#ccc"}}]}}(i,a);new Array(4).join(",").split(",").forEach((function(t,e){n.push((0,mX.pi)((0,mX.pi)({type:"region",top:!1},u.regionStyle[e].position),{style:bet({},u.regionStyle[e].style,null===l||void 0===l?void 0:l[e])}),(0,mX.pi)({type:"text",top:!0},bet({},u.labelStyle[e],null===s||void 0===s?void 0:s[e])))})),n.push({type:"line",top:!1,start:["min",a],end:["max",a],style:bet({},u.lineStyle,c)},{type:"line",top:!1,start:[i,"min"],end:[i,"max"],style:bet({},u.lineStyle,c)})}return Cet(fnt(n))(t)}function Oot(t){var e=t.options,n=t.chart,r=e.regressionLine;if(r){var i=r.style,o=r.equationStyle,a=void 0===o?{}:o,s=r.top,l=void 0!==s&&s,c=r.showEquation,u=void 0!==c&&c,h={stroke:"#9ba29a",lineWidth:2,opacity:.5},p={x:20,y:20,textAlign:"left",textBaseline:"middle",fontSize:14,fillOpacity:.5};n.annotation().shape({top:l,render:function(t,r){var o=t.addGroup({id:"".concat(n.id,"-regression-line"),name:"regression-line-group"}),s=wot({view:r,options:e}),l=s[0],c=s[1];o.addShape("path",{name:"regression-line",attrs:(0,mX.pi)((0,mX.pi)({path:l},h),i)}),u&&o.addShape("text",{name:"regression-equation",attrs:(0,mX.pi)((0,mX.pi)((0,mX.pi)({},p),a),{text:c})})}})}return t}function Aot(t){var e=t.chart,n=t.options.tooltip;return n?e.tooltip(n):!1===n&&e.tooltip(!1),t}function Dot(t){return Cet(Eot,kot,Mot,Tot,Aot,Iot,rrt,hnt,pnt,snt,Pot,lnt,cnt,Oot)(t)}var Rot=bet({},Lnt.getDefaultOptions(),{size:4,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!0,crosshairs:{type:"xy"}}});f1("drag-move",{start:[{trigger:"plot:mousedown",action:"scale-translate:start"}],processing:[{trigger:"plot:mousemove",action:"scale-translate:translate",throttle:{wait:100,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseup",action:"scale-translate:end"}]});var Lot=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.type="scatter",r.on(vX.BEFORE_RENDER,(function(t){var e,n,i=r,o=i.options,a=i.chart;if((null===(e=t.data)||void 0===e?void 0:e.source)===dtt.FILTER){var s=r.chart.filterData(r.chart.getData());kot({chart:a,options:(0,mX.pi)((0,mX.pi)({},o),{data:s})})}(null===(n=t.data)||void 0===n?void 0:n.source)===dtt.RESET&&kot({chart:a,options:o})})),r}return(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return Rot},e.prototype.changeData=function(t){this.updateOption(Cot(bet({},this.options,{data:t})));var e=this.options;kot({chart:this.chart,options:e}),this.chart.changeData(t)},e.prototype.getSchemaAdaptor=function(){return Dot},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e}(Lnt),Not="$$stock-range$$",Fot="trend",zot="up",Bot="down",$ot=bet({},Lnt.getDefaultOptions(),{tooltip:{showMarkers:!1,showCrosshairs:!0,shared:!0,crosshairs:{type:"xy",follow:!0,text:function(t,e,n){var r;if("x"===t){var i=n[0];r=i?i.title:e}else r=e;return{position:"y"===t?"start":"end",content:r,style:{fill:"#dfdfdf"}}},textBackground:{padding:[2,4],style:{fill:"#666"}}}},interactions:[{type:"tooltip"}],legend:{position:"top-left"},risingFill:"#ef5350",fallingFill:"#26a69a"});function jot(t,e){return(0,yX.UI)(t,(function(t){var n=t&&(0,mX.pi)({},t);if((0,yX.kJ)(e)&&n){var r=e[0],i=e[1],o=e[2],a=e[3];n[Fot]=n[r]<=n[i]?zot:Bot,n[Not]=[n[r],n[i],n[o],n[a]]}return n}))}function Uot(t){var e=t.chart,n=t.options,r=n.yField,i=n.data,o=n.risingFill,a=n.fallingFill,s=n.tooltip,l=n.stockStyle;e.data(jot(i,r));var c=s;return!1!==c&&(c=bet({},{fields:r},c)),Ont(bet({},t,{options:{schema:{shape:"candle",color:[o,a],style:l},yField:Not,seriesField:Fot,rawFields:r,tooltip:c}})),t}function Vot(t){var e,n,r=t.chart,i=t.options,o=i.meta,a=i.xAxis,s=i.yAxis,l=i.xField,c=((e={})[l]={type:"timeCat",tickCount:6},e[Fot]={values:[zot,Bot]},e),u=bet(c,o,((n={})[l]=het(a,aet),n[Not]=het(s,aet),n));return r.scale(u),t}function Hot(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField;return!1===r?e.axis(o,!1):e.axis(o,r),!1===i?e.axis(Not,!1):e.axis(Not,i),t}function Got(t){var e=t.chart,n=t.options.tooltip;return!1!==n?e.tooltip(n):e.tooltip(!1),t}function Wot(t){var e=t.chart,n=t.options.legend;return n?e.legend(Fot,n):!1===n&&e.legend(!1),t}function Xot(t){Cet(cnt,Uot,Vot,Hot,Got,Wot,snt,lnt,fnt(),hnt)(t)}var qot=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="stock",e}return(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return $ot},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Xot},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.options.yField;this.chart.changeData(jot(t,e))},e}(Lnt);function Yot(t){return(0,yX.UI)(t||[],(function(t,e){return{x:"".concat(e),y:t}}))}var Zot="x",Kot="y",Jot={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(t,e){return"".concat((0,yX.U2)(e,[0,"data","y"],0))},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}},showCrosshairs:!0,crosshairs:{type:"x"}},Qot={appendPadding:2,tooltip:(0,mX.pi)({},Jot),animation:{}};function tat(t){var e=t.chart,n=t.options,r=n.data,i=n.color,o=n.areaStyle,a=n.point,s=n.line,l=null===a||void 0===a?void 0:a.state,c=Yot(r);e.data(c);var u=bet({},t,{options:{xField:Zot,yField:Kot,area:{color:i,style:o},line:s,point:a}}),h=bet({},u,{options:{tooltip:!1}}),p=bet({},u,{options:{tooltip:!1,state:l}});return Ent(u),Tnt(h),Int(p),e.axis(!1),e.legend(!1),t}function eat(t){var e,n,r=t.options,i=r.xAxis,o=r.yAxis,a=Yot(r.data);return Cet(dnt(((e={})[Zot]=i,e[Kot]=o,e),((n={})[Zot]={type:"cat"},n[Kot]=pet(a,Kot),n)))(t)}function nat(t){return Cet(int("areaStyle"),tat,eat,ant,cnt,lnt,fnt())(t)}var rat={appendPadding:2,tooltip:(0,mX.pi)({},Jot),color:"l(90) 0:#E5EDFE 1:#ffffff",areaStyle:{fillOpacity:.6},line:{size:1,color:"#5B8FF9"},animation:{}},iat=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="tiny-area",e}return(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return rat},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.chart;eat({chart:e,options:this.options}),e.changeData(Yot(t))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return nat},e}(Lnt);function oat(t){var e=t.chart,n=t.options,r=n.data,i=n.color,o=n.columnStyle,a=n.columnWidthRatio,s=Yot(r);return e.data(s),Mnt(bet({},t,{options:{xField:Zot,yField:Kot,widthRatio:a,interval:{style:o,color:i}}})),e.axis(!1),e.legend(!1),e.interaction("element-active"),t}function aat(t){return Cet(cnt,int("columnStyle"),oat,eat,ant,lnt,fnt())(t)}var sat={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(t,e){return"".concat((0,yX.U2)(e,[0,"data","y"],0))},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}}},lat={appendPadding:2,tooltip:(0,mX.pi)({},sat),animation:{}},cat=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="tiny-column",e}return(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return lat},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.chart;eat({chart:e,options:this.options}),e.changeData(Yot(t))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return aat},e}(Lnt);function uat(t){var e=t.chart,n=t.options,r=n.data,i=n.color,o=n.lineStyle,a=n.point,s=null===a||void 0===a?void 0:a.state,l=Yot(r);e.data(l);var c=bet({},t,{options:{xField:Zot,yField:Kot,line:{color:i,style:o},point:a}}),u=bet({},c,{options:{tooltip:!1,state:s}});return Tnt(c),Int(u),e.axis(!1),e.legend(!1),t}function hat(t){return Cet(uat,eat,cnt,ant,lnt,fnt())(t)}var pat=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="tiny-line",e}return(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return Qot},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.chart;eat({chart:e,options:this.options}),e.changeData(Yot(t))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return hat},e}(Lnt),dat={line:Gnt,pie:oot,column:yrt,bar:Srt,area:Ynt,gauge:Mit,"tiny-line":hat,"tiny-column":aat,"tiny-area":nat,"ring-progress":mot,progress:pot,scatter:Dot,histogram:zit,funnel:uit,stock:Xot},fat={line:Uit,pie:aot,column:Trt,bar:krt,area:Knt,gauge:Tit,"tiny-line":pat,"tiny-column":cat,"tiny-area":iat,"ring-progress":vot,progress:dot,scatter:Lot,histogram:Bit,funnel:pit,stock:qot},gat={pie:{label:!1},column:{tooltip:{showMarkers:!1}},bar:{tooltip:{showMarkers:!1}}};function mat(t,e,n){var r=fat[t];r?(0,dat[t])({chart:e,options:bet({},r.getDefaultOptions(),(0,yX.U2)(gat,t,{}),n)}):console.error("could not find ".concat(t," plot"))}function yat(t){var e=t.chart,n=t.options,r=n.views,i=n.legend;return(0,yX.S6)(r,(function(t){var n=t.region,r=t.data,i=t.meta,o=t.axes,a=t.coordinate,s=t.interactions,l=t.annotations,c=t.tooltip,u=t.geometries,h=e.createView({region:n});h.data(r);var p={};o&&(0,yX.S6)(o,(function(t,e){p[e]=het(t,aet)})),p=bet({},i,p),h.scale(p),o?(0,yX.S6)(o,(function(t,e){h.axis(e,t)})):h.axis(!1),h.coordinate(a),(0,yX.S6)(u,(function(t){var e=Cnt({chart:h,options:t}).ext,n=t.adjust;n&&e.geometry.adjust(n)})),(0,yX.S6)(s,(function(t){!1===t.enable?h.removeInteraction(t.type):h.interaction(t.type,t.cfg)})),(0,yX.S6)(l,(function(t){h.annotation()[t.type]((0,mX.pi)({},t))})),"boolean"===typeof t.animation?h.animate(!1):(h.animate(!0),(0,yX.S6)(h.geometries,(function(e){e.animate(t.animation)}))),c&&(h.interaction("tooltip"),h.tooltip(c))})),i?(0,yX.S6)(i,(function(t,n){e.legend(n,t)})):e.legend(!1),e.tooltip(n.tooltip),t}function vat(t){var e=t.chart,n=t.options,r=n.plots,i=n.data,o=void 0===i?[]:i;return(0,yX.S6)(r,(function(t){var n=t.type,r=t.region,i=t.options,a=void 0===i?{}:i,s=t.top,l=a.tooltip;if(s)mat(n,e,(0,mX.pi)((0,mX.pi)({},a),{data:o}));else{var c=e.createView((0,mX.pi)({region:r},het(a,Rnt)));l&&c.interaction("tooltip"),mat(n,c,(0,mX.pi)({data:o},a))}})),t}function xat(t){var e=t.chart,n=t.options;return e.option("slider",n.slider),t}function _at(t){return Cet(lnt,yat,vat,snt,lnt,cnt,ant,xat,fnt())(t)}var bat=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getAssociationItems=function(t,e){var n,r=this.context.event,i=e||{},o=i.linkField,a=i.dim,s=[];if(null===(n=r.data)||void 0===n?void 0:n.data){var l=r.data.data;(0,yX.S6)(t,(function(t){var e,n,r=o;if("x"===a?r=t.getXScale().field:"y"===a?r=null===(e=t.getYScales().find((function(t){return t.field===r})))||void 0===e?void 0:e.field:r||(r=null===(n=t.getGroupScales()[0])||void 0===n?void 0:n.field),r){var i=(0,yX.UI)(ket(t),(function(e){var n=!1,i=!1,o=(0,yX.kJ)(l)?(0,yX.U2)(l[0],r):(0,yX.U2)(l,r);return function(t,e){var n=t.getModel().data;return(0,yX.kJ)(n)?n[0][e]:n[e]}(e,r)===o?n=!0:i=!0,{element:e,view:t,active:n,inactive:i}}));s.push.apply(s,i)}}))}return s},e.prototype.showTooltip=function(t){var e=Vet(this.context.view),n=this.getAssociationItems(e,t);(0,yX.S6)(n,(function(t){if(t.active){var e=t.element.shape.getCanvasBBox();t.view.showTooltip({x:e.minX+e.width/2,y:e.minY+e.height/2})}}))},e.prototype.hideTooltip=function(){var t=Vet(this.context.view);(0,yX.S6)(t,(function(t){t.hideTooltip()}))},e.prototype.active=function(t){var e=Uet(this.context.view),n=this.getAssociationItems(e,t);(0,yX.S6)(n,(function(t){var e=t.active,n=t.element;e&&n.setState("active",!0)}))},e.prototype.selected=function(t){var e=Uet(this.context.view),n=this.getAssociationItems(e,t);(0,yX.S6)(n,(function(t){var e=t.active,n=t.element;e&&n.setState("selected",!0)}))},e.prototype.highlight=function(t){var e=Uet(this.context.view),n=this.getAssociationItems(e,t);(0,yX.S6)(n,(function(t){var e=t.inactive,n=t.element;e&&n.setState("inactive",!0)}))},e.prototype.reset=function(){var t=Uet(this.context.view);(0,yX.S6)(t,(function(t){!function(t){var e=ket(t);(0,yX.S6)(e,(function(t){t.hasState("active")&&t.setState("active",!1),t.hasState("selected")&&t.setState("selected",!1),t.hasState("inactive")&&t.setState("inactive",!1)}))}(t)}))},e}(n0);s0("association",bat),f1("association-active",{start:[{trigger:"element:mouseenter",action:"association:active"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),f1("association-selected",{start:[{trigger:"element:mouseenter",action:"association:selected"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),f1("association-highlight",{start:[{trigger:"element:mouseenter",action:"association:highlight"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),f1("association-tooltip",{start:[{trigger:"element:mousemove",action:"association:showTooltip"}],end:[{trigger:"element:mouseleave",action:"association:hideTooltip"}]});var wat,Sat=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="mix",e}return(0,mX.ZT)(e,t),e.prototype.getSchemaAdaptor=function(){return _at},e}(Lnt);!function(t){t.DEV="DEV",t.BETA="BETA",t.STABLE="STABLE"}(wat||(wat={}));!function(){function t(){}Object.defineProperty(t,"MultiView",{get:function(){var t,e;return t=wat.STABLE,e="MultiView",console.warn(t===wat.DEV?"Plot '".concat(e,"' is in DEV stage, just give us issues."):t===wat.BETA?"Plot '".concat(e,"' is in BETA stage, DO NOT use it in production env."):t===wat.STABLE?"Plot '".concat(e,"' is in STABLE stage, import it by \"import { ").concat(e," } from '@antv/g2plot'\"."):"invalid Stage type."),Sat},enumerable:!1,configurable:!0})}();var Cat="first-axes-view",Eat="second-axes-view",kat="series-field-key";function Mat(t,e,n,r,i){var o=[];e.forEach((function(e){r.forEach((function(r){var i,a=((i={})[t]=r[t],i[n]=e,i[e]=r[e],i);o.push(a)}))}));var a=Object.values((0,yX.vM)(o,n)),s=a[0],l=void 0===s?[]:s,c=a[1],u=void 0===c?[]:c;return i?[l.reverse(),u.reverse()]:[l,u]}function Tat(t){return"vertical"!==t}function Iat(t,e,n){var r=e[0],i=e[1],o=r.autoPadding,a=i.autoPadding,s=t.__axisPosition,l=s.layout,c=s.position;if(Tat(l)&&"top"===c&&(r.autoPadding=n.instance(o.top,0,o.bottom,o.left),i.autoPadding=n.instance(a.top,o.left,a.bottom,0)),Tat(l)&&"bottom"===c&&(r.autoPadding=n.instance(o.top,o.right/2+5,o.bottom,o.left),i.autoPadding=n.instance(a.top,a.right,a.bottom,o.right/2+5)),!Tat(l)&&"bottom"===c){var u=o.left>=a.left?o.left:a.left;r.autoPadding=n.instance(o.top,o.right,o.bottom/2+5,u),i.autoPadding=n.instance(o.bottom/2+5,a.right,a.bottom,u)}if(!Tat(l)&&"top"===c){u=o.left>=a.left?o.left:a.left;r.autoPadding=n.instance(o.top,o.right,0,u),i.autoPadding=n.instance(0,a.right,o.top,u)}}function Pat(t){var e,n,r=t.chart,i=t.options,o=i.data,a=i.xField,s=i.yField,l=i.color,c=i.barStyle,u=i.widthRatio,h=i.legend,p=i.layout,d=Mat(a,s,kat,o,Tat(p));h?r.legend(kat,h):!1===h&&r.legend(!1);var f=d[0],g=d[1];return Tat(p)?((e=r.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},id:Cat})).coordinate().transpose().reflect("x"),(n=r.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},id:Eat})).coordinate().transpose(),e.data(f),n.data(g)):(e=r.createView({region:{start:{x:0,y:0},end:{x:1,y:.5}},id:Cat}),(n=r.createView({region:{start:{x:0,y:.5},end:{x:1,y:1}},id:Eat})).coordinate().reflect("y"),e.data(f),n.data(g)),Mnt(bet({},t,{chart:e,options:{widthRatio:u,xField:a,yField:s[0],seriesField:kat,interval:{color:l,style:c}}})),Mnt(bet({},t,{chart:n,options:{xField:a,yField:s[1],seriesField:kat,widthRatio:u,interval:{color:l,style:c}}})),t}function Oat(t){var e,n,r,i=t.options,o=t.chart,a=i.xAxis,s=i.yAxis,l=i.xField,c=i.yField,u=jet(o,Cat),h=jet(o,Eat),p={};return(0,yX.XP)((null===i||void 0===i?void 0:i.meta)||{}).map((function(t){(0,yX.U2)(null===i||void 0===i?void 0:i.meta,[t,"alias"])&&(p[t]=i.meta[t].alias)})),o.scale(((e={})[kat]={sync:!0,formatter:function(t){return(0,yX.U2)(p,t,t)}},e)),dnt(((n={})[l]=a,n[c[0]]=s[c[0]],n))(bet({},t,{chart:u})),dnt(((r={})[l]=a,r[c[1]]=s[c[1]],r))(bet({},t,{chart:h})),t}function Aat(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField,s=n.layout,l=jet(e,Cat),c=jet(e,Eat);return"bottom"===(null===r||void 0===r?void 0:r.position)?c.axis(o,(0,mX.pi)((0,mX.pi)({},r),{label:{formatter:function(){return""}}})):c.axis(o,!1),!1===r?l.axis(o,!1):l.axis(o,(0,mX.pi)({position:Tat(s)?"top":"bottom"},r)),!1===i?(l.axis(a[0],!1),c.axis(a[1],!1)):(l.axis(a[0],i[a[0]]),c.axis(a[1],i[a[1]])),e.__axisPosition={position:l.getOptions().axes[o].position,layout:s},t}function Dat(t){var e=t.chart;return snt(bet({},t,{chart:jet(e,Cat)})),snt(bet({},t,{chart:jet(e,Eat)})),t}function Rat(t){var e=t.chart,n=t.options,r=n.yField,i=n.yAxis;return gnt(bet({},t,{chart:jet(e,Cat),options:{yAxis:i[r[0]]}})),gnt(bet({},t,{chart:jet(e,Eat),options:{yAxis:i[r[1]]}})),t}function Lat(t){var e=t.chart;return cnt(bet({},t,{chart:jet(e,Cat)})),cnt(bet({},t,{chart:jet(e,Eat)})),cnt(t),t}function Nat(t){var e=t.chart;return lnt(bet({},t,{chart:jet(e,Cat)})),lnt(bet({},t,{chart:jet(e,Eat)})),t}function Fat(t){var e,n,r=this,i=t.chart,o=t.options,a=o.label,s=o.yField,l=o.layout,c=jet(i,Cat),u=jet(i,Eat),h=Eet(c,"interval"),p=Eet(u,"interval");if(a){var d=a.callback,f=(0,mX._T)(a,["callback"]);f.position||(f.position="middle"),void 0===f.offset&&(f.offset=2);var g=(0,mX.pi)({},f);if(Tat(l)){var m=(null===(e=g.style)||void 0===e?void 0:e.textAlign)||("middle"===f.position?"center":"left");f.style=bet({},f.style,{textAlign:m});g.style=bet({},g.style,{textAlign:{left:"right",right:"left",center:"center"}[m]})}else{var y={top:"bottom",bottom:"top",middle:"middle"};"string"===typeof f.position?f.position=y[f.position]:"function"===typeof f.position&&(f.position=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return y[f.position.apply(r,t)]});var v=(null===(n=g.style)||void 0===n?void 0:n.textBaseline)||"bottom";g.style=bet({},g.style,{textBaseline:v});f.style=bet({},f.style,{textBaseline:{top:"bottom",bottom:"top",middle:"middle"}[v]})}h.label({fields:[s[0]],callback:d,cfg:Tet(g)}),p.label({fields:[s[1]],callback:d,cfg:Tet(f)})}else h.label(!1),p.label(!1);return t}function zat(t){return Cet(Pat,Oat,Aat,Rat,Lat,Fat,ant,Dat,Nat)(t)}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="bidirectional-bar",e}(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return bet({},t.getDefaultOptions.call(this),{syncViewPadding:Iat})},e.prototype.changeData=function(t){void 0===t&&(t=[]),this.chart.emit(vX.BEFORE_CHANGE_DATA,X1.fromData(this.chart,vX.BEFORE_CHANGE_DATA,null)),this.updateOption({data:t});var e=this.options,n=e.xField,r=e.yField,i=e.layout,o=Mat(n,r,kat,t,Tat(i)),a=o[0],s=o[1],l=jet(this.chart,Cat),c=jet(this.chart,Eat);l.data(a),c.data(s),this.chart.render(!0),this.chart.emit(vX.AFTER_CHANGE_DATA,X1.fromData(this.chart,vX.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return zat},e.SERIES_FIELD_KEY=kat}(Lnt);var Bat,$at="$$range$$",jat="$$y_outliers$$",Uat="outliers_view",Vat=bet({},Lnt.getDefaultOptions(),{meta:(Bat={},Bat[$at]={min:0,alias:"low-q1-median-q3-high"},Bat),interactions:[{type:"active-region"}],tooltip:{showMarkers:!1,shared:!0},boxStyle:{lineWidth:1}}),Hat=function(t,e){var n=t;if(Array.isArray(e)){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4];n=(0,yX.UI)(t,(function(t){return t[$at]=[t[r],t[i],t[o],t[a],t[s]],t}))}return n};function Gat(t){var e=t.chart,n=t.options,r=n.xField,i=n.yField,o=n.groupField,a=n.color,s=n.tooltip,l=n.boxStyle;e.data(Hat(n.data,i));var c=(0,yX.kJ)(i)?$at:i,u=i?(0,yX.kJ)(i)?i:[i]:[],h=s;!1!==h&&(h=bet({},{fields:(0,yX.kJ)(i)?i:[]},h));var p=Ont(bet({},t,{options:{xField:r,yField:c,seriesField:o,tooltip:h,rawFields:u,label:!1,schema:{shape:"box",color:a,style:l}}})).ext;return o&&p.geometry.adjust("dodge"),t}function Wat(t){var e=t.chart,n=t.options,r=n.xField,i=n.data,o=n.outliersField,a=n.outliersStyle,s=n.padding,l=n.label;if(!o)return t;var c=e.createView({padding:s,id:Uat}),u=i.reduce((function(t,e){return e[o].forEach((function(n){var r;return t.push((0,mX.pi)((0,mX.pi)({},e),((r={})[o]=n,r)))})),t}),[]);return c.data(u),Int({chart:c,options:{xField:r,yField:o,point:{shape:"circle",style:a},label:l}}),c.axis(!1),t}function Xat(t){var e,n,r=t.chart,i=t.options,o=i.meta,a=i.xAxis,s=i.yAxis,l=i.xField,c=i.yField,u=i.outliersField,h=Array.isArray(c)?$at:c,p={};if(u){var d=jat;(e={})[u]={sync:d,nice:!0},e[h]={sync:d,nice:!0},p=e}var f=bet(p,o,((n={})[l]=het(a,aet),n[h]=het(s,aet),n));return r.scale(f),t}function qat(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField,s=Array.isArray(a)?$at:a;return!1===r?e.axis(o,!1):e.axis(o,r),!1===i?e.axis($at,!1):e.axis(s,i),t}function Yat(t){var e=t.chart,n=t.options,r=n.legend,i=n.groupField;return i?r?e.legend(i,r):e.legend(i,{position:"bottom"}):e.legend(!1),t}function Zat(t){return Cet(Gat,Wat,Xat,qat,Yat,ant,fnt(),snt,lnt,cnt)(t)}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="box",e}(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return Vat},e.prototype.changeData=function(t){this.updateOption({data:t});var e=this.options.yField,n=this.chart.views.find((function(t){return t.id===Uat}));n&&n.data(t),this.chart.changeData(Hat(t,e))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Zat}}(Lnt);function Kat(t,e,n){return t.length>1?"".concat(e,"_").concat(n):"".concat(e)}function Jat(t){var e=t.data,n=t.xField,r=t.measureField,i=t.rangeField,o=t.targetField,a=t.layout,s=[],l=[];e.forEach((function(t,e){var a=[t[i]].flat();a.sort((function(t,e){return t-e})),a.forEach((function(r,o){var l,c=0===o?r:a[o]-a[o-1];s.push(((l={rKey:"".concat(i,"_").concat(o)})[n]=n?t[n]:String(e),l[i]=c,l))}));var c=[t[r]].flat();c.forEach((function(i,o){var a;s.push(((a={mKey:Kat(c,r,o)})[n]=n?t[n]:String(e),a[r]=i,a))}));var u=[t[o]].flat();u.forEach((function(r,i){var a;s.push(((a={tKey:Kat(u,o,i)})[n]=n?t[n]:String(e),a[o]=r,a))})),l.push(t[i],t[r],t[o])}));var c=Math.min.apply(Math,l.flat(1/0)),u=Math.max.apply(Math,l.flat(1/0));return c=c>0?0:c,"vertical"===a&&s.reverse(),{min:c,max:u,ds:s}}function Qat(t){var e=t.chart,n=t.options,r=n.bulletStyle,i=n.targetField,o=n.rangeField,a=n.measureField,s=n.xField,l=n.color,c=n.layout,u=n.size,h=n.label,p=Jat(n),d=p.min,f=p.max,g=p.ds;e.data(g),Mnt(bet({},t,{options:{xField:s,yField:o,seriesField:"rKey",isStack:!0,label:(0,yX.U2)(h,"range"),interval:{color:(0,yX.U2)(l,"range"),style:(0,yX.U2)(r,"range"),size:(0,yX.U2)(u,"range")}}})),e.geometries[0].tooltip(!1),Mnt(bet({},t,{options:{xField:s,yField:a,seriesField:"mKey",isStack:!0,label:(0,yX.U2)(h,"measure"),interval:{color:(0,yX.U2)(l,"measure"),style:(0,yX.U2)(r,"measure"),size:(0,yX.U2)(u,"measure")}}}));var m=bet({},t,{options:{xField:s,yField:i,seriesField:"tKey",label:(0,yX.U2)(h,"target"),point:{color:(0,yX.U2)(l,"target"),style:(0,yX.U2)(r,"target"),size:(0,yX.mf)((0,yX.U2)(u,"target"))?function(t){return(0,yX.U2)(u,"target")(t)/2}:(0,yX.U2)(u,"target")/2,shape:"horizontal"===c?"line":"hyphen"}}});return Int(m),"horizontal"===c&&e.coordinate().transpose(),(0,mX.pi)((0,mX.pi)({},t),{ext:{data:{min:d,max:f}}})}function tst(t){var e,n,r=t.options,i=t.ext,o=r.xAxis,a=r.yAxis,s=r.targetField,l=r.rangeField,c=r.measureField,u=r.xField,h=i.data;return Cet(dnt(((e={})[u]=o,e[c]=a,e),((n={})[c]={min:null===h||void 0===h?void 0:h.min,max:null===h||void 0===h?void 0:h.max,sync:!0},n[s]={sync:"".concat(c)},n[l]={sync:"".concat(c)},n)))(t)}function est(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.measureField,s=n.rangeField,l=n.targetField;return e.axis("".concat(s),!1),e.axis("".concat(l),!1),!1===r?e.axis("".concat(o),!1):e.axis("".concat(o),r),!1===i?e.axis("".concat(a),!1):e.axis("".concat(a),i),t}function nst(t){var e=t.chart,n=t.options.legend;return e.removeInteraction("legend-filter"),e.legend(n),e.legend("rKey",!1),e.legend("mKey",!1),e.legend("tKey",!1),t}function rst(t){var e=t.chart,n=t.options,r=n.label,i=n.measureField,o=n.targetField,a=n.rangeField,s=e.geometries,l=s[0],c=s[1],u=s[2];return(0,yX.U2)(r,"range")?l.label("".concat(a),(0,mX.pi)({layout:[{type:"limit-in-plot"}]},Tet(r.range))):l.label(!1),(0,yX.U2)(r,"measure")?c.label("".concat(i),(0,mX.pi)({layout:[{type:"limit-in-plot"}]},Tet(r.measure))):c.label(!1),(0,yX.U2)(r,"target")?u.label("".concat(o),(0,mX.pi)({layout:[{type:"limit-in-plot"}]},Tet(r.target))):u.label(!1),t}function ist(t){Cet(Qat,tst,est,nst,cnt,rst,ant,snt,lnt)(t)}var ost=bet({},Lnt.getDefaultOptions(),{layout:"horizontal",size:{range:30,measure:20,target:20},xAxis:{tickLine:!1,line:null},bulletStyle:{range:{fillOpacity:.5}},label:{measure:{position:"right"}},tooltip:{showMarkers:!1}}),ast=(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="bullet",e}(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return ost},e.prototype.changeData=function(t){this.updateOption({data:t});var e=Jat(this.options),n=e.min,r=e.max,i=e.ds;tst({options:this.options,ext:{data:{min:n,max:r}},chart:this.chart}),this.chart.changeData(i)},e.prototype.getSchemaAdaptor=function(){return ist},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()}}(Lnt),{y:0,nodeWidthRatio:.05,weight:!1,nodePaddingRatio:.1,id:function(t){return t.id},source:function(t){return t.source},target:function(t){return t.target},sourceWeight:function(t){return t.value||1},targetWeight:function(t){return t.value||1},sortBy:null});function sst(t,e){var n=function(t){return(0,yX.f0)({},ast,t)}(t),r={},i=e.nodes,o=e.links;i.forEach((function(t){var e=n.id(t);r[e]=t})),function(t,e,n){(0,yX.U5)(t,(function(t,r){t.inEdges=e.filter((function(t){return"".concat(n.target(t))==="".concat(r)})),t.outEdges=e.filter((function(t){return"".concat(n.source(t))==="".concat(r)})),t.edges=t.outEdges.concat(t.inEdges),t.frequency=t.edges.length,t.value=0,t.inEdges.forEach((function(e){t.value+=n.targetWeight(e)})),t.outEdges.forEach((function(e){t.value+=n.sourceWeight(e)}))}))}(r,o,n),function(t,e){var n={weight:function(t,e){return e.value-t.value},frequency:function(t,e){return e.frequency-t.frequency},id:function(t,n){return"".concat(e.id(t)).localeCompare("".concat(e.id(n)))}},r=n[e.sortBy];!r&&(0,yX.mf)(e.sortBy)&&(r=e.sortBy),r&&t.sort(r)}(i,n);var a=function(t,e){var n=t.length;if(!n)throw new TypeError("Invalid nodes: it's empty!");if(e.weight){var r=e.nodePaddingRatio;if(r<0||r>=1)throw new TypeError("Invalid nodePaddingRatio: it must be in range [0, 1)!");var i=r/(2*n),o=e.nodeWidthRatio;if(o<=0||o>=1)throw new TypeError("Invalid nodeWidthRatio: it must be in range (0, 1)!");var a=0;t.forEach((function(t){a+=t.value})),t.forEach((function(t){t.weight=t.value/a,t.width=t.weight*(1-r),t.height=o})),t.forEach((function(n,r){for(var a=0,s=r-1;s>=0;s--)a+=t[s].width+2*i;var l=n.minX=i+a,c=n.maxX=n.minX+n.width,u=n.minY=e.y-o/2,h=n.maxY=u+o;n.x=[l,c,c,l],n.y=[u,u,h,h]}))}else{var s=1/n;t.forEach((function(t,n){t.x=(n+.5)*s,t.y=e.y}))}return t}(i,n),s=function(t,e,n){if(n.weight){var r={};(0,yX.U5)(t,(function(t,e){r[e]=t.value})),e.forEach((function(e){var i=n.source(e),o=n.target(e),a=t[i],s=t[o];if(a&&s){var l=r[i],c=n.sourceWeight(e),u=a.minX+(a.value-l)/a.value*a.width,h=u+c/a.value*a.width;r[i]-=c;var p=r[o],d=n.targetWeight(e),f=s.minX+(s.value-p)/s.value*s.width,g=f+d/s.value*s.width;r[o]-=d;var m=n.y;e.x=[u,h,f,g],e.y=[m,m,m,m],e.source=a,e.target=s}}))}else e.forEach((function(e){var r=t[n.source(e)],i=t[n.target(e)];r&&i&&(e.x=[r.x,i.x],e.y=[r.y,i.y],e.source=r,e.target=i)}));return e}(r,o,n);return{nodes:a,links:s}}var lst="x",cst="y",ust="name",hst="source",pst={nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.5,lineWidth:2},label:{fields:["x","name"],callback:function(t,e){return{offsetX:(t[0]+t[1])/2>.5?-4:4,content:e}},labelEmit:!0,style:{fill:"#8c8c8c"}},tooltip:{showTitle:!1,showMarkers:!1,fields:["source","target","value","isNode"],showContent:function(t){return!(0,yX.U2)(t,[0,"data","isNode"])},formatter:function(t){var e=t.source,n=t.target,r=t.value;return{name:"".concat(e," -> ").concat(n),value:r}}},interactions:[{type:"element-active"}],weight:!0,nodePaddingRatio:.1,nodeWidthRatio:.05};function dst(t){var e=t.options,n=e.data,r=e.sourceField,i=e.targetField,o=e.weightField,a=e.nodePaddingRatio,s=e.nodeWidthRatio,l=e.rawFields,c=void 0===l?[]:l,u=sst({weight:!0,nodePaddingRatio:a,nodeWidthRatio:s},det(n,r,i,o)),h=u.nodes,p=u.links,d=h.map((function(t){return(0,mX.pi)((0,mX.pi)({},het(t,(0,mX.ev)(["id","x","y","name"],c,!0))),{isNode:!0})})),f=p.map((function(t){return(0,mX.pi)((0,mX.pi)({source:t.source.name,target:t.target.name,name:t.source.name||t.target.name},het(t,(0,mX.ev)(["x","y","value"],c,!0))),{isNode:!1})}));return(0,mX.pi)((0,mX.pi)({},t),{ext:(0,mX.pi)((0,mX.pi)({},t.ext),{chordData:{nodesData:d,edgesData:f}})})}function fst(t){var e;return t.chart.scale(((e={x:{sync:!0,nice:!0},y:{sync:!0,nice:!0,max:1}})[ust]={sync:"color"},e[hst]={sync:"color"},e)),t}function gst(t){return t.chart.axis(!1),t}function mst(t){return t.chart.legend(!1),t}function yst(t){var e=t.chart,n=t.options.tooltip;return e.tooltip(n),t}function vst(t){return t.chart.coordinate("polar").reflect("y"),t}function xst(t){var e=t.chart,n=t.options,r=t.ext.chordData.nodesData,i=n.nodeStyle,o=n.label,a=n.tooltip,s=e.createView();return s.data(r),Pnt({chart:s,options:{xField:lst,yField:cst,seriesField:ust,polygon:{style:i},label:o,tooltip:a}}),t}function _st(t){var e=t.chart,n=t.options,r=t.ext.chordData.edgesData,i=n.edgeStyle,o=n.tooltip,a=e.createView();return a.data(r),knt({chart:a,options:{xField:lst,yField:cst,seriesField:hst,edge:{style:i,shape:"arc"},tooltip:o}}),t}function bst(t){var e=t.chart;return Het(e,t.options.animation,function(t){return(0,yX.U2)(t,["views","length"],0)<=0?t.geometries:(0,yX.u4)(t.views,(function(t,e){return t.concat(e.geometries)}),t.geometries)}(e)),t}function wst(t){return Cet(cnt,dst,vst,fst,gst,mst,yst,_st,xst,snt,unt,bst)(t)}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="chord",e}(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return pst},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return wst}}(Lnt);var Sst=["x","y","r","name","value","path","depth"],Cst={colorField:"name",autoFit:!0,pointStyle:{lineWidth:0,stroke:"#fff"},legend:!1,hierarchyConfig:{size:[1,1],padding:0},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1}},Est="drilldown-bread-crumb",kst={position:"top-left",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}},Mst="hierarchy-data-transform-params",Tst=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="drill-down",e.historyCache=[],e.breadCrumbGroup=null,e.breadCrumbCfg=kst,e}return(0,mX.ZT)(e,t),e.prototype.click=function(){var t=(0,yX.U2)(this.context,["event","data","data"]);if(!t)return!1;this.drill(t),this.drawBreadCrumb()},e.prototype.resetPosition=function(){if(this.breadCrumbGroup){var t=this.context.view.getCoordinate(),e=this.breadCrumbGroup,n=e.getBBox(),r=this.getButtonCfg().position,i={x:t.start.x,y:t.end.y-(n.height+10)};t.isPolar&&(i={x:0,y:0}),"bottom-left"===r&&(i={x:t.start.x,y:t.start.y});var o=c3.transform(null,[["t",i.x+0,i.y+n.height+5]]);e.setMatrix(o)}},e.prototype.back=function(){(0,yX.dp)(this.historyCache)&&this.backTo(this.historyCache.slice(0,-1))},e.prototype.reset=function(){this.historyCache[0]&&this.backTo(this.historyCache.slice(0,1)),this.historyCache=[],this.hideCrumbGroup()},e.prototype.drill=function(t){var e=this.context.view,n=(0,yX.U2)(e,["interactions","drill-down","cfg","transformData"],(function(t){return t})),r=n((0,mX.pi)({data:t.data},t[Mst]));e.changeData(r);for(var i=[],o=t;o;){var a=o.data;i.unshift({id:"".concat(a.name,"_").concat(o.height,"_").concat(o.depth),name:a.name,children:n((0,mX.pi)({data:a},t[Mst]))}),o=o.parent}this.historyCache=(this.historyCache||[]).slice(0,-1).concat(i)},e.prototype.backTo=function(t){if(t&&!(t.length<=0)){var e=this.context.view,n=(0,yX.Z$)(t).children;e.changeData(n),t.length>1?(this.historyCache=t,this.drawBreadCrumb()):(this.historyCache=[],this.hideCrumbGroup())}},e.prototype.getButtonCfg=function(){var t=this.context.view,e=(0,yX.U2)(t,["interactions","drill-down","cfg","drillDownConfig"]);return bet(this.breadCrumbCfg,null===e||void 0===e?void 0:e.breadCrumb,this.cfg)},e.prototype.drawBreadCrumb=function(){this.drawBreadCrumbGroup(),this.resetPosition(),this.breadCrumbGroup.show()},e.prototype.drawBreadCrumbGroup=function(){var t=this,e=this.getButtonCfg(),n=this.historyCache;this.breadCrumbGroup?this.breadCrumbGroup.clear():this.breadCrumbGroup=this.context.view.foregroundGroup.addGroup({name:Est});var r=0;n.forEach((function(i,o){var a=t.breadCrumbGroup.addShape({type:"text",id:i.id,name:"".concat(Est,"_").concat(i.name,"_text"),attrs:(0,mX.pi)((0,mX.pi)({text:0!==o||(0,yX.UM)(e.rootText)?i.name:e.rootText},e.textStyle),{x:r,y:0})}),s=a.getBBox();if(r+=s.width+4,a.on("click",(function(e){var r,i=e.target.get("id");if(i!==(null===(r=(0,yX.Z$)(n))||void 0===r?void 0:r.id)){var o=n.slice(0,n.findIndex((function(t){return t.id===i}))+1);t.backTo(o)}})),a.on("mouseenter",(function(t){var r;t.target.get("id")!==(null===(r=(0,yX.Z$)(n))||void 0===r?void 0:r.id)?a.attr(e.activeTextStyle):a.attr({cursor:"default"})})),a.on("mouseleave",(function(){a.attr(e.textStyle)})),o<n.length-1){var l=t.breadCrumbGroup.addShape({type:"text",name:"".concat(e.name,"_").concat(i.name,"_divider"),attrs:(0,mX.pi)((0,mX.pi)({text:e.dividerText},e.textStyle),{x:r,y:0})}).getBBox();r+=l.width+4}}))},e.prototype.hideCrumbGroup=function(){this.breadCrumbGroup&&this.breadCrumbGroup.hide()},e.prototype.destroy=function(){this.breadCrumbGroup&&this.breadCrumbGroup.remove(),t.prototype.destroy.call(this)},e}(n0);function Ist(t){for(var e,n,r=0,i=(t=function(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}(Array.from(t))).length,o=[];r<i;)e=t[r],n&&Ast(n,e)?++r:(n=Rst(o=Pst(o,e)),r=0);return n}function Pst(t,e){var n,r;if(Dst(e,t))return[e];for(n=0;n<t.length;++n)if(Ost(e,t[n])&&Dst(Lst(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(Ost(Lst(t[n],t[r]),e)&&Ost(Lst(t[n],e),t[r])&&Ost(Lst(t[r],e),t[n])&&Dst(Nst(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function Ost(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function Ast(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function Dst(t,e){for(var n=0;n<e.length;++n)if(!Ast(t,e[n]))return!1;return!0}function Rst(t){switch(t.length){case 1:return{x:(e=t[0]).x,y:e.y,r:e.r};case 2:return Lst(t[0],t[1]);case 3:return Nst(t[0],t[1],t[2])}var e}function Lst(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,s=e.r,l=o-n,c=a-r,u=s-i,h=Math.sqrt(l*l+c*c);return{x:(n+o+l/h*u)/2,y:(r+a+c/h*u)/2,r:(h+i+s)/2}}function Nst(t,e,n){var r=t.x,i=t.y,o=t.r,a=e.x,s=e.y,l=e.r,c=n.x,u=n.y,h=n.r,p=r-a,d=r-c,f=i-s,g=i-u,m=l-o,y=h-o,v=r*r+i*i-o*o,x=v-a*a-s*s+l*l,_=v-c*c-u*u+h*h,b=d*f-p*g,w=(f*_-g*x)/(2*b)-r,S=(g*m-f*y)/b,C=(d*x-p*_)/(2*b)-i,E=(p*y-d*m)/b,k=S*S+E*E-1,M=2*(o+w*S+C*E),T=w*w+C*C-o*o,I=-(k?(M+Math.sqrt(M*M-4*k*T))/(2*k):T/M);return{x:r+w+S*I,y:i+C+E*I,r:I}}function Fst(t,e,n){var r,i,o,a,s=t.x-e.x,l=t.y-e.y,c=s*s+l*l;c?(i=e.r+n.r,i*=i,a=t.r+n.r,i>(a*=a)?(r=(c+a-i)/(2*c),o=Math.sqrt(Math.max(0,a/c-r*r)),n.x=t.x-r*s-o*l,n.y=t.y-r*l+o*s):(r=(c+i-a)/(2*c),o=Math.sqrt(Math.max(0,i/c-r*r)),n.x=e.x+r*s-o*l,n.y=e.y+r*l+o*s)):(n.x=e.x+n.r,n.y=e.y)}function zst(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function Bst(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return i*i+o*o}function $st(t){this._=t,this.next=null,this.previous=null}function jst(t){if(!(i=(t=function(t){return"object"===typeof t&&"length"in t?t:Array.from(t)}(t)).length))return 0;var e,n,r,i,o,a,s,l,c,u,h;if((e=t[0]).x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;Fst(n,e,r=t[2]),e=new $st(e),n=new $st(n),r=new $st(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(s=3;s<i;++s){Fst(e._,n._,r=t[s]),r=new $st(r),l=n.next,c=e.previous,u=n._.r,h=e._.r;do{if(u<=h){if(zst(l._,r._)){n=l,e.next=n,n.previous=e,--s;continue t}u+=l._.r,l=l.next}else{if(zst(c._,r._)){(e=c).next=n,n.previous=e,--s;continue t}h+=c._.r,c=c.previous}}while(l!==c.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,o=Bst(e);(r=r.next)!==n;)(a=Bst(r))<o&&(e=r,o=a);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=Ist(e),s=0;s<i;++s)(e=t[s]).x-=r.x,e.y-=r.y;return r.r}function Ust(t){return jst(t),t}function Vst(t){if("function"!==typeof t)throw new Error;return t}function Hst(){return 0}function Gst(t){return function(){return t}}function Wst(t){return Math.sqrt(t.value)}function Xst(){var t=null,e=1,n=1,r=Hst;function i(i){return i.x=e/2,i.y=n/2,t?i.eachBefore(qst(t)).eachAfter(Yst(r,.5)).eachBefore(Zst(1)):i.eachBefore(qst(Wst)).eachAfter(Yst(Hst,1)).eachAfter(Yst(r,i.r/Math.min(e,n))).eachBefore(Zst(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=function(t){return null==t?null:Vst(t)}(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"===typeof t?t:Gst(+t),i):r},i}function qst(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Yst(t,e){return function(n){if(r=n.children){var r,i,o,a=r.length,s=t(n)*e||0;if(s)for(i=0;i<a;++i)r[i].r+=s;if(o=jst(r),s)for(i=0;i<a;++i)r[i].r-=s;n.r=o+s}}}function Zst(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function Kst(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function Jst(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=tlt)):void 0===e&&(e=Qst);for(var n,r,i,o,a,s=new rlt(t),l=[s];n=l.pop();)if((i=e(n.data))&&(a=(i=Array.from(i)).length))for(n.children=i,o=a-1;o>=0;--o)l.push(r=i[o]=new rlt(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(nlt)}function Qst(t){return t.children}function tlt(t){return Array.isArray(t)?t[1]:null}function elt(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function nlt(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function rlt(t){this.data=t,this.depth=this.height=0,this.parent=null}rlt.prototype=Jst.prototype={constructor:rlt,count:function(){return this.eachAfter(Kst)},each:function(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this},eachAfter:function(t,e){for(var n,r,i,o=this,a=[o],s=[],l=-1;o=a.pop();)if(s.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);for(;o=s.pop();)t.call(e,o,++l,this);return this},eachBefore:function(t,e){for(var n,r,i=this,o=[i],a=-1;i=o.pop();)if(t.call(e,i,++a,this),n=i.children)for(r=n.length-1;r>=0;--r)o.push(n[r]);return this},find:function(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;t=n.pop(),e=r.pop();for(;t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return Jst(this).eachBefore(elt)},[Symbol.iterator]:function*(){var t,e,n,r,i=this,o=[i];do{for(t=o.reverse(),o=[];i=t.pop();)if(yield i,e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n])}while(o.length)}};var ilt="nodeIndex",olt="childNodeCount",alt="nodeAncestor",slt="Invalid field: it must be a string!";function llt(t,e){var n=t.field,r=t.fields;if((0,yX.HD)(n))return n;if((0,yX.kJ)(n))return console.warn(slt),n[0];if(console.warn("".concat(slt," will try to get fields instead.")),(0,yX.HD)(r))return r;if((0,yX.kJ)(r)&&r.length)return r[0];if(e)return e;throw new TypeError(slt)}function clt(t){var e,n,r=[];t&&t.each?t.each((function(t){var i,o;t.parent!==e?(e=t.parent,n=0):n+=1;var a=(0,yX.hX)(((null===(i=t.ancestors)||void 0===i?void 0:i.call(t))||[]).map((function(t){return r.find((function(e){return e.name===t.name}))||t})),(function(e){var n=e.depth;return n>0&&n<t.depth}));t[alt]=a,t[olt]=(null===(o=t.children)||void 0===o?void 0:o.length)||0,t[ilt]=n,r.push(t)})):t&&t.eachNode&&t.eachNode((function(t){r.push(t)}));return r}var ult={field:"value",as:["x","y","r"],sort:function(t,e){return e.value-t.value}};function hlt(t){var e=t.data,n=t.hierarchyConfig,r=t.rawFields,i=void 0===r?[]:r,o=t.enableDrillDown,a=function(t,e){var n,r=(e=(0,yX.f0)({},ult,e)).as;if(!(0,yX.kJ)(r)||3!==r.length)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');try{n=llt(e)}catch(kg){console.warn(kg)}var i=function(t){return Xst().size(e.size).padding(e.padding)(Jst(t).sum((function(t){return t[n]})).sort(e.sort))}(t),o=r[0],a=r[1],s=r[2];return i.each((function(t){t[o]=t.x,t[a]=t.y,t[s]=t.r})),clt(i)}(e,(0,mX.pi)((0,mX.pi)({},n),{field:"value",as:["x","y","r"]})),s=[];return a.forEach((function(t){for(var e,r=t.data.name,a=(0,mX.pi)({},t);a.depth>1;)r="".concat(null===(e=a.parent.data)||void 0===e?void 0:e.name," / ").concat(r),a=a.parent;if(o&&t.depth>2)return null;var l=bet({},t.data,(0,mX.pi)((0,mX.pi)((0,mX.pi)({},het(t.data,i)),{path:r}),t));l.ext=n,l[Mst]={hierarchyConfig:n,rawFields:i,enableDrillDown:o},s.push(l)})),s}function plt(t,e,n){var r=Aet([t,e]),i=r[0],o=r[1],a=r[2],s=r[3],l=n.width-(s+o),c=n.height-(i+a),u=Math.min(l,c),h=(l-u)/2,p=(c-u)/2;return{finalPadding:[i+p,o+h,a+p,s+h],finalSize:u<0?0:u}}function dlt(t){var e=t.chart,n=Math.min(e.viewBBox.width,e.viewBBox.height);return bet({options:{size:function(t){return t.r*n}}},t)}function flt(t){var e=t.options,n=t.chart,r=n.viewBBox,i=e.padding,o=e.appendPadding,a=e.drilldown,s=o;(null===a||void 0===a?void 0:a.enabled)&&(s=Aet([Oet(n.appendPadding,(0,yX.U2)(a,["breadCrumb","position"])),o]));var l=plt(i,s,r).finalPadding;return n.padding=l,n.appendPadding=0,t}function glt(t){var e=t.chart,n=t.options,r=e.padding,i=e.appendPadding,o=n.color,a=n.colorField,s=n.pointStyle,l=n.hierarchyConfig,c=n.sizeField,u=n.rawFields,h=void 0===u?[]:u,p=n.drilldown,d=hlt({data:n.data,hierarchyConfig:l,enableDrillDown:null===p||void 0===p?void 0:p.enabled,rawFields:h});e.data(d);var f=plt(r,i,e.viewBBox).finalSize,g=function(t){return t.r*f};return c&&(g=function(t){return t[c]*f}),Int(bet({},t,{options:{xField:"x",yField:"y",seriesField:a,sizeField:c,rawFields:(0,mX.ev)((0,mX.ev)([],Sst,!0),h,!0),point:{color:o,style:s,shape:"circle",size:g}}})),t}function mlt(t){return Cet(dnt({},{x:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0},y:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0}}))(t)}function ylt(t){var e=t.chart,n=t.options.tooltip;if(!1===n)e.tooltip(!1);else{var r=n;(0,yX.U2)(n,"fields")||(r=bet({},{customItems:function(t){return t.map((function(t){var n=(0,yX.U2)(e.getOptions(),"scales"),r=(0,yX.U2)(n,["name","formatter"],(function(t){return t})),i=(0,yX.U2)(n,["value","formatter"],(function(t){return t}));return(0,mX.pi)((0,mX.pi)({},t),{name:r(t.data.name),value:i(t.data.value)})}))}},r)),e.tooltip(r)}return t}function vlt(t){return t.chart.axis(!1),t}function xlt(t){var e=t.drilldown,n=t.interactions,r=void 0===n?[]:n;return(null===e||void 0===e?void 0:e.enabled)?bet({},t,{interactions:(0,mX.ev)((0,mX.ev)([],r,!0),[{type:"drill-down",cfg:{drillDownConfig:e,transformData:hlt,enableDrillDown:!0}}],!1)}):t}function _lt(t){return snt({chart:t.chart,options:xlt(t.options)}),t}function blt(t){return Cet(int("pointStyle"),dlt,flt,cnt,mlt,glt,vlt,ont,ylt,_lt,lnt,fnt())(t)}function wlt(t){var e=(0,yX.U2)(t,["event","data","data"],{});return(0,yX.kJ)(e.children)&&e.children.length>0}function Slt(t){var e=t.view.getCoordinate(),n=e.innerRadius;if(n){var r=t.event,i=r.x,o=r.y,a=e.center,s=a.x,l=a.y,c=e.getRadius()*n;return Math.sqrt(Math.pow(s-i,2)+Math.pow(l-o,2))<c}return!1}s0("drill-down-action",Tst),f1("drill-down",{showEnable:[{trigger:"element:mouseenter",action:"cursor:pointer",isEnable:wlt},{trigger:"element:mouseleave",action:"cursor:default"},{trigger:"element:mouseleave",action:"cursor:pointer",isEnable:Slt}],start:[{trigger:"element:click",isEnable:wlt,action:["drill-down-action:click"]},{trigger:"afterchangesize",action:["drill-down-action:resetPosition"]},{trigger:"click",isEnable:Slt,action:["drill-down-action:back"]}]});!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="circle-packing",e}(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return Cst},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return blt},e.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))}}(Lnt);var Clt,Elt,klt="left-axes-view",Mlt="right-axes-view",Tlt={nice:!0,label:{autoHide:!0,autoRotate:!1}},Ilt=(0,mX.pi)((0,mX.pi)({},Tlt),{position:"left"}),Plt=(0,mX.pi)((0,mX.pi)({},Tlt),{position:"right",grid:null});function Olt(t){return(0,yX.U2)(t,"geometry")===Elt.Line}function Alt(t){return(0,yX.U2)(t,"geometry")===Elt.Column}function Dlt(t,e,n){return Alt(n)?bet({},{geometry:Elt.Column,label:n.label&&n.isRange?{content:function(t){var n;return null===(n=t[e])||void 0===n?void 0:n.join("-")}}:void 0},n):(0,mX.pi)({geometry:Elt.Line},n)}function Rlt(t,e){var n=t[0],r=t[1];return(0,yX.kJ)(e)?[e[0],e[1]]:[(0,yX.U2)(e,n),(0,yX.U2)(e,r)]}function Llt(t,e){return e===Clt.Left?!1!==t&&bet({},Ilt,t):e===Clt.Right?!1!==t&&bet({},Plt,t):t}function Nlt(t){var e=t.view,n=t.geometryOption,r=t.yField,i=t.legend,o=(0,yX.U2)(i,"marker"),a=Eet(e,Olt(n)?"line":"interval");if(!n.seriesField){var s=(0,yX.U2)(e,"options.scales.".concat(r,".alias"))||r,l=a.getAttribute("color"),c=e.getTheme().defaultColor;l&&(c=c3.getMappingValue(l,s,(0,yX.U2)(l,["values",0],c)));var u=((0,yX.mf)(o)?o:!(0,yX.xb)(o)&&bet({},{style:{stroke:c,fill:c}},o))||(Olt(n)?{symbol:function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},style:{lineWidth:2,r:6,stroke:c}}:{symbol:"square",style:{fill:c}});return[{value:r,name:s,marker:u,isGeometry:!0,viewId:e.id}]}var h=a.getGroupAttributes();return(0,yX.u4)(h,(function(t,n){var r=c3.getLegendItems(e,a,n,e.getTheme(),o);return t.concat(r)}),[])}!function(t){t.Left="Left",t.Right="Right"}(Clt||(Clt={})),function(t){t.Line="line",t.Column="column"}(Elt||(Elt={}));var Flt=function(t,e){var n=e[0],r=e[1],i=t.getOptions().data,o=t.getXScale(),a=(0,yX.dp)(i);if(o&&a){var s=(0,yX.I)(i,o.field),l=s,c=(0,yX.dp)(l),u=Math.floor(n*(c-1)),h=Math.floor(r*(c-1));t.filter(o.field,(function(t){var e=l.indexOf(t);return!(e>-1)||function(t,e,n){var r=Math.min(e,n),i=Math.max(e,n);return t>=r&&t<=i}(e,u,h)})),t.getRootView().render(!0)}};function zlt(t){var e,n=t.options,r=n.geometryOptions,i=void 0===r?[]:r,o=n.xField,a=n.yField,s=(0,yX.yW)(i,(function(t){var e=t.geometry;return e===Elt.Line||void 0===e}));return bet({},{options:{geometryOptions:[],meta:(e={},e[o]={type:"cat",sync:!0,range:s?[0,1]:void 0},e),tooltip:{showMarkers:s,showCrosshairs:s,shared:!0,crosshairs:{type:"x"}},interactions:s?[{type:"legend-visible-filter"}]:[{type:"legend-visible-filter"},{type:"active-region"}],legend:{position:"top-left"}}},t,{options:{yAxis:Rlt(a,n.yAxis),geometryOptions:[Dlt(0,a[0],i[0]),Dlt(0,a[1],i[1])],annotations:Rlt(a,n.annotations)}})}function Blt(t){var e,n,r=t.chart,i=t.options.geometryOptions,o={line:0,column:1};return[{type:null===(e=i[0])||void 0===e?void 0:e.geometry,id:klt},{type:null===(n=i[1])||void 0===n?void 0:n.geometry,id:Mlt}].sort((function(t,e){return-o[t.type]+o[e.type]})).forEach((function(t){return r.createView({id:t.id})})),t}function $lt(t){var e=t.chart,n=t.options,r=n.xField,i=n.yField,o=n.geometryOptions,a=n.data,s=n.tooltip;return[(0,mX.pi)((0,mX.pi)({},o[0]),{id:klt,data:a[0],yField:i[0]}),(0,mX.pi)((0,mX.pi)({},o[1]),{id:Mlt,data:a[1],yField:i[1]})].forEach((function(t){var n=t.id,i=t.data,o=t.yField,a=Alt(t)&&t.isPercent,l=a?Nnt(i,o,r,o):i,c=jet(e,n).data(l),u=a?(0,mX.pi)({formatter:function(e){return{name:e[t.seriesField]||o,value:(100*Number(e[o])).toFixed(2)+"%"}}},s):s;!function(t){var e=t.options,n=t.chart,r=e.geometryOption,i=r.isStack,o=r.color,a=r.seriesField,s=r.groupField,l=r.isGroup,c=["xField","yField"];if(Olt(r)){Tnt(bet({},t,{options:(0,mX.pi)((0,mX.pi)((0,mX.pi)({},het(e,c)),r),{line:{color:r.color,style:r.lineStyle}})})),Int(bet({},t,{options:(0,mX.pi)((0,mX.pi)((0,mX.pi)({},het(e,c)),r),{point:r.point&&(0,mX.pi)({color:o,shape:"circle"},r.point)})}));var u=[];l&&u.push({type:"dodge",dodgeBy:s||a,customOffset:0}),i&&u.push({type:"stack"}),u.length&&(0,yX.S6)(n.geometries,(function(t){t.adjust(u)}))}Alt(r)&&yrt(bet({},t,{options:(0,mX.pi)((0,mX.pi)((0,mX.pi)({},het(e,c)),r),{widthRatio:r.columnWidthRatio,interval:(0,mX.pi)((0,mX.pi)({},het(r,["color"])),{style:r.columnStyle})})}))}({chart:c,options:{xField:r,yField:o,tooltip:u,geometryOption:t}})})),t}function jlt(t){var e,n=t.chart,r=t.options.geometryOptions,i=(null===(e=n.getTheme())||void 0===e?void 0:e.colors10)||[],o=0;return n.once("beforepaint",(function(){(0,yX.S6)(r,(function(t,e){var r=jet(n,0===e?klt:Mlt);if(!t.color){var a=r.getGroupScales(),s=(0,yX.U2)(a,[0,"values","length"],1),l=i.slice(o,o+s).concat(0===e?[]:i);r.geometries.forEach((function(e){t.seriesField?e.color(t.seriesField,l):e.color(l[0])})),o+=s}})),n.render(!0)})),t}function Ult(t){var e,n,r=t.chart,i=t.options,o=i.xAxis,a=i.yAxis,s=i.xField,l=i.yField;return dnt(((e={})[s]=o,e[l[0]]=a[0],e))(bet({},t,{chart:jet(r,klt)})),dnt(((n={})[s]=o,n[l[1]]=a[1],n))(bet({},t,{chart:jet(r,Mlt)})),t}function Vlt(t){var e=t.chart,n=t.options,r=jet(e,klt),i=jet(e,Mlt),o=n.xField,a=n.yField,s=n.xAxis,l=n.yAxis;return e.axis(o,!1),e.axis(a[0],!1),e.axis(a[1],!1),r.axis(o,s),r.axis(a[0],Llt(l[0],Clt.Left)),i.axis(o,!1),i.axis(a[1],Llt(l[1],Clt.Right)),t}function Hlt(t){var e=t.chart,n=t.options.tooltip,r=jet(e,klt),i=jet(e,Mlt);return e.tooltip(n),r.tooltip({shared:!0}),i.tooltip({shared:!0}),t}function Glt(t){var e=t.chart;return snt(bet({},t,{chart:jet(e,klt)})),snt(bet({},t,{chart:jet(e,Mlt)})),t}function Wlt(t){var e=t.chart,n=t.options.annotations,r=(0,yX.U2)(n,[0]),i=(0,yX.U2)(n,[1]);return fnt(r)(bet({},t,{chart:jet(e,klt),options:{annotations:r}})),fnt(i)(bet({},t,{chart:jet(e,Mlt),options:{annotations:i}})),t}function Xlt(t){var e=t.chart;return cnt(bet({},t,{chart:jet(e,klt)})),cnt(bet({},t,{chart:jet(e,Mlt)})),cnt(t),t}function qlt(t){var e=t.chart;return lnt(bet({},t,{chart:jet(e,klt)})),lnt(bet({},t,{chart:jet(e,Mlt)})),t}function Ylt(t){var e=t.chart,n=t.options.yAxis;return gnt(bet({},t,{chart:jet(e,klt),options:{yAxis:n[0]}})),gnt(bet({},t,{chart:jet(e,Mlt),options:{yAxis:n[1]}})),t}function Zlt(t){var e=t.chart,n=t.options,r=n.legend,i=n.geometryOptions,o=n.yField,a=n.data,s=jet(e,klt),l=jet(e,Mlt);if(!1===r)e.legend(!1);else if((0,yX.Kn)(r)&&!0===r.custom)e.legend(r);else{var c=(0,yX.U2)(i,[0,"legend"],r),u=(0,yX.U2)(i,[1,"legend"],r);e.once("beforepaint",(function(){var t=a[0].length?Nlt({view:s,geometryOption:i[0],yField:o[0],legend:c}):[],n=a[1].length?Nlt({view:l,geometryOption:i[1],yField:o[1],legend:u}):[];e.legend(bet({},r,{custom:!0,items:t.concat(n)}))})),i[0].seriesField&&s.legend(i[0].seriesField,c),i[1].seriesField&&l.legend(i[1].seriesField,u),e.on("legend-item:click",(function(t){var n=(0,yX.U2)(t,"gEvent.delegateObject",{});if(n&&n.item){var r=n.item,i=r.value,a=r.isGeometry,s=r.viewId;if(a){if((0,yX.cx)(o,(function(t){return t===i}))>-1){var l=(0,yX.U2)(jet(e,s),"geometries");(0,yX.S6)(l,(function(t){t.changeVisible(!n.item.unchecked)}))}}else{var c=(0,yX.U2)(e.getController("legend"),"option.items",[]);(0,yX.S6)(e.views,(function(t){var n=t.getGroupScales();(0,yX.S6)(n,(function(e){e.values&&e.values.indexOf(i)>-1&&t.filter(e.field,(function(t){return!(0,yX.sE)(c,(function(e){return e.value===t})).unchecked}))})),e.render(!0)}))}}}))}return t}function Klt(t){var e=t.chart,n=t.options.slider,r=jet(e,klt),i=jet(e,Mlt);return n&&(r.option("slider",n),r.on("slider:valuechanged",(function(t){var e=t.event,n=e.value,r=e.originValue;(0,yX.Xy)(n,r)||Flt(i,n)})),e.once("afterpaint",(function(){if(!(0,yX.jn)(n)){var t=n.start,e=n.end;(t||e)&&Flt(i,[t,e])}}))),t}function Jlt(t){return Cet(zlt,Blt,Xlt,$lt,Ult,Vlt,Ylt,Hlt,Glt,Wlt,qlt,jlt,Zlt,Klt)(t)}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dual-axes",e}(0,mX.ZT)(e,t),e.prototype.getDefaultOptions=function(){return bet({},t.prototype.getDefaultOptions.call(this),{yAxis:[],syncViewPadding:!0})},e.prototype.getSchemaAdaptor=function(){return Jlt}}(Lnt);function Qlt(t){var e=t.chart,n=t.options,r=n.type,i=n.data,o=n.fields,a=n.eachView,s=(0,yX.CE)(n,["type","data","fields","eachView","axes","meta","tooltip","coordinate","theme","legend","interactions","annotations"]);return e.data(i),e.facet(r,(0,mX.pi)((0,mX.pi)({},s),{fields:o,eachView:function(t,e){var n=a(t,e);if(n.geometries)!function(t,e){var n=e.data,r=e.coordinate,i=e.interactions,o=e.annotations,a=e.animation,s=e.tooltip,l=e.axes,c=e.meta,u=e.geometries;n&&t.data(n);var h={};l&&(0,yX.S6)(l,(function(t,e){h[e]=het(t,aet)})),h=bet({},c,h),t.scale(h),r&&t.coordinate(r),!1===l?t.axis(!1):(0,yX.S6)(l,(function(e,n){t.axis(n,e)})),(0,yX.S6)(u,(function(e){var n=Cnt({chart:t,options:e}).ext,r=e.adjust;r&&n.geometry.adjust(r)})),(0,yX.S6)(i,(function(e){!1===e.enable?t.removeInteraction(e.type):t.interaction(e.type,e.cfg)})),(0,yX.S6)(o,(function(e){t.annotation()[e.type]((0,mX.pi)({},e))})),Het(t,a),s?(t.interaction("tooltip"),t.tooltip(s)):!1===s&&t.removeInteraction("tooltip")}(t,n);else{var r=n,i=r.options;i.tooltip&&t.interaction("tooltip"),mat(r.type,t,i)}}})),t}function tct(t){var e=t.chart,n=t.options,r=n.axes,i=n.meta,o=n.tooltip,a=n.coordinate,s=n.theme,l=n.legend,c=n.interactions,u=n.annotations,h={};return r&&(0,yX.S6)(r,(function(t,e){h[e]=het(t,aet)})),h=bet({},i,h),e.scale(h),e.coordinate(a),r?(0,yX.S6)(r,(function(t,n){e.axis(n,t)})):e.axis(!1),o?(e.interaction("tooltip"),e.tooltip(o)):!1===o&&e.removeInteraction("tooltip"),e.legend(l),s&&e.theme(s),(0,yX.S6)(c,(function(t){!1===t.enable?e.removeInteraction(t.type):e.interaction(t.type,t.cfg)})),(0,yX.S6)(u,(function(t){e.annotation()[t.type]((0,mX.pi)({},t))})),t}function ect(t){return Cet(cnt,Qlt,tct)(t)}var nct={title:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},rowTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},columnTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}}};!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="area",e}(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return nct},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return ect}}(Lnt);function rct(t){var e=t.chart,n=t.options,r=n.data,i=n.type,o=n.xField,a=n.yField,s=n.colorField,l=n.sizeField,c=n.sizeRatio,u=n.shape,h=n.color,p=n.tooltip,d=n.heatmapStyle,f=n.meta;e.data(r);var g="polygon";"density"===i&&(g="heatmap");var m=bnt(p,[o,a,s]),y=m.fields,v=m.formatter,x=1;return(c||0===c)&&(u||l?c<0||c>1?console.warn("sizeRatio is not in effect: It must be a number in [0,1]"):x=c:console.warn("sizeRatio is not in effect: Must define shape or sizeField first")),Cnt(bet({},t,{options:{type:g,colorField:s,tooltipFields:y,shapeField:l||"",label:void 0,mapping:{tooltip:v,shape:u&&(l?function(t){var e=r.map((function(t){return t[l]})),n=(null===f||void 0===f?void 0:f[l])||{},i=n.min,o=n.max;return i=(0,yX.hj)(i)?i:Math.min.apply(Math,e),o=(0,yX.hj)(o)?o:Math.max.apply(Math,e),[u,((0,yX.U2)(t,l)-i)/(o-i),x]}:function(){return[u,1,x]}),color:h||s&&e.getTheme().sequenceColors.join("-"),style:d}}})),t}function ict(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return Cet(dnt(((e={})[o]=r,e[a]=i,e)))(t)}function oct(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return!1===r?e.axis(o,!1):e.axis(o,r),!1===i?e.axis(a,!1):e.axis(a,i),t}function act(t){var e=t.chart,n=t.options,r=n.legend,i=n.colorField,o=n.sizeField,a=n.sizeLegend,s=!1!==r;return i&&e.legend(i,!!s&&r),o&&e.legend(o,void 0===a?r:a),s||a||e.legend(!1),t}function sct(t){var e=t.chart,n=t.options,r=n.label,i=n.colorField,o=Eet(e,"density"===n.type?"heatmap":"polygon");if(r){if(i){var a=r.callback,s=(0,mX._T)(r,["callback"]);o.label({fields:[i],callback:a,cfg:Tet(s)})}}else o.label(!1);return t}function lct(t){var e,n,r=t.chart,i=t.options,o=i.coordinate,a=i.reflect,s=bet({actions:[]},null!==o&&void 0!==o?o:{type:"rect"});return a&&(null===(n=null===(e=s.actions)||void 0===e?void 0:e.push)||void 0===n||n.call(e,["reflect",a])),r.coordinate(s),t}function cct(t){return Cet(cnt,int("heatmapStyle"),ict,lct,rct,oct,act,ant,sct,fnt(),snt,lnt,unt)(t)}var uct=bet({},Lnt.getDefaultOptions(),{type:"polygon",legend:!1,coordinate:{type:"rect"},xAxis:{tickLine:null,line:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}},yAxis:{grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}});E2("polygon","circle",{draw:function(t,e){var n,r,i=t.x,o=t.y,a=this.parsePoints(t.points),s=Math.abs(a[2].x-a[1].x),l=Math.abs(a[1].y-a[0].y),c=Math.min(s,l)/2,u=Number(t.shape[1]),h=Number(t.shape[2]),p=c*Math.sqrt(h)*Math.sqrt(u),d=(null===(n=t.style)||void 0===n?void 0:n.fill)||t.color||(null===(r=t.defaultStyle)||void 0===r?void 0:r.fill);return e.addShape("circle",{attrs:(0,mX.pi)((0,mX.pi)((0,mX.pi)({x:i,y:o,r:p},t.defaultStyle),t.style),{fill:d})})}}),E2("polygon","square",{draw:function(t,e){var n,r,i=t.x,o=t.y,a=this.parsePoints(t.points),s=Math.abs(a[2].x-a[1].x),l=Math.abs(a[1].y-a[0].y),c=Math.min(s,l),u=Number(t.shape[1]),h=Number(t.shape[2]),p=c*Math.sqrt(h)*Math.sqrt(u),d=(null===(n=t.style)||void 0===n?void 0:n.fill)||t.color||(null===(r=t.defaultStyle)||void 0===r?void 0:r.fill);return e.addShape("rect",{attrs:(0,mX.pi)((0,mX.pi)((0,mX.pi)({x:i-p/2,y:o-p/2,width:p,height:p},t.defaultStyle),t.style),{fill:d})})}});!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="heatmap",e}(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return uct},e.prototype.getSchemaAdaptor=function(){return cct},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()}}(Lnt);var hct="liquid";function pct(t){return[{percent:t,type:hct}]}function dct(t){var e=t.chart,n=t.options,r=n.percent,i=n.liquidStyle,o=n.radius,a=n.outline,s=n.wave,l=n.shape,c=n.shapeStyle,u=n.animation;e.scale({percent:{min:0,max:1}}),e.data(pct(r));var h=n.color||e.getTheme().defaultColor,p=Mnt(bet({},t,{options:{xField:"type",yField:"percent",widthRatio:o,interval:{color:h,style:i,shape:"liquid-fill-gauge"}}})).ext.geometry,d={percent:r,radius:o,outline:a,wave:s,shape:l,shapeStyle:c,background:e.getTheme().background,animation:u};return p.customInfo(d),e.legend(!1),e.axis(!1),e.tooltip(!1),t}function fct(t,e){var n=t.chart,r=t.options,i=r.statistic,o=r.percent,a=r.meta;n.getController("annotation").clear(!0);var s=(0,yX.U2)(a,["percent","formatter"])||function(t){return"".concat((100*t).toFixed(2),"%")},l=i.content;return l&&(l=bet({},l,{content:(0,yX.UM)(l.content)?s(o):l.content})),zet(n,{statistic:(0,mX.pi)((0,mX.pi)({},i),{content:l}),plotType:"liquid"},{percent:o}),e&&n.render(!0),t}function gct(t){return Cet(cnt,int("liquidStyle"),dct,fct,dnt({}),lnt,snt)(t)}var mct={radius:.9,statistic:{title:!1,content:{style:{opacity:.75,fontSize:"30px",lineHeight:"30px",textAlign:"center"}}},outline:{border:2,distance:0},wave:{count:3,length:192},shape:"circle"};function yct(t,e,n){return t+(e-t)*n}function vct(t,e,n,r){return 0===e?[[t+.5*n/Math.PI/2,r/2],[t+.5*n/Math.PI,r],[t+n/4,r]]:1===e?[[t+.5*n/Math.PI/2*(Math.PI-2),r],[t+.5*n/Math.PI/2*(Math.PI-1),r/2],[t+n/4,0]]:2===e?[[t+.5*n/Math.PI/2,-r/2],[t+.5*n/Math.PI,-r],[t+n/4,-r]]:[[t+.5*n/Math.PI/2*(Math.PI-2),-r],[t+.5*n/Math.PI/2*(Math.PI-1),-r/2],[t+n/4,0]]}function xct(t,e,n,r,i,o,a){for(var s=4*Math.ceil(2*t/n*4),l=[],c=r;c<2*-Math.PI;)c+=2*Math.PI;for(;c>0;)c-=2*Math.PI;var u=o-t+(c=c/Math.PI/2*n)-2*t;l.push(["M",u,e]);for(var h=0,p=0;p<s;++p){var d=vct(p*n/4,p%4,n,i);l.push(["C",d[0][0]+u,-d[0][1]+e,d[1][0]+u,-d[1][1]+e,d[2][0]+u,-d[2][1]+e]),p===s-1&&(h=d[2][0])}return l.push(["L",h+u,a+t]),l.push(["L",u,a+t]),l.push(["Z"]),l}var _ct={pin:function(t,e,n,r){var i=2*n/3,o=Math.max(i,r),a=i/2,s=t,l=a+e-o/2,c=Math.asin(a/(.85*(o-a))),u=Math.sin(c)*a,h=Math.cos(c)*a,p=s-h,d=l+u,f=t,g=l+a/Math.sin(c);return"\n      M ".concat(p," ").concat(d,"\n      A ").concat(a," ").concat(a," 0 1 1 ").concat(p+2*h," ").concat(d,"\n      Q ").concat(f," ").concat(g," ").concat(t," ").concat(e+o/2,"\n      Q ").concat(f," ").concat(g," ").concat(p," ").concat(d,"\n      Z \n    ")},circle:function(t,e,n,r){var i=n/2,o=r/2;return"\n      M ".concat(t," ").concat(e-o," \n      a ").concat(i," ").concat(o," 0 1 0 0 ").concat(2*o,"\n      a ").concat(i," ").concat(o," 0 1 0 0 ").concat(2*-o,"\n      Z\n    ")},diamond:function(t,e,n,r){var i=r/2,o=n/2;return"\n      M ".concat(t," ").concat(e-i,"\n      L ").concat(t+o," ").concat(e,"\n      L ").concat(t," ").concat(e+i,"\n      L ").concat(t-o," ").concat(e,"\n      Z\n    ")},triangle:function(t,e,n,r){var i=r/2,o=n/2;return"\n      M ".concat(t," ").concat(e-i,"\n      L ").concat(t+o," ").concat(e+i,"\n      L ").concat(t-o," ").concat(e+i,"\n      Z\n    ")},rect:function(t,e,n,r){var i=r/2,o=n/2*.618;return"\n      M ".concat(t-o," ").concat(e-i,"\n      L ").concat(t+o," ").concat(e-i,"\n      L ").concat(t+o," ").concat(e+i,"\n      L ").concat(t-o," ").concat(e+i,"\n      Z\n    ")}};E2("interval","liquid-fill-gauge",{draw:function(t,e){var n=t.customInfo,r=n,i=r.percent,o=r.radius,a=r.shape,s=r.shapeStyle,l=r.background,c=r.animation,u=n.outline,h=n.wave,p=u.border,d=u.distance,f=h.count,g=h.length,m=(0,yX.u4)(t.points,(function(t,e){return Math.min(t,e.x)}),1/0),y=this.parsePoint({x:.5,y:.5}),v=this.parsePoint({x:m,y:.5}),x=y.x-v.x,_=Math.min(x,v.y*o),b=function(t){var e=(0,mX.pi)({opacity:1},t.style);return t.color&&!e.fill&&(e.fill=t.color),e}(t),w=function(t){var e=(0,yX.CD)({},{fill:"#fff",fillOpacity:0,lineWidth:4},t.style);return t.color&&!e.stroke&&(e.stroke=t.color),(0,yX.hj)(t.opacity)&&(e.opacity=e.strokeOpacity=t.opacity),e}((0,yX.CD)({},t,u)),S=_-p/2,C=("function"===typeof a?a:_ct[a]||_ct.circle)(y.x,y.y,2*S,2*S);if(s&&e.addShape("path",{name:"shape",attrs:(0,mX.pi)({path:C},s)}),i>0){var E=e.addGroup({name:"waves"}),k=E.setClip({type:"path",attrs:{path:C}});!function(t,e,n,r,i,o,a,s,l,c){for(var u=i.fill,h=i.opacity,p=a.getBBox(),d=p.maxX-p.minX,f=p.maxY-p.minY,g=0;g<r;g++){var m=r<=1?1:g/(r-1),y=o.addShape("path",{name:"waterwave-path",attrs:{path:xct(s,p.minY+f*n,l,0,d/32,t,e),fill:u,opacity:yct(.2,.9,m)*h}});try{if(!1===c)return;var v=Git([["t",l,0]]);y.stopAnimate(),y.animate({matrix:v},{duration:yct(2500,5e3,m),repeat:!0})}catch(kg){console.warn("off-screen group animate error!")}}}(y.x,y.y,1-t.points[1].y,f,b,E,k,2*_,g,c)}return e.addShape("path",{name:"distance",attrs:{path:C,fill:"transparent",lineWidth:p+2*d,stroke:"transparent"===l?"#fff":l}}),e.addShape("path",{name:"wrap",attrs:(0,yX.CD)(w,{path:C,fill:"transparent",lineWidth:p})}),e}});!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="liquid",e}(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return mct},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.changeData=function(t){this.chart.emit(vX.BEFORE_CHANGE_DATA,X1.fromData(this.chart,vX.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:t}),this.chart.data(pct(t)),fct({chart:this.chart,options:this.options},!0),this.chart.emit(vX.AFTER_CHANGE_DATA,X1.fromData(this.chart,vX.AFTER_CHANGE_DATA,null))},e.prototype.getSchemaAdaptor=function(){return gct}}(Lnt);function bct(t){var e=t.chart,n=t.options,r=n.data,i=n.lineStyle,o=n.color,a=n.point,s=n.area;e.data(r);var l=bet({},t,{options:{line:{style:i,color:o},point:a?(0,mX.pi)({color:o},a):a,area:s?(0,mX.pi)({color:o},s):s,label:void 0}}),c=bet({},l,{options:{tooltip:!1}}),u=(null===a||void 0===a?void 0:a.state)||n.state,h=bet({},l,{options:{tooltip:!1,state:u}});return Tnt(l),Int(h),Ent(c),t}function wct(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return Cet(dnt(((e={})[o]=r,e[a]=i,e)))(t)}function Sct(t){var e=t.chart,n=t.options,r=n.radius,i=n.startAngle,o=n.endAngle;return e.coordinate("polar",{radius:r,startAngle:i,endAngle:o}),t}function Cct(t){var e=t.chart,n=t.options,r=n.xField,i=n.xAxis,o=n.yField,a=n.yAxis;return e.axis(r,i),e.axis(o,a),t}function Ect(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,o=Eet(e,"line");if(r){var a=r.callback,s=(0,mX._T)(r,["callback"]);o.label({fields:[i],callback:a,cfg:Tet(s)})}else o.label(!1);return t}function kct(t){return Cet(bct,wct,cnt,Sct,Cct,ont,ant,Ect,snt,lnt,fnt())(t)}var Mct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"radar-tooltip"},enumerable:!1,configurable:!0}),e.prototype.getTooltipItems=function(e){var n=this.getTooltipCfg(),r=n.shared,i=n.title,o=t.prototype.getTooltipItems.call(this,e);if(o.length>0){var a=this.view.geometries[0],s=a.dataArray,l=o[0].name,c=[];return s.forEach((function(t){t.forEach((function(t){var e=c3.getTooltipItems(t,a)[0];if(!r&&e&&e.name===l){var n=(0,yX.UM)(i)?l:i;c.push((0,mX.pi)((0,mX.pi)({},e),{name:e.title,title:n}))}else if(r&&e){n=(0,yX.UM)(i)?e.name||l:i;c.push((0,mX.pi)((0,mX.pi)({},e),{name:e.title,title:n}))}}))})),c}return[]},e}(o2);V1("radar-tooltip",Mct);var Tct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.init=function(){this.context.view.removeInteraction("tooltip")},e.prototype.show=function(){var t=this.context.event;this.getTooltipController().showTooltip({x:t.x,y:t.y})},e.prototype.hide=function(){this.getTooltipController().hideTooltip()},e.prototype.getTooltipController=function(){return this.context.view.getController("radar-tooltip")},e}(n0);s0("radar-tooltip",Tct),f1("radar-tooltip",{start:[{trigger:"plot:mousemove",action:"radar-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"radar-tooltip:hide"}]});!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="radar",e}(0,mX.ZT)(e,t),e.prototype.changeData=function(t){this.updateOption({data:t}),this.chart.changeData(t)},e.prototype.getDefaultOptions=function(){return bet({},t.prototype.getDefaultOptions.call(this),{xAxis:{label:{offset:15},grid:{line:{type:"line"}}},yAxis:{grid:{line:{type:"circle"}}},legend:{position:"top"},tooltip:{shared:!0,showCrosshairs:!0,showMarkers:!0,crosshairs:{type:"xy",line:{style:{stroke:"#565656",lineDash:[4]}},follow:!0}}})},e.prototype.getSchemaAdaptor=function(){return kct}}(Lnt);function Ict(t,e,n){var r=n.map((function(t){return t[e]})).filter((function(t){return void 0!==t})),i=r.length>0?Math.max.apply(Math,r):0,o=Math.abs(t)%360;return o?360*i/o:i}function Pct(t){var e=t.chart,n=t.options,r=n.barStyle,i=n.color,o=n.tooltip,a=n.colorField,s=n.type,l=n.xField,c=n.yField,u=n.data,h=n.shape,p=fet(u,c);return e.data(p),Mnt(bet({},t,{options:{tooltip:o,seriesField:a,interval:{style:r,color:i,shape:h||("line"===s?"line":"intervel")},minColumnWidth:n.minBarWidth,maxColumnWidth:n.maxBarWidth,columnBackground:n.barBackground}})),"line"===s&&Int({chart:e,options:{xField:l,yField:c,seriesField:a,point:{shape:"circle",color:i}}}),t}function Oct(t){var e,n=t.options,r=n.yField,i=n.xField,o=n.data,a=n.isStack,s=n.isGroup,l=n.colorField,c=n.maxAngle,u=a&&!s&&l?function(t,e,n){var r=[];return t.forEach((function(t){var i=r.find((function(n){return n[e]===t[e]}));i?i[n]+=t[n]||null:r.push((0,mX.pi)({},t))})),r}(o,i,r):o,h=fet(u,r);return Cet(dnt(((e={})[r]={min:0,max:Ict(c,r,h)},e)))(t)}function Act(t){var e=t.chart,n=t.options,r=n.radius,i=n.innerRadius,o=n.startAngle,a=n.endAngle;return e.coordinate({type:"polar",cfg:{radius:r,innerRadius:i,startAngle:o,endAngle:a}}).transpose(),t}function Dct(t){var e=t.chart,n=t.options,r=n.xField,i=n.xAxis;return e.axis(r,i),t}function Rct(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,o=Eet(e,"interval");if(r){var a=r.callback,s=(0,mX._T)(r,["callback"]);o.label({fields:[i],callback:a,cfg:(0,mX.pi)((0,mX.pi)({},Tet(s)),{type:"polar"})})}else o.label(!1);return t}function Lct(t){return Cet(int("barStyle"),Pct,Oct,Dct,Act,snt,lnt,cnt,ant,ont,fnt(),Rct)(t)}var Nct=bet({},Lnt.getDefaultOptions(),{interactions:[{type:"element-active"}],legend:!1,tooltip:{showMarkers:!1},xAxis:{grid:null,tickLine:null,line:null},maxAngle:240});!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="radial-bar",e}(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return Nct},e.prototype.changeData=function(t){this.updateOption({data:t}),Oct({chart:this.chart,options:this.options}),this.chart.changeData(t)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Lct}}(Lnt);function Fct(t){var e=t.chart,n=t.options,r=n.data,i=n.sectorStyle,o=n.shape,a=n.color;return e.data(r),Cet(Mnt)(bet({},t,{options:{marginRatio:1,interval:{style:i,color:a,shape:o}}})),t}function zct(t){var e=t.chart,n=t.options,r=n.label,i=n.xField,o=Eet(e,"interval");if(!1===r)o.label(!1);else if((0,yX.Kn)(r)){var a=r.callback,s=r.fields,l=(0,mX._T)(r,["callback","fields"]),c=l.offset,u=l.layout;(void 0===c||c>=0)&&(u=u?(0,yX.kJ)(u)?u:[u]:[],l.layout=(0,yX.hX)(u,(function(t){return"limit-in-shape"!==t.type})),l.layout.length||delete l.layout),o.label({fields:s||[i],callback:a,cfg:Tet(l)})}else uet(oet.WARN,null===r,"the label option must be an Object."),o.label({fields:[i]});return t}function Bct(t){var e=t.chart,n=t.options,r=n.legend,i=n.seriesField;return!1===r?e.legend(!1):i&&e.legend(i,r),t}function $ct(t){var e=t.chart,n=t.options,r=n.radius,i=n.innerRadius,o=n.startAngle,a=n.endAngle;return e.coordinate({type:"polar",cfg:{radius:r,innerRadius:i,startAngle:o,endAngle:a}}),t}function jct(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return Cet(dnt(((e={})[o]=r,e[a]=i,e)))(t)}function Uct(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return r?e.axis(o,r):e.axis(o,!1),i?e.axis(a,i):e.axis(a,!1),t}function Vct(t){Cet(int("sectorStyle"),Fct,jct,zct,$ct,Uct,Bct,ant,snt,lnt,cnt,fnt(),unt)(t)}var Hct=bet({},Lnt.getDefaultOptions(),{xAxis:!1,yAxis:!1,legend:{position:"right",radio:{}},sectorStyle:{stroke:"#fff",lineWidth:1},label:{layout:{type:"limit-in-shape"}},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]}),Gct=(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="rose",e}(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return Hct},e.prototype.changeData=function(t){this.updateOption({data:t}),this.chart.changeData(t)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Vct}}(Lnt),"x"),Wct="y",Xct="name",qct="nodes",Yct="edges";function Zct(t,e,n){if(!(0,yX.kJ)(t))return[];var r=[],i=function(t,e,n){var r=[];return t.forEach((function(t){var i=t[e],o=t[n];r.includes(i)||r.push(i),r.includes(o)||r.push(o)})),r}(t,e,n),o=function(t,e,n,r){var i={};return e.forEach((function(t){i[t]={},e.forEach((function(e){i[t][e]=0}))})),t.forEach((function(t){i[t[n]][t[r]]=1})),i}(t,i,e,n),a={};function s(t){a[t]=1,i.forEach((function(e){if(0!=o[t][e])if(1==a[e])r.push("".concat(t,"_").concat(e));else{if(-1==a[e])return;s(e)}})),a[t]=-1}return i.forEach((function(t){a[t]=0})),i.forEach((function(t){-1!=a[t]&&s(t)})),0!==r.length&&console.warn("sankey data contains circle, ".concat(r.length," records removed."),r),t.filter((function(t){return r.findIndex((function(r){return r==="".concat(t[e],"_").concat(t[n])}))<0}))}function Kct(t){return t.target.depth}function Jct(t,e){return t.sourceLinks.length?t.depth:e-1}function Qct(t){return function(){return t}}function tut(t,e){for(var n=0,r=0;r<t.length;r++)n+=e(t[r]);return n}function eut(t,e){for(var n=-1/0,r=0;r<t.length;r++)n=Math.max(e(t[r]),n);return n}function nut(t,e){return iut(t.source,e.source)||t.index-e.index}function rut(t,e){return iut(t.target,e.target)||t.index-e.index}function iut(t,e){return t.y0-e.y0}function out(t){return t.value}function aut(t){return t.index}function sut(t){return t.nodes}function lut(t){return t.links}function cut(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function uut(t){for(var e=0,n=t.nodes;e<n.length;e++){for(var r=n[e],i=r.y0,o=i,a=0,s=r.sourceLinks;a<s.length;a++){(u=s[a]).y0=i+u.width/2,i+=u.width}for(var l=0,c=r.targetLinks;l<c.length;l++){var u;(u=c[l]).y1=o+u.width/2,o+=u.width}}}function hut(){var t,e,n,r,i=0,o=0,a=1,s=1,l=24,c=8,u=aut,h=Jct,p=sut,d=lut,f=6;function g(g){var v={nodes:p(g),links:d(g)};return function(t){var e=t.nodes,n=t.links;e.forEach((function(t,e){t.index=e,t.sourceLinks=[],t.targetLinks=[]}));var i=new Map(e.map((function(t){return[u(t),t]})));if(n.forEach((function(t,e){t.index=e;var n=t.source,r=t.target;"object"!==typeof n&&(n=t.source=cut(i,n)),"object"!==typeof r&&(r=t.target=cut(i,r)),n.sourceLinks.push(t),r.targetLinks.push(t)})),null!=r)for(var o=0,a=e;o<a.length;o++){var s=a[o],l=s.sourceLinks,c=s.targetLinks;l.sort(r),c.sort(r)}}(v),function(t){for(var e=t.nodes,n=0,r=e;n<r.length;n++){var i=r[n];i.value=void 0===i.fixedValue?Math.max(tut(i.sourceLinks,out),tut(i.targetLinks,out)):i.fixedValue}}(v),function(t){var n=t.nodes,r=n.length,i=new Set(n),o=new Set,a=0;for(;i.size;){if(i.forEach((function(t){t.depth=a;for(var e=0,n=t.sourceLinks;e<n.length;e++){var r=n[e].target;o.add(r)}})),++a>r)throw new Error("circular link");i=o,o=new Set}if(e)for(var s=Math.max(eut(n,(function(t){return t.depth}))+1,0),l=void 0,c=0;c<n.length;c++)(l=n[c]).depth=e.call(null,l,s)}(v),function(t){var e=t.nodes,n=e.length,r=new Set(e),i=new Set,o=0;for(;r.size;){if(r.forEach((function(t){t.height=o;for(var e=0,n=t.targetLinks;e<n.length;e++){var r=n[e].source;i.add(r)}})),++o>n)throw new Error("circular link");r=i,i=new Set}}(v),function(e){var r=function(t){for(var e=t.nodes,r=Math.max(eut(e,(function(t){return t.depth}))+1,0),o=(a-i-l)/(r-1),s=new Array(r).fill(0).map((function(){return[]})),c=0,u=e;c<u.length;c++){var p=u[c],d=Math.max(0,Math.min(r-1,Math.floor(h.call(null,p,r))));p.layer=d,p.x0=i+d*o,p.x1=p.x0+l,s[d]?s[d].push(p):s[d]=[p]}if(n)for(var f=0,g=s;f<g.length;f++){g[f].sort(n)}return s}(e);t=Math.min(c,(s-o)/(eut(r,(function(t){return t.length}))-1)),function(e){for(var n=function(t,e){for(var n=1/0,r=0;r<t.length;r++)n=Math.min(e(t[r]),n);return n}(e,(function(e){return(s-o-(e.length-1)*t)/tut(e,out)})),r=0,i=e;r<i.length;r++){for(var a=i[r],l=o,c=0,u=a;c<u.length;c++){(g=u[c]).y0=l,g.y1=l+g.value*n,l=g.y1+t;for(var h=0,p=g.sourceLinks;h<p.length;h++){var d=p[h];d.width=d.value*n}}l=(s-l+t)/(a.length+1);for(var f=0;f<a.length;++f){var g;(g=a[f]).y0+=l*(f+1),g.y1+=l*(f+1)}w(a)}}(r);for(var u=0;u<f;++u){var p=Math.pow(.99,u),d=Math.max(1-p,(u+1)/f);y(r,p,d),m(r,p,d)}}(v),uut(v),v}function m(t,e,r){for(var i=1,o=t.length;i<o;++i){for(var a=t[i],s=0,l=a;s<l.length;s++){for(var c=l[s],u=0,h=0,p=0,d=c.targetLinks;p<d.length;p++){var f=d[p],g=f.source,m=f.value*(c.layer-g.layer);u+=S(g,c)*m,h+=m}if(h>0){var y=(u/h-c.y0)*e;c.y0+=y,c.y1+=y,b(c)}}void 0===n&&a.sort(iut),a.length&&v(a,r)}}function y(t,e,r){for(var i=t.length-2;i>=0;--i){for(var o=t[i],a=0,s=o;a<s.length;a++){for(var l=s[a],c=0,u=0,h=0,p=l.sourceLinks;h<p.length;h++){var d=p[h],f=d.target,g=d.value*(f.layer-l.layer);c+=C(l,f)*g,u+=g}if(u>0){var m=(c/u-l.y0)*e;l.y0+=m,l.y1+=m,b(l)}}void 0===n&&o.sort(iut),o.length&&v(o,r)}}function v(e,n){var r=e.length>>1,i=e[r];_(e,i.y0-t,r-1,n),x(e,i.y1+t,r+1,n),_(e,s,e.length-1,n),x(e,o,0,n)}function x(e,n,r,i){for(;r<e.length;++r){var o=e[r],a=(n-o.y0)*i;a>1e-6&&(o.y0+=a,o.y1+=a),n=o.y1+t}}function _(e,n,r,i){for(;r>=0;--r){var o=e[r],a=(o.y1-n)*i;a>1e-6&&(o.y0-=a,o.y1-=a),n=o.y0-t}}function b(t){var e=t.sourceLinks,n=t.targetLinks;if(void 0===r){for(var i=0,o=n;i<o.length;i++){o[i].source.sourceLinks.sort(rut)}for(var a=0,s=e;a<s.length;a++){s[a].target.targetLinks.sort(nut)}}}function w(t){if(void 0===r)for(var e=0,n=t;e<n.length;e++){var i=n[e],o=i.sourceLinks,a=i.targetLinks;o.sort(rut),a.sort(nut)}}function S(e,n){for(var r=e.y0-(e.sourceLinks.length-1)*t/2,i=0,o=e.sourceLinks;i<o.length;i++){var a=o[i],s=a.target,l=a.width;if(s===n)break;r+=l+t}for(var c=0,u=n.targetLinks;c<u.length;c++){var h=u[c];s=h.source,l=h.width;if(s===e)break;r-=l}return r}function C(e,n){for(var r=n.y0-(n.targetLinks.length-1)*t/2,i=0,o=n.targetLinks;i<o.length;i++){var a=o[i],s=a.source,l=a.width;if(s===e)break;r+=l+t}for(var c=0,u=e.sourceLinks;c<u.length;c++){var h=u[c];s=h.target,l=h.width;if(s===n)break;r-=l}return r}return g.update=function(t){return uut(t),t},g.nodeId=function(t){return arguments.length?(u="function"===typeof t?t:Qct(t),g):u},g.nodeAlign=function(t){return arguments.length?(h="function"===typeof t?t:Qct(t),g):h},g.nodeDepth=function(t){return arguments.length?(e=t,g):e},g.nodeSort=function(t){return arguments.length?(n=t,g):n},g.nodeWidth=function(t){return arguments.length?(l=+t,g):l},g.nodePadding=function(e){return arguments.length?(c=t=+e,g):c},g.nodes=function(t){return arguments.length?(p="function"===typeof t?t:Qct(t),g):p},g.links=function(t){return arguments.length?(d="function"===typeof t?t:Qct(t),g):d},g.linkSort=function(t){return arguments.length?(r=t,g):r},g.size=function(t){return arguments.length?(i=o=0,a=+t[0],s=+t[1],g):[a-i,s-o]},g.extent=function(t){return arguments.length?(i=+t[0][0],a=+t[1][0],o=+t[0][1],s=+t[1][1],g):[[i,o],[a,s]]},g.iterations=function(t){return arguments.length?(f=+t,g):f},g}var put={left:function(t){return t.depth},right:function(t,e){return e-1-t.height},center:function(t){return t.targetLinks.length?t.depth:t.sourceLinks.length?(0,yX.F)(t.sourceLinks,Kct)-1:0},justify:Jct},dut={nodeId:function(t){return t.index},nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodeSort:void 0};function fut(t,e){var n=function(t){return(0,yX.f0)({},dut,t)}(t),r=n.nodeId,i=n.nodeSort,o=n.nodeAlign,a=n.nodeWidth,s=n.nodePadding,l=n.nodeDepth,c=hut().nodeSort(i).nodeWidth(a).nodePadding(s).nodeDepth(l).nodeAlign(function(t){return((0,yX.HD)(t)?put[t]:(0,yX.mf)(t)?t:null)||Jct}(o)).extent([[0,0],[1,1]]).nodeId(r),u=c(e),h=u.nodes.map((function(t){var e=t.x0,n=t.x1,r=t.y0,i=t.y1;return t.x=[e,n,n,e],t.y=[r,r,i,i],t})).filter((function(t){return null!==t.name})),p=u.links.map((function(t){var e=t.source,n=t.target,r=e.x1,i=n.x0;t.x=[r,r,i,i];var o=t.width/2;return t.y=[t.y0+o,t.y0-o,t.y1+o,t.y1-o],t})).filter((function(t){var e=t.source,n=t.target;return null!==e.name&&null!==n.name}));return{nodes:h,links:p}}function gut(t,e,n){return Iet(t)?t/n:e}function mut(t,e,n){return Iet(t)?t/n:e}function yut(t,e,n){var r,i=t.dataType,o=t.data,a=t.sourceField,s=t.targetField,l=t.weightField,c=t.nodeAlign,u=t.nodeSort,h=t.nodePadding,p=t.nodePaddingRatio,d=t.nodeWidth,f=t.nodeWidthRatio,g=t.nodeDepth,m=t.rawFields,y=void 0===m?[]:m;r=function(t){return"node-link"===t}(i)?o:det(Zct(o,a,s),a,s,l,y);var v=fut({nodeAlign:c,nodePadding:mut(h,p,n),nodeWidth:gut(d,f,e),nodeSort:u,nodeDepth:g},r),x=v.nodes,_=v.links;return{nodes:x.map((function(t){return(0,mX.pi)((0,mX.pi)({},het(t,(0,mX.ev)(["x","y","name"],y,!0))),{isNode:!0})})),edges:_.map((function(t){return(0,mX.pi)((0,mX.pi)({source:t.source.name,target:t.target.name,name:t.source.name||t.target.name},het(t,(0,mX.ev)(["x","y","value"],y,!0))),{isNode:!1})}))}}function vut(t){var e=t.options.rawFields,n=void 0===e?[]:e;return bet({},{options:{tooltip:{fields:(0,yX.jj)((0,mX.ev)(["name","source","target","value","isNode"],n,!0))},label:{fields:(0,yX.jj)((0,mX.ev)(["x","name"],n,!0))}}},t)}function xut(t){var e=t.chart,n=t.options,r=n.color,i=n.nodeStyle,o=n.edgeStyle,a=n.label,s=n.tooltip,l=n.nodeState,c=n.edgeState,u=n.rawFields,h=void 0===u?[]:u;e.legend(!1),e.tooltip(s),e.axis(!1),e.coordinate().reflect("y");var p=yut(n,e.width,e.height),d=p.nodes,f=p.edges,g=e.createView({id:Yct});g.data(f),knt({chart:g,options:{xField:Gct,yField:Wct,seriesField:Xct,rawFields:(0,mX.ev)(["source","target"],h,!0),edge:{color:r,style:o,shape:"arc"},tooltip:s,state:c}});var m=e.createView({id:qct});return m.data(d),Pnt({chart:m,options:{xField:Gct,yField:Wct,seriesField:Xct,polygon:{color:r,style:i},label:a,tooltip:s,state:l}}),e.interaction("element-active"),e.scale({x:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},y:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},name:{sync:"color",type:"cat"}}),t}function _ut(t){var e=t.chart;return Het(e,t.options.animation,(0,mX.ev)((0,mX.ev)([],e.views[0].geometries,!0),e.views[1].geometries,!0)),t}function but(t){var e=t.chart,n="sankey-node-draggable";return t.options.nodeDraggable?e.interaction(n):e.removeInteraction(n),t}function wut(t){var e=t.chart,n=t.options,r=n.interactions,i=void 0===r?[]:r,o=[].concat(i,n.nodeInteractions||[]),a=[].concat(i,n.edgeInteractions||[]),s=jet(e,qct),l=jet(e,Yct);return o.forEach((function(t){!1===(null===t||void 0===t?void 0:t.enable)?s.removeInteraction(t.type):s.interaction(t.type,t.cfg||{})})),a.forEach((function(t){!1===(null===t||void 0===t?void 0:t.enable)?l.removeInteraction(t.type):l.interaction(t.type,t.cfg||{})})),t}function Sut(t){return Cet(vut,xut,wut,but,_ut,cnt)(t)}var Cut=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isDragging=!1,e}return(0,mX.ZT)(e,t),e.prototype.isNodeElement=function(){var t=(0,yX.U2)(this.context,"event.target");if(t){var e=t.get("element");return e&&e.getModel().data.isNode}return!1},e.prototype.getNodeView=function(){return jet(this.context.view,qct)},e.prototype.getEdgeView=function(){return jet(this.context.view,Yct)},e.prototype.getCurrentDatumIdx=function(t){return this.getNodeView().geometries[0].elements.indexOf(t)},e.prototype.start=function(){if(this.isNodeElement()){this.prevPoint={x:(0,yX.U2)(this.context,"event.x"),y:(0,yX.U2)(this.context,"event.y")};var t=this.context.event.target.get("element"),e=this.getCurrentDatumIdx(t);if(-1===e)return;this.currentElementIdx=e,this.context.isDragging=!0,this.isDragging=!0,this.prevNodeAnimateCfg=this.getNodeView().getOptions().animate,this.prevEdgeAnimateCfg=this.getEdgeView().getOptions().animate,this.getNodeView().animate(!1),this.getEdgeView().animate(!1)}},e.prototype.translate=function(){if(this.isDragging){var t=this.context.view,e={x:(0,yX.U2)(this.context,"event.x"),y:(0,yX.U2)(this.context,"event.y")},n=e.x-this.prevPoint.x,r=e.y-this.prevPoint.y,i=this.getNodeView(),o=i.geometries[0].elements[this.currentElementIdx];if(o&&o.getModel()){var a=o.getModel().data,s=i.getOptions().data,l=i.getCoordinate(),c={x:n/l.getWidth(),y:r/l.getHeight()},u=(0,mX.pi)((0,mX.pi)({},a),{x:a.x.map((function(t){return t+c.x})),y:a.y.map((function(t){return t+c.y}))}),h=(0,mX.ev)([],s,!0);h[this.currentElementIdx]=u,i.data(h);var p=a.name,d=this.getEdgeView(),f=d.getOptions().data;f.forEach((function(t){t.source===p&&(t.x[0]+=c.x,t.x[1]+=c.x,t.y[0]+=c.y,t.y[1]+=c.y),t.target===p&&(t.x[2]+=c.x,t.x[3]+=c.x,t.y[2]+=c.y,t.y[3]+=c.y)})),d.data(f),this.prevPoint=e,t.render(!0)}}},e.prototype.end=function(){this.isDragging=!1,this.context.isDragging=!1,this.prevPoint=null,this.currentElementIdx=null,this.getNodeView().animate(this.prevNodeAnimateCfg),this.getEdgeView().animate(this.prevEdgeAnimateCfg)},e}(n0);s0("sankey-node-drag",Cut),f1("sankey-node-draggable",{showEnable:[{trigger:"polygon:mouseenter",action:"cursor:pointer"},{trigger:"polygon:mouseleave",action:"cursor:default"}],start:[{trigger:"polygon:mousedown",action:"sankey-node-drag:start"}],processing:[{trigger:"plot:mousemove",action:"sankey-node-drag:translate"},{isEnable:function(t){return t.isDragging},trigger:"plot:mousemove",action:"cursor:move"}],end:[{trigger:"plot:mouseup",action:"sankey-node-drag:end"}]});!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="sankey",e}(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return{appendPadding:8,syncViewPadding:!0,nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.3,lineWidth:0},edgeState:{active:{style:{opacity:.8,lineWidth:0}}},label:{formatter:function(t){return t.name},callback:function(t){var e=1===t[1];return{style:{fill:"#545454",textAlign:e?"end":"start"},offsetX:e?-8:8}},layout:[{type:"hide-overlap"}]},tooltip:{showTitle:!1,showMarkers:!1,shared:!1,showContent:function(t){return!(0,yX.U2)(t,[0,"data","isNode"])},formatter:function(t){return{name:t.source+" -> "+t.target,value:t.value}}},nodeWidthRatio:.008,nodePaddingRatio:.01,animation:{appear:{animation:"wave-in"},enter:{animation:"wave-in"}}}},e.prototype.changeData=function(t){this.updateOption({data:t});var e=yut(this.options,this.chart.width,this.chart.height),n=e.nodes,r=e.edges,i=jet(this.chart,qct),o=jet(this.chart,Yct);i.changeData(n),o.changeData(r)},e.prototype.getSchemaAdaptor=function(){return Sut},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()}}(Lnt);var Eut="ancestor-node",kut="value",Mut="path",Tut=[Mut,ilt,alt,olt,"name","depth","height"],Iut=bet({},Lnt.getDefaultOptions(),{innerRadius:0,radius:.85,hierarchyConfig:{field:"value"},tooltip:{shared:!0,showMarkers:!1,offset:20,showTitle:!1},legend:!1,sunburstStyle:{lineWidth:.5,stroke:"#FFF"},drilldown:{enabled:!0}});function Put(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function Out(t,e,n,r,i){for(var o,a=t.children,s=-1,l=a.length,c=t.value&&(r-e)/t.value;++s<l;)(o=a[s]).y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*c}function Aut(){var t=1,e=1,n=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/o,i.eachBefore(function(t,e){return function(r){r.children&&Out(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,o=r.y0,a=r.x1-n,s=r.y1-n;a<i&&(i=a=(i+a)/2),s<o&&(o=s=(o+s)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=s}}(e,o)),r&&i.eachBefore(Put),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i}var Dut={field:"value",size:[1,1],round:!1,padding:0,sort:function(t,e){return e.value-t.value},as:["x","y"],ignoreParentValue:!0};function Rut(t,e){var n,r=(e=(0,yX.f0)({},Dut,e)).as;if(!(0,yX.kJ)(r)||2!==r.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');try{n=llt(e)}catch(kg){console.warn(kg)}var i=function(t){return Aut().size(e.size).round(e.round).padding(e.padding)(Jst(t).sum((function(t){return(0,yX.dp)(t.children)?e.ignoreParentValue?0:t[n]-(0,yX.u4)(t.children,(function(t,e){return t+e[n]}),0):t[n]})).sort(e.sort))}(t),o=r[0],a=r[1];return i.each((function(t){var e,n;t[o]=[t.x0,t.x1,t.x1,t.x0],t[a]=[t.y1,t.y1,t.y0,t.y0],t.name=t.name||(null===(e=t.data)||void 0===e?void 0:e.name)||(null===(n=t.data)||void 0===n?void 0:n.label),t.data.name=t.name,["x0","x1","y0","y1"].forEach((function(e){-1===r.indexOf(e)&&delete t[e]}))})),clt(i)}function Lut(t,e){return t.parent===e.parent?1:2}function Nut(t,e){return t+e.x}function Fut(t,e){return Math.max(t,e.y)}function zut(){var t=Lut,e=1,n=1,r=!1;function i(i){var o,a=0;i.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(Nut,0)/t.length}(n),e.y=function(t){return 1+t.reduce(Fut,0)}(n)):(e.x=o?a+=t(e,o):0,e.y=0,o=e)}));var s=function(t){for(var e;e=t.children;)t=e[0];return t}(i),l=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),c=s.x-t(s,l)/2,u=l.x+t(l,s)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-c)/(u-c)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}var But={depth:-1},$ut={};function jut(t){return t.id}function Uut(t){return t.parentId}function Vut(){var t=jut,e=Uut;function n(n){var r,i,o,a,s,l,c,u=Array.from(n),h=u.length,p=new Map;for(i=0;i<h;++i)r=u[i],s=u[i]=new rlt(r),null!=(l=t(r,i,n))&&(l+="")&&(c=s.id=l,p.set(c,p.has(c)?$ut:s)),null!=(l=e(r,i,n))&&(l+="")&&(s.parent=l);for(i=0;i<h;++i)if(l=(s=u[i]).parent){if(!(a=p.get(l)))throw new Error("missing: "+l);if(a===$ut)throw new Error("ambiguous: "+l);a.children?a.children.push(s):a.children=[s],s.parent=a}else{if(o)throw new Error("multiple roots");o=s}if(!o)throw new Error("no root");if(o.parent=But,o.eachBefore((function(t){t.depth=t.parent.depth+1,--h})).eachBefore(nlt),o.parent=null,h>0)throw new Error("cycle");return o}return n.id=function(e){return arguments.length?(t=Vst(e),n):t},n.parentId=function(t){return arguments.length?(e=Vst(t),n):e},n}function Hut(t,e){return t.parent===e.parent?1:2}function Gut(t){var e=t.children;return e?e[0]:t.t}function Wut(t){var e=t.children;return e?e[e.length-1]:t.t}function Xut(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function qut(t,e,n){return t.a.parent===e.parent?t.a:n}function Yut(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function Zut(){var t=Hut,e=1,n=1,r=null;function i(i){var l=function(t){for(var e,n,r,i,o,a=new Yut(t,0),s=[a];e=s.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=e.children[i]=new Yut(r[i],i)),n.parent=e;return(a.parent=new Yut(null,0)).children=[a],a}(i);if(l.eachAfter(o),l.parent.m=-l.z,l.eachBefore(a),r)i.eachBefore(s);else{var c=i,u=i,h=i;i.eachBefore((function(t){t.x<c.x&&(c=t),t.x>u.x&&(u=t),t.depth>h.depth&&(h=t)}));var p=c===u?1:t(c,u)/2,d=p-c.x,f=e/(u.x+p+d),g=n/(h.depth||1);i.eachBefore((function(t){t.x=(t.x+d)*f,t.y=t.depth*g}))}return i}function o(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var o=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,o=e,a=e,s=n,l=o.parent.children[0],c=o.m,u=a.m,h=s.m,p=l.m;s=Wut(s),o=Gut(o),s&&o;)l=Gut(l),(a=Wut(a)).a=e,(i=s.z+h-o.z-c+t(s._,o._))>0&&(Xut(qut(s,e,r),e,i),c+=i,u+=i),h+=s.m,c+=o.m,p+=l.m,u+=a.m;s&&!Wut(a)&&(a.t=s,a.m+=h-u),o&&!Gut(l)&&(l.t=o,l.m+=c-p,r=e)}return r}(e,i,e.parent.A||r[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}function Kut(t,e,n,r,i){for(var o,a=t.children,s=-1,l=a.length,c=t.value&&(i-n)/t.value;++s<l;)(o=a[s]).x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*c}Yut.prototype=Object.create(rlt.prototype);var Jut=(1+Math.sqrt(5))/2;function Qut(t,e,n,r,i,o){for(var a,s,l,c,u,h,p,d,f,g,m,y=[],v=e.children,x=0,_=0,b=v.length,w=e.value;x<b;){l=i-n,c=o-r;do{u=v[_++].value}while(!u&&_<b);for(h=p=u,m=u*u*(g=Math.max(c/l,l/c)/(w*t)),f=Math.max(p/m,m/h);_<b;++_){if(u+=s=v[_].value,s<h&&(h=s),s>p&&(p=s),m=u*u*g,(d=Math.max(p/m,m/h))>f){u-=s;break}f=d}y.push(a={value:u,dice:l<c,children:v.slice(x,_)}),a.dice?Out(a,n,r,i,w?r+=c*u/w:o):Kut(a,n,r,w?n+=l*u/w:i,o),w-=u,x=_}return y}var tht=function t(e){function n(t,n,r,i,o){Qut(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Jut);function eht(){var t=tht,e=!1,n=1,r=1,i=[0],o=Hst,a=Hst,s=Hst,l=Hst,c=Hst;function u(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(h),i=[0],e&&t.eachBefore(Put),t}function h(e){var n=i[e.depth],r=e.x0+n,u=e.y0+n,h=e.x1-n,p=e.y1-n;h<r&&(r=h=(r+h)/2),p<u&&(u=p=(u+p)/2),e.x0=r,e.y0=u,e.x1=h,e.y1=p,e.children&&(n=i[e.depth+1]=o(e)/2,r+=c(e)-n,u+=a(e)-n,(h-=s(e)-n)<r&&(r=h=(r+h)/2),(p-=l(e)-n)<u&&(u=p=(u+p)/2),t(e,r,u,h,p))}return u.round=function(t){return arguments.length?(e=!!t,u):e},u.size=function(t){return arguments.length?(n=+t[0],r=+t[1],u):[n,r]},u.tile=function(e){return arguments.length?(t=Vst(e),u):t},u.padding=function(t){return arguments.length?u.paddingInner(t).paddingOuter(t):u.paddingInner()},u.paddingInner=function(t){return arguments.length?(o="function"===typeof t?t:Gst(+t),u):o},u.paddingOuter=function(t){return arguments.length?u.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):u.paddingTop()},u.paddingTop=function(t){return arguments.length?(a="function"===typeof t?t:Gst(+t),u):a},u.paddingRight=function(t){return arguments.length?(s="function"===typeof t?t:Gst(+t),u):s},u.paddingBottom=function(t){return arguments.length?(l="function"===typeof t?t:Gst(+t),u):l},u.paddingLeft=function(t){return arguments.length?(c="function"===typeof t?t:Gst(+t),u):c},u}function nht(t,e,n,r,i){var o,a,s=t.children,l=s.length,c=new Array(l+1);for(c[0]=a=o=0;o<l;++o)c[o+1]=a+=s[o].value;!function t(e,n,r,i,o,a,l){if(e>=n-1){var u=s[e];return u.x0=i,u.y0=o,u.x1=a,void(u.y1=l)}var h=c[e],p=r/2+h,d=e+1,f=n-1;for(;d<f;){var g=d+f>>>1;c[g]<p?d=g+1:f=g}p-c[d-1]<c[d]-p&&e+1<d&&--d;var m=c[d]-h,y=r-m;if(a-i>l-o){var v=r?(i*y+a*m)/r:a;t(e,d,m,i,o,v,l),t(d,n,y,v,o,a,l)}else{var x=r?(o*y+l*m)/r:l;t(e,d,m,i,o,a,x),t(d,n,y,i,x,a,l)}}(0,l,t.value,e,n,r,i)}function rht(t,e,n,r,i){(1&t.depth?Kut:Out)(t,e,n,r,i)}var iht=function t(e){function n(t,n,r,i,o){if((a=t._squarify)&&a.ratio===e)for(var a,s,l,c,u,h=-1,p=a.length,d=t.value;++h<p;){for(l=(s=a[h]).children,c=s.value=0,u=l.length;c<u;++c)s.value+=l[c].value;s.dice?Out(s,n,r,i,d?r+=(o-r)*s.value/d:o):Kut(s,n,r,d?n+=(i-n)*s.value/d:i,o),d-=s.value}else t._squarify=a=Qut(e,t,n,r,i,o),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Jut),oht={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"],sort:function(t,e){return e.value-t.value},ratio:.5*(1+Math.sqrt(5))};function aht(t,e){var n,r=(e=(0,yX.f0)({},oht,e)).as;if(!(0,yX.kJ)(r)||2!==r.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');try{n=llt(e)}catch(kg){console.warn(kg)}var i,o,a=(i=e.tile,o=e.ratio,"treemapSquarify"===i?f[i].ratio(o):f[i]),s=function(t){return eht().tile(a).size(e.size).round(e.round).padding(e.padding).paddingInner(e.paddingInner).paddingOuter(e.paddingOuter).paddingTop(e.paddingTop).paddingRight(e.paddingRight).paddingBottom(e.paddingBottom).paddingLeft(e.paddingLeft)(Jst(t).sum((function(t){return e.ignoreParentValue&&t.children?0:t[n]})).sort(e.sort))}(t),l=r[0],c=r[1];return s.each((function(t){t[l]=[t.x0,t.x1,t.x1,t.x0],t[c]=[t.y1,t.y1,t.y0,t.y0],["x0","x1","y0","y1"].forEach((function(e){-1===r.indexOf(e)&&delete t[e]}))})),clt(s)}function sht(t){var e=t.data,n=t.colorField,r=t.rawFields,i=t.hierarchyConfig,o=void 0===i?{}:i,a=o.activeDepth,s={partition:Rut,treemap:aht},l=t.seriesField,c=t.type||"partition",u=s[c](e,(0,mX.pi)((0,mX.pi)({field:l||"value"},(0,yX.CE)(o,["activeDepth"])),{type:"hierarchy.".concat(c),as:["x","y"]})),h=[];return u.forEach((function(t){var e,i,s,c,u,p;if(0===t.depth)return null;if(a>0&&t.depth>a)return null;for(var d=t.data.name,f=(0,mX.pi)({},t);f.depth>1;)d="".concat(null===(i=f.parent.data)||void 0===i?void 0:i.name," / ").concat(d),f=f.parent;var g=(0,mX.pi)((0,mX.pi)((0,mX.pi)({},het(t.data,(0,mX.ev)((0,mX.ev)([],r||[],!0),[o.field],!1))),((e={})[Mut]=d,e[Eut]=f.data.name,e)),t);l&&(g[l]=t.data[l]||(null===(c=null===(s=t.parent)||void 0===s?void 0:s.data)||void 0===c?void 0:c[l])),n&&(g[n]=t.data[n]||(null===(p=null===(u=t.parent)||void 0===u?void 0:u.data)||void 0===p?void 0:p[n])),g.ext=o,g[Mst]={hierarchyConfig:o,colorField:n,rawFields:r},h.push(g)})),h}function lht(t){var e,n=t.chart,r=t.options,i=r.color,o=r.colorField,a=void 0===o?Eut:o,s=r.sunburstStyle,l=r.rawFields,c=void 0===l?[]:l,u=r.shape,h=sht(r);return n.data(h),s&&(e=function(t){return bet({},{fillOpacity:Math.pow(.85,t.depth)},(0,yX.mf)(s)?s(t):s)}),Pnt(bet({},t,{options:{xField:"x",yField:"y",seriesField:a,rawFields:(0,yX.jj)((0,mX.ev)((0,mX.ev)([],Tut,!0),c,!0)),polygon:{color:i,style:e,shape:u}}})),t}function cht(t){return t.chart.axis(!1),t}function uht(t){var e=t.chart,n=t.options.label,r=Eet(e,"polygon");if(n){var i=n.fields,o=void 0===i?["name"]:i,a=n.callback,s=(0,mX._T)(n,["fields","callback"]);r.label({fields:o,callback:a,cfg:Tet(s)})}else r.label(!1);return t}function hht(t){var e=t.chart,n=t.options,r=n.innerRadius,i=n.radius,o=n.reflect,a=e.coordinate({type:"polar",cfg:{innerRadius:r,radius:i}});return o&&a.reflect(o),t}function pht(t){var e,n=t.options,r=n.hierarchyConfig,i=n.meta;return Cet(dnt({},((e={})[kut]=(0,yX.U2)(i,(0,yX.U2)(r,["field"],"value")),e)))(t)}function dht(t){var e=t.chart,n=t.options.tooltip;if(!1===n)e.tooltip(!1);else{var r=n;(0,yX.U2)(n,"fields")||(r=bet({},{customItems:function(t){return t.map((function(t){var n=(0,yX.U2)(e.getOptions(),"scales"),r=(0,yX.U2)(n,[Mut,"formatter"],(function(t){return t})),i=(0,yX.U2)(n,[kut,"formatter"],(function(t){return t}));return(0,mX.pi)((0,mX.pi)({},t),{name:r(t.data[Mut]),value:i(t.data.value)})}))}},r)),e.tooltip(r)}return t}function fht(t){var e=t.drilldown,n=t.interactions,r=void 0===n?[]:n;return(null===e||void 0===e?void 0:e.enabled)?bet({},t,{interactions:(0,mX.ev)((0,mX.ev)([],r,!0),[{type:"drill-down",cfg:{drillDownConfig:e,transformData:sht}}],!1)}):t}function ght(t){var e=t.chart,n=t.options,r=n.drilldown;return snt({chart:e,options:fht(n)}),(null===r||void 0===r?void 0:r.enabled)&&(e.appendPadding=Oet(e.appendPadding,(0,yX.U2)(r,["breadCrumb","position"]))),t}function mht(t){return Cet(cnt,int("sunburstStyle"),lht,cht,pht,ont,hht,dht,uht,ght,lnt,fnt())(t)}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="sunburst",e}(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return Iut},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return mht},e.SUNBURST_ANCESTOR_FIELD=Eut,e.SUNBURST_PATH_FIELD=Mut,e.NODE_ANCESTORS_FIELD=alt}(Lnt);function yht(t,e){if((0,yX.kJ)(t))return t.find((function(t){return t.type===e}))}function vht(t,e){var n=yht(t,e);return n&&!1!==n.enable}function xht(t){var e=t.interactions,n=t.drilldown;return(0,yX.U2)(n,"enabled")||vht(e,"treemap-drill-down")}function _ht(t){var e=t.data,n=t.colorField,r=t.enableDrillDown,i=t.hierarchyConfig,o=aht(e,(0,mX.pi)((0,mX.pi)({},i),{type:"hierarchy.treemap",field:"value",as:["x","y"]})),a=[];return o.forEach((function(t){if(0===t.depth)return null;if(r&&1!==t.depth)return null;if(!r&&t.children)return null;var o=t.ancestors().map((function(t){return{data:t.data,height:t.height,value:t.value}})),s=r&&(0,yX.kJ)(e.path)?o.concat(e.path.slice(1)):o,l=Object.assign({},t.data,(0,mX.pi)({x:t.x,y:t.y,depth:t.depth,value:t.value,path:s},t));if(!t.data[n]&&t.parent){var c=t.ancestors().find((function(t){return t.data[n]}));l[n]=null===c||void 0===c?void 0:c.data[n]}else l[n]=t.data[n];l[Mst]={hierarchyConfig:i,colorField:n,enableDrillDown:r},a.push(l)})),a}function bht(t){var e=t.options.colorField;return bet({options:{rawFields:["value"],tooltip:{fields:["name","value",e,"path"],formatter:function(t){return{name:t.name,value:t.value}}}}},t)}function wht(t){var e=t.chart,n=t.options,r=n.color,i=n.colorField,o=n.rectStyle,a=n.hierarchyConfig,s=n.rawFields,l=_ht({data:n.data,colorField:n.colorField,enableDrillDown:xht(n),hierarchyConfig:a});return e.data(l),Pnt(bet({},t,{options:{xField:"x",yField:"y",seriesField:i,rawFields:s,polygon:{color:r,style:o}}})),e.coordinate().reflect("y"),t}function Sht(t){return t.chart.axis(!1),t}function Cht(t){var e=t.drilldown,n=t.interactions,r=void 0===n?[]:n;return xht(t)?bet({},t,{interactions:(0,mX.ev)((0,mX.ev)([],r,!0),[{type:"drill-down",cfg:{drillDownConfig:e,transformData:_ht}}],!1)}):t}function Eht(t){var e=t.chart,n=t.options,r=n.interactions,i=n.drilldown;snt({chart:e,options:Cht(n)});var o=yht(r,"view-zoom");return o&&(!1!==o.enable?e.getCanvas().on("mousewheel",(function(t){t.preventDefault()})):e.getCanvas().off("mousewheel")),xht(n)&&(e.appendPadding=Oet(e.appendPadding,(0,yX.U2)(i,["breadCrumb","position"]))),t}function kht(t){return Cet(bht,cnt,int("rectStyle"),wht,Sht,ont,ant,Eht,lnt,fnt())(t)}var Mht={colorField:"name",rectStyle:{lineWidth:1,stroke:"#fff"},hierarchyConfig:{tile:"treemapSquarify"},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1,breadCrumb:{position:"bottom-left",rootText:"\u521d\u59cb",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}}}},Tht=(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="treemap",e}(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return Mht},e.prototype.changeData=function(t){var e=this.options,n=e.colorField,r=e.interactions,i=e.hierarchyConfig;this.updateOption({data:t});var o=_ht({data:t,colorField:n,enableDrillDown:vht(r,"treemap-drill-down"),hierarchyConfig:i});this.chart.changeData(o),function(t){var e=t.interactions["drill-down"];e&&e.context.actions.find((function(t){return"drill-down-action"===t.name})).reset()}(this.chart)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return kht}}(Lnt),"id"),Iht="path",Pht={appendPadding:[10,0,20,0],blendMode:"multiply",tooltip:{showTitle:!1,showMarkers:!1,fields:["id","size"],formatter:function(t){return{name:t.id,value:t.size}}},legend:{position:"top-left"},label:{style:{textAlign:"center",fill:"#fff"}},interactions:[{type:"legend-filter",enable:!1}],state:{active:{style:{stroke:"#000"}},selected:{style:{stroke:"#000",lineWidth:2}},inactive:{style:{fillOpacity:.3,strokeOpacity:.3}}},defaultInteractions:["tooltip","venn-legend-active"]};function Oht(t){t&&t.geometries[0].elements.forEach((function(t){t.shape.toFront()}))}var Aht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.syncElementsPos=function(){Oht(this.context.view)},e.prototype.active=function(){t.prototype.active.call(this),this.syncElementsPos()},e.prototype.toggle=function(){t.prototype.toggle.call(this),this.syncElementsPos()},e.prototype.reset=function(){t.prototype.reset.call(this),this.syncElementsPos()},e}(a0("element-active")),Dht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.syncElementsPos=function(){Oht(this.context.view)},e.prototype.highlight=function(){t.prototype.highlight.call(this),this.syncElementsPos()},e.prototype.toggle=function(){t.prototype.toggle.call(this),this.syncElementsPos()},e.prototype.clear=function(){t.prototype.clear.call(this),this.syncElementsPos()},e.prototype.reset=function(){t.prototype.reset.call(this),this.syncElementsPos()},e}(a0("element-highlight")),Rht=a0("element-selected"),Lht=a0("element-single-selected"),Nht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.syncElementsPos=function(){Oht(this.context.view)},e.prototype.selected=function(){t.prototype.selected.call(this),this.syncElementsPos()},e.prototype.toggle=function(){t.prototype.toggle.call(this),this.syncElementsPos()},e.prototype.reset=function(){t.prototype.reset.call(this),this.syncElementsPos()},e}(Rht),Fht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.syncElementsPos=function(){Oht(this.context.view)},e.prototype.selected=function(){t.prototype.selected.call(this),this.syncElementsPos()},e.prototype.toggle=function(){t.prototype.toggle.call(this),this.syncElementsPos()},e.prototype.reset=function(){t.prototype.reset.call(this),this.syncElementsPos()},e}(Lht);s0("venn-element-active",Aht),s0("venn-element-highlight",Dht),s0("venn-element-selected",Nht),s0("venn-element-single-selected",Fht),f1("venn-element-active",{start:[{trigger:"element:mouseenter",action:"venn-element-active:active"}],end:[{trigger:"element:mouseleave",action:"venn-element-active:reset"}]}),f1("venn-element-highlight",{start:[{trigger:"element:mouseenter",action:"venn-element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"venn-element-highlight:reset"}]}),f1("venn-element-selected",{start:[{trigger:"element:click",action:"venn-element-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-selected:reset"]}]}),f1("venn-element-single-selected",{start:[{trigger:"element:click",action:"venn-element-single-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-single-selected:reset"]}]}),f1("venn-legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","venn-element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","venn-element-active:reset"]}]}),f1("venn-legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","venn-element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","venn-element-highlight:reset"]}]});var zht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,mX.ZT)(e,t),e.prototype.getLabelPoint=function(t,e,n){var r=t.data,i=r.x,o=r.y,a=t.customLabelInfo,s=a.offsetX,l=a.offsetY;return{content:t.content[n],x:i+s,y:o+l}},e}(V2);x2("venn",zht);var Bht=Array.isArray,$ht="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",jht=new RegExp("([a-z])["+$ht+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+$ht+"]*,?["+$ht+"]*)+)","ig"),Uht=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+$ht+"]*,?["+$ht+"]*","ig");Math.PI;E2("schema","venn",{draw:function(t,e){var n=function(t){if(!t)return null;if(Bht(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(jht,(function(t,r,i){var o=[],a=r.toLowerCase();if(i.replace(Uht,(function(t,e){e&&o.push(+e)})),"m"===a&&o.length>2&&(n.push([r].concat(o.splice(0,2))),a="l",r="m"===r?"l":"L"),"o"===a&&1===o.length&&n.push([r,o[0]]),"r"===a)n.push([r].concat(o));else for(;o.length>=e[a]&&(n.push([r].concat(o.splice(0,e[a]))),e[a]););return""})),n}(t.data[Iht]),r=function(t){return bet({},t.defaultStyle,{fill:t.color},t.style)}(t),i=e.addGroup({name:"venn-shape"});i.addShape("path",{attrs:(0,mX.pi)((0,mX.pi)({},r),{path:n}),name:"venn-path"});var o=t.customInfo,a=o.offsetX,s=o.offsetY,l=c3.transform(null,[["t",a,s]]);return i.setMatrix(l),i},getMarker:function(t){var e=t.color;return{symbol:"circle",style:{lineWidth:0,stroke:e,fill:e,r:4}}}});var Vht={normal:function(t){return t},multiply:function(t,e){return t*e/255},screen:function(t,e){return 255*(1-(1-t/255)*(1-e/255))},overlay:function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))},darken:function(t,e){return t>e?e:t},lighten:function(t,e){return t>e?t:e},dodge:function(t,e){return 255===t||(t=e/255*255/(1-t/255))>255?255:t},burn:function(t,e){return 255===e?255:0===t?0:255*(1-Math.min(1,(1-e/255)/(t/255)))}};function Hht(t,e,n){void 0===n&&(n="normal");var r=function(t){return function(e,n){var r=[];return r[0]=t(e[0],n[0]),r[1]=t(e[1],n[1]),r[2]=t(e[2],n[2]),r}}(function(t){if(!Vht[t])throw new Error("unknown blend mode "+t);return Vht[t]}(n))(Ght(t),Ght(e)),i=Ght(t),o=i[0],a=i[1],s=i[2],l=i[3],c=Ght(e),u=c[0],h=c[1],p=c[2],d=c[3],f=Number((l+d*(1-l)).toFixed(2)),g=Math.round((l*(1-d)*(o/255)+l*d*(r[0]/255)+(1-l)*d*(u/255))/f*255),m=Math.round((l*(1-d)*(a/255)+l*d*(r[1]/255)+(1-l)*d*(h/255))/f*255),y=Math.round((l*(1-d)*(s/255)+l*d*(r[2]/255)+(1-l)*d*(p/255))/f*255);return"rgba(".concat(g,", ").concat(m,", ").concat(y,", ").concat(f,")")}function Ght(t){var e,n=t.replace("/s+/g","");return"string"!==typeof n||n.startsWith("rgba")||n.startsWith("#")?(n.startsWith("rgba")&&(e=n.replace("rgba(","").replace(")","").split(",")),n.startsWith("#")&&(e=yq.rgb2arr(n).concat([1])),e.map((function(t,e){return 3===e?Number(t):0|t}))):yq.rgb2arr(yq.toRGB(n)).concat([1])}var Wht=n(9698),Xht=1e-10;function qht(t,e){var n,r=function(t){for(var e=[],n=0;n<t.length;++n)for(var r=n+1;r<t.length;++r)for(var i=Jht(t[n],t[r]),o=0;o<i.length;++o){var a=i[o];a.parentIndex=[n,r],e.push(a)}return e}(t),i=r.filter((function(e){return function(t,e){for(var n=0;n<e.length;++n)if(Zht(t,e[n])>e[n].radius+Xht)return!1;return!0}(e,t)})),o=0,a=0,s=[];if(i.length>1){var l=Qht(i);for(n=0;n<i.length;++n){var c=i[n];c.angle=Math.atan2(c.x-l.x,c.y-l.y)}i.sort((function(t,e){return e.angle-t.angle}));var u=i[i.length-1];for(n=0;n<i.length;++n){var h=i[n];a+=(u.x+h.x)*(h.y-u.y);for(var p={x:(h.x+u.x)/2,y:(h.y+u.y)/2},d=null,f=0;f<h.parentIndex.length;++f)if(u.parentIndex.indexOf(h.parentIndex[f])>-1){var g=t[h.parentIndex[f]],m=Math.atan2(h.x-g.x,h.y-g.y),y=Math.atan2(u.x-g.x,u.y-g.y),v=y-m;v<0&&(v+=2*Math.PI);var x=y-v/2,_=Zht(p,{x:g.x+g.radius*Math.sin(x),y:g.y+g.radius*Math.cos(x)});_>2*g.radius&&(_=2*g.radius),(null===d||d.width>_)&&(d={circle:g,width:_,p1:h,p2:u})}null!==d&&(s.push(d),o+=Yht(d.circle.radius,d.width),u=h)}}else{var b=t[0];for(n=1;n<t.length;++n)t[n].radius<b.radius&&(b=t[n]);var w=!1;for(n=0;n<t.length;++n)if(Zht(t[n],b)>Math.abs(b.radius-t[n].radius)){w=!0;break}w?o=a=0:(o=b.radius*b.radius*Math.PI,s.push({circle:b,p1:{x:b.x,y:b.y+b.radius},p2:{x:b.x-Xht,y:b.y+b.radius},width:2*b.radius}))}return a/=2,e&&(e.area=o+a,e.arcArea=o,e.polygonArea=a,e.arcs=s,e.innerPoints=i,e.intersectionPoints=r),o+a}function Yht(t,e){return t*t*Math.acos(1-e/t)-(t-e)*Math.sqrt(e*(2*t-e))}function Zht(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}function Kht(t,e,n){if(n>=t+e)return 0;if(n<=Math.abs(t-e))return Math.PI*Math.min(t,e)*Math.min(t,e);var r=e-(n*n-t*t+e*e)/(2*n);return Yht(t,t-(n*n-e*e+t*t)/(2*n))+Yht(e,r)}function Jht(t,e){var n=Zht(t,e),r=t.radius,i=e.radius;if(n>=r+i||n<=Math.abs(r-i))return[];var o=(r*r-i*i+n*n)/(2*n),a=Math.sqrt(r*r-o*o),s=t.x+o*(e.x-t.x)/n,l=t.y+o*(e.y-t.y)/n,c=-(e.y-t.y)*(a/n),u=-(e.x-t.x)*(a/n);return[{x:s+c,y:l-u},{x:s-c,y:l+u}]}function Qht(t){for(var e={x:0,y:0},n=0;n<t.length;++n)e.x+=t[n].x,e.y+=t[n].y;return e.x/=t.length,e.y/=t.length,e}function tpt(t,e,n){var r,i,o=e[0].radius-Zht(e[0],t);for(r=1;r<e.length;++r)(i=e[r].radius-Zht(e[r],t))<=o&&(o=i);for(r=0;r<n.length;++r)(i=Zht(n[r],t)-n[r].radius)<=o&&(o=i);return o}function ept(t,e){var n,r=[];for(n=0;n<t.length;++n){var i=t[n];r.push({x:i.x,y:i.y}),r.push({x:i.x+i.radius/2,y:i.y}),r.push({x:i.x-i.radius/2,y:i.y}),r.push({x:i.x,y:i.y+i.radius/2}),r.push({x:i.x,y:i.y-i.radius/2})}var o=r[0],a=tpt(r[0],t,e);for(n=1;n<r.length;++n){var s=tpt(r[n],t,e);s>=a&&(o=r[n],a=s)}var l=(0,Wht.nelderMead)((function(n){return-1*tpt({x:n[0],y:n[1]},t,e)}),[o.x,o.y],{maxIterations:500,minErrorDelta:1e-10}).x,c={x:l[0],y:l[1]},u=!0;for(n=0;n<t.length;++n)if(Zht(c,t[n])>t[n].radius){u=!1;break}for(n=0;n<e.length;++n)if(Zht(c,e[n])<e[n].radius){u=!1;break}if(!u)if(1==t.length)c={x:t[0].x,y:t[0].y};else{var h={};qht(t,h),c=0===h.arcs.length?{x:0,y:-1e3,disjoint:!0}:1==h.arcs.length?{x:h.arcs[0].circle.x,y:h.arcs[0].circle.y}:e.length?ept(t,[]):Qht(h.arcs.map((function(t){return t.p1})))}return c}function npt(t,e){for(var n={},r=function(t){var e={},n=[];for(var r in t)n.push(r),e[r]=[];for(var i=0;i<n.length;i++)for(var o=t[n[i]],a=i+1;a<n.length;++a){var s=t[n[a]],l=Zht(o,s);l+s.radius<=o.radius+1e-10?e[n[a]].push(n[i]):l+o.radius<=s.radius+1e-10&&e[n[i]].push(n[a])}return e}(t),i=0;i<e.length;++i){for(var o=e[i].sets,a={},s={},l=0;l<o.length;++l){a[o[l]]=!0;for(var c=r[o[l]],u=0;u<c.length;++u)s[c[u]]=!0}var h=[],p=[];for(var d in t)d in a?h.push(t[d]):d in s||p.push(t[d]);var f=ept(h,p);n[o]=f,f.disjoint&&e[i].size>0&&console.log("WARNING: area "+o+" not represented on screen")}return n}var rpt=1e-10;function ipt(t,e,n){return Math.min(t,e)*Math.min(t,e)*Math.PI<=n+rpt?Math.abs(t-e):(0,Wht.bisect)((function(r){return Kht(t,e,r)-n}),0,t+e)}function opt(t,e){var n=function(t,e){for(var n,r=e&&e.lossFunction?e.lossFunction:apt,i={},o={},a=0;a<t.length;++a){var s=t[a];1==s.sets.length&&(n=s.sets[0],i[n]={x:1e10,y:1e10,rowid:Object.keys(i).length,size:s.size,radius:Math.sqrt(s.size/Math.PI)},o[n]=[])}t=t.filter((function(t){return 2==t.sets.length}));for(a=0;a<t.length;++a){var l=t[a],c=l.hasOwnProperty("weight")?l.weight:1,u=l.sets[0],h=l.sets[1];l.size+rpt>=Math.min(i[u].size,i[h].size)&&(c=0),o[u].push({set:h,size:l.size,weight:c}),o[h].push({set:u,size:l.size,weight:c})}var p=[];for(n in o)if(o.hasOwnProperty(n)){var d=0;for(a=0;a<o[n].length;++a)d+=o[n][a].size*o[n][a].weight;p.push({set:n,size:d})}function f(t,e){return e.size-t.size}p.sort(f);var g={};function m(t){return t.set in g}function y(t,e){i[e].x=t.x,i[e].y=t.y,g[e]=!0}y({x:0,y:0},p[0].set);for(a=1;a<p.length;++a){var v=p[a].set,x=o[v].filter(m);if(n=i[v],x.sort(f),0===x.length)throw"ERROR: missing pairwise overlap information";for(var _=[],b=0;b<x.length;++b){var w=i[x[b].set],S=ipt(n.radius,w.radius,x[b].size);_.push({x:w.x+S,y:w.y}),_.push({x:w.x-S,y:w.y}),_.push({y:w.y+S,x:w.x}),_.push({y:w.y-S,x:w.x});for(var C=b+1;C<x.length;++C)for(var E=i[x[C].set],k=ipt(n.radius,E.radius,x[C].size),M=Jht({x:w.x,y:w.y,radius:S},{x:E.x,y:E.y,radius:k}),T=0;T<M.length;++T)_.push(M[T])}var I=1e50,P=_[0];for(b=0;b<_.length;++b){i[v].x=_[b].x,i[v].y=_[b].y;var O=r(i,t);O<I&&(I=O,P=_[b])}y(P,v)}return i}(t,e),r=e.lossFunction||apt;if(t.length>=8){var i=function(t,e){e=e||{};var n,r=e.restarts||10,i=[],o={};for(n=0;n<t.length;++n){var a=t[n];1==a.sets.length&&(o[a.sets[0]]=i.length,i.push(a))}var s=function(t,e,n){var r=(0,Wht.zerosM)(e.length,e.length),i=(0,Wht.zerosM)(e.length,e.length);return t.filter((function(t){return 2==t.sets.length})).map((function(t){var o=n[t.sets[0]],a=n[t.sets[1]],s=ipt(Math.sqrt(e[o].size/Math.PI),Math.sqrt(e[a].size/Math.PI),t.size);r[o][a]=r[a][o]=s;var l=0;t.size+1e-10>=Math.min(e[o].size,e[a].size)?l=1:t.size<=1e-10&&(l=-1),i[o][a]=i[a][o]=l})),{distances:r,constraints:i}}(t,i,o),l=s.distances,c=s.constraints,u=(0,Wht.norm2)(l.map(Wht.norm2))/l.length;l=l.map((function(t){return t.map((function(t){return t/u}))}));var h,p,d=function(t,e){return function(t,e,n,r){var i,o=0;for(i=0;i<e.length;++i)e[i]=0;for(i=0;i<n.length;++i)for(var a=t[2*i],s=t[2*i+1],l=i+1;l<n.length;++l){var c=t[2*l],u=t[2*l+1],h=n[i][l],p=r[i][l],d=(c-a)*(c-a)+(u-s)*(u-s),f=Math.sqrt(d),g=d-h*h;p>0&&f<=h||p<0&&f>=h||(o+=2*g*g,e[2*i]+=4*g*(a-c),e[2*i+1]+=4*g*(s-u),e[2*l]+=4*g*(c-a),e[2*l+1]+=4*g*(u-s))}return o}(t,e,l,c)};for(n=0;n<r;++n){var f=(0,Wht.zeros)(2*l.length).map(Math.random);p=(0,Wht.conjugateGradient)(d,f,e),(!h||p.fx<h.fx)&&(h=p)}var g=h.x,m={};for(n=0;n<i.length;++n){var y=i[n];m[y.sets[0]]={x:g[2*n]*u,y:g[2*n+1]*u,radius:Math.sqrt(y.size/Math.PI)}}if(e.history)for(n=0;n<e.history.length;++n)(0,Wht.scale)(e.history[n].x,u);return m}(t,e);r(i,t)+1e-8<r(n,t)&&(n=i)}return n}function apt(t,e){var n=0;for(var r=0;r<e.length;++r){var i=e[r],o=void 0;if(1!=i.sets.length){if(2==i.sets.length){var a=t[i.sets[0]],s=t[i.sets[1]];o=Kht(a.radius,s.radius,Zht(a,s))}else o=qht(i.sets.map((function(e){return t[e]})));n+=(i.hasOwnProperty("weight")?i.weight:1)*(o-i.size)*(o-i.size)}}return n}function spt(t){var e=function(e){return{max:Math.max.apply(null,t.map((function(t){return t[e]+t.radius}))),min:Math.min.apply(null,t.map((function(t){return t[e]-t.radius})))}};return{xRange:e("x"),yRange:e("y")}}var lpt=(0,yX.HP)((function(t,e,n,r){var i=new Map,o=t.length;return e.forEach((function(e,a){if(1===e[r].length)i.set(e[Tht],t[(a+o)%o]);else{var s=e[r].map((function(t){return i.get(t)}));i.set(e[Tht],s.slice(1).reduce((function(t,e){return Hht(t,e,n)}),s[0]))}})),i}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return JSON.stringify(t)}));function cpt(t,e,n,r){void 0===r&&(r=0);var i=t.data,o=t.setsField,a=t.sizeField;if(0===i.length)return uet(oet.WARN,!1,"warn: %s","\u6570\u636e\u4e0d\u80fd\u4e3a\u7a7a"),[];var s=i.map((function(t){var e;return(0,mX.pi)((0,mX.pi)({},t),((e={sets:t[o]||[],size:t[a]})[Iht]="",e[Tht]="",e))}));s.sort((function(t,e){return t.sets.length-e.sets.length}));var l=function(t,e){(e=e||{}).maxIterations=e.maxIterations||500;var n=e.initialLayout||opt,r=e.lossFunction||apt;t=function(t){t=t.slice();var e,n,r,i,o=[],a={};for(e=0;e<t.length;++e){var s=t[e];1==s.sets.length?o.push(s.sets[0]):2==s.sets.length&&(a[[r=s.sets[0],i=s.sets[1]]]=!0,a[[i,r]]=!0)}for(o.sort((function(t,e){return t>e?1:-1})),e=0;e<o.length;++e)for(r=o[e],n=e+1;n<o.length;++n)[r,i=o[n]]in a||t.push({sets:[r,i],size:0});return t}(t);var i,o=n(t,e),a=[],s=[];for(i in o)o.hasOwnProperty(i)&&(a.push(o[i].x),a.push(o[i].y),s.push(i));for(var l=(0,Wht.nelderMead)((function(e){for(var n={},i=0;i<s.length;++i){var a=s[i];n[a]={x:e[2*i],y:e[2*i+1],radius:o[a].radius}}return r(n,t)}),a,e),c=l.x,u=0;u<s.length;++u)i=s[u],o[i].x=c[2*u],o[i].y=c[2*u+1];return o}(s),c=function(t,e,n,r){var i=[],o=[];for(var a in t)t.hasOwnProperty(a)&&(o.push(a),i.push(t[a]));e-=2*r,n-=2*r;var s=spt(i),l=s.xRange,c=s.yRange;if(l.max==l.min||c.max==c.min)return console.log("not scaling solution: zero size detected"),t;for(var u=e/(l.max-l.min),h=n/(c.max-c.min),p=Math.min(h,u),d=(e-(l.max-l.min)*p)/2,f=(n-(c.max-c.min)*p)/2,g={},m=0;m<i.length;++m){var y=i[m];g[o[m]]={radius:p*y.radius,x:r+d+(y.x-l.min)*p,y:r+f+(y.y-c.min)*p}}return g}(l,e,n,r),u=npt(c,s);return s.forEach((function(t){var e=t.sets,n=e.join(",");t[Tht]=n;var r=e.map((function(t){return c[t]})),i=function(t){var e={};qht(t,e);var n=e.arcs;if(0===n.length)return"M 0 0";if(1==n.length){var r=n[0].circle;return function(t,e,n){var r=[],i=t-n,o=e;return r.push("M",i,o),r.push("A",n,n,0,1,0,i+2*n,o),r.push("A",n,n,0,1,0,i,o),r.join(" ")}(r.x,r.y,r.radius)}for(var i=["\nM",n[0].p2.x,n[0].p2.y],o=0;o<n.length;++o){var a=n[o],s=a.circle.radius,l=a.width>s;i.push("\nA",s,s,0,l?1:0,1,a.p1.x,a.p1.y)}return i.join(" ")}(r);/[zZ]$/.test(i)||(i+=" Z"),t[Iht]=i;var o=u[n]||{x:0,y:0};(0,yX.f0)(t,o)})),s}var upt=40;function hpt(t,e,n){var r=t.chart,i=t.options,o=i.blendMode,a=i.setsField,s=r.getTheme(),l=s.colors10,c=s.colors20,u=n;(0,yX.kJ)(u)||(u=e.filter((function(t){return 1===t[a].length})).length<=10?l:c);var h=lpt(u,e,o,a);return function(t){return h.get(t)||u[0]}}function ppt(t){var e=t.chart,n=t.options,r=n.legend,i=n.appendPadding,o=n.padding,a=Pet(i);return!1!==r&&(a=Oet(i,(0,yX.U2)(r,"position"),upt)),e.appendPadding=Aet([a,o]),t}function dpt(t){var e=t.options.data;e||(uet(oet.WARN,!1,"warn: %s","\u6570\u636e\u4e0d\u80fd\u4e3a\u7a7a"),e=[]);var n=e.filter((function(t){return 1===t.sets.length})).map((function(t){return t.sets[0]})),r=e.filter((function(t){var e=t.sets;return function(t,e){for(var n=0;n<e.length;n++)if(!t.includes(e[n]))return!1;return!0}(n,e)}));return(0,yX.Xy)(r,e)||uet(oet.WARN,!1,"warn: %s","\u4ea4\u96c6\u4e2d\u4e0d\u80fd\u51fa\u73b0\u4e0d\u5b58\u5728\u7684\u96c6\u5408, \u8bf7\u8f93\u5165\u5408\u6cd5\u6570\u636e"),(0,yX.b$)({},t,{options:{data:r}})}function fpt(t){var e=t.chart,n=t.options,r=n.pointStyle,i=n.setsField,o=n.sizeField,a=Pet(e.appendPadding),s=a[0],l=a[1],c=a[2],u=a[3],h={offsetX:u,offsetY:s},p=e.viewBBox,d=p.width,f=p.height,g=cpt(n,Math.max(d-(l+u),0),Math.max(f-(s+c),0),0);e.data(g);var m=Ont(bet({},t,{options:{xField:"x",yField:"y",sizeField:o,seriesField:Tht,rawFields:[i,o],schema:{shape:"venn",style:r}}})).ext.geometry;m.customInfo(h);var y=function(t,e){var n=t.options.color;if("function"!==typeof n){var r=hpt(t,e,"string"===typeof n?[n]:n);return function(t){return r(t[Tht])}}return n}(t,g);return"function"===typeof y&&m.color(Tht,(function(e){var n=g.find((function(t){return t[Tht]===e})),r=hpt(t,g)(e);return y(n,r)})),t}function gpt(t){var e=t.chart,n=t.options.label,r=Pet(e.appendPadding),i=r[0],o={offsetX:r[3],offsetY:i},a=Eet(e,"schema");if(n){var s=n.callback,l=(0,mX._T)(n,["callback"]);a.label({fields:["id"],callback:s,cfg:(0,yX.b$)({},Tet(l),{type:"venn",customLabelInfo:o})})}else a.label(!1);return t}function mpt(t){var e=t.chart,n=t.options,r=n.legend,i=n.sizeField;return e.legend(Tht,r),e.legend(i,!1),t}function ypt(t){return t.chart.axis(!1),t}function vpt(t){var e=t.options,n=t.chart,r=e.interactions;if(r){var i={"legend-active":"venn-legend-active","legend-highlight":"venn-legend-highlight"};snt(bet({},t,{options:{interactions:r.map((function(t){return(0,mX.pi)((0,mX.pi)({},t),{type:i[t.type]||t.type})}))}}))}return n.removeInteraction("legend-active"),n.removeInteraction("legend-highlight"),t}function xpt(t){return Cet(ppt,cnt,dpt,fpt,gpt,dnt({}),mpt,ypt,ant,vpt,lnt)(t)}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="venn",e}(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return Pht},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return xpt},e.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))}}(Lnt);var _pt="x",bpt="violinY",wpt="violinSize",Spt="minMax",Cpt="quantile",Ept="median",kpt="violin_view",Mpt="min_max_view",Tpt="quantile_view",Ipt="median_view",Ppt=bet({},Lnt.getDefaultOptions(),{syncViewPadding:!0,kde:{type:"triangular",sampleSize:32,width:3},violinStyle:{lineWidth:1,fillOpacity:.3,strokeOpacity:.75},xAxis:{grid:{line:null},tickLine:{alignTick:!1}},yAxis:{grid:{line:{style:{lineWidth:.5,lineDash:[4,4]}}}},legend:{position:"top-left"},tooltip:{showMarkers:!1}}),Opt=n(1024),Apt=n.n(Opt);function Dpt(t,e){var n=t.length*e;if(0===t.length)throw new Error("quantile requires at least one data point.");if(e<0||e>1)throw new Error("quantiles must be between 0 and 1");return 1===e?t[t.length-1]:0===e?t[0]:n%1!==0?t[Math.ceil(n)-1]:t.length%2===0?(t[n-1]+t[n])/2:t[n]}function Rpt(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Lpt(t,e,n,r){for(n=n||0,r=r||t.length-1;r>n;){if(r-n>600){var i=r-n+1,o=e-n+1,a=Math.log(i),s=.5*Math.exp(2*a/3),l=.5*Math.sqrt(a*s*(i-s)/i);o-i/2<0&&(l*=-1),Lpt(t,e,Math.max(n,Math.floor(e-o*s/i+l)),Math.min(r,Math.floor(e+(i-o)*s/i+l)))}var c=t[e],u=n,h=r;for(Rpt(t,n,e),t[r]>c&&Rpt(t,n,r);u<h;){for(Rpt(t,u,h),u++,h--;t[u]<c;)u++;for(;t[h]>c;)h--}t[n]===c?Rpt(t,n,h):Rpt(t,++h,r),h<=e&&(n=h+1),e<=h&&(r=h-1)}}function Npt(t,e){var n=t.slice();if(Array.isArray(e)){!function(t,e){for(var n=[0],r=0;r<e.length;r++)n.push(Bpt(t.length,e[r]));n.push(t.length-1),n.sort(zpt);var i=[0,n.length-1];for(;i.length;){var o=Math.ceil(i.pop()),a=Math.floor(i.pop());if(!(o-a<=1)){var s=Math.floor((a+o)/2);Fpt(t,n[s],Math.floor(n[a]),Math.ceil(n[o])),i.push(a,s,s,o)}}}(n,e);for(var r=[],i=0;i<e.length;i++)r[i]=Dpt(n,e[i]);return r}return Fpt(n,Bpt(n.length,e),0,n.length-1),Dpt(n,e)}function Fpt(t,e,n,r){e%1===0?Lpt(t,e,n,r):(Lpt(t,e=Math.floor(e),n,r),Lpt(t,e+1,e+1,r))}function zpt(t,e){return t-e}function Bpt(t,e){var n=t*e;return 1===e?t-1:0===e?0:n%1!==0?Math.ceil(n)-1:t%2===0?n-.5:n}var $pt=function(t){return{low:(0,yX.VV)(t),high:(0,yX.Fp)(t),q1:Npt(t,.25),q3:Npt(t,.75),median:Npt(t,[.5]),minMax:[(0,yX.VV)(t),(0,yX.Fp)(t)],quantile:[Npt(t,.25),Npt(t,.75)]}},jpt=function(t,e){var n=Apt().create(t,e);return{violinSize:n.map((function(t){return t.y})),violinY:n.map((function(t){return t.x}))}},Upt=function(t){var e=t.xField,n=t.yField,r=t.seriesField,i=t.data,o=t.kde,a={min:o.min,max:o.max,size:o.sampleSize,width:o.width};if(!r){var s=(0,yX.vM)(i,e);return Object.keys(s).map((function(t){var e=s[t].map((function(t){return t[n]}));return(0,mX.pi)((0,mX.pi)({x:t},jpt(e,a)),$pt(e))}))}var l=[],c=(0,yX.vM)(i,r);return Object.keys(c).forEach((function(t){var i=(0,yX.vM)(c[t],e);return Object.keys(i).forEach((function(e){var o,s=i[e].map((function(t){return t[n]}));l.push((0,mX.pi)((0,mX.pi)(((o={x:e})[r]=t,o),jpt(s,a)),$pt(s)))}))})),l},Vpt=["low","high","q1","q3","median"],Hpt=[{type:"dodge",marginRatio:1/32}];function Gpt(t){var e=t.chart,n=t.options;return e.data(Upt(n)),t}function Wpt(t){var e=t.chart,n=t.options,r=n.seriesField,i=n.color,o=n.shape,a=void 0===o?"violin":o,s=n.violinStyle,l=n.tooltip,c=n.state,u=e.createView({id:kpt});return function(t){var e=t.options,n=e.violin,r=e.xField,i=e.yField,o=e.seriesField,a=e.sizeField,s=bnt(e.tooltip,[r,i,o,a]),l=s.fields,c=s.formatter;n&&Cnt(bet({},t,{options:{type:"violin",colorField:o,tooltipFields:l,mapping:(0,mX.pi)({tooltip:c},n)}}))}({chart:u,options:{xField:_pt,yField:bpt,seriesField:r||_pt,sizeField:wpt,tooltip:(0,mX.pi)({fields:Vpt},l),violin:{style:s,color:i,shape:a},state:c}}),u.geometries[0].adjust(Hpt),t}function Xpt(t){var e=t.chart,n=t.options,r=n.seriesField,i=n.color,o=n.tooltip,a=n.box;if(!1===a)return t;var s=e.createView({id:Mpt});Mnt({chart:s,options:{xField:_pt,yField:Spt,seriesField:r||_pt,tooltip:(0,mX.pi)({fields:Vpt},o),state:"object"===typeof a?a.state:{},interval:{color:i,size:1,style:{lineWidth:0}}}}),s.geometries[0].adjust(Hpt);var l=e.createView({id:Tpt});Mnt({chart:l,options:{xField:_pt,yField:Cpt,seriesField:r||_pt,tooltip:(0,mX.pi)({fields:Vpt},o),state:"object"===typeof a?a.state:{},interval:{color:i,size:8,style:{fillOpacity:1}}}}),l.geometries[0].adjust(Hpt);var c=e.createView({id:Ipt});return Int({chart:c,options:{xField:_pt,yField:Ept,seriesField:r||_pt,tooltip:(0,mX.pi)({fields:Vpt},o),state:"object"===typeof a?a.state:{},point:{color:i,size:1,style:{fill:"white",lineWidth:0}}}}),c.geometries[0].adjust(Hpt),l.axis(!1),s.axis(!1),c.axis(!1),c.legend(!1),s.legend(!1),l.legend(!1),t}function qpt(t){var e,n=t.chart,r=t.options,i=r.meta,o=r.xAxis,a=r.yAxis,s=bet({},i,((e={})[_pt]=(0,mX.pi)((0,mX.pi)({sync:!0},het(o,aet)),{type:"cat"}),e[bpt]=(0,mX.pi)({sync:!0},het(a,aet)),e[Spt]=(0,mX.pi)({sync:bpt},het(a,aet)),e[Cpt]=(0,mX.pi)({sync:bpt},het(a,aet)),e[Ept]=(0,mX.pi)({sync:bpt},het(a,aet)),e));return n.scale(s),t}function Ypt(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=jet(e,kpt);return!1===r?o.axis(_pt,!1):o.axis(_pt,r),!1===i?o.axis(bpt,!1):o.axis(bpt,i),e.axis(!1),t}function Zpt(t){var e=t.chart,n=t.options,r=n.legend,i=n.seriesField,o=n.shape;if(!1===r)e.legend(!1);else{var a=i||_pt,s=(0,yX.CE)(r,["selected"]);o&&o.startsWith("hollow")||(0,yX.U2)(s,["marker","style","lineWidth"])||(0,yX.t8)(s,["marker","style","lineWidth"],0),e.legend(a,s),(0,yX.U2)(r,"selected")&&(0,yX.S6)(e.views,(function(t){return t.legend(a,r)}))}return t}function Kpt(t){var e=jet(t.chart,kpt);return fnt()((0,mX.pi)((0,mX.pi)({},t),{chart:e})),t}function Jpt(t){var e=t.chart,n=t.options.animation;return(0,yX.S6)(e.views,(function(t){Het(t,n)})),t}function Qpt(t){return Cet(cnt,Gpt,Wpt,Xpt,qpt,ant,Ypt,Zpt,snt,Kpt,Jpt)(t)}!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="violin",e}(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return Ppt},e.prototype.changeData=function(t){this.updateOption({data:t}),this.chart.changeData(Upt(this.options))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Qpt}}(Lnt);var tdt="$$yField$$",edt="$$diffField$$",ndt="$$absoluteField$$",rdt="$$isTotal$$",idt={label:{},leaderLine:{style:{lineWidth:1,stroke:"#8c8c8c",lineDash:[4,2]}},total:{style:{fill:"rgba(0, 0, 0, 0.25)"}},interactions:[{type:"element-active"}],risingFill:"#f4664a",fallingFill:"#30bf78",waterfallStyle:{fill:"rgba(0, 0, 0, 0.25)"},yAxis:{grid:{line:{style:{lineDash:[4,2]}}}}};function odt(t,e,n,r){var i=function(t,e,n,r,i){var o,a=[];if((0,yX.u4)(t,(function(t,e){var i;uet(oet.WARN,(0,yX.hj)(e[n]),"".concat(e[n]," is not a valid number"));var o=(0,yX.o8)(e[n])?null:e[n];return a.push((0,mX.pi)((0,mX.pi)({},e),((i={})[r]=[t,t+o],i))),t+o}),0),a.length&&i){var s=(0,yX.U2)(a,[[t.length-1],r,[1]]);a.push(((o={})[e]=i.label,o[n]=s,o[r]=[0,s],o))}return a}(t,e,n,tdt,r);return i.map((function(e,n){var r;return(0,yX.Kn)(e)?(0,mX.pi)((0,mX.pi)({},e),((r={})[ndt]=e[tdt][1],r[edt]=e[tdt][1]-e[tdt][0],r[rdt]=n===t.length,r)):e}))}function adt(t){var e=t.options,n=e.locale,r=e.total,i=_nt(n).get(["waterfall","total"]);return r&&"string"!==typeof r.label&&i&&(t.options.total.label=i),t}function sdt(t){var e=t.chart,n=t.options,r=n.data,i=n.xField,o=n.yField,a=n.total,s=n.leaderLine,l=n.columnWidthRatio,c=n.waterfallStyle,u=n.risingFill,h=n.fallingFill,p=n.color,d=n.shape,f=n.customInfo;return e.data(odt(r,i,o,a)),Mnt(bet({},t,{options:{xField:i,yField:tdt,seriesField:i,rawFields:[o,edt,rdt,tdt],widthRatio:l,interval:{style:c,shape:d||"waterfall",color:p||function(t){return(0,yX.U2)(t,[rdt])?(0,yX.U2)(a,["style","fill"],""):(0,yX.U2)(t,[tdt,1])-(0,yX.U2)(t,[tdt,0])>0?u:h}}}})).ext.geometry.customInfo((0,mX.pi)((0,mX.pi)({},f),{leaderLine:s})),t}function ldt(t){var e,n,r=t.options,i=r.xAxis,o=r.yAxis,a=r.xField,s=r.yField,l=r.meta,c=bet({},{alias:s},(0,yX.U2)(l,s));return Cet(dnt(((e={})[a]=i,e[s]=o,e[tdt]=o,e),bet({},l,((n={})[tdt]=c,n[edt]=c,n[ndt]=c,n))))(t)}function cdt(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,o=n.xField,a=n.yField;return!1===r?e.axis(o,!1):e.axis(o,r),!1===i?(e.axis(a,!1),e.axis(tdt,!1)):(e.axis(a,i),e.axis(tdt,i)),t}function udt(t){var e=t.chart,n=t.options,r=n.legend,i=n.total,o=n.risingFill,a=n.fallingFill,s=_nt(n.locale);if(!1===r)e.legend(!1);else{var l=[{name:s.get(["general","increase"]),value:"increase",marker:{symbol:"square",style:{r:5,fill:o}}},{name:s.get(["general","decrease"]),value:"decrease",marker:{symbol:"square",style:{r:5,fill:a}}}];i&&l.push({name:i.label||"",value:"total",marker:{symbol:"square",style:bet({},{r:5},(0,yX.U2)(i,"style"))}}),e.legend(bet({},{custom:!0,position:"top",items:l},r)),e.removeInteraction("legend-filter")}return t}function hdt(t){var e=t.chart,n=t.options,r=n.label,i=n.labelMode,o=n.xField,a=Eet(e,"interval");if(r){var s=r.callback,l=(0,mX._T)(r,["callback"]);a.label({fields:"absolute"===i?[ndt,o]:[edt,o],callback:s,cfg:Tet(l)})}else a.label(!1);return t}function pdt(t){var e=t.chart,n=t.options,r=n.tooltip,i=n.xField,o=n.yField;if(!1!==r){e.tooltip((0,mX.pi)({showCrosshairs:!1,showMarkers:!1,shared:!0,fields:[o]},r));var a=e.geometries[0];(null===r||void 0===r?void 0:r.formatter)?a.tooltip("".concat(i,"*").concat(o),r.formatter):a.tooltip(o)}else e.tooltip(!1);return t}function ddt(t){return Cet(adt,cnt,sdt,ldt,cdt,udt,pdt,hdt,unt,snt,lnt,fnt())(t)}E2("interval","waterfall",{draw:function(t,e){var n=t.customInfo,r=t.points,i=t.nextPoints,o=e.addGroup(),a=this.parsePath(function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(r){var i=0===n?"M":"L";e.push([i,r.x,r.y])}}var o=t[0];return e.push(["L",o.x,o.y]),e.push(["z"]),e}(r)),s=function(t){return bet({},t.defaultStyle,t.style,{fill:t.color})}(t);o.addShape("path",{attrs:(0,mX.pi)((0,mX.pi)({},s),{path:a})});var l=(0,yX.U2)(n,"leaderLine");if(l&&i){var c=[["M",r[2].x,r[2].y],["L",i[0].x,i[0].y]];r[2].y===i[1].y&&(c[1]=["L",i[1].x,i[1].y]),c=this.parsePath(c),o.addShape("path",{attrs:(0,mX.pi)({path:c},l.style||{})})}return o}});!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="waterfall",e}(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return idt},e.prototype.changeData=function(t){var e=this.options,n=e.xField,r=e.yField,i=e.total;this.updateOption({data:t}),this.chart.changeData(odt(t,n,r,i))},e.prototype.getSchemaAdaptor=function(){return ddt},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()}}(Lnt);var fdt="color",gdt=bet({},Lnt.getDefaultOptions(),{timeInterval:2e3,legend:!1,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!1,fields:["text","value",fdt],formatter:function(t){return{name:t.text,value:t.value}}},wordStyle:{fontFamily:"Verdana",fontWeight:"normal",padding:1,fontSize:[12,60],rotation:[0,90],rotationSteps:2,rotateRatio:.5}}),mdt={font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:3e3};function ydt(t,e){return function(t,e){var n=function(){var t=[256,256],e=wdt,n=Cdt,r=Sdt,i=Edt,o=kdt,a=Odt,s=Math.random,l=[],c=1/0,u=bdt,h=Sdt,p=Ddt,d={};function f(t){t.width=t.height=1;var e=Math.sqrt(t.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,1,1).data.length>>2);t.width=(xdt<<5)/e,t.height=_dt/e;var n=t.getContext("2d",{willReadFrequently:!0});return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:e}}function g(e,n,r){for(var i,o,l,c=n.x,u=n.y,h=Math.sqrt(t[0]*t[0]+t[1]*t[1]),p=a(t),d=s()<.5?1:-1,f=-d;(i=p(f+=d))&&(o=~~i[0],l=~~i[1],!(Math.min(Math.abs(o),Math.abs(l))>=h));)if(n.x=c+o,n.y=u+l,!(n.x+n.x0<0||n.y+n.y0<0||n.x+n.x1>t[0]||n.y+n.y1>t[1])&&(!r||!Tdt(n,e,t[0]))&&(!r||Pdt(n,r))){for(var g=n.sprite,m=n.width>>5,y=t[0]>>5,v=n.x-(m<<4),x=127&v,_=32-x,b=n.y1-n.y0,w=void 0,S=(n.y+n.y0)*y+(v>>5),C=0;C<b;C++){w=0;for(var E=0;E<=m;E++)e[S+E]|=w<<_|(E<m?(w=g[C*m+E])>>>x:0);S+=y}return delete n.sprite,!0}return!1}return d.start=function(){var a=t[0],m=t[1],y=f(p()),v=d.board?d.board:Adt((t[0]>>5)*t[1]),x=l.length,_=[],b=l.map((function(t,a,s){return t.text=u.call(this,t,a,s),t.font=e.call(this,t,a,s),t.style=h.call(this,t,a,s),t.weight=r.call(this,t,a,s),t.rotate=i.call(this,t,a,s),t.size=~~n.call(this,t,a,s),t.padding=o.call(this,t,a,s),t})).sort((function(t,e){return e.size-t.size})),w=-1,S=d.board?[{x:0,y:0},{x:a,y:m}]:null;function C(){for(var e=Date.now();Date.now()-e<c&&++w<x;){var n=b[w];n.x=a*(s()+.5)>>1,n.y=m*(s()+.5)>>1,Mdt(y,n,b,w),n.hasText&&g(v,n,S)&&(_.push(n),S?d.hasImage||Idt(S,n):S=[{x:n.x+n.x0,y:n.y+n.y0},{x:n.x+n.x1,y:n.y+n.y1}],n.x-=t[0]>>1,n.y-=t[1]>>1)}d._tags=_,d._bounds=S}return C(),d},d.createMask=function(e){var n=document.createElement("canvas"),r=t[0],i=t[1];if(r&&i){var o=r>>5,a=Adt((r>>5)*i);n.width=r,n.height=i;var s=n.getContext("2d");s.drawImage(e,0,0,e.width,e.height,0,0,r,i);for(var l=s.getImageData(0,0,r,i).data,c=0;c<i;c++)for(var u=0;u<r;u++){var h=o*c+(u>>5),p=c*r+u<<2,f=l[p]>=250&&l[p+1]>=250&&l[p+2]>=250?1<<31-u%32:0;a[h]|=f}d.board=a,d.hasImage=!0}},d.timeInterval=function(t){c=null==t?1/0:t},d.words=function(t){l=t},d.size=function(e){t=[+e[0],+e[1]]},d.font=function(t){e=Rdt(t)},d.fontWeight=function(t){r=Rdt(t)},d.rotate=function(t){i=Rdt(t)},d.spiral=function(t){a=Ldt[t]||t},d.fontSize=function(t){n=Rdt(t)},d.padding=function(t){o=Rdt(t)},d.random=function(t){s=Rdt(t)},d}();["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval","random"].forEach((function(t){(0,yX.UM)(e[t])||n[t](e[t])})),n.words(t),e.imageMask&&n.createMask(e.imageMask);var r=n.start(),i=r._tags;i.forEach((function(t){t.x+=e.size[0]/2,t.y+=e.size[1]/2}));var o=e.size,a=o[0],s=o[1];return i.push({text:"",value:0,x:0,y:0,opacity:0}),i.push({text:"",value:0,x:a,y:s,opacity:0}),i}(t,e=(0,yX.f0)({},mdt,e))}var vdt=Math.PI/180,xdt=64,_dt=2048;function bdt(t){return t.text}function wdt(){return"serif"}function Sdt(){return"normal"}function Cdt(t){return t.value}function Edt(){return 90*~~(2*Math.random())}function kdt(){return 1}function Mdt(t,e,n,r){if(!e.sprite){var i=t.context,o=t.ratio;i.clearRect(0,0,(xdt<<5)/o,_dt/o);var a=0,s=0,l=0,c=n.length;for(--r;++r<c;){e=n[r],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/o)+"px "+e.font;var u=i.measureText(e.text+"m").width*o,h=e.size<<1;if(e.rotate){var p=Math.sin(e.rotate*vdt),d=Math.cos(e.rotate*vdt),f=u*d,g=u*p,m=h*d,y=h*p;u=Math.max(Math.abs(f+y),Math.abs(f-y))+31>>5<<5,h=~~Math.max(Math.abs(g+m),Math.abs(g-m))}else u=u+31>>5<<5;if(h>l&&(l=h),a+u>=xdt<<5&&(a=0,s+=l,l=0),s+h>=_dt)break;i.translate((a+(u>>1))/o,(s+(h>>1))/o),e.rotate&&i.rotate(e.rotate*vdt),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=u,e.height=h,e.xoff=a,e.yoff=s,e.x1=u>>1,e.y1=h>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,a+=u}for(var v=i.getImageData(0,0,(xdt<<5)/o,_dt/o).data,x=[];--r>=0;)if((e=n[r]).hasText){for(var _=(u=e.width)>>5,b=(h=e.y1-e.y0,0);b<h*_;b++)x[b]=0;if(null==(a=e.xoff))return;s=e.yoff;for(var w=0,S=-1,C=0;C<h;C++){for(b=0;b<u;b++){var E=_*C+(b>>5),k=v[(s+C)*(xdt<<5)+(a+b)<<2]?1<<31-b%32:0;x[E]|=k,w|=k}w?S=C:(e.y0++,h--,C--,s++)}e.y1=e.y0+S,e.sprite=x.slice(0,(e.y1-e.y0)*_)}}}function Tdt(t,e,n){n>>=5;for(var r,i=t.sprite,o=t.width>>5,a=t.x-(o<<4),s=127&a,l=32-s,c=t.y1-t.y0,u=(t.y+t.y0)*n+(a>>5),h=0;h<c;h++){r=0;for(var p=0;p<=o;p++)if((r<<l|(p<o?(r=i[h*o+p])>>>s:0))&e[u+p])return!0;u+=n}return!1}function Idt(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function Pdt(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function Odt(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function Adt(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}function Ddt(){return document.createElement("canvas")}function Rdt(t){return(0,yX.mf)(t)?t:function(){return t}}var Ldt={archimedean:Odt,rectangular:function(t){var e=4*t[0]/t[1],n=0,r=0;return function(t){var i=t<0?-1:1;switch(Math.sqrt(1+4*i*t)-i&3){case 0:n+=e;break;case 1:r+=4;break;case 2:n-=e;break;default:r-=4}return[n,r]}}};function Ndt(t){var e=t.options,n=t.chart,r=n,i=r.width,o=r.height,a=r.padding,s=r.appendPadding,l=r.ele,c=e.data,u=e.imageMask,h=e.wordField,p=e.weightField,d=e.colorField,f=e.wordStyle,g=e.timeInterval,m=e.random,y=e.spiral,v=e.autoFit,x=void 0===v||v,_=e.placementStrategy;if(!c||!c.length)return[];var b,w=f.fontFamily,S=f.fontWeight,C=f.padding,E=f.fontSize,k=function(t,e){return t.map((function(t){return t[e]})).filter((function(t){return"number"===typeof t&&!isNaN(t)}))}(c,p),M=[(b=k,Math.min.apply(Math,b)),$dt(k)],T=c.map((function(t){return{text:t[h],value:t[p],color:t[d],datum:t}})),I={imageMask:u,font:w,fontSize:zdt(E,M),fontWeight:S,size:Fdt({width:i,height:o,padding:a,appendPadding:s,autoFit:x,container:l}),padding:C,timeInterval:g,random:m,spiral:y,rotate:Bdt(e)};if((0,yX.mf)(_)){var P=T.map((function(t,e,r){return(0,mX.pi)((0,mX.pi)((0,mX.pi)({},t),{hasText:!!t.text,font:Rdt(I.font)(t,e,r),weight:Rdt(I.fontWeight)(t,e,r),rotate:Rdt(I.rotate)(t,e,r),size:Rdt(I.fontSize)(t,e,r),style:"normal"}),_.call(n,t,e,r))}));return P.push({text:"",value:0,x:0,y:0,opacity:0}),P.push({text:"",value:0,x:I.size[0],y:I.size[1],opacity:0}),P}return ydt(T,I)}function Fdt(t){var e=t.width,n=t.height,r=t.container,i=t.autoFit,o=t.padding,a=t.appendPadding;if(i){var s=wet(r);e=s.width,n=s.height}e=e||400,n=n||400;var l=function(t){var e=Pet(t.padding),n=Pet(t.appendPadding),r=e[0]+n[0],i=e[1]+n[1],o=e[2]+n[2],a=e[3]+n[3];return[r,i,o,a]}({padding:o,appendPadding:a}),c=l[0],u=l[1],h=l[2];return[e-(l[3]+u),n-(c+h)]}function zdt(t,e){if((0,yX.mf)(t))return t;if((0,yX.kJ)(t)){var n=t[0],r=t[1];if(!e)return function(){return(r+n)/2};var i=e[0],o=e[1];return o===i?function(){return(r+n)/2}:function(t){var e=t.value;return(r-n)/(o-i)*(e-i)+n}}return function(){return t}}function Bdt(t){var e=function(t){var e=t.wordStyle.rotationSteps;e<1&&(uet(oet.WARN,!1,"The rotationSteps option must be greater than or equal to 1."),e=1);return{rotation:t.wordStyle.rotation,rotationSteps:e}}(t),n=e.rotation,r=e.rotationSteps;if(!(0,yX.kJ)(n))return n;var i=n[0],o=n[1],a=1===r?0:(o-i)/(r-1);return function(){return o===i?o:Math.floor(Math.random()*r)*a}}function $dt(t){return Math.max.apply(Math,t)}function jdt(t){var e=t.chart,n=t.options,r=n.colorField,i=n.color,o=Ndt(t);return e.data(o),Int(bet({},t,{options:{xField:"x",yField:"y",seriesField:r&&fdt,rawFields:(0,yX.mf)(i)&&(0,mX.ev)((0,mX.ev)([],(0,yX.U2)(n,"rawFields",[]),!0),["datum"],!1),point:{color:i,shape:"word-cloud"}}})).ext.geometry.label(!1),e.coordinate().reflect("y"),e.axis(!1),t}function Udt(t){return Cet(dnt({x:{nice:!1},y:{nice:!1}}))(t)}function Vdt(t){var e=t.chart,n=t.options,r=n.legend,i=n.colorField;return!1===r?e.legend(!1):i&&e.legend(fdt,r),t}function Hdt(t){Cet(jdt,Udt,ant,Vdt,snt,lnt,cnt,unt)(t)}function Gdt(t){return{fontSize:t.data.size,text:t.data.text,textAlign:"center",fontFamily:t.data.font,fontWeight:t.data.weight,fill:t.color||t.defaultStyle.stroke,textBaseline:"alphabetic"}}E2("point","word-cloud",{draw:function(t,e){var n=t.x,r=t.y,i=e.addShape("text",{attrs:(0,mX.pi)((0,mX.pi)({},Gdt(t)),{x:n,y:r})}),o=t.data.rotate;return"number"===typeof o&&c3.rotate(i,o*Math.PI/180),i}});(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="word-cloud",e}(0,mX.ZT)(e,t),e.getDefaultOptions=function(){return gdt},e.prototype.changeData=function(t){this.updateOption({data:t}),this.options.imageMask?this.render():this.chart.changeData(Ndt({chart:this.chart,options:this.options}))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.render=function(){var e=this;return new Promise((function(n){var r=e.options.imageMask;if(!r)return t.prototype.render.call(e),void n();var i,o=function(r){e.options=(0,mX.pi)((0,mX.pi)({},e.options),{imageMask:r||null}),t.prototype.render.call(e),n()};(i=r,new Promise((function(t,e){if(i instanceof HTMLImageElement)t(i);else{if((0,yX.HD)(i)){var n=new Image;return n.crossOrigin="anonymous",n.src=i,n.onload=function(){t(n)},void(n.onerror=function(){uet(oet.ERROR,!1,"image %s load failed !!!",i),e()})}uet(oet.WARN,void 0===i,"The type of imageMask option must be String or HTMLImageElement."),e()}}))).then(o).catch(o)}))},e.prototype.getSchemaAdaptor=function(){return Hdt},e.prototype.triggerResize=function(){var e=this;this.chart.destroyed||(this.execAdaptor(),window.setTimeout((function(){t.prototype.triggerResize.call(e)})))}})(Lnt),function(t){function e(e,n,r,i){var o=t.call(this,e,bet({},i,n))||this;return o.type="g2-plot",o.defaultOptions=i,o.adaptor=r,o}(0,mX.ZT)(e,t),e.prototype.getDefaultOptions=function(){return this.defaultOptions},e.prototype.getSchemaAdaptor=function(){return this.adaptor}}(Lnt);xnt("en-US",{locale:"en-US",general:{increase:"Increase",decrease:"Decrease",root:"Root"},statistic:{total:"Total"},conversionTag:{label:"Rate"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"Total"}}),xnt("zh-CN",{locale:"zh-CN",general:{increase:"\u589e\u52a0",decrease:"\u51cf\u5c11",root:"\u521d\u59cb"},statistic:{total:"\u603b\u8ba1"},conversionTag:{label:"\u8f6c\u5316\u7387"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"\u603b\u8ba1"}});var Wdt,Xdt=function(){return Xdt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Xdt.apply(this,arguments)},qdt=Xdt({},Rr),Ydt=qdt.version,Zdt=qdt.render;qdt.unmountComponentAtNode;try{Number((Ydt||"").split(".")[0])>=18&&(Wdt=qdt.createRoot)}catch(kg){}function Kdt(t){var e=qdt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;e&&"object"===typeof e&&(e.usingClientEntryPoint=t)}var Jdt="__rc_react_root__";function Qdt(t,e){Wdt?function(t,e){Kdt(!0);var n=e[Jdt]||Wdt(e);Kdt(!1),n.render(t),e[Jdt]=n}(t,e):function(t,e){Zdt(t,e)}(t,e)}var tft=new Map,eft=function(t,e,n){var r=document.createElement("div");return"tooltip"===e&&(r.setAttribute("data-uuid",n),tft.has(n)?r=tft.get(n):tft.set(n,r),r.className="g2-tooltip"),Qdt(t,r),r},nft=function(t,e){return{}.toString.call(t)==="[object ".concat(e,"]")},rft=function(t){return t&&"object"===typeof t?(Array.isArray(t)?e=t.map((function(t){return rft(t)})):(e={},Object.keys(t).forEach((function(n){return e[n]=rft(t[n])}))),e):t;var e},ift=function(t,e){for(var n=t,r=0;r<e.length;r+=1){if(!(null===n||void 0===n?void 0:n[e[r]])){n=void 0;break}n=n[e[r]]}return n},oft=function(){return oft=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},oft.apply(this,arguments)},aft=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function sft(t,e){var n=(0,m.useRef)(),r=(0,m.useRef)(),i=(0,m.useRef)(null),o=e.onReady,a=e.onEvent,s=function(t,e,n,r){var i=ift(t,e);!function(t,e,n){if(!t)return t;var r=t;e.forEach((function(t,i){i<e.length-1?r=r[t]:r[t]=n}))}(t,e,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=nft(i,"Function")?i.apply(void 0,t):i;return nft(o,"String")||nft(o,"Number")||nft(o,"HTMLDivElement")?o:eft(o,n,r)}))},l=function(){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}));ift(e,["statistic","content","customHtml"])&&s(e,["statistic","content","customHtml"]),ift(e,["statistic","title","customHtml"])&&s(e,["statistic","title","customHtml"]),"object"===typeof e.tooltip&&(ift(e,["tooltip","container"])&&s(e,["tooltip","container"],"tooltip",t),ift(e,["tooltip","customContent"])&&s(e,["tooltip","customContent"],"tooltip",t))};return(0,m.useEffect)((function(){if(n.current&&!(0,yX.Xy)(r.current,e)){var t=!1;if(r.current){var i=r.current,o=(i.data,i.value,i.percent,aft(i,["data","value","percent"])),a=(e.data,e.value,e.percent,aft(e,["data","value","percent"]));t=(0,yX.Xy)(o,a)}if(r.current=rft(e),t&&"Mix"!==(0,yX.U2)(e,"chartType")){var s="data",c=Object.keys(e);["percent"].forEach((function(t){c.includes(t)&&(s=t)})),n.current.changeData((null===e||void 0===e?void 0:e[s])||[]),n.current.render()}else l(),n.current.update(e)}}),[e]),(0,m.useEffect)((function(){if(!i.current)return function(){return null};r.current||(r.current=rft(e)),l();var s=new t(i.current,oft({},e));s.toDataURL=function(t,e){return function(t,e){var r;return void 0===t&&(t="image/png"),null===(r=n.current)||void 0===r?void 0:r.chart.canvas.cfg.el.toDataURL(t,e)}(t,e)},s.downloadImage=function(t,e,r){return function(t,e,r){var i;void 0===t&&(t="download"),void 0===e&&(e="image/png");var o=t;-1===t.indexOf(".")&&(o="".concat(t,".").concat(e.split("/")[1]));var a=null===(i=n.current)||void 0===i?void 0:i.chart.canvas.cfg.el.toDataURL(e,r),s=document.createElement("a");return s.href=a,s.download=o,document.body.appendChild(s),s.click(),document.body.removeChild(s),s=null,o}(t,e,r)},s.render(),n.current=function(t){if(!t)return t;var e={};for(var n in t)e[n]=t[n];return e}(s),o&&o(s);var c=function(t){a&&a(s,t)};return s.on("*",c),function(){n.current&&(n.current.destroy(),n.current.off("*",c),n.current=void 0)}}),[]),{chart:n,container:i}}var lft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),cft=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={hasError:!1},e.renderError=function(t){var n=e.props.errorTemplate;return"function"===typeof n?n(t):n||m.createElement("h5",null,"\u7ec4\u4ef6\u51fa\u9519\u4e86\uff0c\u8bf7\u6838\u67e5\u540e\u91cd\u8bd5\uff1a ",t.message)},e}return lft(e,t),e.getDerivedStateFromError=function(t){return{hasError:!0,error:t}},e.getDerivedStateFromProps=function(t,e){return e.children!==t.children?{children:t.children,hasError:!1,error:void 0}:null},e.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):m.createElement(m.Fragment,null,this.props.children)},e}(m.Component),uft=cft,hft=function(){return hft=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},hft.apply(this,arguments)};var pft=function(t){var e=t.animate,n=t.backgroundColor,r=t.backgroundOpacity,i=t.baseUrl,o=t.children,a=t.foregroundColor,s=t.foregroundOpacity,l=t.gradientRatio,c=t.uniqueKey,u=t.interval,h=t.rtl,p=t.speed,d=t.style,f=t.title,g=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["animate","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","uniqueKey","interval","rtl","speed","style","title"]),y=c||Math.random().toString(36).substring(6),v=y+"-diff",x=y+"-animated-diff",_=y+"-aria",b=h?{transform:"scaleX(-1)"}:null,w="0; "+u+"; 1",S=p+"s";return(0,m.createElement)("svg",hft({"aria-labelledby":_,role:"img",style:hft(hft({},d),b)},g),f?(0,m.createElement)("title",{id:_},f):null,(0,m.createElement)("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url("+i+"#"+v+")",style:{fill:"url("+i+"#"+x+")"}}),(0,m.createElement)("defs",{role:"presentation"},(0,m.createElement)("clipPath",{id:v},o),(0,m.createElement)("linearGradient",{id:x},(0,m.createElement)("stop",{offset:"0%",stopColor:n,stopOpacity:r},e&&(0,m.createElement)("animate",{attributeName:"offset",values:-l+"; "+-l+"; 1",keyTimes:w,dur:S,repeatCount:"indefinite"})),(0,m.createElement)("stop",{offset:"50%",stopColor:a,stopOpacity:s},e&&(0,m.createElement)("animate",{attributeName:"offset",values:-l/2+"; "+-l/2+"; "+(1+l/2),keyTimes:w,dur:S,repeatCount:"indefinite"})),(0,m.createElement)("stop",{offset:"100%",stopColor:n,stopOpacity:r},e&&(0,m.createElement)("animate",{attributeName:"offset",values:"0; 0; "+(1+l),keyTimes:w,dur:S,repeatCount:"indefinite"})))))};pft.defaultProps={animate:!0,backgroundColor:"#f5f6f7",backgroundOpacity:1,baseUrl:"",foregroundColor:"#eee",foregroundOpacity:1,gradientRatio:2,id:null,interval:.25,rtl:!1,speed:1.2,style:{},title:"Loading..."};var dft=function(t){return t.children?(0,m.createElement)(pft,hft({},t)):(0,m.createElement)(fft,hft({},t))},fft=function(t){return(0,m.createElement)(dft,hft({viewBox:"0 0 476 124"},t),(0,m.createElement)("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),(0,m.createElement)("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),(0,m.createElement)("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),(0,m.createElement)("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),(0,m.createElement)("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),(0,m.createElement)("circle",{cx:"20",cy:"20",r:"20"}))},gft=dft,mft=function(t){var e=t.loadingTemplate,n=t.theme,r=void 0===n?"light":n;return m.createElement("div",{className:"charts-loading-container",style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:"dark"===r?"rgb(20, 20, 20)":"rgb(255, 255, 255)"}},e||m.createElement(gft,{viewBox:"0 0 400 180",width:200,height:90,speed:1,backgroundColor:"dark"===r?"#262626":"#D9D9D9"},m.createElement("rect",{x:"20",y:"5",rx:"0",ry:"0",width:"1",height:"170"}),m.createElement("rect",{x:"20",y:"175",rx:"0",ry:"0",width:"360",height:"1"}),m.createElement("rect",{x:"40",y:"75",rx:"0",ry:"0",width:"35",height:"100"}),m.createElement("rect",{x:"80",y:"125",rx:"0",ry:"0",width:"35",height:"50"}),m.createElement("rect",{x:"120",y:"105",rx:"0",ry:"0",width:"35",height:"70"}),m.createElement("rect",{x:"160",y:"35",rx:"0",ry:"0",width:"35",height:"140"}),m.createElement("rect",{x:"200",y:"55",rx:"0",ry:"0",width:"35",height:"120"}),m.createElement("rect",{x:"240",y:"15",rx:"0",ry:"0",width:"35",height:"160"}),m.createElement("rect",{x:"280",y:"135",rx:"0",ry:"0",width:"35",height:"40"}),m.createElement("rect",{x:"320",y:"85",rx:"0",ry:"0",width:"35",height:"90"})))},yft=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},vft=(0,m.forwardRef)((function(t,e){var n=t.chartRef,r=t.style,i=void 0===r?{height:"inherit"}:r,o=t.className,a=t.loading,s=t.loadingTemplate,l=t.errorTemplate,c=yft(t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),u=sft(Trt,c),h=u.chart,p=u.container;return(0,m.useEffect)((function(){!function(t,e){t&&((0,yX.mf)(t)?t(e):t.current=e)}(n,h.current)}),[h.current]),(0,m.useImperativeHandle)(e,(function(){return{getChart:function(){return h.current}}})),m.createElement(uft,{errorTemplate:l},a&&m.createElement(mft,{loadingTemplate:s,theme:t.theme}),m.createElement("div",{className:o,style:i,ref:p}))})),xft=vft;const _ft=t=>{let{CityNodeCount:e}=t;console.log("Rendering DemoColumn with CityNodeCount:",e);const n={data:null===e||void 0===e?void 0:e.map((t=>({...t,nodes:Number(t.nodes)}))),xField:"city",yField:"nodes",label:{position:"middle",style:{fill:"#FFFFFF",opacity:.6}},xAxis:{label:{autoHide:!1,rotate:-1.57,style:{textAlign:"right",fontSize:12}}},meta:{type:{alias:"city"},sales:{alias:"nodes"}}};return(0,lr.jsx)(xft,{...n})};var bft=t=>{let{stateList:e,onData:n,stateCityNodeCount:r}=t;const[i,o]=(0,m.useState)(!1),[a,s]=(0,m.useState)(null),[l,c]=(0,m.useState)(!1),[u,h]=(0,m.useState)([]);(0,m.useEffect)((()=>{h(r)}),[r]);const p=(0,lr.jsx)(oO,{onClick:t=>{s(t.key),n(t.key),c(!0)},children:null===e||void 0===e?void 0:e.map(((t,e)=>(0,lr.jsx)(oO.Item,{children:t.state},t.state)))}),d=()=>{s(null),o(!1),c(!1)};return(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsx)(id,{onClick:()=>{o(!0)},children:"View Details"}),(0,lr.jsxs)(ig,{visible:i,title:"Title",onOk:d,onCancel:d,width:l&&u?"80%":"20%",footer:[(0,lr.jsx)(id,{type:"primary",onClick:d,children:"Ok"},"submit")],children:[(0,lr.jsx)("div",{children:(0,lr.jsx)(bO,{overlay:p,trigger:["click"],children:(0,lr.jsx)("a",{href:"/",onClick:t=>t.preventDefault(),children:(0,lr.jsxs)(pO,{children:[a||"Choose State",(0,lr.jsx)(lb,{})]})})})}),l&&u?(0,lr.jsx)(_ft,{CityNodeCount:u}):(0,lr.jsx)(lr.Fragment,{})]})]})};var wft=function(){const[t,e]=(0,m.useState)([]),[n,r]=(0,m.useState)(1),[i,o]=(0,m.useState)(1),[a,s]=(0,m.useState)(),[l,c]=(0,m.useState)(),u=ht();(0,m.useEffect)((()=>{(async()=>{try{const t=await Pn.get("/api/v1/admin/check-login",{headers:{Cookies:jt.get("admin_cookie")}});if(200===t.status){const{alreadyLoggedIn:e}=t.data;e||(sr.error("You are not logged in"),u("/"))}}catch(t){console.error(t),sr.error("Server Error: "+t.message)}})()}),[]),(0,m.useEffect)((()=>{(async()=>{try{let t=await Pn.get("/api/v1/pagecount",{params:{tableName:"nodes"},headers:{Cookies:jt.get("admin_cookie")}});o(t.data.pageCount.count)}catch(t){console.error("Error fetching Page Count:",t),t.response&&500===t.response.status?sr.error("Server Error: "+t.response.data):sr.error("Error fetching Page Count")}})(),h(),console.log("Check page changed1",n)}),[n]);const h=async()=>{try{const t=await Pn.get("/api/v1/nodes",{params:{pageNumber:n},headers:{Cookies:jt.get("admin_cookie")}});200===t.status&&e(t.data.nodes)}catch(t){console.error("Error fetching rider routes:",t),t.response&&403===t.response.status&&"Access denied"===t.response.data?sr.error("Access denied"):t.response&&500===t.response.status?sr.error("Server Error: "+t.response.data):sr.error("Failed to fetch rider routes")}};return(0,m.useEffect)((()=>{(async()=>{try{const t=await Pn.get("/api/v1/nodes/states/getsates",{headers:{Cookies:jt.get("admin_cookie")}});200===t.status&&(console.log(t.data.stateList),s(t.data.stateList))}catch(t){console.error("Error fetching States:",t)}})()}),[]),(0,lr.jsx)(lr.Fragment,{children:(0,lr.jsxs)("div",{className:"dashboard-content",children:[(0,lr.jsx)(xr,{btnText:"Refresh"}),(0,lr.jsxs)("div",{className:"dashboard-content-container",children:[(0,lr.jsxs)("div",{className:"dashboard-content-header",children:[(0,lr.jsx)("h2",{children:"Nodes Table"}),(0,lr.jsx)(bft,{stateList:a,onData:async t=>{try{const e=await Pn.get("/api/v1/nodes/state/getcitynodes",{params:{state:t},headers:{Cookies:jt.get("admin_cookie")}});200===e.status&&(console.log(e.data.stateCityNodeCount),c(e.data.stateCityNodeCount))}catch(e){console.error("Error fetching States:",e)}},stateCityNodeCount:l}),(0,lr.jsx)("button",{className:"expost-csv-button",onClick:()=>(async()=>{try{const t=await Pn.get("/api/v1/nodes/download",{headers:{Cookies:jt.get("admin_cookie")},responseType:"blob"});if(200===t.status){const e=new Blob([t.data],{type:"text/csv"}),n=window.URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download="nodes.csv",r.click(),window.URL.revokeObjectURL(n),sr.success("Nodes Exported To CSV")}}catch(t){console.error("Error Exporting Nodes To CSV:",t),t.response&&403===t.response.status&&"Access denied"===t.response.data?sr.error("Access denied"):t.response&&500===t.response.status?sr.error("Server Error: "+t.response.data):sr.error("Error Exporting Nodes To CSV")}})(),children:"Export to CSV"})]}),(0,lr.jsx)(RR,{columns:[{title:"Node ID",dataIndex:"node_id",key:"node_id"},{title:"Location",dataIndex:"location",key:"location"},{title:"Description",dataIndex:"description",key:"description"},{title:"Address",dataIndex:"address",key:"address"},{title:"City",dataIndex:"city",key:"city"},{title:"State/Province",dataIndex:"state_province",key:"state_province"},{title:"Zip Code",dataIndex:"zip_postal_code",key:"zip_postal_code"},{title:"Longitude",dataIndex:"long",key:"long"},{title:"Latitude",dataIndex:"lat",key:"lat"},{title:"Locid",dataIndex:"locid",key:"locid"},{title:"Transit Time",dataIndex:"transit_time",key:"transit_time"}],dataSource:t,rowKey:"node_id",pagination:!1,rowClassName:(t,e)=>e%2===0?"row-even":"row-odd"}),(0,lr.jsx)(Kn,{}),(0,lr.jsx)("div",{className:"pagination-container",children:(0,lr.jsx)(Uk,{simple:!0,current:n,total:i,onChange:t=>{r(t)}})})]})]})})};const Sft=Cj({accessToken:"pk.eyJ1IjoiYWhtYWQtYXNsYW0iLCJhIjoiY2xpaW5iYXI1MXJlNzNmcWY4Y3pxenlsYyJ9.Ua15JiMsRNy3GOcz9cn4dw"});var Cft=t=>{let{markers:e,onCornersChange:n}=t;const[r,i]=(0,m.useState)(null),[o,a]=(0,m.useState)([-122.11,37.99]),[s,l]=(0,m.useState)([10]),[c,u]=(0,m.useState)(!1),[h,p]=(0,m.useState)([]),{Search:d}=ob,[f,g]=(0,m.useState)([]),y=(0,m.useRef)([]),v=(0,m.useRef)([]),[x,_]=(0,m.useState)(),[b,w]=(0,m.useState)({}),S=c?(0,lr.jsx)(Xu,{style:{fontSize:16,color:"#1677ff"},spin:!0}):null;(0,m.useEffect)((()=>{if(r&&(console.log("called"),y.current&&(y.current.forEach((t=>t.remove())),y.current=[]),console.log(f.length),f.length>0)){f.forEach((t=>{const e=document.createElement("div");e.innerHTML=t.displayName;const n=new(gB().Marker)({color:"red"}).setLngLat([t.long,t.lat]).addTo(r).setPopup((new(gB().Popup)).setDOMContent(e));y.current.push(n);const i=[t.long,t.lat];r.flyTo({center:i,zoom:15,essential:!0})})),(async()=>{try{console.log("Nearest",f[0].lat)}catch{return void console.log("err")}try{const t=await Pn.post("/api/v1/nodes/nearest",{searchCoordinates:{lat:f[0].lat,long:f[0].long}});200===t.status&&_(t.data.coordinates)}catch(t){console.error(t)}})();try{console.log(x),console.log(f)}catch(Mft){console.log("ERROR ",Mft)}}}),[r,f]),(0,m.useEffect)((()=>{x&&(r.addSource("route",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[[x.long,x.lat],[f[0].long,f[0].lat]]}}}),r.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#888","line-width":8}}))}),[x]);return(0,m.useEffect)((()=>{const t=()=>{try{if(r){console.log("called2");const t=r.getBounds();n([t.getNorthEast(),t.getSouthEast(),t.getSouthWest(),t.getNorthWest()]),v.current.forEach((t=>t.remove())),v.current=[],e.forEach((t=>{const e=new(gB().Marker)({color:"#000000"}).setLngLat([t.long,t.lat]).addTo(r);v.current.push(e)}))}}catch{console.log("Move end no lat long")}};return r&&r.on("moveend",t),()=>{r&&r.off("moveend",t)}}),[r]),(0,m.useEffect)((()=>{try{r&&(v.current.forEach((t=>t.remove())),v.current=[],e.forEach((t=>{if(x.lat==t.lat&&x.long==t.long){const e=new(gB().Marker)({color:"blue"}).setLngLat([t.long,t.lat]).addTo(r);v.current.push(e),w({type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[[x.long,x.lat],[f[0].lat,f[0].long]]}})}else{const e=new(gB().Marker)({color:"#000000"}).setLngLat([t.long,t.lat]).addTo(r);v.current.push(e)}})))}catch{console.log("this3")}}),[r,e]),(0,lr.jsx)("div",{className:"map-display-container",children:(0,lr.jsxs)(Sft,{style:"mapbox://styles/mapbox/outdoors-v12",center:o,zoom:s,onStyleLoad:t=>{i(t),t.on("zoom",(e=>((t,e)=>{const n=t.getZoom();l([n])})(t))),t.on("move",(e=>((t,e)=>{const n=t.getCenter();a([n.lng,n.lat])})(t)))},containerStyle:{height:"100vh"},children:[(0,lr.jsx)(d,{placeholder:"Input search loading default",enterButton:!0,onSearch:async t=>{u(!0);let e=t;console.log(t),e=(t=>t.replace(" ","%20"))(e),""!==e?Pn.get("https://nominatim.openstreetmap.org/search/?q="+e+"&limit=5&format=json&addressdetails=1").then((t=>{if(t.data){let e=[];t.data.forEach((t=>{e.push({displayName:t.display_name,lat:t.lat,long:t.lon})})),p(e),console.log(e)}u(!1)})).catch((t=>{console.error(t),u(!1)})):u(!1)},suffix:S,style:{position:"absolute",zIndex:1,width:"300px",top:"10px",left:"10px",height:"30px"}}),h.length>0&&(0,lr.jsx)("div",{className:"search-results",style:{position:"absolute",zIndex:1,width:"300px",top:"50px",left:"10px",backgroundColor:"rgba(255, 255, 255, 0.8)",padding:"10px",boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.1)"},children:h.map((t=>(0,lr.jsx)("div",{onClick:()=>(t=>{g([t]),console.log("selected location",t),console.log(f.length),p([])})(t),style:{cursor:"pointer",marginBottom:"5px",transition:"box-shadow 0.3s ease",boxShadow:"none"},onMouseEnter:t=>{t.currentTarget.style.boxShadow="0 0 5px 2px rgba(0, 35, 255, 0.8)"},onMouseLeave:t=>{t.currentTarget.style.boxShadow="none"},children:t.displayName},t.displayName)))})]})})};var Eft=function(){const t=ht(),[e,n]=(0,m.useState)([]);return(0,m.useEffect)((()=>{(async()=>{try{const e=await Pn.get("/api/v1/admin/check-login",{headers:{Cookies:jt.get("admin_cookie")}});if(200===e.status){const{alreadyLoggedIn:n}=e.data;n||t("/")}}catch(e){console.error(e)}})()}),[]),(0,lr.jsx)("div",{className:"map-container-wrapper",children:(0,lr.jsx)(Cft,{markers:e,onCornersChange:async t=>{try{const e=await Pn.get(`/api/v1/nodes/display?corners=${t}`,{headers:{Cookies:jt.get("admin_cookie")}});200===e.status&&n(e.data.nodesData)}catch(e){console.error(e)}}})})};var kft=function(){return(0,lr.jsx)(Dt,{children:(0,lr.jsx)("div",{className:"dashboard-container",children:(0,lr.jsx)("div",{className:"dashboard-body",children:(0,lr.jsxs)(kt,{children:[(0,lr.jsx)(Ct,{path:"*",element:(0,lr.jsx)("div",{})}),(0,lr.jsx)(Ct,{exact:!0,path:"/",element:(0,lr.jsx)(bN,{})}),(0,lr.jsx)(Ct,{exact:!0,path:"/summary",element:(0,lr.jsxs)("div",{children:[(0,lr.jsx)(hr,{menu:mr}),(0,lr.jsx)(cN,{})]})}),(0,lr.jsx)(Ct,{exact:!0,path:"/drtable",element:(0,lr.jsxs)("div",{children:[(0,lr.jsx)(hr,{menu:mr}),(0,lr.jsx)(LR,{})]})}),(0,lr.jsx)(Ct,{exact:!0,path:"/rroutes",element:(0,lr.jsxs)("div",{children:[(0,lr.jsx)(hr,{menu:mr}),(0,lr.jsx)(tB,{})]})}),(0,lr.jsx)(Ct,{exact:!0,path:"/droutes",element:(0,lr.jsxs)("div",{children:[(0,lr.jsx)(hr,{menu:mr}),(0,lr.jsx)(rB,{})]})}),(0,lr.jsx)(Ct,{exact:!0,path:"/rroutenodes",element:(0,lr.jsxs)("div",{children:[(0,lr.jsx)(hr,{menu:mr}),(0,lr.jsx)(iB,{})]})}),(0,lr.jsx)(Ct,{exact:!0,path:"/droutenodes",element:(0,lr.jsxs)("div",{children:[(0,lr.jsx)(hr,{menu:mr}),(0,lr.jsx)(oB,{})]})}),(0,lr.jsx)(Ct,{exact:!0,path:"/drroutestable",element:(0,lr.jsxs)("div",{children:[(0,lr.jsx)(hr,{menu:mr}),(0,lr.jsx)(dB,{})]})}),(0,lr.jsx)(Ct,{exact:!0,path:"/displaynodestable",element:(0,lr.jsxs)("div",{children:[(0,lr.jsx)(hr,{menu:mr}),(0,lr.jsx)(wft,{})]})}),(0,lr.jsx)(Ct,{exact:!0,path:"/displayallnodes",element:(0,lr.jsx)("div",{children:(0,lr.jsx)(Mj,{})})}),(0,lr.jsx)(Ct,{exact:!0,path:"/displaymaproutes",element:(0,lr.jsx)("div",{children:(0,lr.jsx)(gX,{})})}),(0,lr.jsx)(Ct,{exact:!0,path:"/displaynearestnode",element:(0,lr.jsx)("div",{children:(0,lr.jsx)(Eft,{})})})]})})})})};v.createRoot(document.getElementById("root")).render((0,lr.jsx)(kft,{}))}()}();
//# sourceMappingURL=main.287ef370.js.map